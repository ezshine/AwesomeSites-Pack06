import{S as b,i as X,s as S,e as p,j as z,k as w,t as q,c as v,a as f,m as H,n as P,g as $,d as _,b as m,f as M,o as C,I as h,J as k,x as j,u as K,v as T,H as W,A as E,O as y,P as O}from"../../../../chunks/vendor-e41d84ae.js";import{a as A}from"../../../../chunks/main.store-b2f445ba.js";import I from"./svg/SvgWave.svelte-b02f8879.js";class V{constructor(t){this.lineX=0,this.speedX=this.speedXMin=.05,this.speedXMax=1,this.sizePct=0,this.line1Pct=.5,this.line2Pct=.5,this.frequency1=0,this.frequency2=0,this._svg=document.querySelector("#waves"),this._wrapper1=this._svg.querySelector("#line-1-wrapper"),this._line1=this._wrapper1.querySelector("#line-1"),this._wrapper2=this._svg.querySelector("#line-2-wrapper"),this._line2=this._wrapper2.querySelector("#line-2"),this._text1=document.querySelector(".call__waves__text--1"),this._text2=document.querySelector(".call__waves__text--2"),this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.isPlaying=!1,document.addEventListener("mouseup",this.deactivateKey.bind(this)),document.addEventListener("touchend",this.deactivateKey.bind(this)),this.loop(),t.register(this.loop.bind(this))}loop(){this.setText(),this.setWaves()}setText(){this._text1.innerText=this.frequency1+"Hz",this._text2.innerText=this.frequency2+"Hz",this.isPlaying||(this.frequency1=Math.max(0,this.frequency1-50),this.frequency2=Math.max(0,this.frequency2-65))}setWaves(){this.lineX-=this.speedX,this.lineX<-12&&(this.lineX+=12),this._line1.style.transform=`translateX(${this.lineX}px)`,this._line2.style.transform=`translateX(${this.lineX}px)`;let t=.7+this.sizePct*.8;this._wrapper1.style.transform=`scale(${1+this.line1Pct}, ${t})`,this._wrapper2.style.transform=`scale(${1+this.line2Pct}, ${t})`,this.isPlaying||(this.sizePct=Math.max(0,this.sizePct-.1),this.line1Pct=Math.max(.5,this.line1Pct-.05),this.line2Pct=Math.max(.5,this.line2Pct-.05))}activateKey(t){this.deactivateKey();const e=this.getFrequencies(t);this.isPlaying=!0,this.oscillator1=this.startOscillator(e[0]),this.oscillator2=this.startOscillator(e[1]),this.sizePct=1,this.speedX=this.speedXMax,this.line1Pct=(e[0]-697)/780,this.line2Pct=(e[1]-697)/780,this.frequency1=e[0],this.frequency2=e[1]}startOscillator(t){const e=this.audioContext.createOscillator(),a=this.audioContext.createGain();return e.connect(a),a.connect(this.audioContext.destination),a.gain.value=.1,e.type="sine",e.frequency.setValueAtTime(t,this.audioContext.currentTime),e.start(),e}deactivateKey(){this.speedX=this.speedXMin,this.isPlaying&&(this.isPlaying=!1,this.oscillator1.stop(),this.oscillator2.stop(),this.oscillator1=null,this.oscillator2=null)}getFrequencies(t){switch(t){case"1":return[697,1209];case"2":return[697,1336];case"3":return[697,1477];case"4":return[770,1209];case"5":return[770,1336];case"6":return[770,1477];case"7":return[852,1209];case"8":return[852,1336];case"9":return[852,1477];case"reset":return[941,1209];case"0":return[941,1336];case"+":return[941,1477]}}}function D(l){let t,e,a,r,n,u,c,d,o;return e=new I({}),{c(){t=p("div"),z(e.$$.fragment),a=w(),r=p("div"),n=q("0Hz"),u=w(),c=p("div"),d=q("0Hz"),this.h()},l(i){t=v(i,"DIV",{class:!0});var s=f(t);H(e.$$.fragment,s),a=P(s),r=v(s,"DIV",{class:!0});var x=f(r);n=$(x,"0Hz"),x.forEach(_),u=P(s),c=v(s,"DIV",{class:!0});var g=f(c);d=$(g,"0Hz"),g.forEach(_),s.forEach(_),this.h()},h(){m(r,"class","call__waves__text call__waves__text--1 svelte-1pky4ij"),m(c,"class","call__waves__text call__waves__text--2 svelte-1pky4ij"),m(t,"class","call__right svelte-1pky4ij")},m(i,s){M(i,t,s),C(e,t,null),h(t,a),h(t,r),h(r,n),h(t,u),h(t,c),h(c,d),l[5](t),o=!0},p:k,i(i){o||(j(e.$$.fragment,i),o=!0)},o(i){K(e.$$.fragment,i),o=!1},d(i){i&&_(t),T(e),l[5](null)}}}function F(l,t,e){let a;W(l,A,s=>e(7,a=s));let r,n;E(()=>{});function u(){y.set(n,{opacity:1,scale:1}),y.from(n,{delay:1.3,duration:.8,opacity:0,scale:3.5,ease:"power4.out"})}function c(){y.to(n,{delay:0,duration:.3,opacity:0,scale:1.8,ease:"power1.in"})}function d(s){r=new V(a)}function o(s){r.activateKey(s.detail.toString())}function i(s){O[s?"unshift":"push"](()=>{n=s,e(0,n)})}return[n,u,c,d,o,i]}class J extends b{constructor(t){super();X(this,t,F,D,S,{show:1,hide:2,init:3,buttonHandler:4})}get show(){return this.$$.ctx[1]}get hide(){return this.$$.ctx[2]}get init(){return this.$$.ctx[3]}get buttonHandler(){return this.$$.ctx[4]}}export{J as default};
