import{S as x,i as H,s as j,e as g,j as G,c as y,a as v,m as O,d as c,b as _,f as b,I as A,o as D,J as I,x as f,u as d,v as W,l as S,w as B,H as T,a7 as V,r as Y,O as k,P as F}from"../../../chunks/vendor-e41d84ae.js";import{a as J}from"../../../chunks/main.store-b2f445ba.js";import{A as M}from"../../../chunks/airstripLights-436a2309.js";import N from"./svg/SvgGrid.svelte-262aac30.js";class P{constructor(s){this.animate=s,this.svg=document.querySelector(".unlock__grid #grid");let t=Array.convert(this.svg.querySelectorAll('[id*="active"]'));t.reverse(),this.airstripLights=new M(t,6,6,230),this.initBalloon(),this.loop(),this.localLoop=this.loop.bind(this),this.animate.register(this.localLoop)}destroy(){this.animate.unregister(this.localLoop),this.localLoop=null,this.airstripLights.destroy(),this.airstripLights=null,this.animate=null}initBalloon(){this.baloonElements=[];for(var s=1;s<=4;s++){var t=this.svg.querySelector(`#b1-${s}`);t.style.display="none",this.baloonElements.push(t)}for(var e=1;e<=3;e++){var t=this.svg.querySelector(`#b2-${e}`);t.style.display="none",this.baloonElements.push(this.svg.querySelector(`#b2-${e}`))}}loop(){if(this.airstripLights.render(),this.isShowing){if(this.showCounter%1==0){if(this.showCounter<7){var s=this.baloonElements[this.showCounter];s.style.display="block"}if(this.showCounter>=35){this.isShowing=!1;for(var t=0;t<this.baloonElements.length;t++){var s=this.baloonElements[t];s.style.display="none"}}}this.showCounter+=.5}}rebuildElements(s,t){this.isShowing?this.showCounter=Math.min(this.showCounter,10):(this.isShowing=!0,this.showCounter=0);for(var e=1;e<=4;e++){let r=this.svg.querySelector(`#b1-${e}`);t.indexOf(e)!=-1?r.style.opacity=1:r.style.opacity=.5;for(var i=1;i<=3;i++){if(e==1){let l=this.svg.querySelector(`#b2-${i}`);s.indexOf(i)!=-1?l.style.opacity=1:l.style.opacity=.5}let o=this.svg.querySelector(`#r${e}-c${i}`);s.indexOf(i)!=-1&&t.indexOf(e)!=-1?o.style.opacity=1:o.style.opacity=.5}}}}function E(n){let s,t,e,i;return e=new N({}),{c(){s=g("div"),t=g("div"),G(e.$$.fragment),this.h()},l(r){s=y(r,"DIV",{class:!0});var o=v(s);t=y(o,"DIV",{class:!0});var l=v(t);O(e.$$.fragment,l),l.forEach(c),o.forEach(c),this.h()},h(){_(t,"class","unlock__grid svelte-v4iimu"),_(s,"class","unlock__grid__wrapper svelte-v4iimu")},m(r,o){b(r,s,o),A(s,t),D(e,t,null),n[9](t),i=!0},p:I,i(r){i||(f(e.$$.fragment,r),i=!0)},o(r){d(e.$$.fragment,r),i=!1},d(r){r&&c(s),W(e),n[9](null)}}}function z(n){let s,t,e=n[1]&&E(n);return{c(){e&&e.c(),s=S()},l(i){e&&e.l(i),s=S()},m(i,r){e&&e.m(i,r),b(i,s,r),t=!0},p(i,[r]){i[1]?e?(e.p(i,r),r&2&&f(e,1)):(e=E(i),e.c(),f(e,1),e.m(s.parentNode,s)):e&&(Y(),d(e,1,1,()=>{e=null}),B())},i(i){t||(f(e),t=!0)},o(i){d(e),t=!1},d(i){e&&e.d(i),i&&c(s)}}}function K(n,s,t){let e;T(n,J,h=>t(8,e=h));let i,r,o=!1,l=!0,a,u;function w(){t(1,o=!0)}function $(){u=k.timeline(),u.to(r,{duration:.5,opacity:0,rotateY:-140,ease:"back.in",onComplete:p})}function p(){t(1,o=!1),m()}function C(h,q){i&&i.rebuildElements(h,q)}function m(){a&&(a.kill(),t(7,a=null)),u&&(u.kill(),u=null),i&&(i.destroy(),i=null)}V(()=>{m()});function L(h){F[h?"unshift":"push"](()=>{r=h,t(0,r)})}return n.$$.update=()=>{n.$$.dirty&449&&r&&l&&(t(6,l=!1),i=new P(e),t(7,a=k.timeline()),a.from(r,{duration:.7,opacity:0,rotateY:-140,ease:"back.out"}))},[r,o,w,$,p,C,l,a,e,L]}class R extends x{constructor(s){super();H(this,s,K,z,j,{show:2,hide:3,hideHandler:4,rebuildElements:5})}get show(){return this.$$.ctx[2]}get hide(){return this.$$.ctx[3]}get hideHandler(){return this.$$.ctx[4]}get rebuildElements(){return this.$$.ctx[5]}}export{R as default};
