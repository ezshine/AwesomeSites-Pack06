import{S as G,i as J,s as R,e as _,k as H,j as U,c as v,a as y,d as m,n as C,m as Z,b as k,f as V,I as w,o as z,J as K,x,u as Y,v as Q,l as E,w as $,H as T,ae as tt,a7 as et,r as st,O as I,P as S}from"../../../chunks/vendor-e41d84ae.js";import it from"./svg/SvgWidget.svelte-9b33b5cc.js";import{a as rt,m as ot}from"../../../chunks/main.store-b2f445ba.js";import{A as nt}from"../../../chunks/airstripLights-436a2309.js";import{B as at}from"../../../chunks/blink-99cbd8c9.js";class lt{constructor(e){this.element=e,this.counter=0,this._isShowing=!1,this._isHiding=!1}show(e,s,t,r){this.text=e,this.steps=s,this.chars=t,this.callback=r,this.counter=0,this._isShowing=!0,this._isHiding=!1}hide(e,s,t){this.steps=e,this.chars=s,this.callback=t,this.counter=0,this._isHiding=!0,this._isShowing=!1}destroy(){this.views=null,this.openCallback=null,this.closeCallback=null}render(){this._isShowing?this.doShow():this._isHiding&&this.doHide()}resetViews(e){this.views=e}doShow(){if(this.counter++,this.counter%this.steps==0){let e=this.counter/this.steps;this.element.innerText=this.text.substr(0,e*this.chars),e*this.chars>=this.text.length&&(this._isShowing=!1,typeof this.callback=="function"&&this.callback())}}doHide(){if(this.counter++,this.counter%this.steps==0){let e=this.counter/this.steps;this.element.innerText=this.text.substr(0,this.text.length-e*this.chars),e*this.chars>=this.text.length&&(this._isHiding=!1,typeof this.callback=="function"&&this.callback())}}isHiding(){return this._isHiding}isShowing(){return this._isShowing}}class ht{constructor(e,s){this.animate=e,this.mouseMove=s;let t=document.querySelector("#widget");this.barH=t.querySelector("#bar-h"),this.barH.style.transformOrigin="7px 0px",this.barV=t.querySelector("#bar-v"),this.barV.style.transformOrigin="7px 0px",this.arrowX=t.querySelector("#arrow-x"),this.arrowY=t.querySelector("#arrow-y");let r=t.querySelector("#recording-icon");this.blinkController=new at(r,[30,30]);let a=Array.convert(t.querySelectorAll('[id*="io"]'));a.reverse(),this.airstripLights=new nt(a,3,3,164),this.loop(),this.localLoop=this.loop.bind(this),e.register(this.localLoop)}destroy(){this.animate.unregister(this.localLoop),this.localLoop=null,this.mouseMove=null,this.animate=null,this.blinkController.destroy(),this.blinkController=null,this.airstripLights.destroy(),this.airstripLights=null}loop(){this.barH.style.transform=`scaleX(${Math.abs(this.mouseMove.speedX)})`,this.barV.style.transform=`scaleX(${Math.abs(this.mouseMove.speedY)})`,this.arrowX.style.x=7+Math.round(32*this.mouseMove.slowPctX),this.arrowY.style.x=7+Math.round(32*this.mouseMove.slowPctY),this.blinkController.render(),this.airstripLights.render()}}function q(o){let e,s,t,r,a,b,p,f,h,l,u;return l=new it({}),{c(){e=_("div"),s=_("div"),t=_("div"),r=H(),a=_("div"),b=H(),p=_("div"),f=H(),h=_("div"),U(l.$$.fragment),this.h()},l(c){e=v(c,"DIV",{class:!0});var i=y(e);s=v(i,"DIV",{class:!0});var d=y(s);t=v(d,"DIV",{class:!0}),y(t).forEach(m),r=C(d),a=v(d,"DIV",{class:!0}),y(a).forEach(m),b=C(d),p=v(d,"DIV",{class:!0}),y(p).forEach(m),d.forEach(m),f=C(i),h=v(i,"DIV",{class:!0});var g=y(h);Z(l.$$.fragment,g),g.forEach(m),i.forEach(m),this.h()},h(){k(t,"class","border svelte-1nr32xk"),k(a,"class","text svelte-1nr32xk"),k(p,"class","block svelte-1nr32xk"),k(s,"class","intro svelte-1nr32xk"),k(h,"class","widget svelte-1nr32xk"),k(e,"class","wrapper svelte-1nr32xk")},m(c,i){V(c,e,i),w(e,s),w(s,t),w(s,r),w(s,a),o[14](a),w(s,b),w(s,p),o[15](p),o[16](s),w(e,f),w(e,h),z(l,h,null),o[17](h),o[18](e),u=!0},p:K,i(c){u||(x(l.$$.fragment,c),u=!0)},o(c){Y(l.$$.fragment,c),u=!1},d(c){c&&m(e),o[14](null),o[15](null),o[16](null),Q(l),o[17](null),o[18](null)}}}function ct(o){let e,s,t=o[5]&&q(o);return{c(){t&&t.c(),e=E()},l(r){t&&t.l(r),e=E()},m(r,a){t&&t.m(r,a),V(r,e,a),s=!0},p(r,[a]){r[5]?t?(t.p(r,a),a&32&&x(t,1)):(t=q(r),t.c(),x(t,1),t.m(e.parentNode,e)):t&&(st(),Y(t,1,1,()=>{t=null}),$())},i(r){s||(x(t),s=!0)},o(r){Y(t),s=!1},d(r){t&&t.d(r),r&&m(e)}}}function ut(o,e,s){let t,r;T(o,rt,n=>s(12,t=n)),T(o,ot,n=>s(13,r=n));let a=tt(),b=!1,p=!0,f,h,l,u,c,i,d,g;function D(){s(5,b=!0)}function A(){I.to(h,{duration:.6,opacity:0,rotateY:-180,ease:"back.in",onComplete:M})}function M(){s(5,b=!1),L()}function j(){g.show("-------- ANALYZE> GESTURE> ACTIVITY -------- ",1,1)}function W(){g.hide(1,1)}function X(){a("shown")}function L(){i&&(i.kill(),s(10,i=null)),d&&(d.destroy(),d=null)}et(()=>{L()});function O(n){S[n?"unshift":"push"](()=>{c=n,s(4,c)})}function P(n){S[n?"unshift":"push"](()=>{u=n,s(3,u)})}function B(n){S[n?"unshift":"push"](()=>{l=n,s(2,l)})}function N(n){S[n?"unshift":"push"](()=>{h=n,s(1,h)})}function F(n){S[n?"unshift":"push"](()=>{f=n,s(0,f)})}return o.$$.update=()=>{o.$$.dirty&15903&&f&&p&&(s(9,p=!1),d=new ht(t,r),s(11,g=new lt(c)),t.register(g.render.bind(g)),s(10,i=I.timeline({paused:!0})),i.set(h,{rotateY:120}),i.set(l,{css:{transformStyle:"preserve-3d"}}),i.to(f,{duration:.3,opacity:1}),i.to(l,{duration:2.1,opacity:1,rotateY:0,ease:"elastic.out"},"<"),i.to(u,{duration:.8,width:40,height:40,ease:"power4.inOut"},"<"),i.to(u,{duration:.4,width:10,height:10,ease:"power4.in"},">"),i.to(u,{duration:.4,width:60,height:10,ease:"power4.in"},">"),i.to(u,{duration:.5,opacity:0,height:70,ease:"power4.inOut",onComplete:j},">"),i.to(l,{duration:1.9,rotateY:12,ease:"sine.out"},">"),i.to(l,{duration:.7,rotateY:100,ease:"back.in",onStart:W},">"),i.set(l,{opacity:0}),i.to(h,{duration:.8,rotateY:-22,ease:"power4.out"}),i.to(h,{duration:1.4,rotateY:20,ease:"elastic.out",onComplete:X},">"),i.play())},[f,h,l,u,c,b,D,A,M,p,i,g,t,r,O,P,B,N,F]}class wt extends G{constructor(e){super();J(this,e,ut,ct,R,{show:6,hide:7,hideHandler:8})}get show(){return this.$$.ctx[6]}get hide(){return this.$$.ctx[7]}get hideHandler(){return this.$$.ctx[8]}}export{wt as default};
