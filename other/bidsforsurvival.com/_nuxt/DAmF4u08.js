import{_ as ct}from"./4V-YWko9.js";import{_ as nt}from"./CpY-ecYb.js";import{d as E,s as I,z as F,C as dt,P as S,Q as pt,R as _t,S as R,U as Y,V as mt,W as gt,r as V,o as a,c as p,f as L,w as d,E as T,b as t,F as O,a as W,T as ot,X as ht,j as st,O as N,G as b,H as h,K as w,L as x,n as vt,Y as ft,y as B,l as yt,q as bt,B as J,k as wt,p as xt,Z as kt,D as tt,v as Ct,m as $t,$ as Lt,a0 as Tt,I as et,a1 as Mt}from"./CmfzVdrr.js";import{u as It}from"./BxVVLviT.js";const St={class:"audio"},Vt=["innerHTML"],At=E({__name:"Audio",props:{audio:{},subtitles:{}},setup(D){const u=D,n=u.audio,{roomIntro:_}=I(F()),{sound:A}=I(dt()),k=S(),m=pt.timeline({paused:!0,defaults:{ease:"none"}}),M=_t();R(M,s=>{s!=="hidden"&&setTimeout(()=>{var e;(e=ht.Howler.ctx)==null||e.resume()},200)}),Y(()=>{setTimeout(()=>{u.subtitles.map((s,e)=>{var o;const c=new mt(k.value[e]);m.from(c.chars,{duration:.2,autoAlpha:0,stagger:.05},s.startTime),m.to(c.chars,{duration:.2,autoAlpha:0,stagger:.05},(((o=u.subtitles[e+1])==null?void 0:o.startTime)||(n==null?void 0:n.duration())||0)-s.text.length/20-.5)})},0)});const v=S(!0);async function l(){n.seek(0),n.volume(A.value?1:0),n==null||n.play(),setTimeout(()=>{m.play(),v.value=!1},0)}function f(){m.pause(),v.value=!0,n.fade(1,0,1e3),setTimeout(()=>{n==null||n.pause()},1e3)}return Y(()=>{R(_,async(s,e)=>{s?await l():e&&f()},{immediate:!0})}),gt(()=>{n==null||n.pause(),m.kill()}),(s,e)=>{const c=V("visible"),o=V("lay");return a(),p("div",St,[(a(),L(ot,{to:"#teleports"},[d((a(),p("div",null,[(a(!0),p(O,null,W(s.subtitles,i=>{var y;return d((a(),p("h4",{ref_for:!0,ref_key:"subtitlesEl",ref:k,class:"typo-subtitles subtitles",innerHTML:i.text},null,8,Vt)),[[c,((y=t(n))==null?void 0:y.playing())&&!t(v)]])}),256))])),[[o,{dir:"o",align:["end","center"]}],[T,t(_)]])]))])}}}),Bt=st(At,[["__scopeId","data-v-b07a226e"]]),Dt=`<svg viewBox="0 0 15 25" xmlns="http://www.w3.org/2000/svg">
  <path d="M1 12.5L14 12.5" />
  <path d="M3.25 14.75L1 12.5L3.25 10.25" />
  <path d="M11.75 10.25L14 12.5L11.75 14.75" />
  <path d="M7.5 6.5L7.5 18.5" />
  <path d="M5.25 8.25L7.5 6L9.75 8.25" />
  <path d="M9.75 16.75L7.5 19L5.25 16.75" />
</svg>`,Ht=`<svg viewBox="0 0 14 25" xmlns="http://www.w3.org/2000/svg">
  <path
    d="M4.38408 13.8233L3.60179 12.628C2.77872 11.3704 1.49183 11.7423 1.2624 11.8574C1.04654 11.9684 0.942861 12.2454 1.03196 12.4753L2.11483 15.2771C2.28655 15.7213 2.72494 16.3494 3.08826 16.6649C3.08826 16.6649 5.26673 18.4681 5.26673 19.1441V20H11.4433V19.1441C11.4433 18.4681 12.7746 16.3388 12.7746 16.3388C13.0196 15.9249 13.2238 15.1958 13.2238 14.7117V11.1515C13.2076 10.3633 12.538 9.72451 11.7112 9.72451C11.2977 9.72451 10.9626 10.044 10.9626 10.4382V10.7233C10.9626 9.9351 10.2927 9.29632 9.4659 9.29632C9.05232 9.29632 8.71729 9.61583 8.71729 10.01V10.2951C8.71729 9.50694 8.04732 8.86813 7.22056 8.86813C6.80699 8.86813 6.47195 9.1877 6.47195 9.58188V9.86701C6.47195 9.86701 6.28569 7.211 6.20308 5.88339C6.17068 5.38622 5.75315 5 5.26586 5C4.77513 5 4.38346 5.39482 4.38346 5.88215C4.38326 8.52919 4.38408 13.8233 4.38408 13.8233Z"
    stroke-linejoin="round" />
</svg>`,Rt=`<svg viewBox="0 0 110 25" xmlns="http://www.w3.org/2000/svg">
  <rect x="0" y="0" width="50" height="25" rx="12.5" />
  <path d="M20,12.5 l10,0" />
  <path d="M25,8 L20,12.5 L25,17" />
  <rect x="60" y="0" width="50" height="25" rx="12.5" />
  <path d="M80,12.5 l10,0" />
  <path d="M85,8 L90,12.5 L85,17" />
</svg>`,Nt=["innerHTML"],Et=E({__name:"Tutorial",setup(D){const u=new Map([["tutorial_1",Dt],["tutorial_2",Ht],["tutorial_3",Rt]]),n=["tutorial_1","tutorial_2","tutorial_3"],_=S(0),{roomIntro:A,tutorialEnd:k}=I(F());let m;function M(){clearInterval(m),_.value<n.length-1?_.value+=1:k.value=!0}return(v,l)=>{const f=nt,s=V("lay"),e=V("pad");return t(k)?B("",!0):d((a(),p("div",{key:0,id:"tutorial",onClick:M},[d((a(),p("div",null,[(a(),p(O,null,W(n,(c,o)=>d(N("div",{key:o,class:vt(["slide",{active:t(_)===o}]),style:ft({opacity:n[t(_)]===c?1:0})},[N("div",{innerHTML:t(u).get(c)},null,8,Nt),b(f,{typo:"button"},{default:h(()=>[w(x(v.$t(c)),1)]),_:2},1024)],6),[[s]])),64))])),[[s,{dir:"o",align:["start","center"]}],[e,"s"]])])),[[s,{align:"center"}]])}}}),Ft={class:"flex"},Ot={class:"artworks flex"},Wt=E({__name:"index",async setup(D){var P,U;let u,n;const{mainTitle:_,nextRoom:A}=I(yt()),{roomIntro:k,audioEls:m,transitioning:M}=I(F()),v=bt();J(()=>Lt()(v));const{slug:l,room:f}=v.params,s=wt("exhibitions",l),e=s==null?void 0:s.rooms,c=e==null?void 0:e.find(r=>r.slug.current===f),o=xt(c,"room"),i=e==null?void 0:e.findIndex(r=>r.slug.current===f);_.value=s.title;const y=S(!1),j=(P=o.artworks)==null?void 0:P.filter(r=>r.indexable),H=S(),z=J(()=>{var r;return(r=m.value.find(C=>C.slug===f))==null?void 0:r.audio});if((U=o.voiceOver)!=null&&U.url){const{data:r}=([u,n]=kt(()=>It(`/subtitles/${l}-${f}.json`,{server:!1},"$2PAWWcGy5F")),u=await u,n(),u);R(r,C=>{C&&(H.value=C)},{immediate:!0})}function at(){Tt().$gl.manager.skipRoomIntro()}return tt("ArrowLeft",async()=>{e[i-1]&&await et(`/${l}/${e[i-1].slug.current}`)}),tt("ArrowRight",async()=>{e[i+1]&&await et(`/${l}/${e[i+1].slug.current}`)}),Ct({...o.seoDescription&&{description:o.seoDescription},...o.seoImage&&{ogImage:o.seoImage.default.url}}),(r,C)=>{var G,K,Z,Q,X;const $=ct,q=nt,rt=Bt,it=Et,ut=Mt,lt=V("pad");return a(),p("main",null,[N("div",Ft,[d(b($,{theme:"button",background:"grey",typo:"button",icon:{name:"arrow",position:"left",rotate:180},url:`/${t(l)}/${(G=t(e)[t(i)-1])==null?void 0:G.slug.current}`},{default:h(()=>{var g;return[w(x((g=t(e)[t(i)-1])==null?void 0:g.title),1)]}),_:1},8,["url"]),[[T,t(e)[t(i)-1]]]),b($,$t({onClick:C[0]||(C[0]=g=>y.value=!t(y)),theme:"button",background:"white",typo:"button"},{...t(o).description&&{icon:{name:t(y)?"minus":"plus"},active:t(y)}}),{default:h(()=>[w(x(t(o).title),1)]),_:1},16),d(b($,{theme:"button",background:"grey",typo:"button",icon:{name:"arrow"},align:"end",url:`/${t(l)}/${(K=t(e)[t(i)+1])==null?void 0:K.slug.current}`},{default:h(()=>{var g;return[w(x((g=t(e)[t(i)+1])==null?void 0:g.title),1)]}),_:1},8,["url"]),[[T,t(e)[t(i)+1]]])]),t(o).description?d((a(),L(q,{key:0,theme:"boxed",background:"white",text:t(o).description},null,8,["text"])),[[T,t(y)]]):B("",!0),d((a(),p("div",Ot,[b(q,{theme:"boxed",background:"yellow",typo:"button"},{default:h(()=>[w(x(r.$t("artwork",2)),1)]),_:1}),(a(!0),p(O,null,W(t(j),g=>(a(),L($,{theme:"button",background:"hoverable",typo:"button",url:g.url.current},{default:h(()=>[w(x(g.title),1)]),_:2},1032,["url"]))),256))])),[[lt,"s"],[T,(Z=t(j))==null?void 0:Z.length]]),d(b($,{id:"next-room",theme:"button",background:"grey",typo:"button",icon:{name:"arrow"},full:!0,align:"start",url:`/${t(l)}/${(Q=t(e)[t(i)+1])==null?void 0:Q.slug.current}`},{default:h(()=>[w(x(r.$t("next_room")),1)]),_:1},8,["url"]),[[T,!t(M)&&r.$mq.m&&t(A)&&t(e)[t(i)+1]]]),(X=t(o).voiceOver)!=null&&X.url&&t(H)&&t(z)?(a(),L(rt,{key:1,audio:t(z),subtitles:t(H)},null,8,["audio","subtitles"])):B("",!0),(a(),L(ot,{to:"#teleports"},[t(k)&&!t(o).unskippable?(a(),L($,{key:0,id:"skipper",theme:"button",background:"white",icon:{name:"play"},onClick:at},{default:h(()=>[w(x(r.$t("skip_cta")),1)]),_:1})):B("",!0)])),b(ut,null,{default:h(()=>[b(it)]),_:1})])}}}),qt=st(Wt,[["__scopeId","data-v-4db581c1"]]);export{qt as default};
