"use strict";(self["webpackChunkgl_starter"]=self["webpackChunkgl_starter"]||[]).push([[1794],{92571:function(t,e,n){n.d(e,{H:function(){return o},_:function(){return r}});var i=n(4638);class r extends Error{constructor(t){super(t),this.name="AbortError"}}class o{constructor(t){if(this._signal=new i.R,t){Array.isArray(t)||(t=arguments);for(const e of t)e.aborted?this.abort():e.addEventListener("abort",(()=>{this.abort()}))}}get signal(){return this._signal}abort(){(0,i.G)(this._signal)}static timeout(t){const e=new i.R,n=setTimeout(i.G,t,e);return"function"===typeof n.unref&&n.unref(),e}}},4638:function(t,e,n){n.d(e,{G:function(){return a},R:function(){return o}});const i=new WeakMap,r=new WeakMap;class o{constructor(){this.onabort=null,i.set(this,[]),r.set(this,!1)}get aborted(){if(!r.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");return r.get(this)}static get none(){return new o}addEventListener(t,e){if(!i.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");const n=i.get(this);n.push(e)}removeEventListener(t,e){if(!i.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");const n=i.get(this),r=n.indexOf(e);r>-1&&n.splice(r,1)}dispatchEvent(t){throw new Error("This is a stub dispatchEvent implementation that should not be used.  It only exists for type-checking purposes.")}}function a(t){if(t.aborted)return;t.onabort&&t.onabort.call(t);const e=i.get(t);e&&e.slice().forEach((e=>{e.call(t,{type:"abort"})})),r.set(t,!0)}},7748:function(t,e,n){n.d(e,{D_:function(){return c},_8:function(){return s},k_:function(){return o}});var i=n(92571);let r;function o(t){if(t.aborted)throw new i._("Aborted")}function a(t){if(!c(t))throw t}function s(t){return t.catch(a)}function c(t){return"AbortError"===t.name||"Aborted"===t.message}r=window.AbortController?t=>{const e=new AbortController;return t.addEventListener("abort",(()=>{e.abort()})),e.signal}:()=>{},e["ZP"]=r},68736:function(t,e,n){n.d(e,{Z:function(){return i}});class i{constructor(){this.resolve=t=>{this._resolve(t)},this.reject=t=>{this._reject(t)},this.promise=new Promise(((t,e)=>{this._resolve=t,this._reject=e}))}}},97703:function(t,e,n){n.r(e),n.d(e,{AppServiceClass:function(){return tn},default:function(){return nn}});var i=n(54297);class r{constructor(){this._resources=new Map}addImage(t,e){const n=new i.PA(e);this._resources.set(t,n)}remove(t){this._resources.has(t)&&this._resources.delete(t)}load(t){return this._resources.get(t).load()}get(t){return this._resources.get(t)}has(t){return this._resources.has(t)}}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var o,a,s=function(){return s=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},s.apply(this,arguments)};function c(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}function u(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function l(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(i=o.next()).done)a.push(i.value)}catch(s){r={error:s}}finally{try{i&&!i.done&&(n=o["return"])&&n.call(o)}finally{if(r)throw r.error}}return a}function d(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}(function(t){t["Start"]="xstate.start",t["Stop"]="xstate.stop",t["Raise"]="xstate.raise",t["Send"]="xstate.send",t["Cancel"]="xstate.cancel",t["NullEvent"]="",t["Assign"]="xstate.assign",t["After"]="xstate.after",t["DoneState"]="done.state",t["DoneInvoke"]="done.invoke",t["Log"]="xstate.log",t["Init"]="xstate.init",t["Invoke"]="xstate.invoke",t["ErrorExecution"]="error.execution",t["ErrorCommunication"]="error.communication",t["ErrorPlatform"]="error.platform",t["ErrorCustom"]="xstate.error",t["Update"]="xstate.update",t["Pure"]="xstate.pure",t["Choose"]="xstate.choose"})(o||(o={})),function(t){t["Parent"]="#_parent",t["Internal"]="#_internal"}(a||(a={}));var h,f=o.Start,v=o.Stop,p=o.Raise,y=o.Send,g=o.Cancel,m=o.NullEvent,w=o.Assign,_=(o.After,o.DoneState,o.Log),b=o.Init,S=o.Invoke,x=(o.ErrorExecution,o.ErrorPlatform),E=o.ErrorCustom,A=o.Update,C=o.Choose,O=o.Pure,P=".",T={},k="xstate.guard",I="",N=!0;function R(t,e,n){void 0===n&&(n=P);var i=U(t,n),r=U(e,n);return rt(r)?!!rt(i)&&r===i:rt(i)?i in r:Object.keys(i).every((function(t){return t in r&&R(i[t],r[t])}))}function j(t){try{return rt(t)||"number"===typeof t?"".concat(t):t.type}catch(e){throw new Error("Events must be strings or objects with a string event.type property.")}}function L(t,e){try{return nt(t)?t:t.toString().split(e)}catch(n){throw new Error("'".concat(t,"' is not a valid state path."))}}function D(t){return"object"===typeof t&&"value"in t&&"context"in t&&"event"in t&&"_event"in t}function U(t,e){if(D(t))return t.value;if(nt(t))return V(t);if("string"!==typeof t)return t;var n=L(t,e);return V(n)}function V(t){if(1===t.length)return t[0];for(var e={},n=e,i=0;i<t.length-1;i++)i===t.length-2?n[t[i]]=t[i+1]:(n[t[i]]={},n=n[t[i]]);return e}function M(t,e){for(var n={},i=Object.keys(t),r=0;r<i.length;r++){var o=i[r];n[o]=e(t[o],o,t,r)}return n}function F(t,e,n){var i,r,o={};try{for(var a=u(Object.keys(t)),s=a.next();!s.done;s=a.next()){var c=s.value,l=t[c];n(l)&&(o[c]=e(l,c,t))}}catch(d){i={error:d}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o}var q=function(t){return function(e){var n,i,r=e;try{for(var o=u(t),a=o.next();!a.done;a=o.next()){var s=a.value;r=r[s]}}catch(c){n={error:c}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return r}};function H(t,e){return function(n){var i,r,o=n;try{for(var a=u(t),s=a.next();!s.done;s=a.next()){var c=s.value;o=o[e][c]}}catch(l){i={error:l}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o}}function G(t){if(!t)return[[]];if(rt(t))return[[t]];var e=z(Object.keys(t).map((function(e){var n=t[e];return"string"===typeof n||n&&Object.keys(n).length?G(t[e]).map((function(t){return[e].concat(t)})):[[e]]})));return e}function z(t){var e;return(e=[]).concat.apply(e,d([],l(t),!1))}function B(t){return nt(t)?t:[t]}function $(t){return void 0===t?[]:B(t)}function J(t,e,n){var i,r;if(it(t))return t(e,n.data);var o={};try{for(var a=u(Object.keys(t)),s=a.next();!s.done;s=a.next()){var c=s.value,l=t[c];it(l)?o[c]=l(e,n.data):o[c]=l}}catch(d){i={error:d}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o}function W(t){return/^(done|error)\./.test(t)}function K(t){return t instanceof Promise||!(null===t||!it(t)&&"object"!==typeof t||!it(t.then))}function X(t){return null!==t&&"object"===typeof t&&"transition"in t&&"function"===typeof t.transition}function Z(t,e){var n,i,r=l([[],[]],2),o=r[0],a=r[1];try{for(var s=u(t),c=s.next();!c.done;c=s.next()){var d=c.value;e(d)?o.push(d):a.push(d)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return[o,a]}function Q(t,e){return M(t.states,(function(t,n){if(t){var i=(rt(e)?void 0:e[n])||(t?t.current:void 0);if(i)return{current:i,states:Q(t,i)}}}))}function Y(t,e){return{current:e,states:Q(t,e)}}function tt(t,e,n,i){N||et(!!t,"Attempting to update undefined context");var r=t?n.reduce((function(t,n){var r,o,a=n.assignment,s={state:i,action:n,_event:e},c={};if(it(a))c=a(t,e.data,s);else try{for(var l=u(Object.keys(a)),d=l.next();!d.done;d=l.next()){var h=d.value,f=a[h];c[h]=it(f)?f(t,e.data,s):f}}catch(v){r={error:v}}finally{try{d&&!d.done&&(o=l.return)&&o.call(l)}finally{if(r)throw r.error}}return Object.assign({},t,c)}),t):t;return r}var et=function(){};function nt(t){return Array.isArray(t)}function it(t){return"function"===typeof t}function rt(t){return"string"===typeof t}function ot(t,e){if(t)return rt(t)?{type:k,name:t,predicate:e?e[t]:void 0}:it(t)?{type:k,name:t.name,predicate:t}:t}function at(t){try{return"subscribe"in t&&it(t.subscribe)}catch(e){return!1}}N||(et=function(t,e){var n=t instanceof Error?t:void 0;if((n||!t)&&void 0!==console){var i=["Warning: ".concat(e)];n&&i.push(n),console.warn.apply(console,i)}});var st=function(){return"function"===typeof Symbol&&Symbol.observable||"@@observable"}();h={},h[st]=function(){return this},h[Symbol.observable]=function(){return this};function ct(t){return!!t&&"__xstatenode"in t}function ut(t){return!!t&&"function"===typeof t.send}function lt(t,e){return rt(t)||"number"===typeof t?s({type:t},e):t}function dt(t,e){if(!rt(t)&&"$$type"in t&&"scxml"===t.$$type)return t;var n=lt(t);return s({name:n.type,data:n,$$type:"scxml",type:"external"},e)}function ht(t,e){var n=B(e).map((function(e){return"undefined"===typeof e||"string"===typeof e||ct(e)?{target:e,event:t}:s(s({},e),{event:t})}));return n}function ft(t){if(void 0!==t&&t!==I)return $(t)}function vt(t,e,n){if(!N){var i=t.stack?" Stacktrace was '".concat(t.stack,"'"):"";if(t===e)console.error("Missing onError handler for invocation '".concat(n,"', error was '").concat(t,"'.").concat(i));else{var r=e.stack?" Stacktrace was '".concat(e.stack,"'"):"";console.error("Missing onError handler and/or unhandled exception/promise rejection for invocation '".concat(n,"'. ")+"Original error: '".concat(t,"'. ").concat(i," Current error is '").concat(e,"'.").concat(r))}}}function pt(t,e,n,i,r){var o=t.options.guards,a={state:r,cond:e,_event:i};if(e.type===k)return((null===o||void 0===o?void 0:o[e.name])||e.predicate)(n,i.data,a);var s=null===o||void 0===o?void 0:o[e.type];if(!s)throw new Error("Guard '".concat(e.type,"' is not implemented on machine '").concat(t.id,"'."));return s(n,i.data,a)}function yt(t){return"string"===typeof t?{type:t}:t}function gt(t,e,n){var i=function(){},r="object"===typeof t,o=r?t:null;return{next:((r?t.next:t)||i).bind(o),error:((r?t.error:e)||i).bind(o),complete:((r?t.complete:n)||i).bind(o)}}function mt(t,e){return"".concat(t,":invocation[").concat(e,"]")}function wt(t){return(t.type===p||t.type===y&&t.to===a.Internal)&&"number"!==typeof t.delay}var _t=dt({type:b});function bt(t,e){return e&&e[t]||void 0}function St(t,e){var n;if(rt(t)||"number"===typeof t){var i=bt(t,e);n=it(i)?{type:t,exec:i}:i||{type:t,exec:void 0}}else if(it(t))n={type:t.name||t.toString(),exec:t};else{i=bt(t.type,e);if(it(i))n=s(s({},t),{exec:i});else if(i){var r=i.type||t.type;n=s(s(s({},i),t),{type:r})}else n=t}return n}var xt=function(t,e){if(!t)return[];var n=nt(t)?t:[t];return n.map((function(t){return St(t,e)}))};function Et(t){var e=St(t);return s(s({id:rt(t)?t:e.id},e),{type:e.type})}function At(t,e){return{type:p,event:"function"===typeof t?t:lt(t),delay:e?e.delay:void 0,id:null===e||void 0===e?void 0:e.id}}function Ct(t,e,n,i){var r,o={_event:n},a=dt(it(t.event)?t.event(e,n.data,o):t.event);if(rt(t.delay)){var c=i&&i[t.delay];r=it(c)?c(e,n.data,o):c}else r=it(t.delay)?t.delay(e,n.data,o):t.delay;return s(s({},t),{type:p,_event:a,delay:r})}function Ot(t,e){return{to:e?e.to:void 0,type:y,event:it(t)?t:lt(t),delay:e?e.delay:void 0,id:e&&void 0!==e.id?e.id:it(t)?t.name:j(t)}}function Pt(t,e,n,i){var r,o={_event:n},a=dt(it(t.event)?t.event(e,n.data,o):t.event);if(rt(t.delay)){var c=i&&i[t.delay];r=it(c)?c(e,n.data,o):c}else r=it(t.delay)?t.delay(e,n.data,o):t.delay;var u=it(t.to)?t.to(e,n.data,o):t.to;return s(s({},t),{to:u,_event:a,event:a.data,delay:r})}var Tt=function(t,e,n){return s(s({},t),{value:rt(t.expr)?t.expr:t.expr(e,n.data,{_event:n})})},kt=function(t){return{type:g,sendId:t}};function It(t){var e=Et(t);return{type:o.Start,activity:e,exec:void 0}}function Nt(t){var e=it(t)?t:Et(t);return{type:o.Stop,activity:e,exec:void 0}}function Rt(t,e,n){var i=it(t.activity)?t.activity(e,n.data):t.activity,r="string"===typeof i?{id:i}:i,a={type:o.Stop,activity:r};return a}var jt=function(t){return{type:w,assignment:t}};function Lt(t,e){var n=e?"#".concat(e):"";return"".concat(o.After,"(").concat(t,")").concat(n)}function Dt(t,e){var n="".concat(o.DoneState,".").concat(t),i={type:n,data:e,toString:function(){return n}};return i}function Ut(t,e){var n="".concat(o.DoneInvoke,".").concat(t),i={type:n,data:e,toString:function(){return n}};return i}function Vt(t,e){var n="".concat(o.ErrorPlatform,".").concat(t),i={type:n,data:e,toString:function(){return n}};return i}var Mt=function(t){var e,n,i=[];try{for(var r=u(t),o=r.next();!o.done;o=r.next()){var a=o.value,s=0;while(s<a.actions.length)a.actions[s].type!==w?s++:(i.push(a.actions[s]),a.actions.splice(s,1))}}catch(c){e={error:c}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return i};function Ft(t,e,n,i,r,o,c){void 0===c&&(c=!1);var h=c?[]:Mt(r),f=h.length?tt(n,i,h,e):n,g=c?[n]:void 0,m=[];function b(r,u){var h;switch(u.type){case p:var b=Ct(u,f,i,t.options.delays);return o&&"number"===typeof b.delay&&o(b,f,i),b;case y:var S=Pt(u,f,i,t.options.delays);if(!N){var x=u.delay;et(!rt(x)||"number"===typeof S.delay,"No delay reference for delay expression '".concat(x,"' was found on machine '").concat(t.id,"'"))}return o&&S.to!==a.Internal&&("entry"===r?m.push(S):o(S,f,i)),S;case _:var E=Tt(u,f,i);return null===o||void 0===o||o(E,f,i),E;case C:var A=u,P=null===(h=A.conds.find((function(n){var r=ot(n.cond,t.options.guards);return!r||pt(t,r,f,i,o?void 0:e)})))||void 0===h?void 0:h.actions;if(!P)return[];var T=l(Ft(t,e,f,i,[{type:r,actions:xt($(P),t.options.actions)}],o,c),2),k=T[0],I=T[1];return f=I,null===g||void 0===g||g.push(f),k;case O:P=u.get(f,i.data);if(!P)return[];var R=l(Ft(t,e,f,i,[{type:r,actions:xt($(P),t.options.actions)}],o,c),2),j=R[0],L=R[1];return f=L,null===g||void 0===g||g.push(f),j;case v:E=Rt(u,f,i);return null===o||void 0===o||o(E,n,i),E;case w:f=tt(f,i,[u],o?void 0:e),null===g||void 0===g||g.push(f);break;default:var D=St(u,t.options.actions),U=D.exec;if(o)o(D,f,i);else if(U&&g){var V=g.length-1,M=s(s({},D),{exec:function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];U.apply(void 0,d([g[V]],l(e),!1))}});D=M}return D}}function S(t){var e,n,r=[];try{for(var a=u(t.actions),s=a.next();!s.done;s=a.next()){var c=s.value,l=b(t.type,c);l&&(r=r.concat(l))}}catch(d){e={error:d}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return m.forEach((function(t){o(t,f,i)})),m.length=0,r}var x=z(r.map(S));return[x,f]}var qt=jt,Ht=function(t){return"atomic"===t.type||"final"===t.type};function Gt(t){return Object.keys(t.states).map((function(e){return t.states[e]}))}function zt(t){return Gt(t).filter((function(t){return"history"!==t.type}))}function Bt(t){var e=[t];return Ht(t)?e:e.concat(z(zt(t).map(Bt)))}function $t(t,e){var n,i,r,o,a,s,c,l,d=new Set(t),h=Wt(d),f=new Set(e);try{for(var v=u(f),p=v.next();!p.done;p=v.next()){var y=p.value,g=y.parent;while(g&&!f.has(g))f.add(g),g=g.parent}}catch(C){n={error:C}}finally{try{p&&!p.done&&(i=v.return)&&i.call(v)}finally{if(n)throw n.error}}var m=Wt(f);try{for(var w=u(f),_=w.next();!_.done;_=w.next()){y=_.value;if("compound"!==y.type||m.get(y)&&m.get(y).length){if("parallel"===y.type)try{for(var b=(a=void 0,u(zt(y))),S=b.next();!S.done;S=b.next()){var x=S.value;f.has(x)||(f.add(x),h.get(x)?h.get(x).forEach((function(t){return f.add(t)})):x.initialStateNodes.forEach((function(t){return f.add(t)})))}}catch(O){a={error:O}}finally{try{S&&!S.done&&(s=b.return)&&s.call(b)}finally{if(a)throw a.error}}}else h.get(y)?h.get(y).forEach((function(t){return f.add(t)})):y.initialStateNodes.forEach((function(t){return f.add(t)}))}}catch(P){r={error:P}}finally{try{_&&!_.done&&(o=w.return)&&o.call(w)}finally{if(r)throw r.error}}try{for(var E=u(f),A=E.next();!A.done;A=E.next()){y=A.value,g=y.parent;while(g&&!f.has(g))f.add(g),g=g.parent}}catch(T){c={error:T}}finally{try{A&&!A.done&&(l=E.return)&&l.call(E)}finally{if(c)throw c.error}}return f}function Jt(t,e){var n=e.get(t);if(!n)return{};if("compound"===t.type){var i=n[0];if(!i)return{};if(Ht(i))return i.key}var r={};return n.forEach((function(t){r[t.key]=Jt(t,e)})),r}function Wt(t){var e,n,i=new Map;try{for(var r=u(t),o=r.next();!o.done;o=r.next()){var a=o.value;i.has(a)||i.set(a,[]),a.parent&&(i.has(a.parent)||i.set(a.parent,[]),i.get(a.parent).push(a))}}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return i}function Kt(t,e){var n=$t([t],e);return Jt(t,Wt(n))}function Xt(t,e){return Array.isArray(t)?t.some((function(t){return t===e})):t instanceof Set&&t.has(e)}function Zt(t){return d([],l(new Set(z(d([],l(t.map((function(t){return t.ownEvents}))),!1)))),!1)}function Qt(t,e){return"compound"===e.type?zt(e).some((function(e){return"final"===e.type&&Xt(t,e)})):"parallel"===e.type&&zt(e).every((function(e){return Qt(t,e)}))}function Yt(t){return void 0===t&&(t=[]),t.reduce((function(t,e){return void 0!==e.meta&&(t[e.id]=e.meta),t}),{})}function te(t){return new Set(z(t.map((function(t){return t.tags}))))}function ee(t,e){if(t===e)return!0;if(void 0===t||void 0===e)return!1;if(rt(t)||rt(e))return t===e;var n=Object.keys(t),i=Object.keys(e);return n.length===i.length&&n.every((function(n){return ee(t[n],e[n])}))}function ne(t){return"object"===typeof t&&null!==t&&("value"in t&&"_event"in t)}function ie(t,e){var n=t.exec,i=s(s({},t),{exec:void 0!==n?function(){return n(e.context,e.event,{action:t,state:e,_event:e._event})}:void 0});return i}var re=function(){function t(t){var e,n=this;this.actions=[],this.activities=T,this.meta={},this.events=[],this.value=t.value,this.context=t.context,this._event=t._event,this._sessionid=t._sessionid,this.event=this._event.data,this.historyValue=t.historyValue,this.history=t.history,this.actions=t.actions||[],this.activities=t.activities||T,this.meta=Yt(t.configuration),this.events=t.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=t.configuration,this.transitions=t.transitions,this.children=t.children,this.done=!!t.done,this.tags=null!==(e=Array.isArray(t.tags)?new Set(t.tags):t.tags)&&void 0!==e?e:new Set,this.machine=t.machine,Object.defineProperty(this,"nextEvents",{get:function(){return Zt(n.configuration)}})}return t.from=function(e,n){if(e instanceof t)return e.context!==n?new t({value:e.value,context:n,_event:e._event,_sessionid:null,historyValue:e.historyValue,history:e.history,actions:[],activities:e.activities,meta:{},events:[],configuration:[],transitions:[],children:{}}):e;var i=_t;return new t({value:e,context:n,_event:i,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,meta:void 0,events:[],configuration:[],transitions:[],children:{}})},t.create=function(e){return new t(e)},t.inert=function(e,n){if(e instanceof t){if(!e.actions.length)return e;var i=_t;return new t({value:e.value,context:n,_event:i,_sessionid:null,historyValue:e.historyValue,history:e.history,activities:e.activities,configuration:e.configuration,transitions:[],children:{}})}return t.from(e,n)},t.prototype.toStrings=function(t,e){var n=this;if(void 0===t&&(t=this.value),void 0===e&&(e="."),rt(t))return[t];var i=Object.keys(t);return i.concat.apply(i,d([],l(i.map((function(i){return n.toStrings(t[i],e).map((function(t){return i+e+t}))}))),!1))},t.prototype.toJSON=function(){var t=this;t.configuration,t.transitions;var e=t.tags;t.machine;var n=c(t,["configuration","transitions","tags","machine"]);return s(s({},n),{tags:Array.from(e)})},t.prototype.matches=function(t){return R(t,this.value)},t.prototype.hasTag=function(t){return this.tags.has(t)},t.prototype.can=function(t){var e;N&&et(!!this.machine,"state.can(...) used outside of a machine-created State object; this will always return false.");var n=null===(e=this.machine)||void 0===e?void 0:e.getTransitionData(this,t);return!!(null===n||void 0===n?void 0:n.transitions.length)&&n.transitions.some((function(t){return void 0!==t.target||t.actions.length}))},t}(),oe=[],ae=function(t,e){oe.push(t);var n=e(t);return oe.pop(),n};function se(t){var e;return e={id:t,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},getSnapshot:function(){},toJSON:function(){return{id:t}}},e[st]=function(){return this},e}function ce(t,e,n,i){var r,o=yt(t.src),a=null===(r=null===e||void 0===e?void 0:e.options.services)||void 0===r?void 0:r[o.type],s=t.data?J(t.data,n,i):void 0,c=a?ue(a,t.id,s):se(t.id);return c.meta=t,c}function ue(t,e,n){var i=se(e);if(i.deferred=!0,ct(t)){var r=i.state=ae(void 0,(function(){return(n?t.withContext(n):t).initialState}));i.getSnapshot=function(){return r}}return i}function le(t){try{return"function"===typeof t.send}catch(e){return!1}}function de(t){return le(t)&&"id"in t}function he(t){var e;return s((e={subscribe:function(){return{unsubscribe:function(){}}},id:"anonymous",getSnapshot:function(){}},e[st]=function(){return this},e),t)}function fe(t){if("string"===typeof t){var e={type:t,toString:function(){return t}};return e}return t}function ve(t){return s(s({type:S},t),{toJSON:function(){t.onDone,t.onError;var e=c(t,["onDone","onError"]);return s(s({},e),{type:S,src:fe(t.src)})}})}var pe="",ye="#",ge="*",me={},we=function(t){return t[0]===ye},_e=function(){return{actions:{},guards:{},services:{},activities:{},delays:{}}},be=function(t,e,n){var i=n.slice(0,-1).some((function(t){return!("cond"in t)&&!("in"in t)&&(rt(t.target)||ct(t.target))})),r=e===pe?"the transient event":"event '".concat(e,"'");et(!i,"One or more transitions for ".concat(r," on state '").concat(t.id,"' are unreachable. ")+"Make sure that the default transition is the last one defined.")},Se=function(){function t(e,n,i,r){void 0===i&&(i="context"in e?e.context:void 0);var o,a=this;this.config=e,this._context=i,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.tags=[],this.options=Object.assign(_e(),n),this.parent=null===r||void 0===r?void 0:r.parent,this.key=this.config.key||(null===r||void 0===r?void 0:r.key)||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:P),this.id=this.config.id||d([this.machine.key],l(this.path),!1).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.schema=this.parent?this.machine.schema:null!==(o=this.config.schema)&&void 0!==o?o:{},this.description=this.config.description,N||et(!("parallel"in this.config),'The "parallel" property is deprecated and will be removed in version 4.1. '.concat(this.config.parallel?"Replace with `type: 'parallel'`":"Use `type: '".concat(this.type,"'`")," in the config for state node '").concat(this.id,"' instead.")),this.initial=this.config.initial,this.states=this.config.states?M(this.config.states,(function(e,n){var i,r=new t(e,{},void 0,{parent:a,key:n});return Object.assign(a.idMap,s((i={},i[r.id]=r,i),r.idMap)),r})):me;var c=0;function h(t){var e,n;t.order=c++;try{for(var i=u(Gt(t)),r=i.next();!r.done;r=i.next()){var o=r.value;h(o)}}catch(a){e={error:a}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}h(this),this.history=!0===this.config.history?"shallow":this.config.history||!1,this._transient=!!this.config.always||!!this.config.on&&(Array.isArray(this.config.on)?this.config.on.some((function(t){var e=t.event;return e===pe})):pe in this.config.on),this.strict=!!this.config.strict,this.onEntry=$(this.config.entry||this.config.onEntry).map((function(t){return St(t)})),this.onExit=$(this.config.exit||this.config.onExit).map((function(t){return St(t)})),this.meta=this.config.meta,this.doneData="final"===this.type?this.config.data:void 0,this.invoke=$(this.config.invoke).map((function(t,e){var n,i;if(ct(t)){var r=mt(a.id,e);return a.machine.options.services=s((n={},n[r]=t,n),a.machine.options.services),ve({src:r,id:r})}if(rt(t.src)){r=t.id||mt(a.id,e);return ve(s(s({},t),{id:r,src:t.src}))}if(ct(t.src)||it(t.src)){r=t.id||mt(a.id,e);return a.machine.options.services=s((i={},i[r]=t.src,i),a.machine.options.services),ve(s(s({id:r},t),{src:r}))}var o=t.src;return ve(s(s({id:mt(a.id,e)},t),{src:o}))})),this.activities=$(this.config.activities).concat(this.invoke).map((function(t){return Et(t)})),this.transition=this.transition.bind(this),this.tags=$(this.config.tags)}return t.prototype._init=function(){this.__cache.transitions||Bt(this).forEach((function(t){return t.on}))},t.prototype.withConfig=function(e,n){var i=this.options,r=i.actions,o=i.activities,a=i.guards,c=i.services,u=i.delays;return new t(this.config,{actions:s(s({},r),e.actions),activities:s(s({},o),e.activities),guards:s(s({},a),e.guards),services:s(s({},c),e.services),delays:s(s({},u),e.delays)},null!==n&&void 0!==n?n:this.context)},t.prototype.withContext=function(e){return new t(this.config,this.options,e)},Object.defineProperty(t.prototype,"context",{get:function(){return it(this._context)?this._context():this._context},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:M(this.states,(function(t){return t.definition})),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.doneData,invoke:this.invoke,description:this.description,tags:this.tags}},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return this.definition},Object.defineProperty(t.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var t=this.transitions;return this.__cache.on=t.reduce((function(t,e){return t[e.eventType]=t[e.eventType]||[],t[e.eventType].push(e),t}),{})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!1,configurable:!0}),t.prototype.getCandidates=function(t){if(this.__cache.candidates[t])return this.__cache.candidates[t];var e=t===pe,n=this.transitions.filter((function(n){var i=n.eventType===t;return e?i:i||n.eventType===ge}));return this.__cache.candidates[t]=n,n},t.prototype.getDelayedTransitions=function(){var t=this,e=this.config.after;if(!e)return[];var n=function(e,n){var i=it(e)?"".concat(t.id,":delay[").concat(n,"]"):e,r=Lt(i,t.id);return t.onEntry.push(Ot(r,{delay:e})),t.onExit.push(kt(r)),r},i=nt(e)?e.map((function(t,e){var i=n(t.delay,e);return s(s({},t),{event:i})})):z(Object.keys(e).map((function(t,i){var r=e[t],o=rt(r)?{target:r}:r,a=isNaN(+t)?t:+t,c=n(a,i);return $(o).map((function(t){return s(s({},t),{event:c,delay:a})}))})));return i.map((function(e){var n=e.delay;return s(s({},t.formatTransition(e)),{delay:n})}))},t.prototype.getStateNodes=function(t){var e,n=this;if(!t)return[];var i=t instanceof re?t.value:U(t,this.delimiter);if(rt(i)){var r=this.getStateNode(i).initial;return void 0!==r?this.getStateNodes((e={},e[i]=r,e)):[this,this.states[i]]}var o=Object.keys(i),a=[this];return a.push.apply(a,d([],l(z(o.map((function(t){return n.getStateNode(t).getStateNodes(i[t])})))),!1)),a},t.prototype.handles=function(t){var e=j(t);return this.events.includes(e)},t.prototype.resolveState=function(t){var e=t instanceof re?t:re.create(t),n=Array.from($t([],this.getStateNodes(e.value)));return new re(s(s({},e),{value:this.resolve(e.value),configuration:n,done:Qt(n,this),tags:te(n),machine:this.machine}))},t.prototype.transitionLeafNode=function(t,e,n){var i=this.getStateNode(t),r=i.next(e,n);return r&&r.transitions.length?r:this.next(e,n)},t.prototype.transitionCompoundNode=function(t,e,n){var i=Object.keys(t),r=this.getStateNode(i[0]),o=r._transition(t[i[0]],e,n);return o&&o.transitions.length?o:this.next(e,n)},t.prototype.transitionParallelNode=function(t,e,n){var i,r,o={};try{for(var a=u(Object.keys(t)),s=a.next();!s.done;s=a.next()){var c=s.value,l=t[c];if(l){var d=this.getStateNode(c),h=d._transition(l,e,n);h&&(o[c]=h)}}}catch(g){i={error:g}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}var f=Object.keys(o).map((function(t){return o[t]})),v=z(f.map((function(t){return t.transitions}))),p=f.some((function(t){return t.transitions.length>0}));if(!p)return this.next(e,n);var y=z(Object.keys(o).map((function(t){return o[t].configuration})));return{transitions:v,exitSet:z(f.map((function(t){return t.exitSet}))),configuration:y,source:e,actions:z(Object.keys(o).map((function(t){return o[t].actions})))}},t.prototype._transition=function(t,e,n){return rt(t)?this.transitionLeafNode(t,e,n):1===Object.keys(t).length?this.transitionCompoundNode(t,e,n):this.transitionParallelNode(t,e,n)},t.prototype.getTransitionData=function(t,e){return this._transition(t.value,t,dt(e))},t.prototype.next=function(t,e){var n,i,r,o=this,a=e.name,s=[],c=[];try{for(var h=u(this.getCandidates(a)),f=h.next();!f.done;f=h.next()){var v=f.value,p=v.cond,y=v.in,g=t.context,m=!y||(rt(y)&&we(y)?t.matches(U(this.getStateNodeById(y).path,this.delimiter)):R(U(y,this.delimiter),q(this.path.slice(0,-2))(t.value))),w=!1;try{w=!p||pt(this.machine,p,g,e,t)}catch(S){throw new Error("Unable to evaluate guard '".concat(p.name||p.type,"' in transition for event '").concat(a,"' in state node '").concat(this.id,"':\n").concat(S.message))}if(w&&m){void 0!==v.target&&(c=v.target),s.push.apply(s,d([],l(v.actions),!1)),r=v;break}}}catch(x){n={error:x}}finally{try{f&&!f.done&&(i=h.return)&&i.call(h)}finally{if(n)throw n.error}}if(r){if(!c.length)return{transitions:[r],exitSet:[],configuration:t.value?[this]:[],source:t,actions:s};var _=z(c.map((function(e){return o.getRelativeStateNodes(e,t.historyValue)}))),b=!!r.internal;return{transitions:[r],exitSet:b?[]:z(c.map((function(t){return o.getPotentiallyReenteringNodes(t)}))),configuration:_,source:t,actions:s}}},t.prototype.getPotentiallyReenteringNodes=function(t){if(this.order<t.order)return[this];var e=[],n=this,i=t;while(n&&n!==i)e.push(n),n=n.parent;return n!==i?[]:(e.push(i),e)},t.prototype.getActions=function(t,e,n,i,r,o,a){var s,c,h,f,v=this,p=o?$t([],this.getStateNodes(o.value)):[],y=new Set;try{for(var g=u(Array.from(t).sort((function(t,e){return t.order-e.order}))),m=g.next();!m.done;m=g.next()){var w=m.value;(!Xt(p,w)||Xt(n.exitSet,w)||w.parent&&y.has(w.parent))&&y.add(w)}}catch(T){s={error:T}}finally{try{m&&!m.done&&(c=g.return)&&c.call(g)}finally{if(s)throw s.error}}try{for(var _=u(p),b=_.next();!b.done;b=_.next()){w=b.value;Xt(t,w)&&!Xt(n.exitSet,w.parent)||n.exitSet.push(w)}}catch(k){h={error:k}}finally{try{b&&!b.done&&(f=_.return)&&f.call(_)}finally{if(h)throw h.error}}n.exitSet.sort((function(t,e){return e.order-t.order}));var S=Array.from(y).sort((function(t,e){return t.order-e.order})),x=new Set(n.exitSet),E=z(S.map((function(t){var e=[];if("final"!==t.type)return e;var o=t.parent;if(!o.parent)return e;e.push(Dt(t.id,t.doneData),Dt(o.id,t.doneData?J(t.doneData,i,r):void 0));var a=o.parent;return"parallel"===a.type&&zt(a).every((function(t){return Qt(n.configuration,t)}))&&e.push(Dt(a.id)),e}))),A=S.map((function(t){var e=t.onEntry,n=t.activities.map((function(t){return It(t)}));return{type:"entry",actions:xt(a?d(d([],l(e),!1),l(n),!1):d(d([],l(n),!1),l(e),!1),v.machine.options.actions)}})).concat({type:"state_done",actions:E.map((function(t){return At(t)}))}),C=Array.from(x).map((function(t){return{type:"exit",actions:xt(d(d([],l(t.onExit),!1),l(t.activities.map((function(t){return Nt(t)}))),!1),v.machine.options.actions)}})),O=C.concat({type:"transition",actions:xt(n.actions,this.machine.options.actions)}).concat(A);if(e){var P=xt(z(d([],l(t),!1).sort((function(t,e){return e.order-t.order})).map((function(t){return t.onExit}))),this.machine.options.actions).filter((function(t){return!wt(t)}));return O.concat({type:"stop",actions:P})}return O},t.prototype.transition=function(t,e,n,i){void 0===t&&(t=this.initialState);var r,o=dt(e);if(t instanceof re)r=void 0===n?t:this.resolveState(re.from(t,n));else{var a=rt(t)?this.resolve(V(this.getResolvedPath(t))):this.resolve(t),s=null!==n&&void 0!==n?n:this.machine.context;r=this.resolveState(re.from(a,s))}if(!N&&o.name===ge)throw new Error("An event cannot have the wildcard type ('".concat(ge,"')"));if(this.strict&&!this.events.includes(o.name)&&!W(o.name))throw new Error("Machine '".concat(this.id,"' does not accept event '").concat(o.name,"'"));var c=this._transition(r.value,r,o)||{transitions:[],configuration:[],exitSet:[],source:r,actions:[]},u=$t([],this.getStateNodes(r.value)),h=c.configuration.length?$t(u,c.configuration):u;return c.configuration=d([],l(h),!1),this.resolveTransition(c,r,r.context,i,o)},t.prototype.resolveRaisedTransition=function(t,e,n,i){var r,o=t.actions;return t=this.transition(t,e,void 0,i),t._event=n,t.event=n.data,(r=t.actions).unshift.apply(r,d([],l(o),!1)),t},t.prototype.resolveTransition=function(t,e,n,i,r){var o,a,c,d,h=this;void 0===r&&(r=_t);var p=t.configuration,y=!e||t.transitions.length>0,g=y?t.configuration:e?e.configuration:[],w=Qt(g,this),_=y?Kt(this.machine,p):void 0,b=e?e.historyValue?e.historyValue:t.source?this.machine.historyValue(e.value):void 0:void 0,x=this.getActions(new Set(g),w,t,n,r,e,i),E=e?s({},e.activities):{};try{for(var C=u(x),O=C.next();!O.done;O=C.next()){var P=O.value;try{for(var T=(c=void 0,u(P.actions)),k=T.next();!k.done;k=T.next()){var I=k.value;I.type===f?E[I.activity.id||I.activity.type]=I:I.type===v&&(E[I.activity.id||I.activity.type]=!1)}}catch(J){c={error:J}}finally{try{k&&!k.done&&(d=T.return)&&d.call(T)}finally{if(c)throw c.error}}}}catch(W){o={error:W}}finally{try{O&&!O.done&&(a=C.return)&&a.call(C)}finally{if(o)throw o.error}}var N=l(Ft(this,e,n,r,x,i,this.machine.config.predictableActionArguments||this.machine.config.preserveActionOrder),2),R=N[0],j=N[1],L=l(Z(R,wt),2),D=L[0],U=L[1],V=R.filter((function(t){var e;return t.type===f&&(null===(e=t.activity)||void 0===e?void 0:e.type)===S})),M=V.reduce((function(t,e){return t[e.activity.id]=ce(e.activity,h.machine,j,r),t}),e?s({},e.children):{}),F=new re({value:_||e.value,context:j,_event:r,_sessionid:e?e._sessionid:null,historyValue:_?b?Y(b,_):void 0:e?e.historyValue:void 0,history:!_||t.source?e:void 0,actions:_?U:[],activities:_?E:e?e.activities:{},events:[],configuration:g,transitions:t.transitions,children:M,done:w,tags:te(g),machine:this}),q=n!==j;F.changed=r.name===A||q;var H=F.history;H&&delete H.history;var G=!w&&(this._transient||p.some((function(t){return t._transient})));if(!y&&(!G||r.name===pe))return F;var z=F;if(!w){G&&(z=this.resolveRaisedTransition(z,{type:m},r,i));while(D.length){var B=D.shift();z=this.resolveRaisedTransition(z,B._event,r,i)}}var $=z.changed||(H?!!z.actions.length||q||typeof H.value!==typeof z.value||!ee(z.value,H.value):void 0);return z.changed=$,z.history=H,z},t.prototype.getStateNode=function(t){if(we(t))return this.machine.getStateNodeById(t);if(!this.states)throw new Error("Unable to retrieve child state '".concat(t,"' from '").concat(this.id,"'; no child states exist."));var e=this.states[t];if(!e)throw new Error("Child state '".concat(t,"' does not exist on '").concat(this.id,"'"));return e},t.prototype.getStateNodeById=function(t){var e=we(t)?t.slice(ye.length):t;if(e===this.id)return this;var n=this.machine.idMap[e];if(!n)throw new Error("Child state node '#".concat(e,"' does not exist on machine '").concat(this.id,"'"));return n},t.prototype.getStateNodeByPath=function(t){if("string"===typeof t&&we(t))try{return this.getStateNodeById(t.slice(1))}catch(r){}var e=L(t,this.delimiter).slice(),n=this;while(e.length){var i=e.shift();if(!i.length)break;n=n.getStateNode(i)}return n},t.prototype.resolve=function(t){var e,n=this;if(!t)return this.initialStateValue||me;switch(this.type){case"parallel":return M(this.initialStateValue,(function(e,i){return e?n.getStateNode(i).resolve(t[i]||e):me}));case"compound":if(rt(t)){var i=this.getStateNode(t);return"parallel"===i.type||"compound"===i.type?(e={},e[t]=i.initialStateValue,e):t}return Object.keys(t).length?M(t,(function(t,e){return t?n.getStateNode(e).resolve(t):me})):this.initialStateValue||{};default:return t||me}},t.prototype.getResolvedPath=function(t){if(we(t)){var e=this.machine.idMap[t.slice(ye.length)];if(!e)throw new Error("Unable to find state node '".concat(t,"'"));return e.path}return L(t,this.delimiter)},Object.defineProperty(t.prototype,"initialStateValue",{get:function(){var t,e;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;if("parallel"===this.type)e=F(this.states,(function(t){return t.initialStateValue||me}),(function(t){return!("history"===t.type)}));else if(void 0!==this.initial){if(!this.states[this.initial])throw new Error("Initial state '".concat(this.initial,"' not found on '").concat(this.key,"'"));e=Ht(this.states[this.initial])?this.initial:(t={},t[this.initial]=this.states[this.initial].initialStateValue,t)}else e={};return this.__cache.initialStateValue=e,this.__cache.initialStateValue},enumerable:!1,configurable:!0}),t.prototype.getInitialState=function(t,e){this._init();var n=this.getStateNodes(t);return this.resolveTransition({configuration:n,exitSet:[],transitions:[],source:void 0,actions:[]},void 0,null!==e&&void 0!==e?e:this.machine.context,void 0)},Object.defineProperty(t.prototype,"initialState",{get:function(){var t=this.initialStateValue;if(!t)throw new Error("Cannot retrieve initial state from simple state '".concat(this.id,"'."));return this.getInitialState(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){var t;if("history"===this.type){var e=this.config;t=rt(e.target)&&we(e.target)?V(this.machine.getStateNodeById(e.target).path.slice(this.path.length-1)):e.target}return t},enumerable:!1,configurable:!0}),t.prototype.getRelativeStateNodes=function(t,e,n){return void 0===n&&(n=!0),n?"history"===t.type?t.resolveHistory(e):t.initialStateNodes:[t]},Object.defineProperty(t.prototype,"initialStateNodes",{get:function(){var t=this;if(Ht(this))return[this];if("compound"===this.type&&!this.initial)return N||et(!1,"Compound state node '".concat(this.id,"' has no initial state.")),[this];var e=G(this.initialStateValue);return z(e.map((function(e){return t.getFromRelativePath(e)})))},enumerable:!1,configurable:!0}),t.prototype.getFromRelativePath=function(t){if(!t.length)return[this];var e=l(t),n=e[0],i=e.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '".concat(n,"' from node with no states"));var r=this.getStateNode(n);if("history"===r.type)return r.resolveHistory();if(!this.states[n])throw new Error("Child state '".concat(n,"' does not exist on '").concat(this.id,"'"));return this.states[n].getFromRelativePath(i)},t.prototype.historyValue=function(t){if(Object.keys(this.states).length)return{current:t||this.initialStateValue,states:F(this.states,(function(e,n){if(!t)return e.historyValue();var i=rt(t)?void 0:t[n];return e.historyValue(i||e.initialStateValue)}),(function(t){return!t.history}))}},t.prototype.resolveHistory=function(t){var e=this;if("history"!==this.type)return[this];var n=this.parent;if(!t){var i=this.target;return i?z(G(i).map((function(t){return n.getFromRelativePath(t)}))):n.initialStateNodes}var r=H(n.path,"states")(t).current;return rt(r)?[n.getStateNode(r)]:z(G(r).map((function(t){return"deep"===e.history?n.getFromRelativePath(t):[n.states[t[0]]]})))},Object.defineProperty(t.prototype,"stateIds",{get:function(){var t=this,e=z(Object.keys(this.states).map((function(e){return t.states[e].stateIds})));return[this.id].concat(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"events",{get:function(){var t,e,n,i;if(this.__cache.events)return this.__cache.events;var r=this.states,o=new Set(this.ownEvents);if(r)try{for(var a=u(Object.keys(r)),s=a.next();!s.done;s=a.next()){var c=s.value,l=r[c];if(l.states)try{for(var d=(n=void 0,u(l.events)),h=d.next();!h.done;h=d.next()){var f=h.value;o.add("".concat(f))}}catch(v){n={error:v}}finally{try{h&&!h.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}}}catch(p){t={error:p}}finally{try{s&&!s.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}return this.__cache.events=Array.from(o)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ownEvents",{get:function(){var t=new Set(this.transitions.filter((function(t){return!(!t.target&&!t.actions.length&&t.internal)})).map((function(t){return t.eventType})));return Array.from(t)},enumerable:!1,configurable:!0}),t.prototype.resolveTarget=function(t){var e=this;if(void 0!==t)return t.map((function(t){if(!rt(t))return t;var n=t[0]===e.delimiter;if(n&&!e.parent)return e.getStateNodeByPath(t.slice(1));var i=n?e.key+t:t;if(!e.parent)return e.getStateNodeByPath(i);try{var r=e.parent.getStateNodeByPath(i);return r}catch(o){throw new Error("Invalid transition definition for state node '".concat(e.id,"':\n").concat(o.message))}}))},t.prototype.formatTransition=function(t){var e=this,n=ft(t.target),i="internal"in t?t.internal:!n||n.some((function(t){return rt(t)&&t[0]===e.delimiter})),r=this.machine.options.guards,o=this.resolveTarget(n),a=s(s({},t),{actions:xt($(t.actions)),cond:ot(t.cond,r),target:o,source:this,internal:i,eventType:t.event,toJSON:function(){return s(s({},a),{target:a.target?a.target.map((function(t){return"#".concat(t.id)})):void 0,source:"#".concat(e.id)})}});return a},t.prototype.formatTransitions=function(){var t,e,n,i=this;if(this.config.on)if(Array.isArray(this.config.on))n=this.config.on;else{var r=this.config.on,o=ge,a=r[o],s=void 0===a?[]:a,h=c(r,["symbol"===typeof o?o:o+""]);n=z(Object.keys(h).map((function(t){N||t!==pe||et(!1,"Empty string transition configs (e.g., `{ on: { '': ... }}`) for transient transitions are deprecated. Specify the transition in the `{ always: ... }` property instead. "+'Please check the `on` configuration for "#'.concat(i.id,'".'));var e=ht(t,h[t]);return N||be(i,t,e),e})).concat(ht(ge,s)))}else n=[];var f=this.config.always?ht("",this.config.always):[],v=this.config.onDone?ht(String(Dt(this.id)),this.config.onDone):[];N||et(!(this.config.onDone&&!this.parent),'Root nodes cannot have an ".onDone" transition. Please check the config of "'.concat(this.id,'".'));var p=z(this.invoke.map((function(t){var e=[];return t.onDone&&e.push.apply(e,d([],l(ht(String(Ut(t.id)),t.onDone)),!1)),t.onError&&e.push.apply(e,d([],l(ht(String(Vt(t.id)),t.onError)),!1)),e}))),y=this.after,g=z(d(d(d(d([],l(v),!1),l(p),!1),l(n),!1),l(f),!1).map((function(t){return $(t).map((function(t){return i.formatTransition(t)}))})));try{for(var m=u(y),w=m.next();!w.done;w=m.next()){var _=w.value;g.push(_)}}catch(b){t={error:b}}finally{try{w&&!w.done&&(e=m.return)&&e.call(m)}finally{if(t)throw t.error}}return g},t}(),xe=!1;function Ee(t,e){return N||"predictableActionArguments"in t||xe||(xe=!0,console.warn("It is highly recommended to set `predictableActionArguments` to `true` when using `createMachine`. https://xstate.js.org/docs/guides/actions.html")),new Se(t,e)}var Ae={deferEvents:!1},Ce=function(){function t(t){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=s(s({},Ae),t)}return t.prototype.initialize=function(t){if(this.initialized=!0,t){if(!this.options.deferEvents)return void this.schedule(t);this.process(t)}this.flushEvents()},t.prototype.schedule=function(t){if(this.initialized&&!this.processingEvent){if(0!==this.queue.length)throw new Error("Event queue should be empty when it is not processing events");this.process(t),this.flushEvents()}else this.queue.push(t)},t.prototype.clear=function(){this.queue=[]},t.prototype.flushEvents=function(){var t=this.queue.shift();while(t)this.process(t),t=this.queue.shift()},t.prototype.process=function(t){this.processingEvent=!0;try{t()}catch(e){throw this.clear(),e}finally{this.processingEvent=!1}},t}(),Oe=new Map,Pe=0,Te={bookId:function(){return"x:".concat(Pe++)},register:function(t,e){return Oe.set(t,e),t},get:function(t){return Oe.get(t)},free:function(t){Oe.delete(t)}};function ke(){return"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:void(N||console.warn("XState could not find a global object in this environment. Please let the maintainers know and raise an issue here: https://github.com/statelyai/xstate/issues"))}function Ie(){var t=ke();if(t&&"__xstate__"in t)return t.__xstate__}function Ne(t){if(ke()){var e=Ie();e&&e.register(t)}}function Re(t,e){void 0===e&&(e={});var n=t.initialState,i=new Set,r=[],o=!1,a=function(){if(!o){o=!0;while(r.length>0){var e=r.shift();n=t.transition(n,e,c),i.forEach((function(t){return t.next(n)}))}o=!1}},s=he({id:e.id,send:function(t){r.push(t),a()},getSnapshot:function(){return n},subscribe:function(t,e,r){var o=gt(t,e,r);return i.add(o),o.next(n),{unsubscribe:function(){i.delete(o)}}}}),c={parent:e.parent,self:s,id:e.id||"anonymous",observers:i};return n=t.start?t.start(c):n,s}var je,Le={sync:!1,autoForward:!1};(function(t){t[t["NotStarted"]=0]="NotStarted",t[t["Running"]=1]="Running",t[t["Stopped"]=2]="Stopped"})(je||(je={}));var De=function(){function t(e,n){void 0===n&&(n=t.defaultOptions);var i=this;this.machine=e,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this.status=je.NotStarted,this.children=new Map,this.forwardTo=new Set,this._outgoingQueue=[],this.init=this.start,this.send=function(t,e){if(nt(t))return i.batch(t),i.state;var n=dt(lt(t,e));if(i.status===je.Stopped)return N||et(!1,'Event "'.concat(n.name,'" was sent to stopped service "').concat(i.machine.id,'". This service has already reached its final state, and will not transition.\nEvent: ').concat(JSON.stringify(n.data))),i.state;if(i.status!==je.Running&&!i.options.deferEvents)throw new Error('Event "'.concat(n.name,'" was sent to uninitialized service "').concat(i.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.\nEvent: ').concat(JSON.stringify(n.data)));return i.scheduler.schedule((function(){i.forward(n);var t=i._nextState(n);i.update(t,n)})),i._state},this.sendTo=function(t,e,n){var r=i.parent&&(e===a.Parent||i.parent.id===e),o=r?i.parent:rt(e)?e===a.Internal?i:i.children.get(e)||Te.get(e):ut(e)?e:void 0;if(o)if("machine"in o){if(i.status!==je.Stopped||i.parent!==o||i.state.done){var c=s(s({},t),{name:t.name===E?"".concat(Vt(i.id)):t.name,origin:i.sessionId});!n&&i.machine.config.predictableActionArguments?i._outgoingQueue.push([o,c]):o.send(c)}}else!n&&i.machine.config.predictableActionArguments?i._outgoingQueue.push([o,t.data]):o.send(t.data);else{if(!r)throw new Error("Unable to send event to child '".concat(e,"' from service '").concat(i.id,"'."));N||et(!1,"Service '".concat(i.id,"' has no parent: unable to send event ").concat(t.type))}},this._exec=function(t,e,n,r){void 0===r&&(r=i.machine.options.actions);var a=t.exec||bt(t.type,r),s=it(a)?a:a?a.exec:t.exec;if(s)try{return s(e,n.data,i.machine.config.predictableActionArguments?{action:t,_event:n}:{action:t,state:i.state,_event:n})}catch(P){throw i.parent&&i.parent.send({type:"xstate.error",data:P}),P}switch(t.type){case p:var c=t;i.defer(c);break;case y:var u=t;if("number"===typeof u.delay)return void i.defer(u);u.to?i.sendTo(u._event,u.to,n===_t):i.send(u._event);break;case g:i.cancel(t.sendId);break;case f:if(i.status!==je.Running)return;var l=t.activity;if(!i.machine.config.predictableActionArguments&&!i.state.activities[l.id||l.type])break;if(l.type===o.Invoke){var d=yt(l.src),h=i.machine.options.services?i.machine.options.services[d.type]:void 0,m=l.id,w=l.data;N||et(!("forward"in l),"`forward` property is deprecated (found in invocation of '".concat(l.src,"' in in machine '").concat(i.machine.id,"'). ")+"Please use `autoForward` instead.");var b="autoForward"in l?l.autoForward:!!l.forward;if(!h)return void(N||et(!1,"No service found for invocation '".concat(l.src,"' in machine '").concat(i.machine.id,"'.")));var S=w?J(w,e,n):void 0;if("string"===typeof h)return;var x=it(h)?h(e,n.data,{data:S,src:d,meta:l.meta}):h;if(!x)return;var E=void 0;ct(x)&&(x=S?x.withContext(S):x,E={autoForward:b}),i.spawn(x,m,E)}else i.spawnActivity(l);break;case v:i.stopChild(t.activity.id);break;case _:var A=t,C=A.label,O=A.value;C?i.logger(C,O):i.logger(O);break;default:N||et(!1,"No implementation found for action type '".concat(t.type,"'"));break}};var r=s(s({},t.defaultOptions),n),c=r.clock,u=r.logger,l=r.parent,d=r.id,h=void 0!==d?d:e.id;this.id=h,this.logger=u,this.clock=c,this.parent=l,this.options=r,this.scheduler=new Ce({deferEvents:this.options.deferEvents}),this.sessionId=Te.bookId()}return Object.defineProperty(t.prototype,"initialState",{get:function(){var t=this;return this._initialState?this._initialState:ae(this,(function(){return t._initialState=t.machine.initialState,t._initialState}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return N||et(this.status!==je.NotStarted,"Attempted to read state from uninitialized service '".concat(this.id,"'. Make sure the service is started first.")),this._state},enumerable:!1,configurable:!0}),t.prototype.execute=function(t,e){var n,i;try{for(var r=u(t.actions),o=r.next();!o.done;o=r.next()){var a=o.value;this.exec(a,t,e)}}catch(s){n={error:s}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}},t.prototype.update=function(t,e){var n,i,r,o,a,s,c,l,d=this;if(t._sessionid=this.sessionId,this._state=t,this.machine.config.predictableActionArguments&&e!==_t||!this.options.execute){var h=void 0;while(h=this._outgoingQueue.shift())h[0].send(h[1])}else this.execute(this.state);if(this.children.forEach((function(t){d.state.children[t.id]=t})),this.devTools&&this.devTools.send(e.data,t),t.event)try{for(var f=u(this.eventListeners),v=f.next();!v.done;v=f.next()){var p=v.value;p(t.event)}}catch(A){n={error:A}}finally{try{v&&!v.done&&(i=f.return)&&i.call(f)}finally{if(n)throw n.error}}try{for(var y=u(this.listeners),g=y.next();!g.done;g=y.next()){p=g.value;p(t,t.event)}}catch(C){r={error:C}}finally{try{g&&!g.done&&(o=y.return)&&o.call(y)}finally{if(r)throw r.error}}try{for(var m=u(this.contextListeners),w=m.next();!w.done;w=m.next()){var _=w.value;_(this.state.context,this.state.history?this.state.history.context:void 0)}}catch(O){a={error:O}}finally{try{w&&!w.done&&(s=m.return)&&s.call(m)}finally{if(a)throw a.error}}if(this.state.done){var b=t.configuration.find((function(t){return"final"===t.type&&t.parent===d.machine})),S=b&&b.doneData?J(b.doneData,t.context,e):void 0;this._doneEvent=Ut(this.id,S);try{for(var x=u(this.doneListeners),E=x.next();!E.done;E=x.next()){p=E.value;p(this._doneEvent)}}catch(P){c={error:P}}finally{try{E&&!E.done&&(l=x.return)&&l.call(x)}finally{if(c)throw c.error}}this._stop(),this._stopChildren(),Te.free(this.sessionId)}},t.prototype.onTransition=function(t){return this.listeners.add(t),this.status===je.Running&&t(this.state,this.state.event),this},t.prototype.subscribe=function(t,e,n){var i=this,r=gt(t,e,n);this.listeners.add(r.next),this.status!==je.NotStarted&&r.next(this.state);var o=function(){i.doneListeners.delete(o),i.stopListeners.delete(o),r.complete()};return this.status===je.Stopped?r.complete():(this.onDone(o),this.onStop(o)),{unsubscribe:function(){i.listeners.delete(r.next),i.doneListeners.delete(o),i.stopListeners.delete(o)}}},t.prototype.onEvent=function(t){return this.eventListeners.add(t),this},t.prototype.onSend=function(t){return this.sendListeners.add(t),this},t.prototype.onChange=function(t){return this.contextListeners.add(t),this},t.prototype.onStop=function(t){return this.stopListeners.add(t),this},t.prototype.onDone=function(t){return this.status===je.Stopped&&this._doneEvent?t(this._doneEvent):this.doneListeners.add(t),this},t.prototype.off=function(t){return this.listeners.delete(t),this.eventListeners.delete(t),this.sendListeners.delete(t),this.stopListeners.delete(t),this.doneListeners.delete(t),this.contextListeners.delete(t),this},t.prototype.start=function(t){var e=this;if(this.status===je.Running)return this;this.machine._init(),Te.register(this.sessionId,this),this.initialized=!0,this.status=je.Running;var n=void 0===t?this.initialState:ae(this,(function(){return ne(t)?e.machine.resolveState(t):e.machine.resolveState(re.from(t,e.machine.context))}));return this.options.devTools&&this.attachDev(),this.scheduler.initialize((function(){e.update(n,_t)})),this},t.prototype._stopChildren=function(){this.children.forEach((function(t){it(t.stop)&&t.stop()})),this.children.clear()},t.prototype._stop=function(){var t,e,n,i,r,o,a,s,c,l;try{for(var d=u(this.listeners),h=d.next();!h.done;h=d.next()){var f=h.value;this.listeners.delete(f)}}catch(x){t={error:x}}finally{try{h&&!h.done&&(e=d.return)&&e.call(d)}finally{if(t)throw t.error}}try{for(var v=u(this.stopListeners),p=v.next();!p.done;p=v.next()){f=p.value;f(),this.stopListeners.delete(f)}}catch(E){n={error:E}}finally{try{p&&!p.done&&(i=v.return)&&i.call(v)}finally{if(n)throw n.error}}try{for(var y=u(this.contextListeners),g=y.next();!g.done;g=y.next()){f=g.value;this.contextListeners.delete(f)}}catch(A){r={error:A}}finally{try{g&&!g.done&&(o=y.return)&&o.call(y)}finally{if(r)throw r.error}}try{for(var m=u(this.doneListeners),w=m.next();!w.done;w=m.next()){f=w.value;this.doneListeners.delete(f)}}catch(C){a={error:C}}finally{try{w&&!w.done&&(s=m.return)&&s.call(m)}finally{if(a)throw a.error}}if(!this.initialized)return this;this.initialized=!1,this.status=je.Stopped,this._initialState=void 0;try{for(var _=u(Object.keys(this.delayedEventsMap)),b=_.next();!b.done;b=_.next()){var S=b.value;this.clock.clearTimeout(this.delayedEventsMap[S])}}catch(O){c={error:O}}finally{try{b&&!b.done&&(l=_.return)&&l.call(_)}finally{if(c)throw c.error}}this.scheduler.clear(),this.scheduler=new Ce({deferEvents:this.options.deferEvents})},t.prototype.stop=function(){var t=this,e=this.scheduler;return this._stop(),e.schedule((function(){var e;if(!(null===(e=t._state)||void 0===e?void 0:e.done)){var n=dt({type:"xstate.stop"}),i=ae(t,(function(){var e=z(d([],l(t.state.configuration),!1).sort((function(t,e){return e.order-t.order})).map((function(e){return xt(e.onExit,t.machine.options.actions)}))),i=l(Ft(t.machine,t.state,t.state.context,n,[{type:"exit",actions:e}],t.machine.config.predictableActionArguments?t._exec:void 0,t.machine.config.predictableActionArguments||t.machine.config.preserveActionOrder),2),r=i[0],o=i[1],a=new re({value:t.state.value,context:o,_event:n,_sessionid:t.sessionId,historyValue:void 0,history:t.state,actions:r.filter((function(t){return!wt(t)})),activities:{},events:[],configuration:[],transitions:[],children:{},done:t.state.done,tags:t.state.tags,machine:t.machine});return a.changed=!0,a}));t.update(i,n),t._stopChildren(),Te.free(t.sessionId)}})),this},t.prototype.batch=function(t){var e=this;if(this.status===je.NotStarted&&this.options.deferEvents)N||et(!1,"".concat(t.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'" and are deferred. Make sure .start() is called for this service.\nEvent: ').concat(JSON.stringify(event)));else if(this.status!==je.Running)throw new Error("".concat(t.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.'));if(t.length){var n=!!this.machine.config.predictableActionArguments&&this._exec;this.scheduler.schedule((function(){var i,r,o=e.state,a=!1,s=[],c=function(t){var i=dt(t);e.forward(i),o=ae(e,(function(){return e.machine.transition(o,i,void 0,n||void 0)})),s.push.apply(s,d([],l(e.machine.config.predictableActionArguments?o.actions:o.actions.map((function(t){return ie(t,o)}))),!1)),a=a||!!o.changed};try{for(var h=u(t),f=h.next();!f.done;f=h.next()){var v=f.value;c(v)}}catch(p){i={error:p}}finally{try{f&&!f.done&&(r=h.return)&&r.call(h)}finally{if(i)throw i.error}}o.changed=a,o.actions=s,e.update(o,dt(t[t.length-1]))}))}},t.prototype.sender=function(t){return this.send.bind(this,t)},t.prototype._nextState=function(t,e){var n=this;void 0===e&&(e=!!this.machine.config.predictableActionArguments&&this._exec);var i=dt(t);if(0===i.name.indexOf(x)&&!this.state.nextEvents.some((function(t){return 0===t.indexOf(x)})))throw i.data.data;var r=ae(this,(function(){return n.machine.transition(n.state,i,void 0,e||void 0)}));return r},t.prototype.nextState=function(t){return this._nextState(t,!1)},t.prototype.forward=function(t){var e,n;try{for(var i=u(this.forwardTo),r=i.next();!r.done;r=i.next()){var o=r.value,a=this.children.get(o);if(!a)throw new Error("Unable to forward event '".concat(t,"' from interpreter '").concat(this.id,"' to nonexistant child '").concat(o,"'."));a.send(t)}}catch(s){e={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.defer=function(t){var e=this,n=this.clock.setTimeout((function(){"to"in t&&t.to?e.sendTo(t._event,t.to,!0):e.send(t._event)}),t.delay);t.id&&(this.delayedEventsMap[t.id]=n)},t.prototype.cancel=function(t){this.clock.clearTimeout(this.delayedEventsMap[t]),delete this.delayedEventsMap[t]},t.prototype.exec=function(t,e,n){void 0===n&&(n=this.machine.options.actions),this._exec(t,e.context,e._event,n)},t.prototype.removeChild=function(t){var e;this.children.delete(t),this.forwardTo.delete(t),null===(e=this.state)||void 0===e||delete e.children[t]},t.prototype.stopChild=function(t){var e=this.children.get(t);e&&(this.removeChild(t),it(e.stop)&&e.stop())},t.prototype.spawn=function(t,e,n){if(this.status!==je.Running)return ue(t,e);if(K(t))return this.spawnPromise(Promise.resolve(t),e);if(it(t))return this.spawnCallback(t,e);if(de(t))return this.spawnActor(t,e);if(at(t))return this.spawnObservable(t,e);if(ct(t))return this.spawnMachine(t,s(s({},n),{id:e}));if(X(t))return this.spawnBehavior(t,e);throw new Error('Unable to spawn entity "'.concat(e,'" of type "').concat(typeof t,'".'))},t.prototype.spawnMachine=function(e,n){var i=this;void 0===n&&(n={});var r=new t(e,s(s({},this.options),{parent:this,id:n.id||e.id})),o=s(s({},Le),n);o.sync&&r.onTransition((function(t){i.send(A,{state:t,id:r.id})}));var a=r;return this.children.set(r.id,a),o.autoForward&&this.forwardTo.add(r.id),r.onDone((function(t){i.removeChild(r.id),i.send(dt(t,{origin:r.id}))})).start(),a},t.prototype.spawnBehavior=function(t,e){var n=Re(t,{id:e,parent:this});return this.children.set(e,n),n},t.prototype.spawnPromise=function(t,e){var n,i,r=this,o=!1;t.then((function(t){o||(i=t,r.removeChild(e),r.send(dt(Ut(e,t),{origin:e})))}),(function(t){if(!o){r.removeChild(e);var n=Vt(e,t);try{r.send(dt(n,{origin:e}))}catch(i){vt(t,i,e),r.devTools&&r.devTools.send(n,r.state),r.machine.strict&&r.stop()}}}));var a=(n={id:e,send:function(){},subscribe:function(e,n,i){var r=gt(e,n,i),o=!1;return t.then((function(t){o||(r.next(t),o||r.complete())}),(function(t){o||r.error(t)})),{unsubscribe:function(){return o=!0}}},stop:function(){o=!0},toJSON:function(){return{id:e}},getSnapshot:function(){return i}},n[st]=function(){return this},n);return this.children.set(e,a),a},t.prototype.spawnCallback=function(t,e){var n,i,r,o=this,a=!1,s=new Set,c=new Set,u=function(t){i=t,c.forEach((function(e){return e(t)})),a||o.send(dt(t,{origin:e}))};try{r=t(u,(function(t){s.add(t)}))}catch(d){this.send(Vt(e,d))}if(K(r))return this.spawnPromise(r,e);var l=(n={id:e,send:function(t){return s.forEach((function(e){return e(t)}))},subscribe:function(t){var e=gt(t);return c.add(e.next),{unsubscribe:function(){c.delete(e.next)}}},stop:function(){a=!0,it(r)&&r()},toJSON:function(){return{id:e}},getSnapshot:function(){return i}},n[st]=function(){return this},n);return this.children.set(e,l),l},t.prototype.spawnObservable=function(t,e){var n,i,r=this,o=t.subscribe((function(t){i=t,r.send(dt(t,{origin:e}))}),(function(t){r.removeChild(e),r.send(dt(Vt(e,t),{origin:e}))}),(function(){r.removeChild(e),r.send(dt(Ut(e),{origin:e}))})),a=(n={id:e,send:function(){},subscribe:function(e,n,i){return t.subscribe(e,n,i)},stop:function(){return o.unsubscribe()},getSnapshot:function(){return i},toJSON:function(){return{id:e}}},n[st]=function(){return this},n);return this.children.set(e,a),a},t.prototype.spawnActor=function(t,e){return this.children.set(e,t),t},t.prototype.spawnActivity=function(t){var e=this.machine.options&&this.machine.options.activities?this.machine.options.activities[t.type]:void 0;if(e){var n=e(this.state.context,t);this.spawnEffect(t.id,n)}else N||et(!1,"No implementation found for activity '".concat(t.type,"'"))},t.prototype.spawnEffect=function(t,e){var n;this.children.set(t,(n={id:t,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},stop:e||void 0,getSnapshot:function(){},toJSON:function(){return{id:t}}},n[st]=function(){return this},n))},t.prototype.attachDev=function(){var t=ke();if(this.options.devTools&&t){if(t.__REDUX_DEVTOOLS_EXTENSION__){var e="object"===typeof this.options.devTools?this.options.devTools:void 0;this.devTools=t.__REDUX_DEVTOOLS_EXTENSION__.connect(s(s({name:this.id,autoPause:!0,stateSanitizer:function(t){return{value:t.value,context:t.context,actions:t.actions}}},e),{features:s({jump:!1,skip:!1},e?e.features:void 0)}),this.machine),this.devTools.init(this.state)}Ne(this)}},t.prototype.toJSON=function(){return{id:this.id}},t.prototype[st]=function(){return this},t.prototype.getSnapshot=function(){return this.status===je.NotStarted?this.initialState:this._state},t.defaultOptions={execute:!0,deferEvents:!0,clock:{setTimeout:function(t,e){return setTimeout(t,e)},clearTimeout:function(t){return clearTimeout(t)}},logger:console.log.bind(console),devTools:!1},t.interpret=Ue,t}();function Ue(t,e){var n=new De(t,e);return n}const Ve=["water","migration","butterfly","conclusion"];var Me=n(6608),Fe=n(54042),qe=n(34413),He=n(58191);function Ge(){return{loaded:!1,firstscenesloaded:!1,progressiveloaded:!1,score:0,step:0,mobileOrigamiId:"noOrigami",sceneId:1,sceneStep:0,isHolding:!1,theatreProject:null,archiveTransition:!1,introReady:!1,introLoaded:!1,showTitle:!1,introSkipped:!1,hasReachedPortail:!1,isLeavingPortail:!1}}const ze=["intro","scene1","scene2","scene3","scene4","outroduction","conclusion","brushes","archives"];async function Be(){await nn.Scene.activities.createActivity("intro")}async function $e(t){await Promise.all(t.filter((t=>"intro"!==t)).map((t=>nn.Scene.activities.createActivity(t))))}function Je(t){return function(){return nn.Scene.activities.loadActivity(t)}}function We(t){return function(){nn.Scene.activities.startActivity(t)}}function Ke(t){return function(){nn.Scene.activities.stopActivity(t)}}let Xe="initializing",Ze="#app.intro";function Qe(){return Ee({predictableActionArguments:!0,id:"app",initial:"initial",context:Ge(),states:{initial:{on:{INIT:{target:Xe}}},initializing:{initial:"create_intro",entry:[()=>(0,qe.Kq)({location:"loading",title:"loading"})],states:{create_intro:{invoke:[{src:"createIntroActivity",onDone:{target:"#app.initializing.load_intro_resources"}}]},load_intro_resources:{invoke:[{src:"loadIntro",onDone:{target:"#app.initializing.load_remaining_resources"}}]},load_remaining_resources:{invoke:[{id:"load-activites-start",src:"loadActivitesStart",onDone:{actions:t=>t.loaded=!0,target:"#app.initializing.loaded"}}]},loaded:{entry:[()=>nn.glapp.startProfile()],always:[{target:"#app.scene",cond:"hasJump",actions:["checkJumpTarget"]},{target:Ze,cond:"isJumpTargetNotIntro",actions:[Ke("intro")]},{target:Ze}]}}},intro:{initial:"loader",exit:[Ke("intro"),"hideTitle"],states:{loader:{initial:"loading",states:{loading:{on:{NEXT:{target:"#app.intro.loader.ready"}}},ready:{on:{NEXT:{target:"#app.intro.loader.showHeadPhones"}}},showHeadPhones:{after:{3e3:{target:"#app.intro.create_activities"}}}}},create_activities:{invoke:[{src:"createActivities",onDone:{target:"#app.intro.voice_over"}}]},voice_over:{entry:["conditionalStartIntro",()=>(0,qe.Kq)({location:"intro",title:"intro"})],invoke:[{id:"load-activites-progressive",src:"loadProgressiveActivitesStart",onDone:{actions:t=>{t.firstscenesloaded=!0,t.progressiveloaded=!0}}}],on:{INTRO_READY:{actions:t=>t.introReady=!0},SKIP_INTRO:{actions:t=>t.introSkipped=!0},SET_SHOW_TITLE:{actions:"setShowTitle"},NEXT:{target:"#app.intro.waitloading.start"}}},waitloading:{states:{start:{always:[{target:"#app.scene",cond:"firstSceneLoaded"},{target:"#app.intro.waitloading.wait"}]},wait:{after:{1e3:"#app.intro.waitloading.start"}}}}}},origami:{exit:"stopActivityScene",after:{1:[{target:"#app.portail",cond:"hasReachedPortail"},{actions:"incrementSceneId",cond:"hasNextScene",target:"#app.scene"},{target:"#app.conclusion"}]}},scene:{initial:"idle",entry:[t=>(0,qe.Kq)({location:`scene${t.sceneId}`,title:`scene${t.sceneId}`})],on:{SCENE_FINISH:{target:"#app.scene.outro",internal:!0}},states:{idle:{entry:"startActivityScene",always:"interacting"},interacting:{initial:"idle",on:{SUCCESS_INTERACTION:{target:".success"},PERFECT_INTERACTION:{target:".perfect"},INCREMENT_SCENE_STEP:{actions:"incrementSceneStep"},DECREMENT_SCENE_STEP:{actions:"decrementSceneStep"},HOLDING:{actions:"setIsHolding"},RELEASING:{actions:"setIsReleasing"}},states:{idle:{},success:{on:{BACK_TO_INTERACTION_IDLE:{target:"idle"}}},perfect:{after:{100:{target:"#app.scene.interacting.idle",internal:!0}}}}},outro:{on:{GO_TO_QUOTE:{target:"quote",actions:"resetSceneStep"}}},quote:{always:{target:"#app.origami"},on:{NEXT_ORIGAMI:{target:"#app.origami"},GO_TO_OUTRODUCTION:{target:"#app.outroduction"}}}}},outroduction:{initial:"intro",states:{intro:{on:{SKIP:{target:"#app.portail"},GO_ABOUT:{target:"#app.about"}}}}},conclusion:{initial:"running",entry:[()=>(0,qe.Kq)({location:"outro",title:"outro"})],states:{idle:{entry:[We("conclusion")],always:"running"},running:{entry:[We("conclusion")],exit:[Ke("conclusion")],on:{GO_TO_QUOTE:{target:"#app.portail"},GO_ABOUT:{target:"#app.about"}}}}},portail:{initial:"idle",entry:[qt({hasReachedPortail:!0,isLeavingPortail:!1}),()=>(0,qe.Kq)({location:"portail",title:"portail"})],on:{LEAVE_PORTAIL:{actions:"leavePortail"},GO_TO_SCENE:{target:"#app.scene"}},states:{idle:{entry:[We("archives")],always:[{target:"running"}]},running:{exit:[Ke("archives")],on:{SET_STEP:{actions:"setStep"},NEXT:{actions:"next"},PREV:{actions:"prev"},RESET_SCROLL:{actions:"reset"},NEXT_ORIGAMI:{target:"#app.origami"},GO_ABOUT:{target:"#app.about"},ARCHIVE_TRANSITION:{actions:(t,e)=>t.archiveTransition=e.isInTransition}}}}},about:{initial:"idle",entry:[()=>(0,qe.Kq)({location:"credits",title:"credits"})],states:{idle:{on:{PREV:{target:"#app.portail"}}}}}}},{actions:{checkJumpTarget(t){},setStep:(t,e)=>{e.step<0&&e.step>=Ve.length||(t.step=e.step)},next:t=>{t.step<=Ve.length&&t.step++},prev:t=>{t.step>0&&t.step--},reset:t=>{t.step=0===t.step?Ve.length-1:0},setOrigamiId:(t,e)=>{t.mobileOrigamiId=e.origamiId},resetOrigamiId:t=>{t.mobileOrigamiId="noOrigami"},setSceneId:(t,e)=>{console.log("set scene id "+e.sceneId),t.sceneId=e.sceneId},incrementSceneId:t=>{t.sceneId++},incrementSceneStep:t=>{t.sceneStep++},decrementSceneStep:t=>{t.sceneStep--},resetSceneStep:t=>{t.sceneStep=0},setIsHolding:t=>{t.isHolding=!0},setIsReleasing:t=>{t.isHolding=!1},setShowTitle:t=>{t.showTitle=!0},hideTitle:t=>{t.showTitle=!1},startActivityOrigami:t=>{We("origami"+t.sceneId)()},stopActivityOrigami:t=>{Ke("origami"+t.sceneId)()},startActivityScene:t=>{We("scene"+t.sceneId)()},stopActivityScene:t=>{Ke("scene"+t.sceneId)()},conditionalStartIntro:t=>{nn.Scene.activities.startActivity("intro")},leavePortail:(t,e)=>{t.sceneId=e.sceneId,t.isLeavingPortail=!0;const n=nn.Scene.activities.active[0];n.animeOut()}},services:{async createIntroActivity(t){const e=await Promise.all([n.e(9400),n.e(6381),n.e(2280)]).then(n.bind(n,62280));t.theatreProject=new e.default,await nn.Scene.createTexturePool(),await Be()},async createActivities(){await $e(ze)},async loadIntro(t){(0,Me.MB)(4),await(0,Fe.m)("audio/subtitles/0_introduction_vo.srt").then((()=>(0,Me.j9)())),await Promise.all([Je("intro")()].map((t=>t.then((()=>(0,Me.j9)()))))),t.introLoaded=!0},async loadActivitesStart(t){const e=[];await nn.Scene.load(),(0,Me.j9)(),e.push(t.theatreProject.load()),await Promise.all(e.map((t=>t.then((()=>(0,Me.j9)())))))},async loadProgressiveActivitesStart(t){const e=await Promise.all([n.e(9400),n.e(6478),n.e(9320)]).then(n.bind(n,56478));e.handlerest();const i=await Promise.all([n.e(5409),n.e(1045)]).then(n.bind(n,25409));i.default.progressiveLoadingPart1();const r=ze.filter((t=>"scene1"===t||"scene2"===t)).map((t=>Je(t)()));r.push((0,He.HT)("audio/subtitles/chapter1_1.srt"),(0,He.HT)("audio/subtitles/chapter1_2.srt"),(0,He.HT)("audio/subtitles/chapter1_3.srt"),(0,He.HT)("audio/subtitles/chapter1_4.srt"),(0,He.HT)("audio/subtitles/chapter2_1.srt"),(0,He.HT)("audio/subtitles/chapter2_2.srt"),(0,He.HT)("audio/subtitles/chapter2_3.srt"),(0,He.HT)("audio/subtitles/chapter2_4.srt")),await Promise.all(r.map((t=>t))),t.firstscenesloaded=!0,i.default.progressiveLoadingPart2();const o=ze.filter((t=>"intro"!==t&&"scene1"!==t&&"scene2"!==t&&"archives"!==t&&"brushes"!==t)).map((t=>Je(t)()));await Promise.all(o.map((t=>t)));const a=ze.filter((t=>"archives"===t||"brushes"===t)).map((t=>Je(t)()));a.push(nn.Scene.loadTransition()),await Promise.all(a.map((t=>t))),t.progressiveloaded=!0}},guards:{firstSceneLoaded:t=>t.firstscenesloaded,isSkipped:()=>({NODE_ENV:"production",VUE_APP_DEBUG:"false",VUE_APP_WEBSITE_URL:"https://kaizen.makemepulse.com",VUE_APP_DEV_CAMERA_SCHEME:"3ds",VUE_APP_GENERATE_ASSETS_IDS:"true",VUE_APP_API:"https://qpablchk00.execute-api.us-east-1.amazonaws.com/development/",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",VUE_APP_COMING_SOON:"false",BASE_URL:""}.VUE_APP_SKIP_TUTORIAL&&"true"==={NODE_ENV:"production",VUE_APP_DEBUG:"false",VUE_APP_WEBSITE_URL:"https://kaizen.makemepulse.com",VUE_APP_DEV_CAMERA_SCHEME:"3ds",VUE_APP_GENERATE_ASSETS_IDS:"true",VUE_APP_API:"https://qpablchk00.execute-api.us-east-1.amazonaws.com/development/",VUE_APP_I18N_LOCALE:"en",VUE_APP_I18N_FALLBACK_LOCALE:"en",VUE_APP_COMING_SOON:"false",BASE_URL:""}.VUE_APP_SKIP_TUTORIAL),hasNext:t=>t.step<=Ve.length,hasNextScene:t=>t.sceneId<=Ve.length-1,hasPrev:t=>t.step>0,hasJump:()=>{},isJumpTargetNotIntro:()=>"#app.intro"!==Ze,hasReachedPortail:t=>t.hasReachedPortail}})}function Ye(){const t=Ue(Qe());return t.onTransition(((t,e)=>{let n=t.value;if("object"===typeof n){const e=Object.keys(t.value);e.length>0&&(n=e[0])}document.body.className=n.toString()})),t}class tn{static getInstance(){return tn._instance||(tn._instance=new tn),tn._instance}get Scene(){return this.glapp.renderer.scene}constructor(){this.state=Ye(),this.resources=new r}async createGlApp(){const t=await n.e(5685).then(n.bind(n,75685));await Promise.all([n.e(8215),n.e(1972),n.e(9278)]).then(n.bind(n,9278)),this.glapp=new t.default,await this.glapp.createGlAppElements()}async start(){await this.createGlApp(),this.state.start(),this.state.send({type:"INIT"}),this.glapp.start()}}const en=tn.getInstance();var nn=en},82027:function(t,e,n){n.d(e,{b:function(){return f},m:function(){return h}});var i=n(97703),r=n(2262),o=n(66252);function a(t){return"state"in t}var s=function(){};function c(t){return"getSnapshot"in t?t.getSnapshot():a(t)?t.state:void 0}function u(t,e){void 0===e&&(e=c);var n=(0,r.dq)(t)?t:(0,r.XI)(t),i=(0,r.XI)(e(n.value)),a=function(t){n.value.send(t)};return(0,o.YP)(n,(function(t,n,r){i.value=e(t);var o=t.subscribe({next:function(t){return i.value=t},error:s,complete:s}).unsubscribe;r((function(){return o()}))}),{immediate:!0}),{state:i,send:a}}var l=function(t,e){return t===e};function d(t,e,n,i){void 0===n&&(n=l),void 0===i&&(i=c);var a,s=(0,r.XI)(e(i(t))),u=function(t){n(s.value,t)||(s.value=t)};return(0,o.bv)((function(){var n=e(i(t));u(n),a=t.subscribe((function(t){var n=e(t);u(n)}))})),(0,o.Jd)((function(){null===a||void 0===a||a.unsubscribe()})),s}function h(){return u(i["default"].state)}function f(t){return d(i["default"].state,(e=>e.context[t]),((t,e)=>t===e))}},58191:function(t,e,n){n.d(e,{HT:function(){return u},j5:function(){return c},mZ:function(){return s}});var i=n(2262),r=n(54042);const o=[{start:0,end:9,text:(0,r.G)("at makemepulse, passion fuels everything we do. with each project, we bring a new <strong>perspective</strong> to the table, ensuring every experience is truly one-of-a-kind.")}],a=(0,i.qj)({blocking:!1,content:new Map([["outro-text",o]])});function s(t){a.blocking=t}function c(t,e){a.content.set(t,e)}async function u(t){const e=a.content.get(t);return e||(await(0,r.m)(t),a.content.get(t))}},6608:function(t,e,n){n.d(e,{MB:function(){return o},j9:function(){return a}});var i=n(2262);const r=(0,i.qj)({toLoad:0,loaded:0});function o(t){r.toLoad=t}function a(){r.loaded++}e["ZP"]=r},34413:function(t,e,n){n.d(e,{Kq:function(){return o},N5:function(){return r},Q7:function(){return i}});const i=new Map([["instagram",{id:"instagram",type:"socialmedia"}],["x",{id:"x",type:"socialmedia"}],["linkedin",{id:"linkedin",type:"socialmedia"}],["website",{id:"mmpcom",type:"corporate"}]]);function r(t){try{window.dataLayer.push({event:"select_content",content_type:t.type,content_id:t.id})}catch(e){console.error(e)}}function o(t){try{window.dataLayer.push({event:"page_view",page_location:`/${t.location}`,page_title:t.title})}catch(e){console.error(e)}}},54042:function(t,e,n){n.d(e,{G:function(){return a},m:function(){return c}});var i=n(58191);function r(t){const e=t.split(","),[n,i,r]=e[0].split(":").map((t=>parseFloat(t)));return 3600*n+60*i+parseFloat(r)+parseFloat(e[1])/1e3}async function o(t){const e=/\{(.*?)\}/g,n=[];let i;while(i=e.exec(t))n.push(i);for(const o of n){const e=o[1],n=`/assets/images/emojis/${e}.svg`;try{const e=await fetch(n),i=await e.text();t=t.replace(`{${o[1]}}`,`<span class="svg-icon">${i}</span>`)}catch(r){console.error("Failed to load SVG:",r),t=t.replace(`{${o[1]}}`,"")}}return t}function a(t){return t.replace(/<strong>(.*?)<\/strong>/g,((t,e)=>{const n='\n      <svg preserveAspectRatio="none" viewBox="0 0 96 26" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path d="M5.50359 25.2177C5.35697 24.3046 5.25046 23.6454 5.13721 22.929C5.49001 22.8125 5.80081 22.7096 6.19283 22.5793C5.78243 21.6746 5.21912 22.0784 4.74642 22.0174C4.04418 21.9303 3.34483 21.8394 2.6427 21.7482C2.64319 21.6307 2.6408 21.517 2.6413 21.3995C2.84386 21.2982 3.04919 21.1971 3.25187 21.0917C3.23395 21.038 3.22014 20.9357 3.20075 20.9346C2.00998 20.7571 1.13881 19.8611 0.547526 18.3778C0.0756476 17.1896 -0.0849813 15.8825 0.041573 14.5237C0.132397 13.552 0.272963 12.5874 0.372096 11.6163C0.494261 10.4154 1.23805 8.70876 1.92616 8.40573C2.19656 7.46114 2.28301 6.3473 2.70687 5.87016C3.29976 5.20051 4.12403 4.8895 4.88004 4.63924C5.72845 4.35808 6.61477 4.31032 7.48672 4.1806C8.74855 3.99743 10.0097 3.83854 11.2713 3.66346C12.8419 3.45031 14.408 3.20038 15.9805 3.01978C18.0094 2.78569 20.0395 2.60843 22.0679 2.39458C23.8208 2.20868 25.5695 1.97791 27.3221 1.80415C28.8132 1.65512 30.3082 1.56714 31.8018 1.43042C33.3816 1.28674 34.9597 1.10242 36.5392 0.966847C37.4569 0.888549 38.3867 0.973166 39.2983 0.81341C40.3354 0.632857 41.3688 0.780511 42.4029 0.70925C43.548 0.632545 44.6942 0.616726 45.8383 0.576452C48.4458 0.486833 51.0529 0.413415 53.6611 0.29951C55.4304 0.224066 57.2007 0.0108288 58.971 0.000317599C60.6913 -0.00916112 62.4111 0.196224 64.1323 0.255725C66.0779 0.324748 68.0361 0.540501 69.9675 0.320789C71.3841 0.159138 72.7607 0.538378 74.1578 0.476918C74.9217 0.442028 75.7261 0.84749 76.4534 0.631984C78.8954 -0.0920555 81.3229 0.707568 83.7565 0.587156C85.265 0.512157 86.7931 0.628912 88.292 0.897977C88.8745 1.00214 89.3995 1.77588 89.9171 2.2167C90.4517 2.24903 91.0813 2.05601 91.5611 2.36074C92.8367 3.17584 94.1013 4.09163 95.2545 5.21965C95.6786 5.63454 96.3952 6.50096 95.7273 7.6729C95.6456 7.81798 95.7057 8.25141 95.7939 8.47164C96.1443 9.34025 96.1028 9.93376 95.2056 10.0741C95.3229 11.1435 95.487 12.1266 95.5149 13.1176C95.5317 13.7106 95.3317 14.3188 95.2127 15.005C95.304 15.1159 95.4703 15.3206 95.7412 15.6533C95.4471 15.5544 95.2877 15.5001 94.9853 15.4007C95.1773 15.8786 95.3148 16.2235 95.4185 16.4852C94.8294 18.5134 94.2415 20.5011 93.6727 22.5021C93.3713 23.5624 92.7973 24.1521 92.1339 24.6634C91.6661 25.0243 91.3152 25.7694 90.67 25.4263C90.506 25.3394 90.3177 25.328 90.1403 25.3213C89.6995 25.3109 89.1998 24.7251 88.8511 25.6934C88.7727 25.9157 88.3987 25.9985 88.163 25.9924C86.9433 25.9591 85.7279 25.8694 84.5087 25.8159C83.0984 25.7509 81.6854 25.6857 80.2744 25.645C78.2813 25.5893 76.2891 25.5985 74.2971 25.5024C72.4741 25.4124 70.6555 25.1686 68.8352 25.0828C66.7433 24.9847 64.6446 25.0361 62.5526 24.942C60.1864 24.8354 57.8258 24.6237 55.46 24.5009C54.6372 24.4592 53.8101 24.5755 52.9861 24.5743C51.9791 24.5742 50.9739 24.5053 49.9671 24.4971C47.5514 24.4726 45.1352 24.4684 42.7193 24.452C41.4073 24.4416 40.0969 24.3785 38.7865 24.4128C36.7127 24.4617 34.6375 24.5633 32.5625 24.6608C30.7153 24.7437 28.8652 24.8304 27.0199 24.9459C25.0245 25.0725 23.0309 25.2317 21.0376 25.3828C19.3306 25.5107 17.6258 25.7603 15.9202 25.7423C14.6943 25.729 13.4803 25.7894 12.2636 25.9469C12.13 25.9631 11.9892 25.837 11.8522 25.776C11.5454 25.6358 11.3055 25.0821 10.9155 25.841C10.754 26.1597 10.0677 25.8992 9.62078 25.9087C8.99616 25.9236 8.36296 26.0475 7.75036 25.9293C6.93083 25.7703 6.12756 25.4257 5.50359 25.2177Z" fill="currentColor" />\n      </svg>\n    ';return`<strong>${e} ${n}</strong>`}))}async function s(t){const e=[],n=/(\d+)\r?\n(\d{2}:\d{2}:\d{2},\d{3}) --> (\d{2}:\d{2}:\d{2},\d{3})\r?\n([\s\S]*?)(?=\r?\n\r?\n|$)/g;let i;while(i=n.exec(t)){const t=r(i[2]),n=r(i[3]);let s=i[4].replace(/\n/g," ");s=await o(s),s=a(s),e.push({start:t,end:n,text:s})}return e}async function c(t){const e=await fetch(t);if(!e.ok)return void console.error(`Failed to load the SRT file : ${t}.`);const n=await e.text(),r=await s(n);(0,i.j5)(t,r)}},54297:function(t,e,n){n.d(e,{PA:function(){return l},s6:function(){return u}});var i=n(7748),r=n(68736),o=n(86773);new DOMParser;function a(t){if(!t.ok)throw new Error(`NetworkError: status : ${t.status} ${t.statusText}, url : ${t.url}`)}async function s(t,e){const n=await fetch(t,e);return a(n),n}class c extends o._z{constructor(t,e={}){super(),this.url=t,this.init=e}async doLoad(){const t=Object.assign({},this.init,{signal:(0,i.ZP)(this.abortSignal)}),e=await s(this.url,t);return this.parseResponse(e)}doUnload(){}}class u extends c{parseResponse(t){return t.arrayBuffer()}}class l extends c{doUnload(){super.doUnload();const t=this.value;t&&(t.src="")}async parseResponse(t){const e=await t.blob(),n=URL.createObjectURL(e),i=new Image,o=new r.Z;i.onload=o.resolve,i.onerror=o.reject,i.src=n;try{await o.promise}finally{URL.revokeObjectURL(n)}return await i.decode(),i}}},86773:function(t,e,n){n.d(e,{$z:function(){return u},Rw:function(){return i},_z:function(){return c}});var i,r=n(7748),o=n(68736),a=n(4638),s=n(92571);(function(t){t[t["UNLOADED"]=0]="UNLOADED",t[t["LOADING"]=1]="LOADING",t[t["LOADED"]=2]="LOADED",t[t["ERRORED"]=3]="ERRORED"})(i||(i={}));class c{get isControlled(){return this._isControlled}constructor(){this._value=null,this._state=i.UNLOADED,this._isControlled=!1,this._onAborted=()=>{this._unload()},this._reset()}_reset(){this._state=i.UNLOADED,this._value=null,this._deferred=new o.Z,(0,r._8)(this._deferred.promise)}get value(){return this._value}get state(){return this._state}get isLoaded(){return this._state===i.LOADED}get isErrored(){return this._state===i.ERRORED}get isPending(){return this._state===i.UNLOADED}get isLoading(){return this._state===i.LOADING}get isComplete(){return this.isErrored||this.isLoaded}get abortSignal(){return this._abortCtrl.signal}response(){return this._deferred.promise}load(t=a.R.none){if(this.isControlled)throw new Error("Can't call load() on a controlled Resource");return this._load(t)}unload(){if(this.isControlled)throw new Error("Can't call unload() on a controlled Resource");this._unload()}_load(t){var e;if(this.isPending){this._state=i.LOADING,null===(e=this._abortCtrl)||void 0===e||e.signal.removeEventListener("abort",this._onAborted),this._abortCtrl=new s.H(t),this._abortCtrl.signal.addEventListener("abort",this._onAborted);const n=this._deferred;this.doLoad().then((t=>{n===this._deferred&&(this._value=t,this._state=i.LOADED,n.resolve(t))}),(t=>{n===this._deferred&&(this._state=i.ERRORED,n.reject(t))}))}return this.response()}_unload(){this.isPending||(this.doUnload(),this._deferred.reject(new s._),this._reset(),this._abortCtrl.abort())}setProgress(){}static all(t){return Promise.all(t.map((t=>t.response())))}}class u{static loadResource(t,e){return t._load(e)}static unloadResource(t){t._unload()}static markControlled(t,e){t._isControlled=e}static resetResource(t){t._reset()}}},71794:function(t,e,n){n.r(e),n.d(e,{default:function(){return d}});var i=n(66252),r=n(49963),o=n(2262),a=n(82027);const s={key:0},c={key:0,class:"background-subtitles"};var u=(0,i.aZ)({__name:"App",setup(t){const{state:e}=(0,a.m)(),u=(0,a.b)("sceneId"),l=((0,a.b)("isHolding"),(0,a.b)("showTitle")),d=(0,i.RC)((()=>Promise.all([n.e(9975),n.e(5409),n.e(8348),n.e(3414)]).then(n.bind(n,21884)))),h=(0,i.RC)((()=>Promise.all([n.e(9975),n.e(5409),n.e(8348),n.e(5697),n.e(2057)]).then(n.bind(n,32367)))),f=(0,i.RC)((()=>Promise.all([n.e(9975),n.e(9650),n.e(8348),n.e(5697),n.e(7669)]).then(n.bind(n,97669)))),v=(0,i.RC)((()=>Promise.all([n.e(9975),n.e(5409),n.e(9650),n.e(5697),n.e(9939)]).then(n.bind(n,25622)))),p=(0,i.RC)((()=>Promise.all([n.e(9975),n.e(8348),n.e(2472)]).then(n.bind(n,82472)))),y=(0,i.RC)((()=>Promise.all([n.e(9975),n.e(5409),n.e(2487)]).then(n.bind(n,81523)))),g=(0,i.RC)((()=>Promise.all([n.e(9975),n.e(9650),n.e(1512)]).then(n.bind(n,1512)))),m=(0,i.RC)((()=>Promise.all([n.e(9975),n.e(5409),n.e(8348),n.e(4706),n.e(731)]).then(n.bind(n,13201)))),w=(0,i.RC)((()=>Promise.all([n.e(9975),n.e(5409),n.e(9650),n.e(8348),n.e(5697),n.e(4706),n.e(8335),n.e(3441)]).then(n.bind(n,94811)))),_=(0,i.RC)((()=>Promise.all([n.e(9650),n.e(1121)]).then(n.bind(n,61121)))),b=(0,i.RC)((()=>Promise.all([n.e(9975),n.e(8348),n.e(5697),n.e(4706),n.e(8530)]).then(n.bind(n,78341)))),S=(0,i.RC)((()=>Promise.all([n.e(9975),n.e(5409),n.e(9650),n.e(8348),n.e(5697),n.e(4706),n.e(8335),n.e(287)]).then(n.bind(n,27758)))),x=(0,i.RC)((()=>Promise.all([n.e(9650),n.e(5697),n.e(207)]).then(n.bind(n,10207)))),E=((0,i.Fl)((()=>!1===e.value.context.loaded&&!0)),(0,i.Fl)((()=>e.value.matches("origami")))),A=(0,i.Fl)((()=>e.value.matches("initializing"))),C=(0,i.Fl)((()=>e.value.matches("intro"))),O=(0,i.Fl)((()=>e.value.matches("intro.voice_over"))),P=(0,i.Fl)((()=>e.value.matches("intro.voice_over"))),T=(0,i.Fl)((()=>e.value.matches("scene"))),k=((0,i.Fl)((()=>e.value.matches("scene")&&1===e.value.context.sceneId)),(0,i.Fl)((()=>e.value.matches("scene")&&2===e.value.context.sceneId)),(0,i.Fl)((()=>e.value.matches("scene")&&3===e.value.context.sceneId)),(0,i.Fl)((()=>e.value.matches("scene")&&4===e.value.context.sceneId)),(0,i.Fl)((()=>e.value.matches("outroduction")))),I=(0,i.Fl)((()=>e.value.matches("conclusion"))),N=(0,a.b)("isLeavingPortail"),R=(0,i.Fl)((()=>e.value.matches("portail")&&!N.value)),j=(0,i.Fl)((()=>e.value.matches("about"))),L=(0,i.Fl)((()=>R.value||j.value)),D=(0,i.Fl)((()=>j.value)),U=((0,i.Fl)((()=>j.value||C.value&&!P.value||A.value)),(0,o.iH)(!1)),V=(0,o.iH)(null),M=async()=>{V.value=document.createElement("video"),V.value.setAttribute("playsinline","playsinline"),V.value.setAttribute("aria-hidden","true"),V.value.setAttribute("src","");const t=await(await n.e(9565).then(n.bind(n,59565))).default;t(V.value).then((t=>{U.value=t}))},F=(0,o.iH)(!1),q=(0,o.iH)(!1),H=(0,o.iH)(!1),G=()=>F.value=!0;return(0,i.bv)((async()=>{document.fonts&&document.fonts.ready?document.fonts.ready.finally(G):G(),M();const t=await Promise.resolve().then(n.bind(n,97703));await t.default.start(),q.value=!0,H.value=!0})),(t,e)=>F.value?((0,i.wg)(),(0,i.iD)("main",s,[(0,i.Wm)(r.uT,{name:"fade"},{default:(0,i.w5)((()=>[O.value||T.value||E.value||I.value?((0,i.wg)(),(0,i.iD)("div",c)):(0,i.kq)("",!0)])),_:1}),!H.value||A.value||C.value?((0,i.wg)(),(0,i.j4)((0,o.SU)(b),{key:0})):(0,i.kq)("",!0),q.value?((0,i.wg)(),(0,i.j4)((0,o.SU)(_),{key:1})):(0,i.kq)("",!0),(0,i.Wm)(r.uT,{name:"fade"},{default:(0,i.w5)((()=>[!q.value||C.value&&!O.value||A.value?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)((0,o.SU)(y),{key:0}))])),_:1}),(0,i.Wm)(r.uT,{name:"fade"},{default:(0,i.w5)((()=>[C.value?((0,i.wg)(),(0,i.j4)((0,o.SU)(g),{key:0,"show-title":(0,o.SU)(l)},null,8,["show-title"])):(0,i.kq)("",!0)])),_:1}),q.value&&(!C.value||O.value)&&!A.value||T.value?((0,i.wg)(),(0,i.j4)((0,o.SU)(S),{show:T.value,key:(0,o.SU)(u)},null,8,["show"])):(0,i.kq)("",!0),(0,i.Wm)(r.uT,{name:"fade"},{default:(0,i.w5)((()=>[L.value?((0,i.wg)(),(0,i.j4)((0,o.SU)(d),{key:0})):(0,i.kq)("",!0)])),_:1}),(0,i.Wm)(r.uT,{name:"fade"},{default:(0,i.w5)((()=>[R.value?((0,i.wg)(),(0,i.j4)((0,o.SU)(w),{key:0})):(0,i.kq)("",!0)])),_:1}),(0,i.Wm)(r.uT,{name:"fade"},{default:(0,i.w5)((()=>[D.value?((0,i.wg)(),(0,i.j4)((0,o.SU)(h),{key:0})):(0,i.kq)("",!0)])),_:1}),(0,i.Wm)(r.uT,{name:"fade"},{default:(0,i.w5)((()=>[k.value?((0,i.wg)(),(0,i.j4)((0,o.SU)(p),{key:0})):(0,i.kq)("",!0)])),_:1}),(0,i.Wm)(r.uT,{name:"fade"},{default:(0,i.w5)((()=>[I.value?((0,i.wg)(),(0,i.j4)((0,o.SU)(m),{key:0})):(0,i.kq)("",!0)])),_:1}),(0,i.Wm)(r.uT,{name:"fade"},{default:(0,i.w5)((()=>[j.value?((0,i.wg)(),(0,i.j4)((0,o.SU)(v),{key:0})):(0,i.kq)("",!0)])),_:1}),(0,i.Wm)(r.uT,{name:"fade"},{default:(0,i.w5)((()=>[!q.value||C.value&&!O.value||A.value?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)((0,o.SU)(x),{key:0}))])),_:1}),!q.value||C.value&&!O.value||A.value?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)((0,o.SU)(f),{key:3}))])):(0,i.kq)("",!0)}});const l=u;var d=l}}]);
//# sourceMappingURL=1794.defa0cc5.js.map