"use strict";(self["webpackChunkgl_starter"]=self["webpackChunkgl_starter"]||[]).push([[2052],{62052:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var r=a(5434),o=a(63887),i=a(75256),s=a(61987),n=a(88271);const c=.78;var h=a(68310);const p=o.vec3.create();class u{constructor(t){this.renderer=t,this.camPosX={value:0},this.camPosY={value:0},this.camPosZ={value:0},this.ratioOutro={value:0},this.targetVec3=o.vec3.fromValues(0,0,1),this.outroLookAt=new s.Z}start(){this.renderer.cameras.use("main");const t=this.renderer.cameras.camera;if(!t._parent){const e=new s.Z;e.add(t)}t.position.set([0,0,0]),o.quat.identity(t.rotation),o.vec3.set(t._parent.position,0,.5,0),[this.camPosX.value,this.camPosY.value,this.camPosZ.value]=t._parent.position,t.invalidate(),t._parent.invalidate(),t._parent.updateWorldMatrix(),this.renderer.camera.lens._fov=.6934108803,this.fov={value:.6934108803},this.camPosXTheatre=new r.Z(this.camPosX,this.introSheet,"camPosX"),this.camPosYTheatre=new r.Z(this.camPosY,this.introSheet,"camPosY"),this.camPosZTheatre=new r.Z(this.camPosZ,this.introSheet,"camPosZ"),this.fovTheatre=new r.Z(this.fov,this.introSheet,"fov"),this.ratioOutroTheatre=new r.Z(this.ratioOutro,this.introTransitionSheet,"ratioOutro")}stop(){var t,e,a,r,o;null===(t=this.camPosXTheatre)||void 0===t||t.dispose(),null===(e=this.camPosYTheatre)||void 0===e||e.dispose(),null===(a=this.camPosZTheatre)||void 0===a||a.dispose(),null===(r=this.fovTheatre)||void 0===r||r.dispose(),null===(o=this.ratioOutroTheatre)||void 0===o||o.dispose()}preRender(){this.renderer.camera._parent.position.set([this.camPosX.value,this.camPosY.value,this.camPosZ.value]),o.vec3.add(p,this.renderer.camera._parent.position,this.targetVec3),this.renderer.camera._parent.lookAt(p),this.renderer.camera.invalidate(),this.renderer.camera._parent.invalidate(),this.renderer.camera._parent.updateWorldMatrix();const t=this.ratioOutro.value,e=(0,n.Z)(this.fov.value,c,t);this.renderer.camera.lens.setHorizontalFov(e),t>0&&((0,i.x)(t,this.renderer.camera,this.outroLookAt,h.Io,h.z8,!0),o.quat.lerp(this.renderer.camera.rotation,this.renderer.camera.rotation,h.f7,t))}}},75256:function(t,e,a){a.d(e,{x:function(){return l}});var r=a(63132),o=a(63887);const i=o.vec3.fromValues(0,0,0),s=o.vec3.fromValues(0,0,0),n=o.vec3.fromValues(0,0,0),c=o.quat.create(),h=o.quat.create(),p=o.quat.create();o.quat.identity(p);const u=o.vec3.create();function l(t,e,a,l,d,v=!1,m=!1,_=.7){o.vec3.copy(s,e.position),o.quat.copy(c,e.rotation),v&&(o.vec3.copy(n,e._parent.position),o.quat.copy(h,e._parent.rotation));const f=(0,r.CW)(0,_,t),P=(0,r.CW)(_,1,t);if(m&&(o.vec3.set(u,e._parent.position[0],l[1],e._parent.position[2]),o.vec3.lerp(e._parent.position,e._parent.position,u,f),e._parent.invalidate(),e._parent.updateWorldMatrix(),o.vec3.copy(n,e._parent.position)),!m||m&&f>=1){const r=m?P:t;o.vec3.copy(a.position,l),a.lookAt(d),a.invalidate(),a.updateWorldMatrix();const u=v?e._parent:e;o.quat.slerp(u.rotation,v?h:c,a.rotation,r),o.vec3.lerp(u.position,v?n:s,l,r),u.invalidate(),u.updateWorldMatrix(),v&&(o.quat.slerp(e.rotation,c,p,r),o.vec3.lerp(e.position,s,i,r),e.invalidate(),e.updateWorldMatrix())}}}}]);
//# sourceMappingURL=2052.cc9088f3.js.map