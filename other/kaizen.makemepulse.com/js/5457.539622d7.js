(self["webpackChunkgl_starter"]=self["webpackChunkgl_starter"]||[]).push([[5457],{60215:function(t){var o=function(t){var o="";return o+="","pf"===t.slot&&(o+="\n\nIN mediump vec2 vTexCoord0;\n#define baseColor_texCoord(k) vTexCoord0\n\nconst float NOISE_GRANULARITY = 0.5/255.0;\n\nfloat random(vec2 coords) {\n  return fract(sin(dot(coords.xy, vec2(12.9898,78.233))) * 43758.5453);\n}\n\nfloat sat(float val) {\n  return clamp(val, 0., 1.);\n}\n\n\n"),o+="\n\n","postf"===t.slot&&(o+="\n\nvec3 color = vec3(uUseClampedMix());\nvec2 UVs = vec2(1.) - vTexCoord0;\n\nif (uType() == 0.) {\n    float distToCenter = distance(UVs, vec2(0.5));\n    distToCenter *= uRadialStrength() * 2.;\n    distToCenter = max(0., min(1., distToCenter));\n    color = mix(uBottomColor().rgb, uTopColor().rgb, distToCenter);\n} else if (uType() == 1.) {\n    color = mix(uBottomColor().rgb, uTopColor().rgb, (UVs.y - uBottomColor().a) / (uTopColor().a - uBottomColor().a));\n    color += uMiddleColor().rgb * .000001;\n} else {\n    float topMixVal = (UVs.y - uBottomColor().a) / (uMiddleColor().a - uBottomColor().a);\n    topMixVal = mix(topMixVal, sat(topMixVal), uUseClampedMix());\n    color = mix(uBottomColor().rgb, uMiddleColor().rgb, topMixVal);\n\n    float botMixVal = (UVs.y - uMiddleColor().a) / (uTopColor().a - uMiddleColor().a);\n    botMixVal = mix(botMixVal, sat(botMixVal), uUseClampedMix());\n    vec3 colorB = mix(uMiddleColor().rgb, uTopColor().rgb, botMixVal);\n    color = mix(colorB, color, step(UVs.y, uMiddleColor().a));\n}\n\nvec3 ditheredColor = color + mix(-NOISE_GRANULARITY, NOISE_GRANULARITY, random(UVs));\n\nFragColor = vec4(ditheredColor, 1.);\n\n"),o+="",o};o.toString=o,t.exports=o,o.onHmr=function(){}},75457:function(t,o,i){"use strict";i.r(o),i.d(o,{default:function(){return b}});var r=i(5839),e=i(31236),s=i(18158),n=i(34072),a=i(13579),l=i(38677),h=i(63887),d=i(5434),u=i(34248),c=i(62642),C=i(88271),p=i(68310);const v=[0,.1568627451,.3019607843,.53],T=[.8667,.6392,.5647,.5],m=[0,.1568627451,.3019607843,.47];class b{constructor(t){this.renderer=t,this.sphereVisibility={value:0},this.topGradient={value:0},this.botColorGradient={value:0},this.startTopColor={value:h.vec4.fromValues(v[0],v[1],v[2],v[3])},this.startMidColor={value:h.vec4.fromValues(T[0],T[1],T[2],T[3])},this.startBotColor={value:h.vec4.fromValues(m[0],m[1],m[2],m[3])},this.sphereVisibilityTransition={value:0},this.topGradientTransition={value:0},this.botColorGradientTransition={value:0},this.startTopColorTransition={value:h.vec4.fromValues(v[0],v[1],v[2],v[3])},this.startMidColorTransition={value:h.vec4.fromValues(T[0],T[1],T[2],T[3])},this.startBotColorTransition={value:h.vec4.fromValues(m[0],m[1],m[2],m[3])},this.loadingAnim={value:0},this.useSceneTransitionValues=!1,this.fsData=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),this.background=new l.Z(this.renderer,l.E.LINEAR_3_STOPS),this.background.topColor=this.useSceneTransitionValues?this.startTopColorTransition.value:this.startTopColor.value,this.background.middleColor=this.useSceneTransitionValues?this.startMidColorTransition.value:this.startMidColor.value,this.background.bottomColor=this.useSceneTransitionValues?this.startMidColorTransition.value:this.startBotColor.value,this.background.setTransitionColors(h.vec4.fromValues(...p.bW),h.vec4.fromValues(...p.TO),h.vec4.fromValues(...p.PT))}setBuffer(){this.buffer=new s.Z(this.renderer.gl,this.fsData),this.bufferIndex=new a.Z(this.renderer.gl,this.renderer.gl.UNSIGNED_SHORT,new Uint16Array([0,1,2,0,2,3])),this.buffer.attrib("aPosition",2,this.renderer.gl.FLOAT),this.buffer.attrib("aTexCoord",2,this.renderer.gl.FLOAT)}setFbo(){this.fbo=new n.Z(this.renderer.gl),this.fbo.attachColor();const t=this.fbo.getColorTexture();t.setFilter(!1,!1,!1),t.bind(),t.setFormat(this.renderer.gl.RGBA),t.clamp()}async load(){await Promise.all([this.background.load()]),this.background.sheetSuccess=this.introTransitionSheet,this.background.setUseClampedMix(!0),this.background.onLoaded(),this.loaded=!0}start(){this.prg=(0,e["default"])(this.renderer.gl).get("intro-background"),this.sphereVisibilityTheatre=new d.Z(this.sphereVisibility,this.introSheet,"sphere reveal progress"),this.topGradientTheatre=new d.Z(this.topGradient,this.introSheet,"topGradient"),this.botColorGradientTheatre=new d.Z(this.botColorGradient,this.introSheet,"botColorGradient"),this.startTopColorAnim=new u.Z(this.startTopColor.value,this.introSheet,"startTopColorAnim"),this.startMidColorAnim=new u.Z(this.startMidColor.value,this.introSheet,"startMidColorAnim"),this.startBotColorAnim=new u.Z(this.startBotColor.value,this.introSheet,"startBotColorAnim"),this.sphereVisibilityTheatreTransition=new d.Z(this.sphereVisibilityTransition,this.introTransitionSheet,"sphere reveal progress"),this.topGradientTheatreTransition=new d.Z(this.topGradientTransition,this.introTransitionSheet,"topGradient"),this.botColorGradientTheatreTransition=new d.Z(this.botColorGradientTransition,this.introTransitionSheet,"botColorGradient"),this.startTopColorAnimTransition=new u.Z(this.startTopColorTransition.value,this.introTransitionSheet,"startTopColorAnim"),this.startMidColorAnimTransition=new u.Z(this.startMidColorTransition.value,this.introTransitionSheet,"startMidColorAnim"),this.startBotColorAnimTransition=new u.Z(this.startBotColorTransition.value,this.introTransitionSheet,"startBotColorAnim"),this.setBuffer(),this.setFbo(),this.background.start()}useTransitionSheet(){this.useSceneTransitionValues=!0,this.background.topColor=this.startTopColorTransition.value,this.background.middleColor=this.startMidColorTransition.value,this.background.bottomColor=this.startBotColorTransition.value}goToTlEnd(t){const o=c["default"].timeline({onUpdate:()=>{this.startTopColor.value=h.vec4.fromValues(i.x,i.y,i.z,i.w),this.background.topColor=this.startTopColor.value,this.startMidColor.value=h.vec4.fromValues(r.x,r.y,r.z,r.w),this.background.middleColor=this.startMidColor.value,this.startBotColor.value=h.vec4.fromValues(e.x,e.y,e.z,e.w),this.background.bottomColor=this.startBotColor.value}}),i={x:this.startTopColor.value[0],y:this.startTopColor.value[1],z:this.startTopColor.value[2],w:this.startTopColor.value[3]},r={x:this.startMidColor.value[0],y:this.startMidColor.value[1],z:this.startMidColor.value[2],w:this.startMidColor.value[3]},e={x:this.startBotColor.value[0],y:this.startBotColor.value[1],z:this.startBotColor.value[2],w:this.startBotColor.value[3]};return o.to(i,{x:.1114,y:.4434,z:.575,w:.6667,duration:t},0),o.to(r,{x:.2072,y:.5602,z:.65,w:.4907,duration:t},0),o.to(e,{x:.03,y:.29,z:.529,w:.4,duration:t},0),o.to(this.sphereVisibility,{value:.95,duration:t},0),o.to(this.botColorGradient,{value:.2,duration:t},0),o}stop(){var t,o,i,r,e,s,n,a,l,h,d,u,c;this.background.stop(),this.buffer.dispose(),this.bufferIndex.dispose(),null===(t=this.fbo)||void 0===t||t.dispose(),null===(o=this.sphereVisibilityTheatre)||void 0===o||o.dispose(),null===(i=this.topGradientTheatre)||void 0===i||i.dispose(),null===(r=this.botColorGradientTheatre)||void 0===r||r.dispose(),null===(e=this.startTopColorAnim)||void 0===e||e.dispose(),null===(s=this.startMidColorAnim)||void 0===s||s.dispose(),null===(n=this.startBotColorAnim)||void 0===n||n.dispose(),null===(a=this.sphereVisibilityTheatreTransition)||void 0===a||a.dispose(),null===(l=this.topGradientTheatreTransition)||void 0===l||l.dispose(),null===(h=this.botColorGradientTheatreTransition)||void 0===h||h.dispose(),null===(d=this.startTopColorAnimTransition)||void 0===d||d.dispose(),null===(u=this.startMidColorAnimTransition)||void 0===u||u.dispose(),null===(c=this.startBotColorAnimTransition)||void 0===c||c.dispose()}playIntro(){c["default"].to(this.loadingAnim,{value:1,duration:1,ease:"power1.out"})}preRender(){this.fbo.width===this.renderer.viewport.width&&this.fbo.height===this.renderer.viewport.height||this.fbo.resize(this.renderer.viewport.width,this.renderer.viewport.height)}rttPass(){this.fbo.bind(),this.fbo.defaultViewport(),this.background.render(this.renderer.context.withMask(r.Z.OPAQUE))}render(){if(!this.loaded)return;this.prg.bind();const t=(0,C.Z)(0,this.useSceneTransitionValues?this.botColorGradientTransition.value:this.botColorGradient.value,this.loadingAnim.value);this.prg.uColorTex(this.fbo.getColorTexture()),this.prg.uSphereBgProgress(this.useSceneTransitionValues?this.sphereVisibilityTransition.value:this.sphereVisibility.value),this.prg.uTopGradient(this.useSceneTransitionValues?this.topGradientTheatreTransition.value:this.topGradient.value),this.prg.uBottomGradient(t),this.buffer.attribPointer(this.prg),this.bufferIndex.bind(),this.bufferIndex.drawTriangles()}}},38677:function(t,o,i){"use strict";i.d(o,{E:function(){return v},Z:function(){return m}});var r=i(63887),e=i(5839),s=i(42946),n=i(5434),a=i(61221),l=i(76879),h=i(79763),d=i(49500),u=i(60215),c=i.n(u);const C=(0,l.Z)(c());class p extends h.Z{constructor(t){super(!0,!0),this.addChild(this.topColor=new d.ZP("uTopColor",4,d.Ho.FRAGMENT)),this.addChild(this.middleColor=new d.ZP("uMiddleColor",4,d.Ho.FRAGMENT)),this.addChild(this.bottomColor=new d.ZP("uBottomColor",4,d.Ho.FRAGMENT)),this.addChild(this.type=new d.ZP("uType",1,d.Ho.FRAGMENT)),this.addChild(this.radialStrength=new d.ZP("uRadialStrength",1,d.Ho.FRAGMENT)),this.addChild(this.useClampedMix=new d.ZP("uUseClampedMix",1,d.Ho.FRAGMENT)),this.topColor.attachConstant([1,0,0,1]),this.middleColor.attachConstant([0,1,0,.5]),this.bottomColor.attachConstant([0,0,1,0]),this.type.attachConstant(2),this.radialStrength.attachConstant(1),this.useClampedMix.attachConstant(0),C.onHmr((()=>this.invalidateCode()))}_genCode(t){t.add("pv","\n    IN mediump vec2 aTexCoord0;\n    OUT mediump vec2 vTexCoord0;\n    "),t.add("postv","\n    vTexCoord0 = aTexCoord0;\n    "),t.add("pf",C({slot:"pf"})),t.add("postf",C({slot:"postf"}))}setup(t){t.tex_basecolor||(t.tex_basecolor=()=>{}),t.uMetalnessFactor||(t.uMetalnessFactor=()=>{})}}var v,T=i(14888);(function(t){t[t["RADIAL"]=0]="RADIAL",t[t["LINEAR_2_STOPS"]=1]="LINEAR_2_STOPS",t[t["LINEAR_3_STOPS"]=2]="LINEAR_3_STOPS"})(v||(v={}));class m{constructor(t,o=v.LINEAR_2_STOPS,i=1){this.renderer=t,this.type=o,this.radialStrength=i,this.topColor=r.vec4.create(),this.middleColor=r.vec4.create(),this.bottomColor=r.vec4.create(),this.transitionTopColor=r.vec4.create(),this.transitionMiddleColor=r.vec4.create(),this.transitionBottomColor=r.vec4.create(),this.introTopColor=r.vec4.create(),this.introMiddleColor=r.vec4.create(),this.introBottomColor=r.vec4.create(),this.outroTopColor=r.vec4.create(),this.outroMiddleColor=r.vec4.create(),this.outroBottomColor=r.vec4.create(),this.currentTopColor=r.vec4.create(),this.currentMiddleColor=r.vec4.create(),this.currentBottomColor=r.vec4.create(),this.useClampedMix=!1;const e=new T.Z;e.overridePass("",((t,o)=>{const i=new p(o);this.currentTopColorUniform=i.topColor.attachUniform(),this.currentMiddleColorUniform=i.middleColor.attachUniform(),this.currentBottomColorUniform=i.bottomColor.attachUniform(),this.useClampedMixUniform=i.useClampedMix.attachUniform(),i.type.attachConstant(this.type),i.radialStrength.attachConstant(this.radialStrength);const r=o.getPass("color").pass;return r.inputs.add(i),r})),this.res=new a.ZP("intro/sphere.glb",t.gl,{defaultTextureFilter:t.gl.LINEAR_MIPMAP_LINEAR,extensions:[e]})}async load(){await this.res.load()}onLoaded(){this.gltf=this.res.gltf,this.gltf.root.scale.set([20,20,20]),this.gltf.root.invalidate(),this.gltf.root.updateWorldMatrix()}start(){this.sheetSuccess&&(this.transitionTimeline=new n.Z(m.transition,this.sheetSuccess,"Background Transition")),this.sheetIntro&&(this.sheetIntroObj=this.sheetIntro.object("Background",{transition:0})),this.sheetOutro&&(this.sheetOutroObj=this.sheetOutro.object("Background",{transition:0})),this.sheetDownhill&&(this.transitionDownhill=new n.Z(m.transition,this.sheetDownhill,"Background Transition")),m.transition.value=0,m.transition.startV=m.transition.value}stop(){var t,o,i,r;null===(t=this.sheetIntro)||void 0===t||t.detachObject("Background"),null===(o=this.sheetOutro)||void 0===o||o.detachObject("Background"),null===(i=this.transitionTimeline)||void 0===i||i.dispose(),null===(r=this.transitionDownhill)||void 0===r||r.dispose()}setTransitionColors(t,o,i){r.vec4.copy(this.transitionTopColor,t),r.vec4.copy(this.transitionMiddleColor,o),r.vec4.copy(this.transitionBottomColor,i)}setIntroColors(t,o,i){r.vec4.copy(this.introTopColor,t),r.vec4.copy(this.introMiddleColor,o),r.vec4.copy(this.introBottomColor,i)}setOutroColors(t,o,i){r.vec4.copy(this.outroTopColor,t),r.vec4.copy(this.outroMiddleColor,o),r.vec4.copy(this.outroBottomColor,i)}setUseClampedMix(t){this.useClampedMix=t}render(t){if(t.mask===e.Z.OPAQUE&&t.pass!==s.Z.DEPTH&&t.pass!==s.Z.REFLECT_DEPTH){this.sheetSuccess?(r.vec4.lerp(this.currentTopColor,this.topColor,this.transitionTopColor,m.transition.value),r.vec4.lerp(this.currentMiddleColor,this.middleColor,this.transitionMiddleColor,m.transition.value),r.vec4.lerp(this.currentBottomColor,this.bottomColor,this.transitionBottomColor,m.transition.value)):(r.vec4.copy(this.currentTopColor,this.topColor),r.vec4.copy(this.currentMiddleColor,this.middleColor),r.vec4.copy(this.currentBottomColor,this.bottomColor)),this.sheetDownhill&&this.renderer.scene.isGoingBack&&(r.vec4.lerp(this.currentTopColor,this.topColor,this.transitionTopColor,m.transition.value),r.vec4.lerp(this.currentMiddleColor,this.middleColor,this.transitionMiddleColor,m.transition.value),r.vec4.lerp(this.currentBottomColor,this.bottomColor,this.transitionBottomColor,m.transition.value)),this.sheetOutro&&(r.vec4.lerp(this.currentTopColor,this.currentTopColor,this.outroTopColor,this.sheetOutroObj.value.transition),r.vec4.lerp(this.currentMiddleColor,this.currentMiddleColor,this.outroMiddleColor,this.sheetOutroObj.value.transition),r.vec4.lerp(this.currentBottomColor,this.currentBottomColor,this.outroBottomColor,this.sheetOutroObj.value.transition)),this.sheetIntro&&(r.vec4.lerp(this.currentTopColor,this.currentTopColor,this.introTopColor,this.sheetIntroObj.value.transition),r.vec4.lerp(this.currentMiddleColor,this.currentMiddleColor,this.introMiddleColor,this.sheetIntroObj.value.transition),r.vec4.lerp(this.currentBottomColor,this.currentBottomColor,this.introBottomColor,this.sheetIntroObj.value.transition)),this.currentTopColorUniform.set(...this.currentTopColor),this.currentMiddleColorUniform.set(...this.currentMiddleColor),this.currentBottomColorUniform.set(...this.currentBottomColor),this.useClampedMixUniform.set(this.useClampedMix?1:0);for(const o of this.gltf.renderables)o.render(t.gl,t.camera,t.mask,t.pass,t.glConfig)}}}m.transition={value:1,startV:0}},34248:function(t,o,i){"use strict";i.d(o,{Z:function(){return s}});var r=i(46381),e=i(63887);class s{constructor(t,o,i,s="position",n=["x","y","z","w"]){this.v=t,this.sheet=o,this.name=i,this.vecName=s,this.props=n;const a=o.object(i,{[s]:r.types.compound({[n[0]]:r.types.number(t[0]),[n[1]]:r.types.number(t[1]),[n[2]]:r.types.number(t[2]),[n[3]]:r.types.number(t[3])})});this._unsubscribe=a.onValuesChange((t=>{const o=t[this.vecName];e.vec4.set(this.v,o[this.props[0]],o[this.props[1]],o[this.props[2]],o[this.props[3]])})),this._obj=a}dispose(){this._unsubscribe(),this.sheet.detachObject(this.name)}}}}]);
//# sourceMappingURL=5457.539622d7.js.map