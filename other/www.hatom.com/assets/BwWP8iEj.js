const __vite__fileDeps=["./COlbQkY2.js","./DXus5mw9.js","./BI_QIod3.js","./DKOeehjH.js","./MenuContentElt.27FMubii.css","./TermsPage.BAJ7EJjM.css","./BG5YsrHl.js","./CYmEA8Cv.js","./Vg9EGtk5.js","./HomePage.B4sJzN9e.css","./CNVl2P_Y.js","./D08MloYT.js","./3p6nlAwc.js","./Dmtd47fJ.js","./default.CPsQGBnU.css","./D9kQUH7P.js","./proto.AOeDcAVy.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
var Nu=Object.defineProperty;var Ou=($,m,L)=>m in $?Nu($,m,{enumerable:!0,configurable:!0,writable:!0,value:L}):$[m]=L;var Rn=($,m,L)=>(Ou($,typeof m!="symbol"?m+"":m,L),L);function _mergeNamespaces($,m){for(var L=0;L<m.length;L++){const j=m[L];if(typeof j!="string"&&!Array.isArray(j)){for(const ee in j)if(ee!=="default"&&!(ee in $)){const re=Object.getOwnPropertyDescriptor(j,ee);re&&Object.defineProperty($,ee,re.get?re:{enumerable:!0,get:()=>j[ee]})}}}return Object.freeze(Object.defineProperty($,Symbol.toStringTag,{value:"Module"}))}/**
* @vue/shared v3.4.23
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function makeMap($,m){const L=new Set($.split(","));return m?j=>L.has(j.toLowerCase()):j=>L.has(j)}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,isOn=$=>$.charCodeAt(0)===111&&$.charCodeAt(1)===110&&($.charCodeAt(2)>122||$.charCodeAt(2)<97),isModelListener=$=>$.startsWith("onUpdate:"),extend$2=Object.assign,remove=($,m)=>{const L=$.indexOf(m);L>-1&&$.splice(L,1)},hasOwnProperty$2=Object.prototype.hasOwnProperty,hasOwn=($,m)=>hasOwnProperty$2.call($,m),isArray$4=Array.isArray,isMap$1=$=>toTypeString($)==="[object Map]",isSet$1=$=>toTypeString($)==="[object Set]",isDate$2=$=>toTypeString($)==="[object Date]",isRegExp$1=$=>toTypeString($)==="[object RegExp]",isFunction$3=$=>typeof $=="function",isString$2=$=>typeof $=="string",isSymbol$1=$=>typeof $=="symbol",isObject$4=$=>$!==null&&typeof $=="object",isPromise=$=>(isObject$4($)||isFunction$3($))&&isFunction$3($.then)&&isFunction$3($.catch),objectToString=Object.prototype.toString,toTypeString=$=>objectToString.call($),toRawType=$=>toTypeString($).slice(8,-1),isPlainObject$4=$=>toTypeString($)==="[object Object]",isIntegerKey=$=>isString$2($)&&$!=="NaN"&&$[0]!=="-"&&""+parseInt($,10)===$,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=$=>{const m=Object.create(null);return L=>m[L]||(m[L]=$(L))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction($=>$.replace(camelizeRE,(m,L)=>L?L.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction($=>$.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction($=>$.charAt(0).toUpperCase()+$.slice(1)),toHandlerKey=cacheStringFunction($=>$?`on${capitalize($)}`:""),hasChanged=($,m)=>!Object.is($,m),invokeArrayFns=($,m)=>{for(let L=0;L<$.length;L++)$[L](m)},def=($,m,L)=>{Object.defineProperty($,m,{configurable:!0,enumerable:!1,value:L})},looseToNumber=$=>{const m=parseFloat($);return isNaN(m)?$:m},toNumber$1=$=>{const m=isString$2($)?Number($):NaN;return isNaN(m)?$:m};let _globalThis$2;const getGlobalThis=()=>_globalThis$2||(_globalThis$2=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function normalizeStyle($){if(isArray$4($)){const m={};for(let L=0;L<$.length;L++){const j=$[L],ee=isString$2(j)?parseStringStyle(j):normalizeStyle(j);if(ee)for(const re in ee)m[re]=ee[re]}return m}else if(isString$2($)||isObject$4($))return $}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle($){const m={};return $.replace(styleCommentRE,"").split(listDelimiterRE).forEach(L=>{if(L){const j=L.split(propertyDelimiterRE);j.length>1&&(m[j[0].trim()]=j[1].trim())}}),m}function normalizeClass($){let m="";if(isString$2($))m=$;else if(isArray$4($))for(let L=0;L<$.length;L++){const j=normalizeClass($[L]);j&&(m+=j+" ")}else if(isObject$4($))for(const L in $)$[L]&&(m+=L+" ");return m.trim()}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr($){return!!$||$===""}function looseCompareArrays($,m){if($.length!==m.length)return!1;let L=!0;for(let j=0;L&&j<$.length;j++)L=looseEqual($[j],m[j]);return L}function looseEqual($,m){if($===m)return!0;let L=isDate$2($),j=isDate$2(m);if(L||j)return L&&j?$.getTime()===m.getTime():!1;if(L=isSymbol$1($),j=isSymbol$1(m),L||j)return $===m;if(L=isArray$4($),j=isArray$4(m),L||j)return L&&j?looseCompareArrays($,m):!1;if(L=isObject$4($),j=isObject$4(m),L||j){if(!L||!j)return!1;const ee=Object.keys($).length,re=Object.keys(m).length;if(ee!==re)return!1;for(const le in $){const ve=$.hasOwnProperty(le),ye=m.hasOwnProperty(le);if(ve&&!ye||!ve&&ye||!looseEqual($[le],m[le]))return!1}}return String($)===String(m)}function looseIndexOf($,m){return $.findIndex(L=>looseEqual(L,m))}const toDisplayString=$=>isString$2($)?$:$==null?"":isArray$4($)||isObject$4($)&&($.toString===objectToString||!isFunction$3($.toString))?JSON.stringify($,replacer,2):String($),replacer=($,m)=>m&&m.__v_isRef?replacer($,m.value):isMap$1(m)?{[`Map(${m.size})`]:[...m.entries()].reduce((L,[j,ee],re)=>(L[stringifySymbol(j,re)+" =>"]=ee,L),{})}:isSet$1(m)?{[`Set(${m.size})`]:[...m.values()].map(L=>stringifySymbol(L))}:isSymbol$1(m)?stringifySymbol(m):isObject$4(m)&&!isArray$4(m)&&!isPlainObject$4(m)?String(m):m,stringifySymbol=($,m="")=>{var L;return isSymbol$1($)?`Symbol(${(L=$.description)!=null?L:m})`:$};/**
* @vue/reactivity v3.4.23
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let activeEffectScope;class EffectScope{constructor(m=!1){this.detached=m,this._active=!0,this.effects=[],this.cleanups=[],this.parent=activeEffectScope,!m&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}run(m){if(this._active){const L=activeEffectScope;try{return activeEffectScope=this,m()}finally{activeEffectScope=L}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(m){if(this._active){let L,j;for(L=0,j=this.effects.length;L<j;L++)this.effects[L].stop();for(L=0,j=this.cleanups.length;L<j;L++)this.cleanups[L]();if(this.scopes)for(L=0,j=this.scopes.length;L<j;L++)this.scopes[L].stop(!0);if(!this.detached&&this.parent&&!m){const ee=this.parent.scopes.pop();ee&&ee!==this&&(this.parent.scopes[this.index]=ee,ee.index=this.index)}this.parent=void 0,this._active=!1}}}function effectScope($){return new EffectScope($)}function recordEffectScope($,m=activeEffectScope){m&&m.active&&m.effects.push($)}function getCurrentScope(){return activeEffectScope}function onScopeDispose($){activeEffectScope&&activeEffectScope.cleanups.push($)}let activeEffect;class ReactiveEffect{constructor(m,L,j,ee){this.fn=m,this.trigger=L,this.scheduler=j,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,recordEffectScope(this,ee)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,pauseTracking();for(let m=0;m<this._depsLength;m++){const L=this.deps[m];if(L.computed&&(triggerComputed(L.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),resetTracking()}return this._dirtyLevel>=4}set dirty(m){this._dirtyLevel=m?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let m=shouldTrack,L=activeEffect;try{return shouldTrack=!0,activeEffect=this,this._runnings++,preCleanupEffect(this),this.fn()}finally{postCleanupEffect(this),this._runnings--,activeEffect=L,shouldTrack=m}}stop(){var m;this.active&&(preCleanupEffect(this),postCleanupEffect(this),(m=this.onStop)==null||m.call(this),this.active=!1)}}function triggerComputed($){return $.value}function preCleanupEffect($){$._trackId++,$._depsLength=0}function postCleanupEffect($){if($.deps.length>$._depsLength){for(let m=$._depsLength;m<$.deps.length;m++)cleanupDepEffect($.deps[m],$);$.deps.length=$._depsLength}}function cleanupDepEffect($,m){const L=$.get(m);L!==void 0&&m._trackId!==L&&($.delete(m),$.size===0&&$.cleanup())}let shouldTrack=!0,pauseScheduleStack=0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const $=trackStack.pop();shouldTrack=$===void 0?!0:$}function pauseScheduling(){pauseScheduleStack++}function resetScheduling(){for(pauseScheduleStack--;!pauseScheduleStack&&queueEffectSchedulers.length;)queueEffectSchedulers.shift()()}function trackEffect($,m,L){if(m.get($)!==$._trackId){m.set($,$._trackId);const j=$.deps[$._depsLength];j!==m?(j&&cleanupDepEffect(j,$),$.deps[$._depsLength++]=m):$._depsLength++}}const queueEffectSchedulers=[];function triggerEffects($,m,L){pauseScheduling();for(const j of $.keys()){let ee;j._dirtyLevel<m&&(ee??(ee=$.get(j)===j._trackId))&&(j._shouldSchedule||(j._shouldSchedule=j._dirtyLevel===0),j._dirtyLevel=m),j._shouldSchedule&&(ee??(ee=$.get(j)===j._trackId))&&(j.trigger(),(!j._runnings||j.allowRecurse)&&j._dirtyLevel!==2&&(j._shouldSchedule=!1,j.scheduler&&queueEffectSchedulers.push(j.scheduler)))}resetScheduling()}const createDep=($,m)=>{const L=new Map;return L.cleanup=$,L.computed=m,L},targetMap=new WeakMap,ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");function track($,m,L){if(shouldTrack&&activeEffect){let j=targetMap.get($);j||targetMap.set($,j=new Map);let ee=j.get(L);ee||j.set(L,ee=createDep(()=>j.delete(L))),trackEffect(activeEffect,ee)}}function trigger($,m,L,j,ee,re){const le=targetMap.get($);if(!le)return;let ve=[];if(m==="clear")ve=[...le.values()];else if(L==="length"&&isArray$4($)){const ye=Number(j);le.forEach((Ee,Me)=>{(Me==="length"||!isSymbol$1(Me)&&Me>=ye)&&ve.push(Ee)})}else switch(L!==void 0&&ve.push(le.get(L)),m){case"add":isArray$4($)?isIntegerKey(L)&&ve.push(le.get("length")):(ve.push(le.get(ITERATE_KEY)),isMap$1($)&&ve.push(le.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray$4($)||(ve.push(le.get(ITERATE_KEY)),isMap$1($)&&ve.push(le.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap$1($)&&ve.push(le.get(ITERATE_KEY));break}pauseScheduling();for(const ye of ve)ye&&triggerEffects(ye,4);resetScheduling()}function getDepFromReactive($,m){var L;return(L=targetMap.get($))==null?void 0:L.get(m)}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter($=>$!=="arguments"&&$!=="caller").map($=>Symbol[$]).filter(isSymbol$1)),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const $={};return["includes","indexOf","lastIndexOf"].forEach(m=>{$[m]=function(...L){const j=toRaw(this);for(let re=0,le=this.length;re<le;re++)track(j,"get",re+"");const ee=j[m](...L);return ee===-1||ee===!1?j[m](...L.map(toRaw)):ee}}),["push","pop","shift","unshift","splice"].forEach(m=>{$[m]=function(...L){pauseTracking(),pauseScheduling();const j=toRaw(this)[m].apply(this,L);return resetScheduling(),resetTracking(),j}}),$}function hasOwnProperty$1($){isSymbol$1($)||($=String($));const m=toRaw(this);return track(m,"has",$),m.hasOwnProperty($)}class BaseReactiveHandler{constructor(m=!1,L=!1){this._isReadonly=m,this._isShallow=L}get(m,L,j){const ee=this._isReadonly,re=this._isShallow;if(L==="__v_isReactive")return!ee;if(L==="__v_isReadonly")return ee;if(L==="__v_isShallow")return re;if(L==="__v_raw")return j===(ee?re?shallowReadonlyMap:readonlyMap:re?shallowReactiveMap:reactiveMap).get(m)||Object.getPrototypeOf(m)===Object.getPrototypeOf(j)?m:void 0;const le=isArray$4(m);if(!ee){if(le&&hasOwn(arrayInstrumentations,L))return Reflect.get(arrayInstrumentations,L,j);if(L==="hasOwnProperty")return hasOwnProperty$1}const ve=Reflect.get(m,L,j);return(isSymbol$1(L)?builtInSymbols.has(L):isNonTrackableKeys(L))||(ee||track(m,"get",L),re)?ve:isRef(ve)?le&&isIntegerKey(L)?ve:ve.value:isObject$4(ve)?ee?readonly(ve):reactive(ve):ve}}class MutableReactiveHandler extends BaseReactiveHandler{constructor(m=!1){super(!1,m)}set(m,L,j,ee){let re=m[L];if(!this._isShallow){const ye=isReadonly(re);if(!isShallow(j)&&!isReadonly(j)&&(re=toRaw(re),j=toRaw(j)),!isArray$4(m)&&isRef(re)&&!isRef(j))return ye?!1:(re.value=j,!0)}const le=isArray$4(m)&&isIntegerKey(L)?Number(L)<m.length:hasOwn(m,L),ve=Reflect.set(m,L,j,ee);return m===toRaw(ee)&&(le?hasChanged(j,re)&&trigger(m,"set",L,j):trigger(m,"add",L,j)),ve}deleteProperty(m,L){const j=hasOwn(m,L);m[L];const ee=Reflect.deleteProperty(m,L);return ee&&j&&trigger(m,"delete",L,void 0),ee}has(m,L){const j=Reflect.has(m,L);return(!isSymbol$1(L)||!builtInSymbols.has(L))&&track(m,"has",L),j}ownKeys(m){return track(m,"iterate",isArray$4(m)?"length":ITERATE_KEY),Reflect.ownKeys(m)}}class ReadonlyReactiveHandler extends BaseReactiveHandler{constructor(m=!1){super(!0,m)}set(m,L){return!0}deleteProperty(m,L){return!0}}const mutableHandlers=new MutableReactiveHandler,readonlyHandlers=new ReadonlyReactiveHandler,shallowReactiveHandlers=new MutableReactiveHandler(!0),toShallow=$=>$,getProto=$=>Reflect.getPrototypeOf($);function get$1($,m,L=!1,j=!1){$=$.__v_raw;const ee=toRaw($),re=toRaw(m);L||(hasChanged(m,re)&&track(ee,"get",m),track(ee,"get",re));const{has:le}=getProto(ee),ve=j?toShallow:L?toReadonly:toReactive;if(le.call(ee,m))return ve($.get(m));if(le.call(ee,re))return ve($.get(re));$!==ee&&$.get(m)}function has$2($,m=!1){const L=this.__v_raw,j=toRaw(L),ee=toRaw($);return m||(hasChanged($,ee)&&track(j,"has",$),track(j,"has",ee)),$===ee?L.has($):L.has($)||L.has(ee)}function size$1($,m=!1){return $=$.__v_raw,!m&&track(toRaw($),"iterate",ITERATE_KEY),Reflect.get($,"size",$)}function add($){$=toRaw($);const m=toRaw(this);return getProto(m).has.call(m,$)||(m.add($),trigger(m,"add",$,$)),this}function set$1($,m){m=toRaw(m);const L=toRaw(this),{has:j,get:ee}=getProto(L);let re=j.call(L,$);re||($=toRaw($),re=j.call(L,$));const le=ee.call(L,$);return L.set($,m),re?hasChanged(m,le)&&trigger(L,"set",$,m):trigger(L,"add",$,m),this}function deleteEntry($){const m=toRaw(this),{has:L,get:j}=getProto(m);let ee=L.call(m,$);ee||($=toRaw($),ee=L.call(m,$)),j&&j.call(m,$);const re=m.delete($);return ee&&trigger(m,"delete",$,void 0),re}function clear(){const $=toRaw(this),m=$.size!==0,L=$.clear();return m&&trigger($,"clear",void 0,void 0),L}function createForEach($,m){return function(j,ee){const re=this,le=re.__v_raw,ve=toRaw(le),ye=m?toShallow:$?toReadonly:toReactive;return!$&&track(ve,"iterate",ITERATE_KEY),le.forEach((Ee,Me)=>j.call(ee,ye(Ee),ye(Me),re))}}function createIterableMethod($,m,L){return function(...j){const ee=this.__v_raw,re=toRaw(ee),le=isMap$1(re),ve=$==="entries"||$===Symbol.iterator&&le,ye=$==="keys"&&le,Ee=ee[$](...j),Me=L?toShallow:m?toReadonly:toReactive;return!m&&track(re,"iterate",ye?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:Ce,done:De}=Ee.next();return De?{value:Ce,done:De}:{value:ve?[Me(Ce[0]),Me(Ce[1])]:Me(Ce),done:De}},[Symbol.iterator](){return this}}}}function createReadonlyMethod($){return function(...m){return $==="delete"?!1:$==="clear"?void 0:this}}function createInstrumentations(){const $={get(re){return get$1(this,re)},get size(){return size$1(this)},has:has$2,add,set:set$1,delete:deleteEntry,clear,forEach:createForEach(!1,!1)},m={get(re){return get$1(this,re,!1,!0)},get size(){return size$1(this)},has:has$2,add,set:set$1,delete:deleteEntry,clear,forEach:createForEach(!1,!0)},L={get(re){return get$1(this,re,!0)},get size(){return size$1(this,!0)},has(re){return has$2.call(this,re,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},j={get(re){return get$1(this,re,!0,!0)},get size(){return size$1(this,!0)},has(re){return has$2.call(this,re,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(re=>{$[re]=createIterableMethod(re,!1,!1),L[re]=createIterableMethod(re,!0,!1),m[re]=createIterableMethod(re,!1,!0),j[re]=createIterableMethod(re,!0,!0)}),[$,L,m,j]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter($,m){const L=m?$?shallowReadonlyInstrumentations:shallowInstrumentations:$?readonlyInstrumentations:mutableInstrumentations;return(j,ee,re)=>ee==="__v_isReactive"?!$:ee==="__v_isReadonly"?$:ee==="__v_raw"?j:Reflect.get(hasOwn(L,ee)&&ee in j?L:j,ee,re)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap($){switch($){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType($){return $.__v_skip||!Object.isExtensible($)?0:targetTypeMap(toRawType($))}function reactive($){return isReadonly($)?$:createReactiveObject($,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive($){return createReactiveObject($,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly($){return createReactiveObject($,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject($,m,L,j,ee){if(!isObject$4($)||$.__v_raw&&!(m&&$.__v_isReactive))return $;const re=ee.get($);if(re)return re;const le=getTargetType($);if(le===0)return $;const ve=new Proxy($,le===2?j:L);return ee.set($,ve),ve}function isReactive($){return isReadonly($)?isReactive($.__v_raw):!!($&&$.__v_isReactive)}function isReadonly($){return!!($&&$.__v_isReadonly)}function isShallow($){return!!($&&$.__v_isShallow)}function isProxy($){return $?!!$.__v_raw:!1}function toRaw($){const m=$&&$.__v_raw;return m?toRaw(m):$}function markRaw($){return Object.isExtensible($)&&def($,"__v_skip",!0),$}const toReactive=$=>isObject$4($)?reactive($):$,toReadonly=$=>isObject$4($)?readonly($):$;class ComputedRefImpl{constructor(m,L,j,ee){this.getter=m,this._setter=L,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new ReactiveEffect(()=>m(this._value),()=>triggerRefValue(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!ee,this.__v_isReadonly=j}get value(){const m=toRaw(this);return(!m._cacheable||m.effect.dirty)&&hasChanged(m._value,m._value=m.effect.run())&&triggerRefValue(m,4),trackRefValue(m),m.effect._dirtyLevel>=2&&triggerRefValue(m,2),m._value}set value(m){this._setter(m)}get _dirty(){return this.effect.dirty}set _dirty(m){this.effect.dirty=m}}function computed$1($,m,L=!1){let j,ee;const re=isFunction$3($);return re?(j=$,ee=NOOP):(j=$.get,ee=$.set),new ComputedRefImpl(j,ee,re||!ee,L)}function trackRefValue($){var m;shouldTrack&&activeEffect&&($=toRaw($),trackEffect(activeEffect,(m=$.dep)!=null?m:$.dep=createDep(()=>$.dep=void 0,$ instanceof ComputedRefImpl?$:void 0)))}function triggerRefValue($,m=4,L){$=toRaw($);const j=$.dep;j&&triggerEffects(j,m)}function isRef($){return!!($&&$.__v_isRef===!0)}function ref($){return createRef($,!1)}function shallowRef($){return createRef($,!0)}function createRef($,m){return isRef($)?$:new RefImpl($,m)}class RefImpl{constructor(m,L){this.__v_isShallow=L,this.dep=void 0,this.__v_isRef=!0,this._rawValue=L?m:toRaw(m),this._value=L?m:toReactive(m)}get value(){return trackRefValue(this),this._value}set value(m){const L=this.__v_isShallow||isShallow(m)||isReadonly(m);m=L?m:toRaw(m),hasChanged(m,this._rawValue)&&(this._rawValue=m,this._value=L?m:toReactive(m),triggerRefValue(this,4))}}function unref($){return isRef($)?$.value:$}const shallowUnwrapHandlers={get:($,m,L)=>unref(Reflect.get($,m,L)),set:($,m,L,j)=>{const ee=$[m];return isRef(ee)&&!isRef(L)?(ee.value=L,!0):Reflect.set($,m,L,j)}};function proxyRefs($){return isReactive($)?$:new Proxy($,shallowUnwrapHandlers)}class CustomRefImpl{constructor(m){this.dep=void 0,this.__v_isRef=!0;const{get:L,set:j}=m(()=>trackRefValue(this),()=>triggerRefValue(this));this._get=L,this._set=j}get value(){return this._get()}set value(m){this._set(m)}}function customRef($){return new CustomRefImpl($)}function toRefs($){const m=isArray$4($)?new Array($.length):{};for(const L in $)m[L]=propertyToRef($,L);return m}class ObjectRefImpl{constructor(m,L,j){this._object=m,this._key=L,this._defaultValue=j,this.__v_isRef=!0}get value(){const m=this._object[this._key];return m===void 0?this._defaultValue:m}set value(m){this._object[this._key]=m}get dep(){return getDepFromReactive(toRaw(this._object),this._key)}}class GetterRefImpl{constructor(m){this._getter=m,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function toRef($,m,L){return isRef($)?$:isFunction$3($)?new GetterRefImpl($):isObject$4($)&&arguments.length>1?propertyToRef($,m,L):ref($)}function propertyToRef($,m,L){const j=$[m];return isRef(j)?j:new ObjectRefImpl($,m,L)}/**
* @vue/runtime-core v3.4.23
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const stack=[];function warn$1($,...m){pauseTracking();const L=stack.length?stack[stack.length-1].component:null,j=L&&L.appContext.config.warnHandler,ee=getComponentTrace();if(j)callWithErrorHandling(j,L,11,[$+m.map(re=>{var le,ve;return(ve=(le=re.toString)==null?void 0:le.call(re))!=null?ve:JSON.stringify(re)}).join(""),L&&L.proxy,ee.map(({vnode:re})=>`at <${formatComponentName(L,re.type)}>`).join(`
`),ee]);else{const re=[`[Vue warn]: ${$}`,...m];ee.length&&re.push(`
`,...formatTrace(ee)),console.warn(...re)}resetTracking()}function getComponentTrace(){let $=stack[stack.length-1];if(!$)return[];const m=[];for(;$;){const L=m[0];L&&L.vnode===$?L.recurseCount++:m.push({vnode:$,recurseCount:0});const j=$.component&&$.component.parent;$=j&&j.vnode}return m}function formatTrace($){const m=[];return $.forEach((L,j)=>{m.push(...j===0?[]:[`
`],...formatTraceEntry(L))}),m}function formatTraceEntry({vnode:$,recurseCount:m}){const L=m>0?`... (${m} recursive calls)`:"",j=$.component?$.component.parent==null:!1,ee=` at <${formatComponentName($.component,$.type,j)}`,re=">"+L;return $.props?[ee,...formatProps($.props),re]:[ee+re]}function formatProps($){const m=[],L=Object.keys($);return L.slice(0,3).forEach(j=>{m.push(...formatProp(j,$[j]))}),L.length>3&&m.push(" ..."),m}function formatProp($,m,L){return isString$2(m)?(m=JSON.stringify(m),L?m:[`${$}=${m}`]):typeof m=="number"||typeof m=="boolean"||m==null?L?m:[`${$}=${m}`]:isRef(m)?(m=formatProp($,toRaw(m.value),!0),L?m:[`${$}=Ref<`,m,">"]):isFunction$3(m)?[`${$}=fn${m.name?`<${m.name}>`:""}`]:(m=toRaw(m),L?m:[`${$}=`,m])}function callWithErrorHandling($,m,L,j){try{return j?$(...j):$()}catch(ee){handleError(ee,m,L)}}function callWithAsyncErrorHandling($,m,L,j){if(isFunction$3($)){const ee=callWithErrorHandling($,m,L,j);return ee&&isPromise(ee)&&ee.catch(re=>{handleError(re,m,L)}),ee}if(isArray$4($)){const ee=[];for(let re=0;re<$.length;re++)ee.push(callWithAsyncErrorHandling($[re],m,L,j));return ee}}function handleError($,m,L,j=!0){const ee=m?m.vnode:null;if(m){let re=m.parent;const le=m.proxy,ve=`https://vuejs.org/error-reference/#runtime-${L}`;for(;re;){const Ee=re.ec;if(Ee){for(let Me=0;Me<Ee.length;Me++)if(Ee[Me]($,le,ve)===!1)return}re=re.parent}const ye=m.appContext.config.errorHandler;if(ye){pauseTracking(),callWithErrorHandling(ye,null,10,[$,le,ve]),resetTracking();return}}logError($,L,ee,j)}function logError($,m,L,j=!0){console.error($)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick($){const m=currentFlushPromise||resolvedPromise;return $?m.then(this?$.bind(this):$):m}function findInsertionIndex($){let m=flushIndex+1,L=queue.length;for(;m<L;){const j=m+L>>>1,ee=queue[j],re=getId(ee);re<$||re===$&&ee.pre?m=j+1:L=j}return m}function queueJob($){(!queue.length||!queue.includes($,isFlushing&&$.allowRecurse?flushIndex+1:flushIndex))&&($.id==null?queue.push($):queue.splice(findInsertionIndex($.id),0,$),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob($){const m=queue.indexOf($);m>flushIndex&&queue.splice(m,1)}function queuePostFlushCb($){isArray$4($)?pendingPostFlushCbs.push(...$):(!activePostFlushCbs||!activePostFlushCbs.includes($,$.allowRecurse?postFlushIndex+1:postFlushIndex))&&pendingPostFlushCbs.push($),queueFlush()}function flushPreFlushCbs($,m,L=isFlushing?flushIndex+1:0){for(;L<queue.length;L++){const j=queue[L];if(j&&j.pre){if($&&j.id!==$.uid)continue;queue.splice(L,1),L--,j()}}}function flushPostFlushCbs($){if(pendingPostFlushCbs.length){const m=[...new Set(pendingPostFlushCbs)].sort((L,j)=>getId(L)-getId(j));if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...m);return}for(activePostFlushCbs=m,postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=$=>$.id==null?1/0:$.id,comparator=($,m)=>{const L=getId($)-getId(m);if(L===0){if($.pre&&!m.pre)return-1;if(m.pre&&!$.pre)return 1}return L};function flushJobs($){isFlushPending=!1,isFlushing=!0,queue.sort(comparator);try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const m=queue[flushIndex];m&&m.active!==!1&&callWithErrorHandling(m,null,14)}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}function emit($,m,...L){if($.isUnmounted)return;const j=$.vnode.props||EMPTY_OBJ;let ee=L;const re=m.startsWith("update:"),le=re&&m.slice(7);if(le&&le in j){const Me=`${le==="modelValue"?"model":le}Modifiers`,{number:Ce,trim:De}=j[Me]||EMPTY_OBJ;De&&(ee=L.map(Be=>isString$2(Be)?Be.trim():Be)),Ce&&(ee=L.map(looseToNumber))}let ve,ye=j[ve=toHandlerKey(m)]||j[ve=toHandlerKey(camelize(m))];!ye&&re&&(ye=j[ve=toHandlerKey(hyphenate(m))]),ye&&callWithAsyncErrorHandling(ye,$,6,ee);const Ee=j[ve+"Once"];if(Ee){if(!$.emitted)$.emitted={};else if($.emitted[ve])return;$.emitted[ve]=!0,callWithAsyncErrorHandling(Ee,$,6,ee)}}function normalizeEmitsOptions($,m,L=!1){const j=m.emitsCache,ee=j.get($);if(ee!==void 0)return ee;const re=$.emits;let le={},ve=!1;if(!isFunction$3($)){const ye=Ee=>{const Me=normalizeEmitsOptions(Ee,m,!0);Me&&(ve=!0,extend$2(le,Me))};!L&&m.mixins.length&&m.mixins.forEach(ye),$.extends&&ye($.extends),$.mixins&&$.mixins.forEach(ye)}return!re&&!ve?(isObject$4($)&&j.set($,null),null):(isArray$4(re)?re.forEach(ye=>le[ye]=null):extend$2(le,re),isObject$4($)&&j.set($,le),le)}function isEmitListener($,m){return!$||!isOn(m)?!1:(m=m.slice(2).replace(/Once$/,""),hasOwn($,m[0].toLowerCase()+m.slice(1))||hasOwn($,hyphenate(m))||hasOwn($,m))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance($){const m=currentRenderingInstance;return currentRenderingInstance=$,currentScopeId=$&&$.type.__scopeId||null,m}function pushScopeId($){currentScopeId=$}function popScopeId(){currentScopeId=null}function withCtx($,m=currentRenderingInstance,L){if(!m||$._n)return $;const j=(...ee)=>{j._d&&setBlockTracking(-1);const re=setCurrentRenderingInstance(m);let le;try{le=$(...ee)}finally{setCurrentRenderingInstance(re),j._d&&setBlockTracking(1)}return le};return j._n=!0,j._c=!0,j._d=!0,j}function markAttrsAccessed(){}function renderComponentRoot($){const{type:m,vnode:L,proxy:j,withProxy:ee,props:re,propsOptions:[le],slots:ve,attrs:ye,emit:Ee,render:Me,renderCache:Ce,data:De,setupState:Be,ctx:ke,inheritAttrs:Fe}=$;let Oe,Ne;const ze=setCurrentRenderingInstance($);try{if(L.shapeFlag&4){const He=ee||j,We=He;Oe=normalizeVNode(Me.call(We,He,Ce,re,Be,De,ke)),Ne=ye}else{const He=m;Oe=normalizeVNode(He.length>1?He(re,{attrs:ye,slots:ve,emit:Ee}):He(re,null)),Ne=m.props?ye:getFunctionalFallthrough(ye)}}catch(He){blockStack.length=0,handleError(He,$,1),Oe=createVNode(Comment)}let $e=Oe;if(Ne&&Fe!==!1){const He=Object.keys(Ne),{shapeFlag:We}=$e;He.length&&We&7&&(le&&He.some(isModelListener)&&(Ne=filterModelListeners(Ne,le)),$e=cloneVNode($e,Ne))}return L.dirs&&($e=cloneVNode($e),$e.dirs=$e.dirs?$e.dirs.concat(L.dirs):L.dirs),L.transition&&($e.transition=L.transition),Oe=$e,setCurrentRenderingInstance(ze),Oe}function filterSingleRoot($,m=!0){let L;for(let j=0;j<$.length;j++){const ee=$[j];if(isVNode(ee)){if(ee.type!==Comment||ee.children==="v-if"){if(L)return;L=ee}}else return}return L}const getFunctionalFallthrough=$=>{let m;for(const L in $)(L==="class"||L==="style"||isOn(L))&&((m||(m={}))[L]=$[L]);return m},filterModelListeners=($,m)=>{const L={};for(const j in $)(!isModelListener(j)||!(j.slice(9)in m))&&(L[j]=$[j]);return L};function shouldUpdateComponent($,m,L){const{props:j,children:ee,component:re}=$,{props:le,children:ve,patchFlag:ye}=m,Ee=re.emitsOptions;if(m.dirs||m.transition)return!0;if(L&&ye>=0){if(ye&1024)return!0;if(ye&16)return j?hasPropsChanged(j,le,Ee):!!le;if(ye&8){const Me=m.dynamicProps;for(let Ce=0;Ce<Me.length;Ce++){const De=Me[Ce];if(le[De]!==j[De]&&!isEmitListener(Ee,De))return!0}}}else return(ee||ve)&&(!ve||!ve.$stable)?!0:j===le?!1:j?le?hasPropsChanged(j,le,Ee):!0:!!le;return!1}function hasPropsChanged($,m,L){const j=Object.keys(m);if(j.length!==Object.keys($).length)return!0;for(let ee=0;ee<j.length;ee++){const re=j[ee];if(m[re]!==$[re]&&!isEmitListener(L,re))return!0}return!1}function updateHOCHostEl({vnode:$,parent:m},L){for(;m;){const j=m.subTree;if(j.suspense&&j.suspense.activeBranch===$&&(j.el=$.el),j===$)($=m.vnode).el=L,m=m.parent;else break}}const COMPONENTS="components";function resolveComponent($,m){return resolveAsset(COMPONENTS,$,!0,m)||$}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function resolveDynamicComponent($){return isString$2($)?resolveAsset(COMPONENTS,$,!1)||$:$||NULL_DYNAMIC_COMPONENT}function resolveAsset($,m,L=!0,j=!1){const ee=currentRenderingInstance||currentInstance;if(ee){const re=ee.type;if($===COMPONENTS){const ve=getComponentName(re,!1);if(ve&&(ve===m||ve===camelize(m)||ve===capitalize(camelize(m))))return re}const le=resolve(ee[$]||re[$],m)||resolve(ee.appContext[$],m);return!le&&j?re:le}}function resolve($,m){return $&&($[m]||$[camelize(m)]||$[capitalize(camelize(m))])}const isSuspense=$=>$.__isSuspense;let suspenseId=0;const SuspenseImpl={name:"Suspense",__isSuspense:!0,process($,m,L,j,ee,re,le,ve,ye,Ee){if($==null)mountSuspense(m,L,j,ee,re,le,ve,ye,Ee);else{if(re&&re.deps>0&&!$.suspense.isInFallback){m.suspense=$.suspense,m.suspense.vnode=m,m.el=$.el;return}patchSuspense($,m,L,j,ee,le,ve,ye,Ee)}},hydrate:hydrateSuspense,create:createSuspenseBoundary,normalize:normalizeSuspenseChildren},Suspense=SuspenseImpl;function triggerEvent($,m){const L=$.props&&$.props[m];isFunction$3(L)&&L()}function mountSuspense($,m,L,j,ee,re,le,ve,ye){const{p:Ee,o:{createElement:Me}}=ye,Ce=Me("div"),De=$.suspense=createSuspenseBoundary($,ee,j,m,Ce,L,re,le,ve,ye);Ee(null,De.pendingBranch=$.ssContent,Ce,null,j,De,re,le),De.deps>0?(triggerEvent($,"onPending"),triggerEvent($,"onFallback"),Ee(null,$.ssFallback,m,L,j,null,re,le),setActiveBranch(De,$.ssFallback)):De.resolve(!1,!0)}function patchSuspense($,m,L,j,ee,re,le,ve,{p:ye,um:Ee,o:{createElement:Me}}){const Ce=m.suspense=$.suspense;Ce.vnode=m,m.el=$.el;const De=m.ssContent,Be=m.ssFallback,{activeBranch:ke,pendingBranch:Fe,isInFallback:Oe,isHydrating:Ne}=Ce;if(Fe)Ce.pendingBranch=De,isSameVNodeType(De,Fe)?(ye(Fe,De,Ce.hiddenContainer,null,ee,Ce,re,le,ve),Ce.deps<=0?Ce.resolve():Oe&&(Ne||(ye(ke,Be,L,j,ee,null,re,le,ve),setActiveBranch(Ce,Be)))):(Ce.pendingId=suspenseId++,Ne?(Ce.isHydrating=!1,Ce.activeBranch=Fe):Ee(Fe,ee,Ce),Ce.deps=0,Ce.effects.length=0,Ce.hiddenContainer=Me("div"),Oe?(ye(null,De,Ce.hiddenContainer,null,ee,Ce,re,le,ve),Ce.deps<=0?Ce.resolve():(ye(ke,Be,L,j,ee,null,re,le,ve),setActiveBranch(Ce,Be))):ke&&isSameVNodeType(De,ke)?(ye(ke,De,L,j,ee,Ce,re,le,ve),Ce.resolve(!0)):(ye(null,De,Ce.hiddenContainer,null,ee,Ce,re,le,ve),Ce.deps<=0&&Ce.resolve()));else if(ke&&isSameVNodeType(De,ke))ye(ke,De,L,j,ee,Ce,re,le,ve),setActiveBranch(Ce,De);else if(triggerEvent(m,"onPending"),Ce.pendingBranch=De,De.shapeFlag&512?Ce.pendingId=De.component.suspenseId:Ce.pendingId=suspenseId++,ye(null,De,Ce.hiddenContainer,null,ee,Ce,re,le,ve),Ce.deps<=0)Ce.resolve();else{const{timeout:ze,pendingId:$e}=Ce;ze>0?setTimeout(()=>{Ce.pendingId===$e&&Ce.fallback(Be)},ze):ze===0&&Ce.fallback(Be)}}function createSuspenseBoundary($,m,L,j,ee,re,le,ve,ye,Ee,Me=!1){const{p:Ce,m:De,um:Be,n:ke,o:{parentNode:Fe,remove:Oe}}=Ee;let Ne;const ze=isVNodeSuspensible($);ze&&m!=null&&m.pendingBranch&&(Ne=m.pendingId,m.deps++);const $e=$.props?toNumber$1($.props.timeout):void 0,He=re,We={vnode:$,parent:m,parentComponent:L,namespace:le,container:j,hiddenContainer:ee,deps:0,pendingId:suspenseId++,timeout:typeof $e=="number"?$e:-1,activeBranch:null,pendingBranch:null,isInFallback:!Me,isHydrating:Me,isUnmounted:!1,effects:[],resolve(qe=!1,Ye=!1){const{vnode:Ze,activeBranch:Ke,pendingBranch:rt,pendingId:ft,effects:mt,parentComponent:Et,container:bt}=We;let Ct=!1;We.isHydrating?We.isHydrating=!1:qe||(Ct=Ke&&rt.transition&&rt.transition.mode==="out-in",Ct&&(Ke.transition.afterLeave=()=>{ft===We.pendingId&&(De(rt,bt,re===He?ke(Ke):re,0),queuePostFlushCb(mt))}),Ke&&(Fe(Ke.el)!==We.hiddenContainer&&(re=ke(Ke)),Be(Ke,Et,We,!0)),Ct||De(rt,bt,re,0)),setActiveBranch(We,rt),We.pendingBranch=null,We.isInFallback=!1;let st=We.parent,at=!1;for(;st;){if(st.pendingBranch){st.effects.push(...mt),at=!0;break}st=st.parent}!at&&!Ct&&queuePostFlushCb(mt),We.effects=[],ze&&m&&m.pendingBranch&&Ne===m.pendingId&&(m.deps--,m.deps===0&&!Ye&&m.resolve()),triggerEvent(Ze,"onResolve")},fallback(qe){if(!We.pendingBranch)return;const{vnode:Ye,activeBranch:Ze,parentComponent:Ke,container:rt,namespace:ft}=We;triggerEvent(Ye,"onFallback");const mt=ke(Ze),Et=()=>{We.isInFallback&&(Ce(null,qe,rt,mt,Ke,null,ft,ve,ye),setActiveBranch(We,qe))},bt=qe.transition&&qe.transition.mode==="out-in";bt&&(Ze.transition.afterLeave=Et),We.isInFallback=!0,Be(Ze,Ke,null,!0),bt||Et()},move(qe,Ye,Ze){We.activeBranch&&De(We.activeBranch,qe,Ye,Ze),We.container=qe},next(){return We.activeBranch&&ke(We.activeBranch)},registerDep(qe,Ye){const Ze=!!We.pendingBranch;Ze&&We.deps++;const Ke=qe.vnode.el;qe.asyncDep.catch(rt=>{handleError(rt,qe,0)}).then(rt=>{if(qe.isUnmounted||We.isUnmounted||We.pendingId!==qe.suspenseId)return;qe.asyncResolved=!0;const{vnode:ft}=qe;handleSetupResult(qe,rt,!1),Ke&&(ft.el=Ke);const mt=!Ke&&qe.subTree.el;Ye(qe,ft,Fe(Ke||qe.subTree.el),Ke?null:ke(qe.subTree),We,le,ye),mt&&Oe(mt),updateHOCHostEl(qe,ft.el),Ze&&--We.deps===0&&We.resolve()})},unmount(qe,Ye){We.isUnmounted=!0,We.activeBranch&&Be(We.activeBranch,L,qe,Ye),We.pendingBranch&&Be(We.pendingBranch,L,qe,Ye)}};return We}function hydrateSuspense($,m,L,j,ee,re,le,ve,ye){const Ee=m.suspense=createSuspenseBoundary(m,j,L,$.parentNode,document.createElement("div"),null,ee,re,le,ve,!0),Me=ye($,Ee.pendingBranch=m.ssContent,L,Ee,re,le);return Ee.deps===0&&Ee.resolve(!1,!0),Me}function normalizeSuspenseChildren($){const{shapeFlag:m,children:L}=$,j=m&32;$.ssContent=normalizeSuspenseSlot(j?L.default:L),$.ssFallback=j?normalizeSuspenseSlot(L.fallback):createVNode(Comment)}function normalizeSuspenseSlot($){let m;if(isFunction$3($)){const L=isBlockTreeEnabled&&$._c;L&&($._d=!1,openBlock()),$=$(),L&&($._d=!0,m=currentBlock,closeBlock())}return isArray$4($)&&($=filterSingleRoot($)),$=normalizeVNode($),m&&!$.dynamicChildren&&($.dynamicChildren=m.filter(L=>L!==$)),$}function queueEffectWithSuspense($,m){m&&m.pendingBranch?isArray$4($)?m.effects.push(...$):m.effects.push($):queuePostFlushCb($)}function setActiveBranch($,m){$.activeBranch=m;const{vnode:L,parentComponent:j}=$;let ee=m.el;for(;!ee&&m.component;)m=m.component.subTree,ee=m.el;L.el=ee,j&&j.subTree===L&&(j.vnode.el=ee,updateHOCHostEl(j,ee))}function isVNodeSuspensible($){var m;return((m=$.props)==null?void 0:m.suspensible)!=null&&$.props.suspensible!==!1}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey);function watchEffect($,m){return doWatch($,null,m)}function watchSyncEffect($,m){return doWatch($,null,{flush:"sync"})}const INITIAL_WATCHER_VALUE={};function watch($,m,L){return doWatch($,m,L)}function doWatch($,m,{immediate:L,deep:j,flush:ee,once:re,onTrack:le,onTrigger:ve}=EMPTY_OBJ){if(m&&re){const qe=m;m=(...Ye)=>{qe(...Ye),We()}}const ye=currentInstance,Ee=qe=>j===!0?qe:traverse(qe,j===!1?1:void 0);let Me,Ce=!1,De=!1;if(isRef($)?(Me=()=>$.value,Ce=isShallow($)):isReactive($)?(Me=()=>Ee($),Ce=!0):isArray$4($)?(De=!0,Ce=$.some(qe=>isReactive(qe)||isShallow(qe)),Me=()=>$.map(qe=>{if(isRef(qe))return qe.value;if(isReactive(qe))return Ee(qe);if(isFunction$3(qe))return callWithErrorHandling(qe,ye,2)})):isFunction$3($)?m?Me=()=>callWithErrorHandling($,ye,2):Me=()=>(Be&&Be(),callWithAsyncErrorHandling($,ye,3,[ke])):Me=NOOP,m&&j){const qe=Me;Me=()=>traverse(qe())}let Be,ke=qe=>{Be=$e.onStop=()=>{callWithErrorHandling(qe,ye,4),Be=$e.onStop=void 0}},Fe;if(isInSSRComponentSetup)if(ke=NOOP,m?L&&callWithAsyncErrorHandling(m,ye,3,[Me(),De?[]:void 0,ke]):Me(),ee==="sync"){const qe=useSSRContext();Fe=qe.__watcherHandles||(qe.__watcherHandles=[])}else return NOOP;let Oe=De?new Array($.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const Ne=()=>{if(!(!$e.active||!$e.dirty))if(m){const qe=$e.run();(j||Ce||(De?qe.some((Ye,Ze)=>hasChanged(Ye,Oe[Ze])):hasChanged(qe,Oe)))&&(Be&&Be(),callWithAsyncErrorHandling(m,ye,3,[qe,Oe===INITIAL_WATCHER_VALUE?void 0:De&&Oe[0]===INITIAL_WATCHER_VALUE?[]:Oe,ke]),Oe=qe)}else $e.run()};Ne.allowRecurse=!!m;let ze;ee==="sync"?ze=Ne:ee==="post"?ze=()=>queuePostRenderEffect(Ne,ye&&ye.suspense):(Ne.pre=!0,ye&&(Ne.id=ye.uid),ze=()=>queueJob(Ne));const $e=new ReactiveEffect(Me,NOOP,ze),He=getCurrentScope(),We=()=>{$e.stop(),He&&remove(He.effects,$e)};return m?L?Ne():Oe=$e.run():ee==="post"?queuePostRenderEffect($e.run.bind($e),ye&&ye.suspense):$e.run(),Fe&&Fe.push(We),We}function instanceWatch($,m,L){const j=this.proxy,ee=isString$2($)?$.includes(".")?createPathGetter(j,$):()=>j[$]:$.bind(j,j);let re;isFunction$3(m)?re=m:(re=m.handler,L=m);const le=setCurrentInstance(this),ve=doWatch(ee,re.bind(j),L);return le(),ve}function createPathGetter($,m){const L=m.split(".");return()=>{let j=$;for(let ee=0;ee<L.length&&j;ee++)j=j[L[ee]];return j}}function traverse($,m,L=0,j){if(!isObject$4($)||$.__v_skip)return $;if(m&&m>0){if(L>=m)return $;L++}if(j=j||new Set,j.has($))return $;if(j.add($),isRef($))traverse($.value,m,L,j);else if(isArray$4($))for(let ee=0;ee<$.length;ee++)traverse($[ee],m,L,j);else if(isSet$1($)||isMap$1($))$.forEach(ee=>{traverse(ee,m,L,j)});else if(isPlainObject$4($))for(const ee in $)traverse($[ee],m,L,j);return $}function withDirectives($,m){if(currentRenderingInstance===null)return $;const L=getExposeProxy(currentRenderingInstance)||currentRenderingInstance.proxy,j=$.dirs||($.dirs=[]);for(let ee=0;ee<m.length;ee++){let[re,le,ve,ye=EMPTY_OBJ]=m[ee];re&&(isFunction$3(re)&&(re={mounted:re,updated:re}),re.deep&&traverse(le),j.push({dir:re,instance:L,value:le,oldValue:void 0,arg:ve,modifiers:ye}))}return $}function invokeDirectiveHook($,m,L,j){const ee=$.dirs,re=m&&m.dirs;for(let le=0;le<ee.length;le++){const ve=ee[le];re&&(ve.oldValue=re[le].value);let ye=ve.dir[j];ye&&(pauseTracking(),callWithAsyncErrorHandling(ye,L,8,[$.el,ve,$,m]),resetTracking())}}const leaveCbKey=Symbol("_leaveCb"),enterCbKey$1=Symbol("_enterCb");function useTransitionState(){const $={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{$.isMounted=!0}),onBeforeUnmount(()=>{$.isUnmounting=!0}),$}const TransitionHookValidator=[Function,Array],BaseTransitionPropsValidators={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},BaseTransitionImpl={name:"BaseTransition",props:BaseTransitionPropsValidators,setup($,{slots:m}){const L=getCurrentInstance(),j=useTransitionState();return()=>{const ee=m.default&&getTransitionRawChildren(m.default(),!0);if(!ee||!ee.length)return;let re=ee[0];if(ee.length>1){for(const De of ee)if(De.type!==Comment){re=De;break}}const le=toRaw($),{mode:ve}=le;if(j.isLeaving)return emptyPlaceholder(re);const ye=getKeepAliveChild(re);if(!ye)return emptyPlaceholder(re);const Ee=resolveTransitionHooks(ye,le,j,L);setTransitionHooks(ye,Ee);const Me=L.subTree,Ce=Me&&getKeepAliveChild(Me);if(Ce&&Ce.type!==Comment&&!isSameVNodeType(ye,Ce)){const De=resolveTransitionHooks(Ce,le,j,L);if(setTransitionHooks(Ce,De),ve==="out-in")return j.isLeaving=!0,De.afterLeave=()=>{j.isLeaving=!1,L.update.active!==!1&&(L.effect.dirty=!0,L.update())},emptyPlaceholder(re);ve==="in-out"&&ye.type!==Comment&&(De.delayLeave=(Be,ke,Fe)=>{const Oe=getLeavingNodesForType(j,Ce);Oe[String(Ce.key)]=Ce,Be[leaveCbKey]=()=>{ke(),Be[leaveCbKey]=void 0,delete Ee.delayedLeave},Ee.delayedLeave=Fe})}return re}}},BaseTransition=BaseTransitionImpl;function getLeavingNodesForType($,m){const{leavingVNodes:L}=$;let j=L.get(m.type);return j||(j=Object.create(null),L.set(m.type,j)),j}function resolveTransitionHooks($,m,L,j){const{appear:ee,mode:re,persisted:le=!1,onBeforeEnter:ve,onEnter:ye,onAfterEnter:Ee,onEnterCancelled:Me,onBeforeLeave:Ce,onLeave:De,onAfterLeave:Be,onLeaveCancelled:ke,onBeforeAppear:Fe,onAppear:Oe,onAfterAppear:Ne,onAppearCancelled:ze}=m,$e=String($.key),He=getLeavingNodesForType(L,$),We=(Ze,Ke)=>{Ze&&callWithAsyncErrorHandling(Ze,j,9,Ke)},qe=(Ze,Ke)=>{const rt=Ke[1];We(Ze,Ke),isArray$4(Ze)?Ze.every(ft=>ft.length<=1)&&rt():Ze.length<=1&&rt()},Ye={mode:re,persisted:le,beforeEnter(Ze){let Ke=ve;if(!L.isMounted)if(ee)Ke=Fe||ve;else return;Ze[leaveCbKey]&&Ze[leaveCbKey](!0);const rt=He[$e];rt&&isSameVNodeType($,rt)&&rt.el[leaveCbKey]&&rt.el[leaveCbKey](),We(Ke,[Ze])},enter(Ze){let Ke=ye,rt=Ee,ft=Me;if(!L.isMounted)if(ee)Ke=Oe||ye,rt=Ne||Ee,ft=ze||Me;else return;let mt=!1;const Et=Ze[enterCbKey$1]=bt=>{mt||(mt=!0,bt?We(ft,[Ze]):We(rt,[Ze]),Ye.delayedLeave&&Ye.delayedLeave(),Ze[enterCbKey$1]=void 0)};Ke?qe(Ke,[Ze,Et]):Et()},leave(Ze,Ke){const rt=String($.key);if(Ze[enterCbKey$1]&&Ze[enterCbKey$1](!0),L.isUnmounting)return Ke();We(Ce,[Ze]);let ft=!1;const mt=Ze[leaveCbKey]=Et=>{ft||(ft=!0,Ke(),Et?We(ke,[Ze]):We(Be,[Ze]),Ze[leaveCbKey]=void 0,He[rt]===$&&delete He[rt])};He[rt]=$,De?qe(De,[Ze,mt]):mt()},clone(Ze){return resolveTransitionHooks(Ze,m,L,j)}};return Ye}function emptyPlaceholder($){if(isKeepAlive($))return $=cloneVNode($),$.children=null,$}function getKeepAliveChild($){return isKeepAlive($)?$.children?$.children[0]:void 0:$}function setTransitionHooks($,m){$.shapeFlag&6&&$.component?setTransitionHooks($.component.subTree,m):$.shapeFlag&128?($.ssContent.transition=m.clone($.ssContent),$.ssFallback.transition=m.clone($.ssFallback)):$.transition=m}function getTransitionRawChildren($,m=!1,L){let j=[],ee=0;for(let re=0;re<$.length;re++){let le=$[re];const ve=L==null?le.key:String(L)+String(le.key!=null?le.key:re);le.type===Fragment?(le.patchFlag&128&&ee++,j=j.concat(getTransitionRawChildren(le.children,m,ve))):(m||le.type!==Comment)&&j.push(ve!=null?cloneVNode(le,{key:ve}):le)}if(ee>1)for(let re=0;re<j.length;re++)j[re].patchFlag=-2;return j}/*! #__NO_SIDE_EFFECTS__ */function defineComponent($,m){return isFunction$3($)?extend$2({name:$.name},m,{setup:$}):$}const isAsyncWrapper=$=>!!$.type.__asyncLoader,isKeepAlive=$=>$.type.__isKeepAlive,KeepAliveImpl={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup($,{slots:m}){const L=getCurrentInstance(),j=L.ctx;if(!j.renderer)return()=>{const ze=m.default&&m.default();return ze&&ze.length===1?ze[0]:ze};const ee=new Map,re=new Set;let le=null;const ve=L.suspense,{renderer:{p:ye,m:Ee,um:Me,o:{createElement:Ce}}}=j,De=Ce("div");j.activate=(ze,$e,He,We,qe)=>{const Ye=ze.component;Ee(ze,$e,He,0,ve),ye(Ye.vnode,ze,$e,He,Ye,ve,We,ze.slotScopeIds,qe),queuePostRenderEffect(()=>{Ye.isDeactivated=!1,Ye.a&&invokeArrayFns(Ye.a);const Ze=ze.props&&ze.props.onVnodeMounted;Ze&&invokeVNodeHook(Ze,Ye.parent,ze)},ve)},j.deactivate=ze=>{const $e=ze.component;Ee(ze,De,null,1,ve),queuePostRenderEffect(()=>{$e.da&&invokeArrayFns($e.da);const He=ze.props&&ze.props.onVnodeUnmounted;He&&invokeVNodeHook(He,$e.parent,ze),$e.isDeactivated=!0},ve)};function Be(ze){resetShapeFlag(ze),Me(ze,L,ve,!0)}function ke(ze){ee.forEach(($e,He)=>{const We=getComponentName($e.type);We&&(!ze||!ze(We))&&Fe(He)})}function Fe(ze){const $e=ee.get(ze);!le||!isSameVNodeType($e,le)?Be($e):le&&resetShapeFlag(le),ee.delete(ze),re.delete(ze)}watch(()=>[$.include,$.exclude],([ze,$e])=>{ze&&ke(He=>matches(ze,He)),$e&&ke(He=>!matches($e,He))},{flush:"post",deep:!0});let Oe=null;const Ne=()=>{Oe!=null&&ee.set(Oe,getInnerChild(L.subTree))};return onMounted(Ne),onUpdated(Ne),onBeforeUnmount(()=>{ee.forEach(ze=>{const{subTree:$e,suspense:He}=L,We=getInnerChild($e);if(ze.type===We.type&&ze.key===We.key){resetShapeFlag(We);const qe=We.component.da;qe&&queuePostRenderEffect(qe,He);return}Be(ze)})}),()=>{if(Oe=null,!m.default)return le=null;const ze=m.default(),$e=ze[0];if(ze.length>1)return le=null,ze;if(!isVNode($e)||!($e.shapeFlag&4)&&!($e.shapeFlag&128))return le=null,$e;let He=getInnerChild($e);const We=He.type,qe=getComponentName(isAsyncWrapper(He)?He.type.__asyncResolved||{}:We),{include:Ye,exclude:Ze,max:Ke}=$;if(Ye&&(!qe||!matches(Ye,qe))||Ze&&qe&&matches(Ze,qe))return le=He,$e;const rt=He.key==null?We:He.key,ft=ee.get(rt);return He.el&&(He=cloneVNode(He),$e.shapeFlag&128&&($e.ssContent=He)),Oe=rt,ft?(He.el=ft.el,He.component=ft.component,He.transition&&setTransitionHooks(He,He.transition),He.shapeFlag|=512,re.delete(rt),re.add(rt)):(re.add(rt),Ke&&re.size>parseInt(Ke,10)&&Fe(re.values().next().value)),He.shapeFlag|=256,le=He,isSuspense($e.type)?$e:He}}},KeepAlive=KeepAliveImpl;function matches($,m){return isArray$4($)?$.some(L=>matches(L,m)):isString$2($)?$.split(",").includes(m):isRegExp$1($)?$.test(m):!1}function onActivated($,m){registerKeepAliveHook($,"a",m)}function onDeactivated($,m){registerKeepAliveHook($,"da",m)}function registerKeepAliveHook($,m,L=currentInstance){const j=$.__wdc||($.__wdc=()=>{let ee=L;for(;ee;){if(ee.isDeactivated)return;ee=ee.parent}return $()});if(injectHook(m,j,L),L){let ee=L.parent;for(;ee&&ee.parent;)isKeepAlive(ee.parent.vnode)&&injectToKeepAliveRoot(j,m,L,ee),ee=ee.parent}}function injectToKeepAliveRoot($,m,L,j){const ee=injectHook(m,$,j,!0);onUnmounted(()=>{remove(j[m],ee)},L)}function resetShapeFlag($){$.shapeFlag&=-257,$.shapeFlag&=-513}function getInnerChild($){return $.shapeFlag&128?$.ssContent:$}function injectHook($,m,L=currentInstance,j=!1){if(L){const ee=L[$]||(L[$]=[]),re=m.__weh||(m.__weh=(...le)=>{if(L.isUnmounted)return;pauseTracking();const ve=setCurrentInstance(L),ye=callWithAsyncErrorHandling(m,L,$,le);return ve(),resetTracking(),ye});return j?ee.unshift(re):ee.push(re),re}}const createHook=$=>(m,L=currentInstance)=>(!isInSSRComponentSetup||$==="sp")&&injectHook($,(...j)=>m(...j),L),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured($,m=currentInstance){injectHook("ec",$,m)}function renderList($,m,L,j){let ee;const re=L&&L[j];if(isArray$4($)||isString$2($)){ee=new Array($.length);for(let le=0,ve=$.length;le<ve;le++)ee[le]=m($[le],le,void 0,re&&re[le])}else if(typeof $=="number"){ee=new Array($);for(let le=0;le<$;le++)ee[le]=m(le+1,le,void 0,re&&re[le])}else if(isObject$4($))if($[Symbol.iterator])ee=Array.from($,(le,ve)=>m(le,ve,void 0,re&&re[ve]));else{const le=Object.keys($);ee=new Array(le.length);for(let ve=0,ye=le.length;ve<ye;ve++){const Ee=le[ve];ee[ve]=m($[Ee],Ee,ve,re&&re[ve])}}else ee=[];return L&&(L[j]=ee),ee}function renderSlot($,m,L={},j,ee){if(currentRenderingInstance.isCE||currentRenderingInstance.parent&&isAsyncWrapper(currentRenderingInstance.parent)&&currentRenderingInstance.parent.isCE)return m!=="default"&&(L.name=m),createVNode("slot",L,j&&j());let re=$[m];re&&re._c&&(re._d=!1),openBlock();const le=re&&ensureValidVNode(re(L)),ve=createBlock(Fragment,{key:L.key||le&&le.key||`_${m}`},le||(j?j():[]),le&&$._===1?64:-2);return!ee&&ve.scopeId&&(ve.slotScopeIds=[ve.scopeId+"-s"]),re&&re._c&&(re._d=!0),ve}function ensureValidVNode($){return $.some(m=>isVNode(m)?!(m.type===Comment||m.type===Fragment&&!ensureValidVNode(m.children)):!0)?$:null}const getPublicInstance=$=>$?isStatefulComponent($)?getExposeProxy($)||$.proxy:getPublicInstance($.parent):null,publicPropertiesMap=extend$2(Object.create(null),{$:$=>$,$el:$=>$.vnode.el,$data:$=>$.data,$props:$=>$.props,$attrs:$=>$.attrs,$slots:$=>$.slots,$refs:$=>$.refs,$parent:$=>getPublicInstance($.parent),$root:$=>getPublicInstance($.root),$emit:$=>$.emit,$options:$=>resolveMergedOptions($),$forceUpdate:$=>$.f||($.f=()=>{$.effect.dirty=!0,queueJob($.update)}),$nextTick:$=>$.n||($.n=nextTick.bind($.proxy)),$watch:$=>instanceWatch.bind($)}),hasSetupBinding=($,m)=>$!==EMPTY_OBJ&&!$.__isScriptSetup&&hasOwn($,m),PublicInstanceProxyHandlers={get({_:$},m){if(m==="__v_skip")return!0;const{ctx:L,setupState:j,data:ee,props:re,accessCache:le,type:ve,appContext:ye}=$;let Ee;if(m[0]!=="$"){const Be=le[m];if(Be!==void 0)switch(Be){case 1:return j[m];case 2:return ee[m];case 4:return L[m];case 3:return re[m]}else{if(hasSetupBinding(j,m))return le[m]=1,j[m];if(ee!==EMPTY_OBJ&&hasOwn(ee,m))return le[m]=2,ee[m];if((Ee=$.propsOptions[0])&&hasOwn(Ee,m))return le[m]=3,re[m];if(L!==EMPTY_OBJ&&hasOwn(L,m))return le[m]=4,L[m];shouldCacheAccess&&(le[m]=0)}}const Me=publicPropertiesMap[m];let Ce,De;if(Me)return m==="$attrs"&&track($.attrs,"get",""),Me($);if((Ce=ve.__cssModules)&&(Ce=Ce[m]))return Ce;if(L!==EMPTY_OBJ&&hasOwn(L,m))return le[m]=4,L[m];if(De=ye.config.globalProperties,hasOwn(De,m))return De[m]},set({_:$},m,L){const{data:j,setupState:ee,ctx:re}=$;return hasSetupBinding(ee,m)?(ee[m]=L,!0):j!==EMPTY_OBJ&&hasOwn(j,m)?(j[m]=L,!0):hasOwn($.props,m)||m[0]==="$"&&m.slice(1)in $?!1:(re[m]=L,!0)},has({_:{data:$,setupState:m,accessCache:L,ctx:j,appContext:ee,propsOptions:re}},le){let ve;return!!L[le]||$!==EMPTY_OBJ&&hasOwn($,le)||hasSetupBinding(m,le)||(ve=re[0])&&hasOwn(ve,le)||hasOwn(j,le)||hasOwn(publicPropertiesMap,le)||hasOwn(ee.config.globalProperties,le)},defineProperty($,m,L){return L.get!=null?$._.accessCache[m]=0:hasOwn(L,"value")&&this.set($,m,L.value,null),Reflect.defineProperty($,m,L)}};function normalizePropsOrEmits($){return isArray$4($)?$.reduce((m,L)=>(m[L]=null,m),{}):$}function mergeModels($,m){return!$||!m?$||m:isArray$4($)&&isArray$4(m)?$.concat(m):extend$2({},normalizePropsOrEmits($),normalizePropsOrEmits(m))}function withAsyncContext($){const m=getCurrentInstance();let L=$();return unsetCurrentInstance(),isPromise(L)&&(L=L.catch(j=>{throw setCurrentInstance(m),j})),[L,()=>setCurrentInstance(m)]}let shouldCacheAccess=!0;function applyOptions($){const m=resolveMergedOptions($),L=$.proxy,j=$.ctx;shouldCacheAccess=!1,m.beforeCreate&&callHook$1(m.beforeCreate,$,"bc");const{data:ee,computed:re,methods:le,watch:ve,provide:ye,inject:Ee,created:Me,beforeMount:Ce,mounted:De,beforeUpdate:Be,updated:ke,activated:Fe,deactivated:Oe,beforeDestroy:Ne,beforeUnmount:ze,destroyed:$e,unmounted:He,render:We,renderTracked:qe,renderTriggered:Ye,errorCaptured:Ze,serverPrefetch:Ke,expose:rt,inheritAttrs:ft,components:mt,directives:Et,filters:bt}=m;if(Ee&&resolveInjections(Ee,j,null),le)for(const at in le){const Xe=le[at];isFunction$3(Xe)&&(j[at]=Xe.bind(L))}if(ee){const at=ee.call(L,L);isObject$4(at)&&($.data=reactive(at))}if(shouldCacheAccess=!0,re)for(const at in re){const Xe=re[at],ht=isFunction$3(Xe)?Xe.bind(L,L):isFunction$3(Xe.get)?Xe.get.bind(L,L):NOOP,Bt=!isFunction$3(Xe)&&isFunction$3(Xe.set)?Xe.set.bind(L):NOOP,Dt=computed({get:ht,set:Bt});Object.defineProperty(j,at,{enumerable:!0,configurable:!0,get:()=>Dt.value,set:Jt=>Dt.value=Jt})}if(ve)for(const at in ve)createWatcher(ve[at],j,L,at);if(ye){const at=isFunction$3(ye)?ye.call(L):ye;Reflect.ownKeys(at).forEach(Xe=>{provide(Xe,at[Xe])})}Me&&callHook$1(Me,$,"c");function st(at,Xe){isArray$4(Xe)?Xe.forEach(ht=>at(ht.bind(L))):Xe&&at(Xe.bind(L))}if(st(onBeforeMount,Ce),st(onMounted,De),st(onBeforeUpdate,Be),st(onUpdated,ke),st(onActivated,Fe),st(onDeactivated,Oe),st(onErrorCaptured,Ze),st(onRenderTracked,qe),st(onRenderTriggered,Ye),st(onBeforeUnmount,ze),st(onUnmounted,He),st(onServerPrefetch,Ke),isArray$4(rt))if(rt.length){const at=$.exposed||($.exposed={});rt.forEach(Xe=>{Object.defineProperty(at,Xe,{get:()=>L[Xe],set:ht=>L[Xe]=ht})})}else $.exposed||($.exposed={});We&&$.render===NOOP&&($.render=We),ft!=null&&($.inheritAttrs=ft),mt&&($.components=mt),Et&&($.directives=Et)}function resolveInjections($,m,L=NOOP){isArray$4($)&&($=normalizeInject($));for(const j in $){const ee=$[j];let re;isObject$4(ee)?"default"in ee?re=inject(ee.from||j,ee.default,!0):re=inject(ee.from||j):re=inject(ee),isRef(re)?Object.defineProperty(m,j,{enumerable:!0,configurable:!0,get:()=>re.value,set:le=>re.value=le}):m[j]=re}}function callHook$1($,m,L){callWithAsyncErrorHandling(isArray$4($)?$.map(j=>j.bind(m.proxy)):$.bind(m.proxy),m,L)}function createWatcher($,m,L,j){const ee=j.includes(".")?createPathGetter(L,j):()=>L[j];if(isString$2($)){const re=m[$];isFunction$3(re)&&watch(ee,re)}else if(isFunction$3($))watch(ee,$.bind(L));else if(isObject$4($))if(isArray$4($))$.forEach(re=>createWatcher(re,m,L,j));else{const re=isFunction$3($.handler)?$.handler.bind(L):m[$.handler];isFunction$3(re)&&watch(ee,re,$)}}function resolveMergedOptions($){const m=$.type,{mixins:L,extends:j}=m,{mixins:ee,optionsCache:re,config:{optionMergeStrategies:le}}=$.appContext,ve=re.get(m);let ye;return ve?ye=ve:!ee.length&&!L&&!j?ye=m:(ye={},ee.length&&ee.forEach(Ee=>mergeOptions$1(ye,Ee,le,!0)),mergeOptions$1(ye,m,le)),isObject$4(m)&&re.set(m,ye),ye}function mergeOptions$1($,m,L,j=!1){const{mixins:ee,extends:re}=m;re&&mergeOptions$1($,re,L,!0),ee&&ee.forEach(le=>mergeOptions$1($,le,L,!0));for(const le in m)if(!(j&&le==="expose")){const ve=internalOptionMergeStrats[le]||L&&L[le];$[le]=ve?ve($[le],m[le]):m[le]}return $}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn($,m){return m?$?function(){return extend$2(isFunction$3($)?$.call(this,this):$,isFunction$3(m)?m.call(this,this):m)}:m:$}function mergeInject($,m){return mergeObjectOptions(normalizeInject($),normalizeInject(m))}function normalizeInject($){if(isArray$4($)){const m={};for(let L=0;L<$.length;L++)m[$[L]]=$[L];return m}return $}function mergeAsArray($,m){return $?[...new Set([].concat($,m))]:m}function mergeObjectOptions($,m){return $?extend$2(Object.create(null),$,m):m}function mergeEmitsOrPropsOptions($,m){return $?isArray$4($)&&isArray$4(m)?[...new Set([...$,...m])]:extend$2(Object.create(null),normalizePropsOrEmits($),normalizePropsOrEmits(m??{})):m}function mergeWatchOptions($,m){if(!$)return m;if(!m)return $;const L=extend$2(Object.create(null),$);for(const j in m)L[j]=mergeAsArray($[j],m[j]);return L}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI($,m){return function(j,ee=null){isFunction$3(j)||(j=extend$2({},j)),ee!=null&&!isObject$4(ee)&&(ee=null);const re=createAppContext(),le=new WeakSet;let ve=!1;const ye=re.app={_uid:uid$1++,_component:j,_props:ee,_container:null,_context:re,_instance:null,version:version$3,get config(){return re.config},set config(Ee){},use(Ee,...Me){return le.has(Ee)||(Ee&&isFunction$3(Ee.install)?(le.add(Ee),Ee.install(ye,...Me)):isFunction$3(Ee)&&(le.add(Ee),Ee(ye,...Me))),ye},mixin(Ee){return re.mixins.includes(Ee)||re.mixins.push(Ee),ye},component(Ee,Me){return Me?(re.components[Ee]=Me,ye):re.components[Ee]},directive(Ee,Me){return Me?(re.directives[Ee]=Me,ye):re.directives[Ee]},mount(Ee,Me,Ce){if(!ve){const De=createVNode(j,ee);return De.appContext=re,Ce===!0?Ce="svg":Ce===!1&&(Ce=void 0),Me&&m?m(De,Ee):$(De,Ee,Ce),ve=!0,ye._container=Ee,Ee.__vue_app__=ye,getExposeProxy(De.component)||De.component.proxy}},unmount(){ve&&($(null,ye._container),delete ye._container.__vue_app__)},provide(Ee,Me){return re.provides[Ee]=Me,ye},runWithContext(Ee){const Me=currentApp;currentApp=ye;try{return Ee()}finally{currentApp=Me}}};return ye}}let currentApp=null;function provide($,m){if(currentInstance){let L=currentInstance.provides;const j=currentInstance.parent&&currentInstance.parent.provides;j===L&&(L=currentInstance.provides=Object.create(j)),L[$]=m}}function inject($,m,L=!1){const j=currentInstance||currentRenderingInstance;if(j||currentApp){const ee=j?j.parent==null?j.vnode.appContext&&j.vnode.appContext.provides:j.parent.provides:currentApp._context.provides;if(ee&&$ in ee)return ee[$];if(arguments.length>1)return L&&isFunction$3(m)?m.call(j&&j.proxy):m}}function hasInjectionContext(){return!!(currentInstance||currentRenderingInstance||currentApp)}const internalObjectProto=Object.create(null),createInternalObject=()=>Object.create(internalObjectProto),isInternalObject=$=>Object.getPrototypeOf($)===internalObjectProto;function initProps($,m,L,j=!1){const ee={},re=createInternalObject();$.propsDefaults=Object.create(null),setFullProps($,m,ee,re);for(const le in $.propsOptions[0])le in ee||(ee[le]=void 0);L?$.props=j?ee:shallowReactive(ee):$.type.props?$.props=ee:$.props=re,$.attrs=re}function updateProps($,m,L,j){const{props:ee,attrs:re,vnode:{patchFlag:le}}=$,ve=toRaw(ee),[ye]=$.propsOptions;let Ee=!1;if((j||le>0)&&!(le&16)){if(le&8){const Me=$.vnode.dynamicProps;for(let Ce=0;Ce<Me.length;Ce++){let De=Me[Ce];if(isEmitListener($.emitsOptions,De))continue;const Be=m[De];if(ye)if(hasOwn(re,De))Be!==re[De]&&(re[De]=Be,Ee=!0);else{const ke=camelize(De);ee[ke]=resolvePropValue(ye,ve,ke,Be,$,!1)}else Be!==re[De]&&(re[De]=Be,Ee=!0)}}}else{setFullProps($,m,ee,re)&&(Ee=!0);let Me;for(const Ce in ve)(!m||!hasOwn(m,Ce)&&((Me=hyphenate(Ce))===Ce||!hasOwn(m,Me)))&&(ye?L&&(L[Ce]!==void 0||L[Me]!==void 0)&&(ee[Ce]=resolvePropValue(ye,ve,Ce,void 0,$,!0)):delete ee[Ce]);if(re!==ve)for(const Ce in re)(!m||!hasOwn(m,Ce))&&(delete re[Ce],Ee=!0)}Ee&&trigger($.attrs,"set","")}function setFullProps($,m,L,j){const[ee,re]=$.propsOptions;let le=!1,ve;if(m)for(let ye in m){if(isReservedProp(ye))continue;const Ee=m[ye];let Me;ee&&hasOwn(ee,Me=camelize(ye))?!re||!re.includes(Me)?L[Me]=Ee:(ve||(ve={}))[Me]=Ee:isEmitListener($.emitsOptions,ye)||(!(ye in j)||Ee!==j[ye])&&(j[ye]=Ee,le=!0)}if(re){const ye=toRaw(L),Ee=ve||EMPTY_OBJ;for(let Me=0;Me<re.length;Me++){const Ce=re[Me];L[Ce]=resolvePropValue(ee,ye,Ce,Ee[Ce],$,!hasOwn(Ee,Ce))}}return le}function resolvePropValue($,m,L,j,ee,re){const le=$[L];if(le!=null){const ve=hasOwn(le,"default");if(ve&&j===void 0){const ye=le.default;if(le.type!==Function&&!le.skipFactory&&isFunction$3(ye)){const{propsDefaults:Ee}=ee;if(L in Ee)j=Ee[L];else{const Me=setCurrentInstance(ee);j=Ee[L]=ye.call(null,m),Me()}}else j=ye}le[0]&&(re&&!ve?j=!1:le[1]&&(j===""||j===hyphenate(L))&&(j=!0))}return j}function normalizePropsOptions($,m,L=!1){const j=m.propsCache,ee=j.get($);if(ee)return ee;const re=$.props,le={},ve=[];let ye=!1;if(!isFunction$3($)){const Me=Ce=>{ye=!0;const[De,Be]=normalizePropsOptions(Ce,m,!0);extend$2(le,De),Be&&ve.push(...Be)};!L&&m.mixins.length&&m.mixins.forEach(Me),$.extends&&Me($.extends),$.mixins&&$.mixins.forEach(Me)}if(!re&&!ye)return isObject$4($)&&j.set($,EMPTY_ARR),EMPTY_ARR;if(isArray$4(re))for(let Me=0;Me<re.length;Me++){const Ce=camelize(re[Me]);validatePropName(Ce)&&(le[Ce]=EMPTY_OBJ)}else if(re)for(const Me in re){const Ce=camelize(Me);if(validatePropName(Ce)){const De=re[Me],Be=le[Ce]=isArray$4(De)||isFunction$3(De)?{type:De}:extend$2({},De);if(Be){const ke=getTypeIndex(Boolean,Be.type),Fe=getTypeIndex(String,Be.type);Be[0]=ke>-1,Be[1]=Fe<0||ke<Fe,(ke>-1||hasOwn(Be,"default"))&&ve.push(Ce)}}}const Ee=[le,ve];return isObject$4($)&&j.set($,Ee),Ee}function validatePropName($){return $[0]!=="$"&&!isReservedProp($)}function getType($){return $===null?"null":typeof $=="function"?$.name||"":typeof $=="object"&&$.constructor&&$.constructor.name||""}function isSameType($,m){return getType($)===getType(m)}function getTypeIndex($,m){return isArray$4(m)?m.findIndex(L=>isSameType(L,$)):isFunction$3(m)&&isSameType(m,$)?0:-1}const isInternalKey=$=>$[0]==="_"||$==="$stable",normalizeSlotValue=$=>isArray$4($)?$.map(normalizeVNode):[normalizeVNode($)],normalizeSlot$1=($,m,L)=>{if(m._n)return m;const j=withCtx((...ee)=>normalizeSlotValue(m(...ee)),L);return j._c=!1,j},normalizeObjectSlots=($,m,L)=>{const j=$._ctx;for(const ee in $){if(isInternalKey(ee))continue;const re=$[ee];if(isFunction$3(re))m[ee]=normalizeSlot$1(ee,re,j);else if(re!=null){const le=normalizeSlotValue(re);m[ee]=()=>le}}},normalizeVNodeSlots=($,m)=>{const L=normalizeSlotValue(m);$.slots.default=()=>L},initSlots=($,m)=>{if($.vnode.shapeFlag&32){const L=m._;L?($.slots=toRaw(m),def($.slots,"_",L)):normalizeObjectSlots(m,$.slots=createInternalObject())}else $.slots=createInternalObject(),m&&normalizeVNodeSlots($,m)},updateSlots=($,m,L)=>{const{vnode:j,slots:ee}=$;let re=!0,le=EMPTY_OBJ;if(j.shapeFlag&32){const ve=m._;ve?L&&ve===1?re=!1:(extend$2(ee,m),!L&&ve===1&&delete ee._):(re=!m.$stable,normalizeObjectSlots(m,ee)),le=m}else m&&(normalizeVNodeSlots($,m),le={default:1});if(re)for(const ve in ee)!isInternalKey(ve)&&le[ve]==null&&delete ee[ve]};function setRef($,m,L,j,ee=!1){if(isArray$4($)){$.forEach((De,Be)=>setRef(De,m&&(isArray$4(m)?m[Be]:m),L,j,ee));return}if(isAsyncWrapper(j)&&!ee)return;const re=j.shapeFlag&4?getExposeProxy(j.component)||j.component.proxy:j.el,le=ee?null:re,{i:ve,r:ye}=$,Ee=m&&m.r,Me=ve.refs===EMPTY_OBJ?ve.refs={}:ve.refs,Ce=ve.setupState;if(Ee!=null&&Ee!==ye&&(isString$2(Ee)?(Me[Ee]=null,hasOwn(Ce,Ee)&&(Ce[Ee]=null)):isRef(Ee)&&(Ee.value=null)),isFunction$3(ye))callWithErrorHandling(ye,ve,12,[le,Me]);else{const De=isString$2(ye),Be=isRef(ye);if(De||Be){const ke=()=>{if($.f){const Fe=De?hasOwn(Ce,ye)?Ce[ye]:Me[ye]:ye.value;ee?isArray$4(Fe)&&remove(Fe,re):isArray$4(Fe)?Fe.includes(re)||Fe.push(re):De?(Me[ye]=[re],hasOwn(Ce,ye)&&(Ce[ye]=Me[ye])):(ye.value=[re],$.k&&(Me[$.k]=ye.value))}else De?(Me[ye]=le,hasOwn(Ce,ye)&&(Ce[ye]=le)):Be&&(ye.value=le,$.k&&(Me[$.k]=le))};le?(ke.id=-1,queuePostRenderEffect(ke,L)):ke()}}}let hasMismatch=!1;const isSVGContainer=$=>$.namespaceURI.includes("svg")&&$.tagName!=="foreignObject",isMathMLContainer=$=>$.namespaceURI.includes("MathML"),getContainerType=$=>{if(isSVGContainer($))return"svg";if(isMathMLContainer($))return"mathml"},isComment=$=>$.nodeType===8;function createHydrationFunctions($){const{mt:m,p:L,o:{patchProp:j,createText:ee,nextSibling:re,parentNode:le,remove:ve,insert:ye,createComment:Ee}}=$,Me=($e,He)=>{if(!He.hasChildNodes()){L(null,$e,He),flushPostFlushCbs(),He._vnode=$e;return}hasMismatch=!1,Ce(He.firstChild,$e,null,null,null),flushPostFlushCbs(),He._vnode=$e,hasMismatch&&console.error("Hydration completed but contains mismatches.")},Ce=($e,He,We,qe,Ye,Ze=!1)=>{Ze=Ze||!!He.dynamicChildren;const Ke=isComment($e)&&$e.data==="[",rt=()=>Fe($e,He,We,qe,Ye,Ke),{type:ft,ref:mt,shapeFlag:Et,patchFlag:bt}=He;let Ct=$e.nodeType;He.el=$e,bt===-2&&(Ze=!1,He.dynamicChildren=null);let st=null;switch(ft){case Text:Ct!==3?He.children===""?(ye(He.el=ee(""),le($e),$e),st=$e):st=rt():($e.data!==He.children&&(hasMismatch=!0,$e.data=He.children),st=re($e));break;case Comment:ze($e)?(st=re($e),Ne(He.el=$e.content.firstChild,$e,We)):Ct!==8||Ke?st=rt():st=re($e);break;case Static:if(Ke&&($e=re($e),Ct=$e.nodeType),Ct===1||Ct===3){st=$e;const at=!He.children.length;for(let Xe=0;Xe<He.staticCount;Xe++)at&&(He.children+=st.nodeType===1?st.outerHTML:st.data),Xe===He.staticCount-1&&(He.anchor=st),st=re(st);return Ke?re(st):st}else rt();break;case Fragment:Ke?st=ke($e,He,We,qe,Ye,Ze):st=rt();break;default:if(Et&1)(Ct!==1||He.type.toLowerCase()!==$e.tagName.toLowerCase())&&!ze($e)?st=rt():st=De($e,He,We,qe,Ye,Ze);else if(Et&6){He.slotScopeIds=Ye;const at=le($e);if(Ke?st=Oe($e):isComment($e)&&$e.data==="teleport start"?st=Oe($e,$e.data,"teleport end"):st=re($e),m(He,at,null,We,qe,getContainerType(at),Ze),isAsyncWrapper(He)){let Xe;Ke?(Xe=createVNode(Fragment),Xe.anchor=st?st.previousSibling:at.lastChild):Xe=$e.nodeType===3?createTextVNode(""):createVNode("div"),Xe.el=$e,He.component.subTree=Xe}}else Et&64?Ct!==8?st=rt():st=He.type.hydrate($e,He,We,qe,Ye,Ze,$,Be):Et&128&&(st=He.type.hydrate($e,He,We,qe,getContainerType(le($e)),Ye,Ze,$,Ce))}return mt!=null&&setRef(mt,null,qe,He),st},De=($e,He,We,qe,Ye,Ze)=>{Ze=Ze||!!He.dynamicChildren;const{type:Ke,props:rt,patchFlag:ft,shapeFlag:mt,dirs:Et,transition:bt}=He,Ct=Ke==="input"||Ke==="option";if(Ct||ft!==-1){Et&&invokeDirectiveHook(He,null,We,"created");let st=!1;if(ze($e)){st=needTransition(qe,bt)&&We&&We.vnode.props&&We.vnode.props.appear;const Xe=$e.content.firstChild;st&&bt.beforeEnter(Xe),Ne(Xe,$e,We),He.el=$e=Xe}if(mt&16&&!(rt&&(rt.innerHTML||rt.textContent))){let Xe=Be($e.firstChild,He,$e,We,qe,Ye,Ze);for(;Xe;){hasMismatch=!0;const ht=Xe;Xe=Xe.nextSibling,ve(ht)}}else mt&8&&$e.textContent!==He.children&&(hasMismatch=!0,$e.textContent=He.children);if(rt)if(Ct||!Ze||ft&48)for(const Xe in rt)(Ct&&(Xe.endsWith("value")||Xe==="indeterminate")||isOn(Xe)&&!isReservedProp(Xe)||Xe[0]===".")&&j($e,Xe,null,rt[Xe],void 0,void 0,We);else rt.onClick&&j($e,"onClick",null,rt.onClick,void 0,void 0,We);let at;(at=rt&&rt.onVnodeBeforeMount)&&invokeVNodeHook(at,We,He),Et&&invokeDirectiveHook(He,null,We,"beforeMount"),((at=rt&&rt.onVnodeMounted)||Et||st)&&queueEffectWithSuspense(()=>{at&&invokeVNodeHook(at,We,He),st&&bt.enter($e),Et&&invokeDirectiveHook(He,null,We,"mounted")},qe)}return $e.nextSibling},Be=($e,He,We,qe,Ye,Ze,Ke)=>{Ke=Ke||!!He.dynamicChildren;const rt=He.children,ft=rt.length;for(let mt=0;mt<ft;mt++){const Et=Ke?rt[mt]:rt[mt]=normalizeVNode(rt[mt]);if($e)$e=Ce($e,Et,qe,Ye,Ze,Ke);else{if(Et.type===Text&&!Et.children)continue;hasMismatch=!0,L(null,Et,We,null,qe,Ye,getContainerType(We),Ze)}}return $e},ke=($e,He,We,qe,Ye,Ze)=>{const{slotScopeIds:Ke}=He;Ke&&(Ye=Ye?Ye.concat(Ke):Ke);const rt=le($e),ft=Be(re($e),He,rt,We,qe,Ye,Ze);return ft&&isComment(ft)&&ft.data==="]"?re(He.anchor=ft):(hasMismatch=!0,ye(He.anchor=Ee("]"),rt,ft),ft)},Fe=($e,He,We,qe,Ye,Ze)=>{if(hasMismatch=!0,He.el=null,Ze){const ft=Oe($e);for(;;){const mt=re($e);if(mt&&mt!==ft)ve(mt);else break}}const Ke=re($e),rt=le($e);return ve($e),L(null,He,rt,Ke,We,qe,getContainerType(rt),Ye),Ke},Oe=($e,He="[",We="]")=>{let qe=0;for(;$e;)if($e=re($e),$e&&isComment($e)&&($e.data===He&&qe++,$e.data===We)){if(qe===0)return re($e);qe--}return $e},Ne=($e,He,We)=>{const qe=He.parentNode;qe&&qe.replaceChild($e,He);let Ye=We;for(;Ye;)Ye.vnode.el===He&&(Ye.vnode.el=Ye.subTree.el=$e),Ye=Ye.parent},ze=$e=>$e.nodeType===1&&$e.tagName.toLowerCase()==="template";return[Me,Ce]}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer($){return baseCreateRenderer($)}function createHydrationRenderer($){return baseCreateRenderer($,createHydrationFunctions)}function baseCreateRenderer($,m){const L=getGlobalThis();L.__VUE__=!0;const{insert:j,remove:ee,patchProp:re,createElement:le,createText:ve,createComment:ye,setText:Ee,setElementText:Me,parentNode:Ce,nextSibling:De,setScopeId:Be=NOOP,insertStaticContent:ke}=$,Fe=(wt,It,Kt,ln=null,nn=null,gn=null,xn=void 0,St=null,At=!!It.dynamicChildren)=>{if(wt===It)return;wt&&!isSameVNodeType(wt,It)&&(ln=Tt(wt),Jt(wt,nn,gn,!0),wt=null),It.patchFlag===-2&&(At=!1,It.dynamicChildren=null);const{type:Ut,ref:Zt,shapeFlag:cn}=It;switch(Ut){case Text:Oe(wt,It,Kt,ln);break;case Comment:Ne(wt,It,Kt,ln);break;case Static:wt==null&&ze(It,Kt,ln,xn);break;case Fragment:mt(wt,It,Kt,ln,nn,gn,xn,St,At);break;default:cn&1?We(wt,It,Kt,ln,nn,gn,xn,St,At):cn&6?Et(wt,It,Kt,ln,nn,gn,xn,St,At):(cn&64||cn&128)&&Ut.process(wt,It,Kt,ln,nn,gn,xn,St,At,pn)}Zt!=null&&nn&&setRef(Zt,wt&&wt.ref,gn,It||wt,!It)},Oe=(wt,It,Kt,ln)=>{if(wt==null)j(It.el=ve(It.children),Kt,ln);else{const nn=It.el=wt.el;It.children!==wt.children&&Ee(nn,It.children)}},Ne=(wt,It,Kt,ln)=>{wt==null?j(It.el=ye(It.children||""),Kt,ln):It.el=wt.el},ze=(wt,It,Kt,ln)=>{[wt.el,wt.anchor]=ke(wt.children,It,Kt,ln,wt.el,wt.anchor)},$e=({el:wt,anchor:It},Kt,ln)=>{let nn;for(;wt&&wt!==It;)nn=De(wt),j(wt,Kt,ln),wt=nn;j(It,Kt,ln)},He=({el:wt,anchor:It})=>{let Kt;for(;wt&&wt!==It;)Kt=De(wt),ee(wt),wt=Kt;ee(It)},We=(wt,It,Kt,ln,nn,gn,xn,St,At)=>{It.type==="svg"?xn="svg":It.type==="math"&&(xn="mathml"),wt==null?qe(It,Kt,ln,nn,gn,xn,St,At):Ke(wt,It,nn,gn,xn,St,At)},qe=(wt,It,Kt,ln,nn,gn,xn,St)=>{let At,Ut;const{props:Zt,shapeFlag:cn,transition:sn,dirs:bn}=wt;if(At=wt.el=le(wt.type,gn,Zt&&Zt.is,Zt),cn&8?Me(At,wt.children):cn&16&&Ze(wt.children,At,null,ln,nn,resolveChildrenNamespace(wt,gn),xn,St),bn&&invokeDirectiveHook(wt,null,ln,"created"),Ye(At,wt,wt.scopeId,xn,ln),Zt){for(const Cn in Zt)Cn!=="value"&&!isReservedProp(Cn)&&re(At,Cn,null,Zt[Cn],gn,wt.children,ln,nn,Mt);"value"in Zt&&re(At,"value",null,Zt.value,gn),(Ut=Zt.onVnodeBeforeMount)&&invokeVNodeHook(Ut,ln,wt)}bn&&invokeDirectiveHook(wt,null,ln,"beforeMount");const vn=needTransition(nn,sn);vn&&sn.beforeEnter(At),j(At,It,Kt),((Ut=Zt&&Zt.onVnodeMounted)||vn||bn)&&queuePostRenderEffect(()=>{Ut&&invokeVNodeHook(Ut,ln,wt),vn&&sn.enter(At),bn&&invokeDirectiveHook(wt,null,ln,"mounted")},nn)},Ye=(wt,It,Kt,ln,nn)=>{if(Kt&&Be(wt,Kt),ln)for(let gn=0;gn<ln.length;gn++)Be(wt,ln[gn]);if(nn){let gn=nn.subTree;if(It===gn){const xn=nn.vnode;Ye(wt,xn,xn.scopeId,xn.slotScopeIds,nn.parent)}}},Ze=(wt,It,Kt,ln,nn,gn,xn,St,At=0)=>{for(let Ut=At;Ut<wt.length;Ut++){const Zt=wt[Ut]=St?cloneIfMounted(wt[Ut]):normalizeVNode(wt[Ut]);Fe(null,Zt,It,Kt,ln,nn,gn,xn,St)}},Ke=(wt,It,Kt,ln,nn,gn,xn)=>{const St=It.el=wt.el;let{patchFlag:At,dynamicChildren:Ut,dirs:Zt}=It;At|=wt.patchFlag&16;const cn=wt.props||EMPTY_OBJ,sn=It.props||EMPTY_OBJ;let bn;if(Kt&&toggleRecurse(Kt,!1),(bn=sn.onVnodeBeforeUpdate)&&invokeVNodeHook(bn,Kt,It,wt),Zt&&invokeDirectiveHook(It,wt,Kt,"beforeUpdate"),Kt&&toggleRecurse(Kt,!0),Ut?rt(wt.dynamicChildren,Ut,St,Kt,ln,resolveChildrenNamespace(It,nn),gn):xn||Xe(wt,It,St,null,Kt,ln,resolveChildrenNamespace(It,nn),gn,!1),At>0){if(At&16)ft(St,It,cn,sn,Kt,ln,nn);else if(At&2&&cn.class!==sn.class&&re(St,"class",null,sn.class,nn),At&4&&re(St,"style",cn.style,sn.style,nn),At&8){const vn=It.dynamicProps;for(let Cn=0;Cn<vn.length;Cn++){const Un=vn[Cn],yn=cn[Un],$n=sn[Un];($n!==yn||Un==="value")&&re(St,Un,yn,$n,nn,wt.children,Kt,ln,Mt)}}At&1&&wt.children!==It.children&&Me(St,It.children)}else!xn&&Ut==null&&ft(St,It,cn,sn,Kt,ln,nn);((bn=sn.onVnodeUpdated)||Zt)&&queuePostRenderEffect(()=>{bn&&invokeVNodeHook(bn,Kt,It,wt),Zt&&invokeDirectiveHook(It,wt,Kt,"updated")},ln)},rt=(wt,It,Kt,ln,nn,gn,xn)=>{for(let St=0;St<It.length;St++){const At=wt[St],Ut=It[St],Zt=At.el&&(At.type===Fragment||!isSameVNodeType(At,Ut)||At.shapeFlag&70)?Ce(At.el):Kt;Fe(At,Ut,Zt,null,ln,nn,gn,xn,!0)}},ft=(wt,It,Kt,ln,nn,gn,xn)=>{if(Kt!==ln){if(Kt!==EMPTY_OBJ)for(const St in Kt)!isReservedProp(St)&&!(St in ln)&&re(wt,St,Kt[St],null,xn,It.children,nn,gn,Mt);for(const St in ln){if(isReservedProp(St))continue;const At=ln[St],Ut=Kt[St];At!==Ut&&St!=="value"&&re(wt,St,Ut,At,xn,It.children,nn,gn,Mt)}"value"in ln&&re(wt,"value",Kt.value,ln.value,xn)}},mt=(wt,It,Kt,ln,nn,gn,xn,St,At)=>{const Ut=It.el=wt?wt.el:ve(""),Zt=It.anchor=wt?wt.anchor:ve("");let{patchFlag:cn,dynamicChildren:sn,slotScopeIds:bn}=It;bn&&(St=St?St.concat(bn):bn),wt==null?(j(Ut,Kt,ln),j(Zt,Kt,ln),Ze(It.children||[],Kt,Zt,nn,gn,xn,St,At)):cn>0&&cn&64&&sn&&wt.dynamicChildren?(rt(wt.dynamicChildren,sn,Kt,nn,gn,xn,St),(It.key!=null||nn&&It===nn.subTree)&&traverseStaticChildren(wt,It,!0)):Xe(wt,It,Kt,Zt,nn,gn,xn,St,At)},Et=(wt,It,Kt,ln,nn,gn,xn,St,At)=>{It.slotScopeIds=St,wt==null?It.shapeFlag&512?nn.ctx.activate(It,Kt,ln,xn,At):bt(It,Kt,ln,nn,gn,xn,At):Ct(wt,It,At)},bt=(wt,It,Kt,ln,nn,gn,xn)=>{const St=wt.component=createComponentInstance(wt,ln,nn);if(isKeepAlive(wt)&&(St.ctx.renderer=pn),setupComponent(St),St.asyncDep){if(nn&&nn.registerDep(St,st),!wt.el){const At=St.subTree=createVNode(Comment);Ne(null,At,It,Kt)}}else st(St,wt,It,Kt,nn,gn,xn)},Ct=(wt,It,Kt)=>{const ln=It.component=wt.component;if(shouldUpdateComponent(wt,It,Kt))if(ln.asyncDep&&!ln.asyncResolved){at(ln,It,Kt);return}else ln.next=It,invalidateJob(ln.update),ln.effect.dirty=!0,ln.update();else It.el=wt.el,ln.vnode=It},st=(wt,It,Kt,ln,nn,gn,xn)=>{const St=()=>{if(wt.isMounted){let{next:Zt,bu:cn,u:sn,parent:bn,vnode:vn}=wt;{const Jn=locateNonHydratedAsyncRoot(wt);if(Jn){Zt&&(Zt.el=vn.el,at(wt,Zt,xn)),Jn.asyncDep.then(()=>{wt.isUnmounted||St()});return}}let Cn=Zt,Un;toggleRecurse(wt,!1),Zt?(Zt.el=vn.el,at(wt,Zt,xn)):Zt=vn,cn&&invokeArrayFns(cn),(Un=Zt.props&&Zt.props.onVnodeBeforeUpdate)&&invokeVNodeHook(Un,bn,Zt,vn),toggleRecurse(wt,!0);const yn=renderComponentRoot(wt),$n=wt.subTree;wt.subTree=yn,Fe($n,yn,Ce($n.el),Tt($n),wt,nn,gn),Zt.el=yn.el,Cn===null&&updateHOCHostEl(wt,yn.el),sn&&queuePostRenderEffect(sn,nn),(Un=Zt.props&&Zt.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(Un,bn,Zt,vn),nn)}else{let Zt;const{el:cn,props:sn}=It,{bm:bn,m:vn,parent:Cn}=wt,Un=isAsyncWrapper(It);if(toggleRecurse(wt,!1),bn&&invokeArrayFns(bn),!Un&&(Zt=sn&&sn.onVnodeBeforeMount)&&invokeVNodeHook(Zt,Cn,It),toggleRecurse(wt,!0),cn&&Mn){const yn=()=>{wt.subTree=renderComponentRoot(wt),Mn(cn,wt.subTree,wt,nn,null)};Un?It.type.__asyncLoader().then(()=>!wt.isUnmounted&&yn()):yn()}else{const yn=wt.subTree=renderComponentRoot(wt);Fe(null,yn,Kt,ln,wt,nn,gn),It.el=yn.el}if(vn&&queuePostRenderEffect(vn,nn),!Un&&(Zt=sn&&sn.onVnodeMounted)){const yn=It;queuePostRenderEffect(()=>invokeVNodeHook(Zt,Cn,yn),nn)}(It.shapeFlag&256||Cn&&isAsyncWrapper(Cn.vnode)&&Cn.vnode.shapeFlag&256)&&wt.a&&queuePostRenderEffect(wt.a,nn),wt.isMounted=!0,It=Kt=ln=null}},At=wt.effect=new ReactiveEffect(St,NOOP,()=>queueJob(Ut),wt.scope),Ut=wt.update=()=>{At.dirty&&At.run()};Ut.id=wt.uid,toggleRecurse(wt,!0),Ut()},at=(wt,It,Kt)=>{It.component=wt;const ln=wt.vnode.props;wt.vnode=It,wt.next=null,updateProps(wt,It.props,ln,Kt),updateSlots(wt,It.children,Kt),pauseTracking(),flushPreFlushCbs(wt),resetTracking()},Xe=(wt,It,Kt,ln,nn,gn,xn,St,At=!1)=>{const Ut=wt&&wt.children,Zt=wt?wt.shapeFlag:0,cn=It.children,{patchFlag:sn,shapeFlag:bn}=It;if(sn>0){if(sn&128){Bt(Ut,cn,Kt,ln,nn,gn,xn,St,At);return}else if(sn&256){ht(Ut,cn,Kt,ln,nn,gn,xn,St,At);return}}bn&8?(Zt&16&&Mt(Ut,nn,gn),cn!==Ut&&Me(Kt,cn)):Zt&16?bn&16?Bt(Ut,cn,Kt,ln,nn,gn,xn,St,At):Mt(Ut,nn,gn,!0):(Zt&8&&Me(Kt,""),bn&16&&Ze(cn,Kt,ln,nn,gn,xn,St,At))},ht=(wt,It,Kt,ln,nn,gn,xn,St,At)=>{wt=wt||EMPTY_ARR,It=It||EMPTY_ARR;const Ut=wt.length,Zt=It.length,cn=Math.min(Ut,Zt);let sn;for(sn=0;sn<cn;sn++){const bn=It[sn]=At?cloneIfMounted(It[sn]):normalizeVNode(It[sn]);Fe(wt[sn],bn,Kt,null,nn,gn,xn,St,At)}Ut>Zt?Mt(wt,nn,gn,!0,!1,cn):Ze(It,Kt,ln,nn,gn,xn,St,At,cn)},Bt=(wt,It,Kt,ln,nn,gn,xn,St,At)=>{let Ut=0;const Zt=It.length;let cn=wt.length-1,sn=Zt-1;for(;Ut<=cn&&Ut<=sn;){const bn=wt[Ut],vn=It[Ut]=At?cloneIfMounted(It[Ut]):normalizeVNode(It[Ut]);if(isSameVNodeType(bn,vn))Fe(bn,vn,Kt,null,nn,gn,xn,St,At);else break;Ut++}for(;Ut<=cn&&Ut<=sn;){const bn=wt[cn],vn=It[sn]=At?cloneIfMounted(It[sn]):normalizeVNode(It[sn]);if(isSameVNodeType(bn,vn))Fe(bn,vn,Kt,null,nn,gn,xn,St,At);else break;cn--,sn--}if(Ut>cn){if(Ut<=sn){const bn=sn+1,vn=bn<Zt?It[bn].el:ln;for(;Ut<=sn;)Fe(null,It[Ut]=At?cloneIfMounted(It[Ut]):normalizeVNode(It[Ut]),Kt,vn,nn,gn,xn,St,At),Ut++}}else if(Ut>sn)for(;Ut<=cn;)Jt(wt[Ut],nn,gn,!0),Ut++;else{const bn=Ut,vn=Ut,Cn=new Map;for(Ut=vn;Ut<=sn;Ut++){const Qn=It[Ut]=At?cloneIfMounted(It[Ut]):normalizeVNode(It[Ut]);Qn.key!=null&&Cn.set(Qn.key,Ut)}let Un,yn=0;const $n=sn-vn+1;let Jn=!1,Hn=0;const Bn=new Array($n);for(Ut=0;Ut<$n;Ut++)Bn[Ut]=0;for(Ut=bn;Ut<=cn;Ut++){const Qn=wt[Ut];if(yn>=$n){Jt(Qn,nn,gn,!0);continue}let Kn;if(Qn.key!=null)Kn=Cn.get(Qn.key);else for(Un=vn;Un<=sn;Un++)if(Bn[Un-vn]===0&&isSameVNodeType(Qn,It[Un])){Kn=Un;break}Kn===void 0?Jt(Qn,nn,gn,!0):(Bn[Kn-vn]=Ut+1,Kn>=Hn?Hn=Kn:Jn=!0,Fe(Qn,It[Kn],Kt,null,nn,gn,xn,St,At),yn++)}const Yn=Jn?getSequence(Bn):EMPTY_ARR;for(Un=Yn.length-1,Ut=$n-1;Ut>=0;Ut--){const Qn=vn+Ut,Kn=It[Qn],Wt=Qn+1<Zt?It[Qn+1].el:ln;Bn[Ut]===0?Fe(null,Kn,Kt,Wt,nn,gn,xn,St,At):Jn&&(Un<0||Ut!==Yn[Un]?Dt(Kn,Kt,Wt,2):Un--)}}},Dt=(wt,It,Kt,ln,nn=null)=>{const{el:gn,type:xn,transition:St,children:At,shapeFlag:Ut}=wt;if(Ut&6){Dt(wt.component.subTree,It,Kt,ln);return}if(Ut&128){wt.suspense.move(It,Kt,ln);return}if(Ut&64){xn.move(wt,It,Kt,pn);return}if(xn===Fragment){j(gn,It,Kt);for(let cn=0;cn<At.length;cn++)Dt(At[cn],It,Kt,ln);j(wt.anchor,It,Kt);return}if(xn===Static){$e(wt,It,Kt);return}if(ln!==2&&Ut&1&&St)if(ln===0)St.beforeEnter(gn),j(gn,It,Kt),queuePostRenderEffect(()=>St.enter(gn),nn);else{const{leave:cn,delayLeave:sn,afterLeave:bn}=St,vn=()=>j(gn,It,Kt),Cn=()=>{cn(gn,()=>{vn(),bn&&bn()})};sn?sn(gn,vn,Cn):Cn()}else j(gn,It,Kt)},Jt=(wt,It,Kt,ln=!1,nn=!1)=>{const{type:gn,props:xn,ref:St,children:At,dynamicChildren:Ut,shapeFlag:Zt,patchFlag:cn,dirs:sn}=wt;if(St!=null&&setRef(St,null,Kt,wt,!0),Zt&256){It.ctx.deactivate(wt);return}const bn=Zt&1&&sn,vn=!isAsyncWrapper(wt);let Cn;if(vn&&(Cn=xn&&xn.onVnodeBeforeUnmount)&&invokeVNodeHook(Cn,It,wt),Zt&6)Vt(wt.component,Kt,ln);else{if(Zt&128){wt.suspense.unmount(Kt,ln);return}bn&&invokeDirectiveHook(wt,null,It,"beforeUnmount"),Zt&64?wt.type.remove(wt,It,Kt,nn,pn,ln):Ut&&(gn!==Fragment||cn>0&&cn&64)?Mt(Ut,It,Kt,!1,!0):(gn===Fragment&&cn&384||!nn&&Zt&16)&&Mt(At,It,Kt),ln&&tn(wt)}(vn&&(Cn=xn&&xn.onVnodeUnmounted)||bn)&&queuePostRenderEffect(()=>{Cn&&invokeVNodeHook(Cn,It,wt),bn&&invokeDirectiveHook(wt,null,It,"unmounted")},Kt)},tn=wt=>{const{type:It,el:Kt,anchor:ln,transition:nn}=wt;if(It===Fragment){zt(Kt,ln);return}if(It===Static){He(wt);return}const gn=()=>{ee(Kt),nn&&!nn.persisted&&nn.afterLeave&&nn.afterLeave()};if(wt.shapeFlag&1&&nn&&!nn.persisted){const{leave:xn,delayLeave:St}=nn,At=()=>xn(Kt,gn);St?St(wt.el,gn,At):At()}else gn()},zt=(wt,It)=>{let Kt;for(;wt!==It;)Kt=De(wt),ee(wt),wt=Kt;ee(It)},Vt=(wt,It,Kt)=>{const{bum:ln,scope:nn,update:gn,subTree:xn,um:St}=wt;ln&&invokeArrayFns(ln),nn.stop(),gn&&(gn.active=!1,Jt(xn,wt,It,Kt)),St&&queuePostRenderEffect(St,It),queuePostRenderEffect(()=>{wt.isUnmounted=!0},It),It&&It.pendingBranch&&!It.isUnmounted&&wt.asyncDep&&!wt.asyncResolved&&wt.suspenseId===It.pendingId&&(It.deps--,It.deps===0&&It.resolve())},Mt=(wt,It,Kt,ln=!1,nn=!1,gn=0)=>{for(let xn=gn;xn<wt.length;xn++)Jt(wt[xn],It,Kt,ln,nn)},Tt=wt=>wt.shapeFlag&6?Tt(wt.component.subTree):wt.shapeFlag&128?wt.suspense.next():De(wt.anchor||wt.el);let qt=!1;const on=(wt,It,Kt)=>{wt==null?It._vnode&&Jt(It._vnode,null,null,!0):Fe(It._vnode||null,wt,It,null,null,null,Kt),qt||(qt=!0,flushPreFlushCbs(),flushPostFlushCbs(),qt=!1),It._vnode=wt},pn={p:Fe,um:Jt,m:Dt,r:tn,mt:bt,mc:Ze,pc:Xe,pbc:rt,n:Tt,o:$};let kt,Mn;return m&&([kt,Mn]=m(pn)),{render:on,hydrate:kt,createApp:createAppAPI(on,kt)}}function resolveChildrenNamespace({type:$,props:m},L){return L==="svg"&&$==="foreignObject"||L==="mathml"&&$==="annotation-xml"&&m&&m.encoding&&m.encoding.includes("html")?void 0:L}function toggleRecurse({effect:$,update:m},L){$.allowRecurse=m.allowRecurse=L}function needTransition($,m){return(!$||$&&!$.pendingBranch)&&m&&!m.persisted}function traverseStaticChildren($,m,L=!1){const j=$.children,ee=m.children;if(isArray$4(j)&&isArray$4(ee))for(let re=0;re<j.length;re++){const le=j[re];let ve=ee[re];ve.shapeFlag&1&&!ve.dynamicChildren&&((ve.patchFlag<=0||ve.patchFlag===32)&&(ve=ee[re]=cloneIfMounted(ee[re]),ve.el=le.el),L||traverseStaticChildren(le,ve)),ve.type===Text&&(ve.el=le.el)}}function getSequence($){const m=$.slice(),L=[0];let j,ee,re,le,ve;const ye=$.length;for(j=0;j<ye;j++){const Ee=$[j];if(Ee!==0){if(ee=L[L.length-1],$[ee]<Ee){m[j]=ee,L.push(j);continue}for(re=0,le=L.length-1;re<le;)ve=re+le>>1,$[L[ve]]<Ee?re=ve+1:le=ve;Ee<$[L[re]]&&(re>0&&(m[j]=L[re-1]),L[re]=j)}}for(re=L.length,le=L[re-1];re-- >0;)L[re]=le,le=m[le];return L}function locateNonHydratedAsyncRoot($){const m=$.subTree.component;if(m)return m.asyncDep&&!m.asyncResolved?m:locateNonHydratedAsyncRoot(m)}const isTeleport=$=>$.__isTeleport,Fragment=Symbol.for("v-fgt"),Text=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock($=!1){blockStack.push(currentBlock=$?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking($){isBlockTreeEnabled+=$}function setupBlock($){return $.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push($),$}function createElementBlock($,m,L,j,ee,re){return setupBlock(createBaseVNode($,m,L,j,ee,re,!0))}function createBlock($,m,L,j,ee){return setupBlock(createVNode($,m,L,j,ee,!0))}function isVNode($){return $?$.__v_isVNode===!0:!1}function isSameVNodeType($,m){return $.type===m.type&&$.key===m.key}const normalizeKey=({key:$})=>$??null,normalizeRef=({ref:$,ref_key:m,ref_for:L})=>(typeof $=="number"&&($=""+$),$!=null?isString$2($)||isRef($)||isFunction$3($)?{i:currentRenderingInstance,r:$,k:m,f:!!L}:$:null);function createBaseVNode($,m=null,L=null,j=0,ee=null,re=$===Fragment?0:1,le=!1,ve=!1){const ye={__v_isVNode:!0,__v_skip:!0,type:$,props:m,key:m&&normalizeKey(m),ref:m&&normalizeRef(m),scopeId:currentScopeId,slotScopeIds:null,children:L,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:re,patchFlag:j,dynamicProps:ee,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return ve?(normalizeChildren(ye,L),re&128&&$.normalize(ye)):L&&(ye.shapeFlag|=isString$2(L)?8:16),isBlockTreeEnabled>0&&!le&&currentBlock&&(ye.patchFlag>0||re&6)&&ye.patchFlag!==32&&currentBlock.push(ye),ye}const createVNode=_createVNode;function _createVNode($,m=null,L=null,j=0,ee=null,re=!1){if((!$||$===NULL_DYNAMIC_COMPONENT)&&($=Comment),isVNode($)){const ve=cloneVNode($,m,!0);return L&&normalizeChildren(ve,L),isBlockTreeEnabled>0&&!re&&currentBlock&&(ve.shapeFlag&6?currentBlock[currentBlock.indexOf($)]=ve:currentBlock.push(ve)),ve.patchFlag|=-2,ve}if(isClassComponent($)&&($=$.__vccOpts),m){m=guardReactiveProps(m);let{class:ve,style:ye}=m;ve&&!isString$2(ve)&&(m.class=normalizeClass(ve)),isObject$4(ye)&&(isProxy(ye)&&!isArray$4(ye)&&(ye=extend$2({},ye)),m.style=normalizeStyle(ye))}const le=isString$2($)?1:isSuspense($)?128:isTeleport($)?64:isObject$4($)?4:isFunction$3($)?2:0;return createBaseVNode($,m,L,j,ee,le,re,!0)}function guardReactiveProps($){return $?isProxy($)||isInternalObject($)?extend$2({},$):$:null}function cloneVNode($,m,L=!1){const{props:j,ref:ee,patchFlag:re,children:le}=$,ve=m?mergeProps(j||{},m):j;return{__v_isVNode:!0,__v_skip:!0,type:$.type,props:ve,key:ve&&normalizeKey(ve),ref:m&&m.ref?L&&ee?isArray$4(ee)?ee.concat(normalizeRef(m)):[ee,normalizeRef(m)]:normalizeRef(m):ee,scopeId:$.scopeId,slotScopeIds:$.slotScopeIds,children:le,target:$.target,targetAnchor:$.targetAnchor,staticCount:$.staticCount,shapeFlag:$.shapeFlag,patchFlag:m&&$.type!==Fragment?re===-1?16:re|16:re,dynamicProps:$.dynamicProps,dynamicChildren:$.dynamicChildren,appContext:$.appContext,dirs:$.dirs,transition:$.transition,component:$.component,suspense:$.suspense,ssContent:$.ssContent&&cloneVNode($.ssContent),ssFallback:$.ssFallback&&cloneVNode($.ssFallback),el:$.el,anchor:$.anchor,ctx:$.ctx,ce:$.ce}}function createTextVNode($=" ",m=0){return createVNode(Text,null,$,m)}function createStaticVNode($,m){const L=createVNode(Static,null,$);return L.staticCount=m,L}function createCommentVNode($="",m=!1){return m?(openBlock(),createBlock(Comment,null,$)):createVNode(Comment,null,$)}function normalizeVNode($){return $==null||typeof $=="boolean"?createVNode(Comment):isArray$4($)?createVNode(Fragment,null,$.slice()):typeof $=="object"?cloneIfMounted($):createVNode(Text,null,String($))}function cloneIfMounted($){return $.el===null&&$.patchFlag!==-1||$.memo?$:cloneVNode($)}function normalizeChildren($,m){let L=0;const{shapeFlag:j}=$;if(m==null)m=null;else if(isArray$4(m))L=16;else if(typeof m=="object")if(j&65){const ee=m.default;ee&&(ee._c&&(ee._d=!1),normalizeChildren($,ee()),ee._c&&(ee._d=!0));return}else{L=32;const ee=m._;!ee&&!isInternalObject(m)?m._ctx=currentRenderingInstance:ee===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?m._=1:(m._=2,$.patchFlag|=1024))}else isFunction$3(m)?(m={default:m,_ctx:currentRenderingInstance},L=32):(m=String(m),j&64?(L=16,m=[createTextVNode(m)]):L=8);$.children=m,$.shapeFlag|=L}function mergeProps(...$){const m={};for(let L=0;L<$.length;L++){const j=$[L];for(const ee in j)if(ee==="class")m.class!==j.class&&(m.class=normalizeClass([m.class,j.class]));else if(ee==="style")m.style=normalizeStyle([m.style,j.style]);else if(isOn(ee)){const re=m[ee],le=j[ee];le&&re!==le&&!(isArray$4(re)&&re.includes(le))&&(m[ee]=re?[].concat(re,le):le)}else ee!==""&&(m[ee]=j[ee])}return m}function invokeVNodeHook($,m,L,j=null){callWithAsyncErrorHandling($,m,7,[L,j])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance($,m,L){const j=$.type,ee=(m?m.appContext:$.appContext)||emptyAppContext,re={uid:uid++,vnode:$,type:j,parent:m,appContext:ee,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:m?m.provides:Object.create(ee.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(j,ee),emitsOptions:normalizeEmitsOptions(j,ee),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:j.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:L,suspenseId:L?L.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return re.ctx={_:re},re.root=m?m.root:re,re.emit=emit.bind(null,re),$.ce&&$.ce(re),re}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance,setInSSRSetupState;{const $=getGlobalThis(),m=(L,j)=>{let ee;return(ee=$[L])||(ee=$[L]=[]),ee.push(j),re=>{ee.length>1?ee.forEach(le=>le(re)):ee[0](re)}};internalSetCurrentInstance=m("__VUE_INSTANCE_SETTERS__",L=>currentInstance=L),setInSSRSetupState=m("__VUE_SSR_SETTERS__",L=>isInSSRComponentSetup=L)}const setCurrentInstance=$=>{const m=currentInstance;return internalSetCurrentInstance($),$.scope.on(),()=>{$.scope.off(),internalSetCurrentInstance(m)}},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent($){return $.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent($,m=!1){m&&setInSSRSetupState(m);const{props:L,children:j}=$.vnode,ee=isStatefulComponent($);initProps($,L,ee,m),initSlots($,j);const re=ee?setupStatefulComponent($,m):void 0;return m&&setInSSRSetupState(!1),re}function setupStatefulComponent($,m){const L=$.type;$.accessCache=Object.create(null),$.proxy=new Proxy($.ctx,PublicInstanceProxyHandlers);const{setup:j}=L;if(j){const ee=$.setupContext=j.length>1?createSetupContext($):null,re=setCurrentInstance($);pauseTracking();const le=callWithErrorHandling(j,$,0,[$.props,ee]);if(resetTracking(),re(),isPromise(le)){if(le.then(unsetCurrentInstance,unsetCurrentInstance),m)return le.then(ve=>{handleSetupResult($,ve,m)}).catch(ve=>{handleError(ve,$,0)});$.asyncDep=le}else handleSetupResult($,le,m)}else finishComponentSetup($,m)}function handleSetupResult($,m,L){isFunction$3(m)?$.type.__ssrInlineRender?$.ssrRender=m:$.render=m:isObject$4(m)&&($.setupState=proxyRefs(m)),finishComponentSetup($,L)}let compile;function finishComponentSetup($,m,L){const j=$.type;if(!$.render){if(!m&&compile&&!j.render){const ee=j.template||resolveMergedOptions($).template;if(ee){const{isCustomElement:re,compilerOptions:le}=$.appContext.config,{delimiters:ve,compilerOptions:ye}=j,Ee=extend$2(extend$2({isCustomElement:re,delimiters:ve},le),ye);j.render=compile(ee,Ee)}}$.render=j.render||NOOP}{const ee=setCurrentInstance($);pauseTracking();try{applyOptions($)}finally{resetTracking(),ee()}}}const attrsProxyHandlers={get($,m){return track($,"get",""),$[m]}};function createSetupContext($){const m=L=>{$.exposed=L||{}};return{attrs:new Proxy($.attrs,attrsProxyHandlers),slots:$.slots,emit:$.emit,expose:m}}function getExposeProxy($){if($.exposed)return $.exposeProxy||($.exposeProxy=new Proxy(proxyRefs(markRaw($.exposed)),{get(m,L){if(L in m)return m[L];if(L in publicPropertiesMap)return publicPropertiesMap[L]($)},has(m,L){return L in m||L in publicPropertiesMap}}))}const classifyRE=/(?:^|[-_])(\w)/g,classify=$=>$.replace(classifyRE,m=>m.toUpperCase()).replace(/[-_]/g,"");function getComponentName($,m=!0){return isFunction$3($)?$.displayName||$.name:$.name||m&&$.__name}function formatComponentName($,m,L=!1){let j=getComponentName(m);if(!j&&m.__file){const ee=m.__file.match(/([^/\\]+)\.\w+$/);ee&&(j=ee[1])}if(!j&&$&&$.parent){const ee=re=>{for(const le in re)if(re[le]===m)return le};j=ee($.components||$.parent.type.components)||ee($.appContext.components)}return j?classify(j):L?"App":"Anonymous"}function isClassComponent($){return isFunction$3($)&&"__vccOpts"in $}const computed=($,m)=>computed$1($,m,isInSSRComponentSetup);function useModel($,m,L=EMPTY_OBJ){const j=getCurrentInstance(),ee=camelize(m),re=hyphenate(m),le=customRef((ye,Ee)=>{let Me;return watchSyncEffect(()=>{const Ce=$[m];hasChanged(Me,Ce)&&(Me=Ce,Ee())}),{get(){return ye(),L.get?L.get(Me):Me},set(Ce){const De=j.vnode.props;!(De&&(m in De||ee in De||re in De)&&(`onUpdate:${m}`in De||`onUpdate:${ee}`in De||`onUpdate:${re}`in De))&&hasChanged(Ce,Me)&&(Me=Ce,Ee()),j.emit(`update:${m}`,L.set?L.set(Ce):Ce)}}}),ve=m==="modelValue"?"modelModifiers":`${m}Modifiers`;return le[Symbol.iterator]=()=>{let ye=0;return{next(){return ye<2?{value:ye++?$[ve]||{}:le,done:!1}:{done:!0}}}},le}function h($,m,L){const j=arguments.length;return j===2?isObject$4(m)&&!isArray$4(m)?isVNode(m)?createVNode($,null,[m]):createVNode($,m):createVNode($,null,m):(j>3?L=Array.prototype.slice.call(arguments,2):j===3&&isVNode(L)&&(L=[L]),createVNode($,m,L))}const version$3="3.4.23";/**
* @vue/runtime-dom v3.4.23
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const svgNS="http://www.w3.org/2000/svg",mathmlNS="http://www.w3.org/1998/Math/MathML",doc$1=typeof document<"u"?document:null,templateContainer=doc$1&&doc$1.createElement("template"),nodeOps={insert:($,m,L)=>{m.insertBefore($,L||null)},remove:$=>{const m=$.parentNode;m&&m.removeChild($)},createElement:($,m,L,j)=>{const ee=m==="svg"?doc$1.createElementNS(svgNS,$):m==="mathml"?doc$1.createElementNS(mathmlNS,$):doc$1.createElement($,L?{is:L}:void 0);return $==="select"&&j&&j.multiple!=null&&ee.setAttribute("multiple",j.multiple),ee},createText:$=>doc$1.createTextNode($),createComment:$=>doc$1.createComment($),setText:($,m)=>{$.nodeValue=m},setElementText:($,m)=>{$.textContent=m},parentNode:$=>$.parentNode,nextSibling:$=>$.nextSibling,querySelector:$=>doc$1.querySelector($),setScopeId($,m){$.setAttribute(m,"")},insertStaticContent($,m,L,j,ee,re){const le=L?L.previousSibling:m.lastChild;if(ee&&(ee===re||ee.nextSibling))for(;m.insertBefore(ee.cloneNode(!0),L),!(ee===re||!(ee=ee.nextSibling)););else{templateContainer.innerHTML=j==="svg"?`<svg>${$}</svg>`:j==="mathml"?`<math>${$}</math>`:$;const ve=templateContainer.content;if(j==="svg"||j==="mathml"){const ye=ve.firstChild;for(;ye.firstChild;)ve.appendChild(ye.firstChild);ve.removeChild(ye)}m.insertBefore(ve,L)}return[le?le.nextSibling:m.firstChild,L?L.previousSibling:m.lastChild]}},TRANSITION="transition",ANIMATION="animation",vtcKey=Symbol("_vtc"),Transition=($,{slots:m})=>h(BaseTransition,resolveTransitionProps($),m);Transition.displayName="Transition";const DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},TransitionPropsValidators=Transition.props=extend$2({},BaseTransitionPropsValidators,DOMTransitionPropsValidators),callHook=($,m=[])=>{isArray$4($)?$.forEach(L=>L(...m)):$&&$(...m)},hasExplicitCallback=$=>$?isArray$4($)?$.some(m=>m.length>1):$.length>1:!1;function resolveTransitionProps($){const m={};for(const mt in $)mt in DOMTransitionPropsValidators||(m[mt]=$[mt]);if($.css===!1)return m;const{name:L="v",type:j,duration:ee,enterFromClass:re=`${L}-enter-from`,enterActiveClass:le=`${L}-enter-active`,enterToClass:ve=`${L}-enter-to`,appearFromClass:ye=re,appearActiveClass:Ee=le,appearToClass:Me=ve,leaveFromClass:Ce=`${L}-leave-from`,leaveActiveClass:De=`${L}-leave-active`,leaveToClass:Be=`${L}-leave-to`}=$,ke=normalizeDuration(ee),Fe=ke&&ke[0],Oe=ke&&ke[1],{onBeforeEnter:Ne,onEnter:ze,onEnterCancelled:$e,onLeave:He,onLeaveCancelled:We,onBeforeAppear:qe=Ne,onAppear:Ye=ze,onAppearCancelled:Ze=$e}=m,Ke=(mt,Et,bt)=>{removeTransitionClass(mt,Et?Me:ve),removeTransitionClass(mt,Et?Ee:le),bt&&bt()},rt=(mt,Et)=>{mt._isLeaving=!1,removeTransitionClass(mt,Ce),removeTransitionClass(mt,Be),removeTransitionClass(mt,De),Et&&Et()},ft=mt=>(Et,bt)=>{const Ct=mt?Ye:ze,st=()=>Ke(Et,mt,bt);callHook(Ct,[Et,st]),nextFrame(()=>{removeTransitionClass(Et,mt?ye:re),addTransitionClass(Et,mt?Me:ve),hasExplicitCallback(Ct)||whenTransitionEnds(Et,j,Fe,st)})};return extend$2(m,{onBeforeEnter(mt){callHook(Ne,[mt]),addTransitionClass(mt,re),addTransitionClass(mt,le)},onBeforeAppear(mt){callHook(qe,[mt]),addTransitionClass(mt,ye),addTransitionClass(mt,Ee)},onEnter:ft(!1),onAppear:ft(!0),onLeave(mt,Et){mt._isLeaving=!0;const bt=()=>rt(mt,Et);addTransitionClass(mt,Ce),forceReflow(),addTransitionClass(mt,De),nextFrame(()=>{mt._isLeaving&&(removeTransitionClass(mt,Ce),addTransitionClass(mt,Be),hasExplicitCallback(He)||whenTransitionEnds(mt,j,Oe,bt))}),callHook(He,[mt,bt])},onEnterCancelled(mt){Ke(mt,!1),callHook($e,[mt])},onAppearCancelled(mt){Ke(mt,!0),callHook(Ze,[mt])},onLeaveCancelled(mt){rt(mt),callHook(We,[mt])}})}function normalizeDuration($){if($==null)return null;if(isObject$4($))return[NumberOf($.enter),NumberOf($.leave)];{const m=NumberOf($);return[m,m]}}function NumberOf($){return toNumber$1($)}function addTransitionClass($,m){m.split(/\s+/).forEach(L=>L&&$.classList.add(L)),($[vtcKey]||($[vtcKey]=new Set)).add(m)}function removeTransitionClass($,m){m.split(/\s+/).forEach(j=>j&&$.classList.remove(j));const L=$[vtcKey];L&&(L.delete(m),L.size||($[vtcKey]=void 0))}function nextFrame($){requestAnimationFrame(()=>{requestAnimationFrame($)})}let endId=0;function whenTransitionEnds($,m,L,j){const ee=$._endId=++endId,re=()=>{ee===$._endId&&j()};if(L)return setTimeout(re,L);const{type:le,timeout:ve,propCount:ye}=getTransitionInfo($,m);if(!le)return j();const Ee=le+"end";let Me=0;const Ce=()=>{$.removeEventListener(Ee,De),re()},De=Be=>{Be.target===$&&++Me>=ye&&Ce()};setTimeout(()=>{Me<ye&&Ce()},ve+1),$.addEventListener(Ee,De)}function getTransitionInfo($,m){const L=window.getComputedStyle($),j=ke=>(L[ke]||"").split(", "),ee=j(`${TRANSITION}Delay`),re=j(`${TRANSITION}Duration`),le=getTimeout(ee,re),ve=j(`${ANIMATION}Delay`),ye=j(`${ANIMATION}Duration`),Ee=getTimeout(ve,ye);let Me=null,Ce=0,De=0;m===TRANSITION?le>0&&(Me=TRANSITION,Ce=le,De=re.length):m===ANIMATION?Ee>0&&(Me=ANIMATION,Ce=Ee,De=ye.length):(Ce=Math.max(le,Ee),Me=Ce>0?le>Ee?TRANSITION:ANIMATION:null,De=Me?Me===TRANSITION?re.length:ye.length:0);const Be=Me===TRANSITION&&/\b(transform|all)(,|$)/.test(j(`${TRANSITION}Property`).toString());return{type:Me,timeout:Ce,propCount:De,hasTransform:Be}}function getTimeout($,m){for(;$.length<m.length;)$=$.concat($);return Math.max(...m.map((L,j)=>toMs(L)+toMs($[j])))}function toMs($){return $==="auto"?0:Number($.slice(0,-1).replace(",","."))*1e3}function forceReflow(){return document.body.offsetHeight}function patchClass($,m,L){const j=$[vtcKey];j&&(m=(m?[m,...j]:[...j]).join(" ")),m==null?$.removeAttribute("class"):L?$.setAttribute("class",m):$.className=m}const vShowOriginalDisplay=Symbol("_vod"),vShowHidden=Symbol("_vsh"),CSS_VAR_TEXT=Symbol(""),displayRE=/(^|;)\s*display\s*:/;function patchStyle($,m,L){const j=$.style,ee=isString$2(L);let re=!1;if(L&&!ee){if(m)if(isString$2(m))for(const le of m.split(";")){const ve=le.slice(0,le.indexOf(":")).trim();L[ve]==null&&setStyle(j,ve,"")}else for(const le in m)L[le]==null&&setStyle(j,le,"");for(const le in L)le==="display"&&(re=!0),setStyle(j,le,L[le])}else if(ee){if(m!==L){const le=j[CSS_VAR_TEXT];le&&(L+=";"+le),j.cssText=L,re=displayRE.test(L)}}else m&&$.removeAttribute("style");vShowOriginalDisplay in $&&($[vShowOriginalDisplay]=re?j.display:"",$[vShowHidden]&&(j.display="none"))}const importantRE=/\s*!important$/;function setStyle($,m,L){if(isArray$4(L))L.forEach(j=>setStyle($,m,j));else if(L==null&&(L=""),m.startsWith("--"))$.setProperty(m,L);else{const j=autoPrefix($,m);importantRE.test(L)?$.setProperty(hyphenate(j),L.replace(importantRE,""),"important"):$[j]=L}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix($,m){const L=prefixCache[m];if(L)return L;let j=camelize(m);if(j!=="filter"&&j in $)return prefixCache[m]=j;j=capitalize(j);for(let ee=0;ee<prefixes.length;ee++){const re=prefixes[ee]+j;if(re in $)return prefixCache[m]=re}return m}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr($,m,L,j,ee){if(j&&m.startsWith("xlink:"))L==null?$.removeAttributeNS(xlinkNS,m.slice(6,m.length)):$.setAttributeNS(xlinkNS,m,L);else{const re=isSpecialBooleanAttr(m);L==null||re&&!includeBooleanAttr(L)?$.removeAttribute(m):$.setAttribute(m,re?"":L)}}function patchDOMProp($,m,L,j,ee,re,le){if(m==="innerHTML"||m==="textContent"){j&&le(j,ee,re),$[m]=L??"";return}const ve=$.tagName;if(m==="value"&&ve!=="PROGRESS"&&!ve.includes("-")){const Ee=ve==="OPTION"?$.getAttribute("value")||"":$.value,Me=L??"";(Ee!==Me||!("_value"in $))&&($.value=Me),L==null&&$.removeAttribute(m),$._value=L;return}let ye=!1;if(L===""||L==null){const Ee=typeof $[m];Ee==="boolean"?L=includeBooleanAttr(L):L==null&&Ee==="string"?(L="",ye=!0):Ee==="number"&&(L=0,ye=!0)}try{$[m]=L}catch{}ye&&$.removeAttribute(m)}function addEventListener($,m,L,j){$.addEventListener(m,L,j)}function removeEventListener($,m,L,j){$.removeEventListener(m,L,j)}const veiKey=Symbol("_vei");function patchEvent($,m,L,j,ee=null){const re=$[veiKey]||($[veiKey]={}),le=re[m];if(j&&le)le.value=j;else{const[ve,ye]=parseName(m);if(j){const Ee=re[m]=createInvoker(j,ee);addEventListener($,ve,Ee,ye)}else le&&(removeEventListener($,ve,le,ye),re[m]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName($){let m;if(optionsModifierRE.test($)){m={};let j;for(;j=$.match(optionsModifierRE);)$=$.slice(0,$.length-j[0].length),m[j[0].toLowerCase()]=!0}return[$[2]===":"?$.slice(3):hyphenate($.slice(2)),m]}let cachedNow=0;const p$2=Promise.resolve(),getNow=()=>cachedNow||(p$2.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker($,m){const L=j=>{if(!j._vts)j._vts=Date.now();else if(j._vts<=L.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(j,L.value),m,5,[j])};return L.value=$,L.attached=getNow(),L}function patchStopImmediatePropagation($,m){if(isArray$4(m)){const L=$.stopImmediatePropagation;return $.stopImmediatePropagation=()=>{L.call($),$._stopped=!0},m.map(j=>ee=>!ee._stopped&&j&&j(ee))}else return m}const isNativeOn=$=>$.charCodeAt(0)===111&&$.charCodeAt(1)===110&&$.charCodeAt(2)>96&&$.charCodeAt(2)<123,patchProp=($,m,L,j,ee,re,le,ve,ye)=>{const Ee=ee==="svg";m==="class"?patchClass($,j,Ee):m==="style"?patchStyle($,L,j):isOn(m)?isModelListener(m)||patchEvent($,m,L,j,le):(m[0]==="."?(m=m.slice(1),!0):m[0]==="^"?(m=m.slice(1),!1):shouldSetAsProp($,m,j,Ee))?patchDOMProp($,m,j,re,le,ve,ye):(m==="true-value"?$._trueValue=j:m==="false-value"&&($._falseValue=j),patchAttr($,m,j,Ee))};function shouldSetAsProp($,m,L,j){if(j)return!!(m==="innerHTML"||m==="textContent"||m in $&&isNativeOn(m)&&isFunction$3(L));if(m==="spellcheck"||m==="draggable"||m==="translate"||m==="form"||m==="list"&&$.tagName==="INPUT"||m==="type"&&$.tagName==="TEXTAREA")return!1;if(m==="width"||m==="height"){const ee=$.tagName;if(ee==="IMG"||ee==="VIDEO"||ee==="CANVAS"||ee==="SOURCE")return!1}return isNativeOn(m)&&isString$2(L)?!1:m in $}const positionMap=new WeakMap,newPositionMap=new WeakMap,moveCbKey=Symbol("_moveCb"),enterCbKey=Symbol("_enterCb"),TransitionGroupImpl={name:"TransitionGroup",props:extend$2({},TransitionPropsValidators,{tag:String,moveClass:String}),setup($,{slots:m}){const L=getCurrentInstance(),j=useTransitionState();let ee,re;return onUpdated(()=>{if(!ee.length)return;const le=$.moveClass||`${$.name||"v"}-move`;if(!hasCSSTransform(ee[0].el,L.vnode.el,le))return;ee.forEach(callPendingCbs),ee.forEach(recordPosition);const ve=ee.filter(applyTranslation);forceReflow(),ve.forEach(ye=>{const Ee=ye.el,Me=Ee.style;addTransitionClass(Ee,le),Me.transform=Me.webkitTransform=Me.transitionDuration="";const Ce=Ee[moveCbKey]=De=>{De&&De.target!==Ee||(!De||/transform$/.test(De.propertyName))&&(Ee.removeEventListener("transitionend",Ce),Ee[moveCbKey]=null,removeTransitionClass(Ee,le))};Ee.addEventListener("transitionend",Ce)})}),()=>{const le=toRaw($),ve=resolveTransitionProps(le);let ye=le.tag||Fragment;if(ee=[],re)for(let Ee=0;Ee<re.length;Ee++){const Me=re[Ee];Me.el&&Me.el instanceof Element&&(ee.push(Me),setTransitionHooks(Me,resolveTransitionHooks(Me,ve,j,L)),positionMap.set(Me,Me.el.getBoundingClientRect()))}re=m.default?getTransitionRawChildren(m.default()):[];for(let Ee=0;Ee<re.length;Ee++){const Me=re[Ee];Me.key!=null&&setTransitionHooks(Me,resolveTransitionHooks(Me,ve,j,L))}return createVNode(ye,null,re)}}},removeMode=$=>delete $.mode;TransitionGroupImpl.props;const TransitionGroup=TransitionGroupImpl;function callPendingCbs($){const m=$.el;m[moveCbKey]&&m[moveCbKey](),m[enterCbKey]&&m[enterCbKey]()}function recordPosition($){newPositionMap.set($,$.el.getBoundingClientRect())}function applyTranslation($){const m=positionMap.get($),L=newPositionMap.get($),j=m.left-L.left,ee=m.top-L.top;if(j||ee){const re=$.el.style;return re.transform=re.webkitTransform=`translate(${j}px,${ee}px)`,re.transitionDuration="0s",$}}function hasCSSTransform($,m,L){const j=$.cloneNode(),ee=$[vtcKey];ee&&ee.forEach(ve=>{ve.split(/\s+/).forEach(ye=>ye&&j.classList.remove(ye))}),L.split(/\s+/).forEach(ve=>ve&&j.classList.add(ve)),j.style.display="none";const re=m.nodeType===1?m:m.parentNode;re.appendChild(j);const{hasTransform:le}=getTransitionInfo(j);return re.removeChild(j),le}const getModelAssigner=$=>{const m=$.props["onUpdate:modelValue"]||!1;return isArray$4(m)?L=>invokeArrayFns(m,L):m};function onCompositionStart($){$.target.composing=!0}function onCompositionEnd($){const m=$.target;m.composing&&(m.composing=!1,m.dispatchEvent(new Event("input")))}const assignKey=Symbol("_assign"),vModelText={created($,{modifiers:{lazy:m,trim:L,number:j}},ee){$[assignKey]=getModelAssigner(ee);const re=j||ee.props&&ee.props.type==="number";addEventListener($,m?"change":"input",le=>{if(le.target.composing)return;let ve=$.value;L&&(ve=ve.trim()),re&&(ve=looseToNumber(ve)),$[assignKey](ve)}),L&&addEventListener($,"change",()=>{$.value=$.value.trim()}),m||(addEventListener($,"compositionstart",onCompositionStart),addEventListener($,"compositionend",onCompositionEnd),addEventListener($,"change",onCompositionEnd))},mounted($,{value:m}){$.value=m??""},beforeUpdate($,{value:m,modifiers:{lazy:L,trim:j,number:ee}},re){if($[assignKey]=getModelAssigner(re),$.composing)return;const le=(ee||$.type==="number")&&!/^0\d/.test($.value)?looseToNumber($.value):$.value,ve=m??"";le!==ve&&(document.activeElement===$&&$.type!=="range"&&(L||j&&$.value.trim()===ve)||($.value=ve))}},vModelCheckbox={deep:!0,created($,m,L){$[assignKey]=getModelAssigner(L),addEventListener($,"change",()=>{const j=$._modelValue,ee=getValue($),re=$.checked,le=$[assignKey];if(isArray$4(j)){const ve=looseIndexOf(j,ee),ye=ve!==-1;if(re&&!ye)le(j.concat(ee));else if(!re&&ye){const Ee=[...j];Ee.splice(ve,1),le(Ee)}}else if(isSet$1(j)){const ve=new Set(j);re?ve.add(ee):ve.delete(ee),le(ve)}else le(getCheckboxValue($,re))})},mounted:setChecked,beforeUpdate($,m,L){$[assignKey]=getModelAssigner(L),setChecked($,m,L)}};function setChecked($,{value:m,oldValue:L},j){$._modelValue=m,isArray$4(m)?$.checked=looseIndexOf(m,j.props.value)>-1:isSet$1(m)?$.checked=m.has(j.props.value):m!==L&&($.checked=looseEqual(m,getCheckboxValue($,!0)))}const vModelRadio={created($,{value:m},L){$.checked=looseEqual(m,L.props.value),$[assignKey]=getModelAssigner(L),addEventListener($,"change",()=>{$[assignKey](getValue($))})},beforeUpdate($,{value:m,oldValue:L},j){$[assignKey]=getModelAssigner(j),m!==L&&($.checked=looseEqual(m,j.props.value))}},vModelSelect={deep:!0,created($,{value:m,modifiers:{number:L}},j){const ee=isSet$1(m);addEventListener($,"change",()=>{const re=Array.prototype.filter.call($.options,le=>le.selected).map(le=>L?looseToNumber(getValue(le)):getValue(le));$[assignKey]($.multiple?ee?new Set(re):re:re[0]),$._assigning=!0,nextTick(()=>{$._assigning=!1})}),$[assignKey]=getModelAssigner(j)},mounted($,{value:m,modifiers:{number:L}}){setSelected($,m)},beforeUpdate($,m,L){$[assignKey]=getModelAssigner(L)},updated($,{value:m,modifiers:{number:L}}){$._assigning||setSelected($,m)}};function setSelected($,m,L){const j=$.multiple,ee=isArray$4(m);if(!(j&&!ee&&!isSet$1(m))){for(let re=0,le=$.options.length;re<le;re++){const ve=$.options[re],ye=getValue(ve);if(j)if(ee){const Ee=typeof ye;Ee==="string"||Ee==="number"?ve.selected=m.some(Me=>String(Me)===String(ye)):ve.selected=looseIndexOf(m,ye)>-1}else ve.selected=m.has(ye);else if(looseEqual(getValue(ve),m)){$.selectedIndex!==re&&($.selectedIndex=re);return}}!j&&$.selectedIndex!==-1&&($.selectedIndex=-1)}}function getValue($){return"_value"in $?$._value:$.value}function getCheckboxValue($,m){const L=m?"_trueValue":"_falseValue";return L in $?$[L]:m}const vModelDynamic={created($,m,L){callModelHook($,m,L,null,"created")},mounted($,m,L){callModelHook($,m,L,null,"mounted")},beforeUpdate($,m,L,j){callModelHook($,m,L,j,"beforeUpdate")},updated($,m,L,j){callModelHook($,m,L,j,"updated")}};function resolveDynamicModel($,m){switch($){case"SELECT":return vModelSelect;case"TEXTAREA":return vModelText;default:switch(m){case"checkbox":return vModelCheckbox;case"radio":return vModelRadio;default:return vModelText}}}function callModelHook($,m,L,j,ee){const le=resolveDynamicModel($.tagName,L.props&&L.props.type)[ee];le&&le($,m,L,j)}const rendererOptions=extend$2({patchProp},nodeOps);let renderer,enabledHydration=!1;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}function ensureHydrationRenderer(){return renderer=enabledHydration?renderer:createHydrationRenderer(rendererOptions),enabledHydration=!0,renderer}const createApp=(...$)=>{const m=ensureRenderer().createApp(...$),{mount:L}=m;return m.mount=j=>{const ee=normalizeContainer(j);if(!ee)return;const re=m._component;!isFunction$3(re)&&!re.render&&!re.template&&(re.template=ee.innerHTML),ee.innerHTML="";const le=L(ee,!1,resolveRootNamespace(ee));return ee instanceof Element&&(ee.removeAttribute("v-cloak"),ee.setAttribute("data-v-app","")),le},m},createSSRApp=(...$)=>{const m=ensureHydrationRenderer().createApp(...$),{mount:L}=m;return m.mount=j=>{const ee=normalizeContainer(j);if(ee)return L(ee,!0,resolveRootNamespace(ee))},m};function resolveRootNamespace($){if($ instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&$ instanceof MathMLElement)return"mathml"}function normalizeContainer($){return isString$2($)?document.querySelector($):$}const suspectProtoRx=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,suspectConstructorRx=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,JsonSigRx=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function jsonParseTransform($,m){if($==="__proto__"||$==="constructor"&&m&&typeof m=="object"&&"prototype"in m){warnKeyDropped($);return}return m}function warnKeyDropped($){console.warn(`[destr] Dropping "${$}" key to prevent prototype pollution.`)}function destr($,m={}){if(typeof $!="string")return $;const L=$.trim();if($[0]==='"'&&$.endsWith('"')&&!$.includes("\\"))return L.slice(1,-1);if(L.length<=9){const j=L.toLowerCase();if(j==="true")return!0;if(j==="false")return!1;if(j==="undefined")return;if(j==="null")return null;if(j==="nan")return Number.NaN;if(j==="infinity")return Number.POSITIVE_INFINITY;if(j==="-infinity")return Number.NEGATIVE_INFINITY}if(!JsonSigRx.test($)){if(m.strict)throw new SyntaxError("[destr] Invalid JSON");return $}try{if(suspectProtoRx.test($)||suspectConstructorRx.test($)){if(m.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse($,jsonParseTransform)}return JSON.parse($)}catch(j){if(m.strict)throw j;return $}}const HASH_RE$1=/#/g,AMPERSAND_RE$1=/&/g,SLASH_RE$1=/\//g,EQUAL_RE$1=/=/g,PLUS_RE$1=/\+/g,ENC_CARET_RE$1=/%5e/gi,ENC_BACKTICK_RE$1=/%60/gi,ENC_PIPE_RE$1=/%7c/gi,ENC_SPACE_RE$1=/%20/gi;function encode$1($){return encodeURI(""+$).replace(ENC_PIPE_RE$1,"|")}function encodeQueryValue$1($){return encode$1(typeof $=="string"?$:JSON.stringify($)).replace(PLUS_RE$1,"%2B").replace(ENC_SPACE_RE$1,"+").replace(HASH_RE$1,"%23").replace(AMPERSAND_RE$1,"%26").replace(ENC_BACKTICK_RE$1,"`").replace(ENC_CARET_RE$1,"^").replace(SLASH_RE$1,"%2F")}function encodeQueryKey$1($){return encodeQueryValue$1($).replace(EQUAL_RE$1,"%3D")}function decode$1($=""){try{return decodeURIComponent(""+$)}catch{return""+$}}function decodeQueryKey($){return decode$1($.replace(PLUS_RE$1," "))}function decodeQueryValue($){return decode$1($.replace(PLUS_RE$1," "))}function parseQuery$1($=""){const m={};$[0]==="?"&&($=$.slice(1));for(const L of $.split("&")){const j=L.match(/([^=]+)=?(.*)/)||[];if(j.length<2)continue;const ee=decodeQueryKey(j[1]);if(ee==="__proto__"||ee==="constructor")continue;const re=decodeQueryValue(j[2]||"");m[ee]===void 0?m[ee]=re:Array.isArray(m[ee])?m[ee].push(re):m[ee]=[m[ee],re]}return m}function encodeQueryItem($,m){return(typeof m=="number"||typeof m=="boolean")&&(m=String(m)),m?Array.isArray(m)?m.map(L=>`${encodeQueryKey$1($)}=${encodeQueryValue$1(L)}`).join("&"):`${encodeQueryKey$1($)}=${encodeQueryValue$1(m)}`:encodeQueryKey$1($)}function stringifyQuery$1($){return Object.keys($).filter(m=>$[m]!==void 0).map(m=>encodeQueryItem(m,$[m])).filter(Boolean).join("&")}const PROTOCOL_STRICT_REGEX=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,PROTOCOL_REGEX=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,PROTOCOL_RELATIVE_REGEX=/^([/\\]\s*){2,}[^/\\]/,PROTOCOL_SCRIPT_RE=/^[\s\0]*(blob|data|javascript|vbscript):$/i,TRAILING_SLASH_RE$1=/\/$|\/\?|\/#/,JOIN_LEADING_SLASH_RE=/^\.?\//;function hasProtocol($,m={}){return typeof m=="boolean"&&(m={acceptRelative:m}),m.strict?PROTOCOL_STRICT_REGEX.test($):PROTOCOL_REGEX.test($)||(m.acceptRelative?PROTOCOL_RELATIVE_REGEX.test($):!1)}function isScriptProtocol($){return!!$&&PROTOCOL_SCRIPT_RE.test($)}function hasTrailingSlash($="",m){return m?TRAILING_SLASH_RE$1.test($):$.endsWith("/")}function withoutTrailingSlash($="",m){if(!m)return(hasTrailingSlash($)?$.slice(0,-1):$)||"/";if(!hasTrailingSlash($,!0))return $||"/";let L=$,j="";const ee=$.indexOf("#");ee>=0&&(L=$.slice(0,ee),j=$.slice(ee));const[re,...le]=L.split("?");return((re.endsWith("/")?re.slice(0,-1):re)||"/")+(le.length>0?`?${le.join("?")}`:"")+j}function withTrailingSlash($="",m){if(!m)return $.endsWith("/")?$:$+"/";if(hasTrailingSlash($,!0))return $||"/";let L=$,j="";const ee=$.indexOf("#");if(ee>=0&&(L=$.slice(0,ee),j=$.slice(ee),!L))return j;const[re,...le]=L.split("?");return re+"/"+(le.length>0?`?${le.join("?")}`:"")+j}function hasLeadingSlash($=""){return $.startsWith("/")}function withLeadingSlash($=""){return hasLeadingSlash($)?$:"/"+$}function withBase($,m){if(isEmptyURL(m)||hasProtocol($))return $;const L=withoutTrailingSlash(m);return $.startsWith(L)?$:joinURL(L,$)}function withoutBase($,m){if(isEmptyURL(m))return $;const L=withoutTrailingSlash(m);if(!$.startsWith(L))return $;const j=$.slice(L.length);return j[0]==="/"?j:"/"+j}function withQuery($,m){const L=parseURL$1($),j={...parseQuery$1(L.search),...m};return L.search=stringifyQuery$1(j),stringifyParsedURL(L)}function isEmptyURL($){return!$||$==="/"}function isNonEmptyURL($){return $&&$!=="/"}function joinURL($,...m){let L=$||"";for(const j of m.filter(ee=>isNonEmptyURL(ee)))if(L){const ee=j.replace(JOIN_LEADING_SLASH_RE,"");L=withTrailingSlash(L)+ee}else L=j;return L}function joinRelativeURL(...$){var le,ve,ye,Ee;const m=/\/(?!\/)/,L=$.filter(Boolean),j=[];let ee=0;for(const Me of L)if(!(!Me||Me==="/")){for(const[Ce,De]of Me.split(m).entries())if(!(!De||De===".")){if(De===".."){if(j.length===1&&hasProtocol(j[0]))continue;j.pop(),ee--;continue}if(Ce===1&&((le=j[j.length-1])!=null&&le.endsWith(":/"))){j[j.length-1]+="/"+De;continue}j.push(De),ee++}}let re=j.join("/");return ee>=0?(ve=L[0])!=null&&ve.startsWith("/")&&!re.startsWith("/")?re="/"+re:(ye=L[0])!=null&&ye.startsWith("./")&&!re.startsWith("./")&&(re="./"+re):re="../".repeat(-1*ee)+re,(Ee=L[L.length-1])!=null&&Ee.endsWith("/")&&!re.endsWith("/")&&(re+="/"),re}function isEqual$1($,m,L={}){return L.trailingSlash||($=withTrailingSlash($),m=withTrailingSlash(m)),L.leadingSlash||($=withLeadingSlash($),m=withLeadingSlash(m)),L.encoding||($=decode$1($),m=decode$1(m)),$===m}const protocolRelative=Symbol.for("ufo:protocolRelative");function parseURL$1($="",m){const L=$.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(L){const[,Ce,De=""]=L;return{protocol:Ce.toLowerCase(),pathname:De,href:Ce+De,auth:"",host:"",search:"",hash:""}}if(!hasProtocol($,{acceptRelative:!0}))return m?parseURL$1(m+$):parsePath($);const[,j="",ee,re=""]=$.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[],[,le="",ve=""]=re.match(/([^#/?]*)(.*)?/)||[],{pathname:ye,search:Ee,hash:Me}=parsePath(ve.replace(/\/(?=[A-Za-z]:)/,""));return{protocol:j.toLowerCase(),auth:ee?ee.slice(0,Math.max(0,ee.length-1)):"",host:le,pathname:ye,search:Ee,hash:Me,[protocolRelative]:!j}}function parsePath($=""){const[m="",L="",j=""]=($.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:m,search:L,hash:j}}function stringifyParsedURL($){const m=$.pathname||"",L=$.search?($.search.startsWith("?")?"":"?")+$.search:"",j=$.hash||"",ee=$.auth?$.auth+"@":"",re=$.host||"";return($.protocol||$[protocolRelative]?($.protocol||"")+"//":"")+ee+re+m+L+j}class FetchError extends Error{constructor(m,L){super(m,L),this.name="FetchError",L!=null&&L.cause&&!this.cause&&(this.cause=L.cause)}}function createFetchError($){var ye,Ee,Me,Ce,De;const m=((ye=$.error)==null?void 0:ye.message)||((Ee=$.error)==null?void 0:Ee.toString())||"",L=((Me=$.request)==null?void 0:Me.method)||((Ce=$.options)==null?void 0:Ce.method)||"GET",j=((De=$.request)==null?void 0:De.url)||String($.request)||"/",ee=`[${L}] ${JSON.stringify(j)}`,re=$.response?`${$.response.status} ${$.response.statusText}`:"<no response>",le=`${ee}: ${re}${m?` ${m}`:""}`,ve=new FetchError(le,$.error?{cause:$.error}:void 0);for(const Be of["request","options","response"])Object.defineProperty(ve,Be,{get(){return $[Be]}});for(const[Be,ke]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(ve,Be,{get(){return $.response&&$.response[ke]}});return ve}const payloadMethods=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function isPayloadMethod($="GET"){return payloadMethods.has($.toUpperCase())}function isJSONSerializable($){if($===void 0)return!1;const m=typeof $;return m==="string"||m==="number"||m==="boolean"||m===null?!0:m!=="object"?!1:Array.isArray($)?!0:$.buffer?!1:$.constructor&&$.constructor.name==="Object"||typeof $.toJSON=="function"}const textTypes=new Set(["image/svg","application/xml","application/xhtml","application/html"]),JSON_RE=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function detectResponseType($=""){if(!$)return"json";const m=$.split(";").shift()||"";return JSON_RE.test(m)?"json":textTypes.has(m)||m.startsWith("text/")?"text":"blob"}function mergeFetchOptions($,m,L=globalThis.Headers){const j={...m,...$};if(m!=null&&m.params&&($!=null&&$.params)&&(j.params={...m==null?void 0:m.params,...$==null?void 0:$.params}),m!=null&&m.query&&($!=null&&$.query)&&(j.query={...m==null?void 0:m.query,...$==null?void 0:$.query}),m!=null&&m.headers&&($!=null&&$.headers)){j.headers=new L((m==null?void 0:m.headers)||{});for(const[ee,re]of new L(($==null?void 0:$.headers)||{}))j.headers.set(ee,re)}return j}const retryStatusCodes=new Set([408,409,425,429,500,502,503,504]),nullBodyResponses=new Set([101,204,205,304]);function createFetch($={}){const{fetch:m=globalThis.fetch,Headers:L=globalThis.Headers,AbortController:j=globalThis.AbortController}=$;async function ee(ve){const ye=ve.error&&ve.error.name==="AbortError"&&!ve.options.timeout||!1;if(ve.options.retry!==!1&&!ye){let Me;typeof ve.options.retry=="number"?Me=ve.options.retry:Me=isPayloadMethod(ve.options.method)?0:1;const Ce=ve.response&&ve.response.status||500;if(Me>0&&(Array.isArray(ve.options.retryStatusCodes)?ve.options.retryStatusCodes.includes(Ce):retryStatusCodes.has(Ce))){const De=ve.options.retryDelay||0;return De>0&&await new Promise(Be=>setTimeout(Be,De)),re(ve.request,{...ve.options,retry:Me-1})}}const Ee=createFetchError(ve);throw Error.captureStackTrace&&Error.captureStackTrace(Ee,re),Ee}const re=async function(ye,Ee={}){var Be;const Me={request:ye,options:mergeFetchOptions(Ee,$.defaults,L),response:void 0,error:void 0};Me.options.method=(Be=Me.options.method)==null?void 0:Be.toUpperCase(),Me.options.onRequest&&await Me.options.onRequest(Me),typeof Me.request=="string"&&(Me.options.baseURL&&(Me.request=withBase(Me.request,Me.options.baseURL)),(Me.options.query||Me.options.params)&&(Me.request=withQuery(Me.request,{...Me.options.params,...Me.options.query}))),Me.options.body&&isPayloadMethod(Me.options.method)&&(isJSONSerializable(Me.options.body)?(Me.options.body=typeof Me.options.body=="string"?Me.options.body:JSON.stringify(Me.options.body),Me.options.headers=new L(Me.options.headers||{}),Me.options.headers.has("content-type")||Me.options.headers.set("content-type","application/json"),Me.options.headers.has("accept")||Me.options.headers.set("accept","application/json")):("pipeTo"in Me.options.body&&typeof Me.options.body.pipeTo=="function"||typeof Me.options.body.pipe=="function")&&("duplex"in Me.options||(Me.options.duplex="half")));let Ce;if(!Me.options.signal&&Me.options.timeout){const ke=new j;Ce=setTimeout(()=>ke.abort(),Me.options.timeout),Me.options.signal=ke.signal}try{Me.response=await m(Me.request,Me.options)}catch(ke){return Me.error=ke,Me.options.onRequestError&&await Me.options.onRequestError(Me),await ee(Me)}finally{Ce&&clearTimeout(Ce)}if(Me.response.body&&!nullBodyResponses.has(Me.response.status)&&Me.options.method!=="HEAD"){const ke=(Me.options.parseResponse?"json":Me.options.responseType)||detectResponseType(Me.response.headers.get("content-type")||"");switch(ke){case"json":{const Fe=await Me.response.text(),Oe=Me.options.parseResponse||destr;Me.response._data=Oe(Fe);break}case"stream":{Me.response._data=Me.response.body;break}default:Me.response._data=await Me.response[ke]()}}return Me.options.onResponse&&await Me.options.onResponse(Me),!Me.options.ignoreResponseError&&Me.response.status>=400&&Me.response.status<600?(Me.options.onResponseError&&await Me.options.onResponseError(Me),await ee(Me)):Me.response},le=async function(ye,Ee){return(await re(ye,Ee))._data};return le.raw=re,le.native=(...ve)=>m(...ve),le.create=(ve={})=>createFetch({...$,defaults:{...$.defaults,...ve}}),le}const _globalThis$1=function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}(),fetch$1=_globalThis$1.fetch||(()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!"))),Headers$1=_globalThis$1.Headers,AbortController=_globalThis$1.AbortController,ofetch=createFetch({fetch:fetch$1,Headers:Headers$1,AbortController}),$fetch$1=ofetch,useRuntimeConfig$1=()=>{var $;return(($=window==null?void 0:window.__NUXT__)==null?void 0:$.config)||{}},appConfig=useRuntimeConfig$1().app,baseURL=()=>appConfig.baseURL,buildAssetsDir=()=>appConfig.buildAssetsDir,buildAssetsURL=(...$)=>joinRelativeURL(publicAssetsURL(),buildAssetsDir(),...$),publicAssetsURL=(...$)=>{const m=appConfig.cdnURL||appConfig.baseURL;return $.length?joinRelativeURL(m,...$):m};globalThis.__buildAssetsURL=buildAssetsURL,globalThis.__publicAssetsURL=publicAssetsURL;globalThis.$fetch||(globalThis.$fetch=$fetch$1.create({baseURL:baseURL()}));function flatHooks($,m={},L){for(const j in $){const ee=$[j],re=L?`${L}:${j}`:j;typeof ee=="object"&&ee!==null?flatHooks(ee,m,re):typeof ee=="function"&&(m[re]=ee)}return m}const defaultTask={run:$=>$()},_createTask=()=>defaultTask,createTask=typeof console.createTask<"u"?console.createTask:_createTask;function serialTaskCaller($,m){const L=m.shift(),j=createTask(L);return $.reduce((ee,re)=>ee.then(()=>j.run(()=>re(...m))),Promise.resolve())}function parallelTaskCaller($,m){const L=m.shift(),j=createTask(L);return Promise.all($.map(ee=>j.run(()=>ee(...m))))}function callEachWith($,m){for(const L of[...$])L(m)}class Hookable{constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(m,L,j={}){if(!m||typeof L!="function")return()=>{};const ee=m;let re;for(;this._deprecatedHooks[m];)re=this._deprecatedHooks[m],m=re.to;if(re&&!j.allowDeprecated){let le=re.message;le||(le=`${ee} hook has been deprecated`+(re.to?`, please use ${re.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(le)||(console.warn(le),this._deprecatedMessages.add(le))}if(!L.name)try{Object.defineProperty(L,"name",{get:()=>"_"+m.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[m]=this._hooks[m]||[],this._hooks[m].push(L),()=>{L&&(this.removeHook(m,L),L=void 0)}}hookOnce(m,L){let j,ee=(...re)=>(typeof j=="function"&&j(),j=void 0,ee=void 0,L(...re));return j=this.hook(m,ee),j}removeHook(m,L){if(this._hooks[m]){const j=this._hooks[m].indexOf(L);j!==-1&&this._hooks[m].splice(j,1),this._hooks[m].length===0&&delete this._hooks[m]}}deprecateHook(m,L){this._deprecatedHooks[m]=typeof L=="string"?{to:L}:L;const j=this._hooks[m]||[];delete this._hooks[m];for(const ee of j)this.hook(m,ee)}deprecateHooks(m){Object.assign(this._deprecatedHooks,m);for(const L in m)this.deprecateHook(L,m[L])}addHooks(m){const L=flatHooks(m),j=Object.keys(L).map(ee=>this.hook(ee,L[ee]));return()=>{for(const ee of j.splice(0,j.length))ee()}}removeHooks(m){const L=flatHooks(m);for(const j in L)this.removeHook(j,L[j])}removeAllHooks(){for(const m in this._hooks)delete this._hooks[m]}callHook(m,...L){return L.unshift(m),this.callHookWith(serialTaskCaller,m,...L)}callHookParallel(m,...L){return L.unshift(m),this.callHookWith(parallelTaskCaller,m,...L)}callHookWith(m,L,...j){const ee=this._before||this._after?{name:L,args:j,context:{}}:void 0;this._before&&callEachWith(this._before,ee);const re=m(L in this._hooks?[...this._hooks[L]]:[],j);return re instanceof Promise?re.finally(()=>{this._after&&ee&&callEachWith(this._after,ee)}):(this._after&&ee&&callEachWith(this._after,ee),re)}beforeEach(m){return this._before=this._before||[],this._before.push(m),()=>{if(this._before!==void 0){const L=this._before.indexOf(m);L!==-1&&this._before.splice(L,1)}}}afterEach(m){return this._after=this._after||[],this._after.push(m),()=>{if(this._after!==void 0){const L=this._after.indexOf(m);L!==-1&&this._after.splice(L,1)}}}}function createHooks(){return new Hookable}function createContext($={}){let m,L=!1;const j=le=>{if(m&&m!==le)throw new Error("Context conflict")};let ee;if($.asyncContext){const le=$.AsyncLocalStorage||globalThis.AsyncLocalStorage;le?ee=new le:console.warn("[unctx] `AsyncLocalStorage` is not provided.")}const re=()=>{if(ee&&m===void 0){const le=ee.getStore();if(le!==void 0)return le}return m};return{use:()=>{const le=re();if(le===void 0)throw new Error("Context is not available");return le},tryUse:()=>re(),set:(le,ve)=>{ve||j(le),m=le,L=!0},unset:()=>{m=void 0,L=!1},call:(le,ve)=>{j(le),m=le;try{return ee?ee.run(le,ve):ve()}finally{L||(m=void 0)}},async callAsync(le,ve){m=le;const ye=()=>{m=le},Ee=()=>m===le?ye:void 0;asyncHandlers.add(Ee);try{const Me=ee?ee.run(le,ve):ve();return L||(m=void 0),await Me}finally{asyncHandlers.delete(Ee)}}}}function createNamespace($={}){const m={};return{get(L,j={}){return m[L]||(m[L]=createContext({...$,...j})),m[L],m[L]}}}const _globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof global<"u"?global:typeof window<"u"?window:{},globalKey$1="__unctx__",defaultNamespace=_globalThis[globalKey$1]||(_globalThis[globalKey$1]=createNamespace()),getContext=($,m={})=>defaultNamespace.get($,m),asyncHandlersKey="__unctx_async_handlers__",asyncHandlers=_globalThis[asyncHandlersKey]||(_globalThis[asyncHandlersKey]=new Set);function executeAsync($){const m=[];for(const ee of asyncHandlers){const re=ee();re&&m.push(re)}const L=()=>{for(const ee of m)ee()};let j=$();return j&&typeof j=="object"&&"catch"in j&&(j=j.catch(ee=>{throw L(),ee})),[j,L]}const nuxtAppCtx=getContext("nuxt-app",{asyncContext:!1}),NuxtPluginIndicator="__nuxt_plugin";function createNuxtApp($){let m=0;const L={_scope:effectScope(),provide:void 0,globalName:"nuxt",versions:{get nuxt(){return"3.11.2"},get vue(){return L.vueApp.version}},payload:reactive({data:{},state:{},once:new Set,_errors:{},...window.__NUXT__??{}}),static:{data:{}},runWithContext:ee=>L._scope.run(()=>callWithNuxt(L,ee)),isHydrating:!0,deferHydration(){if(!L.isHydrating)return()=>{};m++;let ee=!1;return()=>{if(!ee&&(ee=!0,m--,m===0))return L.isHydrating=!1,L.callHook("app:suspense:resolve")}},_asyncDataPromises:{},_asyncData:{},_payloadRevivers:{},...$};L.hooks=createHooks(),L.hook=L.hooks.hook,L.callHook=L.hooks.callHook,L.provide=(ee,re)=>{const le="$"+ee;defineGetter(L,le,re),defineGetter(L.vueApp.config.globalProperties,le,re)},defineGetter(L.vueApp,"$nuxt",L),defineGetter(L.vueApp.config.globalProperties,"$nuxt",L);{window.addEventListener("nuxt.preloadError",re=>{L.callHook("app:chunkError",{error:re.payload})}),window.useNuxtApp=window.useNuxtApp||useNuxtApp;const ee=L.hook("app:error",(...re)=>{console.error("[nuxt] error caught during app initialization",...re)});L.hook("app:mounted",ee)}const j=L.payload.config;return L.provide("config",j),L}async function applyPlugin($,m){if(m.hooks&&$.hooks.addHooks(m.hooks),typeof m=="function"){const{provide:L}=await $.runWithContext(()=>m($))||{};if(L&&typeof L=="object")for(const j in L)$.provide(j,L[j])}}async function applyPlugins($,m){const L=[],j=[],ee=[],re=[];let le=0;async function ve(ye){var Me;const Ee=((Me=ye.dependsOn)==null?void 0:Me.filter(Ce=>m.some(De=>De._name===Ce)&&!L.includes(Ce)))??[];if(Ee.length>0)j.push([new Set(Ee),ye]);else{const Ce=applyPlugin($,ye).then(async()=>{ye._name&&(L.push(ye._name),await Promise.all(j.map(async([De,Be])=>{De.has(ye._name)&&(De.delete(ye._name),De.size===0&&(le++,await ve(Be)))})))});ye.parallel?ee.push(Ce.catch(De=>re.push(De))):await Ce}}for(const ye of m)await ve(ye);if(await Promise.all(ee),le)for(let ye=0;ye<le;ye++)await Promise.all(ee);if(re.length)throw re[0]}function defineNuxtPlugin($){if(typeof $=="function")return $;const m=$._name||$.name;return delete $.name,Object.assign($.setup||(()=>{}),$,{[NuxtPluginIndicator]:!0,_name:m})}function callWithNuxt($,m,L){const j=()=>L?m(...L):m();return nuxtAppCtx.set($),$.vueApp.runWithContext(j)}function tryUseNuxtApp(){var m;let $;return hasInjectionContext()&&($=(m=getCurrentInstance())==null?void 0:m.appContext.app.$nuxt),$=$||nuxtAppCtx.tryUse(),$||null}function useNuxtApp(){const $=tryUseNuxtApp();if(!$)throw new Error("[nuxt] instance unavailable");return $}function useRuntimeConfig($){return useNuxtApp().$config}function defineGetter($,m,L){Object.defineProperty($,m,{get:()=>L})}function _createMatcher($,m){return{ctx:{table:$},matchAll:L=>_matchRoutes(L,$,m)}}function _createTableFromExport($){const m={};for(const L in $)m[L]=L==="dynamic"?new Map(Object.entries($[L]).map(([j,ee])=>[j,_createTableFromExport(ee)])):new Map(Object.entries($[L]));return m}function createMatcherFromExport($){return _createMatcher(_createTableFromExport($))}function _matchRoutes($,m,L){L!==!0&&$.endsWith("/")&&($=$.slice(0,-1)||"/");const j=[];for(const[re,le]of _sortRoutesMap(m.wildcard))($===re||$.startsWith(re+"/"))&&j.push(le);for(const[re,le]of _sortRoutesMap(m.dynamic))if($.startsWith(re+"/")){const ve="/"+$.slice(re.length).split("/").splice(2).join("/");j.push(..._matchRoutes(ve,le))}const ee=m.static.get($);return ee&&j.push(ee),j.filter(Boolean)}function _sortRoutesMap($){return[...$.entries()].sort((m,L)=>m[0].length-L[0].length)}function isPlainObject$3($){if($===null||typeof $!="object")return!1;const m=Object.getPrototypeOf($);return m!==null&&m!==Object.prototype&&Object.getPrototypeOf(m)!==null||Symbol.iterator in $?!1:Symbol.toStringTag in $?Object.prototype.toString.call($)==="[object Module]":!0}function _defu($,m,L=".",j){if(!isPlainObject$3(m))return _defu($,{},L,j);const ee=Object.assign({},m);for(const re in $){if(re==="__proto__"||re==="constructor")continue;const le=$[re];le!=null&&(j&&j(ee,re,le,L)||(Array.isArray(le)&&Array.isArray(ee[re])?ee[re]=[...le,...ee[re]]:isPlainObject$3(le)&&isPlainObject$3(ee[re])?ee[re]=_defu(le,ee[re],(L?`${L}.`:"")+re.toString(),j):ee[re]=le))}return ee}function createDefu($){return(...m)=>m.reduce((L,j)=>_defu(L,j,"",$),{})}const defu=createDefu(),defuFn=createDefu(($,m,L)=>{if($[m]!==void 0&&typeof L=="function")return $[m]=L($[m]),!0});function hasProp($,m){try{return m in $}catch{return!1}}var __defProp$2=Object.defineProperty,__defNormalProp$2=($,m,L)=>m in $?__defProp$2($,m,{enumerable:!0,configurable:!0,writable:!0,value:L}):$[m]=L,__publicField$2=($,m,L)=>(__defNormalProp$2($,typeof m!="symbol"?m+"":m,L),L);class H3Error extends Error{constructor(m,L={}){super(m,L),__publicField$2(this,"statusCode",500),__publicField$2(this,"fatal",!1),__publicField$2(this,"unhandled",!1),__publicField$2(this,"statusMessage"),__publicField$2(this,"data"),__publicField$2(this,"cause"),L.cause&&!this.cause&&(this.cause=L.cause)}toJSON(){const m={message:this.message,statusCode:sanitizeStatusCode(this.statusCode,500)};return this.statusMessage&&(m.statusMessage=sanitizeStatusMessage(this.statusMessage)),this.data!==void 0&&(m.data=this.data),m}}__publicField$2(H3Error,"__h3_error__",!0);function createError$1($){if(typeof $=="string")return new H3Error($);if(isError$1($))return $;const m=new H3Error($.message??$.statusMessage??"",{cause:$.cause||$});if(hasProp($,"stack"))try{Object.defineProperty(m,"stack",{get(){return $.stack}})}catch{try{m.stack=$.stack}catch{}}if($.data&&(m.data=$.data),$.statusCode?m.statusCode=sanitizeStatusCode($.statusCode,m.statusCode):$.status&&(m.statusCode=sanitizeStatusCode($.status,m.statusCode)),$.statusMessage?m.statusMessage=$.statusMessage:$.statusText&&(m.statusMessage=$.statusText),m.statusMessage){const L=m.statusMessage;sanitizeStatusMessage(m.statusMessage)!==L&&console.warn("[h3] Please prefer using `message` for longer error messages instead of `statusMessage`. In the future, `statusMessage` will be sanitized by default.")}return $.fatal!==void 0&&(m.fatal=$.fatal),$.unhandled!==void 0&&(m.unhandled=$.unhandled),m}function isError$1($){var m;return((m=$==null?void 0:$.constructor)==null?void 0:m.__h3_error__)===!0}const DISALLOWED_STATUS_CHARS=/[^\u0009\u0020-\u007E]/g;function sanitizeStatusMessage($=""){return $.replace(DISALLOWED_STATUS_CHARS,"")}function sanitizeStatusCode($,m=200){return!$||(typeof $=="string"&&($=Number.parseInt($,10)),$<100||$>999)?m:$}typeof setImmediate>"u"||setImmediate;const LayoutMetaSymbol=Symbol("layout-meta"),PageRouteSymbol=Symbol("route"),useRouter=()=>{var $;return($=useNuxtApp())==null?void 0:$.$router},useRoute$1=()=>hasInjectionContext()?inject(PageRouteSymbol,useNuxtApp()._route):useNuxtApp()._route;function defineNuxtRouteMiddleware($){return $}const isProcessingMiddleware=()=>{try{if(useNuxtApp()._processingMiddleware)return!0}catch{return!1}return!1},navigateTo=($,m)=>{$||($="/");const L=typeof $=="string"?$:withQuery($.path||"/",$.query||{})+($.hash||"");if(m!=null&&m.open){const{target:ve="_blank",windowFeatures:ye={}}=m.open,Ee=Object.entries(ye).filter(([Me,Ce])=>Ce!==void 0).map(([Me,Ce])=>`${Me.toLowerCase()}=${Ce}`).join(", ");return open(L,ve,Ee),Promise.resolve()}const j=(m==null?void 0:m.external)||hasProtocol(L,{acceptRelative:!0});if(j){if(!(m!=null&&m.external))throw new Error("Navigating to an external URL is not allowed by default. Use `navigateTo(url, { external: true })`.");const ve=parseURL$1(L).protocol;if(ve&&isScriptProtocol(ve))throw new Error(`Cannot navigate to a URL with '${ve}' protocol.`)}const ee=isProcessingMiddleware();if(!j&&ee)return $;const re=useRouter(),le=useNuxtApp();return j?(le._scope.stop(),m!=null&&m.replace?location.replace(L):location.href=L,ee?le.isHydrating?new Promise(()=>{}):!1:Promise.resolve()):m!=null&&m.replace?re.replace($):re.push($)},NUXT_ERROR_SIGNATURE="__nuxt_error",useError=()=>toRef(useNuxtApp().payload,"error"),showError=$=>{const m=createError($);try{const L=useNuxtApp(),j=useError();L.hooks.callHook("app:error",m),j.value=j.value||m}catch{throw m}return m},clearError=async($={})=>{const m=useNuxtApp(),L=useError();m.callHook("app:error:cleared",$),$.redirect&&await useRouter().replace($.redirect),L.value=null},isNuxtError=$=>!!$&&typeof $=="object"&&NUXT_ERROR_SIGNATURE in $,createError=$=>{const m=createError$1($);return Object.defineProperty(m,NUXT_ERROR_SIGNATURE,{value:!0,configurable:!1,writable:!1}),m},scriptRel="modulepreload",assetsURL=function($,m){return $[0]==="."?new URL($,m).href:$},seen={},___vitePreload=function(m,L,j){let ee=Promise.resolve();if(L&&L.length>0){const re=document.getElementsByTagName("link"),le=document.querySelector("meta[property=csp-nonce]"),ve=(le==null?void 0:le.nonce)||(le==null?void 0:le.getAttribute("nonce"));ee=Promise.all(L.map(ye=>{if(ye=assetsURL(ye,j),ye in seen)return;seen[ye]=!0;const Ee=ye.endsWith(".css"),Me=Ee?'[rel="stylesheet"]':"";if(!!j)for(let Be=re.length-1;Be>=0;Be--){const ke=re[Be];if(ke.href===ye&&(!Ee||ke.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${ye}"]${Me}`))return;const De=document.createElement("link");if(De.rel=Ee?"stylesheet":scriptRel,Ee||(De.as="script",De.crossOrigin=""),De.href=ye,ve&&De.setAttribute("nonce",ve),document.head.appendChild(De),Ee)return new Promise((Be,ke)=>{De.addEventListener("load",Be),De.addEventListener("error",()=>ke(new Error(`Unable to preload CSS for ${ye}`)))})}))}return ee.then(()=>m()).catch(re=>{const le=new Event("vite:preloadError",{cancelable:!0});if(le.payload=re,window.dispatchEvent(le),!le.defaultPrevented)throw re})},__vitePreload=(...$)=>___vitePreload(...$).catch(m=>{const L=new Event("nuxt.preloadError");throw L.payload=m,window.dispatchEvent(L),m}),UNDEFINED=-1,HOLE=-2,NAN=-3,POSITIVE_INFINITY=-4,NEGATIVE_INFINITY=-5,NEGATIVE_ZERO=-6;function parse($,m){return unflatten(JSON.parse($),m)}function unflatten($,m){if(typeof $=="number")return ee($,!0);if(!Array.isArray($)||$.length===0)throw new Error("Invalid input");const L=$,j=Array(L.length);function ee(re,le=!1){if(re===UNDEFINED)return;if(re===NAN)return NaN;if(re===POSITIVE_INFINITY)return 1/0;if(re===NEGATIVE_INFINITY)return-1/0;if(re===NEGATIVE_ZERO)return-0;if(le)throw new Error("Invalid input");if(re in j)return j[re];const ve=L[re];if(!ve||typeof ve!="object")j[re]=ve;else if(Array.isArray(ve))if(typeof ve[0]=="string"){const ye=ve[0],Ee=m==null?void 0:m[ye];if(Ee)return j[re]=Ee(ee(ve[1]));switch(ye){case"Date":j[re]=new Date(ve[1]);break;case"Set":const Me=new Set;j[re]=Me;for(let Be=1;Be<ve.length;Be+=1)Me.add(ee(ve[Be]));break;case"Map":const Ce=new Map;j[re]=Ce;for(let Be=1;Be<ve.length;Be+=2)Ce.set(ee(ve[Be]),ee(ve[Be+1]));break;case"RegExp":j[re]=new RegExp(ve[1],ve[2]);break;case"Object":j[re]=Object(ve[1]);break;case"BigInt":j[re]=BigInt(ve[1]);break;case"null":const De=Object.create(null);j[re]=De;for(let Be=1;Be<ve.length;Be+=2)De[ve[Be]]=ee(ve[Be+1]);break;default:throw new Error(`Unknown type ${ye}`)}}else{const ye=new Array(ve.length);j[re]=ye;for(let Ee=0;Ee<ve.length;Ee+=1){const Me=ve[Ee];Me!==HOLE&&(ye[Ee]=ee(Me))}}else{const ye={};j[re]=ye;for(const Ee in ve){const Me=ve[Ee];ye[Ee]=ee(Me)}}return j[re]}return ee(0)}function asArray$1($){return Array.isArray($)?$:[$]}const TagsWithInnerContent=["title","titleTemplate","script","style","noscript"],HasElementTags=["base","meta","link","style","script","noscript"],ValidHeadTags=["title","titleTemplate","templateParams","base","htmlAttrs","bodyAttrs","meta","link","style","script","noscript"],UniqueTags=["base","title","titleTemplate","bodyAttrs","htmlAttrs","templateParams"],TagConfigKeys=["tagPosition","tagPriority","tagDuplicateStrategy","children","innerHTML","textContent","processTemplateParams"],IsBrowser=typeof window<"u";function defineHeadPlugin($){return $}function hashCode($){let m=9;for(let L=0;L<$.length;)m=Math.imul(m^$.charCodeAt(L++),9**9);return((m^m>>>9)+65536).toString(16).substring(1,8).toLowerCase()}function hashTag($){return $._h||hashCode($._d?$._d:`${$.tag}:${$.textContent||$.innerHTML||""}:${Object.entries($.props).map(([m,L])=>`${m}:${String(L)}`).join(",")}`)}function tagDedupeKey($,m){const{props:L,tag:j}=$;if(UniqueTags.includes(j))return j;if(j==="link"&&L.rel==="canonical")return"canonical";if(L.charset)return"charset";const ee=["id"];j==="meta"&&ee.push("name","property","http-equiv");for(const re of ee)if(typeof L[re]<"u"){const le=String(L[re]);return m&&!m(le)?!1:`${j}:${re}:${le}`}return!1}function resolveTitleTemplate($,m){return $==null?m||null:typeof $=="function"?$(m):$}async function normaliseTag($,m,L){const j={tag:$,props:await normaliseProps(typeof m=="object"&&typeof m!="function"&&!(m instanceof Promise)?{...m}:{[["script","noscript","style"].includes($)?"innerHTML":"textContent"]:m},["templateParams","titleTemplate"].includes($))};return TagConfigKeys.forEach(ee=>{const re=typeof j.props[ee]<"u"?j.props[ee]:L[ee];typeof re<"u"&&((!["innerHTML","textContent","children"].includes(ee)||TagsWithInnerContent.includes(j.tag))&&(j[ee==="children"?"innerHTML":ee]=re),delete j.props[ee])}),j.props.body&&(j.tagPosition="bodyClose",delete j.props.body),j.tag==="script"&&typeof j.innerHTML=="object"&&(j.innerHTML=JSON.stringify(j.innerHTML),j.props.type=j.props.type||"application/json"),Array.isArray(j.props.content)?j.props.content.map(ee=>({...j,props:{...j.props,content:ee}})):j}function normaliseStyleClassProps($,m){var j;const L=$==="class"?" ":";";return typeof m=="object"&&!Array.isArray(m)&&(m=Object.entries(m).filter(([,ee])=>ee).map(([ee,re])=>$==="style"?`${ee}:${re}`:ee)),(j=Array.isArray(m)?m.join(L):m)==null?void 0:j.split(L).filter(ee=>ee.trim()).filter(Boolean).join(L)}async function normaliseProps($,m){for(const L of Object.keys($)){if(["class","style"].includes(L)){$[L]=normaliseStyleClassProps(L,$[L]);continue}if($[L]instanceof Promise&&($[L]=await $[L]),!m&&!TagConfigKeys.includes(L)){const j=String($[L]),ee=L.startsWith("data-");j==="true"||j===""?$[L]=ee?"true":!0:$[L]||(ee&&j==="false"?$[L]="false":delete $[L])}}return $}const TagEntityBits=10;async function normaliseEntryTags($){const m=[];return Object.entries($.resolvedInput).filter(([L,j])=>typeof j<"u"&&ValidHeadTags.includes(L)).forEach(([L,j])=>{const ee=asArray$1(j);m.push(...ee.map(re=>normaliseTag(L,re,$)).flat())}),(await Promise.all(m)).flat().filter(Boolean).map((L,j)=>(L._e=$._i,$.mode&&(L._m=$.mode),L._p=($._i<<TagEntityBits)+j,L))}const TAG_WEIGHTS={base:-10,title:10},TAG_ALIASES={critical:-80,high:-10,low:20};function tagWeight($){let m=100;const L=$.tagPriority;return typeof L=="number"?L:($.tag==="meta"?($.props["http-equiv"]==="content-security-policy"&&(m=-30),$.props.charset&&(m=-20),$.props.name==="viewport"&&(m=-15)):$.tag==="link"&&$.props.rel==="preconnect"?m=20:$.tag in TAG_WEIGHTS&&(m=TAG_WEIGHTS[$.tag]),typeof L=="string"&&L in TAG_ALIASES?m+TAG_ALIASES[L]:m)}const SortModifiers=[{prefix:"before:",offset:-1},{prefix:"after:",offset:1}],NetworkEvents=["onload","onerror","onabort","onprogress","onloadstart"],sepSub="%separator";function processTemplateParams($,m,L){if(typeof $!="string"||!$.includes("%"))return $;function j(le){let ve;return["s","pageTitle"].includes(le)?ve=m.pageTitle:le.includes(".")?ve=le.split(".").reduce((ye,Ee)=>ye&&ye[Ee]||void 0,m):ve=m[le],typeof ve<"u"?(ve||"").replace(/"/g,'\\"'):!1}let ee=$;try{ee=decodeURI($)}catch{}return(ee.match(/%(\w+\.+\w+)|%(\w+)/g)||[]).sort().reverse().forEach(le=>{const ve=j(le.slice(1));typeof ve=="string"&&($=$.replace(new RegExp(`\\${le}(\\W|$)`,"g"),(ye,Ee)=>`${ve}${Ee}`).trim())}),$.includes(sepSub)&&($.endsWith(sepSub)&&($=$.slice(0,-sepSub.length).trim()),$.startsWith(sepSub)&&($=$.slice(sepSub.length).trim()),$=$.replace(new RegExp(`\\${sepSub}\\s*\\${sepSub}`,"g"),sepSub),$=processTemplateParams($,{separator:L},L)),$}async function renderDOMHead($,m={}){var Me;const L=m.document||$.resolvedOptions.document;if(!L||!$.dirty)return;const j={shouldRender:!0,tags:[]};if(await $.hooks.callHook("dom:beforeRender",j),!j.shouldRender)return;const ee=(await $.resolveTags()).map(Ce=>({tag:Ce,id:HasElementTags.includes(Ce.tag)?hashTag(Ce):Ce.tag,shouldRender:!0}));let re=$._dom;if(!re){re={elMap:{htmlAttrs:L.documentElement,bodyAttrs:L.body}};for(const Ce of["body","head"]){const De=(Me=L[Ce])==null?void 0:Me.children,Be=[];for(const ke of[...De].filter(Fe=>HasElementTags.includes(Fe.tagName.toLowerCase()))){const Fe={tag:ke.tagName.toLowerCase(),props:await normaliseProps(ke.getAttributeNames().reduce((ze,$e)=>({...ze,[$e]:ke.getAttribute($e)}),{})),innerHTML:ke.innerHTML};let Oe=1,Ne=tagDedupeKey(Fe);for(;Ne&&Be.find(ze=>ze._d===Ne);)Ne=`${Ne}:${Oe++}`;Fe._d=Ne||void 0,Be.push(Fe),re.elMap[ke.getAttribute("data-hid")||hashTag(Fe)]=ke}}}re.pendingSideEffects={...re.sideEffects||{}},re.sideEffects={};function le(Ce,De,Be){const ke=`${Ce}:${De}`;re.sideEffects[ke]=Be,delete re.pendingSideEffects[ke]}function ve({id:Ce,$el:De,tag:Be}){const ke=Be.tag.endsWith("Attrs");re.elMap[Ce]=De,ke||(["textContent","innerHTML"].forEach(Fe=>{Be[Fe]&&Be[Fe]!==De[Fe]&&(De[Fe]=Be[Fe])}),le(Ce,"el",()=>{var Fe;(Fe=re.elMap[Ce])==null||Fe.remove(),delete re.elMap[Ce]}));for(const[Fe,Oe]of Object.entries(Be._eventHandlers||{}))De.getAttribute(`data-${Fe}`)!==""&&((Be.tag==="bodyAttrs"?L.defaultView:De).addEventListener(Fe.replace("on",""),Oe.bind(De)),De.setAttribute(`data-${Fe}`,""));Object.entries(Be.props).forEach(([Fe,Oe])=>{const Ne=`attr:${Fe}`;if(Fe==="class")for(const ze of(Oe||"").split(" ").filter(Boolean))ke&&le(Ce,`${Ne}:${ze}`,()=>De.classList.remove(ze)),!De.classList.contains(ze)&&De.classList.add(ze);else if(Fe==="style")for(const ze of(Oe||"").split(";").filter(Boolean)){const[$e,...He]=ze.split(":").map(We=>We.trim());le(Ce,`${Ne}:${ze}:${$e}`,()=>{De.style.removeProperty($e)}),De.style.setProperty($e,He.join(":"))}else De.getAttribute(Fe)!==Oe&&De.setAttribute(Fe,Oe===!0?"":String(Oe)),ke&&le(Ce,Ne,()=>De.removeAttribute(Fe))})}const ye=[],Ee={bodyClose:void 0,bodyOpen:void 0,head:void 0};for(const Ce of ee){const{tag:De,shouldRender:Be,id:ke}=Ce;if(Be){if(De.tag==="title"){L.title=De.textContent;continue}Ce.$el=Ce.$el||re.elMap[ke],Ce.$el?ve(Ce):HasElementTags.includes(De.tag)&&ye.push(Ce)}}for(const Ce of ye){const De=Ce.tag.tagPosition||"head";Ce.$el=L.createElement(Ce.tag.tag),ve(Ce),Ee[De]=Ee[De]||L.createDocumentFragment(),Ee[De].appendChild(Ce.$el)}for(const Ce of ee)await $.hooks.callHook("dom:renderTag",Ce,L,le);Ee.head&&L.head.appendChild(Ee.head),Ee.bodyOpen&&L.body.insertBefore(Ee.bodyOpen,L.body.firstChild),Ee.bodyClose&&L.body.appendChild(Ee.bodyClose),Object.values(re.pendingSideEffects).forEach(Ce=>Ce()),$._dom=re,$.dirty=!1,await $.hooks.callHook("dom:rendered",{renders:ee})}async function debouncedRenderDOMHead($,m={}){const L=m.delayFn||(j=>setTimeout(j,10));return $._domUpdatePromise=$._domUpdatePromise||new Promise(j=>L(async()=>{await renderDOMHead($,m),delete $._domUpdatePromise,j()}))}function DomPlugin($){return m=>{var j,ee;const L=((ee=(j=m.resolvedOptions.document)==null?void 0:j.head.querySelector('script[id="unhead:payload"]'))==null?void 0:ee.innerHTML)||!1;return L&&m.push(JSON.parse(L)),{mode:"client",hooks:{"entries:updated":function(re){debouncedRenderDOMHead(re,$)}}}}}const UsesMergeStrategy=["templateParams","htmlAttrs","bodyAttrs"],DedupePlugin={hooks:{"tag:normalise":function({tag:$}){["hid","vmid","key"].forEach(j=>{$.props[j]&&($.key=$.props[j],delete $.props[j])});const L=tagDedupeKey($)||($.key?`${$.tag}:${$.key}`:!1);L&&($._d=L)},"tags:resolve":function($){const m={};$.tags.forEach(j=>{const ee=(j.key?`${j.tag}:${j.key}`:j._d)||j._p,re=m[ee];if(re){let ve=j==null?void 0:j.tagDuplicateStrategy;if(!ve&&UsesMergeStrategy.includes(j.tag)&&(ve="merge"),ve==="merge"){const ye=re.props;["class","style"].forEach(Ee=>{ye[Ee]&&(j.props[Ee]?(Ee==="style"&&!ye[Ee].endsWith(";")&&(ye[Ee]+=";"),j.props[Ee]=`${ye[Ee]} ${j.props[Ee]}`):j.props[Ee]=ye[Ee])}),m[ee].props={...ye,...j.props};return}else if(j._e===re._e){re._duped=re._duped||[],j._d=`${re._d}:${re._duped.length+1}`,re._duped.push(j);return}else if(tagWeight(j)>tagWeight(re))return}const le=Object.keys(j.props).length+(j.innerHTML?1:0)+(j.textContent?1:0);if(HasElementTags.includes(j.tag)&&le===0){delete m[ee];return}m[ee]=j});const L=[];Object.values(m).forEach(j=>{const ee=j._duped;delete j._duped,L.push(j),ee&&L.push(...ee)}),$.tags=L,$.tags=$.tags.filter(j=>!(j.tag==="meta"&&(j.props.name||j.props.property)&&!j.props.content))}}},PayloadPlugin={mode:"server",hooks:{"tags:resolve":function($){const m={};$.tags.filter(L=>["titleTemplate","templateParams","title"].includes(L.tag)&&L._m==="server").forEach(L=>{m[L.tag]=L.tag.startsWith("title")?L.textContent:L.props}),Object.keys(m).length&&$.tags.push({tag:"script",innerHTML:JSON.stringify(m),props:{id:"unhead:payload",type:"application/json"}})}}},ValidEventTags=["script","link","bodyAttrs"],EventHandlersPlugin=$=>({hooks:{"tags:resolve":function(m){for(const L of m.tags.filter(j=>ValidEventTags.includes(j.tag)))Object.entries(L.props).forEach(([j,ee])=>{j.startsWith("on")&&typeof ee=="function"&&($.ssr&&NetworkEvents.includes(j)?L.props[j]=`this.dataset.${j}fired = true`:delete L.props[j],L._eventHandlers=L._eventHandlers||{},L._eventHandlers[j]=ee)}),$.ssr&&L._eventHandlers&&(L.props.src||L.props.href)&&(L.key=L.key||hashCode(L.props.src||L.props.href))},"dom:renderTag":function({$el:m,tag:L}){var j,ee;for(const re of Object.keys((m==null?void 0:m.dataset)||{}).filter(le=>NetworkEvents.some(ve=>`${ve}fired`===le))){const le=re.replace("fired","");(ee=(j=L._eventHandlers)==null?void 0:j[le])==null||ee.call(m,new Event(le.replace("on","")))}}}}),DupeableTags=["link","style","script","noscript"],HashKeyedPlugin={hooks:{"tag:normalise":({tag:$})=>{$.key&&DupeableTags.includes($.tag)&&($.props["data-hid"]=$._h=hashCode($.key))}}},SortPlugin={hooks:{"tags:resolve":$=>{const m=L=>{var j;return(j=$.tags.find(ee=>ee._d===L))==null?void 0:j._p};for(const{prefix:L,offset:j}of SortModifiers)for(const ee of $.tags.filter(re=>typeof re.tagPriority=="string"&&re.tagPriority.startsWith(L))){const re=m(ee.tagPriority.replace(L,""));typeof re<"u"&&(ee._p=re+j)}$.tags.sort((L,j)=>L._p-j._p).sort((L,j)=>tagWeight(L)-tagWeight(j))}}},SupportedAttrs={meta:"content",link:"href",htmlAttrs:"lang"},TemplateParamsPlugin=$=>({hooks:{"tags:resolve":m=>{var ve;const{tags:L}=m,j=(ve=L.find(ye=>ye.tag==="title"))==null?void 0:ve.textContent,ee=L.findIndex(ye=>ye.tag==="templateParams"),re=ee!==-1?L[ee].props:{},le=re.separator||"|";delete re.separator,re.pageTitle=processTemplateParams(re.pageTitle||j||"",re,le);for(const ye of L.filter(Ee=>Ee.processTemplateParams!==!1)){const Ee=SupportedAttrs[ye.tag];Ee&&typeof ye.props[Ee]=="string"?ye.props[Ee]=processTemplateParams(ye.props[Ee],re,le):(ye.processTemplateParams===!0||["titleTemplate","title"].includes(ye.tag))&&["innerHTML","textContent"].forEach(Me=>{typeof ye[Me]=="string"&&(ye[Me]=processTemplateParams(ye[Me],re,le))})}$._templateParams=re,$._separator=le,m.tags=L.filter(ye=>ye.tag!=="templateParams")}}}),TitleTemplatePlugin={hooks:{"tags:resolve":$=>{const{tags:m}=$;let L=m.findIndex(ee=>ee.tag==="titleTemplate");const j=m.findIndex(ee=>ee.tag==="title");if(j!==-1&&L!==-1){const ee=resolveTitleTemplate(m[L].textContent,m[j].textContent);ee!==null?m[j].textContent=ee||m[j].textContent:delete m[j]}else if(L!==-1){const ee=resolveTitleTemplate(m[L].textContent);ee!==null&&(m[L].textContent=ee,m[L].tag="title",L=-1)}L!==-1&&delete m[L],$.tags=m.filter(Boolean)}}},XSSPlugin={hooks:{"tags:afterResolve":function($){for(const m of $.tags)typeof m.innerHTML=="string"&&(m.innerHTML&&["application/ld+json","application/json"].includes(m.props.type)?m.innerHTML=m.innerHTML.replace(/</g,"\\u003C"):m.innerHTML=m.innerHTML.replace(new RegExp(`</${m.tag}`,"g"),`<\\/${m.tag}`))}}};let activeHead;function createHead$1($={}){const m=createHeadCore($);return m.use(DomPlugin()),activeHead=m}function filterMode($,m){return!$||$==="server"&&m||$==="client"&&!m}function createHeadCore($={}){const m=createHooks();m.addHooks($.hooks||{}),$.document=$.document||(IsBrowser?document:void 0);const L=!$.document,j=()=>{ve.dirty=!0,m.callHook("entries:updated",ve)};let ee=0,re=[];const le=[],ve={plugins:le,dirty:!1,resolvedOptions:$,hooks:m,headEntries(){return re},use(ye){const Ee=typeof ye=="function"?ye(ve):ye;(!Ee.key||!le.some(Me=>Me.key===Ee.key))&&(le.push(Ee),filterMode(Ee.mode,L)&&m.addHooks(Ee.hooks||{}))},push(ye,Ee){Ee==null||delete Ee.head;const Me={_i:ee++,input:ye,...Ee};return filterMode(Me.mode,L)&&(re.push(Me),j()),{dispose(){re=re.filter(Ce=>Ce._i!==Me._i),m.callHook("entries:updated",ve),j()},patch(Ce){re=re.map(De=>(De._i===Me._i&&(De.input=Me.input=Ce),De)),j()}}},async resolveTags(){const ye={tags:[],entries:[...re]};await m.callHook("entries:resolve",ye);for(const Ee of ye.entries){const Me=Ee.resolvedInput||Ee.input;if(Ee.resolvedInput=await(Ee.transform?Ee.transform(Me):Me),Ee.resolvedInput)for(const Ce of await normaliseEntryTags(Ee)){const De={tag:Ce,entry:Ee,resolvedOptions:ve.resolvedOptions};await m.callHook("tag:normalise",De),ye.tags.push(De.tag)}}return await m.callHook("tags:beforeResolve",ye),await m.callHook("tags:resolve",ye),await m.callHook("tags:afterResolve",ye),ye.tags},ssr:L};return[DedupePlugin,PayloadPlugin,EventHandlersPlugin,HashKeyedPlugin,SortPlugin,TemplateParamsPlugin,TitleTemplatePlugin,XSSPlugin,...($==null?void 0:$.plugins)||[]].forEach(ye=>ve.use(ye)),ve.hooks.callHook("init",ve),ve}function getActiveHead(){return activeHead}const Vue3=version$3.startsWith("3");function resolveUnref($){return typeof $=="function"?$():unref($)}function resolveUnrefHeadInput($,m=""){if($ instanceof Promise)return $;const L=resolveUnref($);return!$||!L?L:Array.isArray(L)?L.map(j=>resolveUnrefHeadInput(j,m)):typeof L=="object"?Object.fromEntries(Object.entries(L).map(([j,ee])=>j==="titleTemplate"||j.startsWith("on")?[j,unref(ee)]:[j,resolveUnrefHeadInput(ee,j)])):L}const VueReactivityPlugin={hooks:{"entries:resolve":function($){for(const m of $.entries)m.resolvedInput=resolveUnrefHeadInput(m.input)}}},headSymbol="usehead";function vueInstall($){return{install(L){Vue3&&(L.config.globalProperties.$unhead=$,L.config.globalProperties.$head=$,L.provide(headSymbol,$))}}.install}function createHead($={}){$.domDelayFn=$.domDelayFn||(L=>nextTick(()=>setTimeout(()=>L(),0)));const m=createHead$1($);return m.use(VueReactivityPlugin),m.install=vueInstall(m),m}const _global=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},globalKey="__unhead_injection_handler__";function setHeadInjectionHandler($){_global[globalKey]=$}function injectHead(){if(globalKey in _global)return _global[globalKey]();const $=inject(headSymbol);return $||getActiveHead()}function useHead($,m={}){const L=m.head||injectHead();if(L)return L.ssr?L.push($,m):clientUseHead(L,$,m)}function clientUseHead($,m,L={}){const j=ref(!1),ee=ref({});watchEffect(()=>{ee.value=j.value?{}:resolveUnrefHeadInput(m)});const re=$.push(ee.value,L);return watch(ee,ve=>{re.patch(ve)}),getCurrentInstance()&&(onBeforeUnmount(()=>{re.dispose()}),onDeactivated(()=>{j.value=!0}),onActivated(()=>{j.value=!1})),re}const inlineConfig={nuxt:{buildId:"4dd5b102-edb2-4874-933a-7dae60cb04e5"}},__appConfig=defuFn(inlineConfig);function useAppConfig(){const $=useNuxtApp();return $._appConfig||($._appConfig=reactive(__appConfig)),$._appConfig}const appLayoutTransition=!1,appPageTransition=!1,appKeepalive=!1,nuxtLinkDefaults={componentName:"NuxtLink"},asyncDataDefaults={deep:!0},vueAppRootContainer="#__nuxt";let manifest,matcher$1;function fetchManifest(){var m;const $=(m=useAppConfig().nuxt)==null?void 0:m.buildId;return manifest=$fetch(buildAssetsURL(`builds/meta/${$}.json`)),manifest.then(L=>{matcher$1=createMatcherFromExport(L.matcher)}),manifest}function getAppManifest(){return manifest||fetchManifest()}async function getRouteRules($){return await getAppManifest(),defu({},...matcher$1.matchAll($).reverse())}function loadPayload($,m={}){const L=_getPayloadURL($,m),j=useNuxtApp(),ee=j._payloadCache=j._payloadCache||{};return L in ee||(ee[L]=isPrerendered($).then(re=>re?_importPayload(L).then(le=>le||(delete ee[L],null)):(ee[L]=null,null))),ee[L]}const filename="_payload.json";function _getPayloadURL($,m={}){var ee;const L=new URL($,"http://localhost");if(L.host!=="localhost"||hasProtocol(L.pathname,{acceptRelative:!0}))throw new Error("Payload URL must not include hostname: "+$);const j=m.hash||(m.fresh?Date.now():(ee=useAppConfig().nuxt)==null?void 0:ee.buildId);return joinURL(useRuntimeConfig().app.baseURL,L.pathname,filename+(j?`?${j}`:""))}async function _importPayload($){const m=fetch($).then(L=>L.text().then(parsePayload));try{return await m}catch(L){console.warn("[nuxt] Cannot load payload ",$,L)}return null}async function isPrerendered($=useRoute$1().path){if($=withoutTrailingSlash($),(await getAppManifest()).prerendered.includes($))return!0;const L=await getRouteRules($);return!!L.prerender&&!L.redirect}let payloadCache=null;async function getNuxtClientPayload(){if(payloadCache)return payloadCache;const $=document.getElementById("__NUXT_DATA__");if(!$)return{};const m=await parsePayload($.textContent||""),L=$.dataset.src?await _importPayload($.dataset.src):void 0;return payloadCache={...m,...L,...window.__NUXT__},payloadCache}async function parsePayload($){return await parse($,useNuxtApp()._payloadRevivers)}function definePayloadReviver($,m){useNuxtApp()._payloadRevivers[$]=m}const revivers={NuxtError:$=>createError($),EmptyShallowRef:$=>shallowRef($==="_"?void 0:$==="0n"?BigInt(0):destr($)),EmptyRef:$=>ref($==="_"?void 0:$==="0n"?BigInt(0):destr($)),ShallowRef:$=>shallowRef($),ShallowReactive:$=>shallowReactive($),Ref:$=>ref($),Reactive:$=>reactive($)},revive_payload_client_4sVQNw7RlN=defineNuxtPlugin({name:"nuxt:revive-payload:client",order:-30,async setup($){let m,L;for(const j in revivers)definePayloadReviver(j,revivers[j]);Object.assign($.payload,([m,L]=executeAsync(()=>$.runWithContext(getNuxtClientPayload)),m=await m,L(),m)),window.__NUXT__=$.payload}}),unheadPlugins=[],unhead_KgADcZ0jPj=defineNuxtPlugin({name:"nuxt:head",enforce:"pre",setup($){const m=createHead({plugins:unheadPlugins});setHeadInjectionHandler(()=>useNuxtApp().vueApp._context.provides.usehead),$.vueApp.use(m);{let L=!0;const j=async()=>{L=!1,await renderDOMHead(m)};m.hooks.hook("dom:beforeRender",ee=>{ee.shouldRender=!L}),$.hooks.hook("page:start",()=>{L=!0}),$.hooks.hook("page:finish",()=>{$.isHydrating||j()}),$.hooks.hook("app:error",j),$.hooks.hook("app:suspense:resolve",j)}}});/*!
  * vue-router v4.3.2
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const isBrowser$1=typeof document<"u";function isESModule($){return $.__esModule||$[Symbol.toStringTag]==="Module"}const assign$1=Object.assign;function applyToParams($,m){const L={};for(const j in m){const ee=m[j];L[j]=isArray$3(ee)?ee.map($):$(ee)}return L}const noop$2=()=>{},isArray$3=Array.isArray,HASH_RE=/#/g,AMPERSAND_RE=/&/g,SLASH_RE=/\//g,EQUAL_RE=/=/g,IM_RE=/\?/g,PLUS_RE=/\+/g,ENC_BRACKET_OPEN_RE=/%5B/g,ENC_BRACKET_CLOSE_RE=/%5D/g,ENC_CARET_RE=/%5E/g,ENC_BACKTICK_RE=/%60/g,ENC_CURLY_OPEN_RE=/%7B/g,ENC_PIPE_RE=/%7C/g,ENC_CURLY_CLOSE_RE=/%7D/g,ENC_SPACE_RE=/%20/g;function commonEncode($){return encodeURI(""+$).replace(ENC_PIPE_RE,"|").replace(ENC_BRACKET_OPEN_RE,"[").replace(ENC_BRACKET_CLOSE_RE,"]")}function encodeHash($){return commonEncode($).replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryValue($){return commonEncode($).replace(PLUS_RE,"%2B").replace(ENC_SPACE_RE,"+").replace(HASH_RE,"%23").replace(AMPERSAND_RE,"%26").replace(ENC_BACKTICK_RE,"`").replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryKey($){return encodeQueryValue($).replace(EQUAL_RE,"%3D")}function encodePath($){return commonEncode($).replace(HASH_RE,"%23").replace(IM_RE,"%3F")}function encodeParam($){return $==null?"":encodePath($).replace(SLASH_RE,"%2F")}function decode($){try{return decodeURIComponent(""+$)}catch{}return""+$}const TRAILING_SLASH_RE=/\/$/,removeTrailingSlash=$=>$.replace(TRAILING_SLASH_RE,"");function parseURL($,m,L="/"){let j,ee={},re="",le="";const ve=m.indexOf("#");let ye=m.indexOf("?");return ve<ye&&ve>=0&&(ye=-1),ye>-1&&(j=m.slice(0,ye),re=m.slice(ye+1,ve>-1?ve:m.length),ee=$(re)),ve>-1&&(j=j||m.slice(0,ve),le=m.slice(ve,m.length)),j=resolveRelativePath(j??m,L),{fullPath:j+(re&&"?")+re+le,path:j,query:ee,hash:decode(le)}}function stringifyURL($,m){const L=m.query?$(m.query):"";return m.path+(L&&"?")+L+(m.hash||"")}function stripBase($,m){return!m||!$.toLowerCase().startsWith(m.toLowerCase())?$:$.slice(m.length)||"/"}function isSameRouteLocation($,m,L){const j=m.matched.length-1,ee=L.matched.length-1;return j>-1&&j===ee&&isSameRouteRecord(m.matched[j],L.matched[ee])&&isSameRouteLocationParams(m.params,L.params)&&$(m.query)===$(L.query)&&m.hash===L.hash}function isSameRouteRecord($,m){return($.aliasOf||$)===(m.aliasOf||m)}function isSameRouteLocationParams($,m){if(Object.keys($).length!==Object.keys(m).length)return!1;for(const L in $)if(!isSameRouteLocationParamsValue($[L],m[L]))return!1;return!0}function isSameRouteLocationParamsValue($,m){return isArray$3($)?isEquivalentArray($,m):isArray$3(m)?isEquivalentArray(m,$):$===m}function isEquivalentArray($,m){return isArray$3(m)?$.length===m.length&&$.every((L,j)=>L===m[j]):$.length===1&&$[0]===m}function resolveRelativePath($,m){if($.startsWith("/"))return $;if(!$)return m;const L=m.split("/"),j=$.split("/"),ee=j[j.length-1];(ee===".."||ee===".")&&j.push("");let re=L.length-1,le,ve;for(le=0;le<j.length;le++)if(ve=j[le],ve!==".")if(ve==="..")re>1&&re--;else break;return L.slice(0,re).join("/")+"/"+j.slice(le).join("/")}var NavigationType;(function($){$.pop="pop",$.push="push"})(NavigationType||(NavigationType={}));var NavigationDirection;(function($){$.back="back",$.forward="forward",$.unknown=""})(NavigationDirection||(NavigationDirection={}));function normalizeBase($){if(!$)if(isBrowser$1){const m=document.querySelector("base");$=m&&m.getAttribute("href")||"/",$=$.replace(/^\w+:\/\/[^\/]+/,"")}else $="/";return $[0]!=="/"&&$[0]!=="#"&&($="/"+$),removeTrailingSlash($)}const BEFORE_HASH_RE=/^[^#]+#/;function createHref($,m){return $.replace(BEFORE_HASH_RE,"#")+m}function getElementPosition($,m){const L=document.documentElement.getBoundingClientRect(),j=$.getBoundingClientRect();return{behavior:m.behavior,left:j.left-L.left-(m.left||0),top:j.top-L.top-(m.top||0)}}const computeScrollPosition=()=>({left:window.scrollX,top:window.scrollY});function scrollToPosition($){let m;if("el"in $){const L=$.el,j=typeof L=="string"&&L.startsWith("#"),ee=typeof L=="string"?j?document.getElementById(L.slice(1)):document.querySelector(L):L;if(!ee)return;m=getElementPosition(ee,$)}else m=$;"scrollBehavior"in document.documentElement.style?window.scrollTo(m):window.scrollTo(m.left!=null?m.left:window.scrollX,m.top!=null?m.top:window.scrollY)}function getScrollKey($,m){return(history.state?history.state.position-m:-1)+$}const scrollPositions=new Map;function saveScrollPosition($,m){scrollPositions.set($,m)}function getSavedScrollPosition($){const m=scrollPositions.get($);return scrollPositions.delete($),m}let createBaseLocation=()=>location.protocol+"//"+location.host;function createCurrentLocation$1($,m){const{pathname:L,search:j,hash:ee}=m,re=$.indexOf("#");if(re>-1){let ve=ee.includes($.slice(re))?$.slice(re).length:1,ye=ee.slice(ve);return ye[0]!=="/"&&(ye="/"+ye),stripBase(ye,"")}return stripBase(L,$)+j+ee}function useHistoryListeners($,m,L,j){let ee=[],re=[],le=null;const ve=({state:De})=>{const Be=createCurrentLocation$1($,location),ke=L.value,Fe=m.value;let Oe=0;if(De){if(L.value=Be,m.value=De,le&&le===ke){le=null;return}Oe=Fe?De.position-Fe.position:0}else j(Be);ee.forEach(Ne=>{Ne(L.value,ke,{delta:Oe,type:NavigationType.pop,direction:Oe?Oe>0?NavigationDirection.forward:NavigationDirection.back:NavigationDirection.unknown})})};function ye(){le=L.value}function Ee(De){ee.push(De);const Be=()=>{const ke=ee.indexOf(De);ke>-1&&ee.splice(ke,1)};return re.push(Be),Be}function Me(){const{history:De}=window;De.state&&De.replaceState(assign$1({},De.state,{scroll:computeScrollPosition()}),"")}function Ce(){for(const De of re)De();re=[],window.removeEventListener("popstate",ve),window.removeEventListener("beforeunload",Me)}return window.addEventListener("popstate",ve),window.addEventListener("beforeunload",Me,{passive:!0}),{pauseListeners:ye,listen:Ee,destroy:Ce}}function buildState($,m,L,j=!1,ee=!1){return{back:$,current:m,forward:L,replaced:j,position:window.history.length,scroll:ee?computeScrollPosition():null}}function useHistoryStateNavigation($){const{history:m,location:L}=window,j={value:createCurrentLocation$1($,L)},ee={value:m.state};ee.value||re(j.value,{back:null,current:j.value,forward:null,position:m.length-1,replaced:!0,scroll:null},!0);function re(ye,Ee,Me){const Ce=$.indexOf("#"),De=Ce>-1?(L.host&&document.querySelector("base")?$:$.slice(Ce))+ye:createBaseLocation()+$+ye;try{m[Me?"replaceState":"pushState"](Ee,"",De),ee.value=Ee}catch(Be){console.error(Be),L[Me?"replace":"assign"](De)}}function le(ye,Ee){const Me=assign$1({},m.state,buildState(ee.value.back,ye,ee.value.forward,!0),Ee,{position:ee.value.position});re(ye,Me,!0),j.value=ye}function ve(ye,Ee){const Me=assign$1({},ee.value,m.state,{forward:ye,scroll:computeScrollPosition()});re(Me.current,Me,!0);const Ce=assign$1({},buildState(j.value,ye,null),{position:Me.position+1},Ee);re(ye,Ce,!1),j.value=ye}return{location:j,state:ee,push:ve,replace:le}}function createWebHistory($){$=normalizeBase($);const m=useHistoryStateNavigation($),L=useHistoryListeners($,m.state,m.location,m.replace);function j(re,le=!0){le||L.pauseListeners(),history.go(re)}const ee=assign$1({location:"",base:$,go:j,createHref:createHref.bind(null,$)},m,L);return Object.defineProperty(ee,"location",{enumerable:!0,get:()=>m.location.value}),Object.defineProperty(ee,"state",{enumerable:!0,get:()=>m.state.value}),ee}function createWebHashHistory($){return $=location.host?$||location.pathname+location.search:"",$.includes("#")||($+="#"),createWebHistory($)}function isRouteLocation($){return typeof $=="string"||$&&typeof $=="object"}function isRouteName($){return typeof $=="string"||typeof $=="symbol"}const START_LOCATION_NORMALIZED={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},NavigationFailureSymbol=Symbol("");var NavigationFailureType;(function($){$[$.aborted=4]="aborted",$[$.cancelled=8]="cancelled",$[$.duplicated=16]="duplicated"})(NavigationFailureType||(NavigationFailureType={}));function createRouterError($,m){return assign$1(new Error,{type:$,[NavigationFailureSymbol]:!0},m)}function isNavigationFailure($,m){return $ instanceof Error&&NavigationFailureSymbol in $&&(m==null||!!($.type&m))}const BASE_PARAM_PATTERN="[^/]+?",BASE_PATH_PARSER_OPTIONS={sensitive:!1,strict:!1,start:!0,end:!0},REGEX_CHARS_RE=/[.+*?^${}()[\]/\\]/g;function tokensToParser($,m){const L=assign$1({},BASE_PATH_PARSER_OPTIONS,m),j=[];let ee=L.start?"^":"";const re=[];for(const Ee of $){const Me=Ee.length?[]:[90];L.strict&&!Ee.length&&(ee+="/");for(let Ce=0;Ce<Ee.length;Ce++){const De=Ee[Ce];let Be=40+(L.sensitive?.25:0);if(De.type===0)Ce||(ee+="/"),ee+=De.value.replace(REGEX_CHARS_RE,"\\$&"),Be+=40;else if(De.type===1){const{value:ke,repeatable:Fe,optional:Oe,regexp:Ne}=De;re.push({name:ke,repeatable:Fe,optional:Oe});const ze=Ne||BASE_PARAM_PATTERN;if(ze!==BASE_PARAM_PATTERN){Be+=10;try{new RegExp(`(${ze})`)}catch(He){throw new Error(`Invalid custom RegExp for param "${ke}" (${ze}): `+He.message)}}let $e=Fe?`((?:${ze})(?:/(?:${ze}))*)`:`(${ze})`;Ce||($e=Oe&&Ee.length<2?`(?:/${$e})`:"/"+$e),Oe&&($e+="?"),ee+=$e,Be+=20,Oe&&(Be+=-8),Fe&&(Be+=-20),ze===".*"&&(Be+=-50)}Me.push(Be)}j.push(Me)}if(L.strict&&L.end){const Ee=j.length-1;j[Ee][j[Ee].length-1]+=.7000000000000001}L.strict||(ee+="/?"),L.end?ee+="$":L.strict&&(ee+="(?:/|$)");const le=new RegExp(ee,L.sensitive?"":"i");function ve(Ee){const Me=Ee.match(le),Ce={};if(!Me)return null;for(let De=1;De<Me.length;De++){const Be=Me[De]||"",ke=re[De-1];Ce[ke.name]=Be&&ke.repeatable?Be.split("/"):Be}return Ce}function ye(Ee){let Me="",Ce=!1;for(const De of $){(!Ce||!Me.endsWith("/"))&&(Me+="/"),Ce=!1;for(const Be of De)if(Be.type===0)Me+=Be.value;else if(Be.type===1){const{value:ke,repeatable:Fe,optional:Oe}=Be,Ne=ke in Ee?Ee[ke]:"";if(isArray$3(Ne)&&!Fe)throw new Error(`Provided param "${ke}" is an array but it is not repeatable (* or + modifiers)`);const ze=isArray$3(Ne)?Ne.join("/"):Ne;if(!ze)if(Oe)De.length<2&&(Me.endsWith("/")?Me=Me.slice(0,-1):Ce=!0);else throw new Error(`Missing required param "${ke}"`);Me+=ze}}return Me||"/"}return{re:le,score:j,keys:re,parse:ve,stringify:ye}}function compareScoreArray($,m){let L=0;for(;L<$.length&&L<m.length;){const j=m[L]-$[L];if(j)return j;L++}return $.length<m.length?$.length===1&&$[0]===80?-1:1:$.length>m.length?m.length===1&&m[0]===80?1:-1:0}function comparePathParserScore($,m){let L=0;const j=$.score,ee=m.score;for(;L<j.length&&L<ee.length;){const re=compareScoreArray(j[L],ee[L]);if(re)return re;L++}if(Math.abs(ee.length-j.length)===1){if(isLastScoreNegative(j))return 1;if(isLastScoreNegative(ee))return-1}return ee.length-j.length}function isLastScoreNegative($){const m=$[$.length-1];return $.length>0&&m[m.length-1]<0}const ROOT_TOKEN={type:0,value:""},VALID_PARAM_RE=/[a-zA-Z0-9_]/;function tokenizePath($){if(!$)return[[]];if($==="/")return[[ROOT_TOKEN]];if(!$.startsWith("/"))throw new Error(`Invalid path "${$}"`);function m(Be){throw new Error(`ERR (${L})/"${Ee}": ${Be}`)}let L=0,j=L;const ee=[];let re;function le(){re&&ee.push(re),re=[]}let ve=0,ye,Ee="",Me="";function Ce(){Ee&&(L===0?re.push({type:0,value:Ee}):L===1||L===2||L===3?(re.length>1&&(ye==="*"||ye==="+")&&m(`A repeatable param (${Ee}) must be alone in its segment. eg: '/:ids+.`),re.push({type:1,value:Ee,regexp:Me,repeatable:ye==="*"||ye==="+",optional:ye==="*"||ye==="?"})):m("Invalid state to consume buffer"),Ee="")}function De(){Ee+=ye}for(;ve<$.length;){if(ye=$[ve++],ye==="\\"&&L!==2){j=L,L=4;continue}switch(L){case 0:ye==="/"?(Ee&&Ce(),le()):ye===":"?(Ce(),L=1):De();break;case 4:De(),L=j;break;case 1:ye==="("?L=2:VALID_PARAM_RE.test(ye)?De():(Ce(),L=0,ye!=="*"&&ye!=="?"&&ye!=="+"&&ve--);break;case 2:ye===")"?Me[Me.length-1]=="\\"?Me=Me.slice(0,-1)+ye:L=3:Me+=ye;break;case 3:Ce(),L=0,ye!=="*"&&ye!=="?"&&ye!=="+"&&ve--,Me="";break;default:m("Unknown state");break}}return L===2&&m(`Unfinished custom RegExp for param "${Ee}"`),Ce(),le(),ee}function createRouteRecordMatcher($,m,L){const j=tokensToParser(tokenizePath($.path),L),ee=assign$1(j,{record:$,parent:m,children:[],alias:[]});return m&&!ee.record.aliasOf==!m.record.aliasOf&&m.children.push(ee),ee}function createRouterMatcher($,m){const L=[],j=new Map;m=mergeOptions({strict:!1,end:!0,sensitive:!1},m);function ee(Me){return j.get(Me)}function re(Me,Ce,De){const Be=!De,ke=normalizeRouteRecord(Me);ke.aliasOf=De&&De.record;const Fe=mergeOptions(m,Me),Oe=[ke];if("alias"in Me){const $e=typeof Me.alias=="string"?[Me.alias]:Me.alias;for(const He of $e)Oe.push(assign$1({},ke,{components:De?De.record.components:ke.components,path:He,aliasOf:De?De.record:ke}))}let Ne,ze;for(const $e of Oe){const{path:He}=$e;if(Ce&&He[0]!=="/"){const We=Ce.record.path,qe=We[We.length-1]==="/"?"":"/";$e.path=Ce.record.path+(He&&qe+He)}if(Ne=createRouteRecordMatcher($e,Ce,Fe),De?De.alias.push(Ne):(ze=ze||Ne,ze!==Ne&&ze.alias.push(Ne),Be&&Me.name&&!isAliasRecord(Ne)&&le(Me.name)),ke.children){const We=ke.children;for(let qe=0;qe<We.length;qe++)re(We[qe],Ne,De&&De.children[qe])}De=De||Ne,(Ne.record.components&&Object.keys(Ne.record.components).length||Ne.record.name||Ne.record.redirect)&&ye(Ne)}return ze?()=>{le(ze)}:noop$2}function le(Me){if(isRouteName(Me)){const Ce=j.get(Me);Ce&&(j.delete(Me),L.splice(L.indexOf(Ce),1),Ce.children.forEach(le),Ce.alias.forEach(le))}else{const Ce=L.indexOf(Me);Ce>-1&&(L.splice(Ce,1),Me.record.name&&j.delete(Me.record.name),Me.children.forEach(le),Me.alias.forEach(le))}}function ve(){return L}function ye(Me){let Ce=0;for(;Ce<L.length&&comparePathParserScore(Me,L[Ce])>=0&&(Me.record.path!==L[Ce].record.path||!isRecordChildOf(Me,L[Ce]));)Ce++;L.splice(Ce,0,Me),Me.record.name&&!isAliasRecord(Me)&&j.set(Me.record.name,Me)}function Ee(Me,Ce){let De,Be={},ke,Fe;if("name"in Me&&Me.name){if(De=j.get(Me.name),!De)throw createRouterError(1,{location:Me});Fe=De.record.name,Be=assign$1(paramsFromLocation(Ce.params,De.keys.filter(ze=>!ze.optional).concat(De.parent?De.parent.keys.filter(ze=>ze.optional):[]).map(ze=>ze.name)),Me.params&&paramsFromLocation(Me.params,De.keys.map(ze=>ze.name))),ke=De.stringify(Be)}else if(Me.path!=null)ke=Me.path,De=L.find(ze=>ze.re.test(ke)),De&&(Be=De.parse(ke),Fe=De.record.name);else{if(De=Ce.name?j.get(Ce.name):L.find(ze=>ze.re.test(Ce.path)),!De)throw createRouterError(1,{location:Me,currentLocation:Ce});Fe=De.record.name,Be=assign$1({},Ce.params,Me.params),ke=De.stringify(Be)}const Oe=[];let Ne=De;for(;Ne;)Oe.unshift(Ne.record),Ne=Ne.parent;return{name:Fe,path:ke,params:Be,matched:Oe,meta:mergeMetaFields(Oe)}}return $.forEach(Me=>re(Me)),{addRoute:re,resolve:Ee,removeRoute:le,getRoutes:ve,getRecordMatcher:ee}}function paramsFromLocation($,m){const L={};for(const j of m)j in $&&(L[j]=$[j]);return L}function normalizeRouteRecord($){return{path:$.path,redirect:$.redirect,name:$.name,meta:$.meta||{},aliasOf:void 0,beforeEnter:$.beforeEnter,props:normalizeRecordProps($),children:$.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in $?$.components||null:$.component&&{default:$.component}}}function normalizeRecordProps($){const m={},L=$.props||!1;if("component"in $)m.default=L;else for(const j in $.components)m[j]=typeof L=="object"?L[j]:L;return m}function isAliasRecord($){for(;$;){if($.record.aliasOf)return!0;$=$.parent}return!1}function mergeMetaFields($){return $.reduce((m,L)=>assign$1(m,L.meta),{})}function mergeOptions($,m){const L={};for(const j in $)L[j]=j in m?m[j]:$[j];return L}function isRecordChildOf($,m){return m.children.some(L=>L===$||isRecordChildOf($,L))}function parseQuery($){const m={};if($===""||$==="?")return m;const j=($[0]==="?"?$.slice(1):$).split("&");for(let ee=0;ee<j.length;++ee){const re=j[ee].replace(PLUS_RE," "),le=re.indexOf("="),ve=decode(le<0?re:re.slice(0,le)),ye=le<0?null:decode(re.slice(le+1));if(ve in m){let Ee=m[ve];isArray$3(Ee)||(Ee=m[ve]=[Ee]),Ee.push(ye)}else m[ve]=ye}return m}function stringifyQuery($){let m="";for(let L in $){const j=$[L];if(L=encodeQueryKey(L),j==null){j!==void 0&&(m+=(m.length?"&":"")+L);continue}(isArray$3(j)?j.map(re=>re&&encodeQueryValue(re)):[j&&encodeQueryValue(j)]).forEach(re=>{re!==void 0&&(m+=(m.length?"&":"")+L,re!=null&&(m+="="+re))})}return m}function normalizeQuery($){const m={};for(const L in $){const j=$[L];j!==void 0&&(m[L]=isArray$3(j)?j.map(ee=>ee==null?null:""+ee):j==null?j:""+j)}return m}const matchedRouteKey=Symbol(""),viewDepthKey=Symbol(""),routerKey=Symbol(""),routeLocationKey=Symbol(""),routerViewLocationKey=Symbol("");function useCallbacks(){let $=[];function m(j){return $.push(j),()=>{const ee=$.indexOf(j);ee>-1&&$.splice(ee,1)}}function L(){$=[]}return{add:m,list:()=>$.slice(),reset:L}}function guardToPromiseFn($,m,L,j,ee,re=le=>le()){const le=j&&(j.enterCallbacks[ee]=j.enterCallbacks[ee]||[]);return()=>new Promise((ve,ye)=>{const Ee=De=>{De===!1?ye(createRouterError(4,{from:L,to:m})):De instanceof Error?ye(De):isRouteLocation(De)?ye(createRouterError(2,{from:m,to:De})):(le&&j.enterCallbacks[ee]===le&&typeof De=="function"&&le.push(De),ve())},Me=re(()=>$.call(j&&j.instances[ee],m,L,Ee));let Ce=Promise.resolve(Me);$.length<3&&(Ce=Ce.then(Ee)),Ce.catch(De=>ye(De))})}function extractComponentsGuards($,m,L,j,ee=re=>re()){const re=[];for(const le of $)for(const ve in le.components){let ye=le.components[ve];if(!(m!=="beforeRouteEnter"&&!le.instances[ve]))if(isRouteComponent(ye)){const Me=(ye.__vccOpts||ye)[m];Me&&re.push(guardToPromiseFn(Me,L,j,le,ve,ee))}else{let Ee=ye();re.push(()=>Ee.then(Me=>{if(!Me)return Promise.reject(new Error(`Couldn't resolve component "${ve}" at "${le.path}"`));const Ce=isESModule(Me)?Me.default:Me;le.components[ve]=Ce;const Be=(Ce.__vccOpts||Ce)[m];return Be&&guardToPromiseFn(Be,L,j,le,ve,ee)()}))}}return re}function isRouteComponent($){return typeof $=="object"||"displayName"in $||"props"in $||"__vccOpts"in $}function useLink($){const m=inject(routerKey),L=inject(routeLocationKey),j=computed(()=>{const ye=unref($.to);return m.resolve(ye)}),ee=computed(()=>{const{matched:ye}=j.value,{length:Ee}=ye,Me=ye[Ee-1],Ce=L.matched;if(!Me||!Ce.length)return-1;const De=Ce.findIndex(isSameRouteRecord.bind(null,Me));if(De>-1)return De;const Be=getOriginalPath(ye[Ee-2]);return Ee>1&&getOriginalPath(Me)===Be&&Ce[Ce.length-1].path!==Be?Ce.findIndex(isSameRouteRecord.bind(null,ye[Ee-2])):De}),re=computed(()=>ee.value>-1&&includesParams(L.params,j.value.params)),le=computed(()=>ee.value>-1&&ee.value===L.matched.length-1&&isSameRouteLocationParams(L.params,j.value.params));function ve(ye={}){return guardEvent(ye)?m[unref($.replace)?"replace":"push"](unref($.to)).catch(noop$2):Promise.resolve()}return{route:j,href:computed(()=>j.value.href),isActive:re,isExactActive:le,navigate:ve}}const RouterLinkImpl=defineComponent({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink,setup($,{slots:m}){const L=reactive(useLink($)),{options:j}=inject(routerKey),ee=computed(()=>({[getLinkClass($.activeClass,j.linkActiveClass,"router-link-active")]:L.isActive,[getLinkClass($.exactActiveClass,j.linkExactActiveClass,"router-link-exact-active")]:L.isExactActive}));return()=>{const re=m.default&&m.default(L);return $.custom?re:h("a",{"aria-current":L.isExactActive?$.ariaCurrentValue:null,href:L.href,onClick:L.navigate,class:ee.value},re)}}}),RouterLink=RouterLinkImpl;function guardEvent($){if(!($.metaKey||$.altKey||$.ctrlKey||$.shiftKey)&&!$.defaultPrevented&&!($.button!==void 0&&$.button!==0)){if($.currentTarget&&$.currentTarget.getAttribute){const m=$.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(m))return}return $.preventDefault&&$.preventDefault(),!0}}function includesParams($,m){for(const L in m){const j=m[L],ee=$[L];if(typeof j=="string"){if(j!==ee)return!1}else if(!isArray$3(ee)||ee.length!==j.length||j.some((re,le)=>re!==ee[le]))return!1}return!0}function getOriginalPath($){return $?$.aliasOf?$.aliasOf.path:$.path:""}const getLinkClass=($,m,L)=>$??m??L,RouterViewImpl=defineComponent({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup($,{attrs:m,slots:L}){const j=inject(routerViewLocationKey),ee=computed(()=>$.route||j.value),re=inject(viewDepthKey,0),le=computed(()=>{let Ee=unref(re);const{matched:Me}=ee.value;let Ce;for(;(Ce=Me[Ee])&&!Ce.components;)Ee++;return Ee}),ve=computed(()=>ee.value.matched[le.value]);provide(viewDepthKey,computed(()=>le.value+1)),provide(matchedRouteKey,ve),provide(routerViewLocationKey,ee);const ye=ref();return watch(()=>[ye.value,ve.value,$.name],([Ee,Me,Ce],[De,Be,ke])=>{Me&&(Me.instances[Ce]=Ee,Be&&Be!==Me&&Ee&&Ee===De&&(Me.leaveGuards.size||(Me.leaveGuards=Be.leaveGuards),Me.updateGuards.size||(Me.updateGuards=Be.updateGuards))),Ee&&Me&&(!Be||!isSameRouteRecord(Me,Be)||!De)&&(Me.enterCallbacks[Ce]||[]).forEach(Fe=>Fe(Ee))},{flush:"post"}),()=>{const Ee=ee.value,Me=$.name,Ce=ve.value,De=Ce&&Ce.components[Me];if(!De)return normalizeSlot(L.default,{Component:De,route:Ee});const Be=Ce.props[Me],ke=Be?Be===!0?Ee.params:typeof Be=="function"?Be(Ee):Be:null,Oe=h(De,assign$1({},ke,m,{onVnodeUnmounted:Ne=>{Ne.component.isUnmounted&&(Ce.instances[Me]=null)},ref:ye}));return normalizeSlot(L.default,{Component:Oe,route:Ee})||Oe}}});function normalizeSlot($,m){if(!$)return null;const L=$(m);return L.length===1?L[0]:L}const RouterView=RouterViewImpl;function createRouter($){const m=createRouterMatcher($.routes,$),L=$.parseQuery||parseQuery,j=$.stringifyQuery||stringifyQuery,ee=$.history,re=useCallbacks(),le=useCallbacks(),ve=useCallbacks(),ye=shallowRef(START_LOCATION_NORMALIZED);let Ee=START_LOCATION_NORMALIZED;isBrowser$1&&$.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const Me=applyToParams.bind(null,Tt=>""+Tt),Ce=applyToParams.bind(null,encodeParam),De=applyToParams.bind(null,decode);function Be(Tt,qt){let on,pn;return isRouteName(Tt)?(on=m.getRecordMatcher(Tt),pn=qt):pn=Tt,m.addRoute(pn,on)}function ke(Tt){const qt=m.getRecordMatcher(Tt);qt&&m.removeRoute(qt)}function Fe(){return m.getRoutes().map(Tt=>Tt.record)}function Oe(Tt){return!!m.getRecordMatcher(Tt)}function Ne(Tt,qt){if(qt=assign$1({},qt||ye.value),typeof Tt=="string"){const It=parseURL(L,Tt,qt.path),Kt=m.resolve({path:It.path},qt),ln=ee.createHref(It.fullPath);return assign$1(It,Kt,{params:De(Kt.params),hash:decode(It.hash),redirectedFrom:void 0,href:ln})}let on;if(Tt.path!=null)on=assign$1({},Tt,{path:parseURL(L,Tt.path,qt.path).path});else{const It=assign$1({},Tt.params);for(const Kt in It)It[Kt]==null&&delete It[Kt];on=assign$1({},Tt,{params:Ce(It)}),qt.params=Ce(qt.params)}const pn=m.resolve(on,qt),kt=Tt.hash||"";pn.params=Me(De(pn.params));const Mn=stringifyURL(j,assign$1({},Tt,{hash:encodeHash(kt),path:pn.path})),wt=ee.createHref(Mn);return assign$1({fullPath:Mn,hash:kt,query:j===stringifyQuery?normalizeQuery(Tt.query):Tt.query||{}},pn,{redirectedFrom:void 0,href:wt})}function ze(Tt){return typeof Tt=="string"?parseURL(L,Tt,ye.value.path):assign$1({},Tt)}function $e(Tt,qt){if(Ee!==Tt)return createRouterError(8,{from:qt,to:Tt})}function He(Tt){return Ye(Tt)}function We(Tt){return He(assign$1(ze(Tt),{replace:!0}))}function qe(Tt){const qt=Tt.matched[Tt.matched.length-1];if(qt&&qt.redirect){const{redirect:on}=qt;let pn=typeof on=="function"?on(Tt):on;return typeof pn=="string"&&(pn=pn.includes("?")||pn.includes("#")?pn=ze(pn):{path:pn},pn.params={}),assign$1({query:Tt.query,hash:Tt.hash,params:pn.path!=null?{}:Tt.params},pn)}}function Ye(Tt,qt){const on=Ee=Ne(Tt),pn=ye.value,kt=Tt.state,Mn=Tt.force,wt=Tt.replace===!0,It=qe(on);if(It)return Ye(assign$1(ze(It),{state:typeof It=="object"?assign$1({},kt,It.state):kt,force:Mn,replace:wt}),qt||on);const Kt=on;Kt.redirectedFrom=qt;let ln;return!Mn&&isSameRouteLocation(j,pn,on)&&(ln=createRouterError(16,{to:Kt,from:pn}),Dt(pn,pn,!0,!1)),(ln?Promise.resolve(ln):rt(Kt,pn)).catch(nn=>isNavigationFailure(nn)?isNavigationFailure(nn,2)?nn:Bt(nn):Xe(nn,Kt,pn)).then(nn=>{if(nn){if(isNavigationFailure(nn,2))return Ye(assign$1({replace:wt},ze(nn.to),{state:typeof nn.to=="object"?assign$1({},kt,nn.to.state):kt,force:Mn}),qt||Kt)}else nn=mt(Kt,pn,!0,wt,kt);return ft(Kt,pn,nn),nn})}function Ze(Tt,qt){const on=$e(Tt,qt);return on?Promise.reject(on):Promise.resolve()}function Ke(Tt){const qt=zt.values().next().value;return qt&&typeof qt.runWithContext=="function"?qt.runWithContext(Tt):Tt()}function rt(Tt,qt){let on;const[pn,kt,Mn]=extractChangingRecords(Tt,qt);on=extractComponentsGuards(pn.reverse(),"beforeRouteLeave",Tt,qt);for(const It of pn)It.leaveGuards.forEach(Kt=>{on.push(guardToPromiseFn(Kt,Tt,qt))});const wt=Ze.bind(null,Tt,qt);return on.push(wt),Mt(on).then(()=>{on=[];for(const It of re.list())on.push(guardToPromiseFn(It,Tt,qt));return on.push(wt),Mt(on)}).then(()=>{on=extractComponentsGuards(kt,"beforeRouteUpdate",Tt,qt);for(const It of kt)It.updateGuards.forEach(Kt=>{on.push(guardToPromiseFn(Kt,Tt,qt))});return on.push(wt),Mt(on)}).then(()=>{on=[];for(const It of Mn)if(It.beforeEnter)if(isArray$3(It.beforeEnter))for(const Kt of It.beforeEnter)on.push(guardToPromiseFn(Kt,Tt,qt));else on.push(guardToPromiseFn(It.beforeEnter,Tt,qt));return on.push(wt),Mt(on)}).then(()=>(Tt.matched.forEach(It=>It.enterCallbacks={}),on=extractComponentsGuards(Mn,"beforeRouteEnter",Tt,qt,Ke),on.push(wt),Mt(on))).then(()=>{on=[];for(const It of le.list())on.push(guardToPromiseFn(It,Tt,qt));return on.push(wt),Mt(on)}).catch(It=>isNavigationFailure(It,8)?It:Promise.reject(It))}function ft(Tt,qt,on){ve.list().forEach(pn=>Ke(()=>pn(Tt,qt,on)))}function mt(Tt,qt,on,pn,kt){const Mn=$e(Tt,qt);if(Mn)return Mn;const wt=qt===START_LOCATION_NORMALIZED,It=isBrowser$1?history.state:{};on&&(pn||wt?ee.replace(Tt.fullPath,assign$1({scroll:wt&&It&&It.scroll},kt)):ee.push(Tt.fullPath,kt)),ye.value=Tt,Dt(Tt,qt,on,wt),Bt()}let Et;function bt(){Et||(Et=ee.listen((Tt,qt,on)=>{if(!Vt.listening)return;const pn=Ne(Tt),kt=qe(pn);if(kt){Ye(assign$1(kt,{replace:!0}),pn).catch(noop$2);return}Ee=pn;const Mn=ye.value;isBrowser$1&&saveScrollPosition(getScrollKey(Mn.fullPath,on.delta),computeScrollPosition()),rt(pn,Mn).catch(wt=>isNavigationFailure(wt,12)?wt:isNavigationFailure(wt,2)?(Ye(wt.to,pn).then(It=>{isNavigationFailure(It,20)&&!on.delta&&on.type===NavigationType.pop&&ee.go(-1,!1)}).catch(noop$2),Promise.reject()):(on.delta&&ee.go(-on.delta,!1),Xe(wt,pn,Mn))).then(wt=>{wt=wt||mt(pn,Mn,!1),wt&&(on.delta&&!isNavigationFailure(wt,8)?ee.go(-on.delta,!1):on.type===NavigationType.pop&&isNavigationFailure(wt,20)&&ee.go(-1,!1)),ft(pn,Mn,wt)}).catch(noop$2)}))}let Ct=useCallbacks(),st=useCallbacks(),at;function Xe(Tt,qt,on){Bt(Tt);const pn=st.list();return pn.length?pn.forEach(kt=>kt(Tt,qt,on)):console.error(Tt),Promise.reject(Tt)}function ht(){return at&&ye.value!==START_LOCATION_NORMALIZED?Promise.resolve():new Promise((Tt,qt)=>{Ct.add([Tt,qt])})}function Bt(Tt){return at||(at=!Tt,bt(),Ct.list().forEach(([qt,on])=>Tt?on(Tt):qt()),Ct.reset()),Tt}function Dt(Tt,qt,on,pn){const{scrollBehavior:kt}=$;if(!isBrowser$1||!kt)return Promise.resolve();const Mn=!on&&getSavedScrollPosition(getScrollKey(Tt.fullPath,0))||(pn||!on)&&history.state&&history.state.scroll||null;return nextTick().then(()=>kt(Tt,qt,Mn)).then(wt=>wt&&scrollToPosition(wt)).catch(wt=>Xe(wt,Tt,qt))}const Jt=Tt=>ee.go(Tt);let tn;const zt=new Set,Vt={currentRoute:ye,listening:!0,addRoute:Be,removeRoute:ke,hasRoute:Oe,getRoutes:Fe,resolve:Ne,options:$,push:He,replace:We,go:Jt,back:()=>Jt(-1),forward:()=>Jt(1),beforeEach:re.add,beforeResolve:le.add,afterEach:ve.add,onError:st.add,isReady:ht,install(Tt){const qt=this;Tt.component("RouterLink",RouterLink),Tt.component("RouterView",RouterView),Tt.config.globalProperties.$router=qt,Object.defineProperty(Tt.config.globalProperties,"$route",{enumerable:!0,get:()=>unref(ye)}),isBrowser$1&&!tn&&ye.value===START_LOCATION_NORMALIZED&&(tn=!0,He(ee.location).catch(kt=>{}));const on={};for(const kt in START_LOCATION_NORMALIZED)Object.defineProperty(on,kt,{get:()=>ye.value[kt],enumerable:!0});Tt.provide(routerKey,qt),Tt.provide(routeLocationKey,shallowReactive(on)),Tt.provide(routerViewLocationKey,ye);const pn=Tt.unmount;zt.add(Tt),Tt.unmount=function(){zt.delete(Tt),zt.size<1&&(Ee=START_LOCATION_NORMALIZED,Et&&Et(),Et=null,ye.value=START_LOCATION_NORMALIZED,tn=!1,at=!1),pn()}}};function Mt(Tt){return Tt.reduce((qt,on)=>qt.then(()=>Ke(on)),Promise.resolve())}return Vt}function extractChangingRecords($,m){const L=[],j=[],ee=[],re=Math.max(m.matched.length,$.matched.length);for(let le=0;le<re;le++){const ve=m.matched[le];ve&&($.matched.find(Ee=>isSameRouteRecord(Ee,ve))?j.push(ve):L.push(ve));const ye=$.matched[le];ye&&(m.matched.find(Ee=>isSameRouteRecord(Ee,ye))||ee.push(ye))}return[L,j,ee]}function useRoute(){return inject(routeLocationKey)}const interpolatePath=($,m)=>m.path.replace(/(:\w+)\([^)]+\)/g,"$1").replace(/(:\w+)[?+*]/g,"$1").replace(/:\w+/g,L=>{var j;return((j=$.params[L.slice(1)])==null?void 0:j.toString())||""}),generateRouteKey$1=($,m)=>{const L=$.route.matched.find(ee=>{var re;return((re=ee.components)==null?void 0:re.default)===$.Component.type}),j=m??(L==null?void 0:L.meta.key)??(L&&interpolatePath($.route,L));return typeof j=="function"?j($.route):j},wrapInKeepAlive=($,m)=>({default:()=>$?h(KeepAlive,$===!0?{}:$,m):m});function toArray$3($){return Array.isArray($)?$:[$]}function _assertThisInitialized($){if($===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $}function _inheritsLoose($,m){$.prototype=Object.create(m.prototype),$.prototype.constructor=$,$.__proto__=m}/*!
 * GSAP 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var _config={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},_defaults={duration:.5,overwrite:!1,delay:0},_suppressOverwrites,_reverting$1,_context,_bigNum$2=1e8,_tinyNum=1/_bigNum$2,_2PI=Math.PI*2,_HALF_PI=_2PI/4,_gsID=0,_sqrt$1=Math.sqrt,_cos$1=Math.cos,_sin$1=Math.sin,_isString=function(m){return typeof m=="string"},_isFunction=function(m){return typeof m=="function"},_isNumber$1=function(m){return typeof m=="number"},_isUndefined=function(m){return typeof m>"u"},_isObject=function(m){return typeof m=="object"},_isNotFalse=function(m){return m!==!1},_windowExists$1=function(){return typeof window<"u"},_isFuncOrString=function(m){return _isFunction(m)||_isString(m)},_isTypedArray=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},_isArray$1=Array.isArray,_strictNumExp=/(?:-?\.?\d|\.)+/gi,_numExp$1=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,_numWithUnitExp=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,_complexStringNumExp=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,_relExp=/[+-]=-?[.\d]+/,_delimitedValueExp=/[^,'"\[\]\s]+/gi,_unitExp=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,_globalTimeline,_win$2,_coreInitted$2,_doc$2,_globals={},_installScope={},_coreReady,_install=function(m){return(_installScope=_merge(m,_globals))&&gsap$1},_missingPlugin=function(m,L){return console.warn("Invalid property",m,"set to",L,"Missing plugin? gsap.registerPlugin()")},_warn=function(m,L){return!L&&console.warn(m)},_addGlobal=function(m,L){return m&&(_globals[m]=L)&&_installScope&&(_installScope[m]=L)||_globals},_emptyFunc=function(){return 0},_startAtRevertConfig={suppressEvents:!0,isStart:!0,kill:!1},_revertConfigNoKill={suppressEvents:!0,kill:!1},_revertConfig={suppressEvents:!0},_reservedProps={},_lazyTweens=[],_lazyLookup={},_lastRenderedFrame,_plugins={},_effects={},_nextGCFrame=30,_harnessPlugins=[],_callbackNames="",_harness=function(m){var L=m[0],j,ee;if(_isObject(L)||_isFunction(L)||(m=[m]),!(j=(L._gsap||{}).harness)){for(ee=_harnessPlugins.length;ee--&&!_harnessPlugins[ee].targetTest(L););j=_harnessPlugins[ee]}for(ee=m.length;ee--;)m[ee]&&(m[ee]._gsap||(m[ee]._gsap=new GSCache(m[ee],j)))||m.splice(ee,1);return m},_getCache=function(m){return m._gsap||_harness(toArray$2(m))[0]._gsap},_getProperty=function(m,L,j){return(j=m[L])&&_isFunction(j)?m[L]():_isUndefined(j)&&m.getAttribute&&m.getAttribute(L)||j},_forEachName=function(m,L){return(m=m.split(",")).forEach(L)||m},_round$2=function(m){return Math.round(m*1e5)/1e5||0},_roundPrecise=function(m){return Math.round(m*1e7)/1e7||0},_parseRelative=function(m,L){var j=L.charAt(0),ee=parseFloat(L.substr(2));return m=parseFloat(m),j==="+"?m+ee:j==="-"?m-ee:j==="*"?m*ee:m/ee},_arrayContainsAny=function(m,L){for(var j=L.length,ee=0;m.indexOf(L[ee])<0&&++ee<j;);return ee<j},_lazyRender=function(){var m=_lazyTweens.length,L=_lazyTweens.slice(0),j,ee;for(_lazyLookup={},_lazyTweens.length=0,j=0;j<m;j++)ee=L[j],ee&&ee._lazy&&(ee.render(ee._lazy[0],ee._lazy[1],!0)._lazy=0)},_lazySafeRender=function(m,L,j,ee){_lazyTweens.length&&!_reverting$1&&_lazyRender(),m.render(L,j,ee||_reverting$1&&L<0&&(m._initted||m._startAt)),_lazyTweens.length&&!_reverting$1&&_lazyRender()},_numericIfPossible=function(m){var L=parseFloat(m);return(L||L===0)&&(m+"").match(_delimitedValueExp).length<2?L:_isString(m)?m.trim():m},_passThrough=function(m){return m},_setDefaults=function(m,L){for(var j in L)j in m||(m[j]=L[j]);return m},_setKeyframeDefaults=function(m){return function(L,j){for(var ee in j)ee in L||ee==="duration"&&m||ee==="ease"||(L[ee]=j[ee])}},_merge=function(m,L){for(var j in L)m[j]=L[j];return m},_mergeDeep=function $(m,L){for(var j in L)j!=="__proto__"&&j!=="constructor"&&j!=="prototype"&&(m[j]=_isObject(L[j])?$(m[j]||(m[j]={}),L[j]):L[j]);return m},_copyExcluding=function(m,L){var j={},ee;for(ee in m)ee in L||(j[ee]=m[ee]);return j},_inheritDefaults=function(m){var L=m.parent||_globalTimeline,j=m.keyframes?_setKeyframeDefaults(_isArray$1(m.keyframes)):_setDefaults;if(_isNotFalse(m.inherit))for(;L;)j(m,L.vars.defaults),L=L.parent||L._dp;return m},_arraysMatch=function(m,L){for(var j=m.length,ee=j===L.length;ee&&j--&&m[j]===L[j];);return j<0},_addLinkedListItem=function(m,L,j,ee,re){j===void 0&&(j="_first"),ee===void 0&&(ee="_last");var le=m[ee],ve;if(re)for(ve=L[re];le&&le[re]>ve;)le=le._prev;return le?(L._next=le._next,le._next=L):(L._next=m[j],m[j]=L),L._next?L._next._prev=L:m[ee]=L,L._prev=le,L.parent=L._dp=m,L},_removeLinkedListItem=function(m,L,j,ee){j===void 0&&(j="_first"),ee===void 0&&(ee="_last");var re=L._prev,le=L._next;re?re._next=le:m[j]===L&&(m[j]=le),le?le._prev=re:m[ee]===L&&(m[ee]=re),L._next=L._prev=L.parent=null},_removeFromParent=function(m,L){m.parent&&(!L||m.parent.autoRemoveChildren)&&m.parent.remove&&m.parent.remove(m),m._act=0},_uncache=function(m,L){if(m&&(!L||L._end>m._dur||L._start<0))for(var j=m;j;)j._dirty=1,j=j.parent;return m},_recacheAncestors=function(m){for(var L=m.parent;L&&L.parent;)L._dirty=1,L.totalDuration(),L=L.parent;return m},_rewindStartAt=function(m,L,j,ee){return m._startAt&&(_reverting$1?m._startAt.revert(_revertConfigNoKill):m.vars.immediateRender&&!m.vars.autoRevert||m._startAt.render(L,!0,ee))},_hasNoPausedAncestors=function $(m){return!m||m._ts&&$(m.parent)},_elapsedCycleDuration=function(m){return m._repeat?_animationCycle(m._tTime,m=m.duration()+m._rDelay)*m:0},_animationCycle=function(m,L){var j=Math.floor(m/=L);return m&&j===m?j-1:j},_parentToChildTotalTime=function(m,L){return(m-L._start)*L._ts+(L._ts>=0?0:L._dirty?L.totalDuration():L._tDur)},_setEnd=function(m){return m._end=_roundPrecise(m._start+(m._tDur/Math.abs(m._ts||m._rts||_tinyNum)||0))},_alignPlayhead=function(m,L){var j=m._dp;return j&&j.smoothChildTiming&&m._ts&&(m._start=_roundPrecise(j._time-(m._ts>0?L/m._ts:((m._dirty?m.totalDuration():m._tDur)-L)/-m._ts)),_setEnd(m),j._dirty||_uncache(j,m)),m},_postAddChecks=function(m,L){var j;if((L._time||!L._dur&&L._initted||L._start<m._time&&(L._dur||!L.add))&&(j=_parentToChildTotalTime(m.rawTime(),L),(!L._dur||_clamp(0,L.totalDuration(),j)-L._tTime>_tinyNum)&&L.render(j,!0)),_uncache(m,L)._dp&&m._initted&&m._time>=m._dur&&m._ts){if(m._dur<m.duration())for(j=m;j._dp;)j.rawTime()>=0&&j.totalTime(j._tTime),j=j._dp;m._zTime=-_tinyNum}},_addToTimeline=function(m,L,j,ee){return L.parent&&_removeFromParent(L),L._start=_roundPrecise((_isNumber$1(j)?j:j||m!==_globalTimeline?_parsePosition(m,j,L):m._time)+L._delay),L._end=_roundPrecise(L._start+(L.totalDuration()/Math.abs(L.timeScale())||0)),_addLinkedListItem(m,L,"_first","_last",m._sort?"_start":0),_isFromOrFromStart(L)||(m._recent=L),ee||_postAddChecks(m,L),m._ts<0&&_alignPlayhead(m,m._tTime),m},_scrollTrigger=function(m,L){return(_globals.ScrollTrigger||_missingPlugin("scrollTrigger",L))&&_globals.ScrollTrigger.create(L,m)},_attemptInitTween=function(m,L,j,ee,re){if(_initTween(m,L,re),!m._initted)return 1;if(!j&&m._pt&&!_reverting$1&&(m._dur&&m.vars.lazy!==!1||!m._dur&&m.vars.lazy)&&_lastRenderedFrame!==_ticker.frame)return _lazyTweens.push(m),m._lazy=[re,ee],1},_parentPlayheadIsBeforeStart=function $(m){var L=m.parent;return L&&L._ts&&L._initted&&!L._lock&&(L.rawTime()<0||$(L))},_isFromOrFromStart=function(m){var L=m.data;return L==="isFromStart"||L==="isStart"},_renderZeroDurationTween=function(m,L,j,ee){var re=m.ratio,le=L<0||!L&&(!m._start&&_parentPlayheadIsBeforeStart(m)&&!(!m._initted&&_isFromOrFromStart(m))||(m._ts<0||m._dp._ts<0)&&!_isFromOrFromStart(m))?0:1,ve=m._rDelay,ye=0,Ee,Me,Ce;if(ve&&m._repeat&&(ye=_clamp(0,m._tDur,L),Me=_animationCycle(ye,ve),m._yoyo&&Me&1&&(le=1-le),Me!==_animationCycle(m._tTime,ve)&&(re=1-le,m.vars.repeatRefresh&&m._initted&&m.invalidate())),le!==re||_reverting$1||ee||m._zTime===_tinyNum||!L&&m._zTime){if(!m._initted&&_attemptInitTween(m,L,ee,j,ye))return;for(Ce=m._zTime,m._zTime=L||(j?_tinyNum:0),j||(j=L&&!Ce),m.ratio=le,m._from&&(le=1-le),m._time=0,m._tTime=ye,Ee=m._pt;Ee;)Ee.r(le,Ee.d),Ee=Ee._next;L<0&&_rewindStartAt(m,L,j,!0),m._onUpdate&&!j&&_callback(m,"onUpdate"),ye&&m._repeat&&!j&&m.parent&&_callback(m,"onRepeat"),(L>=m._tDur||L<0)&&m.ratio===le&&(le&&_removeFromParent(m,1),!j&&!_reverting$1&&(_callback(m,le?"onComplete":"onReverseComplete",!0),m._prom&&m._prom()))}else m._zTime||(m._zTime=L)},_findNextPauseTween=function(m,L,j){var ee;if(j>L)for(ee=m._first;ee&&ee._start<=j;){if(ee.data==="isPause"&&ee._start>L)return ee;ee=ee._next}else for(ee=m._last;ee&&ee._start>=j;){if(ee.data==="isPause"&&ee._start<L)return ee;ee=ee._prev}},_setDuration=function(m,L,j,ee){var re=m._repeat,le=_roundPrecise(L)||0,ve=m._tTime/m._tDur;return ve&&!ee&&(m._time*=le/m._dur),m._dur=le,m._tDur=re?re<0?1e10:_roundPrecise(le*(re+1)+m._rDelay*re):le,ve>0&&!ee&&_alignPlayhead(m,m._tTime=m._tDur*ve),m.parent&&_setEnd(m),j||_uncache(m.parent,m),m},_onUpdateTotalDuration=function(m){return m instanceof Timeline?_uncache(m):_setDuration(m,m._dur)},_zeroPosition={_start:0,endTime:_emptyFunc,totalDuration:_emptyFunc},_parsePosition=function $(m,L,j){var ee=m.labels,re=m._recent||_zeroPosition,le=m.duration()>=_bigNum$2?re.endTime(!1):m._dur,ve,ye,Ee;return _isString(L)&&(isNaN(L)||L in ee)?(ye=L.charAt(0),Ee=L.substr(-1)==="%",ve=L.indexOf("="),ye==="<"||ye===">"?(ve>=0&&(L=L.replace(/=/,"")),(ye==="<"?re._start:re.endTime(re._repeat>=0))+(parseFloat(L.substr(1))||0)*(Ee?(ve<0?re:j).totalDuration()/100:1)):ve<0?(L in ee||(ee[L]=le),ee[L]):(ye=parseFloat(L.charAt(ve-1)+L.substr(ve+1)),Ee&&j&&(ye=ye/100*(_isArray$1(j)?j[0]:j).totalDuration()),ve>1?$(m,L.substr(0,ve-1),j)+ye:le+ye)):L==null?le:+L},_createTweenType=function(m,L,j){var ee=_isNumber$1(L[1]),re=(ee?2:1)+(m<2?0:1),le=L[re],ve,ye;if(ee&&(le.duration=L[1]),le.parent=j,m){for(ve=le,ye=j;ye&&!("immediateRender"in ve);)ve=ye.vars.defaults||{},ye=_isNotFalse(ye.vars.inherit)&&ye.parent;le.immediateRender=_isNotFalse(ve.immediateRender),m<2?le.runBackwards=1:le.startAt=L[re-1]}return new Tween(L[0],le,L[re+1])},_conditionalReturn=function(m,L){return m||m===0?L(m):L},_clamp=function(m,L,j){return j<m?m:j>L?L:j},getUnit=function(m,L){return!_isString(m)||!(L=_unitExp.exec(m))?"":L[1]},clamp$2=function(m,L,j){return _conditionalReturn(j,function(ee){return _clamp(m,L,ee)})},_slice$1=[].slice,_isArrayLike=function(m,L){return m&&_isObject(m)&&"length"in m&&(!L&&!m.length||m.length-1 in m&&_isObject(m[0]))&&!m.nodeType&&m!==_win$2},_flatten=function(m,L,j){return j===void 0&&(j=[]),m.forEach(function(ee){var re;return _isString(ee)&&!L||_isArrayLike(ee,1)?(re=j).push.apply(re,toArray$2(ee)):j.push(ee)})||j},toArray$2=function(m,L,j){return _context&&!L&&_context.selector?_context.selector(m):_isString(m)&&!j&&(_coreInitted$2||!_wake())?_slice$1.call((L||_doc$2).querySelectorAll(m),0):_isArray$1(m)?_flatten(m,j):_isArrayLike(m)?_slice$1.call(m,0):m?[m]:[]},selector=function(m){return m=toArray$2(m)[0]||_warn("Invalid scope")||{},function(L){var j=m.current||m.nativeElement||m;return toArray$2(L,j.querySelectorAll?j:j===m?_warn("Invalid scope")||_doc$2.createElement("div"):m)}},shuffle$1=function(m){return m.sort(function(){return .5-Math.random()})},distribute=function(m){if(_isFunction(m))return m;var L=_isObject(m)?m:{each:m},j=_parseEase(L.ease),ee=L.from||0,re=parseFloat(L.base)||0,le={},ve=ee>0&&ee<1,ye=isNaN(ee)||ve,Ee=L.axis,Me=ee,Ce=ee;return _isString(ee)?Me=Ce={center:.5,edges:.5,end:1}[ee]||0:!ve&&ye&&(Me=ee[0],Ce=ee[1]),function(De,Be,ke){var Fe=(ke||L).length,Oe=le[Fe],Ne,ze,$e,He,We,qe,Ye,Ze,Ke;if(!Oe){if(Ke=L.grid==="auto"?0:(L.grid||[1,_bigNum$2])[1],!Ke){for(Ye=-_bigNum$2;Ye<(Ye=ke[Ke++].getBoundingClientRect().left)&&Ke<Fe;);Ke<Fe&&Ke--}for(Oe=le[Fe]=[],Ne=ye?Math.min(Ke,Fe)*Me-.5:ee%Ke,ze=Ke===_bigNum$2?0:ye?Fe*Ce/Ke-.5:ee/Ke|0,Ye=0,Ze=_bigNum$2,qe=0;qe<Fe;qe++)$e=qe%Ke-Ne,He=ze-(qe/Ke|0),Oe[qe]=We=Ee?Math.abs(Ee==="y"?He:$e):_sqrt$1($e*$e+He*He),We>Ye&&(Ye=We),We<Ze&&(Ze=We);ee==="random"&&shuffle$1(Oe),Oe.max=Ye-Ze,Oe.min=Ze,Oe.v=Fe=(parseFloat(L.amount)||parseFloat(L.each)*(Ke>Fe?Fe-1:Ee?Ee==="y"?Fe/Ke:Ke:Math.max(Ke,Fe/Ke))||0)*(ee==="edges"?-1:1),Oe.b=Fe<0?re-Fe:re,Oe.u=getUnit(L.amount||L.each)||0,j=j&&Fe<0?_invertEase(j):j}return Fe=(Oe[De]-Oe.min)/Oe.max||0,_roundPrecise(Oe.b+(j?j(Fe):Fe)*Oe.v)+Oe.u}},_roundModifier=function(m){var L=Math.pow(10,((m+"").split(".")[1]||"").length);return function(j){var ee=_roundPrecise(Math.round(parseFloat(j)/m)*m*L);return(ee-ee%1)/L+(_isNumber$1(j)?0:getUnit(j))}},snap=function(m,L){var j=_isArray$1(m),ee,re;return!j&&_isObject(m)&&(ee=j=m.radius||_bigNum$2,m.values?(m=toArray$2(m.values),(re=!_isNumber$1(m[0]))&&(ee*=ee)):m=_roundModifier(m.increment)),_conditionalReturn(L,j?_isFunction(m)?function(le){return re=m(le),Math.abs(re-le)<=ee?re:le}:function(le){for(var ve=parseFloat(re?le.x:le),ye=parseFloat(re?le.y:0),Ee=_bigNum$2,Me=0,Ce=m.length,De,Be;Ce--;)re?(De=m[Ce].x-ve,Be=m[Ce].y-ye,De=De*De+Be*Be):De=Math.abs(m[Ce]-ve),De<Ee&&(Ee=De,Me=Ce);return Me=!ee||Ee<=ee?m[Me]:le,re||Me===le||_isNumber$1(le)?Me:Me+getUnit(le)}:_roundModifier(m))},random$1=function(m,L,j,ee){return _conditionalReturn(_isArray$1(m)?!L:j===!0?!!(j=0):!ee,function(){return _isArray$1(m)?m[~~(Math.random()*m.length)]:(j=j||1e-5)&&(ee=j<1?Math.pow(10,(j+"").length-2):1)&&Math.floor(Math.round((m-j/2+Math.random()*(L-m+j*.99))/j)*j*ee)/ee})},pipe=function(){for(var m=arguments.length,L=new Array(m),j=0;j<m;j++)L[j]=arguments[j];return function(ee){return L.reduce(function(re,le){return le(re)},ee)}},unitize=function(m,L){return function(j){return m(parseFloat(j))+(L||getUnit(j))}},normalize$1=function(m,L,j){return mapRange(m,L,0,1,j)},_wrapArray=function(m,L,j){return _conditionalReturn(j,function(ee){return m[~~L(ee)]})},wrap$2=function $(m,L,j){var ee=L-m;return _isArray$1(m)?_wrapArray(m,$(0,m.length),L):_conditionalReturn(j,function(re){return(ee+(re-m)%ee)%ee+m})},wrapYoyo=function $(m,L,j){var ee=L-m,re=ee*2;return _isArray$1(m)?_wrapArray(m,$(0,m.length-1),L):_conditionalReturn(j,function(le){return le=(re+(le-m)%re)%re||0,m+(le>ee?re-le:le)})},_replaceRandom=function(m){for(var L=0,j="",ee,re,le,ve;~(ee=m.indexOf("random(",L));)le=m.indexOf(")",ee),ve=m.charAt(ee+7)==="[",re=m.substr(ee+7,le-ee-7).match(ve?_delimitedValueExp:_strictNumExp),j+=m.substr(L,ee-L)+random$1(ve?re:+re[0],ve?0:+re[1],+re[2]||1e-5),L=le+1;return j+m.substr(L,m.length-L)},mapRange=function(m,L,j,ee,re){var le=L-m,ve=ee-j;return _conditionalReturn(re,function(ye){return j+((ye-m)/le*ve||0)})},interpolate=function $(m,L,j,ee){var re=isNaN(m+L)?0:function(Be){return(1-Be)*m+Be*L};if(!re){var le=_isString(m),ve={},ye,Ee,Me,Ce,De;if(j===!0&&(ee=1)&&(j=null),le)m={p:m},L={p:L};else if(_isArray$1(m)&&!_isArray$1(L)){for(Me=[],Ce=m.length,De=Ce-2,Ee=1;Ee<Ce;Ee++)Me.push($(m[Ee-1],m[Ee]));Ce--,re=function(ke){ke*=Ce;var Fe=Math.min(De,~~ke);return Me[Fe](ke-Fe)},j=L}else ee||(m=_merge(_isArray$1(m)?[]:{},m));if(!Me){for(ye in L)_addPropTween.call(ve,m,ye,"get",L[ye]);re=function(ke){return _renderPropTweens(ke,ve)||(le?m.p:m)}}}return _conditionalReturn(j,re)},_getLabelInDirection=function(m,L,j){var ee=m.labels,re=_bigNum$2,le,ve,ye;for(le in ee)ve=ee[le]-L,ve<0==!!j&&ve&&re>(ve=Math.abs(ve))&&(ye=le,re=ve);return ye},_callback=function(m,L,j){var ee=m.vars,re=ee[L],le=_context,ve=m._ctx,ye,Ee,Me;if(re)return ye=ee[L+"Params"],Ee=ee.callbackScope||m,j&&_lazyTweens.length&&_lazyRender(),ve&&(_context=ve),Me=ye?re.apply(Ee,ye):re.call(Ee),_context=le,Me},_interrupt=function(m){return _removeFromParent(m),m.scrollTrigger&&m.scrollTrigger.kill(!!_reverting$1),m.progress()<1&&_callback(m,"onInterrupt"),m},_quickTween,_registerPluginQueue=[],_createPlugin=function(m){if(m)if(m=!m.name&&m.default||m,_windowExists$1()||m.headless){var L=m.name,j=_isFunction(m),ee=L&&!j&&m.init?function(){this._props=[]}:m,re={init:_emptyFunc,render:_renderPropTweens,add:_addPropTween,kill:_killPropTweensOf,modifier:_addPluginModifier,rawVars:0},le={targetTest:0,get:0,getSetter:_getSetter,aliases:{},register:0};if(_wake(),m!==ee){if(_plugins[L])return;_setDefaults(ee,_setDefaults(_copyExcluding(m,re),le)),_merge(ee.prototype,_merge(re,_copyExcluding(m,le))),_plugins[ee.prop=L]=ee,m.targetTest&&(_harnessPlugins.push(ee),_reservedProps[L]=1),L=(L==="css"?"CSS":L.charAt(0).toUpperCase()+L.substr(1))+"Plugin"}_addGlobal(L,ee),m.register&&m.register(gsap$1,ee,PropTween)}else _registerPluginQueue.push(m)},_255=255,_colorLookup={aqua:[0,_255,_255],lime:[0,_255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,_255],navy:[0,0,128],white:[_255,_255,_255],olive:[128,128,0],yellow:[_255,_255,0],orange:[_255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[_255,0,0],pink:[_255,192,203],cyan:[0,_255,_255],transparent:[_255,_255,_255,0]},_hue=function(m,L,j){return m+=m<0?1:m>1?-1:0,(m*6<1?L+(j-L)*m*6:m<.5?j:m*3<2?L+(j-L)*(2/3-m)*6:L)*_255+.5|0},splitColor=function(m,L,j){var ee=m?_isNumber$1(m)?[m>>16,m>>8&_255,m&_255]:0:_colorLookup.black,re,le,ve,ye,Ee,Me,Ce,De,Be,ke;if(!ee){if(m.substr(-1)===","&&(m=m.substr(0,m.length-1)),_colorLookup[m])ee=_colorLookup[m];else if(m.charAt(0)==="#"){if(m.length<6&&(re=m.charAt(1),le=m.charAt(2),ve=m.charAt(3),m="#"+re+re+le+le+ve+ve+(m.length===5?m.charAt(4)+m.charAt(4):"")),m.length===9)return ee=parseInt(m.substr(1,6),16),[ee>>16,ee>>8&_255,ee&_255,parseInt(m.substr(7),16)/255];m=parseInt(m.substr(1),16),ee=[m>>16,m>>8&_255,m&_255]}else if(m.substr(0,3)==="hsl"){if(ee=ke=m.match(_strictNumExp),!L)ye=+ee[0]%360/360,Ee=+ee[1]/100,Me=+ee[2]/100,le=Me<=.5?Me*(Ee+1):Me+Ee-Me*Ee,re=Me*2-le,ee.length>3&&(ee[3]*=1),ee[0]=_hue(ye+1/3,re,le),ee[1]=_hue(ye,re,le),ee[2]=_hue(ye-1/3,re,le);else if(~m.indexOf("="))return ee=m.match(_numExp$1),j&&ee.length<4&&(ee[3]=1),ee}else ee=m.match(_strictNumExp)||_colorLookup.transparent;ee=ee.map(Number)}return L&&!ke&&(re=ee[0]/_255,le=ee[1]/_255,ve=ee[2]/_255,Ce=Math.max(re,le,ve),De=Math.min(re,le,ve),Me=(Ce+De)/2,Ce===De?ye=Ee=0:(Be=Ce-De,Ee=Me>.5?Be/(2-Ce-De):Be/(Ce+De),ye=Ce===re?(le-ve)/Be+(le<ve?6:0):Ce===le?(ve-re)/Be+2:(re-le)/Be+4,ye*=60),ee[0]=~~(ye+.5),ee[1]=~~(Ee*100+.5),ee[2]=~~(Me*100+.5)),j&&ee.length<4&&(ee[3]=1),ee},_colorOrderData=function(m){var L=[],j=[],ee=-1;return m.split(_colorExp).forEach(function(re){var le=re.match(_numWithUnitExp)||[];L.push.apply(L,le),j.push(ee+=le.length+1)}),L.c=j,L},_formatColors=function(m,L,j){var ee="",re=(m+ee).match(_colorExp),le=L?"hsla(":"rgba(",ve=0,ye,Ee,Me,Ce;if(!re)return m;if(re=re.map(function(De){return(De=splitColor(De,L,1))&&le+(L?De[0]+","+De[1]+"%,"+De[2]+"%,"+De[3]:De.join(","))+")"}),j&&(Me=_colorOrderData(m),ye=j.c,ye.join(ee)!==Me.c.join(ee)))for(Ee=m.replace(_colorExp,"1").split(_numWithUnitExp),Ce=Ee.length-1;ve<Ce;ve++)ee+=Ee[ve]+(~ye.indexOf(ve)?re.shift()||le+"0,0,0,0)":(Me.length?Me:re.length?re:j).shift());if(!Ee)for(Ee=m.split(_colorExp),Ce=Ee.length-1;ve<Ce;ve++)ee+=Ee[ve]+re[ve];return ee+Ee[Ce]},_colorExp=function(){var $="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",m;for(m in _colorLookup)$+="|"+m+"\\b";return new RegExp($+")","gi")}(),_hslExp=/hsl[a]?\(/,_colorStringFilter=function(m){var L=m.join(" "),j;if(_colorExp.lastIndex=0,_colorExp.test(L))return j=_hslExp.test(L),m[1]=_formatColors(m[1],j),m[0]=_formatColors(m[0],j,_colorOrderData(m[1])),!0},_tickerActive,_ticker=function(){var $=Date.now,m=500,L=33,j=$(),ee=j,re=1e3/240,le=re,ve=[],ye,Ee,Me,Ce,De,Be,ke=function Fe(Oe){var Ne=$()-ee,ze=Oe===!0,$e,He,We,qe;if((Ne>m||Ne<0)&&(j+=Ne-L),ee+=Ne,We=ee-j,$e=We-le,($e>0||ze)&&(qe=++Ce.frame,De=We-Ce.time*1e3,Ce.time=We=We/1e3,le+=$e+($e>=re?4:re-$e),He=1),ze||(ye=Ee(Fe)),He)for(Be=0;Be<ve.length;Be++)ve[Be](We,De,qe,Oe)};return Ce={time:0,frame:0,tick:function(){ke(!0)},deltaRatio:function(Oe){return De/(1e3/(Oe||60))},wake:function(){_coreReady&&(!_coreInitted$2&&_windowExists$1()&&(_win$2=_coreInitted$2=window,_doc$2=_win$2.document||{},_globals.gsap=gsap$1,(_win$2.gsapVersions||(_win$2.gsapVersions=[])).push(gsap$1.version),_install(_installScope||_win$2.GreenSockGlobals||!_win$2.gsap&&_win$2||{}),_registerPluginQueue.forEach(_createPlugin)),Me=typeof requestAnimationFrame<"u"&&requestAnimationFrame,ye&&Ce.sleep(),Ee=Me||function(Oe){return setTimeout(Oe,le-Ce.time*1e3+1|0)},_tickerActive=1,ke(2))},sleep:function(){(Me?cancelAnimationFrame:clearTimeout)(ye),_tickerActive=0,Ee=_emptyFunc},lagSmoothing:function(Oe,Ne){m=Oe||1/0,L=Math.min(Ne||33,m)},fps:function(Oe){re=1e3/(Oe||240),le=Ce.time*1e3+re},add:function(Oe,Ne,ze){var $e=Ne?function(He,We,qe,Ye){Oe(He,We,qe,Ye),Ce.remove($e)}:Oe;return Ce.remove(Oe),ve[ze?"unshift":"push"]($e),_wake(),$e},remove:function(Oe,Ne){~(Ne=ve.indexOf(Oe))&&ve.splice(Ne,1)&&Be>=Ne&&Be--},_listeners:ve},Ce}(),_wake=function(){return!_tickerActive&&_ticker.wake()},_easeMap={},_customEaseExp=/^[\d.\-M][\d.\-,\s]/,_quotesExp=/["']/g,_parseObjectInString=function(m){for(var L={},j=m.substr(1,m.length-3).split(":"),ee=j[0],re=1,le=j.length,ve,ye,Ee;re<le;re++)ye=j[re],ve=re!==le-1?ye.lastIndexOf(","):ye.length,Ee=ye.substr(0,ve),L[ee]=isNaN(Ee)?Ee.replace(_quotesExp,"").trim():+Ee,ee=ye.substr(ve+1).trim();return L},_valueInParentheses=function(m){var L=m.indexOf("(")+1,j=m.indexOf(")"),ee=m.indexOf("(",L);return m.substring(L,~ee&&ee<j?m.indexOf(")",j+1):j)},_configEaseFromString=function(m){var L=(m+"").split("("),j=_easeMap[L[0]];return j&&L.length>1&&j.config?j.config.apply(null,~m.indexOf("{")?[_parseObjectInString(L[1])]:_valueInParentheses(m).split(",").map(_numericIfPossible)):_easeMap._CE&&_customEaseExp.test(m)?_easeMap._CE("",m):j},_invertEase=function(m){return function(L){return 1-m(1-L)}},_propagateYoyoEase=function $(m,L){for(var j=m._first,ee;j;)j instanceof Timeline?$(j,L):j.vars.yoyoEase&&(!j._yoyo||!j._repeat)&&j._yoyo!==L&&(j.timeline?$(j.timeline,L):(ee=j._ease,j._ease=j._yEase,j._yEase=ee,j._yoyo=L)),j=j._next},_parseEase=function(m,L){return m&&(_isFunction(m)?m:_easeMap[m]||_configEaseFromString(m))||L},_insertEase=function(m,L,j,ee){j===void 0&&(j=function(ye){return 1-L(1-ye)}),ee===void 0&&(ee=function(ye){return ye<.5?L(ye*2)/2:1-L((1-ye)*2)/2});var re={easeIn:L,easeOut:j,easeInOut:ee},le;return _forEachName(m,function(ve){_easeMap[ve]=_globals[ve]=re,_easeMap[le=ve.toLowerCase()]=j;for(var ye in re)_easeMap[le+(ye==="easeIn"?".in":ye==="easeOut"?".out":".inOut")]=_easeMap[ve+"."+ye]=re[ye]}),re},_easeInOutFromOut=function(m){return function(L){return L<.5?(1-m(1-L*2))/2:.5+m((L-.5)*2)/2}},_configElastic=function $(m,L,j){var ee=L>=1?L:1,re=(j||(m?.3:.45))/(L<1?L:1),le=re/_2PI*(Math.asin(1/ee)||0),ve=function(Me){return Me===1?1:ee*Math.pow(2,-10*Me)*_sin$1((Me-le)*re)+1},ye=m==="out"?ve:m==="in"?function(Ee){return 1-ve(1-Ee)}:_easeInOutFromOut(ve);return re=_2PI/re,ye.config=function(Ee,Me){return $(m,Ee,Me)},ye},_configBack=function $(m,L){L===void 0&&(L=1.70158);var j=function(le){return le?--le*le*((L+1)*le+L)+1:0},ee=m==="out"?j:m==="in"?function(re){return 1-j(1-re)}:_easeInOutFromOut(j);return ee.config=function(re){return $(m,re)},ee};_forEachName("Linear,Quad,Cubic,Quart,Quint,Strong",function($,m){var L=m<5?m+1:m;_insertEase($+",Power"+(L-1),m?function(j){return Math.pow(j,L)}:function(j){return j},function(j){return 1-Math.pow(1-j,L)},function(j){return j<.5?Math.pow(j*2,L)/2:1-Math.pow((1-j)*2,L)/2})});_easeMap.Linear.easeNone=_easeMap.none=_easeMap.Linear.easeIn;_insertEase("Elastic",_configElastic("in"),_configElastic("out"),_configElastic());(function($,m){var L=1/m,j=2*L,ee=2.5*L,re=function(ve){return ve<L?$*ve*ve:ve<j?$*Math.pow(ve-1.5/m,2)+.75:ve<ee?$*(ve-=2.25/m)*ve+.9375:$*Math.pow(ve-2.625/m,2)+.984375};_insertEase("Bounce",function(le){return 1-re(1-le)},re)})(7.5625,2.75);_insertEase("Expo",function($){return $?Math.pow(2,10*($-1)):0});_insertEase("Circ",function($){return-(_sqrt$1(1-$*$)-1)});_insertEase("Sine",function($){return $===1?1:-_cos$1($*_HALF_PI)+1});_insertEase("Back",_configBack("in"),_configBack("out"),_configBack());_easeMap.SteppedEase=_easeMap.steps=_globals.SteppedEase={config:function(m,L){m===void 0&&(m=1);var j=1/m,ee=m+(L?0:1),re=L?1:0,le=1-_tinyNum;return function(ve){return((ee*_clamp(0,le,ve)|0)+re)*j}}};_defaults.ease=_easeMap["quad.out"];_forEachName("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function($){return _callbackNames+=$+","+$+"Params,"});var GSCache=function(m,L){this.id=_gsID++,m._gsap=this,this.target=m,this.harness=L,this.get=L?L.get:_getProperty,this.set=L?L.getSetter:_getSetter},Animation=function(){function $(L){this.vars=L,this._delay=+L.delay||0,(this._repeat=L.repeat===1/0?-2:L.repeat||0)&&(this._rDelay=L.repeatDelay||0,this._yoyo=!!L.yoyo||!!L.yoyoEase),this._ts=1,_setDuration(this,+L.duration,1,1),this.data=L.data,_context&&(this._ctx=_context,_context.data.push(this)),_tickerActive||_ticker.wake()}var m=$.prototype;return m.delay=function(j){return j||j===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+j-this._delay),this._delay=j,this):this._delay},m.duration=function(j){return arguments.length?this.totalDuration(this._repeat>0?j+(j+this._rDelay)*this._repeat:j):this.totalDuration()&&this._dur},m.totalDuration=function(j){return arguments.length?(this._dirty=0,_setDuration(this,this._repeat<0?j:(j-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},m.totalTime=function(j,ee){if(_wake(),!arguments.length)return this._tTime;var re=this._dp;if(re&&re.smoothChildTiming&&this._ts){for(_alignPlayhead(this,j),!re._dp||re.parent||_postAddChecks(re,this);re&&re.parent;)re.parent._time!==re._start+(re._ts>=0?re._tTime/re._ts:(re.totalDuration()-re._tTime)/-re._ts)&&re.totalTime(re._tTime,!0),re=re.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&j<this._tDur||this._ts<0&&j>0||!this._tDur&&!j)&&_addToTimeline(this._dp,this,this._start-this._delay)}return(this._tTime!==j||!this._dur&&!ee||this._initted&&Math.abs(this._zTime)===_tinyNum||!j&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=j),_lazySafeRender(this,j,ee)),this},m.time=function(j,ee){return arguments.length?this.totalTime(Math.min(this.totalDuration(),j+_elapsedCycleDuration(this))%(this._dur+this._rDelay)||(j?this._dur:0),ee):this._time},m.totalProgress=function(j,ee){return arguments.length?this.totalTime(this.totalDuration()*j,ee):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},m.progress=function(j,ee){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-j:j)+_elapsedCycleDuration(this),ee):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},m.iteration=function(j,ee){var re=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(j-1)*re,ee):this._repeat?_animationCycle(this._tTime,re)+1:1},m.timeScale=function(j,ee){if(!arguments.length)return this._rts===-_tinyNum?0:this._rts;if(this._rts===j)return this;var re=this.parent&&this._ts?_parentToChildTotalTime(this.parent._time,this):this._tTime;return this._rts=+j||0,this._ts=this._ps||j===-_tinyNum?0:this._rts,this.totalTime(_clamp(-Math.abs(this._delay),this._tDur,re),ee!==!1),_setEnd(this),_recacheAncestors(this)},m.paused=function(j){return arguments.length?(this._ps!==j&&(this._ps=j,j?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(_wake(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==_tinyNum&&(this._tTime-=_tinyNum)))),this):this._ps},m.startTime=function(j){if(arguments.length){this._start=j;var ee=this.parent||this._dp;return ee&&(ee._sort||!this.parent)&&_addToTimeline(ee,this,j-this._delay),this}return this._start},m.endTime=function(j){return this._start+(_isNotFalse(j)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},m.rawTime=function(j){var ee=this.parent||this._dp;return ee?j&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?_parentToChildTotalTime(ee.rawTime(j),this):this._tTime:this._tTime},m.revert=function(j){j===void 0&&(j=_revertConfig);var ee=_reverting$1;return _reverting$1=j,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(j),this.totalTime(-.01,j.suppressEvents)),this.data!=="nested"&&j.kill!==!1&&this.kill(),_reverting$1=ee,this},m.globalTime=function(j){for(var ee=this,re=arguments.length?j:ee.rawTime();ee;)re=ee._start+re/(Math.abs(ee._ts)||1),ee=ee._dp;return!this.parent&&this._sat?this._sat.globalTime(j):re},m.repeat=function(j){return arguments.length?(this._repeat=j===1/0?-2:j,_onUpdateTotalDuration(this)):this._repeat===-2?1/0:this._repeat},m.repeatDelay=function(j){if(arguments.length){var ee=this._time;return this._rDelay=j,_onUpdateTotalDuration(this),ee?this.time(ee):this}return this._rDelay},m.yoyo=function(j){return arguments.length?(this._yoyo=j,this):this._yoyo},m.seek=function(j,ee){return this.totalTime(_parsePosition(this,j),_isNotFalse(ee))},m.restart=function(j,ee){return this.play().totalTime(j?-this._delay:0,_isNotFalse(ee))},m.play=function(j,ee){return j!=null&&this.seek(j,ee),this.reversed(!1).paused(!1)},m.reverse=function(j,ee){return j!=null&&this.seek(j||this.totalDuration(),ee),this.reversed(!0).paused(!1)},m.pause=function(j,ee){return j!=null&&this.seek(j,ee),this.paused(!0)},m.resume=function(){return this.paused(!1)},m.reversed=function(j){return arguments.length?(!!j!==this.reversed()&&this.timeScale(-this._rts||(j?-_tinyNum:0)),this):this._rts<0},m.invalidate=function(){return this._initted=this._act=0,this._zTime=-_tinyNum,this},m.isActive=function(){var j=this.parent||this._dp,ee=this._start,re;return!!(!j||this._ts&&this._initted&&j.isActive()&&(re=j.rawTime(!0))>=ee&&re<this.endTime(!0)-_tinyNum)},m.eventCallback=function(j,ee,re){var le=this.vars;return arguments.length>1?(ee?(le[j]=ee,re&&(le[j+"Params"]=re),j==="onUpdate"&&(this._onUpdate=ee)):delete le[j],this):le[j]},m.then=function(j){var ee=this;return new Promise(function(re){var le=_isFunction(j)?j:_passThrough,ve=function(){var Ee=ee.then;ee.then=null,_isFunction(le)&&(le=le(ee))&&(le.then||le===ee)&&(ee.then=Ee),re(le),ee.then=Ee};ee._initted&&ee.totalProgress()===1&&ee._ts>=0||!ee._tTime&&ee._ts<0?ve():ee._prom=ve})},m.kill=function(){_interrupt(this)},$}();_setDefaults(Animation.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-_tinyNum,_prom:0,_ps:!1,_rts:1});var Timeline=function($){_inheritsLoose(m,$);function m(j,ee){var re;return j===void 0&&(j={}),re=$.call(this,j)||this,re.labels={},re.smoothChildTiming=!!j.smoothChildTiming,re.autoRemoveChildren=!!j.autoRemoveChildren,re._sort=_isNotFalse(j.sortChildren),_globalTimeline&&_addToTimeline(j.parent||_globalTimeline,_assertThisInitialized(re),ee),j.reversed&&re.reverse(),j.paused&&re.paused(!0),j.scrollTrigger&&_scrollTrigger(_assertThisInitialized(re),j.scrollTrigger),re}var L=m.prototype;return L.to=function(ee,re,le){return _createTweenType(0,arguments,this),this},L.from=function(ee,re,le){return _createTweenType(1,arguments,this),this},L.fromTo=function(ee,re,le,ve){return _createTweenType(2,arguments,this),this},L.set=function(ee,re,le){return re.duration=0,re.parent=this,_inheritDefaults(re).repeatDelay||(re.repeat=0),re.immediateRender=!!re.immediateRender,new Tween(ee,re,_parsePosition(this,le),1),this},L.call=function(ee,re,le){return _addToTimeline(this,Tween.delayedCall(0,ee,re),le)},L.staggerTo=function(ee,re,le,ve,ye,Ee,Me){return le.duration=re,le.stagger=le.stagger||ve,le.onComplete=Ee,le.onCompleteParams=Me,le.parent=this,new Tween(ee,le,_parsePosition(this,ye)),this},L.staggerFrom=function(ee,re,le,ve,ye,Ee,Me){return le.runBackwards=1,_inheritDefaults(le).immediateRender=_isNotFalse(le.immediateRender),this.staggerTo(ee,re,le,ve,ye,Ee,Me)},L.staggerFromTo=function(ee,re,le,ve,ye,Ee,Me,Ce){return ve.startAt=le,_inheritDefaults(ve).immediateRender=_isNotFalse(ve.immediateRender),this.staggerTo(ee,re,ve,ye,Ee,Me,Ce)},L.render=function(ee,re,le){var ve=this._time,ye=this._dirty?this.totalDuration():this._tDur,Ee=this._dur,Me=ee<=0?0:_roundPrecise(ee),Ce=this._zTime<0!=ee<0&&(this._initted||!Ee),De,Be,ke,Fe,Oe,Ne,ze,$e,He,We,qe,Ye;if(this!==_globalTimeline&&Me>ye&&ee>=0&&(Me=ye),Me!==this._tTime||le||Ce){if(ve!==this._time&&Ee&&(Me+=this._time-ve,ee+=this._time-ve),De=Me,He=this._start,$e=this._ts,Ne=!$e,Ce&&(Ee||(ve=this._zTime),(ee||!re)&&(this._zTime=ee)),this._repeat){if(qe=this._yoyo,Oe=Ee+this._rDelay,this._repeat<-1&&ee<0)return this.totalTime(Oe*100+ee,re,le);if(De=_roundPrecise(Me%Oe),Me===ye?(Fe=this._repeat,De=Ee):(Fe=~~(Me/Oe),Fe&&Fe===Me/Oe&&(De=Ee,Fe--),De>Ee&&(De=Ee)),We=_animationCycle(this._tTime,Oe),!ve&&this._tTime&&We!==Fe&&this._tTime-We*Oe-this._dur<=0&&(We=Fe),qe&&Fe&1&&(De=Ee-De,Ye=1),Fe!==We&&!this._lock){var Ze=qe&&We&1,Ke=Ze===(qe&&Fe&1);if(Fe<We&&(Ze=!Ze),ve=Ze?0:Me%Ee?Ee:Me,this._lock=1,this.render(ve||(Ye?0:_roundPrecise(Fe*Oe)),re,!Ee)._lock=0,this._tTime=Me,!re&&this.parent&&_callback(this,"onRepeat"),this.vars.repeatRefresh&&!Ye&&(this.invalidate()._lock=1),ve&&ve!==this._time||Ne!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(Ee=this._dur,ye=this._tDur,Ke&&(this._lock=2,ve=Ze?Ee:-1e-4,this.render(ve,!0),this.vars.repeatRefresh&&!Ye&&this.invalidate()),this._lock=0,!this._ts&&!Ne)return this;_propagateYoyoEase(this,Ye)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(ze=_findNextPauseTween(this,_roundPrecise(ve),_roundPrecise(De)),ze&&(Me-=De-(De=ze._start))),this._tTime=Me,this._time=De,this._act=!$e,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=ee,ve=0),!ve&&De&&!re&&!Fe&&(_callback(this,"onStart"),this._tTime!==Me))return this;if(De>=ve&&ee>=0)for(Be=this._first;Be;){if(ke=Be._next,(Be._act||De>=Be._start)&&Be._ts&&ze!==Be){if(Be.parent!==this)return this.render(ee,re,le);if(Be.render(Be._ts>0?(De-Be._start)*Be._ts:(Be._dirty?Be.totalDuration():Be._tDur)+(De-Be._start)*Be._ts,re,le),De!==this._time||!this._ts&&!Ne){ze=0,ke&&(Me+=this._zTime=-_tinyNum);break}}Be=ke}else{Be=this._last;for(var rt=ee<0?ee:De;Be;){if(ke=Be._prev,(Be._act||rt<=Be._end)&&Be._ts&&ze!==Be){if(Be.parent!==this)return this.render(ee,re,le);if(Be.render(Be._ts>0?(rt-Be._start)*Be._ts:(Be._dirty?Be.totalDuration():Be._tDur)+(rt-Be._start)*Be._ts,re,le||_reverting$1&&(Be._initted||Be._startAt)),De!==this._time||!this._ts&&!Ne){ze=0,ke&&(Me+=this._zTime=rt?-_tinyNum:_tinyNum);break}}Be=ke}}if(ze&&!re&&(this.pause(),ze.render(De>=ve?0:-_tinyNum)._zTime=De>=ve?1:-1,this._ts))return this._start=He,_setEnd(this),this.render(ee,re,le);this._onUpdate&&!re&&_callback(this,"onUpdate",!0),(Me===ye&&this._tTime>=this.totalDuration()||!Me&&ve)&&(He===this._start||Math.abs($e)!==Math.abs(this._ts))&&(this._lock||((ee||!Ee)&&(Me===ye&&this._ts>0||!Me&&this._ts<0)&&_removeFromParent(this,1),!re&&!(ee<0&&!ve)&&(Me||ve||!ye)&&(_callback(this,Me===ye&&ee>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(Me<ye&&this.timeScale()>0)&&this._prom())))}return this},L.add=function(ee,re){var le=this;if(_isNumber$1(re)||(re=_parsePosition(this,re,ee)),!(ee instanceof Animation)){if(_isArray$1(ee))return ee.forEach(function(ve){return le.add(ve,re)}),this;if(_isString(ee))return this.addLabel(ee,re);if(_isFunction(ee))ee=Tween.delayedCall(0,ee);else return this}return this!==ee?_addToTimeline(this,ee,re):this},L.getChildren=function(ee,re,le,ve){ee===void 0&&(ee=!0),re===void 0&&(re=!0),le===void 0&&(le=!0),ve===void 0&&(ve=-_bigNum$2);for(var ye=[],Ee=this._first;Ee;)Ee._start>=ve&&(Ee instanceof Tween?re&&ye.push(Ee):(le&&ye.push(Ee),ee&&ye.push.apply(ye,Ee.getChildren(!0,re,le)))),Ee=Ee._next;return ye},L.getById=function(ee){for(var re=this.getChildren(1,1,1),le=re.length;le--;)if(re[le].vars.id===ee)return re[le]},L.remove=function(ee){return _isString(ee)?this.removeLabel(ee):_isFunction(ee)?this.killTweensOf(ee):(_removeLinkedListItem(this,ee),ee===this._recent&&(this._recent=this._last),_uncache(this))},L.totalTime=function(ee,re){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=_roundPrecise(_ticker.time-(this._ts>0?ee/this._ts:(this.totalDuration()-ee)/-this._ts))),$.prototype.totalTime.call(this,ee,re),this._forcing=0,this):this._tTime},L.addLabel=function(ee,re){return this.labels[ee]=_parsePosition(this,re),this},L.removeLabel=function(ee){return delete this.labels[ee],this},L.addPause=function(ee,re,le){var ve=Tween.delayedCall(0,re||_emptyFunc,le);return ve.data="isPause",this._hasPause=1,_addToTimeline(this,ve,_parsePosition(this,ee))},L.removePause=function(ee){var re=this._first;for(ee=_parsePosition(this,ee);re;)re._start===ee&&re.data==="isPause"&&_removeFromParent(re),re=re._next},L.killTweensOf=function(ee,re,le){for(var ve=this.getTweensOf(ee,le),ye=ve.length;ye--;)_overwritingTween!==ve[ye]&&ve[ye].kill(ee,re);return this},L.getTweensOf=function(ee,re){for(var le=[],ve=toArray$2(ee),ye=this._first,Ee=_isNumber$1(re),Me;ye;)ye instanceof Tween?_arrayContainsAny(ye._targets,ve)&&(Ee?(!_overwritingTween||ye._initted&&ye._ts)&&ye.globalTime(0)<=re&&ye.globalTime(ye.totalDuration())>re:!re||ye.isActive())&&le.push(ye):(Me=ye.getTweensOf(ve,re)).length&&le.push.apply(le,Me),ye=ye._next;return le},L.tweenTo=function(ee,re){re=re||{};var le=this,ve=_parsePosition(le,ee),ye=re,Ee=ye.startAt,Me=ye.onStart,Ce=ye.onStartParams,De=ye.immediateRender,Be,ke=Tween.to(le,_setDefaults({ease:re.ease||"none",lazy:!1,immediateRender:!1,time:ve,overwrite:"auto",duration:re.duration||Math.abs((ve-(Ee&&"time"in Ee?Ee.time:le._time))/le.timeScale())||_tinyNum,onStart:function(){if(le.pause(),!Be){var Oe=re.duration||Math.abs((ve-(Ee&&"time"in Ee?Ee.time:le._time))/le.timeScale());ke._dur!==Oe&&_setDuration(ke,Oe,0,1).render(ke._time,!0,!0),Be=1}Me&&Me.apply(ke,Ce||[])}},re));return De?ke.render(0):ke},L.tweenFromTo=function(ee,re,le){return this.tweenTo(re,_setDefaults({startAt:{time:_parsePosition(this,ee)}},le))},L.recent=function(){return this._recent},L.nextLabel=function(ee){return ee===void 0&&(ee=this._time),_getLabelInDirection(this,_parsePosition(this,ee))},L.previousLabel=function(ee){return ee===void 0&&(ee=this._time),_getLabelInDirection(this,_parsePosition(this,ee),1)},L.currentLabel=function(ee){return arguments.length?this.seek(ee,!0):this.previousLabel(this._time+_tinyNum)},L.shiftChildren=function(ee,re,le){le===void 0&&(le=0);for(var ve=this._first,ye=this.labels,Ee;ve;)ve._start>=le&&(ve._start+=ee,ve._end+=ee),ve=ve._next;if(re)for(Ee in ye)ye[Ee]>=le&&(ye[Ee]+=ee);return _uncache(this)},L.invalidate=function(ee){var re=this._first;for(this._lock=0;re;)re.invalidate(ee),re=re._next;return $.prototype.invalidate.call(this,ee)},L.clear=function(ee){ee===void 0&&(ee=!0);for(var re=this._first,le;re;)le=re._next,this.remove(re),re=le;return this._dp&&(this._time=this._tTime=this._pTime=0),ee&&(this.labels={}),_uncache(this)},L.totalDuration=function(ee){var re=0,le=this,ve=le._last,ye=_bigNum$2,Ee,Me,Ce;if(arguments.length)return le.timeScale((le._repeat<0?le.duration():le.totalDuration())/(le.reversed()?-ee:ee));if(le._dirty){for(Ce=le.parent;ve;)Ee=ve._prev,ve._dirty&&ve.totalDuration(),Me=ve._start,Me>ye&&le._sort&&ve._ts&&!le._lock?(le._lock=1,_addToTimeline(le,ve,Me-ve._delay,1)._lock=0):ye=Me,Me<0&&ve._ts&&(re-=Me,(!Ce&&!le._dp||Ce&&Ce.smoothChildTiming)&&(le._start+=Me/le._ts,le._time-=Me,le._tTime-=Me),le.shiftChildren(-Me,!1,-1/0),ye=0),ve._end>re&&ve._ts&&(re=ve._end),ve=Ee;_setDuration(le,le===_globalTimeline&&le._time>re?le._time:re,1,1),le._dirty=0}return le._tDur},m.updateRoot=function(ee){if(_globalTimeline._ts&&(_lazySafeRender(_globalTimeline,_parentToChildTotalTime(ee,_globalTimeline)),_lastRenderedFrame=_ticker.frame),_ticker.frame>=_nextGCFrame){_nextGCFrame+=_config.autoSleep||120;var re=_globalTimeline._first;if((!re||!re._ts)&&_config.autoSleep&&_ticker._listeners.length<2){for(;re&&!re._ts;)re=re._next;re||_ticker.sleep()}}},m}(Animation);_setDefaults(Timeline.prototype,{_lock:0,_hasPause:0,_forcing:0});var _addComplexStringPropTween=function(m,L,j,ee,re,le,ve){var ye=new PropTween(this._pt,m,L,0,1,_renderComplexString,null,re),Ee=0,Me=0,Ce,De,Be,ke,Fe,Oe,Ne,ze;for(ye.b=j,ye.e=ee,j+="",ee+="",(Ne=~ee.indexOf("random("))&&(ee=_replaceRandom(ee)),le&&(ze=[j,ee],le(ze,m,L),j=ze[0],ee=ze[1]),De=j.match(_complexStringNumExp)||[];Ce=_complexStringNumExp.exec(ee);)ke=Ce[0],Fe=ee.substring(Ee,Ce.index),Be?Be=(Be+1)%5:Fe.substr(-5)==="rgba("&&(Be=1),ke!==De[Me++]&&(Oe=parseFloat(De[Me-1])||0,ye._pt={_next:ye._pt,p:Fe||Me===1?Fe:",",s:Oe,c:ke.charAt(1)==="="?_parseRelative(Oe,ke)-Oe:parseFloat(ke)-Oe,m:Be&&Be<4?Math.round:0},Ee=_complexStringNumExp.lastIndex);return ye.c=Ee<ee.length?ee.substring(Ee,ee.length):"",ye.fp=ve,(_relExp.test(ee)||Ne)&&(ye.e=0),this._pt=ye,ye},_addPropTween=function(m,L,j,ee,re,le,ve,ye,Ee,Me){_isFunction(ee)&&(ee=ee(re||0,m,le));var Ce=m[L],De=j!=="get"?j:_isFunction(Ce)?Ee?m[L.indexOf("set")||!_isFunction(m["get"+L.substr(3)])?L:"get"+L.substr(3)](Ee):m[L]():Ce,Be=_isFunction(Ce)?Ee?_setterFuncWithParam:_setterFunc:_setterPlain,ke;if(_isString(ee)&&(~ee.indexOf("random(")&&(ee=_replaceRandom(ee)),ee.charAt(1)==="="&&(ke=_parseRelative(De,ee)+(getUnit(De)||0),(ke||ke===0)&&(ee=ke))),!Me||De!==ee||_forceAllPropTweens)return!isNaN(De*ee)&&ee!==""?(ke=new PropTween(this._pt,m,L,+De||0,ee-(De||0),typeof Ce=="boolean"?_renderBoolean:_renderPlain,0,Be),Ee&&(ke.fp=Ee),ve&&ke.modifier(ve,this,m),this._pt=ke):(!Ce&&!(L in m)&&_missingPlugin(L,ee),_addComplexStringPropTween.call(this,m,L,De,ee,Be,ye||_config.stringFilter,Ee))},_processVars=function(m,L,j,ee,re){if(_isFunction(m)&&(m=_parseFuncOrString(m,re,L,j,ee)),!_isObject(m)||m.style&&m.nodeType||_isArray$1(m)||_isTypedArray(m))return _isString(m)?_parseFuncOrString(m,re,L,j,ee):m;var le={},ve;for(ve in m)le[ve]=_parseFuncOrString(m[ve],re,L,j,ee);return le},_checkPlugin=function(m,L,j,ee,re,le){var ve,ye,Ee,Me;if(_plugins[m]&&(ve=new _plugins[m]).init(re,ve.rawVars?L[m]:_processVars(L[m],ee,re,le,j),j,ee,le)!==!1&&(j._pt=ye=new PropTween(j._pt,re,m,0,1,ve.render,ve,0,ve.priority),j!==_quickTween))for(Ee=j._ptLookup[j._targets.indexOf(re)],Me=ve._props.length;Me--;)Ee[ve._props[Me]]=ye;return ve},_overwritingTween,_forceAllPropTweens,_initTween=function $(m,L,j){var ee=m.vars,re=ee.ease,le=ee.startAt,ve=ee.immediateRender,ye=ee.lazy,Ee=ee.onUpdate,Me=ee.runBackwards,Ce=ee.yoyoEase,De=ee.keyframes,Be=ee.autoRevert,ke=m._dur,Fe=m._startAt,Oe=m._targets,Ne=m.parent,ze=Ne&&Ne.data==="nested"?Ne.vars.targets:Oe,$e=m._overwrite==="auto"&&!_suppressOverwrites,He=m.timeline,We,qe,Ye,Ze,Ke,rt,ft,mt,Et,bt,Ct,st,at;if(He&&(!De||!re)&&(re="none"),m._ease=_parseEase(re,_defaults.ease),m._yEase=Ce?_invertEase(_parseEase(Ce===!0?re:Ce,_defaults.ease)):0,Ce&&m._yoyo&&!m._repeat&&(Ce=m._yEase,m._yEase=m._ease,m._ease=Ce),m._from=!He&&!!ee.runBackwards,!He||De&&!ee.stagger){if(mt=Oe[0]?_getCache(Oe[0]).harness:0,st=mt&&ee[mt.prop],We=_copyExcluding(ee,_reservedProps),Fe&&(Fe._zTime<0&&Fe.progress(1),L<0&&Me&&ve&&!Be?Fe.render(-1,!0):Fe.revert(Me&&ke?_revertConfigNoKill:_startAtRevertConfig),Fe._lazy=0),le){if(_removeFromParent(m._startAt=Tween.set(Oe,_setDefaults({data:"isStart",overwrite:!1,parent:Ne,immediateRender:!0,lazy:!Fe&&_isNotFalse(ye),startAt:null,delay:0,onUpdate:Ee&&function(){return _callback(m,"onUpdate")},stagger:0},le))),m._startAt._dp=0,m._startAt._sat=m,L<0&&(_reverting$1||!ve&&!Be)&&m._startAt.revert(_revertConfigNoKill),ve&&ke&&L<=0&&j<=0){L&&(m._zTime=L);return}}else if(Me&&ke&&!Fe){if(L&&(ve=!1),Ye=_setDefaults({overwrite:!1,data:"isFromStart",lazy:ve&&!Fe&&_isNotFalse(ye),immediateRender:ve,stagger:0,parent:Ne},We),st&&(Ye[mt.prop]=st),_removeFromParent(m._startAt=Tween.set(Oe,Ye)),m._startAt._dp=0,m._startAt._sat=m,L<0&&(_reverting$1?m._startAt.revert(_revertConfigNoKill):m._startAt.render(-1,!0)),m._zTime=L,!ve)$(m._startAt,_tinyNum,_tinyNum);else if(!L)return}for(m._pt=m._ptCache=0,ye=ke&&_isNotFalse(ye)||ye&&!ke,qe=0;qe<Oe.length;qe++){if(Ke=Oe[qe],ft=Ke._gsap||_harness(Oe)[qe]._gsap,m._ptLookup[qe]=bt={},_lazyLookup[ft.id]&&_lazyTweens.length&&_lazyRender(),Ct=ze===Oe?qe:ze.indexOf(Ke),mt&&(Et=new mt).init(Ke,st||We,m,Ct,ze)!==!1&&(m._pt=Ze=new PropTween(m._pt,Ke,Et.name,0,1,Et.render,Et,0,Et.priority),Et._props.forEach(function(Xe){bt[Xe]=Ze}),Et.priority&&(rt=1)),!mt||st)for(Ye in We)_plugins[Ye]&&(Et=_checkPlugin(Ye,We,m,Ct,Ke,ze))?Et.priority&&(rt=1):bt[Ye]=Ze=_addPropTween.call(m,Ke,Ye,"get",We[Ye],Ct,ze,0,ee.stringFilter);m._op&&m._op[qe]&&m.kill(Ke,m._op[qe]),$e&&m._pt&&(_overwritingTween=m,_globalTimeline.killTweensOf(Ke,bt,m.globalTime(L)),at=!m.parent,_overwritingTween=0),m._pt&&ye&&(_lazyLookup[ft.id]=1)}rt&&_sortPropTweensByPriority(m),m._onInit&&m._onInit(m)}m._onUpdate=Ee,m._initted=(!m._op||m._pt)&&!at,De&&L<=0&&He.render(_bigNum$2,!0,!0)},_updatePropTweens=function(m,L,j,ee,re,le,ve,ye){var Ee=(m._pt&&m._ptCache||(m._ptCache={}))[L],Me,Ce,De,Be;if(!Ee)for(Ee=m._ptCache[L]=[],De=m._ptLookup,Be=m._targets.length;Be--;){if(Me=De[Be][L],Me&&Me.d&&Me.d._pt)for(Me=Me.d._pt;Me&&Me.p!==L&&Me.fp!==L;)Me=Me._next;if(!Me)return _forceAllPropTweens=1,m.vars[L]="+=0",_initTween(m,ve),_forceAllPropTweens=0,ye?_warn(L+" not eligible for reset"):1;Ee.push(Me)}for(Be=Ee.length;Be--;)Ce=Ee[Be],Me=Ce._pt||Ce,Me.s=(ee||ee===0)&&!re?ee:Me.s+(ee||0)+le*Me.c,Me.c=j-Me.s,Ce.e&&(Ce.e=_round$2(j)+getUnit(Ce.e)),Ce.b&&(Ce.b=Me.s+getUnit(Ce.b))},_addAliasesToVars=function(m,L){var j=m[0]?_getCache(m[0]).harness:0,ee=j&&j.aliases,re,le,ve,ye;if(!ee)return L;re=_merge({},L);for(le in ee)if(le in re)for(ye=ee[le].split(","),ve=ye.length;ve--;)re[ye[ve]]=re[le];return re},_parseKeyframe=function(m,L,j,ee){var re=L.ease||ee||"power1.inOut",le,ve;if(_isArray$1(L))ve=j[m]||(j[m]=[]),L.forEach(function(ye,Ee){return ve.push({t:Ee/(L.length-1)*100,v:ye,e:re})});else for(le in L)ve=j[le]||(j[le]=[]),le==="ease"||ve.push({t:parseFloat(m),v:L[le],e:re})},_parseFuncOrString=function(m,L,j,ee,re){return _isFunction(m)?m.call(L,j,ee,re):_isString(m)&&~m.indexOf("random(")?_replaceRandom(m):m},_staggerTweenProps=_callbackNames+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",_staggerPropsToSkip={};_forEachName(_staggerTweenProps+",id,stagger,delay,duration,paused,scrollTrigger",function($){return _staggerPropsToSkip[$]=1});var Tween=function($){_inheritsLoose(m,$);function m(j,ee,re,le){var ve;typeof ee=="number"&&(re.duration=ee,ee=re,re=null),ve=$.call(this,le?ee:_inheritDefaults(ee))||this;var ye=ve.vars,Ee=ye.duration,Me=ye.delay,Ce=ye.immediateRender,De=ye.stagger,Be=ye.overwrite,ke=ye.keyframes,Fe=ye.defaults,Oe=ye.scrollTrigger,Ne=ye.yoyoEase,ze=ee.parent||_globalTimeline,$e=(_isArray$1(j)||_isTypedArray(j)?_isNumber$1(j[0]):"length"in ee)?[j]:toArray$2(j),He,We,qe,Ye,Ze,Ke,rt,ft;if(ve._targets=$e.length?_harness($e):_warn("GSAP target "+j+" not found. https://gsap.com",!_config.nullTargetWarn)||[],ve._ptLookup=[],ve._overwrite=Be,ke||De||_isFuncOrString(Ee)||_isFuncOrString(Me)){if(ee=ve.vars,He=ve.timeline=new Timeline({data:"nested",defaults:Fe||{},targets:ze&&ze.data==="nested"?ze.vars.targets:$e}),He.kill(),He.parent=He._dp=_assertThisInitialized(ve),He._start=0,De||_isFuncOrString(Ee)||_isFuncOrString(Me)){if(Ye=$e.length,rt=De&&distribute(De),_isObject(De))for(Ze in De)~_staggerTweenProps.indexOf(Ze)&&(ft||(ft={}),ft[Ze]=De[Ze]);for(We=0;We<Ye;We++)qe=_copyExcluding(ee,_staggerPropsToSkip),qe.stagger=0,Ne&&(qe.yoyoEase=Ne),ft&&_merge(qe,ft),Ke=$e[We],qe.duration=+_parseFuncOrString(Ee,_assertThisInitialized(ve),We,Ke,$e),qe.delay=(+_parseFuncOrString(Me,_assertThisInitialized(ve),We,Ke,$e)||0)-ve._delay,!De&&Ye===1&&qe.delay&&(ve._delay=Me=qe.delay,ve._start+=Me,qe.delay=0),He.to(Ke,qe,rt?rt(We,Ke,$e):0),He._ease=_easeMap.none;He.duration()?Ee=Me=0:ve.timeline=0}else if(ke){_inheritDefaults(_setDefaults(He.vars.defaults,{ease:"none"})),He._ease=_parseEase(ke.ease||ee.ease||"none");var mt=0,Et,bt,Ct;if(_isArray$1(ke))ke.forEach(function(st){return He.to($e,st,">")}),He.duration();else{qe={};for(Ze in ke)Ze==="ease"||Ze==="easeEach"||_parseKeyframe(Ze,ke[Ze],qe,ke.easeEach);for(Ze in qe)for(Et=qe[Ze].sort(function(st,at){return st.t-at.t}),mt=0,We=0;We<Et.length;We++)bt=Et[We],Ct={ease:bt.e,duration:(bt.t-(We?Et[We-1].t:0))/100*Ee},Ct[Ze]=bt.v,He.to($e,Ct,mt),mt+=Ct.duration;He.duration()<Ee&&He.to({},{duration:Ee-He.duration()})}}Ee||ve.duration(Ee=He.duration())}else ve.timeline=0;return Be===!0&&!_suppressOverwrites&&(_overwritingTween=_assertThisInitialized(ve),_globalTimeline.killTweensOf($e),_overwritingTween=0),_addToTimeline(ze,_assertThisInitialized(ve),re),ee.reversed&&ve.reverse(),ee.paused&&ve.paused(!0),(Ce||!Ee&&!ke&&ve._start===_roundPrecise(ze._time)&&_isNotFalse(Ce)&&_hasNoPausedAncestors(_assertThisInitialized(ve))&&ze.data!=="nested")&&(ve._tTime=-_tinyNum,ve.render(Math.max(0,-Me)||0)),Oe&&_scrollTrigger(_assertThisInitialized(ve),Oe),ve}var L=m.prototype;return L.render=function(ee,re,le){var ve=this._time,ye=this._tDur,Ee=this._dur,Me=ee<0,Ce=ee>ye-_tinyNum&&!Me?ye:ee<_tinyNum?0:ee,De,Be,ke,Fe,Oe,Ne,ze,$e,He;if(!Ee)_renderZeroDurationTween(this,ee,re,le);else if(Ce!==this._tTime||!ee||le||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==Me){if(De=Ce,$e=this.timeline,this._repeat){if(Fe=Ee+this._rDelay,this._repeat<-1&&Me)return this.totalTime(Fe*100+ee,re,le);if(De=_roundPrecise(Ce%Fe),Ce===ye?(ke=this._repeat,De=Ee):(ke=~~(Ce/Fe),ke&&ke===_roundPrecise(Ce/Fe)&&(De=Ee,ke--),De>Ee&&(De=Ee)),Ne=this._yoyo&&ke&1,Ne&&(He=this._yEase,De=Ee-De),Oe=_animationCycle(this._tTime,Fe),De===ve&&!le&&this._initted&&ke===Oe)return this._tTime=Ce,this;ke!==Oe&&($e&&this._yEase&&_propagateYoyoEase($e,Ne),this.vars.repeatRefresh&&!Ne&&!this._lock&&this._time!==Fe&&this._initted&&(this._lock=le=1,this.render(_roundPrecise(Fe*ke),!0).invalidate()._lock=0))}if(!this._initted){if(_attemptInitTween(this,Me?ee:De,le,re,Ce))return this._tTime=0,this;if(ve!==this._time&&!(le&&this.vars.repeatRefresh&&ke!==Oe))return this;if(Ee!==this._dur)return this.render(ee,re,le)}if(this._tTime=Ce,this._time=De,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=ze=(He||this._ease)(De/Ee),this._from&&(this.ratio=ze=1-ze),De&&!ve&&!re&&!ke&&(_callback(this,"onStart"),this._tTime!==Ce))return this;for(Be=this._pt;Be;)Be.r(ze,Be.d),Be=Be._next;$e&&$e.render(ee<0?ee:$e._dur*$e._ease(De/this._dur),re,le)||this._startAt&&(this._zTime=ee),this._onUpdate&&!re&&(Me&&_rewindStartAt(this,ee,re,le),_callback(this,"onUpdate")),this._repeat&&ke!==Oe&&this.vars.onRepeat&&!re&&this.parent&&_callback(this,"onRepeat"),(Ce===this._tDur||!Ce)&&this._tTime===Ce&&(Me&&!this._onUpdate&&_rewindStartAt(this,ee,!0,!0),(ee||!Ee)&&(Ce===this._tDur&&this._ts>0||!Ce&&this._ts<0)&&_removeFromParent(this,1),!re&&!(Me&&!ve)&&(Ce||ve||Ne)&&(_callback(this,Ce===ye?"onComplete":"onReverseComplete",!0),this._prom&&!(Ce<ye&&this.timeScale()>0)&&this._prom()))}return this},L.targets=function(){return this._targets},L.invalidate=function(ee){return(!ee||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(ee),$.prototype.invalidate.call(this,ee)},L.resetTo=function(ee,re,le,ve,ye){_tickerActive||_ticker.wake(),this._ts||this.play();var Ee=Math.min(this._dur,(this._dp._time-this._start)*this._ts),Me;return this._initted||_initTween(this,Ee),Me=this._ease(Ee/this._dur),_updatePropTweens(this,ee,re,le,ve,Me,Ee,ye)?this.resetTo(ee,re,le,ve,1):(_alignPlayhead(this,0),this.parent||_addLinkedListItem(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},L.kill=function(ee,re){if(re===void 0&&(re="all"),!ee&&(!re||re==="all"))return this._lazy=this._pt=0,this.parent?_interrupt(this):this;if(this.timeline){var le=this.timeline.totalDuration();return this.timeline.killTweensOf(ee,re,_overwritingTween&&_overwritingTween.vars.overwrite!==!0)._first||_interrupt(this),this.parent&&le!==this.timeline.totalDuration()&&_setDuration(this,this._dur*this.timeline._tDur/le,0,1),this}var ve=this._targets,ye=ee?toArray$2(ee):ve,Ee=this._ptLookup,Me=this._pt,Ce,De,Be,ke,Fe,Oe,Ne;if((!re||re==="all")&&_arraysMatch(ve,ye))return re==="all"&&(this._pt=0),_interrupt(this);for(Ce=this._op=this._op||[],re!=="all"&&(_isString(re)&&(Fe={},_forEachName(re,function(ze){return Fe[ze]=1}),re=Fe),re=_addAliasesToVars(ve,re)),Ne=ve.length;Ne--;)if(~ye.indexOf(ve[Ne])){De=Ee[Ne],re==="all"?(Ce[Ne]=re,ke=De,Be={}):(Be=Ce[Ne]=Ce[Ne]||{},ke=re);for(Fe in ke)Oe=De&&De[Fe],Oe&&((!("kill"in Oe.d)||Oe.d.kill(Fe)===!0)&&_removeLinkedListItem(this,Oe,"_pt"),delete De[Fe]),Be!=="all"&&(Be[Fe]=1)}return this._initted&&!this._pt&&Me&&_interrupt(this),this},m.to=function(ee,re){return new m(ee,re,arguments[2])},m.from=function(ee,re){return _createTweenType(1,arguments)},m.delayedCall=function(ee,re,le,ve){return new m(re,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:ee,onComplete:re,onReverseComplete:re,onCompleteParams:le,onReverseCompleteParams:le,callbackScope:ve})},m.fromTo=function(ee,re,le){return _createTweenType(2,arguments)},m.set=function(ee,re){return re.duration=0,re.repeatDelay||(re.repeat=0),new m(ee,re)},m.killTweensOf=function(ee,re,le){return _globalTimeline.killTweensOf(ee,re,le)},m}(Animation);_setDefaults(Tween.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});_forEachName("staggerTo,staggerFrom,staggerFromTo",function($){Tween[$]=function(){var m=new Timeline,L=_slice$1.call(arguments,0);return L.splice($==="staggerFromTo"?5:4,0,0),m[$].apply(m,L)}});var _setterPlain=function(m,L,j){return m[L]=j},_setterFunc=function(m,L,j){return m[L](j)},_setterFuncWithParam=function(m,L,j,ee){return m[L](ee.fp,j)},_setterAttribute=function(m,L,j){return m.setAttribute(L,j)},_getSetter=function(m,L){return _isFunction(m[L])?_setterFunc:_isUndefined(m[L])&&m.setAttribute?_setterAttribute:_setterPlain},_renderPlain=function(m,L){return L.set(L.t,L.p,Math.round((L.s+L.c*m)*1e6)/1e6,L)},_renderBoolean=function(m,L){return L.set(L.t,L.p,!!(L.s+L.c*m),L)},_renderComplexString=function(m,L){var j=L._pt,ee="";if(!m&&L.b)ee=L.b;else if(m===1&&L.e)ee=L.e;else{for(;j;)ee=j.p+(j.m?j.m(j.s+j.c*m):Math.round((j.s+j.c*m)*1e4)/1e4)+ee,j=j._next;ee+=L.c}L.set(L.t,L.p,ee,L)},_renderPropTweens=function(m,L){for(var j=L._pt;j;)j.r(m,j.d),j=j._next},_addPluginModifier=function(m,L,j,ee){for(var re=this._pt,le;re;)le=re._next,re.p===ee&&re.modifier(m,L,j),re=le},_killPropTweensOf=function(m){for(var L=this._pt,j,ee;L;)ee=L._next,L.p===m&&!L.op||L.op===m?_removeLinkedListItem(this,L,"_pt"):L.dep||(j=1),L=ee;return!j},_setterWithModifier=function(m,L,j,ee){ee.mSet(m,L,ee.m.call(ee.tween,j,ee.mt),ee)},_sortPropTweensByPriority=function(m){for(var L=m._pt,j,ee,re,le;L;){for(j=L._next,ee=re;ee&&ee.pr>L.pr;)ee=ee._next;(L._prev=ee?ee._prev:le)?L._prev._next=L:re=L,(L._next=ee)?ee._prev=L:le=L,L=j}m._pt=re},PropTween=function(){function $(L,j,ee,re,le,ve,ye,Ee,Me){this.t=j,this.s=re,this.c=le,this.p=ee,this.r=ve||_renderPlain,this.d=ye||this,this.set=Ee||_setterPlain,this.pr=Me||0,this._next=L,L&&(L._prev=this)}var m=$.prototype;return m.modifier=function(j,ee,re){this.mSet=this.mSet||this.set,this.set=_setterWithModifier,this.m=j,this.mt=re,this.tween=ee},$}();_forEachName(_callbackNames+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function($){return _reservedProps[$]=1});_globals.TweenMax=_globals.TweenLite=Tween;_globals.TimelineLite=_globals.TimelineMax=Timeline;_globalTimeline=new Timeline({sortChildren:!1,defaults:_defaults,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});_config.stringFilter=_colorStringFilter;var _media=[],_listeners={},_emptyArray=[],_lastMediaTime=0,_contextID=0,_dispatch=function(m){return(_listeners[m]||_emptyArray).map(function(L){return L()})},_onMediaChange=function(){var m=Date.now(),L=[];m-_lastMediaTime>2&&(_dispatch("matchMediaInit"),_media.forEach(function(j){var ee=j.queries,re=j.conditions,le,ve,ye,Ee;for(ve in ee)le=_win$2.matchMedia(ee[ve]).matches,le&&(ye=1),le!==re[ve]&&(re[ve]=le,Ee=1);Ee&&(j.revert(),ye&&L.push(j))}),_dispatch("matchMediaRevert"),L.forEach(function(j){return j.onMatch(j,function(ee){return j.add(null,ee)})}),_lastMediaTime=m,_dispatch("matchMedia"))},Context=function(){function $(L,j){this.selector=j&&selector(j),this.data=[],this._r=[],this.isReverted=!1,this.id=_contextID++,L&&this.add(L)}var m=$.prototype;return m.add=function(j,ee,re){_isFunction(j)&&(re=ee,ee=j,j=_isFunction);var le=this,ve=function(){var Ee=_context,Me=le.selector,Ce;return Ee&&Ee!==le&&Ee.data.push(le),re&&(le.selector=selector(re)),_context=le,Ce=ee.apply(le,arguments),_isFunction(Ce)&&le._r.push(Ce),_context=Ee,le.selector=Me,le.isReverted=!1,Ce};return le.last=ve,j===_isFunction?ve(le,function(ye){return le.add(null,ye)}):j?le[j]=ve:ve},m.ignore=function(j){var ee=_context;_context=null,j(this),_context=ee},m.getTweens=function(){var j=[];return this.data.forEach(function(ee){return ee instanceof $?j.push.apply(j,ee.getTweens()):ee instanceof Tween&&!(ee.parent&&ee.parent.data==="nested")&&j.push(ee)}),j},m.clear=function(){this._r.length=this.data.length=0},m.kill=function(j,ee){var re=this;if(j?function(){for(var ve=re.getTweens(),ye=re.data.length,Ee;ye--;)Ee=re.data[ye],Ee.data==="isFlip"&&(Ee.revert(),Ee.getChildren(!0,!0,!1).forEach(function(Me){return ve.splice(ve.indexOf(Me),1)}));for(ve.map(function(Me){return{g:Me._dur||Me._delay||Me._sat&&!Me._sat.vars.immediateRender?Me.globalTime(0):-1/0,t:Me}}).sort(function(Me,Ce){return Ce.g-Me.g||-1/0}).forEach(function(Me){return Me.t.revert(j)}),ye=re.data.length;ye--;)Ee=re.data[ye],Ee instanceof Timeline?Ee.data!=="nested"&&(Ee.scrollTrigger&&Ee.scrollTrigger.revert(),Ee.kill()):!(Ee instanceof Tween)&&Ee.revert&&Ee.revert(j);re._r.forEach(function(Me){return Me(j,re)}),re.isReverted=!0}():this.data.forEach(function(ve){return ve.kill&&ve.kill()}),this.clear(),ee)for(var le=_media.length;le--;)_media[le].id===this.id&&_media.splice(le,1)},m.revert=function(j){this.kill(j||{})},$}(),MatchMedia=function(){function $(L){this.contexts=[],this.scope=L,_context&&_context.data.push(this)}var m=$.prototype;return m.add=function(j,ee,re){_isObject(j)||(j={matches:j});var le=new Context(0,re||this.scope),ve=le.conditions={},ye,Ee,Me;_context&&!le.selector&&(le.selector=_context.selector),this.contexts.push(le),ee=le.add("onMatch",ee),le.queries=j;for(Ee in j)Ee==="all"?Me=1:(ye=_win$2.matchMedia(j[Ee]),ye&&(_media.indexOf(le)<0&&_media.push(le),(ve[Ee]=ye.matches)&&(Me=1),ye.addListener?ye.addListener(_onMediaChange):ye.addEventListener("change",_onMediaChange)));return Me&&ee(le,function(Ce){return le.add(null,Ce)}),this},m.revert=function(j){this.kill(j||{})},m.kill=function(j){this.contexts.forEach(function(ee){return ee.kill(j,!0)})},$}(),_gsap={registerPlugin:function(){for(var m=arguments.length,L=new Array(m),j=0;j<m;j++)L[j]=arguments[j];L.forEach(function(ee){return _createPlugin(ee)})},timeline:function(m){return new Timeline(m)},getTweensOf:function(m,L){return _globalTimeline.getTweensOf(m,L)},getProperty:function(m,L,j,ee){_isString(m)&&(m=toArray$2(m)[0]);var re=_getCache(m||{}).get,le=j?_passThrough:_numericIfPossible;return j==="native"&&(j=""),m&&(L?le((_plugins[L]&&_plugins[L].get||re)(m,L,j,ee)):function(ve,ye,Ee){return le((_plugins[ve]&&_plugins[ve].get||re)(m,ve,ye,Ee))})},quickSetter:function(m,L,j){if(m=toArray$2(m),m.length>1){var ee=m.map(function(Me){return gsap$1.quickSetter(Me,L,j)}),re=ee.length;return function(Me){for(var Ce=re;Ce--;)ee[Ce](Me)}}m=m[0]||{};var le=_plugins[L],ve=_getCache(m),ye=ve.harness&&(ve.harness.aliases||{})[L]||L,Ee=le?function(Me){var Ce=new le;_quickTween._pt=0,Ce.init(m,j?Me+j:Me,_quickTween,0,[m]),Ce.render(1,Ce),_quickTween._pt&&_renderPropTweens(1,_quickTween)}:ve.set(m,ye);return le?Ee:function(Me){return Ee(m,ye,j?Me+j:Me,ve,1)}},quickTo:function(m,L,j){var ee,re=gsap$1.to(m,_merge((ee={},ee[L]="+=0.1",ee.paused=!0,ee),j||{})),le=function(ye,Ee,Me){return re.resetTo(L,ye,Ee,Me)};return le.tween=re,le},isTweening:function(m){return _globalTimeline.getTweensOf(m,!0).length>0},defaults:function(m){return m&&m.ease&&(m.ease=_parseEase(m.ease,_defaults.ease)),_mergeDeep(_defaults,m||{})},config:function(m){return _mergeDeep(_config,m||{})},registerEffect:function(m){var L=m.name,j=m.effect,ee=m.plugins,re=m.defaults,le=m.extendTimeline;(ee||"").split(",").forEach(function(ve){return ve&&!_plugins[ve]&&!_globals[ve]&&_warn(L+" effect requires "+ve+" plugin.")}),_effects[L]=function(ve,ye,Ee){return j(toArray$2(ve),_setDefaults(ye||{},re),Ee)},le&&(Timeline.prototype[L]=function(ve,ye,Ee){return this.add(_effects[L](ve,_isObject(ye)?ye:(Ee=ye)&&{},this),Ee)})},registerEase:function(m,L){_easeMap[m]=_parseEase(L)},parseEase:function(m,L){return arguments.length?_parseEase(m,L):_easeMap},getById:function(m){return _globalTimeline.getById(m)},exportRoot:function(m,L){m===void 0&&(m={});var j=new Timeline(m),ee,re;for(j.smoothChildTiming=_isNotFalse(m.smoothChildTiming),_globalTimeline.remove(j),j._dp=0,j._time=j._tTime=_globalTimeline._time,ee=_globalTimeline._first;ee;)re=ee._next,(L||!(!ee._dur&&ee instanceof Tween&&ee.vars.onComplete===ee._targets[0]))&&_addToTimeline(j,ee,ee._start-ee._delay),ee=re;return _addToTimeline(_globalTimeline,j,0),j},context:function(m,L){return m?new Context(m,L):_context},matchMedia:function(m){return new MatchMedia(m)},matchMediaRefresh:function(){return _media.forEach(function(m){var L=m.conditions,j,ee;for(ee in L)L[ee]&&(L[ee]=!1,j=1);j&&m.revert()})||_onMediaChange()},addEventListener:function(m,L){var j=_listeners[m]||(_listeners[m]=[]);~j.indexOf(L)||j.push(L)},removeEventListener:function(m,L){var j=_listeners[m],ee=j&&j.indexOf(L);ee>=0&&j.splice(ee,1)},utils:{wrap:wrap$2,wrapYoyo,distribute,random:random$1,snap,normalize:normalize$1,getUnit,clamp:clamp$2,splitColor,toArray:toArray$2,selector,mapRange,pipe,unitize,interpolate,shuffle:shuffle$1},install:_install,effects:_effects,ticker:_ticker,updateRoot:Timeline.updateRoot,plugins:_plugins,globalTimeline:_globalTimeline,core:{PropTween,globals:_addGlobal,Tween,Timeline,Animation,getCache:_getCache,_removeLinkedListItem,reverting:function(){return _reverting$1},context:function(m){return m&&_context&&(_context.data.push(m),m._ctx=_context),_context},suppressOverwrites:function(m){return _suppressOverwrites=m}}};_forEachName("to,from,fromTo,delayedCall,set,killTweensOf",function($){return _gsap[$]=Tween[$]});_ticker.add(Timeline.updateRoot);_quickTween=_gsap.to({},{duration:0});var _getPluginPropTween=function(m,L){for(var j=m._pt;j&&j.p!==L&&j.op!==L&&j.fp!==L;)j=j._next;return j},_addModifiers=function(m,L){var j=m._targets,ee,re,le;for(ee in L)for(re=j.length;re--;)le=m._ptLookup[re][ee],le&&(le=le.d)&&(le._pt&&(le=_getPluginPropTween(le,ee)),le&&le.modifier&&le.modifier(L[ee],m,j[re],ee))},_buildModifierPlugin=function(m,L){return{name:m,rawVars:1,init:function(ee,re,le){le._onInit=function(ve){var ye,Ee;if(_isString(re)&&(ye={},_forEachName(re,function(Me){return ye[Me]=1}),re=ye),L){ye={};for(Ee in re)ye[Ee]=L(re[Ee]);re=ye}_addModifiers(ve,re)}}}},gsap$1=_gsap.registerPlugin({name:"attr",init:function(m,L,j,ee,re){var le,ve,ye;this.tween=j;for(le in L)ye=m.getAttribute(le)||"",ve=this.add(m,"setAttribute",(ye||0)+"",L[le],ee,re,0,0,le),ve.op=le,ve.b=ye,this._props.push(le)},render:function(m,L){for(var j=L._pt;j;)_reverting$1?j.set(j.t,j.p,j.b,j):j.r(m,j.d),j=j._next}},{name:"endArray",init:function(m,L){for(var j=L.length;j--;)this.add(m,j,m[j]||0,L[j],0,0,0,0,0,1)}},_buildModifierPlugin("roundProps",_roundModifier),_buildModifierPlugin("modifiers"),_buildModifierPlugin("snap",snap))||_gsap;Tween.version=Timeline.version=gsap$1.version="3.12.5";_coreReady=1;_windowExists$1()&&_wake();_easeMap.Power0;_easeMap.Power1;_easeMap.Power2;_easeMap.Power3;_easeMap.Power4;_easeMap.Linear;_easeMap.Quad;_easeMap.Cubic;_easeMap.Quart;_easeMap.Quint;_easeMap.Strong;_easeMap.Elastic;_easeMap.Back;_easeMap.SteppedEase;_easeMap.Bounce;_easeMap.Sine;_easeMap.Expo;_easeMap.Circ;/*!
 * CSSPlugin 3.12.5
 * https://gsap.com
 *
 * Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var _win$1,_doc$1,_docElement,_pluginInitted,_tempDiv,_recentSetterPlugin,_reverting,_windowExists=function(){return typeof window<"u"},_transformProps={},_RAD2DEG=180/Math.PI,_DEG2RAD$1=Math.PI/180,_atan2=Math.atan2,_bigNum$1=1e8,_capsExp=/([A-Z])/g,_horizontalExp=/(left|right|width|margin|padding|x)/i,_complexExp=/[\s,\(]\S/,_propertyAliases={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},_renderCSSProp=function(m,L){return L.set(L.t,L.p,Math.round((L.s+L.c*m)*1e4)/1e4+L.u,L)},_renderPropWithEnd=function(m,L){return L.set(L.t,L.p,m===1?L.e:Math.round((L.s+L.c*m)*1e4)/1e4+L.u,L)},_renderCSSPropWithBeginning=function(m,L){return L.set(L.t,L.p,m?Math.round((L.s+L.c*m)*1e4)/1e4+L.u:L.b,L)},_renderRoundedCSSProp=function(m,L){var j=L.s+L.c*m;L.set(L.t,L.p,~~(j+(j<0?-.5:.5))+L.u,L)},_renderNonTweeningValue=function(m,L){return L.set(L.t,L.p,m?L.e:L.b,L)},_renderNonTweeningValueOnlyAtEnd=function(m,L){return L.set(L.t,L.p,m!==1?L.b:L.e,L)},_setterCSSStyle=function(m,L,j){return m.style[L]=j},_setterCSSProp=function(m,L,j){return m.style.setProperty(L,j)},_setterTransform=function(m,L,j){return m._gsap[L]=j},_setterScale=function(m,L,j){return m._gsap.scaleX=m._gsap.scaleY=j},_setterScaleWithRender=function(m,L,j,ee,re){var le=m._gsap;le.scaleX=le.scaleY=j,le.renderTransform(re,le)},_setterTransformWithRender=function(m,L,j,ee,re){var le=m._gsap;le[L]=j,le.renderTransform(re,le)},_transformProp="transform",_transformOriginProp=_transformProp+"Origin",_saveStyle=function $(m,L){var j=this,ee=this.target,re=ee.style,le=ee._gsap;if(m in _transformProps&&re){if(this.tfm=this.tfm||{},m!=="transform")m=_propertyAliases[m]||m,~m.indexOf(",")?m.split(",").forEach(function(ve){return j.tfm[ve]=_get(ee,ve)}):this.tfm[m]=le.x?le[m]:_get(ee,m),m===_transformOriginProp&&(this.tfm.zOrigin=le.zOrigin);else return _propertyAliases.transform.split(",").forEach(function(ve){return $.call(j,ve,L)});if(this.props.indexOf(_transformProp)>=0)return;le.svg&&(this.svgo=ee.getAttribute("data-svg-origin"),this.props.push(_transformOriginProp,L,"")),m=_transformProp}(re||L)&&this.props.push(m,L,re[m])},_removeIndependentTransforms=function(m){m.translate&&(m.removeProperty("translate"),m.removeProperty("scale"),m.removeProperty("rotate"))},_revertStyle=function(){var m=this.props,L=this.target,j=L.style,ee=L._gsap,re,le;for(re=0;re<m.length;re+=3)m[re+1]?L[m[re]]=m[re+2]:m[re+2]?j[m[re]]=m[re+2]:j.removeProperty(m[re].substr(0,2)==="--"?m[re]:m[re].replace(_capsExp,"-$1").toLowerCase());if(this.tfm){for(le in this.tfm)ee[le]=this.tfm[le];ee.svg&&(ee.renderTransform(),L.setAttribute("data-svg-origin",this.svgo||"")),re=_reverting(),(!re||!re.isStart)&&!j[_transformProp]&&(_removeIndependentTransforms(j),ee.zOrigin&&j[_transformOriginProp]&&(j[_transformOriginProp]+=" "+ee.zOrigin+"px",ee.zOrigin=0,ee.renderTransform()),ee.uncache=1)}},_getStyleSaver=function(m,L){var j={target:m,props:[],revert:_revertStyle,save:_saveStyle};return m._gsap||gsap$1.core.getCache(m),L&&L.split(",").forEach(function(ee){return j.save(ee)}),j},_supports3D,_createElement=function(m,L){var j=_doc$1.createElementNS?_doc$1.createElementNS((L||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),m):_doc$1.createElement(m);return j&&j.style?j:_doc$1.createElement(m)},_getComputedProperty=function $(m,L,j){var ee=getComputedStyle(m);return ee[L]||ee.getPropertyValue(L.replace(_capsExp,"-$1").toLowerCase())||ee.getPropertyValue(L)||!j&&$(m,_checkPropPrefix(L)||L,1)||""},_prefixes="O,Moz,ms,Ms,Webkit".split(","),_checkPropPrefix=function(m,L,j){var ee=L||_tempDiv,re=ee.style,le=5;if(m in re&&!j)return m;for(m=m.charAt(0).toUpperCase()+m.substr(1);le--&&!(_prefixes[le]+m in re););return le<0?null:(le===3?"ms":le>=0?_prefixes[le]:"")+m},_initCore$2=function(){_windowExists()&&window.document&&(_win$1=window,_doc$1=_win$1.document,_docElement=_doc$1.documentElement,_tempDiv=_createElement("div")||{style:{}},_createElement("div"),_transformProp=_checkPropPrefix(_transformProp),_transformOriginProp=_transformProp+"Origin",_tempDiv.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",_supports3D=!!_checkPropPrefix("perspective"),_reverting=gsap$1.core.reverting,_pluginInitted=1)},_getBBoxHack=function $(m){var L=_createElement("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),j=this.parentNode,ee=this.nextSibling,re=this.style.cssText,le;if(_docElement.appendChild(L),L.appendChild(this),this.style.display="block",m)try{le=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=$}catch{}else this._gsapBBox&&(le=this._gsapBBox());return j&&(ee?j.insertBefore(this,ee):j.appendChild(this)),_docElement.removeChild(L),this.style.cssText=re,le},_getAttributeFallbacks=function(m,L){for(var j=L.length;j--;)if(m.hasAttribute(L[j]))return m.getAttribute(L[j])},_getBBox=function(m){var L;try{L=m.getBBox()}catch{L=_getBBoxHack.call(m,!0)}return L&&(L.width||L.height)||m.getBBox===_getBBoxHack||(L=_getBBoxHack.call(m,!0)),L&&!L.width&&!L.x&&!L.y?{x:+_getAttributeFallbacks(m,["x","cx","x1"])||0,y:+_getAttributeFallbacks(m,["y","cy","y1"])||0,width:0,height:0}:L},_isSVG=function(m){return!!(m.getCTM&&(!m.parentNode||m.ownerSVGElement)&&_getBBox(m))},_removeProperty=function(m,L){if(L){var j=m.style,ee;L in _transformProps&&L!==_transformOriginProp&&(L=_transformProp),j.removeProperty?(ee=L.substr(0,2),(ee==="ms"||L.substr(0,6)==="webkit")&&(L="-"+L),j.removeProperty(ee==="--"?L:L.replace(_capsExp,"-$1").toLowerCase())):j.removeAttribute(L)}},_addNonTweeningPT=function(m,L,j,ee,re,le){var ve=new PropTween(m._pt,L,j,0,1,le?_renderNonTweeningValueOnlyAtEnd:_renderNonTweeningValue);return m._pt=ve,ve.b=ee,ve.e=re,m._props.push(j),ve},_nonConvertibleUnits={deg:1,rad:1,turn:1},_nonStandardLayouts={grid:1,flex:1},_convertToUnit=function $(m,L,j,ee){var re=parseFloat(j)||0,le=(j+"").trim().substr((re+"").length)||"px",ve=_tempDiv.style,ye=_horizontalExp.test(L),Ee=m.tagName.toLowerCase()==="svg",Me=(Ee?"client":"offset")+(ye?"Width":"Height"),Ce=100,De=ee==="px",Be=ee==="%",ke,Fe,Oe,Ne;if(ee===le||!re||_nonConvertibleUnits[ee]||_nonConvertibleUnits[le])return re;if(le!=="px"&&!De&&(re=$(m,L,j,"px")),Ne=m.getCTM&&_isSVG(m),(Be||le==="%")&&(_transformProps[L]||~L.indexOf("adius")))return ke=Ne?m.getBBox()[ye?"width":"height"]:m[Me],_round$2(Be?re/ke*Ce:re/100*ke);if(ve[ye?"width":"height"]=Ce+(De?le:ee),Fe=~L.indexOf("adius")||ee==="em"&&m.appendChild&&!Ee?m:m.parentNode,Ne&&(Fe=(m.ownerSVGElement||{}).parentNode),(!Fe||Fe===_doc$1||!Fe.appendChild)&&(Fe=_doc$1.body),Oe=Fe._gsap,Oe&&Be&&Oe.width&&ye&&Oe.time===_ticker.time&&!Oe.uncache)return _round$2(re/Oe.width*Ce);if(Be&&(L==="height"||L==="width")){var ze=m.style[L];m.style[L]=Ce+ee,ke=m[Me],ze?m.style[L]=ze:_removeProperty(m,L)}else(Be||le==="%")&&!_nonStandardLayouts[_getComputedProperty(Fe,"display")]&&(ve.position=_getComputedProperty(m,"position")),Fe===m&&(ve.position="static"),Fe.appendChild(_tempDiv),ke=_tempDiv[Me],Fe.removeChild(_tempDiv),ve.position="absolute";return ye&&Be&&(Oe=_getCache(Fe),Oe.time=_ticker.time,Oe.width=Fe[Me]),_round$2(De?ke*re/Ce:ke&&re?Ce/ke*re:0)},_get=function(m,L,j,ee){var re;return _pluginInitted||_initCore$2(),L in _propertyAliases&&L!=="transform"&&(L=_propertyAliases[L],~L.indexOf(",")&&(L=L.split(",")[0])),_transformProps[L]&&L!=="transform"?(re=_parseTransform(m,ee),re=L!=="transformOrigin"?re[L]:re.svg?re.origin:_firstTwoOnly(_getComputedProperty(m,_transformOriginProp))+" "+re.zOrigin+"px"):(re=m.style[L],(!re||re==="auto"||ee||~(re+"").indexOf("calc("))&&(re=_specialProps[L]&&_specialProps[L](m,L,j)||_getComputedProperty(m,L)||_getProperty(m,L)||(L==="opacity"?1:0))),j&&!~(re+"").trim().indexOf(" ")?_convertToUnit(m,L,re,j)+j:re},_tweenComplexCSSString=function(m,L,j,ee){if(!j||j==="none"){var re=_checkPropPrefix(L,m,1),le=re&&_getComputedProperty(m,re,1);le&&le!==j?(L=re,j=le):L==="borderColor"&&(j=_getComputedProperty(m,"borderTopColor"))}var ve=new PropTween(this._pt,m.style,L,0,1,_renderComplexString),ye=0,Ee=0,Me,Ce,De,Be,ke,Fe,Oe,Ne,ze,$e,He,We;if(ve.b=j,ve.e=ee,j+="",ee+="",ee==="auto"&&(Fe=m.style[L],m.style[L]=ee,ee=_getComputedProperty(m,L)||ee,Fe?m.style[L]=Fe:_removeProperty(m,L)),Me=[j,ee],_colorStringFilter(Me),j=Me[0],ee=Me[1],De=j.match(_numWithUnitExp)||[],We=ee.match(_numWithUnitExp)||[],We.length){for(;Ce=_numWithUnitExp.exec(ee);)Oe=Ce[0],ze=ee.substring(ye,Ce.index),ke?ke=(ke+1)%5:(ze.substr(-5)==="rgba("||ze.substr(-5)==="hsla(")&&(ke=1),Oe!==(Fe=De[Ee++]||"")&&(Be=parseFloat(Fe)||0,He=Fe.substr((Be+"").length),Oe.charAt(1)==="="&&(Oe=_parseRelative(Be,Oe)+He),Ne=parseFloat(Oe),$e=Oe.substr((Ne+"").length),ye=_numWithUnitExp.lastIndex-$e.length,$e||($e=$e||_config.units[L]||He,ye===ee.length&&(ee+=$e,ve.e+=$e)),He!==$e&&(Be=_convertToUnit(m,L,Fe,$e)||0),ve._pt={_next:ve._pt,p:ze||Ee===1?ze:",",s:Be,c:Ne-Be,m:ke&&ke<4||L==="zIndex"?Math.round:0});ve.c=ye<ee.length?ee.substring(ye,ee.length):""}else ve.r=L==="display"&&ee==="none"?_renderNonTweeningValueOnlyAtEnd:_renderNonTweeningValue;return _relExp.test(ee)&&(ve.e=0),this._pt=ve,ve},_keywordToPercent={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},_convertKeywordsToPercentages=function(m){var L=m.split(" "),j=L[0],ee=L[1]||"50%";return(j==="top"||j==="bottom"||ee==="left"||ee==="right")&&(m=j,j=ee,ee=m),L[0]=_keywordToPercent[j]||j,L[1]=_keywordToPercent[ee]||ee,L.join(" ")},_renderClearProps=function(m,L){if(L.tween&&L.tween._time===L.tween._dur){var j=L.t,ee=j.style,re=L.u,le=j._gsap,ve,ye,Ee;if(re==="all"||re===!0)ee.cssText="",ye=1;else for(re=re.split(","),Ee=re.length;--Ee>-1;)ve=re[Ee],_transformProps[ve]&&(ye=1,ve=ve==="transformOrigin"?_transformOriginProp:_transformProp),_removeProperty(j,ve);ye&&(_removeProperty(j,_transformProp),le&&(le.svg&&j.removeAttribute("transform"),_parseTransform(j,1),le.uncache=1,_removeIndependentTransforms(ee)))}},_specialProps={clearProps:function(m,L,j,ee,re){if(re.data!=="isFromStart"){var le=m._pt=new PropTween(m._pt,L,j,0,0,_renderClearProps);return le.u=ee,le.pr=-10,le.tween=re,m._props.push(j),1}}},_identity2DMatrix=[1,0,0,1,0,0],_rotationalProperties={},_isNullTransform=function(m){return m==="matrix(1, 0, 0, 1, 0, 0)"||m==="none"||!m},_getComputedTransformMatrixAsArray=function(m){var L=_getComputedProperty(m,_transformProp);return _isNullTransform(L)?_identity2DMatrix:L.substr(7).match(_numExp$1).map(_round$2)},_getMatrix=function(m,L){var j=m._gsap||_getCache(m),ee=m.style,re=_getComputedTransformMatrixAsArray(m),le,ve,ye,Ee;return j.svg&&m.getAttribute("transform")?(ye=m.transform.baseVal.consolidate().matrix,re=[ye.a,ye.b,ye.c,ye.d,ye.e,ye.f],re.join(",")==="1,0,0,1,0,0"?_identity2DMatrix:re):(re===_identity2DMatrix&&!m.offsetParent&&m!==_docElement&&!j.svg&&(ye=ee.display,ee.display="block",le=m.parentNode,(!le||!m.offsetParent)&&(Ee=1,ve=m.nextElementSibling,_docElement.appendChild(m)),re=_getComputedTransformMatrixAsArray(m),ye?ee.display=ye:_removeProperty(m,"display"),Ee&&(ve?le.insertBefore(m,ve):le?le.appendChild(m):_docElement.removeChild(m))),L&&re.length>6?[re[0],re[1],re[4],re[5],re[12],re[13]]:re)},_applySVGOrigin=function(m,L,j,ee,re,le){var ve=m._gsap,ye=re||_getMatrix(m,!0),Ee=ve.xOrigin||0,Me=ve.yOrigin||0,Ce=ve.xOffset||0,De=ve.yOffset||0,Be=ye[0],ke=ye[1],Fe=ye[2],Oe=ye[3],Ne=ye[4],ze=ye[5],$e=L.split(" "),He=parseFloat($e[0])||0,We=parseFloat($e[1])||0,qe,Ye,Ze,Ke;j?ye!==_identity2DMatrix&&(Ye=Be*Oe-ke*Fe)&&(Ze=He*(Oe/Ye)+We*(-Fe/Ye)+(Fe*ze-Oe*Ne)/Ye,Ke=He*(-ke/Ye)+We*(Be/Ye)-(Be*ze-ke*Ne)/Ye,He=Ze,We=Ke):(qe=_getBBox(m),He=qe.x+(~$e[0].indexOf("%")?He/100*qe.width:He),We=qe.y+(~($e[1]||$e[0]).indexOf("%")?We/100*qe.height:We)),ee||ee!==!1&&ve.smooth?(Ne=He-Ee,ze=We-Me,ve.xOffset=Ce+(Ne*Be+ze*Fe)-Ne,ve.yOffset=De+(Ne*ke+ze*Oe)-ze):ve.xOffset=ve.yOffset=0,ve.xOrigin=He,ve.yOrigin=We,ve.smooth=!!ee,ve.origin=L,ve.originIsAbsolute=!!j,m.style[_transformOriginProp]="0px 0px",le&&(_addNonTweeningPT(le,ve,"xOrigin",Ee,He),_addNonTweeningPT(le,ve,"yOrigin",Me,We),_addNonTweeningPT(le,ve,"xOffset",Ce,ve.xOffset),_addNonTweeningPT(le,ve,"yOffset",De,ve.yOffset)),m.setAttribute("data-svg-origin",He+" "+We)},_parseTransform=function(m,L){var j=m._gsap||new GSCache(m);if("x"in j&&!L&&!j.uncache)return j;var ee=m.style,re=j.scaleX<0,le="px",ve="deg",ye=getComputedStyle(m),Ee=_getComputedProperty(m,_transformOriginProp)||"0",Me,Ce,De,Be,ke,Fe,Oe,Ne,ze,$e,He,We,qe,Ye,Ze,Ke,rt,ft,mt,Et,bt,Ct,st,at,Xe,ht,Bt,Dt,Jt,tn,zt,Vt;return Me=Ce=De=Fe=Oe=Ne=ze=$e=He=0,Be=ke=1,j.svg=!!(m.getCTM&&_isSVG(m)),ye.translate&&((ye.translate!=="none"||ye.scale!=="none"||ye.rotate!=="none")&&(ee[_transformProp]=(ye.translate!=="none"?"translate3d("+(ye.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(ye.rotate!=="none"?"rotate("+ye.rotate+") ":"")+(ye.scale!=="none"?"scale("+ye.scale.split(" ").join(",")+") ":"")+(ye[_transformProp]!=="none"?ye[_transformProp]:"")),ee.scale=ee.rotate=ee.translate="none"),Ye=_getMatrix(m,j.svg),j.svg&&(j.uncache?(Xe=m.getBBox(),Ee=j.xOrigin-Xe.x+"px "+(j.yOrigin-Xe.y)+"px",at=""):at=!L&&m.getAttribute("data-svg-origin"),_applySVGOrigin(m,at||Ee,!!at||j.originIsAbsolute,j.smooth!==!1,Ye)),We=j.xOrigin||0,qe=j.yOrigin||0,Ye!==_identity2DMatrix&&(ft=Ye[0],mt=Ye[1],Et=Ye[2],bt=Ye[3],Me=Ct=Ye[4],Ce=st=Ye[5],Ye.length===6?(Be=Math.sqrt(ft*ft+mt*mt),ke=Math.sqrt(bt*bt+Et*Et),Fe=ft||mt?_atan2(mt,ft)*_RAD2DEG:0,ze=Et||bt?_atan2(Et,bt)*_RAD2DEG+Fe:0,ze&&(ke*=Math.abs(Math.cos(ze*_DEG2RAD$1))),j.svg&&(Me-=We-(We*ft+qe*Et),Ce-=qe-(We*mt+qe*bt))):(Vt=Ye[6],tn=Ye[7],Bt=Ye[8],Dt=Ye[9],Jt=Ye[10],zt=Ye[11],Me=Ye[12],Ce=Ye[13],De=Ye[14],Ze=_atan2(Vt,Jt),Oe=Ze*_RAD2DEG,Ze&&(Ke=Math.cos(-Ze),rt=Math.sin(-Ze),at=Ct*Ke+Bt*rt,Xe=st*Ke+Dt*rt,ht=Vt*Ke+Jt*rt,Bt=Ct*-rt+Bt*Ke,Dt=st*-rt+Dt*Ke,Jt=Vt*-rt+Jt*Ke,zt=tn*-rt+zt*Ke,Ct=at,st=Xe,Vt=ht),Ze=_atan2(-Et,Jt),Ne=Ze*_RAD2DEG,Ze&&(Ke=Math.cos(-Ze),rt=Math.sin(-Ze),at=ft*Ke-Bt*rt,Xe=mt*Ke-Dt*rt,ht=Et*Ke-Jt*rt,zt=bt*rt+zt*Ke,ft=at,mt=Xe,Et=ht),Ze=_atan2(mt,ft),Fe=Ze*_RAD2DEG,Ze&&(Ke=Math.cos(Ze),rt=Math.sin(Ze),at=ft*Ke+mt*rt,Xe=Ct*Ke+st*rt,mt=mt*Ke-ft*rt,st=st*Ke-Ct*rt,ft=at,Ct=Xe),Oe&&Math.abs(Oe)+Math.abs(Fe)>359.9&&(Oe=Fe=0,Ne=180-Ne),Be=_round$2(Math.sqrt(ft*ft+mt*mt+Et*Et)),ke=_round$2(Math.sqrt(st*st+Vt*Vt)),Ze=_atan2(Ct,st),ze=Math.abs(Ze)>2e-4?Ze*_RAD2DEG:0,He=zt?1/(zt<0?-zt:zt):0),j.svg&&(at=m.getAttribute("transform"),j.forceCSS=m.setAttribute("transform","")||!_isNullTransform(_getComputedProperty(m,_transformProp)),at&&m.setAttribute("transform",at))),Math.abs(ze)>90&&Math.abs(ze)<270&&(re?(Be*=-1,ze+=Fe<=0?180:-180,Fe+=Fe<=0?180:-180):(ke*=-1,ze+=ze<=0?180:-180)),L=L||j.uncache,j.x=Me-((j.xPercent=Me&&(!L&&j.xPercent||(Math.round(m.offsetWidth/2)===Math.round(-Me)?-50:0)))?m.offsetWidth*j.xPercent/100:0)+le,j.y=Ce-((j.yPercent=Ce&&(!L&&j.yPercent||(Math.round(m.offsetHeight/2)===Math.round(-Ce)?-50:0)))?m.offsetHeight*j.yPercent/100:0)+le,j.z=De+le,j.scaleX=_round$2(Be),j.scaleY=_round$2(ke),j.rotation=_round$2(Fe)+ve,j.rotationX=_round$2(Oe)+ve,j.rotationY=_round$2(Ne)+ve,j.skewX=ze+ve,j.skewY=$e+ve,j.transformPerspective=He+le,(j.zOrigin=parseFloat(Ee.split(" ")[2])||!L&&j.zOrigin||0)&&(ee[_transformOriginProp]=_firstTwoOnly(Ee)),j.xOffset=j.yOffset=0,j.force3D=_config.force3D,j.renderTransform=j.svg?_renderSVGTransforms:_supports3D?_renderCSSTransforms:_renderNon3DTransforms,j.uncache=0,j},_firstTwoOnly=function(m){return(m=m.split(" "))[0]+" "+m[1]},_addPxTranslate=function(m,L,j){var ee=getUnit(L);return _round$2(parseFloat(L)+parseFloat(_convertToUnit(m,"x",j+"px",ee)))+ee},_renderNon3DTransforms=function(m,L){L.z="0px",L.rotationY=L.rotationX="0deg",L.force3D=0,_renderCSSTransforms(m,L)},_zeroDeg="0deg",_zeroPx="0px",_endParenthesis=") ",_renderCSSTransforms=function(m,L){var j=L||this,ee=j.xPercent,re=j.yPercent,le=j.x,ve=j.y,ye=j.z,Ee=j.rotation,Me=j.rotationY,Ce=j.rotationX,De=j.skewX,Be=j.skewY,ke=j.scaleX,Fe=j.scaleY,Oe=j.transformPerspective,Ne=j.force3D,ze=j.target,$e=j.zOrigin,He="",We=Ne==="auto"&&m&&m!==1||Ne===!0;if($e&&(Ce!==_zeroDeg||Me!==_zeroDeg)){var qe=parseFloat(Me)*_DEG2RAD$1,Ye=Math.sin(qe),Ze=Math.cos(qe),Ke;qe=parseFloat(Ce)*_DEG2RAD$1,Ke=Math.cos(qe),le=_addPxTranslate(ze,le,Ye*Ke*-$e),ve=_addPxTranslate(ze,ve,-Math.sin(qe)*-$e),ye=_addPxTranslate(ze,ye,Ze*Ke*-$e+$e)}Oe!==_zeroPx&&(He+="perspective("+Oe+_endParenthesis),(ee||re)&&(He+="translate("+ee+"%, "+re+"%) "),(We||le!==_zeroPx||ve!==_zeroPx||ye!==_zeroPx)&&(He+=ye!==_zeroPx||We?"translate3d("+le+", "+ve+", "+ye+") ":"translate("+le+", "+ve+_endParenthesis),Ee!==_zeroDeg&&(He+="rotate("+Ee+_endParenthesis),Me!==_zeroDeg&&(He+="rotateY("+Me+_endParenthesis),Ce!==_zeroDeg&&(He+="rotateX("+Ce+_endParenthesis),(De!==_zeroDeg||Be!==_zeroDeg)&&(He+="skew("+De+", "+Be+_endParenthesis),(ke!==1||Fe!==1)&&(He+="scale("+ke+", "+Fe+_endParenthesis),ze.style[_transformProp]=He||"translate(0, 0)"},_renderSVGTransforms=function(m,L){var j=L||this,ee=j.xPercent,re=j.yPercent,le=j.x,ve=j.y,ye=j.rotation,Ee=j.skewX,Me=j.skewY,Ce=j.scaleX,De=j.scaleY,Be=j.target,ke=j.xOrigin,Fe=j.yOrigin,Oe=j.xOffset,Ne=j.yOffset,ze=j.forceCSS,$e=parseFloat(le),He=parseFloat(ve),We,qe,Ye,Ze,Ke;ye=parseFloat(ye),Ee=parseFloat(Ee),Me=parseFloat(Me),Me&&(Me=parseFloat(Me),Ee+=Me,ye+=Me),ye||Ee?(ye*=_DEG2RAD$1,Ee*=_DEG2RAD$1,We=Math.cos(ye)*Ce,qe=Math.sin(ye)*Ce,Ye=Math.sin(ye-Ee)*-De,Ze=Math.cos(ye-Ee)*De,Ee&&(Me*=_DEG2RAD$1,Ke=Math.tan(Ee-Me),Ke=Math.sqrt(1+Ke*Ke),Ye*=Ke,Ze*=Ke,Me&&(Ke=Math.tan(Me),Ke=Math.sqrt(1+Ke*Ke),We*=Ke,qe*=Ke)),We=_round$2(We),qe=_round$2(qe),Ye=_round$2(Ye),Ze=_round$2(Ze)):(We=Ce,Ze=De,qe=Ye=0),($e&&!~(le+"").indexOf("px")||He&&!~(ve+"").indexOf("px"))&&($e=_convertToUnit(Be,"x",le,"px"),He=_convertToUnit(Be,"y",ve,"px")),(ke||Fe||Oe||Ne)&&($e=_round$2($e+ke-(ke*We+Fe*Ye)+Oe),He=_round$2(He+Fe-(ke*qe+Fe*Ze)+Ne)),(ee||re)&&(Ke=Be.getBBox(),$e=_round$2($e+ee/100*Ke.width),He=_round$2(He+re/100*Ke.height)),Ke="matrix("+We+","+qe+","+Ye+","+Ze+","+$e+","+He+")",Be.setAttribute("transform",Ke),ze&&(Be.style[_transformProp]=Ke)},_addRotationalPropTween=function(m,L,j,ee,re){var le=360,ve=_isString(re),ye=parseFloat(re)*(ve&&~re.indexOf("rad")?_RAD2DEG:1),Ee=ye-ee,Me=ee+Ee+"deg",Ce,De;return ve&&(Ce=re.split("_")[1],Ce==="short"&&(Ee%=le,Ee!==Ee%(le/2)&&(Ee+=Ee<0?le:-le)),Ce==="cw"&&Ee<0?Ee=(Ee+le*_bigNum$1)%le-~~(Ee/le)*le:Ce==="ccw"&&Ee>0&&(Ee=(Ee-le*_bigNum$1)%le-~~(Ee/le)*le)),m._pt=De=new PropTween(m._pt,L,j,ee,Ee,_renderPropWithEnd),De.e=Me,De.u="deg",m._props.push(j),De},_assign=function(m,L){for(var j in L)m[j]=L[j];return m},_addRawTransformPTs=function(m,L,j){var ee=_assign({},j._gsap),re="perspective,force3D,transformOrigin,svgOrigin",le=j.style,ve,ye,Ee,Me,Ce,De,Be,ke;ee.svg?(Ee=j.getAttribute("transform"),j.setAttribute("transform",""),le[_transformProp]=L,ve=_parseTransform(j,1),_removeProperty(j,_transformProp),j.setAttribute("transform",Ee)):(Ee=getComputedStyle(j)[_transformProp],le[_transformProp]=L,ve=_parseTransform(j,1),le[_transformProp]=Ee);for(ye in _transformProps)Ee=ee[ye],Me=ve[ye],Ee!==Me&&re.indexOf(ye)<0&&(Be=getUnit(Ee),ke=getUnit(Me),Ce=Be!==ke?_convertToUnit(j,ye,Ee,ke):parseFloat(Ee),De=parseFloat(Me),m._pt=new PropTween(m._pt,ve,ye,Ce,De-Ce,_renderCSSProp),m._pt.u=ke||0,m._props.push(ye));_assign(ve,ee)};_forEachName("padding,margin,Width,Radius",function($,m){var L="Top",j="Right",ee="Bottom",re="Left",le=(m<3?[L,j,ee,re]:[L+re,L+j,ee+j,ee+re]).map(function(ve){return m<2?$+ve:"border"+ve+$});_specialProps[m>1?"border"+$:$]=function(ve,ye,Ee,Me,Ce){var De,Be;if(arguments.length<4)return De=le.map(function(ke){return _get(ve,ke,Ee)}),Be=De.join(" "),Be.split(De[0]).length===5?De[0]:Be;De=(Me+"").split(" "),Be={},le.forEach(function(ke,Fe){return Be[ke]=De[Fe]=De[Fe]||De[(Fe-1)/2|0]}),ve.init(ye,Be,Ce)}});var CSSPlugin={name:"css",register:_initCore$2,targetTest:function(m){return m.style&&m.nodeType},init:function(m,L,j,ee,re){var le=this._props,ve=m.style,ye=j.vars.startAt,Ee,Me,Ce,De,Be,ke,Fe,Oe,Ne,ze,$e,He,We,qe,Ye,Ze;_pluginInitted||_initCore$2(),this.styles=this.styles||_getStyleSaver(m),Ze=this.styles.props,this.tween=j;for(Fe in L)if(Fe!=="autoRound"&&(Me=L[Fe],!(_plugins[Fe]&&_checkPlugin(Fe,L,j,ee,m,re)))){if(Be=typeof Me,ke=_specialProps[Fe],Be==="function"&&(Me=Me.call(j,ee,m,re),Be=typeof Me),Be==="string"&&~Me.indexOf("random(")&&(Me=_replaceRandom(Me)),ke)ke(this,m,Fe,Me,j)&&(Ye=1);else if(Fe.substr(0,2)==="--")Ee=(getComputedStyle(m).getPropertyValue(Fe)+"").trim(),Me+="",_colorExp.lastIndex=0,_colorExp.test(Ee)||(Oe=getUnit(Ee),Ne=getUnit(Me)),Ne?Oe!==Ne&&(Ee=_convertToUnit(m,Fe,Ee,Ne)+Ne):Oe&&(Me+=Oe),this.add(ve,"setProperty",Ee,Me,ee,re,0,0,Fe),le.push(Fe),Ze.push(Fe,0,ve[Fe]);else if(Be!=="undefined"){if(ye&&Fe in ye?(Ee=typeof ye[Fe]=="function"?ye[Fe].call(j,ee,m,re):ye[Fe],_isString(Ee)&&~Ee.indexOf("random(")&&(Ee=_replaceRandom(Ee)),getUnit(Ee+"")||Ee==="auto"||(Ee+=_config.units[Fe]||getUnit(_get(m,Fe))||""),(Ee+"").charAt(1)==="="&&(Ee=_get(m,Fe))):Ee=_get(m,Fe),De=parseFloat(Ee),ze=Be==="string"&&Me.charAt(1)==="="&&Me.substr(0,2),ze&&(Me=Me.substr(2)),Ce=parseFloat(Me),Fe in _propertyAliases&&(Fe==="autoAlpha"&&(De===1&&_get(m,"visibility")==="hidden"&&Ce&&(De=0),Ze.push("visibility",0,ve.visibility),_addNonTweeningPT(this,ve,"visibility",De?"inherit":"hidden",Ce?"inherit":"hidden",!Ce)),Fe!=="scale"&&Fe!=="transform"&&(Fe=_propertyAliases[Fe],~Fe.indexOf(",")&&(Fe=Fe.split(",")[0]))),$e=Fe in _transformProps,$e){if(this.styles.save(Fe),He||(We=m._gsap,We.renderTransform&&!L.parseTransform||_parseTransform(m,L.parseTransform),qe=L.smoothOrigin!==!1&&We.smooth,He=this._pt=new PropTween(this._pt,ve,_transformProp,0,1,We.renderTransform,We,0,-1),He.dep=1),Fe==="scale")this._pt=new PropTween(this._pt,We,"scaleY",We.scaleY,(ze?_parseRelative(We.scaleY,ze+Ce):Ce)-We.scaleY||0,_renderCSSProp),this._pt.u=0,le.push("scaleY",Fe),Fe+="X";else if(Fe==="transformOrigin"){Ze.push(_transformOriginProp,0,ve[_transformOriginProp]),Me=_convertKeywordsToPercentages(Me),We.svg?_applySVGOrigin(m,Me,0,qe,0,this):(Ne=parseFloat(Me.split(" ")[2])||0,Ne!==We.zOrigin&&_addNonTweeningPT(this,We,"zOrigin",We.zOrigin,Ne),_addNonTweeningPT(this,ve,Fe,_firstTwoOnly(Ee),_firstTwoOnly(Me)));continue}else if(Fe==="svgOrigin"){_applySVGOrigin(m,Me,1,qe,0,this);continue}else if(Fe in _rotationalProperties){_addRotationalPropTween(this,We,Fe,De,ze?_parseRelative(De,ze+Me):Me);continue}else if(Fe==="smoothOrigin"){_addNonTweeningPT(this,We,"smooth",We.smooth,Me);continue}else if(Fe==="force3D"){We[Fe]=Me;continue}else if(Fe==="transform"){_addRawTransformPTs(this,Me,m);continue}}else Fe in ve||(Fe=_checkPropPrefix(Fe)||Fe);if($e||(Ce||Ce===0)&&(De||De===0)&&!_complexExp.test(Me)&&Fe in ve)Oe=(Ee+"").substr((De+"").length),Ce||(Ce=0),Ne=getUnit(Me)||(Fe in _config.units?_config.units[Fe]:Oe),Oe!==Ne&&(De=_convertToUnit(m,Fe,Ee,Ne)),this._pt=new PropTween(this._pt,$e?We:ve,Fe,De,(ze?_parseRelative(De,ze+Ce):Ce)-De,!$e&&(Ne==="px"||Fe==="zIndex")&&L.autoRound!==!1?_renderRoundedCSSProp:_renderCSSProp),this._pt.u=Ne||0,Oe!==Ne&&Ne!=="%"&&(this._pt.b=Ee,this._pt.r=_renderCSSPropWithBeginning);else if(Fe in ve)_tweenComplexCSSString.call(this,m,Fe,Ee,ze?ze+Me:Me);else if(Fe in m)this.add(m,Fe,Ee||m[Fe],ze?ze+Me:Me,ee,re);else if(Fe!=="parseTransform"){_missingPlugin(Fe,Me);continue}$e||(Fe in ve?Ze.push(Fe,0,ve[Fe]):Ze.push(Fe,1,Ee||m[Fe])),le.push(Fe)}}Ye&&_sortPropTweensByPriority(this)},render:function(m,L){if(L.tween._time||!_reverting())for(var j=L._pt;j;)j.r(m,j.d),j=j._next;else L.styles.revert()},get:_get,aliases:_propertyAliases,getSetter:function(m,L,j){var ee=_propertyAliases[L];return ee&&ee.indexOf(",")<0&&(L=ee),L in _transformProps&&L!==_transformOriginProp&&(m._gsap.x||_get(m,"x"))?j&&_recentSetterPlugin===j?L==="scale"?_setterScale:_setterTransform:(_recentSetterPlugin=j||{})&&(L==="scale"?_setterScaleWithRender:_setterTransformWithRender):m.style&&!_isUndefined(m.style[L])?_setterCSSStyle:~L.indexOf("-")?_setterCSSProp:_getSetter(m,L)},core:{_removeProperty,_getMatrix}};gsap$1.utils.checkPrefix=_checkPropPrefix;gsap$1.core.getStyleSaver=_getStyleSaver;(function($,m,L,j){var ee=_forEachName($+","+m+","+L,function(re){_transformProps[re]=1});_forEachName(m,function(re){_config.units[re]="deg",_rotationalProperties[re]=1}),_propertyAliases[ee[13]]=$+","+m,_forEachName(j,function(re){var le=re.split(":");_propertyAliases[le[1]]=ee[le[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");_forEachName("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function($){_config.units[$]="px"});gsap$1.registerPlugin(CSSPlugin);var gsapWithCSS=gsap$1.registerPlugin(CSSPlugin)||gsap$1;gsapWithCSS.core.Tween;/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const REVISION="165",MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},CullFaceNone=0,CullFaceBack=1,CullFaceFront=2,PCFShadowMap=1,PCFSoftShadowMap=2,VSMShadowMap=3,FrontSide=0,BackSide=1,DoubleSide=2,NoBlending=0,NormalBlending=1,AdditiveBlending=2,SubtractiveBlending=3,MultiplyBlending=4,CustomBlending=5,AddEquation=100,SubtractEquation=101,ReverseSubtractEquation=102,MinEquation=103,MaxEquation=104,ZeroFactor=200,OneFactor=201,SrcColorFactor=202,OneMinusSrcColorFactor=203,SrcAlphaFactor=204,OneMinusSrcAlphaFactor=205,DstAlphaFactor=206,OneMinusDstAlphaFactor=207,DstColorFactor=208,OneMinusDstColorFactor=209,SrcAlphaSaturateFactor=210,ConstantColorFactor=211,OneMinusConstantColorFactor=212,ConstantAlphaFactor=213,OneMinusConstantAlphaFactor=214,NeverDepth=0,AlwaysDepth=1,LessDepth=2,LessEqualDepth=3,EqualDepth=4,GreaterEqualDepth=5,GreaterDepth=6,NotEqualDepth=7,MultiplyOperation=0,MixOperation=1,AddOperation=2,NoToneMapping=0,LinearToneMapping=1,ReinhardToneMapping=2,CineonToneMapping=3,ACESFilmicToneMapping=4,CustomToneMapping=5,AgXToneMapping=6,NeutralToneMapping=7,AttachedBindMode="attached",DetachedBindMode="detached",UVMapping=300,CubeReflectionMapping=301,CubeRefractionMapping=302,EquirectangularReflectionMapping=303,EquirectangularRefractionMapping=304,CubeUVReflectionMapping=306,RepeatWrapping=1e3,ClampToEdgeWrapping=1001,MirroredRepeatWrapping=1002,NearestFilter=1003,NearestMipmapNearestFilter=1004,NearestMipmapLinearFilter=1005,LinearFilter=1006,LinearMipmapNearestFilter=1007,LinearMipmapLinearFilter=1008,UnsignedByteType=1009,ByteType=1010,ShortType=1011,UnsignedShortType=1012,IntType=1013,UnsignedIntType=1014,FloatType=1015,HalfFloatType=1016,UnsignedShort4444Type=1017,UnsignedShort5551Type=1018,UnsignedInt248Type=1020,UnsignedInt5999Type=35902,AlphaFormat=1021,RGBFormat=1022,RGBAFormat=1023,LuminanceFormat=1024,LuminanceAlphaFormat=1025,DepthFormat=1026,DepthStencilFormat=1027,RedFormat=1028,RedIntegerFormat=1029,RGFormat=1030,RGIntegerFormat=1031,RGBAIntegerFormat=1033,RGB_S3TC_DXT1_Format=33776,RGBA_S3TC_DXT1_Format=33777,RGBA_S3TC_DXT3_Format=33778,RGBA_S3TC_DXT5_Format=33779,RGB_PVRTC_4BPPV1_Format=35840,RGB_PVRTC_2BPPV1_Format=35841,RGBA_PVRTC_4BPPV1_Format=35842,RGBA_PVRTC_2BPPV1_Format=35843,RGB_ETC1_Format=36196,RGB_ETC2_Format=37492,RGBA_ETC2_EAC_Format=37496,RGBA_ASTC_4x4_Format=37808,RGBA_ASTC_5x4_Format=37809,RGBA_ASTC_5x5_Format=37810,RGBA_ASTC_6x5_Format=37811,RGBA_ASTC_6x6_Format=37812,RGBA_ASTC_8x5_Format=37813,RGBA_ASTC_8x6_Format=37814,RGBA_ASTC_8x8_Format=37815,RGBA_ASTC_10x5_Format=37816,RGBA_ASTC_10x6_Format=37817,RGBA_ASTC_10x8_Format=37818,RGBA_ASTC_10x10_Format=37819,RGBA_ASTC_12x10_Format=37820,RGBA_ASTC_12x12_Format=37821,RGBA_BPTC_Format=36492,RGB_BPTC_SIGNED_Format=36494,RGB_BPTC_UNSIGNED_Format=36495,RED_RGTC1_Format=36283,SIGNED_RED_RGTC1_Format=36284,RED_GREEN_RGTC2_Format=36285,SIGNED_RED_GREEN_RGTC2_Format=36286,LoopOnce=2200,LoopRepeat=2201,LoopPingPong=2202,InterpolateDiscrete=2300,InterpolateLinear=2301,InterpolateSmooth=2302,ZeroCurvatureEnding=2400,ZeroSlopeEnding=2401,WrapAroundEnding=2402,NormalAnimationBlendMode=2500,AdditiveAnimationBlendMode=2501,TrianglesDrawMode=0,TriangleStripDrawMode=1,TriangleFanDrawMode=2,BasicDepthPacking=3200,RGBADepthPacking=3201,TangentSpaceNormalMap=0,ObjectSpaceNormalMap=1,NoColorSpace="",SRGBColorSpace="srgb",LinearSRGBColorSpace="srgb-linear",DisplayP3ColorSpace="display-p3",LinearDisplayP3ColorSpace="display-p3-linear",LinearTransfer="linear",SRGBTransfer="srgb",Rec709Primaries="rec709",P3Primaries="p3",KeepStencilOp=7680,AlwaysStencilFunc=519,NeverCompare=512,LessCompare=513,EqualCompare=514,LessEqualCompare=515,GreaterCompare=516,NotEqualCompare=517,GreaterEqualCompare=518,AlwaysCompare=519,StaticDrawUsage=35044,GLSL3="300 es",WebGLCoordinateSystem=2e3,WebGPUCoordinateSystem=2001;let EventDispatcher$2=class{addEventListener(m,L){this._listeners===void 0&&(this._listeners={});const j=this._listeners;j[m]===void 0&&(j[m]=[]),j[m].indexOf(L)===-1&&j[m].push(L)}hasEventListener(m,L){if(this._listeners===void 0)return!1;const j=this._listeners;return j[m]!==void 0&&j[m].indexOf(L)!==-1}removeEventListener(m,L){if(this._listeners===void 0)return;const ee=this._listeners[m];if(ee!==void 0){const re=ee.indexOf(L);re!==-1&&ee.splice(re,1)}}dispatchEvent(m){if(this._listeners===void 0)return;const j=this._listeners[m.type];if(j!==void 0){m.target=this;const ee=j.slice(0);for(let re=0,le=ee.length;re<le;re++)ee[re].call(this,m);m.target=null}}};const _lut=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let _seed=1234567;const DEG2RAD=Math.PI/180,RAD2DEG=180/Math.PI;function generateUUID(){const $=Math.random()*4294967295|0,m=Math.random()*4294967295|0,L=Math.random()*4294967295|0,j=Math.random()*4294967295|0;return(_lut[$&255]+_lut[$>>8&255]+_lut[$>>16&255]+_lut[$>>24&255]+"-"+_lut[m&255]+_lut[m>>8&255]+"-"+_lut[m>>16&15|64]+_lut[m>>24&255]+"-"+_lut[L&63|128]+_lut[L>>8&255]+"-"+_lut[L>>16&255]+_lut[L>>24&255]+_lut[j&255]+_lut[j>>8&255]+_lut[j>>16&255]+_lut[j>>24&255]).toLowerCase()}function clamp$1($,m,L){return Math.max(m,Math.min(L,$))}function euclideanModulo($,m){return($%m+m)%m}function mapLinear($,m,L,j,ee){return j+($-m)*(ee-j)/(L-m)}function inverseLerp($,m,L){return $!==m?(L-$)/(m-$):0}function lerp$1($,m,L){return(1-L)*$+L*m}function damp$1($,m,L,j){return lerp$1($,m,1-Math.exp(-L*j))}function pingpong($,m=1){return m-Math.abs(euclideanModulo($,m*2)-m)}function smoothstep($,m,L){return $<=m?0:$>=L?1:($=($-m)/(L-m),$*$*(3-2*$))}function smootherstep($,m,L){return $<=m?0:$>=L?1:($=($-m)/(L-m),$*$*$*($*($*6-15)+10))}function randInt($,m){return $+Math.floor(Math.random()*(m-$+1))}function randFloat($,m){return $+Math.random()*(m-$)}function randFloatSpread($){return $*(.5-Math.random())}function seededRandom($){$!==void 0&&(_seed=$);let m=_seed+=1831565813;return m=Math.imul(m^m>>>15,m|1),m^=m+Math.imul(m^m>>>7,m|61),((m^m>>>14)>>>0)/4294967296}function degToRad($){return $*DEG2RAD}function radToDeg($){return $*RAD2DEG}function isPowerOfTwo($){return($&$-1)===0&&$!==0}function ceilPowerOfTwo($){return Math.pow(2,Math.ceil(Math.log($)/Math.LN2))}function floorPowerOfTwo($){return Math.pow(2,Math.floor(Math.log($)/Math.LN2))}function setQuaternionFromProperEuler($,m,L,j,ee){const re=Math.cos,le=Math.sin,ve=re(L/2),ye=le(L/2),Ee=re((m+j)/2),Me=le((m+j)/2),Ce=re((m-j)/2),De=le((m-j)/2),Be=re((j-m)/2),ke=le((j-m)/2);switch(ee){case"XYX":$.set(ve*Me,ye*Ce,ye*De,ve*Ee);break;case"YZY":$.set(ye*De,ve*Me,ye*Ce,ve*Ee);break;case"ZXZ":$.set(ye*Ce,ye*De,ve*Me,ve*Ee);break;case"XZX":$.set(ve*Me,ye*ke,ye*Be,ve*Ee);break;case"YXY":$.set(ye*Be,ve*Me,ye*ke,ve*Ee);break;case"ZYZ":$.set(ye*ke,ye*Be,ve*Me,ve*Ee);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+ee)}}function denormalize($,m){switch(m.constructor){case Float32Array:return $;case Uint32Array:return $/4294967295;case Uint16Array:return $/65535;case Uint8Array:return $/255;case Int32Array:return Math.max($/2147483647,-1);case Int16Array:return Math.max($/32767,-1);case Int8Array:return Math.max($/127,-1);default:throw new Error("Invalid component type.")}}function normalize($,m){switch(m.constructor){case Float32Array:return $;case Uint32Array:return Math.round($*4294967295);case Uint16Array:return Math.round($*65535);case Uint8Array:return Math.round($*255);case Int32Array:return Math.round($*2147483647);case Int16Array:return Math.round($*32767);case Int8Array:return Math.round($*127);default:throw new Error("Invalid component type.")}}const MathUtils={DEG2RAD,RAD2DEG,generateUUID,clamp:clamp$1,euclideanModulo,mapLinear,inverseLerp,lerp:lerp$1,damp:damp$1,pingpong,smoothstep,smootherstep,randInt,randFloat,randFloatSpread,seededRandom,degToRad,radToDeg,isPowerOfTwo,ceilPowerOfTwo,floorPowerOfTwo,setQuaternionFromProperEuler,normalize,denormalize};class Vector2{constructor(m=0,L=0){Vector2.prototype.isVector2=!0,this.x=m,this.y=L}get width(){return this.x}set width(m){this.x=m}get height(){return this.y}set height(m){this.y=m}set(m,L){return this.x=m,this.y=L,this}setScalar(m){return this.x=m,this.y=m,this}setX(m){return this.x=m,this}setY(m){return this.y=m,this}setComponent(m,L){switch(m){case 0:this.x=L;break;case 1:this.y=L;break;default:throw new Error("index is out of range: "+m)}return this}getComponent(m){switch(m){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+m)}}clone(){return new this.constructor(this.x,this.y)}copy(m){return this.x=m.x,this.y=m.y,this}add(m){return this.x+=m.x,this.y+=m.y,this}addScalar(m){return this.x+=m,this.y+=m,this}addVectors(m,L){return this.x=m.x+L.x,this.y=m.y+L.y,this}addScaledVector(m,L){return this.x+=m.x*L,this.y+=m.y*L,this}sub(m){return this.x-=m.x,this.y-=m.y,this}subScalar(m){return this.x-=m,this.y-=m,this}subVectors(m,L){return this.x=m.x-L.x,this.y=m.y-L.y,this}multiply(m){return this.x*=m.x,this.y*=m.y,this}multiplyScalar(m){return this.x*=m,this.y*=m,this}divide(m){return this.x/=m.x,this.y/=m.y,this}divideScalar(m){return this.multiplyScalar(1/m)}applyMatrix3(m){const L=this.x,j=this.y,ee=m.elements;return this.x=ee[0]*L+ee[3]*j+ee[6],this.y=ee[1]*L+ee[4]*j+ee[7],this}min(m){return this.x=Math.min(this.x,m.x),this.y=Math.min(this.y,m.y),this}max(m){return this.x=Math.max(this.x,m.x),this.y=Math.max(this.y,m.y),this}clamp(m,L){return this.x=Math.max(m.x,Math.min(L.x,this.x)),this.y=Math.max(m.y,Math.min(L.y,this.y)),this}clampScalar(m,L){return this.x=Math.max(m,Math.min(L,this.x)),this.y=Math.max(m,Math.min(L,this.y)),this}clampLength(m,L){const j=this.length();return this.divideScalar(j||1).multiplyScalar(Math.max(m,Math.min(L,j)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(m){return this.x*m.x+this.y*m.y}cross(m){return this.x*m.y-this.y*m.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(m){const L=Math.sqrt(this.lengthSq()*m.lengthSq());if(L===0)return Math.PI/2;const j=this.dot(m)/L;return Math.acos(clamp$1(j,-1,1))}distanceTo(m){return Math.sqrt(this.distanceToSquared(m))}distanceToSquared(m){const L=this.x-m.x,j=this.y-m.y;return L*L+j*j}manhattanDistanceTo(m){return Math.abs(this.x-m.x)+Math.abs(this.y-m.y)}setLength(m){return this.normalize().multiplyScalar(m)}lerp(m,L){return this.x+=(m.x-this.x)*L,this.y+=(m.y-this.y)*L,this}lerpVectors(m,L,j){return this.x=m.x+(L.x-m.x)*j,this.y=m.y+(L.y-m.y)*j,this}equals(m){return m.x===this.x&&m.y===this.y}fromArray(m,L=0){return this.x=m[L],this.y=m[L+1],this}toArray(m=[],L=0){return m[L]=this.x,m[L+1]=this.y,m}fromBufferAttribute(m,L){return this.x=m.getX(L),this.y=m.getY(L),this}rotateAround(m,L){const j=Math.cos(L),ee=Math.sin(L),re=this.x-m.x,le=this.y-m.y;return this.x=re*j-le*ee+m.x,this.y=re*ee+le*j+m.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Matrix3{constructor(m,L,j,ee,re,le,ve,ye,Ee){Matrix3.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],m!==void 0&&this.set(m,L,j,ee,re,le,ve,ye,Ee)}set(m,L,j,ee,re,le,ve,ye,Ee){const Me=this.elements;return Me[0]=m,Me[1]=ee,Me[2]=ve,Me[3]=L,Me[4]=re,Me[5]=ye,Me[6]=j,Me[7]=le,Me[8]=Ee,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(m){const L=this.elements,j=m.elements;return L[0]=j[0],L[1]=j[1],L[2]=j[2],L[3]=j[3],L[4]=j[4],L[5]=j[5],L[6]=j[6],L[7]=j[7],L[8]=j[8],this}extractBasis(m,L,j){return m.setFromMatrix3Column(this,0),L.setFromMatrix3Column(this,1),j.setFromMatrix3Column(this,2),this}setFromMatrix4(m){const L=m.elements;return this.set(L[0],L[4],L[8],L[1],L[5],L[9],L[2],L[6],L[10]),this}multiply(m){return this.multiplyMatrices(this,m)}premultiply(m){return this.multiplyMatrices(m,this)}multiplyMatrices(m,L){const j=m.elements,ee=L.elements,re=this.elements,le=j[0],ve=j[3],ye=j[6],Ee=j[1],Me=j[4],Ce=j[7],De=j[2],Be=j[5],ke=j[8],Fe=ee[0],Oe=ee[3],Ne=ee[6],ze=ee[1],$e=ee[4],He=ee[7],We=ee[2],qe=ee[5],Ye=ee[8];return re[0]=le*Fe+ve*ze+ye*We,re[3]=le*Oe+ve*$e+ye*qe,re[6]=le*Ne+ve*He+ye*Ye,re[1]=Ee*Fe+Me*ze+Ce*We,re[4]=Ee*Oe+Me*$e+Ce*qe,re[7]=Ee*Ne+Me*He+Ce*Ye,re[2]=De*Fe+Be*ze+ke*We,re[5]=De*Oe+Be*$e+ke*qe,re[8]=De*Ne+Be*He+ke*Ye,this}multiplyScalar(m){const L=this.elements;return L[0]*=m,L[3]*=m,L[6]*=m,L[1]*=m,L[4]*=m,L[7]*=m,L[2]*=m,L[5]*=m,L[8]*=m,this}determinant(){const m=this.elements,L=m[0],j=m[1],ee=m[2],re=m[3],le=m[4],ve=m[5],ye=m[6],Ee=m[7],Me=m[8];return L*le*Me-L*ve*Ee-j*re*Me+j*ve*ye+ee*re*Ee-ee*le*ye}invert(){const m=this.elements,L=m[0],j=m[1],ee=m[2],re=m[3],le=m[4],ve=m[5],ye=m[6],Ee=m[7],Me=m[8],Ce=Me*le-ve*Ee,De=ve*ye-Me*re,Be=Ee*re-le*ye,ke=L*Ce+j*De+ee*Be;if(ke===0)return this.set(0,0,0,0,0,0,0,0,0);const Fe=1/ke;return m[0]=Ce*Fe,m[1]=(ee*Ee-Me*j)*Fe,m[2]=(ve*j-ee*le)*Fe,m[3]=De*Fe,m[4]=(Me*L-ee*ye)*Fe,m[5]=(ee*re-ve*L)*Fe,m[6]=Be*Fe,m[7]=(j*ye-Ee*L)*Fe,m[8]=(le*L-j*re)*Fe,this}transpose(){let m;const L=this.elements;return m=L[1],L[1]=L[3],L[3]=m,m=L[2],L[2]=L[6],L[6]=m,m=L[5],L[5]=L[7],L[7]=m,this}getNormalMatrix(m){return this.setFromMatrix4(m).invert().transpose()}transposeIntoArray(m){const L=this.elements;return m[0]=L[0],m[1]=L[3],m[2]=L[6],m[3]=L[1],m[4]=L[4],m[5]=L[7],m[6]=L[2],m[7]=L[5],m[8]=L[8],this}setUvTransform(m,L,j,ee,re,le,ve){const ye=Math.cos(re),Ee=Math.sin(re);return this.set(j*ye,j*Ee,-j*(ye*le+Ee*ve)+le+m,-ee*Ee,ee*ye,-ee*(-Ee*le+ye*ve)+ve+L,0,0,1),this}scale(m,L){return this.premultiply(_m3.makeScale(m,L)),this}rotate(m){return this.premultiply(_m3.makeRotation(-m)),this}translate(m,L){return this.premultiply(_m3.makeTranslation(m,L)),this}makeTranslation(m,L){return m.isVector2?this.set(1,0,m.x,0,1,m.y,0,0,1):this.set(1,0,m,0,1,L,0,0,1),this}makeRotation(m){const L=Math.cos(m),j=Math.sin(m);return this.set(L,-j,0,j,L,0,0,0,1),this}makeScale(m,L){return this.set(m,0,0,0,L,0,0,0,1),this}equals(m){const L=this.elements,j=m.elements;for(let ee=0;ee<9;ee++)if(L[ee]!==j[ee])return!1;return!0}fromArray(m,L=0){for(let j=0;j<9;j++)this.elements[j]=m[j+L];return this}toArray(m=[],L=0){const j=this.elements;return m[L]=j[0],m[L+1]=j[1],m[L+2]=j[2],m[L+3]=j[3],m[L+4]=j[4],m[L+5]=j[5],m[L+6]=j[6],m[L+7]=j[7],m[L+8]=j[8],m}clone(){return new this.constructor().fromArray(this.elements)}}const _m3=new Matrix3;function arrayNeedsUint32($){for(let m=$.length-1;m>=0;--m)if($[m]>=65535)return!0;return!1}function createElementNS($){return document.createElementNS("http://www.w3.org/1999/xhtml",$)}function createCanvasElement(){const $=createElementNS("canvas");return $.style.display="block",$}const _cache={};function warnOnce($){$ in _cache||(_cache[$]=!0,console.warn($))}function probeAsync($,m,L){return new Promise(function(j,ee){function re(){switch($.clientWaitSync(m,$.SYNC_FLUSH_COMMANDS_BIT,0)){case $.WAIT_FAILED:ee();break;case $.TIMEOUT_EXPIRED:setTimeout(re,L);break;default:j()}}setTimeout(re,L)})}const LINEAR_SRGB_TO_LINEAR_DISPLAY_P3=new Matrix3().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),LINEAR_DISPLAY_P3_TO_LINEAR_SRGB=new Matrix3().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),COLOR_SPACES={[LinearSRGBColorSpace]:{transfer:LinearTransfer,primaries:Rec709Primaries,toReference:$=>$,fromReference:$=>$},[SRGBColorSpace]:{transfer:SRGBTransfer,primaries:Rec709Primaries,toReference:$=>$.convertSRGBToLinear(),fromReference:$=>$.convertLinearToSRGB()},[LinearDisplayP3ColorSpace]:{transfer:LinearTransfer,primaries:P3Primaries,toReference:$=>$.applyMatrix3(LINEAR_DISPLAY_P3_TO_LINEAR_SRGB),fromReference:$=>$.applyMatrix3(LINEAR_SRGB_TO_LINEAR_DISPLAY_P3)},[DisplayP3ColorSpace]:{transfer:SRGBTransfer,primaries:P3Primaries,toReference:$=>$.convertSRGBToLinear().applyMatrix3(LINEAR_DISPLAY_P3_TO_LINEAR_SRGB),fromReference:$=>$.applyMatrix3(LINEAR_SRGB_TO_LINEAR_DISPLAY_P3).convertLinearToSRGB()}},SUPPORTED_WORKING_COLOR_SPACES=new Set([LinearSRGBColorSpace,LinearDisplayP3ColorSpace]),ColorManagement={enabled:!0,_workingColorSpace:LinearSRGBColorSpace,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace($){if(!SUPPORTED_WORKING_COLOR_SPACES.has($))throw new Error(`Unsupported working color space, "${$}".`);this._workingColorSpace=$},convert:function($,m,L){if(this.enabled===!1||m===L||!m||!L)return $;const j=COLOR_SPACES[m].toReference,ee=COLOR_SPACES[L].fromReference;return ee(j($))},fromWorkingColorSpace:function($,m){return this.convert($,this._workingColorSpace,m)},toWorkingColorSpace:function($,m){return this.convert($,m,this._workingColorSpace)},getPrimaries:function($){return COLOR_SPACES[$].primaries},getTransfer:function($){return $===NoColorSpace?LinearTransfer:COLOR_SPACES[$].transfer}};function SRGBToLinear($){return $<.04045?$*.0773993808:Math.pow($*.9478672986+.0521327014,2.4)}function LinearToSRGB($){return $<.0031308?$*12.92:1.055*Math.pow($,.41666)-.055}let _canvas;class ImageUtils{static getDataURL(m){if(/^data:/i.test(m.src)||typeof HTMLCanvasElement>"u")return m.src;let L;if(m instanceof HTMLCanvasElement)L=m;else{_canvas===void 0&&(_canvas=createElementNS("canvas")),_canvas.width=m.width,_canvas.height=m.height;const j=_canvas.getContext("2d");m instanceof ImageData?j.putImageData(m,0,0):j.drawImage(m,0,0,m.width,m.height),L=_canvas}return L.width>2048||L.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",m),L.toDataURL("image/jpeg",.6)):L.toDataURL("image/png")}static sRGBToLinear(m){if(typeof HTMLImageElement<"u"&&m instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&m instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&m instanceof ImageBitmap){const L=createElementNS("canvas");L.width=m.width,L.height=m.height;const j=L.getContext("2d");j.drawImage(m,0,0,m.width,m.height);const ee=j.getImageData(0,0,m.width,m.height),re=ee.data;for(let le=0;le<re.length;le++)re[le]=SRGBToLinear(re[le]/255)*255;return j.putImageData(ee,0,0),L}else if(m.data){const L=m.data.slice(0);for(let j=0;j<L.length;j++)L instanceof Uint8Array||L instanceof Uint8ClampedArray?L[j]=Math.floor(SRGBToLinear(L[j]/255)*255):L[j]=SRGBToLinear(L[j]);return{data:L,width:m.width,height:m.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),m}}let _sourceId=0;class Source{constructor(m=null){this.isSource=!0,Object.defineProperty(this,"id",{value:_sourceId++}),this.uuid=generateUUID(),this.data=m,this.dataReady=!0,this.version=0}set needsUpdate(m){m===!0&&this.version++}toJSON(m){const L=m===void 0||typeof m=="string";if(!L&&m.images[this.uuid]!==void 0)return m.images[this.uuid];const j={uuid:this.uuid,url:""},ee=this.data;if(ee!==null){let re;if(Array.isArray(ee)){re=[];for(let le=0,ve=ee.length;le<ve;le++)ee[le].isDataTexture?re.push(serializeImage(ee[le].image)):re.push(serializeImage(ee[le]))}else re=serializeImage(ee);j.url=re}return L||(m.images[this.uuid]=j),j}}function serializeImage($){return typeof HTMLImageElement<"u"&&$ instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&$ instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&$ instanceof ImageBitmap?ImageUtils.getDataURL($):$.data?{data:Array.from($.data),width:$.width,height:$.height,type:$.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let _textureId=0;class Texture extends EventDispatcher$2{constructor(m=Texture.DEFAULT_IMAGE,L=Texture.DEFAULT_MAPPING,j=ClampToEdgeWrapping,ee=ClampToEdgeWrapping,re=LinearFilter,le=LinearMipmapLinearFilter,ve=RGBAFormat,ye=UnsignedByteType,Ee=Texture.DEFAULT_ANISOTROPY,Me=NoColorSpace){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:_textureId++}),this.uuid=generateUUID(),this.name="",this.source=new Source(m),this.mipmaps=[],this.mapping=L,this.channel=0,this.wrapS=j,this.wrapT=ee,this.magFilter=re,this.minFilter=le,this.anisotropy=Ee,this.format=ve,this.internalFormat=null,this.type=ye,this.offset=new Vector2(0,0),this.repeat=new Vector2(1,1),this.center=new Vector2(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Matrix3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=Me,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(m=null){this.source.data=m}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(m){return this.name=m.name,this.source=m.source,this.mipmaps=m.mipmaps.slice(0),this.mapping=m.mapping,this.channel=m.channel,this.wrapS=m.wrapS,this.wrapT=m.wrapT,this.magFilter=m.magFilter,this.minFilter=m.minFilter,this.anisotropy=m.anisotropy,this.format=m.format,this.internalFormat=m.internalFormat,this.type=m.type,this.offset.copy(m.offset),this.repeat.copy(m.repeat),this.center.copy(m.center),this.rotation=m.rotation,this.matrixAutoUpdate=m.matrixAutoUpdate,this.matrix.copy(m.matrix),this.generateMipmaps=m.generateMipmaps,this.premultiplyAlpha=m.premultiplyAlpha,this.flipY=m.flipY,this.unpackAlignment=m.unpackAlignment,this.colorSpace=m.colorSpace,this.userData=JSON.parse(JSON.stringify(m.userData)),this.needsUpdate=!0,this}toJSON(m){const L=m===void 0||typeof m=="string";if(!L&&m.textures[this.uuid]!==void 0)return m.textures[this.uuid];const j={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(m).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(j.userData=this.userData),L||(m.textures[this.uuid]=j),j}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(m){if(this.mapping!==UVMapping)return m;if(m.applyMatrix3(this.matrix),m.x<0||m.x>1)switch(this.wrapS){case RepeatWrapping:m.x=m.x-Math.floor(m.x);break;case ClampToEdgeWrapping:m.x=m.x<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(m.x)%2)===1?m.x=Math.ceil(m.x)-m.x:m.x=m.x-Math.floor(m.x);break}if(m.y<0||m.y>1)switch(this.wrapT){case RepeatWrapping:m.y=m.y-Math.floor(m.y);break;case ClampToEdgeWrapping:m.y=m.y<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(m.y)%2)===1?m.y=Math.ceil(m.y)-m.y:m.y=m.y-Math.floor(m.y);break}return this.flipY&&(m.y=1-m.y),m}set needsUpdate(m){m===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(m){m===!0&&this.pmremVersion++}}Texture.DEFAULT_IMAGE=null;Texture.DEFAULT_MAPPING=UVMapping;Texture.DEFAULT_ANISOTROPY=1;class Vector4{constructor(m=0,L=0,j=0,ee=1){Vector4.prototype.isVector4=!0,this.x=m,this.y=L,this.z=j,this.w=ee}get width(){return this.z}set width(m){this.z=m}get height(){return this.w}set height(m){this.w=m}set(m,L,j,ee){return this.x=m,this.y=L,this.z=j,this.w=ee,this}setScalar(m){return this.x=m,this.y=m,this.z=m,this.w=m,this}setX(m){return this.x=m,this}setY(m){return this.y=m,this}setZ(m){return this.z=m,this}setW(m){return this.w=m,this}setComponent(m,L){switch(m){case 0:this.x=L;break;case 1:this.y=L;break;case 2:this.z=L;break;case 3:this.w=L;break;default:throw new Error("index is out of range: "+m)}return this}getComponent(m){switch(m){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+m)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(m){return this.x=m.x,this.y=m.y,this.z=m.z,this.w=m.w!==void 0?m.w:1,this}add(m){return this.x+=m.x,this.y+=m.y,this.z+=m.z,this.w+=m.w,this}addScalar(m){return this.x+=m,this.y+=m,this.z+=m,this.w+=m,this}addVectors(m,L){return this.x=m.x+L.x,this.y=m.y+L.y,this.z=m.z+L.z,this.w=m.w+L.w,this}addScaledVector(m,L){return this.x+=m.x*L,this.y+=m.y*L,this.z+=m.z*L,this.w+=m.w*L,this}sub(m){return this.x-=m.x,this.y-=m.y,this.z-=m.z,this.w-=m.w,this}subScalar(m){return this.x-=m,this.y-=m,this.z-=m,this.w-=m,this}subVectors(m,L){return this.x=m.x-L.x,this.y=m.y-L.y,this.z=m.z-L.z,this.w=m.w-L.w,this}multiply(m){return this.x*=m.x,this.y*=m.y,this.z*=m.z,this.w*=m.w,this}multiplyScalar(m){return this.x*=m,this.y*=m,this.z*=m,this.w*=m,this}applyMatrix4(m){const L=this.x,j=this.y,ee=this.z,re=this.w,le=m.elements;return this.x=le[0]*L+le[4]*j+le[8]*ee+le[12]*re,this.y=le[1]*L+le[5]*j+le[9]*ee+le[13]*re,this.z=le[2]*L+le[6]*j+le[10]*ee+le[14]*re,this.w=le[3]*L+le[7]*j+le[11]*ee+le[15]*re,this}divideScalar(m){return this.multiplyScalar(1/m)}setAxisAngleFromQuaternion(m){this.w=2*Math.acos(m.w);const L=Math.sqrt(1-m.w*m.w);return L<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=m.x/L,this.y=m.y/L,this.z=m.z/L),this}setAxisAngleFromRotationMatrix(m){let L,j,ee,re;const ye=m.elements,Ee=ye[0],Me=ye[4],Ce=ye[8],De=ye[1],Be=ye[5],ke=ye[9],Fe=ye[2],Oe=ye[6],Ne=ye[10];if(Math.abs(Me-De)<.01&&Math.abs(Ce-Fe)<.01&&Math.abs(ke-Oe)<.01){if(Math.abs(Me+De)<.1&&Math.abs(Ce+Fe)<.1&&Math.abs(ke+Oe)<.1&&Math.abs(Ee+Be+Ne-3)<.1)return this.set(1,0,0,0),this;L=Math.PI;const $e=(Ee+1)/2,He=(Be+1)/2,We=(Ne+1)/2,qe=(Me+De)/4,Ye=(Ce+Fe)/4,Ze=(ke+Oe)/4;return $e>He&&$e>We?$e<.01?(j=0,ee=.707106781,re=.707106781):(j=Math.sqrt($e),ee=qe/j,re=Ye/j):He>We?He<.01?(j=.707106781,ee=0,re=.707106781):(ee=Math.sqrt(He),j=qe/ee,re=Ze/ee):We<.01?(j=.707106781,ee=.707106781,re=0):(re=Math.sqrt(We),j=Ye/re,ee=Ze/re),this.set(j,ee,re,L),this}let ze=Math.sqrt((Oe-ke)*(Oe-ke)+(Ce-Fe)*(Ce-Fe)+(De-Me)*(De-Me));return Math.abs(ze)<.001&&(ze=1),this.x=(Oe-ke)/ze,this.y=(Ce-Fe)/ze,this.z=(De-Me)/ze,this.w=Math.acos((Ee+Be+Ne-1)/2),this}min(m){return this.x=Math.min(this.x,m.x),this.y=Math.min(this.y,m.y),this.z=Math.min(this.z,m.z),this.w=Math.min(this.w,m.w),this}max(m){return this.x=Math.max(this.x,m.x),this.y=Math.max(this.y,m.y),this.z=Math.max(this.z,m.z),this.w=Math.max(this.w,m.w),this}clamp(m,L){return this.x=Math.max(m.x,Math.min(L.x,this.x)),this.y=Math.max(m.y,Math.min(L.y,this.y)),this.z=Math.max(m.z,Math.min(L.z,this.z)),this.w=Math.max(m.w,Math.min(L.w,this.w)),this}clampScalar(m,L){return this.x=Math.max(m,Math.min(L,this.x)),this.y=Math.max(m,Math.min(L,this.y)),this.z=Math.max(m,Math.min(L,this.z)),this.w=Math.max(m,Math.min(L,this.w)),this}clampLength(m,L){const j=this.length();return this.divideScalar(j||1).multiplyScalar(Math.max(m,Math.min(L,j)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(m){return this.x*m.x+this.y*m.y+this.z*m.z+this.w*m.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(m){return this.normalize().multiplyScalar(m)}lerp(m,L){return this.x+=(m.x-this.x)*L,this.y+=(m.y-this.y)*L,this.z+=(m.z-this.z)*L,this.w+=(m.w-this.w)*L,this}lerpVectors(m,L,j){return this.x=m.x+(L.x-m.x)*j,this.y=m.y+(L.y-m.y)*j,this.z=m.z+(L.z-m.z)*j,this.w=m.w+(L.w-m.w)*j,this}equals(m){return m.x===this.x&&m.y===this.y&&m.z===this.z&&m.w===this.w}fromArray(m,L=0){return this.x=m[L],this.y=m[L+1],this.z=m[L+2],this.w=m[L+3],this}toArray(m=[],L=0){return m[L]=this.x,m[L+1]=this.y,m[L+2]=this.z,m[L+3]=this.w,m}fromBufferAttribute(m,L){return this.x=m.getX(L),this.y=m.getY(L),this.z=m.getZ(L),this.w=m.getW(L),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class RenderTarget extends EventDispatcher$2{constructor(m=1,L=1,j={}){super(),this.isRenderTarget=!0,this.width=m,this.height=L,this.depth=1,this.scissor=new Vector4(0,0,m,L),this.scissorTest=!1,this.viewport=new Vector4(0,0,m,L);const ee={width:m,height:L,depth:1};j=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:LinearFilter,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},j);const re=new Texture(ee,j.mapping,j.wrapS,j.wrapT,j.magFilter,j.minFilter,j.format,j.type,j.anisotropy,j.colorSpace);re.flipY=!1,re.generateMipmaps=j.generateMipmaps,re.internalFormat=j.internalFormat,this.textures=[];const le=j.count;for(let ve=0;ve<le;ve++)this.textures[ve]=re.clone(),this.textures[ve].isRenderTargetTexture=!0;this.depthBuffer=j.depthBuffer,this.stencilBuffer=j.stencilBuffer,this.resolveDepthBuffer=j.resolveDepthBuffer,this.resolveStencilBuffer=j.resolveStencilBuffer,this.depthTexture=j.depthTexture,this.samples=j.samples}get texture(){return this.textures[0]}set texture(m){this.textures[0]=m}setSize(m,L,j=1){if(this.width!==m||this.height!==L||this.depth!==j){this.width=m,this.height=L,this.depth=j;for(let ee=0,re=this.textures.length;ee<re;ee++)this.textures[ee].image.width=m,this.textures[ee].image.height=L,this.textures[ee].image.depth=j;this.dispose()}this.viewport.set(0,0,m,L),this.scissor.set(0,0,m,L)}clone(){return new this.constructor().copy(this)}copy(m){this.width=m.width,this.height=m.height,this.depth=m.depth,this.scissor.copy(m.scissor),this.scissorTest=m.scissorTest,this.viewport.copy(m.viewport),this.textures.length=0;for(let j=0,ee=m.textures.length;j<ee;j++)this.textures[j]=m.textures[j].clone(),this.textures[j].isRenderTargetTexture=!0;const L=Object.assign({},m.texture.image);return this.texture.source=new Source(L),this.depthBuffer=m.depthBuffer,this.stencilBuffer=m.stencilBuffer,this.resolveDepthBuffer=m.resolveDepthBuffer,this.resolveStencilBuffer=m.resolveStencilBuffer,m.depthTexture!==null&&(this.depthTexture=m.depthTexture.clone()),this.samples=m.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class WebGLRenderTarget extends RenderTarget{constructor(m=1,L=1,j={}){super(m,L,j),this.isWebGLRenderTarget=!0}}class DataArrayTexture extends Texture{constructor(m=null,L=1,j=1,ee=1){super(null),this.isDataArrayTexture=!0,this.image={data:m,width:L,height:j,depth:ee},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(m){this.layerUpdates.add(m)}clearLayerUpdates(){this.layerUpdates.clear()}}class Data3DTexture extends Texture{constructor(m=null,L=1,j=1,ee=1){super(null),this.isData3DTexture=!0,this.image={data:m,width:L,height:j,depth:ee},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Quaternion{constructor(m=0,L=0,j=0,ee=1){this.isQuaternion=!0,this._x=m,this._y=L,this._z=j,this._w=ee}static slerpFlat(m,L,j,ee,re,le,ve){let ye=j[ee+0],Ee=j[ee+1],Me=j[ee+2],Ce=j[ee+3];const De=re[le+0],Be=re[le+1],ke=re[le+2],Fe=re[le+3];if(ve===0){m[L+0]=ye,m[L+1]=Ee,m[L+2]=Me,m[L+3]=Ce;return}if(ve===1){m[L+0]=De,m[L+1]=Be,m[L+2]=ke,m[L+3]=Fe;return}if(Ce!==Fe||ye!==De||Ee!==Be||Me!==ke){let Oe=1-ve;const Ne=ye*De+Ee*Be+Me*ke+Ce*Fe,ze=Ne>=0?1:-1,$e=1-Ne*Ne;if($e>Number.EPSILON){const We=Math.sqrt($e),qe=Math.atan2(We,Ne*ze);Oe=Math.sin(Oe*qe)/We,ve=Math.sin(ve*qe)/We}const He=ve*ze;if(ye=ye*Oe+De*He,Ee=Ee*Oe+Be*He,Me=Me*Oe+ke*He,Ce=Ce*Oe+Fe*He,Oe===1-ve){const We=1/Math.sqrt(ye*ye+Ee*Ee+Me*Me+Ce*Ce);ye*=We,Ee*=We,Me*=We,Ce*=We}}m[L]=ye,m[L+1]=Ee,m[L+2]=Me,m[L+3]=Ce}static multiplyQuaternionsFlat(m,L,j,ee,re,le){const ve=j[ee],ye=j[ee+1],Ee=j[ee+2],Me=j[ee+3],Ce=re[le],De=re[le+1],Be=re[le+2],ke=re[le+3];return m[L]=ve*ke+Me*Ce+ye*Be-Ee*De,m[L+1]=ye*ke+Me*De+Ee*Ce-ve*Be,m[L+2]=Ee*ke+Me*Be+ve*De-ye*Ce,m[L+3]=Me*ke-ve*Ce-ye*De-Ee*Be,m}get x(){return this._x}set x(m){this._x=m,this._onChangeCallback()}get y(){return this._y}set y(m){this._y=m,this._onChangeCallback()}get z(){return this._z}set z(m){this._z=m,this._onChangeCallback()}get w(){return this._w}set w(m){this._w=m,this._onChangeCallback()}set(m,L,j,ee){return this._x=m,this._y=L,this._z=j,this._w=ee,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(m){return this._x=m.x,this._y=m.y,this._z=m.z,this._w=m.w,this._onChangeCallback(),this}setFromEuler(m,L=!0){const j=m._x,ee=m._y,re=m._z,le=m._order,ve=Math.cos,ye=Math.sin,Ee=ve(j/2),Me=ve(ee/2),Ce=ve(re/2),De=ye(j/2),Be=ye(ee/2),ke=ye(re/2);switch(le){case"XYZ":this._x=De*Me*Ce+Ee*Be*ke,this._y=Ee*Be*Ce-De*Me*ke,this._z=Ee*Me*ke+De*Be*Ce,this._w=Ee*Me*Ce-De*Be*ke;break;case"YXZ":this._x=De*Me*Ce+Ee*Be*ke,this._y=Ee*Be*Ce-De*Me*ke,this._z=Ee*Me*ke-De*Be*Ce,this._w=Ee*Me*Ce+De*Be*ke;break;case"ZXY":this._x=De*Me*Ce-Ee*Be*ke,this._y=Ee*Be*Ce+De*Me*ke,this._z=Ee*Me*ke+De*Be*Ce,this._w=Ee*Me*Ce-De*Be*ke;break;case"ZYX":this._x=De*Me*Ce-Ee*Be*ke,this._y=Ee*Be*Ce+De*Me*ke,this._z=Ee*Me*ke-De*Be*Ce,this._w=Ee*Me*Ce+De*Be*ke;break;case"YZX":this._x=De*Me*Ce+Ee*Be*ke,this._y=Ee*Be*Ce+De*Me*ke,this._z=Ee*Me*ke-De*Be*Ce,this._w=Ee*Me*Ce-De*Be*ke;break;case"XZY":this._x=De*Me*Ce-Ee*Be*ke,this._y=Ee*Be*Ce-De*Me*ke,this._z=Ee*Me*ke+De*Be*Ce,this._w=Ee*Me*Ce+De*Be*ke;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+le)}return L===!0&&this._onChangeCallback(),this}setFromAxisAngle(m,L){const j=L/2,ee=Math.sin(j);return this._x=m.x*ee,this._y=m.y*ee,this._z=m.z*ee,this._w=Math.cos(j),this._onChangeCallback(),this}setFromRotationMatrix(m){const L=m.elements,j=L[0],ee=L[4],re=L[8],le=L[1],ve=L[5],ye=L[9],Ee=L[2],Me=L[6],Ce=L[10],De=j+ve+Ce;if(De>0){const Be=.5/Math.sqrt(De+1);this._w=.25/Be,this._x=(Me-ye)*Be,this._y=(re-Ee)*Be,this._z=(le-ee)*Be}else if(j>ve&&j>Ce){const Be=2*Math.sqrt(1+j-ve-Ce);this._w=(Me-ye)/Be,this._x=.25*Be,this._y=(ee+le)/Be,this._z=(re+Ee)/Be}else if(ve>Ce){const Be=2*Math.sqrt(1+ve-j-Ce);this._w=(re-Ee)/Be,this._x=(ee+le)/Be,this._y=.25*Be,this._z=(ye+Me)/Be}else{const Be=2*Math.sqrt(1+Ce-j-ve);this._w=(le-ee)/Be,this._x=(re+Ee)/Be,this._y=(ye+Me)/Be,this._z=.25*Be}return this._onChangeCallback(),this}setFromUnitVectors(m,L){let j=m.dot(L)+1;return j<Number.EPSILON?(j=0,Math.abs(m.x)>Math.abs(m.z)?(this._x=-m.y,this._y=m.x,this._z=0,this._w=j):(this._x=0,this._y=-m.z,this._z=m.y,this._w=j)):(this._x=m.y*L.z-m.z*L.y,this._y=m.z*L.x-m.x*L.z,this._z=m.x*L.y-m.y*L.x,this._w=j),this.normalize()}angleTo(m){return 2*Math.acos(Math.abs(clamp$1(this.dot(m),-1,1)))}rotateTowards(m,L){const j=this.angleTo(m);if(j===0)return this;const ee=Math.min(1,L/j);return this.slerp(m,ee),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(m){return this._x*m._x+this._y*m._y+this._z*m._z+this._w*m._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let m=this.length();return m===0?(this._x=0,this._y=0,this._z=0,this._w=1):(m=1/m,this._x=this._x*m,this._y=this._y*m,this._z=this._z*m,this._w=this._w*m),this._onChangeCallback(),this}multiply(m){return this.multiplyQuaternions(this,m)}premultiply(m){return this.multiplyQuaternions(m,this)}multiplyQuaternions(m,L){const j=m._x,ee=m._y,re=m._z,le=m._w,ve=L._x,ye=L._y,Ee=L._z,Me=L._w;return this._x=j*Me+le*ve+ee*Ee-re*ye,this._y=ee*Me+le*ye+re*ve-j*Ee,this._z=re*Me+le*Ee+j*ye-ee*ve,this._w=le*Me-j*ve-ee*ye-re*Ee,this._onChangeCallback(),this}slerp(m,L){if(L===0)return this;if(L===1)return this.copy(m);const j=this._x,ee=this._y,re=this._z,le=this._w;let ve=le*m._w+j*m._x+ee*m._y+re*m._z;if(ve<0?(this._w=-m._w,this._x=-m._x,this._y=-m._y,this._z=-m._z,ve=-ve):this.copy(m),ve>=1)return this._w=le,this._x=j,this._y=ee,this._z=re,this;const ye=1-ve*ve;if(ye<=Number.EPSILON){const Be=1-L;return this._w=Be*le+L*this._w,this._x=Be*j+L*this._x,this._y=Be*ee+L*this._y,this._z=Be*re+L*this._z,this.normalize(),this}const Ee=Math.sqrt(ye),Me=Math.atan2(Ee,ve),Ce=Math.sin((1-L)*Me)/Ee,De=Math.sin(L*Me)/Ee;return this._w=le*Ce+this._w*De,this._x=j*Ce+this._x*De,this._y=ee*Ce+this._y*De,this._z=re*Ce+this._z*De,this._onChangeCallback(),this}slerpQuaternions(m,L,j){return this.copy(m).slerp(L,j)}random(){const m=2*Math.PI*Math.random(),L=2*Math.PI*Math.random(),j=Math.random(),ee=Math.sqrt(1-j),re=Math.sqrt(j);return this.set(ee*Math.sin(m),ee*Math.cos(m),re*Math.sin(L),re*Math.cos(L))}equals(m){return m._x===this._x&&m._y===this._y&&m._z===this._z&&m._w===this._w}fromArray(m,L=0){return this._x=m[L],this._y=m[L+1],this._z=m[L+2],this._w=m[L+3],this._onChangeCallback(),this}toArray(m=[],L=0){return m[L]=this._x,m[L+1]=this._y,m[L+2]=this._z,m[L+3]=this._w,m}fromBufferAttribute(m,L){return this._x=m.getX(L),this._y=m.getY(L),this._z=m.getZ(L),this._w=m.getW(L),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(m){return this._onChangeCallback=m,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Vector3{constructor(m=0,L=0,j=0){Vector3.prototype.isVector3=!0,this.x=m,this.y=L,this.z=j}set(m,L,j){return j===void 0&&(j=this.z),this.x=m,this.y=L,this.z=j,this}setScalar(m){return this.x=m,this.y=m,this.z=m,this}setX(m){return this.x=m,this}setY(m){return this.y=m,this}setZ(m){return this.z=m,this}setComponent(m,L){switch(m){case 0:this.x=L;break;case 1:this.y=L;break;case 2:this.z=L;break;default:throw new Error("index is out of range: "+m)}return this}getComponent(m){switch(m){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+m)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(m){return this.x=m.x,this.y=m.y,this.z=m.z,this}add(m){return this.x+=m.x,this.y+=m.y,this.z+=m.z,this}addScalar(m){return this.x+=m,this.y+=m,this.z+=m,this}addVectors(m,L){return this.x=m.x+L.x,this.y=m.y+L.y,this.z=m.z+L.z,this}addScaledVector(m,L){return this.x+=m.x*L,this.y+=m.y*L,this.z+=m.z*L,this}sub(m){return this.x-=m.x,this.y-=m.y,this.z-=m.z,this}subScalar(m){return this.x-=m,this.y-=m,this.z-=m,this}subVectors(m,L){return this.x=m.x-L.x,this.y=m.y-L.y,this.z=m.z-L.z,this}multiply(m){return this.x*=m.x,this.y*=m.y,this.z*=m.z,this}multiplyScalar(m){return this.x*=m,this.y*=m,this.z*=m,this}multiplyVectors(m,L){return this.x=m.x*L.x,this.y=m.y*L.y,this.z=m.z*L.z,this}applyEuler(m){return this.applyQuaternion(_quaternion$4.setFromEuler(m))}applyAxisAngle(m,L){return this.applyQuaternion(_quaternion$4.setFromAxisAngle(m,L))}applyMatrix3(m){const L=this.x,j=this.y,ee=this.z,re=m.elements;return this.x=re[0]*L+re[3]*j+re[6]*ee,this.y=re[1]*L+re[4]*j+re[7]*ee,this.z=re[2]*L+re[5]*j+re[8]*ee,this}applyNormalMatrix(m){return this.applyMatrix3(m).normalize()}applyMatrix4(m){const L=this.x,j=this.y,ee=this.z,re=m.elements,le=1/(re[3]*L+re[7]*j+re[11]*ee+re[15]);return this.x=(re[0]*L+re[4]*j+re[8]*ee+re[12])*le,this.y=(re[1]*L+re[5]*j+re[9]*ee+re[13])*le,this.z=(re[2]*L+re[6]*j+re[10]*ee+re[14])*le,this}applyQuaternion(m){const L=this.x,j=this.y,ee=this.z,re=m.x,le=m.y,ve=m.z,ye=m.w,Ee=2*(le*ee-ve*j),Me=2*(ve*L-re*ee),Ce=2*(re*j-le*L);return this.x=L+ye*Ee+le*Ce-ve*Me,this.y=j+ye*Me+ve*Ee-re*Ce,this.z=ee+ye*Ce+re*Me-le*Ee,this}project(m){return this.applyMatrix4(m.matrixWorldInverse).applyMatrix4(m.projectionMatrix)}unproject(m){return this.applyMatrix4(m.projectionMatrixInverse).applyMatrix4(m.matrixWorld)}transformDirection(m){const L=this.x,j=this.y,ee=this.z,re=m.elements;return this.x=re[0]*L+re[4]*j+re[8]*ee,this.y=re[1]*L+re[5]*j+re[9]*ee,this.z=re[2]*L+re[6]*j+re[10]*ee,this.normalize()}divide(m){return this.x/=m.x,this.y/=m.y,this.z/=m.z,this}divideScalar(m){return this.multiplyScalar(1/m)}min(m){return this.x=Math.min(this.x,m.x),this.y=Math.min(this.y,m.y),this.z=Math.min(this.z,m.z),this}max(m){return this.x=Math.max(this.x,m.x),this.y=Math.max(this.y,m.y),this.z=Math.max(this.z,m.z),this}clamp(m,L){return this.x=Math.max(m.x,Math.min(L.x,this.x)),this.y=Math.max(m.y,Math.min(L.y,this.y)),this.z=Math.max(m.z,Math.min(L.z,this.z)),this}clampScalar(m,L){return this.x=Math.max(m,Math.min(L,this.x)),this.y=Math.max(m,Math.min(L,this.y)),this.z=Math.max(m,Math.min(L,this.z)),this}clampLength(m,L){const j=this.length();return this.divideScalar(j||1).multiplyScalar(Math.max(m,Math.min(L,j)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(m){return this.x*m.x+this.y*m.y+this.z*m.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(m){return this.normalize().multiplyScalar(m)}lerp(m,L){return this.x+=(m.x-this.x)*L,this.y+=(m.y-this.y)*L,this.z+=(m.z-this.z)*L,this}lerpVectors(m,L,j){return this.x=m.x+(L.x-m.x)*j,this.y=m.y+(L.y-m.y)*j,this.z=m.z+(L.z-m.z)*j,this}cross(m){return this.crossVectors(this,m)}crossVectors(m,L){const j=m.x,ee=m.y,re=m.z,le=L.x,ve=L.y,ye=L.z;return this.x=ee*ye-re*ve,this.y=re*le-j*ye,this.z=j*ve-ee*le,this}projectOnVector(m){const L=m.lengthSq();if(L===0)return this.set(0,0,0);const j=m.dot(this)/L;return this.copy(m).multiplyScalar(j)}projectOnPlane(m){return _vector$c.copy(this).projectOnVector(m),this.sub(_vector$c)}reflect(m){return this.sub(_vector$c.copy(m).multiplyScalar(2*this.dot(m)))}angleTo(m){const L=Math.sqrt(this.lengthSq()*m.lengthSq());if(L===0)return Math.PI/2;const j=this.dot(m)/L;return Math.acos(clamp$1(j,-1,1))}distanceTo(m){return Math.sqrt(this.distanceToSquared(m))}distanceToSquared(m){const L=this.x-m.x,j=this.y-m.y,ee=this.z-m.z;return L*L+j*j+ee*ee}manhattanDistanceTo(m){return Math.abs(this.x-m.x)+Math.abs(this.y-m.y)+Math.abs(this.z-m.z)}setFromSpherical(m){return this.setFromSphericalCoords(m.radius,m.phi,m.theta)}setFromSphericalCoords(m,L,j){const ee=Math.sin(L)*m;return this.x=ee*Math.sin(j),this.y=Math.cos(L)*m,this.z=ee*Math.cos(j),this}setFromCylindrical(m){return this.setFromCylindricalCoords(m.radius,m.theta,m.y)}setFromCylindricalCoords(m,L,j){return this.x=m*Math.sin(L),this.y=j,this.z=m*Math.cos(L),this}setFromMatrixPosition(m){const L=m.elements;return this.x=L[12],this.y=L[13],this.z=L[14],this}setFromMatrixScale(m){const L=this.setFromMatrixColumn(m,0).length(),j=this.setFromMatrixColumn(m,1).length(),ee=this.setFromMatrixColumn(m,2).length();return this.x=L,this.y=j,this.z=ee,this}setFromMatrixColumn(m,L){return this.fromArray(m.elements,L*4)}setFromMatrix3Column(m,L){return this.fromArray(m.elements,L*3)}setFromEuler(m){return this.x=m._x,this.y=m._y,this.z=m._z,this}setFromColor(m){return this.x=m.r,this.y=m.g,this.z=m.b,this}equals(m){return m.x===this.x&&m.y===this.y&&m.z===this.z}fromArray(m,L=0){return this.x=m[L],this.y=m[L+1],this.z=m[L+2],this}toArray(m=[],L=0){return m[L]=this.x,m[L+1]=this.y,m[L+2]=this.z,m}fromBufferAttribute(m,L){return this.x=m.getX(L),this.y=m.getY(L),this.z=m.getZ(L),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const m=Math.random()*Math.PI*2,L=Math.random()*2-1,j=Math.sqrt(1-L*L);return this.x=j*Math.cos(m),this.y=L,this.z=j*Math.sin(m),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const _vector$c=new Vector3,_quaternion$4=new Quaternion;class Box3{constructor(m=new Vector3(1/0,1/0,1/0),L=new Vector3(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=m,this.max=L}set(m,L){return this.min.copy(m),this.max.copy(L),this}setFromArray(m){this.makeEmpty();for(let L=0,j=m.length;L<j;L+=3)this.expandByPoint(_vector$b.fromArray(m,L));return this}setFromBufferAttribute(m){this.makeEmpty();for(let L=0,j=m.count;L<j;L++)this.expandByPoint(_vector$b.fromBufferAttribute(m,L));return this}setFromPoints(m){this.makeEmpty();for(let L=0,j=m.length;L<j;L++)this.expandByPoint(m[L]);return this}setFromCenterAndSize(m,L){const j=_vector$b.copy(L).multiplyScalar(.5);return this.min.copy(m).sub(j),this.max.copy(m).add(j),this}setFromObject(m,L=!1){return this.makeEmpty(),this.expandByObject(m,L)}clone(){return new this.constructor().copy(this)}copy(m){return this.min.copy(m.min),this.max.copy(m.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(m){return this.isEmpty()?m.set(0,0,0):m.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(m){return this.isEmpty()?m.set(0,0,0):m.subVectors(this.max,this.min)}expandByPoint(m){return this.min.min(m),this.max.max(m),this}expandByVector(m){return this.min.sub(m),this.max.add(m),this}expandByScalar(m){return this.min.addScalar(-m),this.max.addScalar(m),this}expandByObject(m,L=!1){m.updateWorldMatrix(!1,!1);const j=m.geometry;if(j!==void 0){const re=j.getAttribute("position");if(L===!0&&re!==void 0&&m.isInstancedMesh!==!0)for(let le=0,ve=re.count;le<ve;le++)m.isMesh===!0?m.getVertexPosition(le,_vector$b):_vector$b.fromBufferAttribute(re,le),_vector$b.applyMatrix4(m.matrixWorld),this.expandByPoint(_vector$b);else m.boundingBox!==void 0?(m.boundingBox===null&&m.computeBoundingBox(),_box$4.copy(m.boundingBox)):(j.boundingBox===null&&j.computeBoundingBox(),_box$4.copy(j.boundingBox)),_box$4.applyMatrix4(m.matrixWorld),this.union(_box$4)}const ee=m.children;for(let re=0,le=ee.length;re<le;re++)this.expandByObject(ee[re],L);return this}containsPoint(m){return!(m.x<this.min.x||m.x>this.max.x||m.y<this.min.y||m.y>this.max.y||m.z<this.min.z||m.z>this.max.z)}containsBox(m){return this.min.x<=m.min.x&&m.max.x<=this.max.x&&this.min.y<=m.min.y&&m.max.y<=this.max.y&&this.min.z<=m.min.z&&m.max.z<=this.max.z}getParameter(m,L){return L.set((m.x-this.min.x)/(this.max.x-this.min.x),(m.y-this.min.y)/(this.max.y-this.min.y),(m.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(m){return!(m.max.x<this.min.x||m.min.x>this.max.x||m.max.y<this.min.y||m.min.y>this.max.y||m.max.z<this.min.z||m.min.z>this.max.z)}intersectsSphere(m){return this.clampPoint(m.center,_vector$b),_vector$b.distanceToSquared(m.center)<=m.radius*m.radius}intersectsPlane(m){let L,j;return m.normal.x>0?(L=m.normal.x*this.min.x,j=m.normal.x*this.max.x):(L=m.normal.x*this.max.x,j=m.normal.x*this.min.x),m.normal.y>0?(L+=m.normal.y*this.min.y,j+=m.normal.y*this.max.y):(L+=m.normal.y*this.max.y,j+=m.normal.y*this.min.y),m.normal.z>0?(L+=m.normal.z*this.min.z,j+=m.normal.z*this.max.z):(L+=m.normal.z*this.max.z,j+=m.normal.z*this.min.z),L<=-m.constant&&j>=-m.constant}intersectsTriangle(m){if(this.isEmpty())return!1;this.getCenter(_center),_extents.subVectors(this.max,_center),_v0$2.subVectors(m.a,_center),_v1$7.subVectors(m.b,_center),_v2$4.subVectors(m.c,_center),_f0.subVectors(_v1$7,_v0$2),_f1.subVectors(_v2$4,_v1$7),_f2.subVectors(_v0$2,_v2$4);let L=[0,-_f0.z,_f0.y,0,-_f1.z,_f1.y,0,-_f2.z,_f2.y,_f0.z,0,-_f0.x,_f1.z,0,-_f1.x,_f2.z,0,-_f2.x,-_f0.y,_f0.x,0,-_f1.y,_f1.x,0,-_f2.y,_f2.x,0];return!satForAxes(L,_v0$2,_v1$7,_v2$4,_extents)||(L=[1,0,0,0,1,0,0,0,1],!satForAxes(L,_v0$2,_v1$7,_v2$4,_extents))?!1:(_triangleNormal.crossVectors(_f0,_f1),L=[_triangleNormal.x,_triangleNormal.y,_triangleNormal.z],satForAxes(L,_v0$2,_v1$7,_v2$4,_extents))}clampPoint(m,L){return L.copy(m).clamp(this.min,this.max)}distanceToPoint(m){return this.clampPoint(m,_vector$b).distanceTo(m)}getBoundingSphere(m){return this.isEmpty()?m.makeEmpty():(this.getCenter(m.center),m.radius=this.getSize(_vector$b).length()*.5),m}intersect(m){return this.min.max(m.min),this.max.min(m.max),this.isEmpty()&&this.makeEmpty(),this}union(m){return this.min.min(m.min),this.max.max(m.max),this}applyMatrix4(m){return this.isEmpty()?this:(_points[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(m),_points[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(m),_points[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(m),_points[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(m),_points[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(m),_points[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(m),_points[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(m),_points[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(m),this.setFromPoints(_points),this)}translate(m){return this.min.add(m),this.max.add(m),this}equals(m){return m.min.equals(this.min)&&m.max.equals(this.max)}}const _points=[new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3],_vector$b=new Vector3,_box$4=new Box3,_v0$2=new Vector3,_v1$7=new Vector3,_v2$4=new Vector3,_f0=new Vector3,_f1=new Vector3,_f2=new Vector3,_center=new Vector3,_extents=new Vector3,_triangleNormal=new Vector3,_testAxis=new Vector3;function satForAxes($,m,L,j,ee){for(let re=0,le=$.length-3;re<=le;re+=3){_testAxis.fromArray($,re);const ve=ee.x*Math.abs(_testAxis.x)+ee.y*Math.abs(_testAxis.y)+ee.z*Math.abs(_testAxis.z),ye=m.dot(_testAxis),Ee=L.dot(_testAxis),Me=j.dot(_testAxis);if(Math.max(-Math.max(ye,Ee,Me),Math.min(ye,Ee,Me))>ve)return!1}return!0}const _box$3=new Box3,_v1$6=new Vector3,_v2$3=new Vector3;class Sphere{constructor(m=new Vector3,L=-1){this.isSphere=!0,this.center=m,this.radius=L}set(m,L){return this.center.copy(m),this.radius=L,this}setFromPoints(m,L){const j=this.center;L!==void 0?j.copy(L):_box$3.setFromPoints(m).getCenter(j);let ee=0;for(let re=0,le=m.length;re<le;re++)ee=Math.max(ee,j.distanceToSquared(m[re]));return this.radius=Math.sqrt(ee),this}copy(m){return this.center.copy(m.center),this.radius=m.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(m){return m.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(m){return m.distanceTo(this.center)-this.radius}intersectsSphere(m){const L=this.radius+m.radius;return m.center.distanceToSquared(this.center)<=L*L}intersectsBox(m){return m.intersectsSphere(this)}intersectsPlane(m){return Math.abs(m.distanceToPoint(this.center))<=this.radius}clampPoint(m,L){const j=this.center.distanceToSquared(m);return L.copy(m),j>this.radius*this.radius&&(L.sub(this.center).normalize(),L.multiplyScalar(this.radius).add(this.center)),L}getBoundingBox(m){return this.isEmpty()?(m.makeEmpty(),m):(m.set(this.center,this.center),m.expandByScalar(this.radius),m)}applyMatrix4(m){return this.center.applyMatrix4(m),this.radius=this.radius*m.getMaxScaleOnAxis(),this}translate(m){return this.center.add(m),this}expandByPoint(m){if(this.isEmpty())return this.center.copy(m),this.radius=0,this;_v1$6.subVectors(m,this.center);const L=_v1$6.lengthSq();if(L>this.radius*this.radius){const j=Math.sqrt(L),ee=(j-this.radius)*.5;this.center.addScaledVector(_v1$6,ee/j),this.radius+=ee}return this}union(m){return m.isEmpty()?this:this.isEmpty()?(this.copy(m),this):(this.center.equals(m.center)===!0?this.radius=Math.max(this.radius,m.radius):(_v2$3.subVectors(m.center,this.center).setLength(m.radius),this.expandByPoint(_v1$6.copy(m.center).add(_v2$3)),this.expandByPoint(_v1$6.copy(m.center).sub(_v2$3))),this)}equals(m){return m.center.equals(this.center)&&m.radius===this.radius}clone(){return new this.constructor().copy(this)}}const _vector$a=new Vector3,_segCenter=new Vector3,_segDir=new Vector3,_diff=new Vector3,_edge1=new Vector3,_edge2=new Vector3,_normal$1=new Vector3;class Ray{constructor(m=new Vector3,L=new Vector3(0,0,-1)){this.origin=m,this.direction=L}set(m,L){return this.origin.copy(m),this.direction.copy(L),this}copy(m){return this.origin.copy(m.origin),this.direction.copy(m.direction),this}at(m,L){return L.copy(this.origin).addScaledVector(this.direction,m)}lookAt(m){return this.direction.copy(m).sub(this.origin).normalize(),this}recast(m){return this.origin.copy(this.at(m,_vector$a)),this}closestPointToPoint(m,L){L.subVectors(m,this.origin);const j=L.dot(this.direction);return j<0?L.copy(this.origin):L.copy(this.origin).addScaledVector(this.direction,j)}distanceToPoint(m){return Math.sqrt(this.distanceSqToPoint(m))}distanceSqToPoint(m){const L=_vector$a.subVectors(m,this.origin).dot(this.direction);return L<0?this.origin.distanceToSquared(m):(_vector$a.copy(this.origin).addScaledVector(this.direction,L),_vector$a.distanceToSquared(m))}distanceSqToSegment(m,L,j,ee){_segCenter.copy(m).add(L).multiplyScalar(.5),_segDir.copy(L).sub(m).normalize(),_diff.copy(this.origin).sub(_segCenter);const re=m.distanceTo(L)*.5,le=-this.direction.dot(_segDir),ve=_diff.dot(this.direction),ye=-_diff.dot(_segDir),Ee=_diff.lengthSq(),Me=Math.abs(1-le*le);let Ce,De,Be,ke;if(Me>0)if(Ce=le*ye-ve,De=le*ve-ye,ke=re*Me,Ce>=0)if(De>=-ke)if(De<=ke){const Fe=1/Me;Ce*=Fe,De*=Fe,Be=Ce*(Ce+le*De+2*ve)+De*(le*Ce+De+2*ye)+Ee}else De=re,Ce=Math.max(0,-(le*De+ve)),Be=-Ce*Ce+De*(De+2*ye)+Ee;else De=-re,Ce=Math.max(0,-(le*De+ve)),Be=-Ce*Ce+De*(De+2*ye)+Ee;else De<=-ke?(Ce=Math.max(0,-(-le*re+ve)),De=Ce>0?-re:Math.min(Math.max(-re,-ye),re),Be=-Ce*Ce+De*(De+2*ye)+Ee):De<=ke?(Ce=0,De=Math.min(Math.max(-re,-ye),re),Be=De*(De+2*ye)+Ee):(Ce=Math.max(0,-(le*re+ve)),De=Ce>0?re:Math.min(Math.max(-re,-ye),re),Be=-Ce*Ce+De*(De+2*ye)+Ee);else De=le>0?-re:re,Ce=Math.max(0,-(le*De+ve)),Be=-Ce*Ce+De*(De+2*ye)+Ee;return j&&j.copy(this.origin).addScaledVector(this.direction,Ce),ee&&ee.copy(_segCenter).addScaledVector(_segDir,De),Be}intersectSphere(m,L){_vector$a.subVectors(m.center,this.origin);const j=_vector$a.dot(this.direction),ee=_vector$a.dot(_vector$a)-j*j,re=m.radius*m.radius;if(ee>re)return null;const le=Math.sqrt(re-ee),ve=j-le,ye=j+le;return ye<0?null:ve<0?this.at(ye,L):this.at(ve,L)}intersectsSphere(m){return this.distanceSqToPoint(m.center)<=m.radius*m.radius}distanceToPlane(m){const L=m.normal.dot(this.direction);if(L===0)return m.distanceToPoint(this.origin)===0?0:null;const j=-(this.origin.dot(m.normal)+m.constant)/L;return j>=0?j:null}intersectPlane(m,L){const j=this.distanceToPlane(m);return j===null?null:this.at(j,L)}intersectsPlane(m){const L=m.distanceToPoint(this.origin);return L===0||m.normal.dot(this.direction)*L<0}intersectBox(m,L){let j,ee,re,le,ve,ye;const Ee=1/this.direction.x,Me=1/this.direction.y,Ce=1/this.direction.z,De=this.origin;return Ee>=0?(j=(m.min.x-De.x)*Ee,ee=(m.max.x-De.x)*Ee):(j=(m.max.x-De.x)*Ee,ee=(m.min.x-De.x)*Ee),Me>=0?(re=(m.min.y-De.y)*Me,le=(m.max.y-De.y)*Me):(re=(m.max.y-De.y)*Me,le=(m.min.y-De.y)*Me),j>le||re>ee||((re>j||isNaN(j))&&(j=re),(le<ee||isNaN(ee))&&(ee=le),Ce>=0?(ve=(m.min.z-De.z)*Ce,ye=(m.max.z-De.z)*Ce):(ve=(m.max.z-De.z)*Ce,ye=(m.min.z-De.z)*Ce),j>ye||ve>ee)||((ve>j||j!==j)&&(j=ve),(ye<ee||ee!==ee)&&(ee=ye),ee<0)?null:this.at(j>=0?j:ee,L)}intersectsBox(m){return this.intersectBox(m,_vector$a)!==null}intersectTriangle(m,L,j,ee,re){_edge1.subVectors(L,m),_edge2.subVectors(j,m),_normal$1.crossVectors(_edge1,_edge2);let le=this.direction.dot(_normal$1),ve;if(le>0){if(ee)return null;ve=1}else if(le<0)ve=-1,le=-le;else return null;_diff.subVectors(this.origin,m);const ye=ve*this.direction.dot(_edge2.crossVectors(_diff,_edge2));if(ye<0)return null;const Ee=ve*this.direction.dot(_edge1.cross(_diff));if(Ee<0||ye+Ee>le)return null;const Me=-ve*_diff.dot(_normal$1);return Me<0?null:this.at(Me/le,re)}applyMatrix4(m){return this.origin.applyMatrix4(m),this.direction.transformDirection(m),this}equals(m){return m.origin.equals(this.origin)&&m.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Matrix4{constructor(m,L,j,ee,re,le,ve,ye,Ee,Me,Ce,De,Be,ke,Fe,Oe){Matrix4.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],m!==void 0&&this.set(m,L,j,ee,re,le,ve,ye,Ee,Me,Ce,De,Be,ke,Fe,Oe)}set(m,L,j,ee,re,le,ve,ye,Ee,Me,Ce,De,Be,ke,Fe,Oe){const Ne=this.elements;return Ne[0]=m,Ne[4]=L,Ne[8]=j,Ne[12]=ee,Ne[1]=re,Ne[5]=le,Ne[9]=ve,Ne[13]=ye,Ne[2]=Ee,Ne[6]=Me,Ne[10]=Ce,Ne[14]=De,Ne[3]=Be,Ne[7]=ke,Ne[11]=Fe,Ne[15]=Oe,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Matrix4().fromArray(this.elements)}copy(m){const L=this.elements,j=m.elements;return L[0]=j[0],L[1]=j[1],L[2]=j[2],L[3]=j[3],L[4]=j[4],L[5]=j[5],L[6]=j[6],L[7]=j[7],L[8]=j[8],L[9]=j[9],L[10]=j[10],L[11]=j[11],L[12]=j[12],L[13]=j[13],L[14]=j[14],L[15]=j[15],this}copyPosition(m){const L=this.elements,j=m.elements;return L[12]=j[12],L[13]=j[13],L[14]=j[14],this}setFromMatrix3(m){const L=m.elements;return this.set(L[0],L[3],L[6],0,L[1],L[4],L[7],0,L[2],L[5],L[8],0,0,0,0,1),this}extractBasis(m,L,j){return m.setFromMatrixColumn(this,0),L.setFromMatrixColumn(this,1),j.setFromMatrixColumn(this,2),this}makeBasis(m,L,j){return this.set(m.x,L.x,j.x,0,m.y,L.y,j.y,0,m.z,L.z,j.z,0,0,0,0,1),this}extractRotation(m){const L=this.elements,j=m.elements,ee=1/_v1$5.setFromMatrixColumn(m,0).length(),re=1/_v1$5.setFromMatrixColumn(m,1).length(),le=1/_v1$5.setFromMatrixColumn(m,2).length();return L[0]=j[0]*ee,L[1]=j[1]*ee,L[2]=j[2]*ee,L[3]=0,L[4]=j[4]*re,L[5]=j[5]*re,L[6]=j[6]*re,L[7]=0,L[8]=j[8]*le,L[9]=j[9]*le,L[10]=j[10]*le,L[11]=0,L[12]=0,L[13]=0,L[14]=0,L[15]=1,this}makeRotationFromEuler(m){const L=this.elements,j=m.x,ee=m.y,re=m.z,le=Math.cos(j),ve=Math.sin(j),ye=Math.cos(ee),Ee=Math.sin(ee),Me=Math.cos(re),Ce=Math.sin(re);if(m.order==="XYZ"){const De=le*Me,Be=le*Ce,ke=ve*Me,Fe=ve*Ce;L[0]=ye*Me,L[4]=-ye*Ce,L[8]=Ee,L[1]=Be+ke*Ee,L[5]=De-Fe*Ee,L[9]=-ve*ye,L[2]=Fe-De*Ee,L[6]=ke+Be*Ee,L[10]=le*ye}else if(m.order==="YXZ"){const De=ye*Me,Be=ye*Ce,ke=Ee*Me,Fe=Ee*Ce;L[0]=De+Fe*ve,L[4]=ke*ve-Be,L[8]=le*Ee,L[1]=le*Ce,L[5]=le*Me,L[9]=-ve,L[2]=Be*ve-ke,L[6]=Fe+De*ve,L[10]=le*ye}else if(m.order==="ZXY"){const De=ye*Me,Be=ye*Ce,ke=Ee*Me,Fe=Ee*Ce;L[0]=De-Fe*ve,L[4]=-le*Ce,L[8]=ke+Be*ve,L[1]=Be+ke*ve,L[5]=le*Me,L[9]=Fe-De*ve,L[2]=-le*Ee,L[6]=ve,L[10]=le*ye}else if(m.order==="ZYX"){const De=le*Me,Be=le*Ce,ke=ve*Me,Fe=ve*Ce;L[0]=ye*Me,L[4]=ke*Ee-Be,L[8]=De*Ee+Fe,L[1]=ye*Ce,L[5]=Fe*Ee+De,L[9]=Be*Ee-ke,L[2]=-Ee,L[6]=ve*ye,L[10]=le*ye}else if(m.order==="YZX"){const De=le*ye,Be=le*Ee,ke=ve*ye,Fe=ve*Ee;L[0]=ye*Me,L[4]=Fe-De*Ce,L[8]=ke*Ce+Be,L[1]=Ce,L[5]=le*Me,L[9]=-ve*Me,L[2]=-Ee*Me,L[6]=Be*Ce+ke,L[10]=De-Fe*Ce}else if(m.order==="XZY"){const De=le*ye,Be=le*Ee,ke=ve*ye,Fe=ve*Ee;L[0]=ye*Me,L[4]=-Ce,L[8]=Ee*Me,L[1]=De*Ce+Fe,L[5]=le*Me,L[9]=Be*Ce-ke,L[2]=ke*Ce-Be,L[6]=ve*Me,L[10]=Fe*Ce+De}return L[3]=0,L[7]=0,L[11]=0,L[12]=0,L[13]=0,L[14]=0,L[15]=1,this}makeRotationFromQuaternion(m){return this.compose(_zero,m,_one)}lookAt(m,L,j){const ee=this.elements;return _z.subVectors(m,L),_z.lengthSq()===0&&(_z.z=1),_z.normalize(),_x.crossVectors(j,_z),_x.lengthSq()===0&&(Math.abs(j.z)===1?_z.x+=1e-4:_z.z+=1e-4,_z.normalize(),_x.crossVectors(j,_z)),_x.normalize(),_y.crossVectors(_z,_x),ee[0]=_x.x,ee[4]=_y.x,ee[8]=_z.x,ee[1]=_x.y,ee[5]=_y.y,ee[9]=_z.y,ee[2]=_x.z,ee[6]=_y.z,ee[10]=_z.z,this}multiply(m){return this.multiplyMatrices(this,m)}premultiply(m){return this.multiplyMatrices(m,this)}multiplyMatrices(m,L){const j=m.elements,ee=L.elements,re=this.elements,le=j[0],ve=j[4],ye=j[8],Ee=j[12],Me=j[1],Ce=j[5],De=j[9],Be=j[13],ke=j[2],Fe=j[6],Oe=j[10],Ne=j[14],ze=j[3],$e=j[7],He=j[11],We=j[15],qe=ee[0],Ye=ee[4],Ze=ee[8],Ke=ee[12],rt=ee[1],ft=ee[5],mt=ee[9],Et=ee[13],bt=ee[2],Ct=ee[6],st=ee[10],at=ee[14],Xe=ee[3],ht=ee[7],Bt=ee[11],Dt=ee[15];return re[0]=le*qe+ve*rt+ye*bt+Ee*Xe,re[4]=le*Ye+ve*ft+ye*Ct+Ee*ht,re[8]=le*Ze+ve*mt+ye*st+Ee*Bt,re[12]=le*Ke+ve*Et+ye*at+Ee*Dt,re[1]=Me*qe+Ce*rt+De*bt+Be*Xe,re[5]=Me*Ye+Ce*ft+De*Ct+Be*ht,re[9]=Me*Ze+Ce*mt+De*st+Be*Bt,re[13]=Me*Ke+Ce*Et+De*at+Be*Dt,re[2]=ke*qe+Fe*rt+Oe*bt+Ne*Xe,re[6]=ke*Ye+Fe*ft+Oe*Ct+Ne*ht,re[10]=ke*Ze+Fe*mt+Oe*st+Ne*Bt,re[14]=ke*Ke+Fe*Et+Oe*at+Ne*Dt,re[3]=ze*qe+$e*rt+He*bt+We*Xe,re[7]=ze*Ye+$e*ft+He*Ct+We*ht,re[11]=ze*Ze+$e*mt+He*st+We*Bt,re[15]=ze*Ke+$e*Et+He*at+We*Dt,this}multiplyScalar(m){const L=this.elements;return L[0]*=m,L[4]*=m,L[8]*=m,L[12]*=m,L[1]*=m,L[5]*=m,L[9]*=m,L[13]*=m,L[2]*=m,L[6]*=m,L[10]*=m,L[14]*=m,L[3]*=m,L[7]*=m,L[11]*=m,L[15]*=m,this}determinant(){const m=this.elements,L=m[0],j=m[4],ee=m[8],re=m[12],le=m[1],ve=m[5],ye=m[9],Ee=m[13],Me=m[2],Ce=m[6],De=m[10],Be=m[14],ke=m[3],Fe=m[7],Oe=m[11],Ne=m[15];return ke*(+re*ye*Ce-ee*Ee*Ce-re*ve*De+j*Ee*De+ee*ve*Be-j*ye*Be)+Fe*(+L*ye*Be-L*Ee*De+re*le*De-ee*le*Be+ee*Ee*Me-re*ye*Me)+Oe*(+L*Ee*Ce-L*ve*Be-re*le*Ce+j*le*Be+re*ve*Me-j*Ee*Me)+Ne*(-ee*ve*Me-L*ye*Ce+L*ve*De+ee*le*Ce-j*le*De+j*ye*Me)}transpose(){const m=this.elements;let L;return L=m[1],m[1]=m[4],m[4]=L,L=m[2],m[2]=m[8],m[8]=L,L=m[6],m[6]=m[9],m[9]=L,L=m[3],m[3]=m[12],m[12]=L,L=m[7],m[7]=m[13],m[13]=L,L=m[11],m[11]=m[14],m[14]=L,this}setPosition(m,L,j){const ee=this.elements;return m.isVector3?(ee[12]=m.x,ee[13]=m.y,ee[14]=m.z):(ee[12]=m,ee[13]=L,ee[14]=j),this}invert(){const m=this.elements,L=m[0],j=m[1],ee=m[2],re=m[3],le=m[4],ve=m[5],ye=m[6],Ee=m[7],Me=m[8],Ce=m[9],De=m[10],Be=m[11],ke=m[12],Fe=m[13],Oe=m[14],Ne=m[15],ze=Ce*Oe*Ee-Fe*De*Ee+Fe*ye*Be-ve*Oe*Be-Ce*ye*Ne+ve*De*Ne,$e=ke*De*Ee-Me*Oe*Ee-ke*ye*Be+le*Oe*Be+Me*ye*Ne-le*De*Ne,He=Me*Fe*Ee-ke*Ce*Ee+ke*ve*Be-le*Fe*Be-Me*ve*Ne+le*Ce*Ne,We=ke*Ce*ye-Me*Fe*ye-ke*ve*De+le*Fe*De+Me*ve*Oe-le*Ce*Oe,qe=L*ze+j*$e+ee*He+re*We;if(qe===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const Ye=1/qe;return m[0]=ze*Ye,m[1]=(Fe*De*re-Ce*Oe*re-Fe*ee*Be+j*Oe*Be+Ce*ee*Ne-j*De*Ne)*Ye,m[2]=(ve*Oe*re-Fe*ye*re+Fe*ee*Ee-j*Oe*Ee-ve*ee*Ne+j*ye*Ne)*Ye,m[3]=(Ce*ye*re-ve*De*re-Ce*ee*Ee+j*De*Ee+ve*ee*Be-j*ye*Be)*Ye,m[4]=$e*Ye,m[5]=(Me*Oe*re-ke*De*re+ke*ee*Be-L*Oe*Be-Me*ee*Ne+L*De*Ne)*Ye,m[6]=(ke*ye*re-le*Oe*re-ke*ee*Ee+L*Oe*Ee+le*ee*Ne-L*ye*Ne)*Ye,m[7]=(le*De*re-Me*ye*re+Me*ee*Ee-L*De*Ee-le*ee*Be+L*ye*Be)*Ye,m[8]=He*Ye,m[9]=(ke*Ce*re-Me*Fe*re-ke*j*Be+L*Fe*Be+Me*j*Ne-L*Ce*Ne)*Ye,m[10]=(le*Fe*re-ke*ve*re+ke*j*Ee-L*Fe*Ee-le*j*Ne+L*ve*Ne)*Ye,m[11]=(Me*ve*re-le*Ce*re-Me*j*Ee+L*Ce*Ee+le*j*Be-L*ve*Be)*Ye,m[12]=We*Ye,m[13]=(Me*Fe*ee-ke*Ce*ee+ke*j*De-L*Fe*De-Me*j*Oe+L*Ce*Oe)*Ye,m[14]=(ke*ve*ee-le*Fe*ee-ke*j*ye+L*Fe*ye+le*j*Oe-L*ve*Oe)*Ye,m[15]=(le*Ce*ee-Me*ve*ee+Me*j*ye-L*Ce*ye-le*j*De+L*ve*De)*Ye,this}scale(m){const L=this.elements,j=m.x,ee=m.y,re=m.z;return L[0]*=j,L[4]*=ee,L[8]*=re,L[1]*=j,L[5]*=ee,L[9]*=re,L[2]*=j,L[6]*=ee,L[10]*=re,L[3]*=j,L[7]*=ee,L[11]*=re,this}getMaxScaleOnAxis(){const m=this.elements,L=m[0]*m[0]+m[1]*m[1]+m[2]*m[2],j=m[4]*m[4]+m[5]*m[5]+m[6]*m[6],ee=m[8]*m[8]+m[9]*m[9]+m[10]*m[10];return Math.sqrt(Math.max(L,j,ee))}makeTranslation(m,L,j){return m.isVector3?this.set(1,0,0,m.x,0,1,0,m.y,0,0,1,m.z,0,0,0,1):this.set(1,0,0,m,0,1,0,L,0,0,1,j,0,0,0,1),this}makeRotationX(m){const L=Math.cos(m),j=Math.sin(m);return this.set(1,0,0,0,0,L,-j,0,0,j,L,0,0,0,0,1),this}makeRotationY(m){const L=Math.cos(m),j=Math.sin(m);return this.set(L,0,j,0,0,1,0,0,-j,0,L,0,0,0,0,1),this}makeRotationZ(m){const L=Math.cos(m),j=Math.sin(m);return this.set(L,-j,0,0,j,L,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(m,L){const j=Math.cos(L),ee=Math.sin(L),re=1-j,le=m.x,ve=m.y,ye=m.z,Ee=re*le,Me=re*ve;return this.set(Ee*le+j,Ee*ve-ee*ye,Ee*ye+ee*ve,0,Ee*ve+ee*ye,Me*ve+j,Me*ye-ee*le,0,Ee*ye-ee*ve,Me*ye+ee*le,re*ye*ye+j,0,0,0,0,1),this}makeScale(m,L,j){return this.set(m,0,0,0,0,L,0,0,0,0,j,0,0,0,0,1),this}makeShear(m,L,j,ee,re,le){return this.set(1,j,re,0,m,1,le,0,L,ee,1,0,0,0,0,1),this}compose(m,L,j){const ee=this.elements,re=L._x,le=L._y,ve=L._z,ye=L._w,Ee=re+re,Me=le+le,Ce=ve+ve,De=re*Ee,Be=re*Me,ke=re*Ce,Fe=le*Me,Oe=le*Ce,Ne=ve*Ce,ze=ye*Ee,$e=ye*Me,He=ye*Ce,We=j.x,qe=j.y,Ye=j.z;return ee[0]=(1-(Fe+Ne))*We,ee[1]=(Be+He)*We,ee[2]=(ke-$e)*We,ee[3]=0,ee[4]=(Be-He)*qe,ee[5]=(1-(De+Ne))*qe,ee[6]=(Oe+ze)*qe,ee[7]=0,ee[8]=(ke+$e)*Ye,ee[9]=(Oe-ze)*Ye,ee[10]=(1-(De+Fe))*Ye,ee[11]=0,ee[12]=m.x,ee[13]=m.y,ee[14]=m.z,ee[15]=1,this}decompose(m,L,j){const ee=this.elements;let re=_v1$5.set(ee[0],ee[1],ee[2]).length();const le=_v1$5.set(ee[4],ee[5],ee[6]).length(),ve=_v1$5.set(ee[8],ee[9],ee[10]).length();this.determinant()<0&&(re=-re),m.x=ee[12],m.y=ee[13],m.z=ee[14],_m1$4.copy(this);const Ee=1/re,Me=1/le,Ce=1/ve;return _m1$4.elements[0]*=Ee,_m1$4.elements[1]*=Ee,_m1$4.elements[2]*=Ee,_m1$4.elements[4]*=Me,_m1$4.elements[5]*=Me,_m1$4.elements[6]*=Me,_m1$4.elements[8]*=Ce,_m1$4.elements[9]*=Ce,_m1$4.elements[10]*=Ce,L.setFromRotationMatrix(_m1$4),j.x=re,j.y=le,j.z=ve,this}makePerspective(m,L,j,ee,re,le,ve=WebGLCoordinateSystem){const ye=this.elements,Ee=2*re/(L-m),Me=2*re/(j-ee),Ce=(L+m)/(L-m),De=(j+ee)/(j-ee);let Be,ke;if(ve===WebGLCoordinateSystem)Be=-(le+re)/(le-re),ke=-2*le*re/(le-re);else if(ve===WebGPUCoordinateSystem)Be=-le/(le-re),ke=-le*re/(le-re);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+ve);return ye[0]=Ee,ye[4]=0,ye[8]=Ce,ye[12]=0,ye[1]=0,ye[5]=Me,ye[9]=De,ye[13]=0,ye[2]=0,ye[6]=0,ye[10]=Be,ye[14]=ke,ye[3]=0,ye[7]=0,ye[11]=-1,ye[15]=0,this}makeOrthographic(m,L,j,ee,re,le,ve=WebGLCoordinateSystem){const ye=this.elements,Ee=1/(L-m),Me=1/(j-ee),Ce=1/(le-re),De=(L+m)*Ee,Be=(j+ee)*Me;let ke,Fe;if(ve===WebGLCoordinateSystem)ke=(le+re)*Ce,Fe=-2*Ce;else if(ve===WebGPUCoordinateSystem)ke=re*Ce,Fe=-1*Ce;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+ve);return ye[0]=2*Ee,ye[4]=0,ye[8]=0,ye[12]=-De,ye[1]=0,ye[5]=2*Me,ye[9]=0,ye[13]=-Be,ye[2]=0,ye[6]=0,ye[10]=Fe,ye[14]=-ke,ye[3]=0,ye[7]=0,ye[11]=0,ye[15]=1,this}equals(m){const L=this.elements,j=m.elements;for(let ee=0;ee<16;ee++)if(L[ee]!==j[ee])return!1;return!0}fromArray(m,L=0){for(let j=0;j<16;j++)this.elements[j]=m[j+L];return this}toArray(m=[],L=0){const j=this.elements;return m[L]=j[0],m[L+1]=j[1],m[L+2]=j[2],m[L+3]=j[3],m[L+4]=j[4],m[L+5]=j[5],m[L+6]=j[6],m[L+7]=j[7],m[L+8]=j[8],m[L+9]=j[9],m[L+10]=j[10],m[L+11]=j[11],m[L+12]=j[12],m[L+13]=j[13],m[L+14]=j[14],m[L+15]=j[15],m}}const _v1$5=new Vector3,_m1$4=new Matrix4,_zero=new Vector3(0,0,0),_one=new Vector3(1,1,1),_x=new Vector3,_y=new Vector3,_z=new Vector3,_matrix$2=new Matrix4,_quaternion$3=new Quaternion;class Euler{constructor(m=0,L=0,j=0,ee=Euler.DEFAULT_ORDER){this.isEuler=!0,this._x=m,this._y=L,this._z=j,this._order=ee}get x(){return this._x}set x(m){this._x=m,this._onChangeCallback()}get y(){return this._y}set y(m){this._y=m,this._onChangeCallback()}get z(){return this._z}set z(m){this._z=m,this._onChangeCallback()}get order(){return this._order}set order(m){this._order=m,this._onChangeCallback()}set(m,L,j,ee=this._order){return this._x=m,this._y=L,this._z=j,this._order=ee,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(m){return this._x=m._x,this._y=m._y,this._z=m._z,this._order=m._order,this._onChangeCallback(),this}setFromRotationMatrix(m,L=this._order,j=!0){const ee=m.elements,re=ee[0],le=ee[4],ve=ee[8],ye=ee[1],Ee=ee[5],Me=ee[9],Ce=ee[2],De=ee[6],Be=ee[10];switch(L){case"XYZ":this._y=Math.asin(clamp$1(ve,-1,1)),Math.abs(ve)<.9999999?(this._x=Math.atan2(-Me,Be),this._z=Math.atan2(-le,re)):(this._x=Math.atan2(De,Ee),this._z=0);break;case"YXZ":this._x=Math.asin(-clamp$1(Me,-1,1)),Math.abs(Me)<.9999999?(this._y=Math.atan2(ve,Be),this._z=Math.atan2(ye,Ee)):(this._y=Math.atan2(-Ce,re),this._z=0);break;case"ZXY":this._x=Math.asin(clamp$1(De,-1,1)),Math.abs(De)<.9999999?(this._y=Math.atan2(-Ce,Be),this._z=Math.atan2(-le,Ee)):(this._y=0,this._z=Math.atan2(ye,re));break;case"ZYX":this._y=Math.asin(-clamp$1(Ce,-1,1)),Math.abs(Ce)<.9999999?(this._x=Math.atan2(De,Be),this._z=Math.atan2(ye,re)):(this._x=0,this._z=Math.atan2(-le,Ee));break;case"YZX":this._z=Math.asin(clamp$1(ye,-1,1)),Math.abs(ye)<.9999999?(this._x=Math.atan2(-Me,Ee),this._y=Math.atan2(-Ce,re)):(this._x=0,this._y=Math.atan2(ve,Be));break;case"XZY":this._z=Math.asin(-clamp$1(le,-1,1)),Math.abs(le)<.9999999?(this._x=Math.atan2(De,Ee),this._y=Math.atan2(ve,re)):(this._x=Math.atan2(-Me,Be),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+L)}return this._order=L,j===!0&&this._onChangeCallback(),this}setFromQuaternion(m,L,j){return _matrix$2.makeRotationFromQuaternion(m),this.setFromRotationMatrix(_matrix$2,L,j)}setFromVector3(m,L=this._order){return this.set(m.x,m.y,m.z,L)}reorder(m){return _quaternion$3.setFromEuler(this),this.setFromQuaternion(_quaternion$3,m)}equals(m){return m._x===this._x&&m._y===this._y&&m._z===this._z&&m._order===this._order}fromArray(m){return this._x=m[0],this._y=m[1],this._z=m[2],m[3]!==void 0&&(this._order=m[3]),this._onChangeCallback(),this}toArray(m=[],L=0){return m[L]=this._x,m[L+1]=this._y,m[L+2]=this._z,m[L+3]=this._order,m}_onChange(m){return this._onChangeCallback=m,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Euler.DEFAULT_ORDER="XYZ";class Layers{constructor(){this.mask=1}set(m){this.mask=(1<<m|0)>>>0}enable(m){this.mask|=1<<m|0}enableAll(){this.mask=-1}toggle(m){this.mask^=1<<m|0}disable(m){this.mask&=~(1<<m|0)}disableAll(){this.mask=0}test(m){return(this.mask&m.mask)!==0}isEnabled(m){return(this.mask&(1<<m|0))!==0}}let _object3DId=0;const _v1$4=new Vector3,_q1=new Quaternion,_m1$3=new Matrix4,_target=new Vector3,_position$3=new Vector3,_scale$2=new Vector3,_quaternion$2=new Quaternion,_xAxis=new Vector3(1,0,0),_yAxis=new Vector3(0,1,0),_zAxis=new Vector3(0,0,1),_addedEvent={type:"added"},_removedEvent={type:"removed"},_childaddedEvent={type:"childadded",child:null},_childremovedEvent={type:"childremoved",child:null};class Object3D extends EventDispatcher$2{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:_object3DId++}),this.uuid=generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Object3D.DEFAULT_UP.clone();const m=new Vector3,L=new Euler,j=new Quaternion,ee=new Vector3(1,1,1);function re(){j.setFromEuler(L,!1)}function le(){L.setFromQuaternion(j,void 0,!1)}L._onChange(re),j._onChange(le),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:m},rotation:{configurable:!0,enumerable:!0,value:L},quaternion:{configurable:!0,enumerable:!0,value:j},scale:{configurable:!0,enumerable:!0,value:ee},modelViewMatrix:{value:new Matrix4},normalMatrix:{value:new Matrix3}}),this.matrix=new Matrix4,this.matrixWorld=new Matrix4,this.matrixAutoUpdate=Object3D.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(m){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(m),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(m){return this.quaternion.premultiply(m),this}setRotationFromAxisAngle(m,L){this.quaternion.setFromAxisAngle(m,L)}setRotationFromEuler(m){this.quaternion.setFromEuler(m,!0)}setRotationFromMatrix(m){this.quaternion.setFromRotationMatrix(m)}setRotationFromQuaternion(m){this.quaternion.copy(m)}rotateOnAxis(m,L){return _q1.setFromAxisAngle(m,L),this.quaternion.multiply(_q1),this}rotateOnWorldAxis(m,L){return _q1.setFromAxisAngle(m,L),this.quaternion.premultiply(_q1),this}rotateX(m){return this.rotateOnAxis(_xAxis,m)}rotateY(m){return this.rotateOnAxis(_yAxis,m)}rotateZ(m){return this.rotateOnAxis(_zAxis,m)}translateOnAxis(m,L){return _v1$4.copy(m).applyQuaternion(this.quaternion),this.position.add(_v1$4.multiplyScalar(L)),this}translateX(m){return this.translateOnAxis(_xAxis,m)}translateY(m){return this.translateOnAxis(_yAxis,m)}translateZ(m){return this.translateOnAxis(_zAxis,m)}localToWorld(m){return this.updateWorldMatrix(!0,!1),m.applyMatrix4(this.matrixWorld)}worldToLocal(m){return this.updateWorldMatrix(!0,!1),m.applyMatrix4(_m1$3.copy(this.matrixWorld).invert())}lookAt(m,L,j){m.isVector3?_target.copy(m):_target.set(m,L,j);const ee=this.parent;this.updateWorldMatrix(!0,!1),_position$3.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_m1$3.lookAt(_position$3,_target,this.up):_m1$3.lookAt(_target,_position$3,this.up),this.quaternion.setFromRotationMatrix(_m1$3),ee&&(_m1$3.extractRotation(ee.matrixWorld),_q1.setFromRotationMatrix(_m1$3),this.quaternion.premultiply(_q1.invert()))}add(m){if(arguments.length>1){for(let L=0;L<arguments.length;L++)this.add(arguments[L]);return this}return m===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",m),this):(m&&m.isObject3D?(m.removeFromParent(),m.parent=this,this.children.push(m),m.dispatchEvent(_addedEvent),_childaddedEvent.child=m,this.dispatchEvent(_childaddedEvent),_childaddedEvent.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",m),this)}remove(m){if(arguments.length>1){for(let j=0;j<arguments.length;j++)this.remove(arguments[j]);return this}const L=this.children.indexOf(m);return L!==-1&&(m.parent=null,this.children.splice(L,1),m.dispatchEvent(_removedEvent),_childremovedEvent.child=m,this.dispatchEvent(_childremovedEvent),_childremovedEvent.child=null),this}removeFromParent(){const m=this.parent;return m!==null&&m.remove(this),this}clear(){return this.remove(...this.children)}attach(m){return this.updateWorldMatrix(!0,!1),_m1$3.copy(this.matrixWorld).invert(),m.parent!==null&&(m.parent.updateWorldMatrix(!0,!1),_m1$3.multiply(m.parent.matrixWorld)),m.applyMatrix4(_m1$3),m.removeFromParent(),m.parent=this,this.children.push(m),m.updateWorldMatrix(!1,!0),m.dispatchEvent(_addedEvent),_childaddedEvent.child=m,this.dispatchEvent(_childaddedEvent),_childaddedEvent.child=null,this}getObjectById(m){return this.getObjectByProperty("id",m)}getObjectByName(m){return this.getObjectByProperty("name",m)}getObjectByProperty(m,L){if(this[m]===L)return this;for(let j=0,ee=this.children.length;j<ee;j++){const le=this.children[j].getObjectByProperty(m,L);if(le!==void 0)return le}}getObjectsByProperty(m,L,j=[]){this[m]===L&&j.push(this);const ee=this.children;for(let re=0,le=ee.length;re<le;re++)ee[re].getObjectsByProperty(m,L,j);return j}getWorldPosition(m){return this.updateWorldMatrix(!0,!1),m.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(m){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,m,_scale$2),m}getWorldScale(m){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,_quaternion$2,m),m}getWorldDirection(m){this.updateWorldMatrix(!0,!1);const L=this.matrixWorld.elements;return m.set(L[8],L[9],L[10]).normalize()}raycast(){}traverse(m){m(this);const L=this.children;for(let j=0,ee=L.length;j<ee;j++)L[j].traverse(m)}traverseVisible(m){if(this.visible===!1)return;m(this);const L=this.children;for(let j=0,ee=L.length;j<ee;j++)L[j].traverseVisible(m)}traverseAncestors(m){const L=this.parent;L!==null&&(m(L),L.traverseAncestors(m))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(m){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||m)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,m=!0);const L=this.children;for(let j=0,ee=L.length;j<ee;j++){const re=L[j];(re.matrixWorldAutoUpdate===!0||m===!0)&&re.updateMatrixWorld(m)}}updateWorldMatrix(m,L){const j=this.parent;if(m===!0&&j!==null&&j.matrixWorldAutoUpdate===!0&&j.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),L===!0){const ee=this.children;for(let re=0,le=ee.length;re<le;re++){const ve=ee[re];ve.matrixWorldAutoUpdate===!0&&ve.updateWorldMatrix(!1,!0)}}}toJSON(m){const L=m===void 0||typeof m=="string",j={};L&&(m={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},j.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const ee={};ee.uuid=this.uuid,ee.type=this.type,this.name!==""&&(ee.name=this.name),this.castShadow===!0&&(ee.castShadow=!0),this.receiveShadow===!0&&(ee.receiveShadow=!0),this.visible===!1&&(ee.visible=!1),this.frustumCulled===!1&&(ee.frustumCulled=!1),this.renderOrder!==0&&(ee.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(ee.userData=this.userData),ee.layers=this.layers.mask,ee.matrix=this.matrix.toArray(),ee.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(ee.matrixAutoUpdate=!1),this.isInstancedMesh&&(ee.type="InstancedMesh",ee.count=this.count,ee.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(ee.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(ee.type="BatchedMesh",ee.perObjectFrustumCulled=this.perObjectFrustumCulled,ee.sortObjects=this.sortObjects,ee.drawRanges=this._drawRanges,ee.reservedRanges=this._reservedRanges,ee.visibility=this._visibility,ee.active=this._active,ee.bounds=this._bounds.map(ve=>({boxInitialized:ve.boxInitialized,boxMin:ve.box.min.toArray(),boxMax:ve.box.max.toArray(),sphereInitialized:ve.sphereInitialized,sphereRadius:ve.sphere.radius,sphereCenter:ve.sphere.center.toArray()})),ee.maxGeometryCount=this._maxGeometryCount,ee.maxVertexCount=this._maxVertexCount,ee.maxIndexCount=this._maxIndexCount,ee.geometryInitialized=this._geometryInitialized,ee.geometryCount=this._geometryCount,ee.matricesTexture=this._matricesTexture.toJSON(m),this._colorsTexture!==null&&(ee.colorsTexture=this._colorsTexture.toJSON(m)),this.boundingSphere!==null&&(ee.boundingSphere={center:ee.boundingSphere.center.toArray(),radius:ee.boundingSphere.radius}),this.boundingBox!==null&&(ee.boundingBox={min:ee.boundingBox.min.toArray(),max:ee.boundingBox.max.toArray()}));function re(ve,ye){return ve[ye.uuid]===void 0&&(ve[ye.uuid]=ye.toJSON(m)),ye.uuid}if(this.isScene)this.background&&(this.background.isColor?ee.background=this.background.toJSON():this.background.isTexture&&(ee.background=this.background.toJSON(m).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(ee.environment=this.environment.toJSON(m).uuid);else if(this.isMesh||this.isLine||this.isPoints){ee.geometry=re(m.geometries,this.geometry);const ve=this.geometry.parameters;if(ve!==void 0&&ve.shapes!==void 0){const ye=ve.shapes;if(Array.isArray(ye))for(let Ee=0,Me=ye.length;Ee<Me;Ee++){const Ce=ye[Ee];re(m.shapes,Ce)}else re(m.shapes,ye)}}if(this.isSkinnedMesh&&(ee.bindMode=this.bindMode,ee.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(re(m.skeletons,this.skeleton),ee.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const ve=[];for(let ye=0,Ee=this.material.length;ye<Ee;ye++)ve.push(re(m.materials,this.material[ye]));ee.material=ve}else ee.material=re(m.materials,this.material);if(this.children.length>0){ee.children=[];for(let ve=0;ve<this.children.length;ve++)ee.children.push(this.children[ve].toJSON(m).object)}if(this.animations.length>0){ee.animations=[];for(let ve=0;ve<this.animations.length;ve++){const ye=this.animations[ve];ee.animations.push(re(m.animations,ye))}}if(L){const ve=le(m.geometries),ye=le(m.materials),Ee=le(m.textures),Me=le(m.images),Ce=le(m.shapes),De=le(m.skeletons),Be=le(m.animations),ke=le(m.nodes);ve.length>0&&(j.geometries=ve),ye.length>0&&(j.materials=ye),Ee.length>0&&(j.textures=Ee),Me.length>0&&(j.images=Me),Ce.length>0&&(j.shapes=Ce),De.length>0&&(j.skeletons=De),Be.length>0&&(j.animations=Be),ke.length>0&&(j.nodes=ke)}return j.object=ee,j;function le(ve){const ye=[];for(const Ee in ve){const Me=ve[Ee];delete Me.metadata,ye.push(Me)}return ye}}clone(m){return new this.constructor().copy(this,m)}copy(m,L=!0){if(this.name=m.name,this.up.copy(m.up),this.position.copy(m.position),this.rotation.order=m.rotation.order,this.quaternion.copy(m.quaternion),this.scale.copy(m.scale),this.matrix.copy(m.matrix),this.matrixWorld.copy(m.matrixWorld),this.matrixAutoUpdate=m.matrixAutoUpdate,this.matrixWorldAutoUpdate=m.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=m.matrixWorldNeedsUpdate,this.layers.mask=m.layers.mask,this.visible=m.visible,this.castShadow=m.castShadow,this.receiveShadow=m.receiveShadow,this.frustumCulled=m.frustumCulled,this.renderOrder=m.renderOrder,this.animations=m.animations.slice(),this.userData=JSON.parse(JSON.stringify(m.userData)),L===!0)for(let j=0;j<m.children.length;j++){const ee=m.children[j];this.add(ee.clone())}return this}}Object3D.DEFAULT_UP=new Vector3(0,1,0);Object3D.DEFAULT_MATRIX_AUTO_UPDATE=!0;Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const _v0$1=new Vector3,_v1$3=new Vector3,_v2$2=new Vector3,_v3$2=new Vector3,_vab=new Vector3,_vac=new Vector3,_vbc=new Vector3,_vap=new Vector3,_vbp=new Vector3,_vcp=new Vector3;let Triangle$1=class ps{constructor(m=new Vector3,L=new Vector3,j=new Vector3){this.a=m,this.b=L,this.c=j}static getNormal(m,L,j,ee){ee.subVectors(j,L),_v0$1.subVectors(m,L),ee.cross(_v0$1);const re=ee.lengthSq();return re>0?ee.multiplyScalar(1/Math.sqrt(re)):ee.set(0,0,0)}static getBarycoord(m,L,j,ee,re){_v0$1.subVectors(ee,L),_v1$3.subVectors(j,L),_v2$2.subVectors(m,L);const le=_v0$1.dot(_v0$1),ve=_v0$1.dot(_v1$3),ye=_v0$1.dot(_v2$2),Ee=_v1$3.dot(_v1$3),Me=_v1$3.dot(_v2$2),Ce=le*Ee-ve*ve;if(Ce===0)return re.set(0,0,0),null;const De=1/Ce,Be=(Ee*ye-ve*Me)*De,ke=(le*Me-ve*ye)*De;return re.set(1-Be-ke,ke,Be)}static containsPoint(m,L,j,ee){return this.getBarycoord(m,L,j,ee,_v3$2)===null?!1:_v3$2.x>=0&&_v3$2.y>=0&&_v3$2.x+_v3$2.y<=1}static getInterpolation(m,L,j,ee,re,le,ve,ye){return this.getBarycoord(m,L,j,ee,_v3$2)===null?(ye.x=0,ye.y=0,"z"in ye&&(ye.z=0),"w"in ye&&(ye.w=0),null):(ye.setScalar(0),ye.addScaledVector(re,_v3$2.x),ye.addScaledVector(le,_v3$2.y),ye.addScaledVector(ve,_v3$2.z),ye)}static isFrontFacing(m,L,j,ee){return _v0$1.subVectors(j,L),_v1$3.subVectors(m,L),_v0$1.cross(_v1$3).dot(ee)<0}set(m,L,j){return this.a.copy(m),this.b.copy(L),this.c.copy(j),this}setFromPointsAndIndices(m,L,j,ee){return this.a.copy(m[L]),this.b.copy(m[j]),this.c.copy(m[ee]),this}setFromAttributeAndIndices(m,L,j,ee){return this.a.fromBufferAttribute(m,L),this.b.fromBufferAttribute(m,j),this.c.fromBufferAttribute(m,ee),this}clone(){return new this.constructor().copy(this)}copy(m){return this.a.copy(m.a),this.b.copy(m.b),this.c.copy(m.c),this}getArea(){return _v0$1.subVectors(this.c,this.b),_v1$3.subVectors(this.a,this.b),_v0$1.cross(_v1$3).length()*.5}getMidpoint(m){return m.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(m){return ps.getNormal(this.a,this.b,this.c,m)}getPlane(m){return m.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(m,L){return ps.getBarycoord(m,this.a,this.b,this.c,L)}getInterpolation(m,L,j,ee,re){return ps.getInterpolation(m,this.a,this.b,this.c,L,j,ee,re)}containsPoint(m){return ps.containsPoint(m,this.a,this.b,this.c)}isFrontFacing(m){return ps.isFrontFacing(this.a,this.b,this.c,m)}intersectsBox(m){return m.intersectsTriangle(this)}closestPointToPoint(m,L){const j=this.a,ee=this.b,re=this.c;let le,ve;_vab.subVectors(ee,j),_vac.subVectors(re,j),_vap.subVectors(m,j);const ye=_vab.dot(_vap),Ee=_vac.dot(_vap);if(ye<=0&&Ee<=0)return L.copy(j);_vbp.subVectors(m,ee);const Me=_vab.dot(_vbp),Ce=_vac.dot(_vbp);if(Me>=0&&Ce<=Me)return L.copy(ee);const De=ye*Ce-Me*Ee;if(De<=0&&ye>=0&&Me<=0)return le=ye/(ye-Me),L.copy(j).addScaledVector(_vab,le);_vcp.subVectors(m,re);const Be=_vab.dot(_vcp),ke=_vac.dot(_vcp);if(ke>=0&&Be<=ke)return L.copy(re);const Fe=Be*Ee-ye*ke;if(Fe<=0&&Ee>=0&&ke<=0)return ve=Ee/(Ee-ke),L.copy(j).addScaledVector(_vac,ve);const Oe=Me*ke-Be*Ce;if(Oe<=0&&Ce-Me>=0&&Be-ke>=0)return _vbc.subVectors(re,ee),ve=(Ce-Me)/(Ce-Me+(Be-ke)),L.copy(ee).addScaledVector(_vbc,ve);const Ne=1/(Oe+Fe+De);return le=Fe*Ne,ve=De*Ne,L.copy(j).addScaledVector(_vab,le).addScaledVector(_vac,ve)}equals(m){return m.a.equals(this.a)&&m.b.equals(this.b)&&m.c.equals(this.c)}};const _colorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_hslA={h:0,s:0,l:0},_hslB={h:0,s:0,l:0};function hue2rgb($,m,L){return L<0&&(L+=1),L>1&&(L-=1),L<1/6?$+(m-$)*6*L:L<1/2?m:L<2/3?$+(m-$)*6*(2/3-L):$}class Color{constructor(m,L,j){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(m,L,j)}set(m,L,j){if(L===void 0&&j===void 0){const ee=m;ee&&ee.isColor?this.copy(ee):typeof ee=="number"?this.setHex(ee):typeof ee=="string"&&this.setStyle(ee)}else this.setRGB(m,L,j);return this}setScalar(m){return this.r=m,this.g=m,this.b=m,this}setHex(m,L=SRGBColorSpace){return m=Math.floor(m),this.r=(m>>16&255)/255,this.g=(m>>8&255)/255,this.b=(m&255)/255,ColorManagement.toWorkingColorSpace(this,L),this}setRGB(m,L,j,ee=ColorManagement.workingColorSpace){return this.r=m,this.g=L,this.b=j,ColorManagement.toWorkingColorSpace(this,ee),this}setHSL(m,L,j,ee=ColorManagement.workingColorSpace){if(m=euclideanModulo(m,1),L=clamp$1(L,0,1),j=clamp$1(j,0,1),L===0)this.r=this.g=this.b=j;else{const re=j<=.5?j*(1+L):j+L-j*L,le=2*j-re;this.r=hue2rgb(le,re,m+1/3),this.g=hue2rgb(le,re,m),this.b=hue2rgb(le,re,m-1/3)}return ColorManagement.toWorkingColorSpace(this,ee),this}setStyle(m,L=SRGBColorSpace){function j(re){re!==void 0&&parseFloat(re)<1&&console.warn("THREE.Color: Alpha component of "+m+" will be ignored.")}let ee;if(ee=/^(\w+)\(([^\)]*)\)/.exec(m)){let re;const le=ee[1],ve=ee[2];switch(le){case"rgb":case"rgba":if(re=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(ve))return j(re[4]),this.setRGB(Math.min(255,parseInt(re[1],10))/255,Math.min(255,parseInt(re[2],10))/255,Math.min(255,parseInt(re[3],10))/255,L);if(re=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(ve))return j(re[4]),this.setRGB(Math.min(100,parseInt(re[1],10))/100,Math.min(100,parseInt(re[2],10))/100,Math.min(100,parseInt(re[3],10))/100,L);break;case"hsl":case"hsla":if(re=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(ve))return j(re[4]),this.setHSL(parseFloat(re[1])/360,parseFloat(re[2])/100,parseFloat(re[3])/100,L);break;default:console.warn("THREE.Color: Unknown color model "+m)}}else if(ee=/^\#([A-Fa-f\d]+)$/.exec(m)){const re=ee[1],le=re.length;if(le===3)return this.setRGB(parseInt(re.charAt(0),16)/15,parseInt(re.charAt(1),16)/15,parseInt(re.charAt(2),16)/15,L);if(le===6)return this.setHex(parseInt(re,16),L);console.warn("THREE.Color: Invalid hex color "+m)}else if(m&&m.length>0)return this.setColorName(m,L);return this}setColorName(m,L=SRGBColorSpace){const j=_colorKeywords[m.toLowerCase()];return j!==void 0?this.setHex(j,L):console.warn("THREE.Color: Unknown color "+m),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(m){return this.r=m.r,this.g=m.g,this.b=m.b,this}copySRGBToLinear(m){return this.r=SRGBToLinear(m.r),this.g=SRGBToLinear(m.g),this.b=SRGBToLinear(m.b),this}copyLinearToSRGB(m){return this.r=LinearToSRGB(m.r),this.g=LinearToSRGB(m.g),this.b=LinearToSRGB(m.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(m=SRGBColorSpace){return ColorManagement.fromWorkingColorSpace(_color$1.copy(this),m),Math.round(clamp$1(_color$1.r*255,0,255))*65536+Math.round(clamp$1(_color$1.g*255,0,255))*256+Math.round(clamp$1(_color$1.b*255,0,255))}getHexString(m=SRGBColorSpace){return("000000"+this.getHex(m).toString(16)).slice(-6)}getHSL(m,L=ColorManagement.workingColorSpace){ColorManagement.fromWorkingColorSpace(_color$1.copy(this),L);const j=_color$1.r,ee=_color$1.g,re=_color$1.b,le=Math.max(j,ee,re),ve=Math.min(j,ee,re);let ye,Ee;const Me=(ve+le)/2;if(ve===le)ye=0,Ee=0;else{const Ce=le-ve;switch(Ee=Me<=.5?Ce/(le+ve):Ce/(2-le-ve),le){case j:ye=(ee-re)/Ce+(ee<re?6:0);break;case ee:ye=(re-j)/Ce+2;break;case re:ye=(j-ee)/Ce+4;break}ye/=6}return m.h=ye,m.s=Ee,m.l=Me,m}getRGB(m,L=ColorManagement.workingColorSpace){return ColorManagement.fromWorkingColorSpace(_color$1.copy(this),L),m.r=_color$1.r,m.g=_color$1.g,m.b=_color$1.b,m}getStyle(m=SRGBColorSpace){ColorManagement.fromWorkingColorSpace(_color$1.copy(this),m);const L=_color$1.r,j=_color$1.g,ee=_color$1.b;return m!==SRGBColorSpace?`color(${m} ${L.toFixed(3)} ${j.toFixed(3)} ${ee.toFixed(3)})`:`rgb(${Math.round(L*255)},${Math.round(j*255)},${Math.round(ee*255)})`}offsetHSL(m,L,j){return this.getHSL(_hslA),this.setHSL(_hslA.h+m,_hslA.s+L,_hslA.l+j)}add(m){return this.r+=m.r,this.g+=m.g,this.b+=m.b,this}addColors(m,L){return this.r=m.r+L.r,this.g=m.g+L.g,this.b=m.b+L.b,this}addScalar(m){return this.r+=m,this.g+=m,this.b+=m,this}sub(m){return this.r=Math.max(0,this.r-m.r),this.g=Math.max(0,this.g-m.g),this.b=Math.max(0,this.b-m.b),this}multiply(m){return this.r*=m.r,this.g*=m.g,this.b*=m.b,this}multiplyScalar(m){return this.r*=m,this.g*=m,this.b*=m,this}lerp(m,L){return this.r+=(m.r-this.r)*L,this.g+=(m.g-this.g)*L,this.b+=(m.b-this.b)*L,this}lerpColors(m,L,j){return this.r=m.r+(L.r-m.r)*j,this.g=m.g+(L.g-m.g)*j,this.b=m.b+(L.b-m.b)*j,this}lerpHSL(m,L){this.getHSL(_hslA),m.getHSL(_hslB);const j=lerp$1(_hslA.h,_hslB.h,L),ee=lerp$1(_hslA.s,_hslB.s,L),re=lerp$1(_hslA.l,_hslB.l,L);return this.setHSL(j,ee,re),this}setFromVector3(m){return this.r=m.x,this.g=m.y,this.b=m.z,this}applyMatrix3(m){const L=this.r,j=this.g,ee=this.b,re=m.elements;return this.r=re[0]*L+re[3]*j+re[6]*ee,this.g=re[1]*L+re[4]*j+re[7]*ee,this.b=re[2]*L+re[5]*j+re[8]*ee,this}equals(m){return m.r===this.r&&m.g===this.g&&m.b===this.b}fromArray(m,L=0){return this.r=m[L],this.g=m[L+1],this.b=m[L+2],this}toArray(m=[],L=0){return m[L]=this.r,m[L+1]=this.g,m[L+2]=this.b,m}fromBufferAttribute(m,L){return this.r=m.getX(L),this.g=m.getY(L),this.b=m.getZ(L),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const _color$1=new Color;Color.NAMES=_colorKeywords;let _materialId=0;class Material extends EventDispatcher$2{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:_materialId++}),this.uuid=generateUUID(),this.name="",this.type="Material",this.blending=NormalBlending,this.side=FrontSide,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=SrcAlphaFactor,this.blendDst=OneMinusSrcAlphaFactor,this.blendEquation=AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Color(0,0,0),this.blendAlpha=0,this.depthFunc=LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=AlwaysStencilFunc,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=KeepStencilOp,this.stencilZFail=KeepStencilOp,this.stencilZPass=KeepStencilOp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(m){this._alphaTest>0!=m>0&&this.version++,this._alphaTest=m}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(m){if(m!==void 0)for(const L in m){const j=m[L];if(j===void 0){console.warn(`THREE.Material: parameter '${L}' has value of undefined.`);continue}const ee=this[L];if(ee===void 0){console.warn(`THREE.Material: '${L}' is not a property of THREE.${this.type}.`);continue}ee&&ee.isColor?ee.set(j):ee&&ee.isVector3&&j&&j.isVector3?ee.copy(j):this[L]=j}}toJSON(m){const L=m===void 0||typeof m=="string";L&&(m={textures:{},images:{}});const j={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};j.uuid=this.uuid,j.type=this.type,this.name!==""&&(j.name=this.name),this.color&&this.color.isColor&&(j.color=this.color.getHex()),this.roughness!==void 0&&(j.roughness=this.roughness),this.metalness!==void 0&&(j.metalness=this.metalness),this.sheen!==void 0&&(j.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(j.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(j.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(j.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(j.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(j.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(j.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(j.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(j.shininess=this.shininess),this.clearcoat!==void 0&&(j.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(j.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(j.clearcoatMap=this.clearcoatMap.toJSON(m).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(j.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(m).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(j.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(m).uuid,j.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(j.dispersion=this.dispersion),this.iridescence!==void 0&&(j.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(j.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(j.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(j.iridescenceMap=this.iridescenceMap.toJSON(m).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(j.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(m).uuid),this.anisotropy!==void 0&&(j.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(j.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(j.anisotropyMap=this.anisotropyMap.toJSON(m).uuid),this.map&&this.map.isTexture&&(j.map=this.map.toJSON(m).uuid),this.matcap&&this.matcap.isTexture&&(j.matcap=this.matcap.toJSON(m).uuid),this.alphaMap&&this.alphaMap.isTexture&&(j.alphaMap=this.alphaMap.toJSON(m).uuid),this.lightMap&&this.lightMap.isTexture&&(j.lightMap=this.lightMap.toJSON(m).uuid,j.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(j.aoMap=this.aoMap.toJSON(m).uuid,j.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(j.bumpMap=this.bumpMap.toJSON(m).uuid,j.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(j.normalMap=this.normalMap.toJSON(m).uuid,j.normalMapType=this.normalMapType,j.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(j.displacementMap=this.displacementMap.toJSON(m).uuid,j.displacementScale=this.displacementScale,j.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(j.roughnessMap=this.roughnessMap.toJSON(m).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(j.metalnessMap=this.metalnessMap.toJSON(m).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(j.emissiveMap=this.emissiveMap.toJSON(m).uuid),this.specularMap&&this.specularMap.isTexture&&(j.specularMap=this.specularMap.toJSON(m).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(j.specularIntensityMap=this.specularIntensityMap.toJSON(m).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(j.specularColorMap=this.specularColorMap.toJSON(m).uuid),this.envMap&&this.envMap.isTexture&&(j.envMap=this.envMap.toJSON(m).uuid,this.combine!==void 0&&(j.combine=this.combine)),this.envMapRotation!==void 0&&(j.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(j.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(j.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(j.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(j.gradientMap=this.gradientMap.toJSON(m).uuid),this.transmission!==void 0&&(j.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(j.transmissionMap=this.transmissionMap.toJSON(m).uuid),this.thickness!==void 0&&(j.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(j.thicknessMap=this.thicknessMap.toJSON(m).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(j.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(j.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(j.size=this.size),this.shadowSide!==null&&(j.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(j.sizeAttenuation=this.sizeAttenuation),this.blending!==NormalBlending&&(j.blending=this.blending),this.side!==FrontSide&&(j.side=this.side),this.vertexColors===!0&&(j.vertexColors=!0),this.opacity<1&&(j.opacity=this.opacity),this.transparent===!0&&(j.transparent=!0),this.blendSrc!==SrcAlphaFactor&&(j.blendSrc=this.blendSrc),this.blendDst!==OneMinusSrcAlphaFactor&&(j.blendDst=this.blendDst),this.blendEquation!==AddEquation&&(j.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(j.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(j.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(j.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(j.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(j.blendAlpha=this.blendAlpha),this.depthFunc!==LessEqualDepth&&(j.depthFunc=this.depthFunc),this.depthTest===!1&&(j.depthTest=this.depthTest),this.depthWrite===!1&&(j.depthWrite=this.depthWrite),this.colorWrite===!1&&(j.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(j.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==AlwaysStencilFunc&&(j.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(j.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(j.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==KeepStencilOp&&(j.stencilFail=this.stencilFail),this.stencilZFail!==KeepStencilOp&&(j.stencilZFail=this.stencilZFail),this.stencilZPass!==KeepStencilOp&&(j.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(j.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(j.rotation=this.rotation),this.polygonOffset===!0&&(j.polygonOffset=!0),this.polygonOffsetFactor!==0&&(j.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(j.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(j.linewidth=this.linewidth),this.dashSize!==void 0&&(j.dashSize=this.dashSize),this.gapSize!==void 0&&(j.gapSize=this.gapSize),this.scale!==void 0&&(j.scale=this.scale),this.dithering===!0&&(j.dithering=!0),this.alphaTest>0&&(j.alphaTest=this.alphaTest),this.alphaHash===!0&&(j.alphaHash=!0),this.alphaToCoverage===!0&&(j.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(j.premultipliedAlpha=!0),this.forceSinglePass===!0&&(j.forceSinglePass=!0),this.wireframe===!0&&(j.wireframe=!0),this.wireframeLinewidth>1&&(j.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(j.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(j.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(j.flatShading=!0),this.visible===!1&&(j.visible=!1),this.toneMapped===!1&&(j.toneMapped=!1),this.fog===!1&&(j.fog=!1),Object.keys(this.userData).length>0&&(j.userData=this.userData);function ee(re){const le=[];for(const ve in re){const ye=re[ve];delete ye.metadata,le.push(ye)}return le}if(L){const re=ee(m.textures),le=ee(m.images);re.length>0&&(j.textures=re),le.length>0&&(j.images=le)}return j}clone(){return new this.constructor().copy(this)}copy(m){this.name=m.name,this.blending=m.blending,this.side=m.side,this.vertexColors=m.vertexColors,this.opacity=m.opacity,this.transparent=m.transparent,this.blendSrc=m.blendSrc,this.blendDst=m.blendDst,this.blendEquation=m.blendEquation,this.blendSrcAlpha=m.blendSrcAlpha,this.blendDstAlpha=m.blendDstAlpha,this.blendEquationAlpha=m.blendEquationAlpha,this.blendColor.copy(m.blendColor),this.blendAlpha=m.blendAlpha,this.depthFunc=m.depthFunc,this.depthTest=m.depthTest,this.depthWrite=m.depthWrite,this.stencilWriteMask=m.stencilWriteMask,this.stencilFunc=m.stencilFunc,this.stencilRef=m.stencilRef,this.stencilFuncMask=m.stencilFuncMask,this.stencilFail=m.stencilFail,this.stencilZFail=m.stencilZFail,this.stencilZPass=m.stencilZPass,this.stencilWrite=m.stencilWrite;const L=m.clippingPlanes;let j=null;if(L!==null){const ee=L.length;j=new Array(ee);for(let re=0;re!==ee;++re)j[re]=L[re].clone()}return this.clippingPlanes=j,this.clipIntersection=m.clipIntersection,this.clipShadows=m.clipShadows,this.shadowSide=m.shadowSide,this.colorWrite=m.colorWrite,this.precision=m.precision,this.polygonOffset=m.polygonOffset,this.polygonOffsetFactor=m.polygonOffsetFactor,this.polygonOffsetUnits=m.polygonOffsetUnits,this.dithering=m.dithering,this.alphaTest=m.alphaTest,this.alphaHash=m.alphaHash,this.alphaToCoverage=m.alphaToCoverage,this.premultipliedAlpha=m.premultipliedAlpha,this.forceSinglePass=m.forceSinglePass,this.visible=m.visible,this.toneMapped=m.toneMapped,this.userData=JSON.parse(JSON.stringify(m.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(m){m===!0&&this.version++}}class MeshBasicMaterial extends Material{constructor(m){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Euler,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(m)}copy(m){return super.copy(m),this.color.copy(m.color),this.map=m.map,this.lightMap=m.lightMap,this.lightMapIntensity=m.lightMapIntensity,this.aoMap=m.aoMap,this.aoMapIntensity=m.aoMapIntensity,this.specularMap=m.specularMap,this.alphaMap=m.alphaMap,this.envMap=m.envMap,this.envMapRotation.copy(m.envMapRotation),this.combine=m.combine,this.reflectivity=m.reflectivity,this.refractionRatio=m.refractionRatio,this.wireframe=m.wireframe,this.wireframeLinewidth=m.wireframeLinewidth,this.wireframeLinecap=m.wireframeLinecap,this.wireframeLinejoin=m.wireframeLinejoin,this.fog=m.fog,this}}const _tables=_generateTables();function _generateTables(){const $=new ArrayBuffer(4),m=new Float32Array($),L=new Uint32Array($),j=new Uint32Array(512),ee=new Uint32Array(512);for(let ye=0;ye<256;++ye){const Ee=ye-127;Ee<-27?(j[ye]=0,j[ye|256]=32768,ee[ye]=24,ee[ye|256]=24):Ee<-14?(j[ye]=1024>>-Ee-14,j[ye|256]=1024>>-Ee-14|32768,ee[ye]=-Ee-1,ee[ye|256]=-Ee-1):Ee<=15?(j[ye]=Ee+15<<10,j[ye|256]=Ee+15<<10|32768,ee[ye]=13,ee[ye|256]=13):Ee<128?(j[ye]=31744,j[ye|256]=64512,ee[ye]=24,ee[ye|256]=24):(j[ye]=31744,j[ye|256]=64512,ee[ye]=13,ee[ye|256]=13)}const re=new Uint32Array(2048),le=new Uint32Array(64),ve=new Uint32Array(64);for(let ye=1;ye<1024;++ye){let Ee=ye<<13,Me=0;for(;!(Ee&8388608);)Ee<<=1,Me-=8388608;Ee&=-8388609,Me+=947912704,re[ye]=Ee|Me}for(let ye=1024;ye<2048;++ye)re[ye]=939524096+(ye-1024<<13);for(let ye=1;ye<31;++ye)le[ye]=ye<<23;le[31]=1199570944,le[32]=2147483648;for(let ye=33;ye<63;++ye)le[ye]=2147483648+(ye-32<<23);le[63]=3347054592;for(let ye=1;ye<64;++ye)ye!==32&&(ve[ye]=1024);return{floatView:m,uint32View:L,baseTable:j,shiftTable:ee,mantissaTable:re,exponentTable:le,offsetTable:ve}}function toHalfFloat($){Math.abs($)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),$=clamp$1($,-65504,65504),_tables.floatView[0]=$;const m=_tables.uint32View[0],L=m>>23&511;return _tables.baseTable[L]+((m&8388607)>>_tables.shiftTable[L])}function fromHalfFloat($){const m=$>>10;return _tables.uint32View[0]=_tables.mantissaTable[_tables.offsetTable[m]+($&1023)]+_tables.exponentTable[m],_tables.floatView[0]}const DataUtils={toHalfFloat,fromHalfFloat},_vector$9=new Vector3,_vector2$1=new Vector2;class BufferAttribute{constructor(m,L,j=!1){if(Array.isArray(m))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=m,this.itemSize=L,this.count=m!==void 0?m.length/L:0,this.normalized=j,this.usage=StaticDrawUsage,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=FloatType,this.version=0}onUploadCallback(){}set needsUpdate(m){m===!0&&this.version++}get updateRange(){return warnOnce("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(m){return this.usage=m,this}addUpdateRange(m,L){this.updateRanges.push({start:m,count:L})}clearUpdateRanges(){this.updateRanges.length=0}copy(m){return this.name=m.name,this.array=new m.array.constructor(m.array),this.itemSize=m.itemSize,this.count=m.count,this.normalized=m.normalized,this.usage=m.usage,this.gpuType=m.gpuType,this}copyAt(m,L,j){m*=this.itemSize,j*=L.itemSize;for(let ee=0,re=this.itemSize;ee<re;ee++)this.array[m+ee]=L.array[j+ee];return this}copyArray(m){return this.array.set(m),this}applyMatrix3(m){if(this.itemSize===2)for(let L=0,j=this.count;L<j;L++)_vector2$1.fromBufferAttribute(this,L),_vector2$1.applyMatrix3(m),this.setXY(L,_vector2$1.x,_vector2$1.y);else if(this.itemSize===3)for(let L=0,j=this.count;L<j;L++)_vector$9.fromBufferAttribute(this,L),_vector$9.applyMatrix3(m),this.setXYZ(L,_vector$9.x,_vector$9.y,_vector$9.z);return this}applyMatrix4(m){for(let L=0,j=this.count;L<j;L++)_vector$9.fromBufferAttribute(this,L),_vector$9.applyMatrix4(m),this.setXYZ(L,_vector$9.x,_vector$9.y,_vector$9.z);return this}applyNormalMatrix(m){for(let L=0,j=this.count;L<j;L++)_vector$9.fromBufferAttribute(this,L),_vector$9.applyNormalMatrix(m),this.setXYZ(L,_vector$9.x,_vector$9.y,_vector$9.z);return this}transformDirection(m){for(let L=0,j=this.count;L<j;L++)_vector$9.fromBufferAttribute(this,L),_vector$9.transformDirection(m),this.setXYZ(L,_vector$9.x,_vector$9.y,_vector$9.z);return this}set(m,L=0){return this.array.set(m,L),this}getComponent(m,L){let j=this.array[m*this.itemSize+L];return this.normalized&&(j=denormalize(j,this.array)),j}setComponent(m,L,j){return this.normalized&&(j=normalize(j,this.array)),this.array[m*this.itemSize+L]=j,this}getX(m){let L=this.array[m*this.itemSize];return this.normalized&&(L=denormalize(L,this.array)),L}setX(m,L){return this.normalized&&(L=normalize(L,this.array)),this.array[m*this.itemSize]=L,this}getY(m){let L=this.array[m*this.itemSize+1];return this.normalized&&(L=denormalize(L,this.array)),L}setY(m,L){return this.normalized&&(L=normalize(L,this.array)),this.array[m*this.itemSize+1]=L,this}getZ(m){let L=this.array[m*this.itemSize+2];return this.normalized&&(L=denormalize(L,this.array)),L}setZ(m,L){return this.normalized&&(L=normalize(L,this.array)),this.array[m*this.itemSize+2]=L,this}getW(m){let L=this.array[m*this.itemSize+3];return this.normalized&&(L=denormalize(L,this.array)),L}setW(m,L){return this.normalized&&(L=normalize(L,this.array)),this.array[m*this.itemSize+3]=L,this}setXY(m,L,j){return m*=this.itemSize,this.normalized&&(L=normalize(L,this.array),j=normalize(j,this.array)),this.array[m+0]=L,this.array[m+1]=j,this}setXYZ(m,L,j,ee){return m*=this.itemSize,this.normalized&&(L=normalize(L,this.array),j=normalize(j,this.array),ee=normalize(ee,this.array)),this.array[m+0]=L,this.array[m+1]=j,this.array[m+2]=ee,this}setXYZW(m,L,j,ee,re){return m*=this.itemSize,this.normalized&&(L=normalize(L,this.array),j=normalize(j,this.array),ee=normalize(ee,this.array),re=normalize(re,this.array)),this.array[m+0]=L,this.array[m+1]=j,this.array[m+2]=ee,this.array[m+3]=re,this}onUpload(m){return this.onUploadCallback=m,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const m={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(m.name=this.name),this.usage!==StaticDrawUsage&&(m.usage=this.usage),m}}class Uint16BufferAttribute extends BufferAttribute{constructor(m,L,j){super(new Uint16Array(m),L,j)}}class Uint32BufferAttribute extends BufferAttribute{constructor(m,L,j){super(new Uint32Array(m),L,j)}}class Float32BufferAttribute extends BufferAttribute{constructor(m,L,j){super(new Float32Array(m),L,j)}}let _id$2=0;const _m1$2=new Matrix4,_obj=new Object3D,_offset=new Vector3,_box$2=new Box3,_boxMorphTargets=new Box3,_vector$8=new Vector3;class BufferGeometry extends EventDispatcher$2{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:_id$2++}),this.uuid=generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(m){return Array.isArray(m)?this.index=new(arrayNeedsUint32(m)?Uint32BufferAttribute:Uint16BufferAttribute)(m,1):this.index=m,this}getAttribute(m){return this.attributes[m]}setAttribute(m,L){return this.attributes[m]=L,this}deleteAttribute(m){return delete this.attributes[m],this}hasAttribute(m){return this.attributes[m]!==void 0}addGroup(m,L,j=0){this.groups.push({start:m,count:L,materialIndex:j})}clearGroups(){this.groups=[]}setDrawRange(m,L){this.drawRange.start=m,this.drawRange.count=L}applyMatrix4(m){const L=this.attributes.position;L!==void 0&&(L.applyMatrix4(m),L.needsUpdate=!0);const j=this.attributes.normal;if(j!==void 0){const re=new Matrix3().getNormalMatrix(m);j.applyNormalMatrix(re),j.needsUpdate=!0}const ee=this.attributes.tangent;return ee!==void 0&&(ee.transformDirection(m),ee.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(m){return _m1$2.makeRotationFromQuaternion(m),this.applyMatrix4(_m1$2),this}rotateX(m){return _m1$2.makeRotationX(m),this.applyMatrix4(_m1$2),this}rotateY(m){return _m1$2.makeRotationY(m),this.applyMatrix4(_m1$2),this}rotateZ(m){return _m1$2.makeRotationZ(m),this.applyMatrix4(_m1$2),this}translate(m,L,j){return _m1$2.makeTranslation(m,L,j),this.applyMatrix4(_m1$2),this}scale(m,L,j){return _m1$2.makeScale(m,L,j),this.applyMatrix4(_m1$2),this}lookAt(m){return _obj.lookAt(m),_obj.updateMatrix(),this.applyMatrix4(_obj.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset).negate(),this.translate(_offset.x,_offset.y,_offset.z),this}setFromPoints(m){const L=[];for(let j=0,ee=m.length;j<ee;j++){const re=m[j];L.push(re.x,re.y,re.z||0)}return this.setAttribute("position",new Float32BufferAttribute(L,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Box3);const m=this.attributes.position,L=this.morphAttributes.position;if(m&&m.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Vector3(-1/0,-1/0,-1/0),new Vector3(1/0,1/0,1/0));return}if(m!==void 0){if(this.boundingBox.setFromBufferAttribute(m),L)for(let j=0,ee=L.length;j<ee;j++){const re=L[j];_box$2.setFromBufferAttribute(re),this.morphTargetsRelative?(_vector$8.addVectors(this.boundingBox.min,_box$2.min),this.boundingBox.expandByPoint(_vector$8),_vector$8.addVectors(this.boundingBox.max,_box$2.max),this.boundingBox.expandByPoint(_vector$8)):(this.boundingBox.expandByPoint(_box$2.min),this.boundingBox.expandByPoint(_box$2.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Sphere);const m=this.attributes.position,L=this.morphAttributes.position;if(m&&m.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Vector3,1/0);return}if(m){const j=this.boundingSphere.center;if(_box$2.setFromBufferAttribute(m),L)for(let re=0,le=L.length;re<le;re++){const ve=L[re];_boxMorphTargets.setFromBufferAttribute(ve),this.morphTargetsRelative?(_vector$8.addVectors(_box$2.min,_boxMorphTargets.min),_box$2.expandByPoint(_vector$8),_vector$8.addVectors(_box$2.max,_boxMorphTargets.max),_box$2.expandByPoint(_vector$8)):(_box$2.expandByPoint(_boxMorphTargets.min),_box$2.expandByPoint(_boxMorphTargets.max))}_box$2.getCenter(j);let ee=0;for(let re=0,le=m.count;re<le;re++)_vector$8.fromBufferAttribute(m,re),ee=Math.max(ee,j.distanceToSquared(_vector$8));if(L)for(let re=0,le=L.length;re<le;re++){const ve=L[re],ye=this.morphTargetsRelative;for(let Ee=0,Me=ve.count;Ee<Me;Ee++)_vector$8.fromBufferAttribute(ve,Ee),ye&&(_offset.fromBufferAttribute(m,Ee),_vector$8.add(_offset)),ee=Math.max(ee,j.distanceToSquared(_vector$8))}this.boundingSphere.radius=Math.sqrt(ee),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const m=this.index,L=this.attributes;if(m===null||L.position===void 0||L.normal===void 0||L.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const j=L.position,ee=L.normal,re=L.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new BufferAttribute(new Float32Array(4*j.count),4));const le=this.getAttribute("tangent"),ve=[],ye=[];for(let Ze=0;Ze<j.count;Ze++)ve[Ze]=new Vector3,ye[Ze]=new Vector3;const Ee=new Vector3,Me=new Vector3,Ce=new Vector3,De=new Vector2,Be=new Vector2,ke=new Vector2,Fe=new Vector3,Oe=new Vector3;function Ne(Ze,Ke,rt){Ee.fromBufferAttribute(j,Ze),Me.fromBufferAttribute(j,Ke),Ce.fromBufferAttribute(j,rt),De.fromBufferAttribute(re,Ze),Be.fromBufferAttribute(re,Ke),ke.fromBufferAttribute(re,rt),Me.sub(Ee),Ce.sub(Ee),Be.sub(De),ke.sub(De);const ft=1/(Be.x*ke.y-ke.x*Be.y);isFinite(ft)&&(Fe.copy(Me).multiplyScalar(ke.y).addScaledVector(Ce,-Be.y).multiplyScalar(ft),Oe.copy(Ce).multiplyScalar(Be.x).addScaledVector(Me,-ke.x).multiplyScalar(ft),ve[Ze].add(Fe),ve[Ke].add(Fe),ve[rt].add(Fe),ye[Ze].add(Oe),ye[Ke].add(Oe),ye[rt].add(Oe))}let ze=this.groups;ze.length===0&&(ze=[{start:0,count:m.count}]);for(let Ze=0,Ke=ze.length;Ze<Ke;++Ze){const rt=ze[Ze],ft=rt.start,mt=rt.count;for(let Et=ft,bt=ft+mt;Et<bt;Et+=3)Ne(m.getX(Et+0),m.getX(Et+1),m.getX(Et+2))}const $e=new Vector3,He=new Vector3,We=new Vector3,qe=new Vector3;function Ye(Ze){We.fromBufferAttribute(ee,Ze),qe.copy(We);const Ke=ve[Ze];$e.copy(Ke),$e.sub(We.multiplyScalar(We.dot(Ke))).normalize(),He.crossVectors(qe,Ke);const ft=He.dot(ye[Ze])<0?-1:1;le.setXYZW(Ze,$e.x,$e.y,$e.z,ft)}for(let Ze=0,Ke=ze.length;Ze<Ke;++Ze){const rt=ze[Ze],ft=rt.start,mt=rt.count;for(let Et=ft,bt=ft+mt;Et<bt;Et+=3)Ye(m.getX(Et+0)),Ye(m.getX(Et+1)),Ye(m.getX(Et+2))}}computeVertexNormals(){const m=this.index,L=this.getAttribute("position");if(L!==void 0){let j=this.getAttribute("normal");if(j===void 0)j=new BufferAttribute(new Float32Array(L.count*3),3),this.setAttribute("normal",j);else for(let De=0,Be=j.count;De<Be;De++)j.setXYZ(De,0,0,0);const ee=new Vector3,re=new Vector3,le=new Vector3,ve=new Vector3,ye=new Vector3,Ee=new Vector3,Me=new Vector3,Ce=new Vector3;if(m)for(let De=0,Be=m.count;De<Be;De+=3){const ke=m.getX(De+0),Fe=m.getX(De+1),Oe=m.getX(De+2);ee.fromBufferAttribute(L,ke),re.fromBufferAttribute(L,Fe),le.fromBufferAttribute(L,Oe),Me.subVectors(le,re),Ce.subVectors(ee,re),Me.cross(Ce),ve.fromBufferAttribute(j,ke),ye.fromBufferAttribute(j,Fe),Ee.fromBufferAttribute(j,Oe),ve.add(Me),ye.add(Me),Ee.add(Me),j.setXYZ(ke,ve.x,ve.y,ve.z),j.setXYZ(Fe,ye.x,ye.y,ye.z),j.setXYZ(Oe,Ee.x,Ee.y,Ee.z)}else for(let De=0,Be=L.count;De<Be;De+=3)ee.fromBufferAttribute(L,De+0),re.fromBufferAttribute(L,De+1),le.fromBufferAttribute(L,De+2),Me.subVectors(le,re),Ce.subVectors(ee,re),Me.cross(Ce),j.setXYZ(De+0,Me.x,Me.y,Me.z),j.setXYZ(De+1,Me.x,Me.y,Me.z),j.setXYZ(De+2,Me.x,Me.y,Me.z);this.normalizeNormals(),j.needsUpdate=!0}}normalizeNormals(){const m=this.attributes.normal;for(let L=0,j=m.count;L<j;L++)_vector$8.fromBufferAttribute(m,L),_vector$8.normalize(),m.setXYZ(L,_vector$8.x,_vector$8.y,_vector$8.z)}toNonIndexed(){function m(ve,ye){const Ee=ve.array,Me=ve.itemSize,Ce=ve.normalized,De=new Ee.constructor(ye.length*Me);let Be=0,ke=0;for(let Fe=0,Oe=ye.length;Fe<Oe;Fe++){ve.isInterleavedBufferAttribute?Be=ye[Fe]*ve.data.stride+ve.offset:Be=ye[Fe]*Me;for(let Ne=0;Ne<Me;Ne++)De[ke++]=Ee[Be++]}return new BufferAttribute(De,Me,Ce)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const L=new BufferGeometry,j=this.index.array,ee=this.attributes;for(const ve in ee){const ye=ee[ve],Ee=m(ye,j);L.setAttribute(ve,Ee)}const re=this.morphAttributes;for(const ve in re){const ye=[],Ee=re[ve];for(let Me=0,Ce=Ee.length;Me<Ce;Me++){const De=Ee[Me],Be=m(De,j);ye.push(Be)}L.morphAttributes[ve]=ye}L.morphTargetsRelative=this.morphTargetsRelative;const le=this.groups;for(let ve=0,ye=le.length;ve<ye;ve++){const Ee=le[ve];L.addGroup(Ee.start,Ee.count,Ee.materialIndex)}return L}toJSON(){const m={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(m.uuid=this.uuid,m.type=this.type,this.name!==""&&(m.name=this.name),Object.keys(this.userData).length>0&&(m.userData=this.userData),this.parameters!==void 0){const ye=this.parameters;for(const Ee in ye)ye[Ee]!==void 0&&(m[Ee]=ye[Ee]);return m}m.data={attributes:{}};const L=this.index;L!==null&&(m.data.index={type:L.array.constructor.name,array:Array.prototype.slice.call(L.array)});const j=this.attributes;for(const ye in j){const Ee=j[ye];m.data.attributes[ye]=Ee.toJSON(m.data)}const ee={};let re=!1;for(const ye in this.morphAttributes){const Ee=this.morphAttributes[ye],Me=[];for(let Ce=0,De=Ee.length;Ce<De;Ce++){const Be=Ee[Ce];Me.push(Be.toJSON(m.data))}Me.length>0&&(ee[ye]=Me,re=!0)}re&&(m.data.morphAttributes=ee,m.data.morphTargetsRelative=this.morphTargetsRelative);const le=this.groups;le.length>0&&(m.data.groups=JSON.parse(JSON.stringify(le)));const ve=this.boundingSphere;return ve!==null&&(m.data.boundingSphere={center:ve.center.toArray(),radius:ve.radius}),m}clone(){return new this.constructor().copy(this)}copy(m){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const L={};this.name=m.name;const j=m.index;j!==null&&this.setIndex(j.clone(L));const ee=m.attributes;for(const Ee in ee){const Me=ee[Ee];this.setAttribute(Ee,Me.clone(L))}const re=m.morphAttributes;for(const Ee in re){const Me=[],Ce=re[Ee];for(let De=0,Be=Ce.length;De<Be;De++)Me.push(Ce[De].clone(L));this.morphAttributes[Ee]=Me}this.morphTargetsRelative=m.morphTargetsRelative;const le=m.groups;for(let Ee=0,Me=le.length;Ee<Me;Ee++){const Ce=le[Ee];this.addGroup(Ce.start,Ce.count,Ce.materialIndex)}const ve=m.boundingBox;ve!==null&&(this.boundingBox=ve.clone());const ye=m.boundingSphere;return ye!==null&&(this.boundingSphere=ye.clone()),this.drawRange.start=m.drawRange.start,this.drawRange.count=m.drawRange.count,this.userData=m.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const _inverseMatrix$3=new Matrix4,_ray$3=new Ray,_sphere$6=new Sphere,_sphereHitAt=new Vector3,_vA$1=new Vector3,_vB$1=new Vector3,_vC$1=new Vector3,_tempA=new Vector3,_morphA=new Vector3,_uvA$1=new Vector2,_uvB$1=new Vector2,_uvC$1=new Vector2,_normalA=new Vector3,_normalB=new Vector3,_normalC=new Vector3,_intersectionPoint=new Vector3,_intersectionPointWorld=new Vector3;class Mesh extends Object3D{constructor(m=new BufferGeometry,L=new MeshBasicMaterial){super(),this.isMesh=!0,this.type="Mesh",this.geometry=m,this.material=L,this.updateMorphTargets()}copy(m,L){return super.copy(m,L),m.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=m.morphTargetInfluences.slice()),m.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},m.morphTargetDictionary)),this.material=Array.isArray(m.material)?m.material.slice():m.material,this.geometry=m.geometry,this}updateMorphTargets(){const L=this.geometry.morphAttributes,j=Object.keys(L);if(j.length>0){const ee=L[j[0]];if(ee!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let re=0,le=ee.length;re<le;re++){const ve=ee[re].name||String(re);this.morphTargetInfluences.push(0),this.morphTargetDictionary[ve]=re}}}}getVertexPosition(m,L){const j=this.geometry,ee=j.attributes.position,re=j.morphAttributes.position,le=j.morphTargetsRelative;L.fromBufferAttribute(ee,m);const ve=this.morphTargetInfluences;if(re&&ve){_morphA.set(0,0,0);for(let ye=0,Ee=re.length;ye<Ee;ye++){const Me=ve[ye],Ce=re[ye];Me!==0&&(_tempA.fromBufferAttribute(Ce,m),le?_morphA.addScaledVector(_tempA,Me):_morphA.addScaledVector(_tempA.sub(L),Me))}L.add(_morphA)}return L}raycast(m,L){const j=this.geometry,ee=this.material,re=this.matrixWorld;ee!==void 0&&(j.boundingSphere===null&&j.computeBoundingSphere(),_sphere$6.copy(j.boundingSphere),_sphere$6.applyMatrix4(re),_ray$3.copy(m.ray).recast(m.near),!(_sphere$6.containsPoint(_ray$3.origin)===!1&&(_ray$3.intersectSphere(_sphere$6,_sphereHitAt)===null||_ray$3.origin.distanceToSquared(_sphereHitAt)>(m.far-m.near)**2))&&(_inverseMatrix$3.copy(re).invert(),_ray$3.copy(m.ray).applyMatrix4(_inverseMatrix$3),!(j.boundingBox!==null&&_ray$3.intersectsBox(j.boundingBox)===!1)&&this._computeIntersections(m,L,_ray$3)))}_computeIntersections(m,L,j){let ee;const re=this.geometry,le=this.material,ve=re.index,ye=re.attributes.position,Ee=re.attributes.uv,Me=re.attributes.uv1,Ce=re.attributes.normal,De=re.groups,Be=re.drawRange;if(ve!==null)if(Array.isArray(le))for(let ke=0,Fe=De.length;ke<Fe;ke++){const Oe=De[ke],Ne=le[Oe.materialIndex],ze=Math.max(Oe.start,Be.start),$e=Math.min(ve.count,Math.min(Oe.start+Oe.count,Be.start+Be.count));for(let He=ze,We=$e;He<We;He+=3){const qe=ve.getX(He),Ye=ve.getX(He+1),Ze=ve.getX(He+2);ee=checkGeometryIntersection(this,Ne,m,j,Ee,Me,Ce,qe,Ye,Ze),ee&&(ee.faceIndex=Math.floor(He/3),ee.face.materialIndex=Oe.materialIndex,L.push(ee))}}else{const ke=Math.max(0,Be.start),Fe=Math.min(ve.count,Be.start+Be.count);for(let Oe=ke,Ne=Fe;Oe<Ne;Oe+=3){const ze=ve.getX(Oe),$e=ve.getX(Oe+1),He=ve.getX(Oe+2);ee=checkGeometryIntersection(this,le,m,j,Ee,Me,Ce,ze,$e,He),ee&&(ee.faceIndex=Math.floor(Oe/3),L.push(ee))}}else if(ye!==void 0)if(Array.isArray(le))for(let ke=0,Fe=De.length;ke<Fe;ke++){const Oe=De[ke],Ne=le[Oe.materialIndex],ze=Math.max(Oe.start,Be.start),$e=Math.min(ye.count,Math.min(Oe.start+Oe.count,Be.start+Be.count));for(let He=ze,We=$e;He<We;He+=3){const qe=He,Ye=He+1,Ze=He+2;ee=checkGeometryIntersection(this,Ne,m,j,Ee,Me,Ce,qe,Ye,Ze),ee&&(ee.faceIndex=Math.floor(He/3),ee.face.materialIndex=Oe.materialIndex,L.push(ee))}}else{const ke=Math.max(0,Be.start),Fe=Math.min(ye.count,Be.start+Be.count);for(let Oe=ke,Ne=Fe;Oe<Ne;Oe+=3){const ze=Oe,$e=Oe+1,He=Oe+2;ee=checkGeometryIntersection(this,le,m,j,Ee,Me,Ce,ze,$e,He),ee&&(ee.faceIndex=Math.floor(Oe/3),L.push(ee))}}}}function checkIntersection$1($,m,L,j,ee,re,le,ve){let ye;if(m.side===BackSide?ye=j.intersectTriangle(le,re,ee,!0,ve):ye=j.intersectTriangle(ee,re,le,m.side===FrontSide,ve),ye===null)return null;_intersectionPointWorld.copy(ve),_intersectionPointWorld.applyMatrix4($.matrixWorld);const Ee=L.ray.origin.distanceTo(_intersectionPointWorld);return Ee<L.near||Ee>L.far?null:{distance:Ee,point:_intersectionPointWorld.clone(),object:$}}function checkGeometryIntersection($,m,L,j,ee,re,le,ve,ye,Ee){$.getVertexPosition(ve,_vA$1),$.getVertexPosition(ye,_vB$1),$.getVertexPosition(Ee,_vC$1);const Me=checkIntersection$1($,m,L,j,_vA$1,_vB$1,_vC$1,_intersectionPoint);if(Me){ee&&(_uvA$1.fromBufferAttribute(ee,ve),_uvB$1.fromBufferAttribute(ee,ye),_uvC$1.fromBufferAttribute(ee,Ee),Me.uv=Triangle$1.getInterpolation(_intersectionPoint,_vA$1,_vB$1,_vC$1,_uvA$1,_uvB$1,_uvC$1,new Vector2)),re&&(_uvA$1.fromBufferAttribute(re,ve),_uvB$1.fromBufferAttribute(re,ye),_uvC$1.fromBufferAttribute(re,Ee),Me.uv1=Triangle$1.getInterpolation(_intersectionPoint,_vA$1,_vB$1,_vC$1,_uvA$1,_uvB$1,_uvC$1,new Vector2)),le&&(_normalA.fromBufferAttribute(le,ve),_normalB.fromBufferAttribute(le,ye),_normalC.fromBufferAttribute(le,Ee),Me.normal=Triangle$1.getInterpolation(_intersectionPoint,_vA$1,_vB$1,_vC$1,_normalA,_normalB,_normalC,new Vector3),Me.normal.dot(j.direction)>0&&Me.normal.multiplyScalar(-1));const Ce={a:ve,b:ye,c:Ee,normal:new Vector3,materialIndex:0};Triangle$1.getNormal(_vA$1,_vB$1,_vC$1,Ce.normal),Me.face=Ce}return Me}class BoxGeometry extends BufferGeometry{constructor(m=1,L=1,j=1,ee=1,re=1,le=1){super(),this.type="BoxGeometry",this.parameters={width:m,height:L,depth:j,widthSegments:ee,heightSegments:re,depthSegments:le};const ve=this;ee=Math.floor(ee),re=Math.floor(re),le=Math.floor(le);const ye=[],Ee=[],Me=[],Ce=[];let De=0,Be=0;ke("z","y","x",-1,-1,j,L,m,le,re,0),ke("z","y","x",1,-1,j,L,-m,le,re,1),ke("x","z","y",1,1,m,j,L,ee,le,2),ke("x","z","y",1,-1,m,j,-L,ee,le,3),ke("x","y","z",1,-1,m,L,j,ee,re,4),ke("x","y","z",-1,-1,m,L,-j,ee,re,5),this.setIndex(ye),this.setAttribute("position",new Float32BufferAttribute(Ee,3)),this.setAttribute("normal",new Float32BufferAttribute(Me,3)),this.setAttribute("uv",new Float32BufferAttribute(Ce,2));function ke(Fe,Oe,Ne,ze,$e,He,We,qe,Ye,Ze,Ke){const rt=He/Ye,ft=We/Ze,mt=He/2,Et=We/2,bt=qe/2,Ct=Ye+1,st=Ze+1;let at=0,Xe=0;const ht=new Vector3;for(let Bt=0;Bt<st;Bt++){const Dt=Bt*ft-Et;for(let Jt=0;Jt<Ct;Jt++){const tn=Jt*rt-mt;ht[Fe]=tn*ze,ht[Oe]=Dt*$e,ht[Ne]=bt,Ee.push(ht.x,ht.y,ht.z),ht[Fe]=0,ht[Oe]=0,ht[Ne]=qe>0?1:-1,Me.push(ht.x,ht.y,ht.z),Ce.push(Jt/Ye),Ce.push(1-Bt/Ze),at+=1}}for(let Bt=0;Bt<Ze;Bt++)for(let Dt=0;Dt<Ye;Dt++){const Jt=De+Dt+Ct*Bt,tn=De+Dt+Ct*(Bt+1),zt=De+(Dt+1)+Ct*(Bt+1),Vt=De+(Dt+1)+Ct*Bt;ye.push(Jt,tn,Vt),ye.push(tn,zt,Vt),Xe+=6}ve.addGroup(Be,Xe,Ke),Be+=Xe,De+=at}}copy(m){return super.copy(m),this.parameters=Object.assign({},m.parameters),this}static fromJSON(m){return new BoxGeometry(m.width,m.height,m.depth,m.widthSegments,m.heightSegments,m.depthSegments)}}function cloneUniforms($){const m={};for(const L in $){m[L]={};for(const j in $[L]){const ee=$[L][j];ee&&(ee.isColor||ee.isMatrix3||ee.isMatrix4||ee.isVector2||ee.isVector3||ee.isVector4||ee.isTexture||ee.isQuaternion)?ee.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),m[L][j]=null):m[L][j]=ee.clone():Array.isArray(ee)?m[L][j]=ee.slice():m[L][j]=ee}}return m}function mergeUniforms($){const m={};for(let L=0;L<$.length;L++){const j=cloneUniforms($[L]);for(const ee in j)m[ee]=j[ee]}return m}function cloneUniformsGroups($){const m=[];for(let L=0;L<$.length;L++)m.push($[L].clone());return m}function getUnlitUniformColorSpace($){const m=$.getRenderTarget();return m===null?$.outputColorSpace:m.isXRRenderTarget===!0?m.texture.colorSpace:ColorManagement.workingColorSpace}const UniformsUtils={clone:cloneUniforms,merge:mergeUniforms};var default_vertex=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,default_fragment=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ShaderMaterial extends Material{constructor(m){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=default_vertex,this.fragmentShader=default_fragment,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,m!==void 0&&this.setValues(m)}copy(m){return super.copy(m),this.fragmentShader=m.fragmentShader,this.vertexShader=m.vertexShader,this.uniforms=cloneUniforms(m.uniforms),this.uniformsGroups=cloneUniformsGroups(m.uniformsGroups),this.defines=Object.assign({},m.defines),this.wireframe=m.wireframe,this.wireframeLinewidth=m.wireframeLinewidth,this.fog=m.fog,this.lights=m.lights,this.clipping=m.clipping,this.extensions=Object.assign({},m.extensions),this.glslVersion=m.glslVersion,this}toJSON(m){const L=super.toJSON(m);L.glslVersion=this.glslVersion,L.uniforms={};for(const ee in this.uniforms){const le=this.uniforms[ee].value;le&&le.isTexture?L.uniforms[ee]={type:"t",value:le.toJSON(m).uuid}:le&&le.isColor?L.uniforms[ee]={type:"c",value:le.getHex()}:le&&le.isVector2?L.uniforms[ee]={type:"v2",value:le.toArray()}:le&&le.isVector3?L.uniforms[ee]={type:"v3",value:le.toArray()}:le&&le.isVector4?L.uniforms[ee]={type:"v4",value:le.toArray()}:le&&le.isMatrix3?L.uniforms[ee]={type:"m3",value:le.toArray()}:le&&le.isMatrix4?L.uniforms[ee]={type:"m4",value:le.toArray()}:L.uniforms[ee]={value:le}}Object.keys(this.defines).length>0&&(L.defines=this.defines),L.vertexShader=this.vertexShader,L.fragmentShader=this.fragmentShader,L.lights=this.lights,L.clipping=this.clipping;const j={};for(const ee in this.extensions)this.extensions[ee]===!0&&(j[ee]=!0);return Object.keys(j).length>0&&(L.extensions=j),L}}class Camera extends Object3D{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Matrix4,this.projectionMatrix=new Matrix4,this.projectionMatrixInverse=new Matrix4,this.coordinateSystem=WebGLCoordinateSystem}copy(m,L){return super.copy(m,L),this.matrixWorldInverse.copy(m.matrixWorldInverse),this.projectionMatrix.copy(m.projectionMatrix),this.projectionMatrixInverse.copy(m.projectionMatrixInverse),this.coordinateSystem=m.coordinateSystem,this}getWorldDirection(m){return super.getWorldDirection(m).negate()}updateMatrixWorld(m){super.updateMatrixWorld(m),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(m,L){super.updateWorldMatrix(m,L),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const _v3$1=new Vector3,_minTarget=new Vector2,_maxTarget=new Vector2;class PerspectiveCamera extends Camera{constructor(m=50,L=1,j=.1,ee=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=m,this.zoom=1,this.near=j,this.far=ee,this.focus=10,this.aspect=L,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(m,L){return super.copy(m,L),this.fov=m.fov,this.zoom=m.zoom,this.near=m.near,this.far=m.far,this.focus=m.focus,this.aspect=m.aspect,this.view=m.view===null?null:Object.assign({},m.view),this.filmGauge=m.filmGauge,this.filmOffset=m.filmOffset,this}setFocalLength(m){const L=.5*this.getFilmHeight()/m;this.fov=RAD2DEG*2*Math.atan(L),this.updateProjectionMatrix()}getFocalLength(){const m=Math.tan(DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/m}getEffectiveFOV(){return RAD2DEG*2*Math.atan(Math.tan(DEG2RAD*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(m,L,j){_v3$1.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),L.set(_v3$1.x,_v3$1.y).multiplyScalar(-m/_v3$1.z),_v3$1.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),j.set(_v3$1.x,_v3$1.y).multiplyScalar(-m/_v3$1.z)}getViewSize(m,L){return this.getViewBounds(m,_minTarget,_maxTarget),L.subVectors(_maxTarget,_minTarget)}setViewOffset(m,L,j,ee,re,le){this.aspect=m/L,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=m,this.view.fullHeight=L,this.view.offsetX=j,this.view.offsetY=ee,this.view.width=re,this.view.height=le,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const m=this.near;let L=m*Math.tan(DEG2RAD*.5*this.fov)/this.zoom,j=2*L,ee=this.aspect*j,re=-.5*ee;const le=this.view;if(this.view!==null&&this.view.enabled){const ye=le.fullWidth,Ee=le.fullHeight;re+=le.offsetX*ee/ye,L-=le.offsetY*j/Ee,ee*=le.width/ye,j*=le.height/Ee}const ve=this.filmOffset;ve!==0&&(re+=m*ve/this.getFilmWidth()),this.projectionMatrix.makePerspective(re,re+ee,L,L-j,m,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(m){const L=super.toJSON(m);return L.object.fov=this.fov,L.object.zoom=this.zoom,L.object.near=this.near,L.object.far=this.far,L.object.focus=this.focus,L.object.aspect=this.aspect,this.view!==null&&(L.object.view=Object.assign({},this.view)),L.object.filmGauge=this.filmGauge,L.object.filmOffset=this.filmOffset,L}}const fov=-90,aspect=1;class CubeCamera extends Object3D{constructor(m,L,j){super(),this.type="CubeCamera",this.renderTarget=j,this.coordinateSystem=null,this.activeMipmapLevel=0;const ee=new PerspectiveCamera(fov,aspect,m,L);ee.layers=this.layers,this.add(ee);const re=new PerspectiveCamera(fov,aspect,m,L);re.layers=this.layers,this.add(re);const le=new PerspectiveCamera(fov,aspect,m,L);le.layers=this.layers,this.add(le);const ve=new PerspectiveCamera(fov,aspect,m,L);ve.layers=this.layers,this.add(ve);const ye=new PerspectiveCamera(fov,aspect,m,L);ye.layers=this.layers,this.add(ye);const Ee=new PerspectiveCamera(fov,aspect,m,L);Ee.layers=this.layers,this.add(Ee)}updateCoordinateSystem(){const m=this.coordinateSystem,L=this.children.concat(),[j,ee,re,le,ve,ye]=L;for(const Ee of L)this.remove(Ee);if(m===WebGLCoordinateSystem)j.up.set(0,1,0),j.lookAt(1,0,0),ee.up.set(0,1,0),ee.lookAt(-1,0,0),re.up.set(0,0,-1),re.lookAt(0,1,0),le.up.set(0,0,1),le.lookAt(0,-1,0),ve.up.set(0,1,0),ve.lookAt(0,0,1),ye.up.set(0,1,0),ye.lookAt(0,0,-1);else if(m===WebGPUCoordinateSystem)j.up.set(0,-1,0),j.lookAt(-1,0,0),ee.up.set(0,-1,0),ee.lookAt(1,0,0),re.up.set(0,0,1),re.lookAt(0,1,0),le.up.set(0,0,-1),le.lookAt(0,-1,0),ve.up.set(0,-1,0),ve.lookAt(0,0,1),ye.up.set(0,-1,0),ye.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+m);for(const Ee of L)this.add(Ee),Ee.updateMatrixWorld()}update(m,L){this.parent===null&&this.updateMatrixWorld();const{renderTarget:j,activeMipmapLevel:ee}=this;this.coordinateSystem!==m.coordinateSystem&&(this.coordinateSystem=m.coordinateSystem,this.updateCoordinateSystem());const[re,le,ve,ye,Ee,Me]=this.children,Ce=m.getRenderTarget(),De=m.getActiveCubeFace(),Be=m.getActiveMipmapLevel(),ke=m.xr.enabled;m.xr.enabled=!1;const Fe=j.texture.generateMipmaps;j.texture.generateMipmaps=!1,m.setRenderTarget(j,0,ee),m.render(L,re),m.setRenderTarget(j,1,ee),m.render(L,le),m.setRenderTarget(j,2,ee),m.render(L,ve),m.setRenderTarget(j,3,ee),m.render(L,ye),m.setRenderTarget(j,4,ee),m.render(L,Ee),j.texture.generateMipmaps=Fe,m.setRenderTarget(j,5,ee),m.render(L,Me),m.setRenderTarget(Ce,De,Be),m.xr.enabled=ke,j.texture.needsPMREMUpdate=!0}}class CubeTexture extends Texture{constructor(m,L,j,ee,re,le,ve,ye,Ee,Me){m=m!==void 0?m:[],L=L!==void 0?L:CubeReflectionMapping,super(m,L,j,ee,re,le,ve,ye,Ee,Me),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(m){this.image=m}}class WebGLCubeRenderTarget extends WebGLRenderTarget{constructor(m=1,L={}){super(m,m,L),this.isWebGLCubeRenderTarget=!0;const j={width:m,height:m,depth:1},ee=[j,j,j,j,j,j];this.texture=new CubeTexture(ee,L.mapping,L.wrapS,L.wrapT,L.magFilter,L.minFilter,L.format,L.type,L.anisotropy,L.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=L.generateMipmaps!==void 0?L.generateMipmaps:!1,this.texture.minFilter=L.minFilter!==void 0?L.minFilter:LinearFilter}fromEquirectangularTexture(m,L){this.texture.type=L.type,this.texture.colorSpace=L.colorSpace,this.texture.generateMipmaps=L.generateMipmaps,this.texture.minFilter=L.minFilter,this.texture.magFilter=L.magFilter;const j={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},ee=new BoxGeometry(5,5,5),re=new ShaderMaterial({name:"CubemapFromEquirect",uniforms:cloneUniforms(j.uniforms),vertexShader:j.vertexShader,fragmentShader:j.fragmentShader,side:BackSide,blending:NoBlending});re.uniforms.tEquirect.value=L;const le=new Mesh(ee,re),ve=L.minFilter;return L.minFilter===LinearMipmapLinearFilter&&(L.minFilter=LinearFilter),new CubeCamera(1,10,this).update(m,le),L.minFilter=ve,le.geometry.dispose(),le.material.dispose(),this}clear(m,L,j,ee){const re=m.getRenderTarget();for(let le=0;le<6;le++)m.setRenderTarget(this,le),m.clear(L,j,ee);m.setRenderTarget(re)}}const _vector1=new Vector3,_vector2=new Vector3,_normalMatrix=new Matrix3;class Plane{constructor(m=new Vector3(1,0,0),L=0){this.isPlane=!0,this.normal=m,this.constant=L}set(m,L){return this.normal.copy(m),this.constant=L,this}setComponents(m,L,j,ee){return this.normal.set(m,L,j),this.constant=ee,this}setFromNormalAndCoplanarPoint(m,L){return this.normal.copy(m),this.constant=-L.dot(this.normal),this}setFromCoplanarPoints(m,L,j){const ee=_vector1.subVectors(j,L).cross(_vector2.subVectors(m,L)).normalize();return this.setFromNormalAndCoplanarPoint(ee,m),this}copy(m){return this.normal.copy(m.normal),this.constant=m.constant,this}normalize(){const m=1/this.normal.length();return this.normal.multiplyScalar(m),this.constant*=m,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(m){return this.normal.dot(m)+this.constant}distanceToSphere(m){return this.distanceToPoint(m.center)-m.radius}projectPoint(m,L){return L.copy(m).addScaledVector(this.normal,-this.distanceToPoint(m))}intersectLine(m,L){const j=m.delta(_vector1),ee=this.normal.dot(j);if(ee===0)return this.distanceToPoint(m.start)===0?L.copy(m.start):null;const re=-(m.start.dot(this.normal)+this.constant)/ee;return re<0||re>1?null:L.copy(m.start).addScaledVector(j,re)}intersectsLine(m){const L=this.distanceToPoint(m.start),j=this.distanceToPoint(m.end);return L<0&&j>0||j<0&&L>0}intersectsBox(m){return m.intersectsPlane(this)}intersectsSphere(m){return m.intersectsPlane(this)}coplanarPoint(m){return m.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(m,L){const j=L||_normalMatrix.getNormalMatrix(m),ee=this.coplanarPoint(_vector1).applyMatrix4(m),re=this.normal.applyMatrix3(j).normalize();return this.constant=-ee.dot(re),this}translate(m){return this.constant-=m.dot(this.normal),this}equals(m){return m.normal.equals(this.normal)&&m.constant===this.constant}clone(){return new this.constructor().copy(this)}}const _sphere$5=new Sphere,_vector$7=new Vector3;class Frustum{constructor(m=new Plane,L=new Plane,j=new Plane,ee=new Plane,re=new Plane,le=new Plane){this.planes=[m,L,j,ee,re,le]}set(m,L,j,ee,re,le){const ve=this.planes;return ve[0].copy(m),ve[1].copy(L),ve[2].copy(j),ve[3].copy(ee),ve[4].copy(re),ve[5].copy(le),this}copy(m){const L=this.planes;for(let j=0;j<6;j++)L[j].copy(m.planes[j]);return this}setFromProjectionMatrix(m,L=WebGLCoordinateSystem){const j=this.planes,ee=m.elements,re=ee[0],le=ee[1],ve=ee[2],ye=ee[3],Ee=ee[4],Me=ee[5],Ce=ee[6],De=ee[7],Be=ee[8],ke=ee[9],Fe=ee[10],Oe=ee[11],Ne=ee[12],ze=ee[13],$e=ee[14],He=ee[15];if(j[0].setComponents(ye-re,De-Ee,Oe-Be,He-Ne).normalize(),j[1].setComponents(ye+re,De+Ee,Oe+Be,He+Ne).normalize(),j[2].setComponents(ye+le,De+Me,Oe+ke,He+ze).normalize(),j[3].setComponents(ye-le,De-Me,Oe-ke,He-ze).normalize(),j[4].setComponents(ye-ve,De-Ce,Oe-Fe,He-$e).normalize(),L===WebGLCoordinateSystem)j[5].setComponents(ye+ve,De+Ce,Oe+Fe,He+$e).normalize();else if(L===WebGPUCoordinateSystem)j[5].setComponents(ve,Ce,Fe,$e).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+L);return this}intersectsObject(m){if(m.boundingSphere!==void 0)m.boundingSphere===null&&m.computeBoundingSphere(),_sphere$5.copy(m.boundingSphere).applyMatrix4(m.matrixWorld);else{const L=m.geometry;L.boundingSphere===null&&L.computeBoundingSphere(),_sphere$5.copy(L.boundingSphere).applyMatrix4(m.matrixWorld)}return this.intersectsSphere(_sphere$5)}intersectsSprite(m){return _sphere$5.center.set(0,0,0),_sphere$5.radius=.7071067811865476,_sphere$5.applyMatrix4(m.matrixWorld),this.intersectsSphere(_sphere$5)}intersectsSphere(m){const L=this.planes,j=m.center,ee=-m.radius;for(let re=0;re<6;re++)if(L[re].distanceToPoint(j)<ee)return!1;return!0}intersectsBox(m){const L=this.planes;for(let j=0;j<6;j++){const ee=L[j];if(_vector$7.x=ee.normal.x>0?m.max.x:m.min.x,_vector$7.y=ee.normal.y>0?m.max.y:m.min.y,_vector$7.z=ee.normal.z>0?m.max.z:m.min.z,ee.distanceToPoint(_vector$7)<0)return!1}return!0}containsPoint(m){const L=this.planes;for(let j=0;j<6;j++)if(L[j].distanceToPoint(m)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function WebGLAnimation(){let $=null,m=!1,L=null,j=null;function ee(re,le){L(re,le),j=$.requestAnimationFrame(ee)}return{start:function(){m!==!0&&L!==null&&(j=$.requestAnimationFrame(ee),m=!0)},stop:function(){$.cancelAnimationFrame(j),m=!1},setAnimationLoop:function(re){L=re},setContext:function(re){$=re}}}function WebGLAttributes($){const m=new WeakMap;function L(ve,ye){const Ee=ve.array,Me=ve.usage,Ce=Ee.byteLength,De=$.createBuffer();$.bindBuffer(ye,De),$.bufferData(ye,Ee,Me),ve.onUploadCallback();let Be;if(Ee instanceof Float32Array)Be=$.FLOAT;else if(Ee instanceof Uint16Array)ve.isFloat16BufferAttribute?Be=$.HALF_FLOAT:Be=$.UNSIGNED_SHORT;else if(Ee instanceof Int16Array)Be=$.SHORT;else if(Ee instanceof Uint32Array)Be=$.UNSIGNED_INT;else if(Ee instanceof Int32Array)Be=$.INT;else if(Ee instanceof Int8Array)Be=$.BYTE;else if(Ee instanceof Uint8Array)Be=$.UNSIGNED_BYTE;else if(Ee instanceof Uint8ClampedArray)Be=$.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+Ee);return{buffer:De,type:Be,bytesPerElement:Ee.BYTES_PER_ELEMENT,version:ve.version,size:Ce}}function j(ve,ye,Ee){const Me=ye.array,Ce=ye._updateRange,De=ye.updateRanges;if($.bindBuffer(Ee,ve),Ce.count===-1&&De.length===0&&$.bufferSubData(Ee,0,Me),De.length!==0){for(let Be=0,ke=De.length;Be<ke;Be++){const Fe=De[Be];$.bufferSubData(Ee,Fe.start*Me.BYTES_PER_ELEMENT,Me,Fe.start,Fe.count)}ye.clearUpdateRanges()}Ce.count!==-1&&($.bufferSubData(Ee,Ce.offset*Me.BYTES_PER_ELEMENT,Me,Ce.offset,Ce.count),Ce.count=-1),ye.onUploadCallback()}function ee(ve){return ve.isInterleavedBufferAttribute&&(ve=ve.data),m.get(ve)}function re(ve){ve.isInterleavedBufferAttribute&&(ve=ve.data);const ye=m.get(ve);ye&&($.deleteBuffer(ye.buffer),m.delete(ve))}function le(ve,ye){if(ve.isGLBufferAttribute){const Me=m.get(ve);(!Me||Me.version<ve.version)&&m.set(ve,{buffer:ve.buffer,type:ve.type,bytesPerElement:ve.elementSize,version:ve.version});return}ve.isInterleavedBufferAttribute&&(ve=ve.data);const Ee=m.get(ve);if(Ee===void 0)m.set(ve,L(ve,ye));else if(Ee.version<ve.version){if(Ee.size!==ve.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");j(Ee.buffer,ve,ye),Ee.version=ve.version}}return{get:ee,remove:re,update:le}}class PlaneGeometry extends BufferGeometry{constructor(m=1,L=1,j=1,ee=1){super(),this.type="PlaneGeometry",this.parameters={width:m,height:L,widthSegments:j,heightSegments:ee};const re=m/2,le=L/2,ve=Math.floor(j),ye=Math.floor(ee),Ee=ve+1,Me=ye+1,Ce=m/ve,De=L/ye,Be=[],ke=[],Fe=[],Oe=[];for(let Ne=0;Ne<Me;Ne++){const ze=Ne*De-le;for(let $e=0;$e<Ee;$e++){const He=$e*Ce-re;ke.push(He,-ze,0),Fe.push(0,0,1),Oe.push($e/ve),Oe.push(1-Ne/ye)}}for(let Ne=0;Ne<ye;Ne++)for(let ze=0;ze<ve;ze++){const $e=ze+Ee*Ne,He=ze+Ee*(Ne+1),We=ze+1+Ee*(Ne+1),qe=ze+1+Ee*Ne;Be.push($e,He,qe),Be.push(He,We,qe)}this.setIndex(Be),this.setAttribute("position",new Float32BufferAttribute(ke,3)),this.setAttribute("normal",new Float32BufferAttribute(Fe,3)),this.setAttribute("uv",new Float32BufferAttribute(Oe,2))}copy(m){return super.copy(m),this.parameters=Object.assign({},m.parameters),this}static fromJSON(m){return new PlaneGeometry(m.width,m.height,m.widthSegments,m.heightSegments)}}var alphahash_fragment=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,alphahash_pars_fragment=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,alphamap_fragment=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,alphamap_pars_fragment=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,alphatest_fragment=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,alphatest_pars_fragment=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,aomap_fragment=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,aomap_pars_fragment=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,batching_pars_vertex=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,batching_vertex=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,begin_vertex=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,beginnormal_vertex=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bsdfs=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,iridescence_fragment=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,bumpmap_pars_fragment=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,clipping_planes_fragment=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,clipping_planes_pars_fragment=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,clipping_planes_pars_vertex=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,clipping_planes_vertex=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,color_fragment=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,color_pars_fragment=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,color_pars_vertex=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,color_vertex=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( batchId );
	vColor.xyz *= batchingColor.xyz;
#endif`,common=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,cube_uv_reflection_fragment=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,defaultnormal_vertex=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,displacementmap_pars_vertex=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,displacementmap_vertex=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,emissivemap_fragment=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,emissivemap_pars_fragment=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,colorspace_fragment="gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,envmap_fragment=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,envmap_common_pars_fragment=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,envmap_pars_fragment=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,envmap_pars_vertex=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,envmap_vertex=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fog_vertex=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,fog_pars_vertex=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,fog_fragment=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fog_pars_fragment=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,gradientmap_pars_fragment=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,lightmap_pars_fragment=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lights_lambert_fragment=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,lights_lambert_pars_fragment=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,lights_pars_begin=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,envmap_physical_pars_fragment=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,lights_toon_fragment=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,lights_toon_pars_fragment=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,lights_phong_fragment=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_phong_pars_fragment=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,lights_physical_fragment=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,lights_physical_pars_fragment=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lights_fragment_begin=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lights_fragment_maps=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,lights_fragment_end=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,logdepthbuf_fragment=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,logdepthbuf_pars_fragment=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_pars_vertex=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_vertex=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,map_fragment=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,map_pars_fragment=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,map_particle_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,map_particle_pars_fragment=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,metalnessmap_fragment=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,metalnessmap_pars_fragment=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,morphinstance_vertex=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,morphcolor_vertex=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,morphnormal_vertex=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,morphtarget_pars_vertex=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,morphtarget_vertex=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,normal_fragment_begin=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,normal_fragment_maps=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,normal_pars_fragment=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_pars_vertex=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_vertex=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,normalmap_pars_fragment=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,clearcoat_normal_fragment_begin=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,clearcoat_normal_fragment_maps=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,clearcoat_pars_fragment=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,iridescence_pars_fragment=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,opaque_fragment=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,packing=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,premultiplied_alpha_fragment=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,project_vertex=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,dithering_fragment=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dithering_pars_fragment=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,roughnessmap_fragment=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,roughnessmap_pars_fragment=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,shadowmap_pars_fragment=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return shadow;
	}
#endif`,shadowmap_pars_vertex=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,shadowmap_vertex=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,shadowmask_pars_fragment=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,skinbase_vertex=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,skinning_pars_vertex=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,skinning_vertex=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,skinnormal_vertex=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,specularmap_fragment=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,specularmap_pars_fragment=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tonemapping_fragment=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tonemapping_pars_fragment=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,transmission_fragment=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,transmission_pars_fragment=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,uv_pars_fragment=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,uv_pars_vertex=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,uv_vertex=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,worldpos_vertex=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const vertex$h=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,fragment$h=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$g=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fragment$g=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$f=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fragment$f=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$e=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,fragment$e=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,vertex$d=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,fragment$d=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,vertex$c=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,fragment$c=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$b=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fragment$b=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vertex$a=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,fragment$a=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$9=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$9=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$8=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,fragment$8=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$7=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,fragment$7=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,vertex$6=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$6=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$5=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,fragment$5=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$4=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$4=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$3=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,fragment$3=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vertex$2=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$2=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,vertex$1=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fragment$1=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,ShaderChunk={alphahash_fragment,alphahash_pars_fragment,alphamap_fragment,alphamap_pars_fragment,alphatest_fragment,alphatest_pars_fragment,aomap_fragment,aomap_pars_fragment,batching_pars_vertex,batching_vertex,begin_vertex,beginnormal_vertex,bsdfs,iridescence_fragment,bumpmap_pars_fragment,clipping_planes_fragment,clipping_planes_pars_fragment,clipping_planes_pars_vertex,clipping_planes_vertex,color_fragment,color_pars_fragment,color_pars_vertex,color_vertex,common,cube_uv_reflection_fragment,defaultnormal_vertex,displacementmap_pars_vertex,displacementmap_vertex,emissivemap_fragment,emissivemap_pars_fragment,colorspace_fragment,colorspace_pars_fragment,envmap_fragment,envmap_common_pars_fragment,envmap_pars_fragment,envmap_pars_vertex,envmap_physical_pars_fragment,envmap_vertex,fog_vertex,fog_pars_vertex,fog_fragment,fog_pars_fragment,gradientmap_pars_fragment,lightmap_pars_fragment,lights_lambert_fragment,lights_lambert_pars_fragment,lights_pars_begin,lights_toon_fragment,lights_toon_pars_fragment,lights_phong_fragment,lights_phong_pars_fragment,lights_physical_fragment,lights_physical_pars_fragment,lights_fragment_begin,lights_fragment_maps,lights_fragment_end,logdepthbuf_fragment,logdepthbuf_pars_fragment,logdepthbuf_pars_vertex,logdepthbuf_vertex,map_fragment,map_pars_fragment,map_particle_fragment,map_particle_pars_fragment,metalnessmap_fragment,metalnessmap_pars_fragment,morphinstance_vertex,morphcolor_vertex,morphnormal_vertex,morphtarget_pars_vertex,morphtarget_vertex,normal_fragment_begin,normal_fragment_maps,normal_pars_fragment,normal_pars_vertex,normal_vertex,normalmap_pars_fragment,clearcoat_normal_fragment_begin,clearcoat_normal_fragment_maps,clearcoat_pars_fragment,iridescence_pars_fragment,opaque_fragment,packing,premultiplied_alpha_fragment,project_vertex,dithering_fragment,dithering_pars_fragment,roughnessmap_fragment,roughnessmap_pars_fragment,shadowmap_pars_fragment,shadowmap_pars_vertex,shadowmap_vertex,shadowmask_pars_fragment,skinbase_vertex,skinning_pars_vertex,skinning_vertex,skinnormal_vertex,specularmap_fragment,specularmap_pars_fragment,tonemapping_fragment,tonemapping_pars_fragment,transmission_fragment,transmission_pars_fragment,uv_pars_fragment,uv_pars_vertex,uv_vertex,worldpos_vertex,background_vert:vertex$h,background_frag:fragment$h,backgroundCube_vert:vertex$g,backgroundCube_frag:fragment$g,cube_vert:vertex$f,cube_frag:fragment$f,depth_vert:vertex$e,depth_frag:fragment$e,distanceRGBA_vert:vertex$d,distanceRGBA_frag:fragment$d,equirect_vert:vertex$c,equirect_frag:fragment$c,linedashed_vert:vertex$b,linedashed_frag:fragment$b,meshbasic_vert:vertex$a,meshbasic_frag:fragment$a,meshlambert_vert:vertex$9,meshlambert_frag:fragment$9,meshmatcap_vert:vertex$8,meshmatcap_frag:fragment$8,meshnormal_vert:vertex$7,meshnormal_frag:fragment$7,meshphong_vert:vertex$6,meshphong_frag:fragment$6,meshphysical_vert:vertex$5,meshphysical_frag:fragment$5,meshtoon_vert:vertex$4,meshtoon_frag:fragment$4,points_vert:vertex$3,points_frag:fragment$3,shadow_vert:vertex$2,shadow_frag:fragment$2,sprite_vert:vertex$1,sprite_frag:fragment$1},UniformsLib={common:{diffuse:{value:new Color(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Matrix3},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Matrix3}},envmap:{envMap:{value:null},envMapRotation:{value:new Matrix3},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Matrix3}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Matrix3}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Matrix3},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Matrix3},normalScale:{value:new Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Matrix3},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Matrix3}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Matrix3}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Matrix3}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Color(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Color(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0},uvTransform:{value:new Matrix3}},sprite:{diffuse:{value:new Color(16777215)},opacity:{value:1},center:{value:new Vector2(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Matrix3},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0}}},ShaderLib={basic:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.fog]),vertexShader:ShaderChunk.meshbasic_vert,fragmentShader:ShaderChunk.meshbasic_frag},lambert:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshlambert_vert,fragmentShader:ShaderChunk.meshlambert_frag},phong:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshphong_vert,fragmentShader:ShaderChunk.meshphong_frag},standard:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.roughnessmap,UniformsLib.metalnessmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag},toon:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.gradientmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshtoon_vert,fragmentShader:ShaderChunk.meshtoon_frag},matcap:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,{matcap:{value:null}}]),vertexShader:ShaderChunk.meshmatcap_vert,fragmentShader:ShaderChunk.meshmatcap_frag},points:{uniforms:mergeUniforms([UniformsLib.points,UniformsLib.fog]),vertexShader:ShaderChunk.points_vert,fragmentShader:ShaderChunk.points_frag},dashed:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ShaderChunk.linedashed_vert,fragmentShader:ShaderChunk.linedashed_frag},depth:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap]),vertexShader:ShaderChunk.depth_vert,fragmentShader:ShaderChunk.depth_frag},normal:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.meshnormal_vert,fragmentShader:ShaderChunk.meshnormal_frag},sprite:{uniforms:mergeUniforms([UniformsLib.sprite,UniformsLib.fog]),vertexShader:ShaderChunk.sprite_vert,fragmentShader:ShaderChunk.sprite_frag},background:{uniforms:{uvTransform:{value:new Matrix3},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ShaderChunk.background_vert,fragmentShader:ShaderChunk.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Matrix3}},vertexShader:ShaderChunk.backgroundCube_vert,fragmentShader:ShaderChunk.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ShaderChunk.cube_vert,fragmentShader:ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ShaderChunk.equirect_vert,fragmentShader:ShaderChunk.equirect_frag},distanceRGBA:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap,{referencePosition:{value:new Vector3},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ShaderChunk.distanceRGBA_vert,fragmentShader:ShaderChunk.distanceRGBA_frag},shadow:{uniforms:mergeUniforms([UniformsLib.lights,UniformsLib.fog,{color:{value:new Color(0)},opacity:{value:1}}]),vertexShader:ShaderChunk.shadow_vert,fragmentShader:ShaderChunk.shadow_frag}};ShaderLib.physical={uniforms:mergeUniforms([ShaderLib.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Matrix3},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Matrix3},clearcoatNormalScale:{value:new Vector2(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Matrix3},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Matrix3},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Matrix3},sheen:{value:0},sheenColor:{value:new Color(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Matrix3},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Matrix3},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Matrix3},transmissionSamplerSize:{value:new Vector2},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Matrix3},attenuationDistance:{value:0},attenuationColor:{value:new Color(0)},specularColor:{value:new Color(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Matrix3},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Matrix3},anisotropyVector:{value:new Vector2},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Matrix3}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag};const _rgb={r:0,b:0,g:0},_e1$1=new Euler,_m1$1=new Matrix4;function WebGLBackground($,m,L,j,ee,re,le){const ve=new Color(0);let ye=re===!0?0:1,Ee,Me,Ce=null,De=0,Be=null;function ke(ze){let $e=ze.isScene===!0?ze.background:null;return $e&&$e.isTexture&&($e=(ze.backgroundBlurriness>0?L:m).get($e)),$e}function Fe(ze){let $e=!1;const He=ke(ze);He===null?Ne(ve,ye):He&&He.isColor&&(Ne(He,1),$e=!0);const We=$.xr.getEnvironmentBlendMode();We==="additive"?j.buffers.color.setClear(0,0,0,1,le):We==="alpha-blend"&&j.buffers.color.setClear(0,0,0,0,le),($.autoClear||$e)&&(j.buffers.depth.setTest(!0),j.buffers.depth.setMask(!0),j.buffers.color.setMask(!0),$.clear($.autoClearColor,$.autoClearDepth,$.autoClearStencil))}function Oe(ze,$e){const He=ke($e);He&&(He.isCubeTexture||He.mapping===CubeUVReflectionMapping)?(Me===void 0&&(Me=new Mesh(new BoxGeometry(1,1,1),new ShaderMaterial({name:"BackgroundCubeMaterial",uniforms:cloneUniforms(ShaderLib.backgroundCube.uniforms),vertexShader:ShaderLib.backgroundCube.vertexShader,fragmentShader:ShaderLib.backgroundCube.fragmentShader,side:BackSide,depthTest:!1,depthWrite:!1,fog:!1})),Me.geometry.deleteAttribute("normal"),Me.geometry.deleteAttribute("uv"),Me.onBeforeRender=function(We,qe,Ye){this.matrixWorld.copyPosition(Ye.matrixWorld)},Object.defineProperty(Me.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),ee.update(Me)),_e1$1.copy($e.backgroundRotation),_e1$1.x*=-1,_e1$1.y*=-1,_e1$1.z*=-1,He.isCubeTexture&&He.isRenderTargetTexture===!1&&(_e1$1.y*=-1,_e1$1.z*=-1),Me.material.uniforms.envMap.value=He,Me.material.uniforms.flipEnvMap.value=He.isCubeTexture&&He.isRenderTargetTexture===!1?-1:1,Me.material.uniforms.backgroundBlurriness.value=$e.backgroundBlurriness,Me.material.uniforms.backgroundIntensity.value=$e.backgroundIntensity,Me.material.uniforms.backgroundRotation.value.setFromMatrix4(_m1$1.makeRotationFromEuler(_e1$1)),Me.material.toneMapped=ColorManagement.getTransfer(He.colorSpace)!==SRGBTransfer,(Ce!==He||De!==He.version||Be!==$.toneMapping)&&(Me.material.needsUpdate=!0,Ce=He,De=He.version,Be=$.toneMapping),Me.layers.enableAll(),ze.unshift(Me,Me.geometry,Me.material,0,0,null)):He&&He.isTexture&&(Ee===void 0&&(Ee=new Mesh(new PlaneGeometry(2,2),new ShaderMaterial({name:"BackgroundMaterial",uniforms:cloneUniforms(ShaderLib.background.uniforms),vertexShader:ShaderLib.background.vertexShader,fragmentShader:ShaderLib.background.fragmentShader,side:FrontSide,depthTest:!1,depthWrite:!1,fog:!1})),Ee.geometry.deleteAttribute("normal"),Object.defineProperty(Ee.material,"map",{get:function(){return this.uniforms.t2D.value}}),ee.update(Ee)),Ee.material.uniforms.t2D.value=He,Ee.material.uniforms.backgroundIntensity.value=$e.backgroundIntensity,Ee.material.toneMapped=ColorManagement.getTransfer(He.colorSpace)!==SRGBTransfer,He.matrixAutoUpdate===!0&&He.updateMatrix(),Ee.material.uniforms.uvTransform.value.copy(He.matrix),(Ce!==He||De!==He.version||Be!==$.toneMapping)&&(Ee.material.needsUpdate=!0,Ce=He,De=He.version,Be=$.toneMapping),Ee.layers.enableAll(),ze.unshift(Ee,Ee.geometry,Ee.material,0,0,null))}function Ne(ze,$e){ze.getRGB(_rgb,getUnlitUniformColorSpace($)),j.buffers.color.setClear(_rgb.r,_rgb.g,_rgb.b,$e,le)}return{getClearColor:function(){return ve},setClearColor:function(ze,$e=1){ve.set(ze),ye=$e,Ne(ve,ye)},getClearAlpha:function(){return ye},setClearAlpha:function(ze){ye=ze,Ne(ve,ye)},render:Fe,addToRenderList:Oe}}function WebGLBindingStates($,m){const L=$.getParameter($.MAX_VERTEX_ATTRIBS),j={},ee=De(null);let re=ee,le=!1;function ve(rt,ft,mt,Et,bt){let Ct=!1;const st=Ce(Et,mt,ft);re!==st&&(re=st,Ee(re.object)),Ct=Be(rt,Et,mt,bt),Ct&&ke(rt,Et,mt,bt),bt!==null&&m.update(bt,$.ELEMENT_ARRAY_BUFFER),(Ct||le)&&(le=!1,He(rt,ft,mt,Et),bt!==null&&$.bindBuffer($.ELEMENT_ARRAY_BUFFER,m.get(bt).buffer))}function ye(){return $.createVertexArray()}function Ee(rt){return $.bindVertexArray(rt)}function Me(rt){return $.deleteVertexArray(rt)}function Ce(rt,ft,mt){const Et=mt.wireframe===!0;let bt=j[rt.id];bt===void 0&&(bt={},j[rt.id]=bt);let Ct=bt[ft.id];Ct===void 0&&(Ct={},bt[ft.id]=Ct);let st=Ct[Et];return st===void 0&&(st=De(ye()),Ct[Et]=st),st}function De(rt){const ft=[],mt=[],Et=[];for(let bt=0;bt<L;bt++)ft[bt]=0,mt[bt]=0,Et[bt]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:ft,enabledAttributes:mt,attributeDivisors:Et,object:rt,attributes:{},index:null}}function Be(rt,ft,mt,Et){const bt=re.attributes,Ct=ft.attributes;let st=0;const at=mt.getAttributes();for(const Xe in at)if(at[Xe].location>=0){const Bt=bt[Xe];let Dt=Ct[Xe];if(Dt===void 0&&(Xe==="instanceMatrix"&&rt.instanceMatrix&&(Dt=rt.instanceMatrix),Xe==="instanceColor"&&rt.instanceColor&&(Dt=rt.instanceColor)),Bt===void 0||Bt.attribute!==Dt||Dt&&Bt.data!==Dt.data)return!0;st++}return re.attributesNum!==st||re.index!==Et}function ke(rt,ft,mt,Et){const bt={},Ct=ft.attributes;let st=0;const at=mt.getAttributes();for(const Xe in at)if(at[Xe].location>=0){let Bt=Ct[Xe];Bt===void 0&&(Xe==="instanceMatrix"&&rt.instanceMatrix&&(Bt=rt.instanceMatrix),Xe==="instanceColor"&&rt.instanceColor&&(Bt=rt.instanceColor));const Dt={};Dt.attribute=Bt,Bt&&Bt.data&&(Dt.data=Bt.data),bt[Xe]=Dt,st++}re.attributes=bt,re.attributesNum=st,re.index=Et}function Fe(){const rt=re.newAttributes;for(let ft=0,mt=rt.length;ft<mt;ft++)rt[ft]=0}function Oe(rt){Ne(rt,0)}function Ne(rt,ft){const mt=re.newAttributes,Et=re.enabledAttributes,bt=re.attributeDivisors;mt[rt]=1,Et[rt]===0&&($.enableVertexAttribArray(rt),Et[rt]=1),bt[rt]!==ft&&($.vertexAttribDivisor(rt,ft),bt[rt]=ft)}function ze(){const rt=re.newAttributes,ft=re.enabledAttributes;for(let mt=0,Et=ft.length;mt<Et;mt++)ft[mt]!==rt[mt]&&($.disableVertexAttribArray(mt),ft[mt]=0)}function $e(rt,ft,mt,Et,bt,Ct,st){st===!0?$.vertexAttribIPointer(rt,ft,mt,bt,Ct):$.vertexAttribPointer(rt,ft,mt,Et,bt,Ct)}function He(rt,ft,mt,Et){Fe();const bt=Et.attributes,Ct=mt.getAttributes(),st=ft.defaultAttributeValues;for(const at in Ct){const Xe=Ct[at];if(Xe.location>=0){let ht=bt[at];if(ht===void 0&&(at==="instanceMatrix"&&rt.instanceMatrix&&(ht=rt.instanceMatrix),at==="instanceColor"&&rt.instanceColor&&(ht=rt.instanceColor)),ht!==void 0){const Bt=ht.normalized,Dt=ht.itemSize,Jt=m.get(ht);if(Jt===void 0)continue;const tn=Jt.buffer,zt=Jt.type,Vt=Jt.bytesPerElement,Mt=zt===$.INT||zt===$.UNSIGNED_INT||ht.gpuType===IntType;if(ht.isInterleavedBufferAttribute){const Tt=ht.data,qt=Tt.stride,on=ht.offset;if(Tt.isInstancedInterleavedBuffer){for(let pn=0;pn<Xe.locationSize;pn++)Ne(Xe.location+pn,Tt.meshPerAttribute);rt.isInstancedMesh!==!0&&Et._maxInstanceCount===void 0&&(Et._maxInstanceCount=Tt.meshPerAttribute*Tt.count)}else for(let pn=0;pn<Xe.locationSize;pn++)Oe(Xe.location+pn);$.bindBuffer($.ARRAY_BUFFER,tn);for(let pn=0;pn<Xe.locationSize;pn++)$e(Xe.location+pn,Dt/Xe.locationSize,zt,Bt,qt*Vt,(on+Dt/Xe.locationSize*pn)*Vt,Mt)}else{if(ht.isInstancedBufferAttribute){for(let Tt=0;Tt<Xe.locationSize;Tt++)Ne(Xe.location+Tt,ht.meshPerAttribute);rt.isInstancedMesh!==!0&&Et._maxInstanceCount===void 0&&(Et._maxInstanceCount=ht.meshPerAttribute*ht.count)}else for(let Tt=0;Tt<Xe.locationSize;Tt++)Oe(Xe.location+Tt);$.bindBuffer($.ARRAY_BUFFER,tn);for(let Tt=0;Tt<Xe.locationSize;Tt++)$e(Xe.location+Tt,Dt/Xe.locationSize,zt,Bt,Dt*Vt,Dt/Xe.locationSize*Tt*Vt,Mt)}}else if(st!==void 0){const Bt=st[at];if(Bt!==void 0)switch(Bt.length){case 2:$.vertexAttrib2fv(Xe.location,Bt);break;case 3:$.vertexAttrib3fv(Xe.location,Bt);break;case 4:$.vertexAttrib4fv(Xe.location,Bt);break;default:$.vertexAttrib1fv(Xe.location,Bt)}}}}ze()}function We(){Ze();for(const rt in j){const ft=j[rt];for(const mt in ft){const Et=ft[mt];for(const bt in Et)Me(Et[bt].object),delete Et[bt];delete ft[mt]}delete j[rt]}}function qe(rt){if(j[rt.id]===void 0)return;const ft=j[rt.id];for(const mt in ft){const Et=ft[mt];for(const bt in Et)Me(Et[bt].object),delete Et[bt];delete ft[mt]}delete j[rt.id]}function Ye(rt){for(const ft in j){const mt=j[ft];if(mt[rt.id]===void 0)continue;const Et=mt[rt.id];for(const bt in Et)Me(Et[bt].object),delete Et[bt];delete mt[rt.id]}}function Ze(){Ke(),le=!0,re!==ee&&(re=ee,Ee(re.object))}function Ke(){ee.geometry=null,ee.program=null,ee.wireframe=!1}return{setup:ve,reset:Ze,resetDefaultState:Ke,dispose:We,releaseStatesOfGeometry:qe,releaseStatesOfProgram:Ye,initAttributes:Fe,enableAttribute:Oe,disableUnusedAttributes:ze}}function WebGLBufferRenderer($,m,L){let j;function ee(Ee){j=Ee}function re(Ee,Me){$.drawArrays(j,Ee,Me),L.update(Me,j,1)}function le(Ee,Me,Ce){Ce!==0&&($.drawArraysInstanced(j,Ee,Me,Ce),L.update(Me,j,Ce))}function ve(Ee,Me,Ce){if(Ce===0)return;const De=m.get("WEBGL_multi_draw");if(De===null)for(let Be=0;Be<Ce;Be++)this.render(Ee[Be],Me[Be]);else{De.multiDrawArraysWEBGL(j,Ee,0,Me,0,Ce);let Be=0;for(let ke=0;ke<Ce;ke++)Be+=Me[ke];L.update(Be,j,1)}}function ye(Ee,Me,Ce,De){if(Ce===0)return;const Be=m.get("WEBGL_multi_draw");if(Be===null)for(let ke=0;ke<Ee.length;ke++)le(Ee[ke],Me[ke],De[ke]);else{Be.multiDrawArraysInstancedWEBGL(j,Ee,0,Me,0,De,0,Ce);let ke=0;for(let Fe=0;Fe<Ce;Fe++)ke+=Me[Fe];for(let Fe=0;Fe<De.length;Fe++)L.update(ke,j,De[Fe])}}this.setMode=ee,this.render=re,this.renderInstances=le,this.renderMultiDraw=ve,this.renderMultiDrawInstances=ye}function WebGLCapabilities($,m,L,j){let ee;function re(){if(ee!==void 0)return ee;if(m.has("EXT_texture_filter_anisotropic")===!0){const qe=m.get("EXT_texture_filter_anisotropic");ee=$.getParameter(qe.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else ee=0;return ee}function le(qe){return!(qe!==RGBAFormat&&j.convert(qe)!==$.getParameter($.IMPLEMENTATION_COLOR_READ_FORMAT))}function ve(qe){const Ye=qe===HalfFloatType&&(m.has("EXT_color_buffer_half_float")||m.has("EXT_color_buffer_float"));return!(qe!==UnsignedByteType&&j.convert(qe)!==$.getParameter($.IMPLEMENTATION_COLOR_READ_TYPE)&&qe!==FloatType&&!Ye)}function ye(qe){if(qe==="highp"){if($.getShaderPrecisionFormat($.VERTEX_SHADER,$.HIGH_FLOAT).precision>0&&$.getShaderPrecisionFormat($.FRAGMENT_SHADER,$.HIGH_FLOAT).precision>0)return"highp";qe="mediump"}return qe==="mediump"&&$.getShaderPrecisionFormat($.VERTEX_SHADER,$.MEDIUM_FLOAT).precision>0&&$.getShaderPrecisionFormat($.FRAGMENT_SHADER,$.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let Ee=L.precision!==void 0?L.precision:"highp";const Me=ye(Ee);Me!==Ee&&(console.warn("THREE.WebGLRenderer:",Ee,"not supported, using",Me,"instead."),Ee=Me);const Ce=L.logarithmicDepthBuffer===!0,De=$.getParameter($.MAX_TEXTURE_IMAGE_UNITS),Be=$.getParameter($.MAX_VERTEX_TEXTURE_IMAGE_UNITS),ke=$.getParameter($.MAX_TEXTURE_SIZE),Fe=$.getParameter($.MAX_CUBE_MAP_TEXTURE_SIZE),Oe=$.getParameter($.MAX_VERTEX_ATTRIBS),Ne=$.getParameter($.MAX_VERTEX_UNIFORM_VECTORS),ze=$.getParameter($.MAX_VARYING_VECTORS),$e=$.getParameter($.MAX_FRAGMENT_UNIFORM_VECTORS),He=Be>0,We=$.getParameter($.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:re,getMaxPrecision:ye,textureFormatReadable:le,textureTypeReadable:ve,precision:Ee,logarithmicDepthBuffer:Ce,maxTextures:De,maxVertexTextures:Be,maxTextureSize:ke,maxCubemapSize:Fe,maxAttributes:Oe,maxVertexUniforms:Ne,maxVaryings:ze,maxFragmentUniforms:$e,vertexTextures:He,maxSamples:We}}function WebGLClipping($){const m=this;let L=null,j=0,ee=!1,re=!1;const le=new Plane,ve=new Matrix3,ye={value:null,needsUpdate:!1};this.uniform=ye,this.numPlanes=0,this.numIntersection=0,this.init=function(Ce,De){const Be=Ce.length!==0||De||j!==0||ee;return ee=De,j=Ce.length,Be},this.beginShadows=function(){re=!0,Me(null)},this.endShadows=function(){re=!1},this.setGlobalState=function(Ce,De){L=Me(Ce,De,0)},this.setState=function(Ce,De,Be){const ke=Ce.clippingPlanes,Fe=Ce.clipIntersection,Oe=Ce.clipShadows,Ne=$.get(Ce);if(!ee||ke===null||ke.length===0||re&&!Oe)re?Me(null):Ee();else{const ze=re?0:j,$e=ze*4;let He=Ne.clippingState||null;ye.value=He,He=Me(ke,De,$e,Be);for(let We=0;We!==$e;++We)He[We]=L[We];Ne.clippingState=He,this.numIntersection=Fe?this.numPlanes:0,this.numPlanes+=ze}};function Ee(){ye.value!==L&&(ye.value=L,ye.needsUpdate=j>0),m.numPlanes=j,m.numIntersection=0}function Me(Ce,De,Be,ke){const Fe=Ce!==null?Ce.length:0;let Oe=null;if(Fe!==0){if(Oe=ye.value,ke!==!0||Oe===null){const Ne=Be+Fe*4,ze=De.matrixWorldInverse;ve.getNormalMatrix(ze),(Oe===null||Oe.length<Ne)&&(Oe=new Float32Array(Ne));for(let $e=0,He=Be;$e!==Fe;++$e,He+=4)le.copy(Ce[$e]).applyMatrix4(ze,ve),le.normal.toArray(Oe,He),Oe[He+3]=le.constant}ye.value=Oe,ye.needsUpdate=!0}return m.numPlanes=Fe,m.numIntersection=0,Oe}}function WebGLCubeMaps($){let m=new WeakMap;function L(le,ve){return ve===EquirectangularReflectionMapping?le.mapping=CubeReflectionMapping:ve===EquirectangularRefractionMapping&&(le.mapping=CubeRefractionMapping),le}function j(le){if(le&&le.isTexture){const ve=le.mapping;if(ve===EquirectangularReflectionMapping||ve===EquirectangularRefractionMapping)if(m.has(le)){const ye=m.get(le).texture;return L(ye,le.mapping)}else{const ye=le.image;if(ye&&ye.height>0){const Ee=new WebGLCubeRenderTarget(ye.height);return Ee.fromEquirectangularTexture($,le),m.set(le,Ee),le.addEventListener("dispose",ee),L(Ee.texture,le.mapping)}else return null}}return le}function ee(le){const ve=le.target;ve.removeEventListener("dispose",ee);const ye=m.get(ve);ye!==void 0&&(m.delete(ve),ye.dispose())}function re(){m=new WeakMap}return{get:j,dispose:re}}class OrthographicCamera extends Camera{constructor(m=-1,L=1,j=1,ee=-1,re=.1,le=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=m,this.right=L,this.top=j,this.bottom=ee,this.near=re,this.far=le,this.updateProjectionMatrix()}copy(m,L){return super.copy(m,L),this.left=m.left,this.right=m.right,this.top=m.top,this.bottom=m.bottom,this.near=m.near,this.far=m.far,this.zoom=m.zoom,this.view=m.view===null?null:Object.assign({},m.view),this}setViewOffset(m,L,j,ee,re,le){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=m,this.view.fullHeight=L,this.view.offsetX=j,this.view.offsetY=ee,this.view.width=re,this.view.height=le,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const m=(this.right-this.left)/(2*this.zoom),L=(this.top-this.bottom)/(2*this.zoom),j=(this.right+this.left)/2,ee=(this.top+this.bottom)/2;let re=j-m,le=j+m,ve=ee+L,ye=ee-L;if(this.view!==null&&this.view.enabled){const Ee=(this.right-this.left)/this.view.fullWidth/this.zoom,Me=(this.top-this.bottom)/this.view.fullHeight/this.zoom;re+=Ee*this.view.offsetX,le=re+Ee*this.view.width,ve-=Me*this.view.offsetY,ye=ve-Me*this.view.height}this.projectionMatrix.makeOrthographic(re,le,ve,ye,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(m){const L=super.toJSON(m);return L.object.zoom=this.zoom,L.object.left=this.left,L.object.right=this.right,L.object.top=this.top,L.object.bottom=this.bottom,L.object.near=this.near,L.object.far=this.far,this.view!==null&&(L.object.view=Object.assign({},this.view)),L}}const LOD_MIN=4,EXTRA_LOD_SIGMA=[.125,.215,.35,.446,.526,.582],MAX_SAMPLES=20,_flatCamera=new OrthographicCamera,_clearColor=new Color;let _oldTarget=null,_oldActiveCubeFace=0,_oldActiveMipmapLevel=0,_oldXrEnabled=!1;const PHI=(1+Math.sqrt(5))/2,INV_PHI=1/PHI,_axisDirections=[new Vector3(-PHI,INV_PHI,0),new Vector3(PHI,INV_PHI,0),new Vector3(-INV_PHI,0,PHI),new Vector3(INV_PHI,0,PHI),new Vector3(0,PHI,-INV_PHI),new Vector3(0,PHI,INV_PHI),new Vector3(-1,1,-1),new Vector3(1,1,-1),new Vector3(-1,1,1),new Vector3(1,1,1)];class PMREMGenerator{constructor(m){this._renderer=m,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(m,L=0,j=.1,ee=100){_oldTarget=this._renderer.getRenderTarget(),_oldActiveCubeFace=this._renderer.getActiveCubeFace(),_oldActiveMipmapLevel=this._renderer.getActiveMipmapLevel(),_oldXrEnabled=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const re=this._allocateTargets();return re.depthBuffer=!0,this._sceneToCubeUV(m,j,ee,re),L>0&&this._blur(re,0,0,L),this._applyPMREM(re),this._cleanup(re),re}fromEquirectangular(m,L=null){return this._fromTexture(m,L)}fromCubemap(m,L=null){return this._fromTexture(m,L)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=_getCubemapMaterial(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=_getEquirectMaterial(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(m){this._lodMax=Math.floor(Math.log2(m)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let m=0;m<this._lodPlanes.length;m++)this._lodPlanes[m].dispose()}_cleanup(m){this._renderer.setRenderTarget(_oldTarget,_oldActiveCubeFace,_oldActiveMipmapLevel),this._renderer.xr.enabled=_oldXrEnabled,m.scissorTest=!1,_setViewport(m,0,0,m.width,m.height)}_fromTexture(m,L){m.mapping===CubeReflectionMapping||m.mapping===CubeRefractionMapping?this._setSize(m.image.length===0?16:m.image[0].width||m.image[0].image.width):this._setSize(m.image.width/4),_oldTarget=this._renderer.getRenderTarget(),_oldActiveCubeFace=this._renderer.getActiveCubeFace(),_oldActiveMipmapLevel=this._renderer.getActiveMipmapLevel(),_oldXrEnabled=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const j=L||this._allocateTargets();return this._textureToCubeUV(m,j),this._applyPMREM(j),this._cleanup(j),j}_allocateTargets(){const m=3*Math.max(this._cubeSize,112),L=4*this._cubeSize,j={magFilter:LinearFilter,minFilter:LinearFilter,generateMipmaps:!1,type:HalfFloatType,format:RGBAFormat,colorSpace:LinearSRGBColorSpace,depthBuffer:!1},ee=_createRenderTarget(m,L,j);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==m||this._pingPongRenderTarget.height!==L){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=_createRenderTarget(m,L,j);const{_lodMax:re}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=_createPlanes(re)),this._blurMaterial=_getBlurShader(re,m,L)}return ee}_compileMaterial(m){const L=new Mesh(this._lodPlanes[0],m);this._renderer.compile(L,_flatCamera)}_sceneToCubeUV(m,L,j,ee){const ve=new PerspectiveCamera(90,1,L,j),ye=[1,-1,1,1,1,1],Ee=[1,1,1,-1,-1,-1],Me=this._renderer,Ce=Me.autoClear,De=Me.toneMapping;Me.getClearColor(_clearColor),Me.toneMapping=NoToneMapping,Me.autoClear=!1;const Be=new MeshBasicMaterial({name:"PMREM.Background",side:BackSide,depthWrite:!1,depthTest:!1}),ke=new Mesh(new BoxGeometry,Be);let Fe=!1;const Oe=m.background;Oe?Oe.isColor&&(Be.color.copy(Oe),m.background=null,Fe=!0):(Be.color.copy(_clearColor),Fe=!0);for(let Ne=0;Ne<6;Ne++){const ze=Ne%3;ze===0?(ve.up.set(0,ye[Ne],0),ve.lookAt(Ee[Ne],0,0)):ze===1?(ve.up.set(0,0,ye[Ne]),ve.lookAt(0,Ee[Ne],0)):(ve.up.set(0,ye[Ne],0),ve.lookAt(0,0,Ee[Ne]));const $e=this._cubeSize;_setViewport(ee,ze*$e,Ne>2?$e:0,$e,$e),Me.setRenderTarget(ee),Fe&&Me.render(ke,ve),Me.render(m,ve)}ke.geometry.dispose(),ke.material.dispose(),Me.toneMapping=De,Me.autoClear=Ce,m.background=Oe}_textureToCubeUV(m,L){const j=this._renderer,ee=m.mapping===CubeReflectionMapping||m.mapping===CubeRefractionMapping;ee?(this._cubemapMaterial===null&&(this._cubemapMaterial=_getCubemapMaterial()),this._cubemapMaterial.uniforms.flipEnvMap.value=m.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=_getEquirectMaterial());const re=ee?this._cubemapMaterial:this._equirectMaterial,le=new Mesh(this._lodPlanes[0],re),ve=re.uniforms;ve.envMap.value=m;const ye=this._cubeSize;_setViewport(L,0,0,3*ye,2*ye),j.setRenderTarget(L),j.render(le,_flatCamera)}_applyPMREM(m){const L=this._renderer,j=L.autoClear;L.autoClear=!1;const ee=this._lodPlanes.length;for(let re=1;re<ee;re++){const le=Math.sqrt(this._sigmas[re]*this._sigmas[re]-this._sigmas[re-1]*this._sigmas[re-1]),ve=_axisDirections[(ee-re-1)%_axisDirections.length];this._blur(m,re-1,re,le,ve)}L.autoClear=j}_blur(m,L,j,ee,re){const le=this._pingPongRenderTarget;this._halfBlur(m,le,L,j,ee,"latitudinal",re),this._halfBlur(le,m,j,j,ee,"longitudinal",re)}_halfBlur(m,L,j,ee,re,le,ve){const ye=this._renderer,Ee=this._blurMaterial;le!=="latitudinal"&&le!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const Me=3,Ce=new Mesh(this._lodPlanes[ee],Ee),De=Ee.uniforms,Be=this._sizeLods[j]-1,ke=isFinite(re)?Math.PI/(2*Be):2*Math.PI/(2*MAX_SAMPLES-1),Fe=re/ke,Oe=isFinite(re)?1+Math.floor(Me*Fe):MAX_SAMPLES;Oe>MAX_SAMPLES&&console.warn(`sigmaRadians, ${re}, is too large and will clip, as it requested ${Oe} samples when the maximum is set to ${MAX_SAMPLES}`);const Ne=[];let ze=0;for(let Ye=0;Ye<MAX_SAMPLES;++Ye){const Ze=Ye/Fe,Ke=Math.exp(-Ze*Ze/2);Ne.push(Ke),Ye===0?ze+=Ke:Ye<Oe&&(ze+=2*Ke)}for(let Ye=0;Ye<Ne.length;Ye++)Ne[Ye]=Ne[Ye]/ze;De.envMap.value=m.texture,De.samples.value=Oe,De.weights.value=Ne,De.latitudinal.value=le==="latitudinal",ve&&(De.poleAxis.value=ve);const{_lodMax:$e}=this;De.dTheta.value=ke,De.mipInt.value=$e-j;const He=this._sizeLods[ee],We=3*He*(ee>$e-LOD_MIN?ee-$e+LOD_MIN:0),qe=4*(this._cubeSize-He);_setViewport(L,We,qe,3*He,2*He),ye.setRenderTarget(L),ye.render(Ce,_flatCamera)}}function _createPlanes($){const m=[],L=[],j=[];let ee=$;const re=$-LOD_MIN+1+EXTRA_LOD_SIGMA.length;for(let le=0;le<re;le++){const ve=Math.pow(2,ee);L.push(ve);let ye=1/ve;le>$-LOD_MIN?ye=EXTRA_LOD_SIGMA[le-$+LOD_MIN-1]:le===0&&(ye=0),j.push(ye);const Ee=1/(ve-2),Me=-Ee,Ce=1+Ee,De=[Me,Me,Ce,Me,Ce,Ce,Me,Me,Ce,Ce,Me,Ce],Be=6,ke=6,Fe=3,Oe=2,Ne=1,ze=new Float32Array(Fe*ke*Be),$e=new Float32Array(Oe*ke*Be),He=new Float32Array(Ne*ke*Be);for(let qe=0;qe<Be;qe++){const Ye=qe%3*2/3-1,Ze=qe>2?0:-1,Ke=[Ye,Ze,0,Ye+2/3,Ze,0,Ye+2/3,Ze+1,0,Ye,Ze,0,Ye+2/3,Ze+1,0,Ye,Ze+1,0];ze.set(Ke,Fe*ke*qe),$e.set(De,Oe*ke*qe);const rt=[qe,qe,qe,qe,qe,qe];He.set(rt,Ne*ke*qe)}const We=new BufferGeometry;We.setAttribute("position",new BufferAttribute(ze,Fe)),We.setAttribute("uv",new BufferAttribute($e,Oe)),We.setAttribute("faceIndex",new BufferAttribute(He,Ne)),m.push(We),ee>LOD_MIN&&ee--}return{lodPlanes:m,sizeLods:L,sigmas:j}}function _createRenderTarget($,m,L){const j=new WebGLRenderTarget($,m,L);return j.texture.mapping=CubeUVReflectionMapping,j.texture.name="PMREM.cubeUv",j.scissorTest=!0,j}function _setViewport($,m,L,j,ee){$.viewport.set(m,L,j,ee),$.scissor.set(m,L,j,ee)}function _getBlurShader($,m,L){const j=new Float32Array(MAX_SAMPLES),ee=new Vector3(0,1,0);return new ShaderMaterial({name:"SphericalGaussianBlur",defines:{n:MAX_SAMPLES,CUBEUV_TEXEL_WIDTH:1/m,CUBEUV_TEXEL_HEIGHT:1/L,CUBEUV_MAX_MIP:`${$}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:j},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:ee}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getEquirectMaterial(){return new ShaderMaterial({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCubemapMaterial(){return new ShaderMaterial({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCommonVertexShader(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function WebGLCubeUVMaps($){let m=new WeakMap,L=null;function j(ve){if(ve&&ve.isTexture){const ye=ve.mapping,Ee=ye===EquirectangularReflectionMapping||ye===EquirectangularRefractionMapping,Me=ye===CubeReflectionMapping||ye===CubeRefractionMapping;if(Ee||Me){let Ce=m.get(ve);const De=Ce!==void 0?Ce.texture.pmremVersion:0;if(ve.isRenderTargetTexture&&ve.pmremVersion!==De)return L===null&&(L=new PMREMGenerator($)),Ce=Ee?L.fromEquirectangular(ve,Ce):L.fromCubemap(ve,Ce),Ce.texture.pmremVersion=ve.pmremVersion,m.set(ve,Ce),Ce.texture;if(Ce!==void 0)return Ce.texture;{const Be=ve.image;return Ee&&Be&&Be.height>0||Me&&Be&&ee(Be)?(L===null&&(L=new PMREMGenerator($)),Ce=Ee?L.fromEquirectangular(ve):L.fromCubemap(ve),Ce.texture.pmremVersion=ve.pmremVersion,m.set(ve,Ce),ve.addEventListener("dispose",re),Ce.texture):null}}}return ve}function ee(ve){let ye=0;const Ee=6;for(let Me=0;Me<Ee;Me++)ve[Me]!==void 0&&ye++;return ye===Ee}function re(ve){const ye=ve.target;ye.removeEventListener("dispose",re);const Ee=m.get(ye);Ee!==void 0&&(m.delete(ye),Ee.dispose())}function le(){m=new WeakMap,L!==null&&(L.dispose(),L=null)}return{get:j,dispose:le}}function WebGLExtensions($){const m={};function L(j){if(m[j]!==void 0)return m[j];let ee;switch(j){case"WEBGL_depth_texture":ee=$.getExtension("WEBGL_depth_texture")||$.getExtension("MOZ_WEBGL_depth_texture")||$.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":ee=$.getExtension("EXT_texture_filter_anisotropic")||$.getExtension("MOZ_EXT_texture_filter_anisotropic")||$.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":ee=$.getExtension("WEBGL_compressed_texture_s3tc")||$.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||$.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":ee=$.getExtension("WEBGL_compressed_texture_pvrtc")||$.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:ee=$.getExtension(j)}return m[j]=ee,ee}return{has:function(j){return L(j)!==null},init:function(){L("EXT_color_buffer_float"),L("WEBGL_clip_cull_distance"),L("OES_texture_float_linear"),L("EXT_color_buffer_half_float"),L("WEBGL_multisampled_render_to_texture"),L("WEBGL_render_shared_exponent")},get:function(j){const ee=L(j);return ee===null&&warnOnce("THREE.WebGLRenderer: "+j+" extension not supported."),ee}}}function WebGLGeometries($,m,L,j){const ee={},re=new WeakMap;function le(Ce){const De=Ce.target;De.index!==null&&m.remove(De.index);for(const ke in De.attributes)m.remove(De.attributes[ke]);for(const ke in De.morphAttributes){const Fe=De.morphAttributes[ke];for(let Oe=0,Ne=Fe.length;Oe<Ne;Oe++)m.remove(Fe[Oe])}De.removeEventListener("dispose",le),delete ee[De.id];const Be=re.get(De);Be&&(m.remove(Be),re.delete(De)),j.releaseStatesOfGeometry(De),De.isInstancedBufferGeometry===!0&&delete De._maxInstanceCount,L.memory.geometries--}function ve(Ce,De){return ee[De.id]===!0||(De.addEventListener("dispose",le),ee[De.id]=!0,L.memory.geometries++),De}function ye(Ce){const De=Ce.attributes;for(const ke in De)m.update(De[ke],$.ARRAY_BUFFER);const Be=Ce.morphAttributes;for(const ke in Be){const Fe=Be[ke];for(let Oe=0,Ne=Fe.length;Oe<Ne;Oe++)m.update(Fe[Oe],$.ARRAY_BUFFER)}}function Ee(Ce){const De=[],Be=Ce.index,ke=Ce.attributes.position;let Fe=0;if(Be!==null){const ze=Be.array;Fe=Be.version;for(let $e=0,He=ze.length;$e<He;$e+=3){const We=ze[$e+0],qe=ze[$e+1],Ye=ze[$e+2];De.push(We,qe,qe,Ye,Ye,We)}}else if(ke!==void 0){const ze=ke.array;Fe=ke.version;for(let $e=0,He=ze.length/3-1;$e<He;$e+=3){const We=$e+0,qe=$e+1,Ye=$e+2;De.push(We,qe,qe,Ye,Ye,We)}}else return;const Oe=new(arrayNeedsUint32(De)?Uint32BufferAttribute:Uint16BufferAttribute)(De,1);Oe.version=Fe;const Ne=re.get(Ce);Ne&&m.remove(Ne),re.set(Ce,Oe)}function Me(Ce){const De=re.get(Ce);if(De){const Be=Ce.index;Be!==null&&De.version<Be.version&&Ee(Ce)}else Ee(Ce);return re.get(Ce)}return{get:ve,update:ye,getWireframeAttribute:Me}}function WebGLIndexedBufferRenderer($,m,L){let j;function ee(De){j=De}let re,le;function ve(De){re=De.type,le=De.bytesPerElement}function ye(De,Be){$.drawElements(j,Be,re,De*le),L.update(Be,j,1)}function Ee(De,Be,ke){ke!==0&&($.drawElementsInstanced(j,Be,re,De*le,ke),L.update(Be,j,ke))}function Me(De,Be,ke){if(ke===0)return;const Fe=m.get("WEBGL_multi_draw");if(Fe===null)for(let Oe=0;Oe<ke;Oe++)this.render(De[Oe]/le,Be[Oe]);else{Fe.multiDrawElementsWEBGL(j,Be,0,re,De,0,ke);let Oe=0;for(let Ne=0;Ne<ke;Ne++)Oe+=Be[Ne];L.update(Oe,j,1)}}function Ce(De,Be,ke,Fe){if(ke===0)return;const Oe=m.get("WEBGL_multi_draw");if(Oe===null)for(let Ne=0;Ne<De.length;Ne++)Ee(De[Ne]/le,Be[Ne],Fe[Ne]);else{Oe.multiDrawElementsInstancedWEBGL(j,Be,0,re,De,0,Fe,0,ke);let Ne=0;for(let ze=0;ze<ke;ze++)Ne+=Be[ze];for(let ze=0;ze<Fe.length;ze++)L.update(Ne,j,Fe[ze])}}this.setMode=ee,this.setIndex=ve,this.render=ye,this.renderInstances=Ee,this.renderMultiDraw=Me,this.renderMultiDrawInstances=Ce}function WebGLInfo($){const m={geometries:0,textures:0},L={frame:0,calls:0,triangles:0,points:0,lines:0};function j(re,le,ve){switch(L.calls++,le){case $.TRIANGLES:L.triangles+=ve*(re/3);break;case $.LINES:L.lines+=ve*(re/2);break;case $.LINE_STRIP:L.lines+=ve*(re-1);break;case $.LINE_LOOP:L.lines+=ve*re;break;case $.POINTS:L.points+=ve*re;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",le);break}}function ee(){L.calls=0,L.triangles=0,L.points=0,L.lines=0}return{memory:m,render:L,programs:null,autoReset:!0,reset:ee,update:j}}function WebGLMorphtargets($,m,L){const j=new WeakMap,ee=new Vector4;function re(le,ve,ye){const Ee=le.morphTargetInfluences,Me=ve.morphAttributes.position||ve.morphAttributes.normal||ve.morphAttributes.color,Ce=Me!==void 0?Me.length:0;let De=j.get(ve);if(De===void 0||De.count!==Ce){let Ke=function(){Ye.dispose(),j.delete(ve),ve.removeEventListener("dispose",Ke)};De!==void 0&&De.texture.dispose();const Be=ve.morphAttributes.position!==void 0,ke=ve.morphAttributes.normal!==void 0,Fe=ve.morphAttributes.color!==void 0,Oe=ve.morphAttributes.position||[],Ne=ve.morphAttributes.normal||[],ze=ve.morphAttributes.color||[];let $e=0;Be===!0&&($e=1),ke===!0&&($e=2),Fe===!0&&($e=3);let He=ve.attributes.position.count*$e,We=1;He>m.maxTextureSize&&(We=Math.ceil(He/m.maxTextureSize),He=m.maxTextureSize);const qe=new Float32Array(He*We*4*Ce),Ye=new DataArrayTexture(qe,He,We,Ce);Ye.type=FloatType,Ye.needsUpdate=!0;const Ze=$e*4;for(let rt=0;rt<Ce;rt++){const ft=Oe[rt],mt=Ne[rt],Et=ze[rt],bt=He*We*4*rt;for(let Ct=0;Ct<ft.count;Ct++){const st=Ct*Ze;Be===!0&&(ee.fromBufferAttribute(ft,Ct),qe[bt+st+0]=ee.x,qe[bt+st+1]=ee.y,qe[bt+st+2]=ee.z,qe[bt+st+3]=0),ke===!0&&(ee.fromBufferAttribute(mt,Ct),qe[bt+st+4]=ee.x,qe[bt+st+5]=ee.y,qe[bt+st+6]=ee.z,qe[bt+st+7]=0),Fe===!0&&(ee.fromBufferAttribute(Et,Ct),qe[bt+st+8]=ee.x,qe[bt+st+9]=ee.y,qe[bt+st+10]=ee.z,qe[bt+st+11]=Et.itemSize===4?ee.w:1)}}De={count:Ce,texture:Ye,size:new Vector2(He,We)},j.set(ve,De),ve.addEventListener("dispose",Ke)}if(le.isInstancedMesh===!0&&le.morphTexture!==null)ye.getUniforms().setValue($,"morphTexture",le.morphTexture,L);else{let Be=0;for(let Fe=0;Fe<Ee.length;Fe++)Be+=Ee[Fe];const ke=ve.morphTargetsRelative?1:1-Be;ye.getUniforms().setValue($,"morphTargetBaseInfluence",ke),ye.getUniforms().setValue($,"morphTargetInfluences",Ee)}ye.getUniforms().setValue($,"morphTargetsTexture",De.texture,L),ye.getUniforms().setValue($,"morphTargetsTextureSize",De.size)}return{update:re}}function WebGLObjects($,m,L,j){let ee=new WeakMap;function re(ye){const Ee=j.render.frame,Me=ye.geometry,Ce=m.get(ye,Me);if(ee.get(Ce)!==Ee&&(m.update(Ce),ee.set(Ce,Ee)),ye.isInstancedMesh&&(ye.hasEventListener("dispose",ve)===!1&&ye.addEventListener("dispose",ve),ee.get(ye)!==Ee&&(L.update(ye.instanceMatrix,$.ARRAY_BUFFER),ye.instanceColor!==null&&L.update(ye.instanceColor,$.ARRAY_BUFFER),ee.set(ye,Ee))),ye.isSkinnedMesh){const De=ye.skeleton;ee.get(De)!==Ee&&(De.update(),ee.set(De,Ee))}return Ce}function le(){ee=new WeakMap}function ve(ye){const Ee=ye.target;Ee.removeEventListener("dispose",ve),L.remove(Ee.instanceMatrix),Ee.instanceColor!==null&&L.remove(Ee.instanceColor)}return{update:re,dispose:le}}class DepthTexture extends Texture{constructor(m,L,j,ee,re,le,ve,ye,Ee,Me=DepthFormat){if(Me!==DepthFormat&&Me!==DepthStencilFormat)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");j===void 0&&Me===DepthFormat&&(j=UnsignedIntType),j===void 0&&Me===DepthStencilFormat&&(j=UnsignedInt248Type),super(null,ee,re,le,ve,ye,Me,j,Ee),this.isDepthTexture=!0,this.image={width:m,height:L},this.magFilter=ve!==void 0?ve:NearestFilter,this.minFilter=ye!==void 0?ye:NearestFilter,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(m){return super.copy(m),this.compareFunction=m.compareFunction,this}toJSON(m){const L=super.toJSON(m);return this.compareFunction!==null&&(L.compareFunction=this.compareFunction),L}}const emptyTexture=new Texture,emptyShadowTexture=new DepthTexture(1,1);emptyShadowTexture.compareFunction=LessEqualCompare;const emptyArrayTexture=new DataArrayTexture,empty3dTexture=new Data3DTexture,emptyCubeTexture=new CubeTexture,arrayCacheF32=[],arrayCacheI32=[],mat4array=new Float32Array(16),mat3array=new Float32Array(9),mat2array=new Float32Array(4);function flatten$2($,m,L){const j=$[0];if(j<=0||j>0)return $;const ee=m*L;let re=arrayCacheF32[ee];if(re===void 0&&(re=new Float32Array(ee),arrayCacheF32[ee]=re),m!==0){j.toArray(re,0);for(let le=1,ve=0;le!==m;++le)ve+=L,$[le].toArray(re,ve)}return re}function arraysEqual($,m){if($.length!==m.length)return!1;for(let L=0,j=$.length;L<j;L++)if($[L]!==m[L])return!1;return!0}function copyArray($,m){for(let L=0,j=m.length;L<j;L++)$[L]=m[L]}function allocTexUnits($,m){let L=arrayCacheI32[m];L===void 0&&(L=new Int32Array(m),arrayCacheI32[m]=L);for(let j=0;j!==m;++j)L[j]=$.allocateTextureUnit();return L}function setValueV1f($,m){const L=this.cache;L[0]!==m&&($.uniform1f(this.addr,m),L[0]=m)}function setValueV2f($,m){const L=this.cache;if(m.x!==void 0)(L[0]!==m.x||L[1]!==m.y)&&($.uniform2f(this.addr,m.x,m.y),L[0]=m.x,L[1]=m.y);else{if(arraysEqual(L,m))return;$.uniform2fv(this.addr,m),copyArray(L,m)}}function setValueV3f($,m){const L=this.cache;if(m.x!==void 0)(L[0]!==m.x||L[1]!==m.y||L[2]!==m.z)&&($.uniform3f(this.addr,m.x,m.y,m.z),L[0]=m.x,L[1]=m.y,L[2]=m.z);else if(m.r!==void 0)(L[0]!==m.r||L[1]!==m.g||L[2]!==m.b)&&($.uniform3f(this.addr,m.r,m.g,m.b),L[0]=m.r,L[1]=m.g,L[2]=m.b);else{if(arraysEqual(L,m))return;$.uniform3fv(this.addr,m),copyArray(L,m)}}function setValueV4f($,m){const L=this.cache;if(m.x!==void 0)(L[0]!==m.x||L[1]!==m.y||L[2]!==m.z||L[3]!==m.w)&&($.uniform4f(this.addr,m.x,m.y,m.z,m.w),L[0]=m.x,L[1]=m.y,L[2]=m.z,L[3]=m.w);else{if(arraysEqual(L,m))return;$.uniform4fv(this.addr,m),copyArray(L,m)}}function setValueM2($,m){const L=this.cache,j=m.elements;if(j===void 0){if(arraysEqual(L,m))return;$.uniformMatrix2fv(this.addr,!1,m),copyArray(L,m)}else{if(arraysEqual(L,j))return;mat2array.set(j),$.uniformMatrix2fv(this.addr,!1,mat2array),copyArray(L,j)}}function setValueM3($,m){const L=this.cache,j=m.elements;if(j===void 0){if(arraysEqual(L,m))return;$.uniformMatrix3fv(this.addr,!1,m),copyArray(L,m)}else{if(arraysEqual(L,j))return;mat3array.set(j),$.uniformMatrix3fv(this.addr,!1,mat3array),copyArray(L,j)}}function setValueM4($,m){const L=this.cache,j=m.elements;if(j===void 0){if(arraysEqual(L,m))return;$.uniformMatrix4fv(this.addr,!1,m),copyArray(L,m)}else{if(arraysEqual(L,j))return;mat4array.set(j),$.uniformMatrix4fv(this.addr,!1,mat4array),copyArray(L,j)}}function setValueV1i($,m){const L=this.cache;L[0]!==m&&($.uniform1i(this.addr,m),L[0]=m)}function setValueV2i($,m){const L=this.cache;if(m.x!==void 0)(L[0]!==m.x||L[1]!==m.y)&&($.uniform2i(this.addr,m.x,m.y),L[0]=m.x,L[1]=m.y);else{if(arraysEqual(L,m))return;$.uniform2iv(this.addr,m),copyArray(L,m)}}function setValueV3i($,m){const L=this.cache;if(m.x!==void 0)(L[0]!==m.x||L[1]!==m.y||L[2]!==m.z)&&($.uniform3i(this.addr,m.x,m.y,m.z),L[0]=m.x,L[1]=m.y,L[2]=m.z);else{if(arraysEqual(L,m))return;$.uniform3iv(this.addr,m),copyArray(L,m)}}function setValueV4i($,m){const L=this.cache;if(m.x!==void 0)(L[0]!==m.x||L[1]!==m.y||L[2]!==m.z||L[3]!==m.w)&&($.uniform4i(this.addr,m.x,m.y,m.z,m.w),L[0]=m.x,L[1]=m.y,L[2]=m.z,L[3]=m.w);else{if(arraysEqual(L,m))return;$.uniform4iv(this.addr,m),copyArray(L,m)}}function setValueV1ui($,m){const L=this.cache;L[0]!==m&&($.uniform1ui(this.addr,m),L[0]=m)}function setValueV2ui($,m){const L=this.cache;if(m.x!==void 0)(L[0]!==m.x||L[1]!==m.y)&&($.uniform2ui(this.addr,m.x,m.y),L[0]=m.x,L[1]=m.y);else{if(arraysEqual(L,m))return;$.uniform2uiv(this.addr,m),copyArray(L,m)}}function setValueV3ui($,m){const L=this.cache;if(m.x!==void 0)(L[0]!==m.x||L[1]!==m.y||L[2]!==m.z)&&($.uniform3ui(this.addr,m.x,m.y,m.z),L[0]=m.x,L[1]=m.y,L[2]=m.z);else{if(arraysEqual(L,m))return;$.uniform3uiv(this.addr,m),copyArray(L,m)}}function setValueV4ui($,m){const L=this.cache;if(m.x!==void 0)(L[0]!==m.x||L[1]!==m.y||L[2]!==m.z||L[3]!==m.w)&&($.uniform4ui(this.addr,m.x,m.y,m.z,m.w),L[0]=m.x,L[1]=m.y,L[2]=m.z,L[3]=m.w);else{if(arraysEqual(L,m))return;$.uniform4uiv(this.addr,m),copyArray(L,m)}}function setValueT1($,m,L){const j=this.cache,ee=L.allocateTextureUnit();j[0]!==ee&&($.uniform1i(this.addr,ee),j[0]=ee);const re=this.type===$.SAMPLER_2D_SHADOW?emptyShadowTexture:emptyTexture;L.setTexture2D(m||re,ee)}function setValueT3D1($,m,L){const j=this.cache,ee=L.allocateTextureUnit();j[0]!==ee&&($.uniform1i(this.addr,ee),j[0]=ee),L.setTexture3D(m||empty3dTexture,ee)}function setValueT6($,m,L){const j=this.cache,ee=L.allocateTextureUnit();j[0]!==ee&&($.uniform1i(this.addr,ee),j[0]=ee),L.setTextureCube(m||emptyCubeTexture,ee)}function setValueT2DArray1($,m,L){const j=this.cache,ee=L.allocateTextureUnit();j[0]!==ee&&($.uniform1i(this.addr,ee),j[0]=ee),L.setTexture2DArray(m||emptyArrayTexture,ee)}function getSingularSetter($){switch($){case 5126:return setValueV1f;case 35664:return setValueV2f;case 35665:return setValueV3f;case 35666:return setValueV4f;case 35674:return setValueM2;case 35675:return setValueM3;case 35676:return setValueM4;case 5124:case 35670:return setValueV1i;case 35667:case 35671:return setValueV2i;case 35668:case 35672:return setValueV3i;case 35669:case 35673:return setValueV4i;case 5125:return setValueV1ui;case 36294:return setValueV2ui;case 36295:return setValueV3ui;case 36296:return setValueV4ui;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1;case 35679:case 36299:case 36307:return setValueT3D1;case 35680:case 36300:case 36308:case 36293:return setValueT6;case 36289:case 36303:case 36311:case 36292:return setValueT2DArray1}}function setValueV1fArray($,m){$.uniform1fv(this.addr,m)}function setValueV2fArray($,m){const L=flatten$2(m,this.size,2);$.uniform2fv(this.addr,L)}function setValueV3fArray($,m){const L=flatten$2(m,this.size,3);$.uniform3fv(this.addr,L)}function setValueV4fArray($,m){const L=flatten$2(m,this.size,4);$.uniform4fv(this.addr,L)}function setValueM2Array($,m){const L=flatten$2(m,this.size,4);$.uniformMatrix2fv(this.addr,!1,L)}function setValueM3Array($,m){const L=flatten$2(m,this.size,9);$.uniformMatrix3fv(this.addr,!1,L)}function setValueM4Array($,m){const L=flatten$2(m,this.size,16);$.uniformMatrix4fv(this.addr,!1,L)}function setValueV1iArray($,m){$.uniform1iv(this.addr,m)}function setValueV2iArray($,m){$.uniform2iv(this.addr,m)}function setValueV3iArray($,m){$.uniform3iv(this.addr,m)}function setValueV4iArray($,m){$.uniform4iv(this.addr,m)}function setValueV1uiArray($,m){$.uniform1uiv(this.addr,m)}function setValueV2uiArray($,m){$.uniform2uiv(this.addr,m)}function setValueV3uiArray($,m){$.uniform3uiv(this.addr,m)}function setValueV4uiArray($,m){$.uniform4uiv(this.addr,m)}function setValueT1Array($,m,L){const j=this.cache,ee=m.length,re=allocTexUnits(L,ee);arraysEqual(j,re)||($.uniform1iv(this.addr,re),copyArray(j,re));for(let le=0;le!==ee;++le)L.setTexture2D(m[le]||emptyTexture,re[le])}function setValueT3DArray($,m,L){const j=this.cache,ee=m.length,re=allocTexUnits(L,ee);arraysEqual(j,re)||($.uniform1iv(this.addr,re),copyArray(j,re));for(let le=0;le!==ee;++le)L.setTexture3D(m[le]||empty3dTexture,re[le])}function setValueT6Array($,m,L){const j=this.cache,ee=m.length,re=allocTexUnits(L,ee);arraysEqual(j,re)||($.uniform1iv(this.addr,re),copyArray(j,re));for(let le=0;le!==ee;++le)L.setTextureCube(m[le]||emptyCubeTexture,re[le])}function setValueT2DArrayArray($,m,L){const j=this.cache,ee=m.length,re=allocTexUnits(L,ee);arraysEqual(j,re)||($.uniform1iv(this.addr,re),copyArray(j,re));for(let le=0;le!==ee;++le)L.setTexture2DArray(m[le]||emptyArrayTexture,re[le])}function getPureArraySetter($){switch($){case 5126:return setValueV1fArray;case 35664:return setValueV2fArray;case 35665:return setValueV3fArray;case 35666:return setValueV4fArray;case 35674:return setValueM2Array;case 35675:return setValueM3Array;case 35676:return setValueM4Array;case 5124:case 35670:return setValueV1iArray;case 35667:case 35671:return setValueV2iArray;case 35668:case 35672:return setValueV3iArray;case 35669:case 35673:return setValueV4iArray;case 5125:return setValueV1uiArray;case 36294:return setValueV2uiArray;case 36295:return setValueV3uiArray;case 36296:return setValueV4uiArray;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1Array;case 35679:case 36299:case 36307:return setValueT3DArray;case 35680:case 36300:case 36308:case 36293:return setValueT6Array;case 36289:case 36303:case 36311:case 36292:return setValueT2DArrayArray}}class SingleUniform{constructor(m,L,j){this.id=m,this.addr=j,this.cache=[],this.type=L.type,this.setValue=getSingularSetter(L.type)}}class PureArrayUniform{constructor(m,L,j){this.id=m,this.addr=j,this.cache=[],this.type=L.type,this.size=L.size,this.setValue=getPureArraySetter(L.type)}}class StructuredUniform{constructor(m){this.id=m,this.seq=[],this.map={}}setValue(m,L,j){const ee=this.seq;for(let re=0,le=ee.length;re!==le;++re){const ve=ee[re];ve.setValue(m,L[ve.id],j)}}}const RePathPart=/(\w+)(\])?(\[|\.)?/g;function addUniform($,m){$.seq.push(m),$.map[m.id]=m}function parseUniform($,m,L){const j=$.name,ee=j.length;for(RePathPart.lastIndex=0;;){const re=RePathPart.exec(j),le=RePathPart.lastIndex;let ve=re[1];const ye=re[2]==="]",Ee=re[3];if(ye&&(ve=ve|0),Ee===void 0||Ee==="["&&le+2===ee){addUniform(L,Ee===void 0?new SingleUniform(ve,$,m):new PureArrayUniform(ve,$,m));break}else{let Ce=L.map[ve];Ce===void 0&&(Ce=new StructuredUniform(ve),addUniform(L,Ce)),L=Ce}}}class WebGLUniforms{constructor(m,L){this.seq=[],this.map={};const j=m.getProgramParameter(L,m.ACTIVE_UNIFORMS);for(let ee=0;ee<j;++ee){const re=m.getActiveUniform(L,ee),le=m.getUniformLocation(L,re.name);parseUniform(re,le,this)}}setValue(m,L,j,ee){const re=this.map[L];re!==void 0&&re.setValue(m,j,ee)}setOptional(m,L,j){const ee=L[j];ee!==void 0&&this.setValue(m,j,ee)}static upload(m,L,j,ee){for(let re=0,le=L.length;re!==le;++re){const ve=L[re],ye=j[ve.id];ye.needsUpdate!==!1&&ve.setValue(m,ye.value,ee)}}static seqWithValue(m,L){const j=[];for(let ee=0,re=m.length;ee!==re;++ee){const le=m[ee];le.id in L&&j.push(le)}return j}}function WebGLShader($,m,L){const j=$.createShader(m);return $.shaderSource(j,L),$.compileShader(j),j}const COMPLETION_STATUS_KHR=37297;let programIdCount=0;function handleSource($,m){const L=$.split(`
`),j=[],ee=Math.max(m-6,0),re=Math.min(m+6,L.length);for(let le=ee;le<re;le++){const ve=le+1;j.push(`${ve===m?">":" "} ${ve}: ${L[le]}`)}return j.join(`
`)}function getEncodingComponents($){const m=ColorManagement.getPrimaries(ColorManagement.workingColorSpace),L=ColorManagement.getPrimaries($);let j;switch(m===L?j="":m===P3Primaries&&L===Rec709Primaries?j="LinearDisplayP3ToLinearSRGB":m===Rec709Primaries&&L===P3Primaries&&(j="LinearSRGBToLinearDisplayP3"),$){case LinearSRGBColorSpace:case LinearDisplayP3ColorSpace:return[j,"LinearTransferOETF"];case SRGBColorSpace:case DisplayP3ColorSpace:return[j,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",$),[j,"LinearTransferOETF"]}}function getShaderErrors($,m,L){const j=$.getShaderParameter(m,$.COMPILE_STATUS),ee=$.getShaderInfoLog(m).trim();if(j&&ee==="")return"";const re=/ERROR: 0:(\d+)/.exec(ee);if(re){const le=parseInt(re[1]);return L.toUpperCase()+`

`+ee+`

`+handleSource($.getShaderSource(m),le)}else return ee}function getTexelEncodingFunction($,m){const L=getEncodingComponents(m);return`vec4 ${$}( vec4 value ) { return ${L[0]}( ${L[1]}( value ) ); }`}function getToneMappingFunction($,m){let L;switch(m){case LinearToneMapping:L="Linear";break;case ReinhardToneMapping:L="Reinhard";break;case CineonToneMapping:L="OptimizedCineon";break;case ACESFilmicToneMapping:L="ACESFilmic";break;case AgXToneMapping:L="AgX";break;case NeutralToneMapping:L="Neutral";break;case CustomToneMapping:L="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",m),L="Linear"}return"vec3 "+$+"( vec3 color ) { return "+L+"ToneMapping( color ); }"}function generateVertexExtensions($){return[$.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",$.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(filterEmptyLine).join(`
`)}function generateDefines($){const m=[];for(const L in $){const j=$[L];j!==!1&&m.push("#define "+L+" "+j)}return m.join(`
`)}function fetchAttributeLocations($,m){const L={},j=$.getProgramParameter(m,$.ACTIVE_ATTRIBUTES);for(let ee=0;ee<j;ee++){const re=$.getActiveAttrib(m,ee),le=re.name;let ve=1;re.type===$.FLOAT_MAT2&&(ve=2),re.type===$.FLOAT_MAT3&&(ve=3),re.type===$.FLOAT_MAT4&&(ve=4),L[le]={type:re.type,location:$.getAttribLocation(m,le),locationSize:ve}}return L}function filterEmptyLine($){return $!==""}function replaceLightNums($,m){const L=m.numSpotLightShadows+m.numSpotLightMaps-m.numSpotLightShadowsWithMaps;return $.replace(/NUM_DIR_LIGHTS/g,m.numDirLights).replace(/NUM_SPOT_LIGHTS/g,m.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,m.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,L).replace(/NUM_RECT_AREA_LIGHTS/g,m.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,m.numPointLights).replace(/NUM_HEMI_LIGHTS/g,m.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,m.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,m.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,m.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,m.numPointLightShadows)}function replaceClippingPlaneNums($,m){return $.replace(/NUM_CLIPPING_PLANES/g,m.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,m.numClippingPlanes-m.numClipIntersection)}const includePattern=/^[ \t]*#include +<([\w\d./]+)>/gm;function resolveIncludes($){return $.replace(includePattern,includeReplacer)}const shaderChunkMap=new Map;function includeReplacer($,m){let L=ShaderChunk[m];if(L===void 0){const j=shaderChunkMap.get(m);if(j!==void 0)L=ShaderChunk[j],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',m,j);else throw new Error("Can not resolve #include <"+m+">")}return resolveIncludes(L)}const unrollLoopPattern=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function unrollLoops($){return $.replace(unrollLoopPattern,loopReplacer)}function loopReplacer($,m,L,j){let ee="";for(let re=parseInt(m);re<parseInt(L);re++)ee+=j.replace(/\[\s*i\s*\]/g,"[ "+re+" ]").replace(/UNROLLED_LOOP_INDEX/g,re);return ee}function generatePrecision($){let m=`precision ${$.precision} float;
	precision ${$.precision} int;
	precision ${$.precision} sampler2D;
	precision ${$.precision} samplerCube;
	precision ${$.precision} sampler3D;
	precision ${$.precision} sampler2DArray;
	precision ${$.precision} sampler2DShadow;
	precision ${$.precision} samplerCubeShadow;
	precision ${$.precision} sampler2DArrayShadow;
	precision ${$.precision} isampler2D;
	precision ${$.precision} isampler3D;
	precision ${$.precision} isamplerCube;
	precision ${$.precision} isampler2DArray;
	precision ${$.precision} usampler2D;
	precision ${$.precision} usampler3D;
	precision ${$.precision} usamplerCube;
	precision ${$.precision} usampler2DArray;
	`;return $.precision==="highp"?m+=`
#define HIGH_PRECISION`:$.precision==="mediump"?m+=`
#define MEDIUM_PRECISION`:$.precision==="lowp"&&(m+=`
#define LOW_PRECISION`),m}function generateShadowMapTypeDefine($){let m="SHADOWMAP_TYPE_BASIC";return $.shadowMapType===PCFShadowMap?m="SHADOWMAP_TYPE_PCF":$.shadowMapType===PCFSoftShadowMap?m="SHADOWMAP_TYPE_PCF_SOFT":$.shadowMapType===VSMShadowMap&&(m="SHADOWMAP_TYPE_VSM"),m}function generateEnvMapTypeDefine($){let m="ENVMAP_TYPE_CUBE";if($.envMap)switch($.envMapMode){case CubeReflectionMapping:case CubeRefractionMapping:m="ENVMAP_TYPE_CUBE";break;case CubeUVReflectionMapping:m="ENVMAP_TYPE_CUBE_UV";break}return m}function generateEnvMapModeDefine($){let m="ENVMAP_MODE_REFLECTION";if($.envMap)switch($.envMapMode){case CubeRefractionMapping:m="ENVMAP_MODE_REFRACTION";break}return m}function generateEnvMapBlendingDefine($){let m="ENVMAP_BLENDING_NONE";if($.envMap)switch($.combine){case MultiplyOperation:m="ENVMAP_BLENDING_MULTIPLY";break;case MixOperation:m="ENVMAP_BLENDING_MIX";break;case AddOperation:m="ENVMAP_BLENDING_ADD";break}return m}function generateCubeUVSize($){const m=$.envMapCubeUVHeight;if(m===null)return null;const L=Math.log2(m)-2,j=1/m;return{texelWidth:1/(3*Math.max(Math.pow(2,L),7*16)),texelHeight:j,maxMip:L}}function WebGLProgram($,m,L,j){const ee=$.getContext(),re=L.defines;let le=L.vertexShader,ve=L.fragmentShader;const ye=generateShadowMapTypeDefine(L),Ee=generateEnvMapTypeDefine(L),Me=generateEnvMapModeDefine(L),Ce=generateEnvMapBlendingDefine(L),De=generateCubeUVSize(L),Be=generateVertexExtensions(L),ke=generateDefines(re),Fe=ee.createProgram();let Oe,Ne,ze=L.glslVersion?"#version "+L.glslVersion+`
`:"";L.isRawShaderMaterial?(Oe=["#define SHADER_TYPE "+L.shaderType,"#define SHADER_NAME "+L.shaderName,ke].filter(filterEmptyLine).join(`
`),Oe.length>0&&(Oe+=`
`),Ne=["#define SHADER_TYPE "+L.shaderType,"#define SHADER_NAME "+L.shaderName,ke].filter(filterEmptyLine).join(`
`),Ne.length>0&&(Ne+=`
`)):(Oe=[generatePrecision(L),"#define SHADER_TYPE "+L.shaderType,"#define SHADER_NAME "+L.shaderName,ke,L.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",L.batching?"#define USE_BATCHING":"",L.batchingColor?"#define USE_BATCHING_COLOR":"",L.instancing?"#define USE_INSTANCING":"",L.instancingColor?"#define USE_INSTANCING_COLOR":"",L.instancingMorph?"#define USE_INSTANCING_MORPH":"",L.useFog&&L.fog?"#define USE_FOG":"",L.useFog&&L.fogExp2?"#define FOG_EXP2":"",L.map?"#define USE_MAP":"",L.envMap?"#define USE_ENVMAP":"",L.envMap?"#define "+Me:"",L.lightMap?"#define USE_LIGHTMAP":"",L.aoMap?"#define USE_AOMAP":"",L.bumpMap?"#define USE_BUMPMAP":"",L.normalMap?"#define USE_NORMALMAP":"",L.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",L.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",L.displacementMap?"#define USE_DISPLACEMENTMAP":"",L.emissiveMap?"#define USE_EMISSIVEMAP":"",L.anisotropy?"#define USE_ANISOTROPY":"",L.anisotropyMap?"#define USE_ANISOTROPYMAP":"",L.clearcoatMap?"#define USE_CLEARCOATMAP":"",L.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",L.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",L.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",L.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",L.specularMap?"#define USE_SPECULARMAP":"",L.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",L.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",L.roughnessMap?"#define USE_ROUGHNESSMAP":"",L.metalnessMap?"#define USE_METALNESSMAP":"",L.alphaMap?"#define USE_ALPHAMAP":"",L.alphaHash?"#define USE_ALPHAHASH":"",L.transmission?"#define USE_TRANSMISSION":"",L.transmissionMap?"#define USE_TRANSMISSIONMAP":"",L.thicknessMap?"#define USE_THICKNESSMAP":"",L.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",L.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",L.mapUv?"#define MAP_UV "+L.mapUv:"",L.alphaMapUv?"#define ALPHAMAP_UV "+L.alphaMapUv:"",L.lightMapUv?"#define LIGHTMAP_UV "+L.lightMapUv:"",L.aoMapUv?"#define AOMAP_UV "+L.aoMapUv:"",L.emissiveMapUv?"#define EMISSIVEMAP_UV "+L.emissiveMapUv:"",L.bumpMapUv?"#define BUMPMAP_UV "+L.bumpMapUv:"",L.normalMapUv?"#define NORMALMAP_UV "+L.normalMapUv:"",L.displacementMapUv?"#define DISPLACEMENTMAP_UV "+L.displacementMapUv:"",L.metalnessMapUv?"#define METALNESSMAP_UV "+L.metalnessMapUv:"",L.roughnessMapUv?"#define ROUGHNESSMAP_UV "+L.roughnessMapUv:"",L.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+L.anisotropyMapUv:"",L.clearcoatMapUv?"#define CLEARCOATMAP_UV "+L.clearcoatMapUv:"",L.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+L.clearcoatNormalMapUv:"",L.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+L.clearcoatRoughnessMapUv:"",L.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+L.iridescenceMapUv:"",L.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+L.iridescenceThicknessMapUv:"",L.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+L.sheenColorMapUv:"",L.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+L.sheenRoughnessMapUv:"",L.specularMapUv?"#define SPECULARMAP_UV "+L.specularMapUv:"",L.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+L.specularColorMapUv:"",L.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+L.specularIntensityMapUv:"",L.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+L.transmissionMapUv:"",L.thicknessMapUv?"#define THICKNESSMAP_UV "+L.thicknessMapUv:"",L.vertexTangents&&L.flatShading===!1?"#define USE_TANGENT":"",L.vertexColors?"#define USE_COLOR":"",L.vertexAlphas?"#define USE_COLOR_ALPHA":"",L.vertexUv1s?"#define USE_UV1":"",L.vertexUv2s?"#define USE_UV2":"",L.vertexUv3s?"#define USE_UV3":"",L.pointsUvs?"#define USE_POINTS_UV":"",L.flatShading?"#define FLAT_SHADED":"",L.skinning?"#define USE_SKINNING":"",L.morphTargets?"#define USE_MORPHTARGETS":"",L.morphNormals&&L.flatShading===!1?"#define USE_MORPHNORMALS":"",L.morphColors?"#define USE_MORPHCOLORS":"",L.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+L.morphTextureStride:"",L.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+L.morphTargetsCount:"",L.doubleSided?"#define DOUBLE_SIDED":"",L.flipSided?"#define FLIP_SIDED":"",L.shadowMapEnabled?"#define USE_SHADOWMAP":"",L.shadowMapEnabled?"#define "+ye:"",L.sizeAttenuation?"#define USE_SIZEATTENUATION":"",L.numLightProbes>0?"#define USE_LIGHT_PROBES":"",L.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(filterEmptyLine).join(`
`),Ne=[generatePrecision(L),"#define SHADER_TYPE "+L.shaderType,"#define SHADER_NAME "+L.shaderName,ke,L.useFog&&L.fog?"#define USE_FOG":"",L.useFog&&L.fogExp2?"#define FOG_EXP2":"",L.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",L.map?"#define USE_MAP":"",L.matcap?"#define USE_MATCAP":"",L.envMap?"#define USE_ENVMAP":"",L.envMap?"#define "+Ee:"",L.envMap?"#define "+Me:"",L.envMap?"#define "+Ce:"",De?"#define CUBEUV_TEXEL_WIDTH "+De.texelWidth:"",De?"#define CUBEUV_TEXEL_HEIGHT "+De.texelHeight:"",De?"#define CUBEUV_MAX_MIP "+De.maxMip+".0":"",L.lightMap?"#define USE_LIGHTMAP":"",L.aoMap?"#define USE_AOMAP":"",L.bumpMap?"#define USE_BUMPMAP":"",L.normalMap?"#define USE_NORMALMAP":"",L.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",L.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",L.emissiveMap?"#define USE_EMISSIVEMAP":"",L.anisotropy?"#define USE_ANISOTROPY":"",L.anisotropyMap?"#define USE_ANISOTROPYMAP":"",L.clearcoat?"#define USE_CLEARCOAT":"",L.clearcoatMap?"#define USE_CLEARCOATMAP":"",L.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",L.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",L.dispersion?"#define USE_DISPERSION":"",L.iridescence?"#define USE_IRIDESCENCE":"",L.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",L.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",L.specularMap?"#define USE_SPECULARMAP":"",L.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",L.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",L.roughnessMap?"#define USE_ROUGHNESSMAP":"",L.metalnessMap?"#define USE_METALNESSMAP":"",L.alphaMap?"#define USE_ALPHAMAP":"",L.alphaTest?"#define USE_ALPHATEST":"",L.alphaHash?"#define USE_ALPHAHASH":"",L.sheen?"#define USE_SHEEN":"",L.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",L.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",L.transmission?"#define USE_TRANSMISSION":"",L.transmissionMap?"#define USE_TRANSMISSIONMAP":"",L.thicknessMap?"#define USE_THICKNESSMAP":"",L.vertexTangents&&L.flatShading===!1?"#define USE_TANGENT":"",L.vertexColors||L.instancingColor||L.batchingColor?"#define USE_COLOR":"",L.vertexAlphas?"#define USE_COLOR_ALPHA":"",L.vertexUv1s?"#define USE_UV1":"",L.vertexUv2s?"#define USE_UV2":"",L.vertexUv3s?"#define USE_UV3":"",L.pointsUvs?"#define USE_POINTS_UV":"",L.gradientMap?"#define USE_GRADIENTMAP":"",L.flatShading?"#define FLAT_SHADED":"",L.doubleSided?"#define DOUBLE_SIDED":"",L.flipSided?"#define FLIP_SIDED":"",L.shadowMapEnabled?"#define USE_SHADOWMAP":"",L.shadowMapEnabled?"#define "+ye:"",L.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",L.numLightProbes>0?"#define USE_LIGHT_PROBES":"",L.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",L.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",L.toneMapping!==NoToneMapping?"#define TONE_MAPPING":"",L.toneMapping!==NoToneMapping?ShaderChunk.tonemapping_pars_fragment:"",L.toneMapping!==NoToneMapping?getToneMappingFunction("toneMapping",L.toneMapping):"",L.dithering?"#define DITHERING":"",L.opaque?"#define OPAQUE":"",ShaderChunk.colorspace_pars_fragment,getTexelEncodingFunction("linearToOutputTexel",L.outputColorSpace),L.useDepthPacking?"#define DEPTH_PACKING "+L.depthPacking:"",`
`].filter(filterEmptyLine).join(`
`)),le=resolveIncludes(le),le=replaceLightNums(le,L),le=replaceClippingPlaneNums(le,L),ve=resolveIncludes(ve),ve=replaceLightNums(ve,L),ve=replaceClippingPlaneNums(ve,L),le=unrollLoops(le),ve=unrollLoops(ve),L.isRawShaderMaterial!==!0&&(ze=`#version 300 es
`,Oe=[Be,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+Oe,Ne=["#define varying in",L.glslVersion===GLSL3?"":"layout(location = 0) out highp vec4 pc_fragColor;",L.glslVersion===GLSL3?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+Ne);const $e=ze+Oe+le,He=ze+Ne+ve,We=WebGLShader(ee,ee.VERTEX_SHADER,$e),qe=WebGLShader(ee,ee.FRAGMENT_SHADER,He);ee.attachShader(Fe,We),ee.attachShader(Fe,qe),L.index0AttributeName!==void 0?ee.bindAttribLocation(Fe,0,L.index0AttributeName):L.morphTargets===!0&&ee.bindAttribLocation(Fe,0,"position"),ee.linkProgram(Fe);function Ye(ft){if($.debug.checkShaderErrors){const mt=ee.getProgramInfoLog(Fe).trim(),Et=ee.getShaderInfoLog(We).trim(),bt=ee.getShaderInfoLog(qe).trim();let Ct=!0,st=!0;if(ee.getProgramParameter(Fe,ee.LINK_STATUS)===!1)if(Ct=!1,typeof $.debug.onShaderError=="function")$.debug.onShaderError(ee,Fe,We,qe);else{const at=getShaderErrors(ee,We,"vertex"),Xe=getShaderErrors(ee,qe,"fragment");console.error("THREE.WebGLProgram: Shader Error "+ee.getError()+" - VALIDATE_STATUS "+ee.getProgramParameter(Fe,ee.VALIDATE_STATUS)+`

Material Name: `+ft.name+`
Material Type: `+ft.type+`

Program Info Log: `+mt+`
`+at+`
`+Xe)}else mt!==""?console.warn("THREE.WebGLProgram: Program Info Log:",mt):(Et===""||bt==="")&&(st=!1);st&&(ft.diagnostics={runnable:Ct,programLog:mt,vertexShader:{log:Et,prefix:Oe},fragmentShader:{log:bt,prefix:Ne}})}ee.deleteShader(We),ee.deleteShader(qe),Ze=new WebGLUniforms(ee,Fe),Ke=fetchAttributeLocations(ee,Fe)}let Ze;this.getUniforms=function(){return Ze===void 0&&Ye(this),Ze};let Ke;this.getAttributes=function(){return Ke===void 0&&Ye(this),Ke};let rt=L.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return rt===!1&&(rt=ee.getProgramParameter(Fe,COMPLETION_STATUS_KHR)),rt},this.destroy=function(){j.releaseStatesOfProgram(this),ee.deleteProgram(Fe),this.program=void 0},this.type=L.shaderType,this.name=L.shaderName,this.id=programIdCount++,this.cacheKey=m,this.usedTimes=1,this.program=Fe,this.vertexShader=We,this.fragmentShader=qe,this}let _id$1=0;class WebGLShaderCache{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(m){const L=m.vertexShader,j=m.fragmentShader,ee=this._getShaderStage(L),re=this._getShaderStage(j),le=this._getShaderCacheForMaterial(m);return le.has(ee)===!1&&(le.add(ee),ee.usedTimes++),le.has(re)===!1&&(le.add(re),re.usedTimes++),this}remove(m){const L=this.materialCache.get(m);for(const j of L)j.usedTimes--,j.usedTimes===0&&this.shaderCache.delete(j.code);return this.materialCache.delete(m),this}getVertexShaderID(m){return this._getShaderStage(m.vertexShader).id}getFragmentShaderID(m){return this._getShaderStage(m.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(m){const L=this.materialCache;let j=L.get(m);return j===void 0&&(j=new Set,L.set(m,j)),j}_getShaderStage(m){const L=this.shaderCache;let j=L.get(m);return j===void 0&&(j=new WebGLShaderStage(m),L.set(m,j)),j}}class WebGLShaderStage{constructor(m){this.id=_id$1++,this.code=m,this.usedTimes=0}}function WebGLPrograms($,m,L,j,ee,re,le){const ve=new Layers,ye=new WebGLShaderCache,Ee=new Set,Me=[],Ce=ee.logarithmicDepthBuffer,De=ee.vertexTextures;let Be=ee.precision;const ke={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function Fe(Ke){return Ee.add(Ke),Ke===0?"uv":`uv${Ke}`}function Oe(Ke,rt,ft,mt,Et){const bt=mt.fog,Ct=Et.geometry,st=Ke.isMeshStandardMaterial?mt.environment:null,at=(Ke.isMeshStandardMaterial?L:m).get(Ke.envMap||st),Xe=at&&at.mapping===CubeUVReflectionMapping?at.image.height:null,ht=ke[Ke.type];Ke.precision!==null&&(Be=ee.getMaxPrecision(Ke.precision),Be!==Ke.precision&&console.warn("THREE.WebGLProgram.getParameters:",Ke.precision,"not supported, using",Be,"instead."));const Bt=Ct.morphAttributes.position||Ct.morphAttributes.normal||Ct.morphAttributes.color,Dt=Bt!==void 0?Bt.length:0;let Jt=0;Ct.morphAttributes.position!==void 0&&(Jt=1),Ct.morphAttributes.normal!==void 0&&(Jt=2),Ct.morphAttributes.color!==void 0&&(Jt=3);let tn,zt,Vt,Mt;if(ht){const ci=ShaderLib[ht];tn=ci.vertexShader,zt=ci.fragmentShader}else tn=Ke.vertexShader,zt=Ke.fragmentShader,ye.update(Ke),Vt=ye.getVertexShaderID(Ke),Mt=ye.getFragmentShaderID(Ke);const Tt=$.getRenderTarget(),qt=Et.isInstancedMesh===!0,on=Et.isBatchedMesh===!0,pn=!!Ke.map,kt=!!Ke.matcap,Mn=!!at,wt=!!Ke.aoMap,It=!!Ke.lightMap,Kt=!!Ke.bumpMap,ln=!!Ke.normalMap,nn=!!Ke.displacementMap,gn=!!Ke.emissiveMap,xn=!!Ke.metalnessMap,St=!!Ke.roughnessMap,At=Ke.anisotropy>0,Ut=Ke.clearcoat>0,Zt=Ke.dispersion>0,cn=Ke.iridescence>0,sn=Ke.sheen>0,bn=Ke.transmission>0,vn=At&&!!Ke.anisotropyMap,Cn=Ut&&!!Ke.clearcoatMap,Un=Ut&&!!Ke.clearcoatNormalMap,yn=Ut&&!!Ke.clearcoatRoughnessMap,$n=cn&&!!Ke.iridescenceMap,Jn=cn&&!!Ke.iridescenceThicknessMap,Hn=sn&&!!Ke.sheenColorMap,Bn=sn&&!!Ke.sheenRoughnessMap,Yn=!!Ke.specularMap,Qn=!!Ke.specularColorMap,Kn=!!Ke.specularIntensityMap,Wt=bn&&!!Ke.transmissionMap,zn=bn&&!!Ke.thicknessMap,Xt=!!Ke.gradientMap,En=!!Ke.alphaMap,Fn=Ke.alphaTest>0,Zn=!!Ke.alphaHash,hi=!!Ke.extensions;let bi=NoToneMapping;Ke.toneMapped&&(Tt===null||Tt.isXRRenderTarget===!0)&&(bi=$.toneMapping);const _i={shaderID:ht,shaderType:Ke.type,shaderName:Ke.name,vertexShader:tn,fragmentShader:zt,defines:Ke.defines,customVertexShaderID:Vt,customFragmentShaderID:Mt,isRawShaderMaterial:Ke.isRawShaderMaterial===!0,glslVersion:Ke.glslVersion,precision:Be,batching:on,batchingColor:on&&Et._colorsTexture!==null,instancing:qt,instancingColor:qt&&Et.instanceColor!==null,instancingMorph:qt&&Et.morphTexture!==null,supportsVertexTextures:De,outputColorSpace:Tt===null?$.outputColorSpace:Tt.isXRRenderTarget===!0?Tt.texture.colorSpace:LinearSRGBColorSpace,alphaToCoverage:!!Ke.alphaToCoverage,map:pn,matcap:kt,envMap:Mn,envMapMode:Mn&&at.mapping,envMapCubeUVHeight:Xe,aoMap:wt,lightMap:It,bumpMap:Kt,normalMap:ln,displacementMap:De&&nn,emissiveMap:gn,normalMapObjectSpace:ln&&Ke.normalMapType===ObjectSpaceNormalMap,normalMapTangentSpace:ln&&Ke.normalMapType===TangentSpaceNormalMap,metalnessMap:xn,roughnessMap:St,anisotropy:At,anisotropyMap:vn,clearcoat:Ut,clearcoatMap:Cn,clearcoatNormalMap:Un,clearcoatRoughnessMap:yn,dispersion:Zt,iridescence:cn,iridescenceMap:$n,iridescenceThicknessMap:Jn,sheen:sn,sheenColorMap:Hn,sheenRoughnessMap:Bn,specularMap:Yn,specularColorMap:Qn,specularIntensityMap:Kn,transmission:bn,transmissionMap:Wt,thicknessMap:zn,gradientMap:Xt,opaque:Ke.transparent===!1&&Ke.blending===NormalBlending&&Ke.alphaToCoverage===!1,alphaMap:En,alphaTest:Fn,alphaHash:Zn,combine:Ke.combine,mapUv:pn&&Fe(Ke.map.channel),aoMapUv:wt&&Fe(Ke.aoMap.channel),lightMapUv:It&&Fe(Ke.lightMap.channel),bumpMapUv:Kt&&Fe(Ke.bumpMap.channel),normalMapUv:ln&&Fe(Ke.normalMap.channel),displacementMapUv:nn&&Fe(Ke.displacementMap.channel),emissiveMapUv:gn&&Fe(Ke.emissiveMap.channel),metalnessMapUv:xn&&Fe(Ke.metalnessMap.channel),roughnessMapUv:St&&Fe(Ke.roughnessMap.channel),anisotropyMapUv:vn&&Fe(Ke.anisotropyMap.channel),clearcoatMapUv:Cn&&Fe(Ke.clearcoatMap.channel),clearcoatNormalMapUv:Un&&Fe(Ke.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:yn&&Fe(Ke.clearcoatRoughnessMap.channel),iridescenceMapUv:$n&&Fe(Ke.iridescenceMap.channel),iridescenceThicknessMapUv:Jn&&Fe(Ke.iridescenceThicknessMap.channel),sheenColorMapUv:Hn&&Fe(Ke.sheenColorMap.channel),sheenRoughnessMapUv:Bn&&Fe(Ke.sheenRoughnessMap.channel),specularMapUv:Yn&&Fe(Ke.specularMap.channel),specularColorMapUv:Qn&&Fe(Ke.specularColorMap.channel),specularIntensityMapUv:Kn&&Fe(Ke.specularIntensityMap.channel),transmissionMapUv:Wt&&Fe(Ke.transmissionMap.channel),thicknessMapUv:zn&&Fe(Ke.thicknessMap.channel),alphaMapUv:En&&Fe(Ke.alphaMap.channel),vertexTangents:!!Ct.attributes.tangent&&(ln||At),vertexColors:Ke.vertexColors,vertexAlphas:Ke.vertexColors===!0&&!!Ct.attributes.color&&Ct.attributes.color.itemSize===4,pointsUvs:Et.isPoints===!0&&!!Ct.attributes.uv&&(pn||En),fog:!!bt,useFog:Ke.fog===!0,fogExp2:!!bt&&bt.isFogExp2,flatShading:Ke.flatShading===!0,sizeAttenuation:Ke.sizeAttenuation===!0,logarithmicDepthBuffer:Ce,skinning:Et.isSkinnedMesh===!0,morphTargets:Ct.morphAttributes.position!==void 0,morphNormals:Ct.morphAttributes.normal!==void 0,morphColors:Ct.morphAttributes.color!==void 0,morphTargetsCount:Dt,morphTextureStride:Jt,numDirLights:rt.directional.length,numPointLights:rt.point.length,numSpotLights:rt.spot.length,numSpotLightMaps:rt.spotLightMap.length,numRectAreaLights:rt.rectArea.length,numHemiLights:rt.hemi.length,numDirLightShadows:rt.directionalShadowMap.length,numPointLightShadows:rt.pointShadowMap.length,numSpotLightShadows:rt.spotShadowMap.length,numSpotLightShadowsWithMaps:rt.numSpotLightShadowsWithMaps,numLightProbes:rt.numLightProbes,numClippingPlanes:le.numPlanes,numClipIntersection:le.numIntersection,dithering:Ke.dithering,shadowMapEnabled:$.shadowMap.enabled&&ft.length>0,shadowMapType:$.shadowMap.type,toneMapping:bi,decodeVideoTexture:pn&&Ke.map.isVideoTexture===!0&&ColorManagement.getTransfer(Ke.map.colorSpace)===SRGBTransfer,premultipliedAlpha:Ke.premultipliedAlpha,doubleSided:Ke.side===DoubleSide,flipSided:Ke.side===BackSide,useDepthPacking:Ke.depthPacking>=0,depthPacking:Ke.depthPacking||0,index0AttributeName:Ke.index0AttributeName,extensionClipCullDistance:hi&&Ke.extensions.clipCullDistance===!0&&j.has("WEBGL_clip_cull_distance"),extensionMultiDraw:hi&&Ke.extensions.multiDraw===!0&&j.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:j.has("KHR_parallel_shader_compile"),customProgramCacheKey:Ke.customProgramCacheKey()};return _i.vertexUv1s=Ee.has(1),_i.vertexUv2s=Ee.has(2),_i.vertexUv3s=Ee.has(3),Ee.clear(),_i}function Ne(Ke){const rt=[];if(Ke.shaderID?rt.push(Ke.shaderID):(rt.push(Ke.customVertexShaderID),rt.push(Ke.customFragmentShaderID)),Ke.defines!==void 0)for(const ft in Ke.defines)rt.push(ft),rt.push(Ke.defines[ft]);return Ke.isRawShaderMaterial===!1&&(ze(rt,Ke),$e(rt,Ke),rt.push($.outputColorSpace)),rt.push(Ke.customProgramCacheKey),rt.join()}function ze(Ke,rt){Ke.push(rt.precision),Ke.push(rt.outputColorSpace),Ke.push(rt.envMapMode),Ke.push(rt.envMapCubeUVHeight),Ke.push(rt.mapUv),Ke.push(rt.alphaMapUv),Ke.push(rt.lightMapUv),Ke.push(rt.aoMapUv),Ke.push(rt.bumpMapUv),Ke.push(rt.normalMapUv),Ke.push(rt.displacementMapUv),Ke.push(rt.emissiveMapUv),Ke.push(rt.metalnessMapUv),Ke.push(rt.roughnessMapUv),Ke.push(rt.anisotropyMapUv),Ke.push(rt.clearcoatMapUv),Ke.push(rt.clearcoatNormalMapUv),Ke.push(rt.clearcoatRoughnessMapUv),Ke.push(rt.iridescenceMapUv),Ke.push(rt.iridescenceThicknessMapUv),Ke.push(rt.sheenColorMapUv),Ke.push(rt.sheenRoughnessMapUv),Ke.push(rt.specularMapUv),Ke.push(rt.specularColorMapUv),Ke.push(rt.specularIntensityMapUv),Ke.push(rt.transmissionMapUv),Ke.push(rt.thicknessMapUv),Ke.push(rt.combine),Ke.push(rt.fogExp2),Ke.push(rt.sizeAttenuation),Ke.push(rt.morphTargetsCount),Ke.push(rt.morphAttributeCount),Ke.push(rt.numDirLights),Ke.push(rt.numPointLights),Ke.push(rt.numSpotLights),Ke.push(rt.numSpotLightMaps),Ke.push(rt.numHemiLights),Ke.push(rt.numRectAreaLights),Ke.push(rt.numDirLightShadows),Ke.push(rt.numPointLightShadows),Ke.push(rt.numSpotLightShadows),Ke.push(rt.numSpotLightShadowsWithMaps),Ke.push(rt.numLightProbes),Ke.push(rt.shadowMapType),Ke.push(rt.toneMapping),Ke.push(rt.numClippingPlanes),Ke.push(rt.numClipIntersection),Ke.push(rt.depthPacking)}function $e(Ke,rt){ve.disableAll(),rt.supportsVertexTextures&&ve.enable(0),rt.instancing&&ve.enable(1),rt.instancingColor&&ve.enable(2),rt.instancingMorph&&ve.enable(3),rt.matcap&&ve.enable(4),rt.envMap&&ve.enable(5),rt.normalMapObjectSpace&&ve.enable(6),rt.normalMapTangentSpace&&ve.enable(7),rt.clearcoat&&ve.enable(8),rt.iridescence&&ve.enable(9),rt.alphaTest&&ve.enable(10),rt.vertexColors&&ve.enable(11),rt.vertexAlphas&&ve.enable(12),rt.vertexUv1s&&ve.enable(13),rt.vertexUv2s&&ve.enable(14),rt.vertexUv3s&&ve.enable(15),rt.vertexTangents&&ve.enable(16),rt.anisotropy&&ve.enable(17),rt.alphaHash&&ve.enable(18),rt.batching&&ve.enable(19),rt.dispersion&&ve.enable(20),rt.batchingColor&&ve.enable(21),Ke.push(ve.mask),ve.disableAll(),rt.fog&&ve.enable(0),rt.useFog&&ve.enable(1),rt.flatShading&&ve.enable(2),rt.logarithmicDepthBuffer&&ve.enable(3),rt.skinning&&ve.enable(4),rt.morphTargets&&ve.enable(5),rt.morphNormals&&ve.enable(6),rt.morphColors&&ve.enable(7),rt.premultipliedAlpha&&ve.enable(8),rt.shadowMapEnabled&&ve.enable(9),rt.doubleSided&&ve.enable(10),rt.flipSided&&ve.enable(11),rt.useDepthPacking&&ve.enable(12),rt.dithering&&ve.enable(13),rt.transmission&&ve.enable(14),rt.sheen&&ve.enable(15),rt.opaque&&ve.enable(16),rt.pointsUvs&&ve.enable(17),rt.decodeVideoTexture&&ve.enable(18),rt.alphaToCoverage&&ve.enable(19),Ke.push(ve.mask)}function He(Ke){const rt=ke[Ke.type];let ft;if(rt){const mt=ShaderLib[rt];ft=UniformsUtils.clone(mt.uniforms)}else ft=Ke.uniforms;return ft}function We(Ke,rt){let ft;for(let mt=0,Et=Me.length;mt<Et;mt++){const bt=Me[mt];if(bt.cacheKey===rt){ft=bt,++ft.usedTimes;break}}return ft===void 0&&(ft=new WebGLProgram($,rt,Ke,re),Me.push(ft)),ft}function qe(Ke){if(--Ke.usedTimes===0){const rt=Me.indexOf(Ke);Me[rt]=Me[Me.length-1],Me.pop(),Ke.destroy()}}function Ye(Ke){ye.remove(Ke)}function Ze(){ye.dispose()}return{getParameters:Oe,getProgramCacheKey:Ne,getUniforms:He,acquireProgram:We,releaseProgram:qe,releaseShaderCache:Ye,programs:Me,dispose:Ze}}function WebGLProperties(){let $=new WeakMap;function m(re){let le=$.get(re);return le===void 0&&(le={},$.set(re,le)),le}function L(re){$.delete(re)}function j(re,le,ve){$.get(re)[le]=ve}function ee(){$=new WeakMap}return{get:m,remove:L,update:j,dispose:ee}}function painterSortStable($,m){return $.groupOrder!==m.groupOrder?$.groupOrder-m.groupOrder:$.renderOrder!==m.renderOrder?$.renderOrder-m.renderOrder:$.material.id!==m.material.id?$.material.id-m.material.id:$.z!==m.z?$.z-m.z:$.id-m.id}function reversePainterSortStable($,m){return $.groupOrder!==m.groupOrder?$.groupOrder-m.groupOrder:$.renderOrder!==m.renderOrder?$.renderOrder-m.renderOrder:$.z!==m.z?m.z-$.z:$.id-m.id}function WebGLRenderList(){const $=[];let m=0;const L=[],j=[],ee=[];function re(){m=0,L.length=0,j.length=0,ee.length=0}function le(Ce,De,Be,ke,Fe,Oe){let Ne=$[m];return Ne===void 0?(Ne={id:Ce.id,object:Ce,geometry:De,material:Be,groupOrder:ke,renderOrder:Ce.renderOrder,z:Fe,group:Oe},$[m]=Ne):(Ne.id=Ce.id,Ne.object=Ce,Ne.geometry=De,Ne.material=Be,Ne.groupOrder=ke,Ne.renderOrder=Ce.renderOrder,Ne.z=Fe,Ne.group=Oe),m++,Ne}function ve(Ce,De,Be,ke,Fe,Oe){const Ne=le(Ce,De,Be,ke,Fe,Oe);Be.transmission>0?j.push(Ne):Be.transparent===!0?ee.push(Ne):L.push(Ne)}function ye(Ce,De,Be,ke,Fe,Oe){const Ne=le(Ce,De,Be,ke,Fe,Oe);Be.transmission>0?j.unshift(Ne):Be.transparent===!0?ee.unshift(Ne):L.unshift(Ne)}function Ee(Ce,De){L.length>1&&L.sort(Ce||painterSortStable),j.length>1&&j.sort(De||reversePainterSortStable),ee.length>1&&ee.sort(De||reversePainterSortStable)}function Me(){for(let Ce=m,De=$.length;Ce<De;Ce++){const Be=$[Ce];if(Be.id===null)break;Be.id=null,Be.object=null,Be.geometry=null,Be.material=null,Be.group=null}}return{opaque:L,transmissive:j,transparent:ee,init:re,push:ve,unshift:ye,finish:Me,sort:Ee}}function WebGLRenderLists(){let $=new WeakMap;function m(j,ee){const re=$.get(j);let le;return re===void 0?(le=new WebGLRenderList,$.set(j,[le])):ee>=re.length?(le=new WebGLRenderList,re.push(le)):le=re[ee],le}function L(){$=new WeakMap}return{get:m,dispose:L}}function UniformsCache(){const $={};return{get:function(m){if($[m.id]!==void 0)return $[m.id];let L;switch(m.type){case"DirectionalLight":L={direction:new Vector3,color:new Color};break;case"SpotLight":L={position:new Vector3,direction:new Vector3,color:new Color,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":L={position:new Vector3,color:new Color,distance:0,decay:0};break;case"HemisphereLight":L={direction:new Vector3,skyColor:new Color,groundColor:new Color};break;case"RectAreaLight":L={color:new Color,position:new Vector3,halfWidth:new Vector3,halfHeight:new Vector3};break}return $[m.id]=L,L}}}function ShadowUniformsCache(){const $={};return{get:function(m){if($[m.id]!==void 0)return $[m.id];let L;switch(m.type){case"DirectionalLight":L={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"SpotLight":L={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"PointLight":L={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2,shadowCameraNear:1,shadowCameraFar:1e3};break}return $[m.id]=L,L}}}let nextVersion=0;function shadowCastingAndTexturingLightsFirst($,m){return(m.castShadow?2:0)-($.castShadow?2:0)+(m.map?1:0)-($.map?1:0)}function WebGLLights($){const m=new UniformsCache,L=ShadowUniformsCache(),j={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let Ee=0;Ee<9;Ee++)j.probe.push(new Vector3);const ee=new Vector3,re=new Matrix4,le=new Matrix4;function ve(Ee){let Me=0,Ce=0,De=0;for(let Ke=0;Ke<9;Ke++)j.probe[Ke].set(0,0,0);let Be=0,ke=0,Fe=0,Oe=0,Ne=0,ze=0,$e=0,He=0,We=0,qe=0,Ye=0;Ee.sort(shadowCastingAndTexturingLightsFirst);for(let Ke=0,rt=Ee.length;Ke<rt;Ke++){const ft=Ee[Ke],mt=ft.color,Et=ft.intensity,bt=ft.distance,Ct=ft.shadow&&ft.shadow.map?ft.shadow.map.texture:null;if(ft.isAmbientLight)Me+=mt.r*Et,Ce+=mt.g*Et,De+=mt.b*Et;else if(ft.isLightProbe){for(let st=0;st<9;st++)j.probe[st].addScaledVector(ft.sh.coefficients[st],Et);Ye++}else if(ft.isDirectionalLight){const st=m.get(ft);if(st.color.copy(ft.color).multiplyScalar(ft.intensity),ft.castShadow){const at=ft.shadow,Xe=L.get(ft);Xe.shadowBias=at.bias,Xe.shadowNormalBias=at.normalBias,Xe.shadowRadius=at.radius,Xe.shadowMapSize=at.mapSize,j.directionalShadow[Be]=Xe,j.directionalShadowMap[Be]=Ct,j.directionalShadowMatrix[Be]=ft.shadow.matrix,ze++}j.directional[Be]=st,Be++}else if(ft.isSpotLight){const st=m.get(ft);st.position.setFromMatrixPosition(ft.matrixWorld),st.color.copy(mt).multiplyScalar(Et),st.distance=bt,st.coneCos=Math.cos(ft.angle),st.penumbraCos=Math.cos(ft.angle*(1-ft.penumbra)),st.decay=ft.decay,j.spot[Fe]=st;const at=ft.shadow;if(ft.map&&(j.spotLightMap[We]=ft.map,We++,at.updateMatrices(ft),ft.castShadow&&qe++),j.spotLightMatrix[Fe]=at.matrix,ft.castShadow){const Xe=L.get(ft);Xe.shadowBias=at.bias,Xe.shadowNormalBias=at.normalBias,Xe.shadowRadius=at.radius,Xe.shadowMapSize=at.mapSize,j.spotShadow[Fe]=Xe,j.spotShadowMap[Fe]=Ct,He++}Fe++}else if(ft.isRectAreaLight){const st=m.get(ft);st.color.copy(mt).multiplyScalar(Et),st.halfWidth.set(ft.width*.5,0,0),st.halfHeight.set(0,ft.height*.5,0),j.rectArea[Oe]=st,Oe++}else if(ft.isPointLight){const st=m.get(ft);if(st.color.copy(ft.color).multiplyScalar(ft.intensity),st.distance=ft.distance,st.decay=ft.decay,ft.castShadow){const at=ft.shadow,Xe=L.get(ft);Xe.shadowBias=at.bias,Xe.shadowNormalBias=at.normalBias,Xe.shadowRadius=at.radius,Xe.shadowMapSize=at.mapSize,Xe.shadowCameraNear=at.camera.near,Xe.shadowCameraFar=at.camera.far,j.pointShadow[ke]=Xe,j.pointShadowMap[ke]=Ct,j.pointShadowMatrix[ke]=ft.shadow.matrix,$e++}j.point[ke]=st,ke++}else if(ft.isHemisphereLight){const st=m.get(ft);st.skyColor.copy(ft.color).multiplyScalar(Et),st.groundColor.copy(ft.groundColor).multiplyScalar(Et),j.hemi[Ne]=st,Ne++}}Oe>0&&($.has("OES_texture_float_linear")===!0?(j.rectAreaLTC1=UniformsLib.LTC_FLOAT_1,j.rectAreaLTC2=UniformsLib.LTC_FLOAT_2):(j.rectAreaLTC1=UniformsLib.LTC_HALF_1,j.rectAreaLTC2=UniformsLib.LTC_HALF_2)),j.ambient[0]=Me,j.ambient[1]=Ce,j.ambient[2]=De;const Ze=j.hash;(Ze.directionalLength!==Be||Ze.pointLength!==ke||Ze.spotLength!==Fe||Ze.rectAreaLength!==Oe||Ze.hemiLength!==Ne||Ze.numDirectionalShadows!==ze||Ze.numPointShadows!==$e||Ze.numSpotShadows!==He||Ze.numSpotMaps!==We||Ze.numLightProbes!==Ye)&&(j.directional.length=Be,j.spot.length=Fe,j.rectArea.length=Oe,j.point.length=ke,j.hemi.length=Ne,j.directionalShadow.length=ze,j.directionalShadowMap.length=ze,j.pointShadow.length=$e,j.pointShadowMap.length=$e,j.spotShadow.length=He,j.spotShadowMap.length=He,j.directionalShadowMatrix.length=ze,j.pointShadowMatrix.length=$e,j.spotLightMatrix.length=He+We-qe,j.spotLightMap.length=We,j.numSpotLightShadowsWithMaps=qe,j.numLightProbes=Ye,Ze.directionalLength=Be,Ze.pointLength=ke,Ze.spotLength=Fe,Ze.rectAreaLength=Oe,Ze.hemiLength=Ne,Ze.numDirectionalShadows=ze,Ze.numPointShadows=$e,Ze.numSpotShadows=He,Ze.numSpotMaps=We,Ze.numLightProbes=Ye,j.version=nextVersion++)}function ye(Ee,Me){let Ce=0,De=0,Be=0,ke=0,Fe=0;const Oe=Me.matrixWorldInverse;for(let Ne=0,ze=Ee.length;Ne<ze;Ne++){const $e=Ee[Ne];if($e.isDirectionalLight){const He=j.directional[Ce];He.direction.setFromMatrixPosition($e.matrixWorld),ee.setFromMatrixPosition($e.target.matrixWorld),He.direction.sub(ee),He.direction.transformDirection(Oe),Ce++}else if($e.isSpotLight){const He=j.spot[Be];He.position.setFromMatrixPosition($e.matrixWorld),He.position.applyMatrix4(Oe),He.direction.setFromMatrixPosition($e.matrixWorld),ee.setFromMatrixPosition($e.target.matrixWorld),He.direction.sub(ee),He.direction.transformDirection(Oe),Be++}else if($e.isRectAreaLight){const He=j.rectArea[ke];He.position.setFromMatrixPosition($e.matrixWorld),He.position.applyMatrix4(Oe),le.identity(),re.copy($e.matrixWorld),re.premultiply(Oe),le.extractRotation(re),He.halfWidth.set($e.width*.5,0,0),He.halfHeight.set(0,$e.height*.5,0),He.halfWidth.applyMatrix4(le),He.halfHeight.applyMatrix4(le),ke++}else if($e.isPointLight){const He=j.point[De];He.position.setFromMatrixPosition($e.matrixWorld),He.position.applyMatrix4(Oe),De++}else if($e.isHemisphereLight){const He=j.hemi[Fe];He.direction.setFromMatrixPosition($e.matrixWorld),He.direction.transformDirection(Oe),Fe++}}}return{setup:ve,setupView:ye,state:j}}function WebGLRenderState($){const m=new WebGLLights($),L=[],j=[];function ee(Me){Ee.camera=Me,L.length=0,j.length=0}function re(Me){L.push(Me)}function le(Me){j.push(Me)}function ve(){m.setup(L)}function ye(Me){m.setupView(L,Me)}const Ee={lightsArray:L,shadowsArray:j,camera:null,lights:m,transmissionRenderTarget:{}};return{init:ee,state:Ee,setupLights:ve,setupLightsView:ye,pushLight:re,pushShadow:le}}function WebGLRenderStates($){let m=new WeakMap;function L(ee,re=0){const le=m.get(ee);let ve;return le===void 0?(ve=new WebGLRenderState($),m.set(ee,[ve])):re>=le.length?(ve=new WebGLRenderState($),le.push(ve)):ve=le[re],ve}function j(){m=new WeakMap}return{get:L,dispose:j}}class MeshDepthMaterial extends Material{constructor(m){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=BasicDepthPacking,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(m)}copy(m){return super.copy(m),this.depthPacking=m.depthPacking,this.map=m.map,this.alphaMap=m.alphaMap,this.displacementMap=m.displacementMap,this.displacementScale=m.displacementScale,this.displacementBias=m.displacementBias,this.wireframe=m.wireframe,this.wireframeLinewidth=m.wireframeLinewidth,this}}class MeshDistanceMaterial extends Material{constructor(m){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(m)}copy(m){return super.copy(m),this.map=m.map,this.alphaMap=m.alphaMap,this.displacementMap=m.displacementMap,this.displacementScale=m.displacementScale,this.displacementBias=m.displacementBias,this}}const vertex=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,fragment=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function WebGLShadowMap($,m,L){let j=new Frustum;const ee=new Vector2,re=new Vector2,le=new Vector4,ve=new MeshDepthMaterial({depthPacking:RGBADepthPacking}),ye=new MeshDistanceMaterial,Ee={},Me=L.maxTextureSize,Ce={[FrontSide]:BackSide,[BackSide]:FrontSide,[DoubleSide]:DoubleSide},De=new ShaderMaterial({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Vector2},radius:{value:4}},vertexShader:vertex,fragmentShader:fragment}),Be=De.clone();Be.defines.HORIZONTAL_PASS=1;const ke=new BufferGeometry;ke.setAttribute("position",new BufferAttribute(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const Fe=new Mesh(ke,De),Oe=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=PCFShadowMap;let Ne=this.type;this.render=function(qe,Ye,Ze){if(Oe.enabled===!1||Oe.autoUpdate===!1&&Oe.needsUpdate===!1||qe.length===0)return;const Ke=$.getRenderTarget(),rt=$.getActiveCubeFace(),ft=$.getActiveMipmapLevel(),mt=$.state;mt.setBlending(NoBlending),mt.buffers.color.setClear(1,1,1,1),mt.buffers.depth.setTest(!0),mt.setScissorTest(!1);const Et=Ne!==VSMShadowMap&&this.type===VSMShadowMap,bt=Ne===VSMShadowMap&&this.type!==VSMShadowMap;for(let Ct=0,st=qe.length;Ct<st;Ct++){const at=qe[Ct],Xe=at.shadow;if(Xe===void 0){console.warn("THREE.WebGLShadowMap:",at,"has no shadow.");continue}if(Xe.autoUpdate===!1&&Xe.needsUpdate===!1)continue;ee.copy(Xe.mapSize);const ht=Xe.getFrameExtents();if(ee.multiply(ht),re.copy(Xe.mapSize),(ee.x>Me||ee.y>Me)&&(ee.x>Me&&(re.x=Math.floor(Me/ht.x),ee.x=re.x*ht.x,Xe.mapSize.x=re.x),ee.y>Me&&(re.y=Math.floor(Me/ht.y),ee.y=re.y*ht.y,Xe.mapSize.y=re.y)),Xe.map===null||Et===!0||bt===!0){const Dt=this.type!==VSMShadowMap?{minFilter:NearestFilter,magFilter:NearestFilter}:{};Xe.map!==null&&Xe.map.dispose(),Xe.map=new WebGLRenderTarget(ee.x,ee.y,Dt),Xe.map.texture.name=at.name+".shadowMap",Xe.camera.updateProjectionMatrix()}$.setRenderTarget(Xe.map),$.clear();const Bt=Xe.getViewportCount();for(let Dt=0;Dt<Bt;Dt++){const Jt=Xe.getViewport(Dt);le.set(re.x*Jt.x,re.y*Jt.y,re.x*Jt.z,re.y*Jt.w),mt.viewport(le),Xe.updateMatrices(at,Dt),j=Xe.getFrustum(),He(Ye,Ze,Xe.camera,at,this.type)}Xe.isPointLightShadow!==!0&&this.type===VSMShadowMap&&ze(Xe,Ze),Xe.needsUpdate=!1}Ne=this.type,Oe.needsUpdate=!1,$.setRenderTarget(Ke,rt,ft)};function ze(qe,Ye){const Ze=m.update(Fe);De.defines.VSM_SAMPLES!==qe.blurSamples&&(De.defines.VSM_SAMPLES=qe.blurSamples,Be.defines.VSM_SAMPLES=qe.blurSamples,De.needsUpdate=!0,Be.needsUpdate=!0),qe.mapPass===null&&(qe.mapPass=new WebGLRenderTarget(ee.x,ee.y)),De.uniforms.shadow_pass.value=qe.map.texture,De.uniforms.resolution.value=qe.mapSize,De.uniforms.radius.value=qe.radius,$.setRenderTarget(qe.mapPass),$.clear(),$.renderBufferDirect(Ye,null,Ze,De,Fe,null),Be.uniforms.shadow_pass.value=qe.mapPass.texture,Be.uniforms.resolution.value=qe.mapSize,Be.uniforms.radius.value=qe.radius,$.setRenderTarget(qe.map),$.clear(),$.renderBufferDirect(Ye,null,Ze,Be,Fe,null)}function $e(qe,Ye,Ze,Ke){let rt=null;const ft=Ze.isPointLight===!0?qe.customDistanceMaterial:qe.customDepthMaterial;if(ft!==void 0)rt=ft;else if(rt=Ze.isPointLight===!0?ye:ve,$.localClippingEnabled&&Ye.clipShadows===!0&&Array.isArray(Ye.clippingPlanes)&&Ye.clippingPlanes.length!==0||Ye.displacementMap&&Ye.displacementScale!==0||Ye.alphaMap&&Ye.alphaTest>0||Ye.map&&Ye.alphaTest>0){const mt=rt.uuid,Et=Ye.uuid;let bt=Ee[mt];bt===void 0&&(bt={},Ee[mt]=bt);let Ct=bt[Et];Ct===void 0&&(Ct=rt.clone(),bt[Et]=Ct,Ye.addEventListener("dispose",We)),rt=Ct}if(rt.visible=Ye.visible,rt.wireframe=Ye.wireframe,Ke===VSMShadowMap?rt.side=Ye.shadowSide!==null?Ye.shadowSide:Ye.side:rt.side=Ye.shadowSide!==null?Ye.shadowSide:Ce[Ye.side],rt.alphaMap=Ye.alphaMap,rt.alphaTest=Ye.alphaTest,rt.map=Ye.map,rt.clipShadows=Ye.clipShadows,rt.clippingPlanes=Ye.clippingPlanes,rt.clipIntersection=Ye.clipIntersection,rt.displacementMap=Ye.displacementMap,rt.displacementScale=Ye.displacementScale,rt.displacementBias=Ye.displacementBias,rt.wireframeLinewidth=Ye.wireframeLinewidth,rt.linewidth=Ye.linewidth,Ze.isPointLight===!0&&rt.isMeshDistanceMaterial===!0){const mt=$.properties.get(rt);mt.light=Ze}return rt}function He(qe,Ye,Ze,Ke,rt){if(qe.visible===!1)return;if(qe.layers.test(Ye.layers)&&(qe.isMesh||qe.isLine||qe.isPoints)&&(qe.castShadow||qe.receiveShadow&&rt===VSMShadowMap)&&(!qe.frustumCulled||j.intersectsObject(qe))){qe.modelViewMatrix.multiplyMatrices(Ze.matrixWorldInverse,qe.matrixWorld);const Et=m.update(qe),bt=qe.material;if(Array.isArray(bt)){const Ct=Et.groups;for(let st=0,at=Ct.length;st<at;st++){const Xe=Ct[st],ht=bt[Xe.materialIndex];if(ht&&ht.visible){const Bt=$e(qe,ht,Ke,rt);qe.onBeforeShadow($,qe,Ye,Ze,Et,Bt,Xe),$.renderBufferDirect(Ze,null,Et,Bt,qe,Xe),qe.onAfterShadow($,qe,Ye,Ze,Et,Bt,Xe)}}}else if(bt.visible){const Ct=$e(qe,bt,Ke,rt);qe.onBeforeShadow($,qe,Ye,Ze,Et,Ct,null),$.renderBufferDirect(Ze,null,Et,Ct,qe,null),qe.onAfterShadow($,qe,Ye,Ze,Et,Ct,null)}}const mt=qe.children;for(let Et=0,bt=mt.length;Et<bt;Et++)He(mt[Et],Ye,Ze,Ke,rt)}function We(qe){qe.target.removeEventListener("dispose",We);for(const Ze in Ee){const Ke=Ee[Ze],rt=qe.target.uuid;rt in Ke&&(Ke[rt].dispose(),delete Ke[rt])}}}function WebGLState($){function m(){let Wt=!1;const zn=new Vector4;let Xt=null;const En=new Vector4(0,0,0,0);return{setMask:function(Fn){Xt!==Fn&&!Wt&&($.colorMask(Fn,Fn,Fn,Fn),Xt=Fn)},setLocked:function(Fn){Wt=Fn},setClear:function(Fn,Zn,hi,bi,_i){_i===!0&&(Fn*=bi,Zn*=bi,hi*=bi),zn.set(Fn,Zn,hi,bi),En.equals(zn)===!1&&($.clearColor(Fn,Zn,hi,bi),En.copy(zn))},reset:function(){Wt=!1,Xt=null,En.set(-1,0,0,0)}}}function L(){let Wt=!1,zn=null,Xt=null,En=null;return{setTest:function(Fn){Fn?Mt($.DEPTH_TEST):Tt($.DEPTH_TEST)},setMask:function(Fn){zn!==Fn&&!Wt&&($.depthMask(Fn),zn=Fn)},setFunc:function(Fn){if(Xt!==Fn){switch(Fn){case NeverDepth:$.depthFunc($.NEVER);break;case AlwaysDepth:$.depthFunc($.ALWAYS);break;case LessDepth:$.depthFunc($.LESS);break;case LessEqualDepth:$.depthFunc($.LEQUAL);break;case EqualDepth:$.depthFunc($.EQUAL);break;case GreaterEqualDepth:$.depthFunc($.GEQUAL);break;case GreaterDepth:$.depthFunc($.GREATER);break;case NotEqualDepth:$.depthFunc($.NOTEQUAL);break;default:$.depthFunc($.LEQUAL)}Xt=Fn}},setLocked:function(Fn){Wt=Fn},setClear:function(Fn){En!==Fn&&($.clearDepth(Fn),En=Fn)},reset:function(){Wt=!1,zn=null,Xt=null,En=null}}}function j(){let Wt=!1,zn=null,Xt=null,En=null,Fn=null,Zn=null,hi=null,bi=null,_i=null;return{setTest:function(ci){Wt||(ci?Mt($.STENCIL_TEST):Tt($.STENCIL_TEST))},setMask:function(ci){zn!==ci&&!Wt&&($.stencilMask(ci),zn=ci)},setFunc:function(ci,ui,Fi){(Xt!==ci||En!==ui||Fn!==Fi)&&($.stencilFunc(ci,ui,Fi),Xt=ci,En=ui,Fn=Fi)},setOp:function(ci,ui,Fi){(Zn!==ci||hi!==ui||bi!==Fi)&&($.stencilOp(ci,ui,Fi),Zn=ci,hi=ui,bi=Fi)},setLocked:function(ci){Wt=ci},setClear:function(ci){_i!==ci&&($.clearStencil(ci),_i=ci)},reset:function(){Wt=!1,zn=null,Xt=null,En=null,Fn=null,Zn=null,hi=null,bi=null,_i=null}}}const ee=new m,re=new L,le=new j,ve=new WeakMap,ye=new WeakMap;let Ee={},Me={},Ce=new WeakMap,De=[],Be=null,ke=!1,Fe=null,Oe=null,Ne=null,ze=null,$e=null,He=null,We=null,qe=new Color(0,0,0),Ye=0,Ze=!1,Ke=null,rt=null,ft=null,mt=null,Et=null;const bt=$.getParameter($.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Ct=!1,st=0;const at=$.getParameter($.VERSION);at.indexOf("WebGL")!==-1?(st=parseFloat(/^WebGL (\d)/.exec(at)[1]),Ct=st>=1):at.indexOf("OpenGL ES")!==-1&&(st=parseFloat(/^OpenGL ES (\d)/.exec(at)[1]),Ct=st>=2);let Xe=null,ht={};const Bt=$.getParameter($.SCISSOR_BOX),Dt=$.getParameter($.VIEWPORT),Jt=new Vector4().fromArray(Bt),tn=new Vector4().fromArray(Dt);function zt(Wt,zn,Xt,En){const Fn=new Uint8Array(4),Zn=$.createTexture();$.bindTexture(Wt,Zn),$.texParameteri(Wt,$.TEXTURE_MIN_FILTER,$.NEAREST),$.texParameteri(Wt,$.TEXTURE_MAG_FILTER,$.NEAREST);for(let hi=0;hi<Xt;hi++)Wt===$.TEXTURE_3D||Wt===$.TEXTURE_2D_ARRAY?$.texImage3D(zn,0,$.RGBA,1,1,En,0,$.RGBA,$.UNSIGNED_BYTE,Fn):$.texImage2D(zn+hi,0,$.RGBA,1,1,0,$.RGBA,$.UNSIGNED_BYTE,Fn);return Zn}const Vt={};Vt[$.TEXTURE_2D]=zt($.TEXTURE_2D,$.TEXTURE_2D,1),Vt[$.TEXTURE_CUBE_MAP]=zt($.TEXTURE_CUBE_MAP,$.TEXTURE_CUBE_MAP_POSITIVE_X,6),Vt[$.TEXTURE_2D_ARRAY]=zt($.TEXTURE_2D_ARRAY,$.TEXTURE_2D_ARRAY,1,1),Vt[$.TEXTURE_3D]=zt($.TEXTURE_3D,$.TEXTURE_3D,1,1),ee.setClear(0,0,0,1),re.setClear(1),le.setClear(0),Mt($.DEPTH_TEST),re.setFunc(LessEqualDepth),Kt(!1),ln(CullFaceBack),Mt($.CULL_FACE),wt(NoBlending);function Mt(Wt){Ee[Wt]!==!0&&($.enable(Wt),Ee[Wt]=!0)}function Tt(Wt){Ee[Wt]!==!1&&($.disable(Wt),Ee[Wt]=!1)}function qt(Wt,zn){return Me[Wt]!==zn?($.bindFramebuffer(Wt,zn),Me[Wt]=zn,Wt===$.DRAW_FRAMEBUFFER&&(Me[$.FRAMEBUFFER]=zn),Wt===$.FRAMEBUFFER&&(Me[$.DRAW_FRAMEBUFFER]=zn),!0):!1}function on(Wt,zn){let Xt=De,En=!1;if(Wt){Xt=Ce.get(zn),Xt===void 0&&(Xt=[],Ce.set(zn,Xt));const Fn=Wt.textures;if(Xt.length!==Fn.length||Xt[0]!==$.COLOR_ATTACHMENT0){for(let Zn=0,hi=Fn.length;Zn<hi;Zn++)Xt[Zn]=$.COLOR_ATTACHMENT0+Zn;Xt.length=Fn.length,En=!0}}else Xt[0]!==$.BACK&&(Xt[0]=$.BACK,En=!0);En&&$.drawBuffers(Xt)}function pn(Wt){return Be!==Wt?($.useProgram(Wt),Be=Wt,!0):!1}const kt={[AddEquation]:$.FUNC_ADD,[SubtractEquation]:$.FUNC_SUBTRACT,[ReverseSubtractEquation]:$.FUNC_REVERSE_SUBTRACT};kt[MinEquation]=$.MIN,kt[MaxEquation]=$.MAX;const Mn={[ZeroFactor]:$.ZERO,[OneFactor]:$.ONE,[SrcColorFactor]:$.SRC_COLOR,[SrcAlphaFactor]:$.SRC_ALPHA,[SrcAlphaSaturateFactor]:$.SRC_ALPHA_SATURATE,[DstColorFactor]:$.DST_COLOR,[DstAlphaFactor]:$.DST_ALPHA,[OneMinusSrcColorFactor]:$.ONE_MINUS_SRC_COLOR,[OneMinusSrcAlphaFactor]:$.ONE_MINUS_SRC_ALPHA,[OneMinusDstColorFactor]:$.ONE_MINUS_DST_COLOR,[OneMinusDstAlphaFactor]:$.ONE_MINUS_DST_ALPHA,[ConstantColorFactor]:$.CONSTANT_COLOR,[OneMinusConstantColorFactor]:$.ONE_MINUS_CONSTANT_COLOR,[ConstantAlphaFactor]:$.CONSTANT_ALPHA,[OneMinusConstantAlphaFactor]:$.ONE_MINUS_CONSTANT_ALPHA};function wt(Wt,zn,Xt,En,Fn,Zn,hi,bi,_i,ci){if(Wt===NoBlending){ke===!0&&(Tt($.BLEND),ke=!1);return}if(ke===!1&&(Mt($.BLEND),ke=!0),Wt!==CustomBlending){if(Wt!==Fe||ci!==Ze){if((Oe!==AddEquation||$e!==AddEquation)&&($.blendEquation($.FUNC_ADD),Oe=AddEquation,$e=AddEquation),ci)switch(Wt){case NormalBlending:$.blendFuncSeparate($.ONE,$.ONE_MINUS_SRC_ALPHA,$.ONE,$.ONE_MINUS_SRC_ALPHA);break;case AdditiveBlending:$.blendFunc($.ONE,$.ONE);break;case SubtractiveBlending:$.blendFuncSeparate($.ZERO,$.ONE_MINUS_SRC_COLOR,$.ZERO,$.ONE);break;case MultiplyBlending:$.blendFuncSeparate($.ZERO,$.SRC_COLOR,$.ZERO,$.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Wt);break}else switch(Wt){case NormalBlending:$.blendFuncSeparate($.SRC_ALPHA,$.ONE_MINUS_SRC_ALPHA,$.ONE,$.ONE_MINUS_SRC_ALPHA);break;case AdditiveBlending:$.blendFunc($.SRC_ALPHA,$.ONE);break;case SubtractiveBlending:$.blendFuncSeparate($.ZERO,$.ONE_MINUS_SRC_COLOR,$.ZERO,$.ONE);break;case MultiplyBlending:$.blendFunc($.ZERO,$.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Wt);break}Ne=null,ze=null,He=null,We=null,qe.set(0,0,0),Ye=0,Fe=Wt,Ze=ci}return}Fn=Fn||zn,Zn=Zn||Xt,hi=hi||En,(zn!==Oe||Fn!==$e)&&($.blendEquationSeparate(kt[zn],kt[Fn]),Oe=zn,$e=Fn),(Xt!==Ne||En!==ze||Zn!==He||hi!==We)&&($.blendFuncSeparate(Mn[Xt],Mn[En],Mn[Zn],Mn[hi]),Ne=Xt,ze=En,He=Zn,We=hi),(bi.equals(qe)===!1||_i!==Ye)&&($.blendColor(bi.r,bi.g,bi.b,_i),qe.copy(bi),Ye=_i),Fe=Wt,Ze=!1}function It(Wt,zn){Wt.side===DoubleSide?Tt($.CULL_FACE):Mt($.CULL_FACE);let Xt=Wt.side===BackSide;zn&&(Xt=!Xt),Kt(Xt),Wt.blending===NormalBlending&&Wt.transparent===!1?wt(NoBlending):wt(Wt.blending,Wt.blendEquation,Wt.blendSrc,Wt.blendDst,Wt.blendEquationAlpha,Wt.blendSrcAlpha,Wt.blendDstAlpha,Wt.blendColor,Wt.blendAlpha,Wt.premultipliedAlpha),re.setFunc(Wt.depthFunc),re.setTest(Wt.depthTest),re.setMask(Wt.depthWrite),ee.setMask(Wt.colorWrite);const En=Wt.stencilWrite;le.setTest(En),En&&(le.setMask(Wt.stencilWriteMask),le.setFunc(Wt.stencilFunc,Wt.stencilRef,Wt.stencilFuncMask),le.setOp(Wt.stencilFail,Wt.stencilZFail,Wt.stencilZPass)),gn(Wt.polygonOffset,Wt.polygonOffsetFactor,Wt.polygonOffsetUnits),Wt.alphaToCoverage===!0?Mt($.SAMPLE_ALPHA_TO_COVERAGE):Tt($.SAMPLE_ALPHA_TO_COVERAGE)}function Kt(Wt){Ke!==Wt&&(Wt?$.frontFace($.CW):$.frontFace($.CCW),Ke=Wt)}function ln(Wt){Wt!==CullFaceNone?(Mt($.CULL_FACE),Wt!==rt&&(Wt===CullFaceBack?$.cullFace($.BACK):Wt===CullFaceFront?$.cullFace($.FRONT):$.cullFace($.FRONT_AND_BACK))):Tt($.CULL_FACE),rt=Wt}function nn(Wt){Wt!==ft&&(Ct&&$.lineWidth(Wt),ft=Wt)}function gn(Wt,zn,Xt){Wt?(Mt($.POLYGON_OFFSET_FILL),(mt!==zn||Et!==Xt)&&($.polygonOffset(zn,Xt),mt=zn,Et=Xt)):Tt($.POLYGON_OFFSET_FILL)}function xn(Wt){Wt?Mt($.SCISSOR_TEST):Tt($.SCISSOR_TEST)}function St(Wt){Wt===void 0&&(Wt=$.TEXTURE0+bt-1),Xe!==Wt&&($.activeTexture(Wt),Xe=Wt)}function At(Wt,zn,Xt){Xt===void 0&&(Xe===null?Xt=$.TEXTURE0+bt-1:Xt=Xe);let En=ht[Xt];En===void 0&&(En={type:void 0,texture:void 0},ht[Xt]=En),(En.type!==Wt||En.texture!==zn)&&(Xe!==Xt&&($.activeTexture(Xt),Xe=Xt),$.bindTexture(Wt,zn||Vt[Wt]),En.type=Wt,En.texture=zn)}function Ut(){const Wt=ht[Xe];Wt!==void 0&&Wt.type!==void 0&&($.bindTexture(Wt.type,null),Wt.type=void 0,Wt.texture=void 0)}function Zt(){try{$.compressedTexImage2D.apply($,arguments)}catch(Wt){console.error("THREE.WebGLState:",Wt)}}function cn(){try{$.compressedTexImage3D.apply($,arguments)}catch(Wt){console.error("THREE.WebGLState:",Wt)}}function sn(){try{$.texSubImage2D.apply($,arguments)}catch(Wt){console.error("THREE.WebGLState:",Wt)}}function bn(){try{$.texSubImage3D.apply($,arguments)}catch(Wt){console.error("THREE.WebGLState:",Wt)}}function vn(){try{$.compressedTexSubImage2D.apply($,arguments)}catch(Wt){console.error("THREE.WebGLState:",Wt)}}function Cn(){try{$.compressedTexSubImage3D.apply($,arguments)}catch(Wt){console.error("THREE.WebGLState:",Wt)}}function Un(){try{$.texStorage2D.apply($,arguments)}catch(Wt){console.error("THREE.WebGLState:",Wt)}}function yn(){try{$.texStorage3D.apply($,arguments)}catch(Wt){console.error("THREE.WebGLState:",Wt)}}function $n(){try{$.texImage2D.apply($,arguments)}catch(Wt){console.error("THREE.WebGLState:",Wt)}}function Jn(){try{$.texImage3D.apply($,arguments)}catch(Wt){console.error("THREE.WebGLState:",Wt)}}function Hn(Wt){Jt.equals(Wt)===!1&&($.scissor(Wt.x,Wt.y,Wt.z,Wt.w),Jt.copy(Wt))}function Bn(Wt){tn.equals(Wt)===!1&&($.viewport(Wt.x,Wt.y,Wt.z,Wt.w),tn.copy(Wt))}function Yn(Wt,zn){let Xt=ye.get(zn);Xt===void 0&&(Xt=new WeakMap,ye.set(zn,Xt));let En=Xt.get(Wt);En===void 0&&(En=$.getUniformBlockIndex(zn,Wt.name),Xt.set(Wt,En))}function Qn(Wt,zn){const En=ye.get(zn).get(Wt);ve.get(zn)!==En&&($.uniformBlockBinding(zn,En,Wt.__bindingPointIndex),ve.set(zn,En))}function Kn(){$.disable($.BLEND),$.disable($.CULL_FACE),$.disable($.DEPTH_TEST),$.disable($.POLYGON_OFFSET_FILL),$.disable($.SCISSOR_TEST),$.disable($.STENCIL_TEST),$.disable($.SAMPLE_ALPHA_TO_COVERAGE),$.blendEquation($.FUNC_ADD),$.blendFunc($.ONE,$.ZERO),$.blendFuncSeparate($.ONE,$.ZERO,$.ONE,$.ZERO),$.blendColor(0,0,0,0),$.colorMask(!0,!0,!0,!0),$.clearColor(0,0,0,0),$.depthMask(!0),$.depthFunc($.LESS),$.clearDepth(1),$.stencilMask(4294967295),$.stencilFunc($.ALWAYS,0,4294967295),$.stencilOp($.KEEP,$.KEEP,$.KEEP),$.clearStencil(0),$.cullFace($.BACK),$.frontFace($.CCW),$.polygonOffset(0,0),$.activeTexture($.TEXTURE0),$.bindFramebuffer($.FRAMEBUFFER,null),$.bindFramebuffer($.DRAW_FRAMEBUFFER,null),$.bindFramebuffer($.READ_FRAMEBUFFER,null),$.useProgram(null),$.lineWidth(1),$.scissor(0,0,$.canvas.width,$.canvas.height),$.viewport(0,0,$.canvas.width,$.canvas.height),Ee={},Xe=null,ht={},Me={},Ce=new WeakMap,De=[],Be=null,ke=!1,Fe=null,Oe=null,Ne=null,ze=null,$e=null,He=null,We=null,qe=new Color(0,0,0),Ye=0,Ze=!1,Ke=null,rt=null,ft=null,mt=null,Et=null,Jt.set(0,0,$.canvas.width,$.canvas.height),tn.set(0,0,$.canvas.width,$.canvas.height),ee.reset(),re.reset(),le.reset()}return{buffers:{color:ee,depth:re,stencil:le},enable:Mt,disable:Tt,bindFramebuffer:qt,drawBuffers:on,useProgram:pn,setBlending:wt,setMaterial:It,setFlipSided:Kt,setCullFace:ln,setLineWidth:nn,setPolygonOffset:gn,setScissorTest:xn,activeTexture:St,bindTexture:At,unbindTexture:Ut,compressedTexImage2D:Zt,compressedTexImage3D:cn,texImage2D:$n,texImage3D:Jn,updateUBOMapping:Yn,uniformBlockBinding:Qn,texStorage2D:Un,texStorage3D:yn,texSubImage2D:sn,texSubImage3D:bn,compressedTexSubImage2D:vn,compressedTexSubImage3D:Cn,scissor:Hn,viewport:Bn,reset:Kn}}function WebGLTextures($,m,L,j,ee,re,le){const ve=m.has("WEBGL_multisampled_render_to_texture")?m.get("WEBGL_multisampled_render_to_texture"):null,ye=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),Ee=new Vector2,Me=new WeakMap;let Ce;const De=new WeakMap;let Be=!1;try{Be=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function ke(St,At){return Be?new OffscreenCanvas(St,At):createElementNS("canvas")}function Fe(St,At,Ut){let Zt=1;const cn=xn(St);if((cn.width>Ut||cn.height>Ut)&&(Zt=Ut/Math.max(cn.width,cn.height)),Zt<1)if(typeof HTMLImageElement<"u"&&St instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&St instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&St instanceof ImageBitmap||typeof VideoFrame<"u"&&St instanceof VideoFrame){const sn=Math.floor(Zt*cn.width),bn=Math.floor(Zt*cn.height);Ce===void 0&&(Ce=ke(sn,bn));const vn=At?ke(sn,bn):Ce;return vn.width=sn,vn.height=bn,vn.getContext("2d").drawImage(St,0,0,sn,bn),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+cn.width+"x"+cn.height+") to ("+sn+"x"+bn+")."),vn}else return"data"in St&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+cn.width+"x"+cn.height+")."),St;return St}function Oe(St){return St.generateMipmaps&&St.minFilter!==NearestFilter&&St.minFilter!==LinearFilter}function Ne(St){$.generateMipmap(St)}function ze(St,At,Ut,Zt,cn=!1){if(St!==null){if($[St]!==void 0)return $[St];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+St+"'")}let sn=At;if(At===$.RED&&(Ut===$.FLOAT&&(sn=$.R32F),Ut===$.HALF_FLOAT&&(sn=$.R16F),Ut===$.UNSIGNED_BYTE&&(sn=$.R8)),At===$.RED_INTEGER&&(Ut===$.UNSIGNED_BYTE&&(sn=$.R8UI),Ut===$.UNSIGNED_SHORT&&(sn=$.R16UI),Ut===$.UNSIGNED_INT&&(sn=$.R32UI),Ut===$.BYTE&&(sn=$.R8I),Ut===$.SHORT&&(sn=$.R16I),Ut===$.INT&&(sn=$.R32I)),At===$.RG&&(Ut===$.FLOAT&&(sn=$.RG32F),Ut===$.HALF_FLOAT&&(sn=$.RG16F),Ut===$.UNSIGNED_BYTE&&(sn=$.RG8)),At===$.RG_INTEGER&&(Ut===$.UNSIGNED_BYTE&&(sn=$.RG8UI),Ut===$.UNSIGNED_SHORT&&(sn=$.RG16UI),Ut===$.UNSIGNED_INT&&(sn=$.RG32UI),Ut===$.BYTE&&(sn=$.RG8I),Ut===$.SHORT&&(sn=$.RG16I),Ut===$.INT&&(sn=$.RG32I)),At===$.RGB&&Ut===$.UNSIGNED_INT_5_9_9_9_REV&&(sn=$.RGB9_E5),At===$.RGBA){const bn=cn?LinearTransfer:ColorManagement.getTransfer(Zt);Ut===$.FLOAT&&(sn=$.RGBA32F),Ut===$.HALF_FLOAT&&(sn=$.RGBA16F),Ut===$.UNSIGNED_BYTE&&(sn=bn===SRGBTransfer?$.SRGB8_ALPHA8:$.RGBA8),Ut===$.UNSIGNED_SHORT_4_4_4_4&&(sn=$.RGBA4),Ut===$.UNSIGNED_SHORT_5_5_5_1&&(sn=$.RGB5_A1)}return(sn===$.R16F||sn===$.R32F||sn===$.RG16F||sn===$.RG32F||sn===$.RGBA16F||sn===$.RGBA32F)&&m.get("EXT_color_buffer_float"),sn}function $e(St,At){let Ut;return St?At===null||At===UnsignedIntType||At===UnsignedInt248Type?Ut=$.DEPTH24_STENCIL8:At===FloatType?Ut=$.DEPTH32F_STENCIL8:At===UnsignedShortType&&(Ut=$.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):At===null||At===UnsignedIntType||At===UnsignedInt248Type?Ut=$.DEPTH_COMPONENT24:At===FloatType?Ut=$.DEPTH_COMPONENT32F:At===UnsignedShortType&&(Ut=$.DEPTH_COMPONENT16),Ut}function He(St,At){return Oe(St)===!0||St.isFramebufferTexture&&St.minFilter!==NearestFilter&&St.minFilter!==LinearFilter?Math.log2(Math.max(At.width,At.height))+1:St.mipmaps!==void 0&&St.mipmaps.length>0?St.mipmaps.length:St.isCompressedTexture&&Array.isArray(St.image)?At.mipmaps.length:1}function We(St){const At=St.target;At.removeEventListener("dispose",We),Ye(At),At.isVideoTexture&&Me.delete(At)}function qe(St){const At=St.target;At.removeEventListener("dispose",qe),Ke(At)}function Ye(St){const At=j.get(St);if(At.__webglInit===void 0)return;const Ut=St.source,Zt=De.get(Ut);if(Zt){const cn=Zt[At.__cacheKey];cn.usedTimes--,cn.usedTimes===0&&Ze(St),Object.keys(Zt).length===0&&De.delete(Ut)}j.remove(St)}function Ze(St){const At=j.get(St);$.deleteTexture(At.__webglTexture);const Ut=St.source,Zt=De.get(Ut);delete Zt[At.__cacheKey],le.memory.textures--}function Ke(St){const At=j.get(St);if(St.depthTexture&&St.depthTexture.dispose(),St.isWebGLCubeRenderTarget)for(let Zt=0;Zt<6;Zt++){if(Array.isArray(At.__webglFramebuffer[Zt]))for(let cn=0;cn<At.__webglFramebuffer[Zt].length;cn++)$.deleteFramebuffer(At.__webglFramebuffer[Zt][cn]);else $.deleteFramebuffer(At.__webglFramebuffer[Zt]);At.__webglDepthbuffer&&$.deleteRenderbuffer(At.__webglDepthbuffer[Zt])}else{if(Array.isArray(At.__webglFramebuffer))for(let Zt=0;Zt<At.__webglFramebuffer.length;Zt++)$.deleteFramebuffer(At.__webglFramebuffer[Zt]);else $.deleteFramebuffer(At.__webglFramebuffer);if(At.__webglDepthbuffer&&$.deleteRenderbuffer(At.__webglDepthbuffer),At.__webglMultisampledFramebuffer&&$.deleteFramebuffer(At.__webglMultisampledFramebuffer),At.__webglColorRenderbuffer)for(let Zt=0;Zt<At.__webglColorRenderbuffer.length;Zt++)At.__webglColorRenderbuffer[Zt]&&$.deleteRenderbuffer(At.__webglColorRenderbuffer[Zt]);At.__webglDepthRenderbuffer&&$.deleteRenderbuffer(At.__webglDepthRenderbuffer)}const Ut=St.textures;for(let Zt=0,cn=Ut.length;Zt<cn;Zt++){const sn=j.get(Ut[Zt]);sn.__webglTexture&&($.deleteTexture(sn.__webglTexture),le.memory.textures--),j.remove(Ut[Zt])}j.remove(St)}let rt=0;function ft(){rt=0}function mt(){const St=rt;return St>=ee.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+St+" texture units while this GPU supports only "+ee.maxTextures),rt+=1,St}function Et(St){const At=[];return At.push(St.wrapS),At.push(St.wrapT),At.push(St.wrapR||0),At.push(St.magFilter),At.push(St.minFilter),At.push(St.anisotropy),At.push(St.internalFormat),At.push(St.format),At.push(St.type),At.push(St.generateMipmaps),At.push(St.premultiplyAlpha),At.push(St.flipY),At.push(St.unpackAlignment),At.push(St.colorSpace),At.join()}function bt(St,At){const Ut=j.get(St);if(St.isVideoTexture&&nn(St),St.isRenderTargetTexture===!1&&St.version>0&&Ut.__version!==St.version){const Zt=St.image;if(Zt===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Zt.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{tn(Ut,St,At);return}}L.bindTexture($.TEXTURE_2D,Ut.__webglTexture,$.TEXTURE0+At)}function Ct(St,At){const Ut=j.get(St);if(St.version>0&&Ut.__version!==St.version){tn(Ut,St,At);return}L.bindTexture($.TEXTURE_2D_ARRAY,Ut.__webglTexture,$.TEXTURE0+At)}function st(St,At){const Ut=j.get(St);if(St.version>0&&Ut.__version!==St.version){tn(Ut,St,At);return}L.bindTexture($.TEXTURE_3D,Ut.__webglTexture,$.TEXTURE0+At)}function at(St,At){const Ut=j.get(St);if(St.version>0&&Ut.__version!==St.version){zt(Ut,St,At);return}L.bindTexture($.TEXTURE_CUBE_MAP,Ut.__webglTexture,$.TEXTURE0+At)}const Xe={[RepeatWrapping]:$.REPEAT,[ClampToEdgeWrapping]:$.CLAMP_TO_EDGE,[MirroredRepeatWrapping]:$.MIRRORED_REPEAT},ht={[NearestFilter]:$.NEAREST,[NearestMipmapNearestFilter]:$.NEAREST_MIPMAP_NEAREST,[NearestMipmapLinearFilter]:$.NEAREST_MIPMAP_LINEAR,[LinearFilter]:$.LINEAR,[LinearMipmapNearestFilter]:$.LINEAR_MIPMAP_NEAREST,[LinearMipmapLinearFilter]:$.LINEAR_MIPMAP_LINEAR},Bt={[NeverCompare]:$.NEVER,[AlwaysCompare]:$.ALWAYS,[LessCompare]:$.LESS,[LessEqualCompare]:$.LEQUAL,[EqualCompare]:$.EQUAL,[GreaterEqualCompare]:$.GEQUAL,[GreaterCompare]:$.GREATER,[NotEqualCompare]:$.NOTEQUAL};function Dt(St,At){if(At.type===FloatType&&m.has("OES_texture_float_linear")===!1&&(At.magFilter===LinearFilter||At.magFilter===LinearMipmapNearestFilter||At.magFilter===NearestMipmapLinearFilter||At.magFilter===LinearMipmapLinearFilter||At.minFilter===LinearFilter||At.minFilter===LinearMipmapNearestFilter||At.minFilter===NearestMipmapLinearFilter||At.minFilter===LinearMipmapLinearFilter)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),$.texParameteri(St,$.TEXTURE_WRAP_S,Xe[At.wrapS]),$.texParameteri(St,$.TEXTURE_WRAP_T,Xe[At.wrapT]),(St===$.TEXTURE_3D||St===$.TEXTURE_2D_ARRAY)&&$.texParameteri(St,$.TEXTURE_WRAP_R,Xe[At.wrapR]),$.texParameteri(St,$.TEXTURE_MAG_FILTER,ht[At.magFilter]),$.texParameteri(St,$.TEXTURE_MIN_FILTER,ht[At.minFilter]),At.compareFunction&&($.texParameteri(St,$.TEXTURE_COMPARE_MODE,$.COMPARE_REF_TO_TEXTURE),$.texParameteri(St,$.TEXTURE_COMPARE_FUNC,Bt[At.compareFunction])),m.has("EXT_texture_filter_anisotropic")===!0){if(At.magFilter===NearestFilter||At.minFilter!==NearestMipmapLinearFilter&&At.minFilter!==LinearMipmapLinearFilter||At.type===FloatType&&m.has("OES_texture_float_linear")===!1)return;if(At.anisotropy>1||j.get(At).__currentAnisotropy){const Ut=m.get("EXT_texture_filter_anisotropic");$.texParameterf(St,Ut.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(At.anisotropy,ee.getMaxAnisotropy())),j.get(At).__currentAnisotropy=At.anisotropy}}}function Jt(St,At){let Ut=!1;St.__webglInit===void 0&&(St.__webglInit=!0,At.addEventListener("dispose",We));const Zt=At.source;let cn=De.get(Zt);cn===void 0&&(cn={},De.set(Zt,cn));const sn=Et(At);if(sn!==St.__cacheKey){cn[sn]===void 0&&(cn[sn]={texture:$.createTexture(),usedTimes:0},le.memory.textures++,Ut=!0),cn[sn].usedTimes++;const bn=cn[St.__cacheKey];bn!==void 0&&(cn[St.__cacheKey].usedTimes--,bn.usedTimes===0&&Ze(At)),St.__cacheKey=sn,St.__webglTexture=cn[sn].texture}return Ut}function tn(St,At,Ut){let Zt=$.TEXTURE_2D;(At.isDataArrayTexture||At.isCompressedArrayTexture)&&(Zt=$.TEXTURE_2D_ARRAY),At.isData3DTexture&&(Zt=$.TEXTURE_3D);const cn=Jt(St,At),sn=At.source;L.bindTexture(Zt,St.__webglTexture,$.TEXTURE0+Ut);const bn=j.get(sn);if(sn.version!==bn.__version||cn===!0){L.activeTexture($.TEXTURE0+Ut);const vn=ColorManagement.getPrimaries(ColorManagement.workingColorSpace),Cn=At.colorSpace===NoColorSpace?null:ColorManagement.getPrimaries(At.colorSpace),Un=At.colorSpace===NoColorSpace||vn===Cn?$.NONE:$.BROWSER_DEFAULT_WEBGL;$.pixelStorei($.UNPACK_FLIP_Y_WEBGL,At.flipY),$.pixelStorei($.UNPACK_PREMULTIPLY_ALPHA_WEBGL,At.premultiplyAlpha),$.pixelStorei($.UNPACK_ALIGNMENT,At.unpackAlignment),$.pixelStorei($.UNPACK_COLORSPACE_CONVERSION_WEBGL,Un);let yn=Fe(At.image,!1,ee.maxTextureSize);yn=gn(At,yn);const $n=re.convert(At.format,At.colorSpace),Jn=re.convert(At.type);let Hn=ze(At.internalFormat,$n,Jn,At.colorSpace,At.isVideoTexture);Dt(Zt,At);let Bn;const Yn=At.mipmaps,Qn=At.isVideoTexture!==!0,Kn=bn.__version===void 0||cn===!0,Wt=sn.dataReady,zn=He(At,yn);if(At.isDepthTexture)Hn=$e(At.format===DepthStencilFormat,At.type),Kn&&(Qn?L.texStorage2D($.TEXTURE_2D,1,Hn,yn.width,yn.height):L.texImage2D($.TEXTURE_2D,0,Hn,yn.width,yn.height,0,$n,Jn,null));else if(At.isDataTexture)if(Yn.length>0){Qn&&Kn&&L.texStorage2D($.TEXTURE_2D,zn,Hn,Yn[0].width,Yn[0].height);for(let Xt=0,En=Yn.length;Xt<En;Xt++)Bn=Yn[Xt],Qn?Wt&&L.texSubImage2D($.TEXTURE_2D,Xt,0,0,Bn.width,Bn.height,$n,Jn,Bn.data):L.texImage2D($.TEXTURE_2D,Xt,Hn,Bn.width,Bn.height,0,$n,Jn,Bn.data);At.generateMipmaps=!1}else Qn?(Kn&&L.texStorage2D($.TEXTURE_2D,zn,Hn,yn.width,yn.height),Wt&&L.texSubImage2D($.TEXTURE_2D,0,0,0,yn.width,yn.height,$n,Jn,yn.data)):L.texImage2D($.TEXTURE_2D,0,Hn,yn.width,yn.height,0,$n,Jn,yn.data);else if(At.isCompressedTexture)if(At.isCompressedArrayTexture){Qn&&Kn&&L.texStorage3D($.TEXTURE_2D_ARRAY,zn,Hn,Yn[0].width,Yn[0].height,yn.depth);for(let Xt=0,En=Yn.length;Xt<En;Xt++)if(Bn=Yn[Xt],At.format!==RGBAFormat)if($n!==null)if(Qn){if(Wt)if(At.layerUpdates.size>0){for(const Fn of At.layerUpdates){const Zn=Bn.width*Bn.height;L.compressedTexSubImage3D($.TEXTURE_2D_ARRAY,Xt,0,0,Fn,Bn.width,Bn.height,1,$n,Bn.data.slice(Zn*Fn,Zn*(Fn+1)),0,0)}At.clearLayerUpdates()}else L.compressedTexSubImage3D($.TEXTURE_2D_ARRAY,Xt,0,0,0,Bn.width,Bn.height,yn.depth,$n,Bn.data,0,0)}else L.compressedTexImage3D($.TEXTURE_2D_ARRAY,Xt,Hn,Bn.width,Bn.height,yn.depth,0,Bn.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Qn?Wt&&L.texSubImage3D($.TEXTURE_2D_ARRAY,Xt,0,0,0,Bn.width,Bn.height,yn.depth,$n,Jn,Bn.data):L.texImage3D($.TEXTURE_2D_ARRAY,Xt,Hn,Bn.width,Bn.height,yn.depth,0,$n,Jn,Bn.data)}else{Qn&&Kn&&L.texStorage2D($.TEXTURE_2D,zn,Hn,Yn[0].width,Yn[0].height);for(let Xt=0,En=Yn.length;Xt<En;Xt++)Bn=Yn[Xt],At.format!==RGBAFormat?$n!==null?Qn?Wt&&L.compressedTexSubImage2D($.TEXTURE_2D,Xt,0,0,Bn.width,Bn.height,$n,Bn.data):L.compressedTexImage2D($.TEXTURE_2D,Xt,Hn,Bn.width,Bn.height,0,Bn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Qn?Wt&&L.texSubImage2D($.TEXTURE_2D,Xt,0,0,Bn.width,Bn.height,$n,Jn,Bn.data):L.texImage2D($.TEXTURE_2D,Xt,Hn,Bn.width,Bn.height,0,$n,Jn,Bn.data)}else if(At.isDataArrayTexture)if(Qn){if(Kn&&L.texStorage3D($.TEXTURE_2D_ARRAY,zn,Hn,yn.width,yn.height,yn.depth),Wt)if(At.layerUpdates.size>0){let Xt;switch(Jn){case $.UNSIGNED_BYTE:switch($n){case $.ALPHA:Xt=1;break;case $.LUMINANCE:Xt=1;break;case $.LUMINANCE_ALPHA:Xt=2;break;case $.RGB:Xt=3;break;case $.RGBA:Xt=4;break;default:throw new Error(`Unknown texel size for format ${$n}.`)}break;case $.UNSIGNED_SHORT_4_4_4_4:case $.UNSIGNED_SHORT_5_5_5_1:case $.UNSIGNED_SHORT_5_6_5:Xt=1;break;default:throw new Error(`Unknown texel size for type ${Jn}.`)}const En=yn.width*yn.height*Xt;for(const Fn of At.layerUpdates)L.texSubImage3D($.TEXTURE_2D_ARRAY,0,0,0,Fn,yn.width,yn.height,1,$n,Jn,yn.data.slice(En*Fn,En*(Fn+1)));At.clearLayerUpdates()}else L.texSubImage3D($.TEXTURE_2D_ARRAY,0,0,0,0,yn.width,yn.height,yn.depth,$n,Jn,yn.data)}else L.texImage3D($.TEXTURE_2D_ARRAY,0,Hn,yn.width,yn.height,yn.depth,0,$n,Jn,yn.data);else if(At.isData3DTexture)Qn?(Kn&&L.texStorage3D($.TEXTURE_3D,zn,Hn,yn.width,yn.height,yn.depth),Wt&&L.texSubImage3D($.TEXTURE_3D,0,0,0,0,yn.width,yn.height,yn.depth,$n,Jn,yn.data)):L.texImage3D($.TEXTURE_3D,0,Hn,yn.width,yn.height,yn.depth,0,$n,Jn,yn.data);else if(At.isFramebufferTexture){if(Kn)if(Qn)L.texStorage2D($.TEXTURE_2D,zn,Hn,yn.width,yn.height);else{let Xt=yn.width,En=yn.height;for(let Fn=0;Fn<zn;Fn++)L.texImage2D($.TEXTURE_2D,Fn,Hn,Xt,En,0,$n,Jn,null),Xt>>=1,En>>=1}}else if(Yn.length>0){if(Qn&&Kn){const Xt=xn(Yn[0]);L.texStorage2D($.TEXTURE_2D,zn,Hn,Xt.width,Xt.height)}for(let Xt=0,En=Yn.length;Xt<En;Xt++)Bn=Yn[Xt],Qn?Wt&&L.texSubImage2D($.TEXTURE_2D,Xt,0,0,$n,Jn,Bn):L.texImage2D($.TEXTURE_2D,Xt,Hn,$n,Jn,Bn);At.generateMipmaps=!1}else if(Qn){if(Kn){const Xt=xn(yn);L.texStorage2D($.TEXTURE_2D,zn,Hn,Xt.width,Xt.height)}Wt&&L.texSubImage2D($.TEXTURE_2D,0,0,0,$n,Jn,yn)}else L.texImage2D($.TEXTURE_2D,0,Hn,$n,Jn,yn);Oe(At)&&Ne(Zt),bn.__version=sn.version,At.onUpdate&&At.onUpdate(At)}St.__version=At.version}function zt(St,At,Ut){if(At.image.length!==6)return;const Zt=Jt(St,At),cn=At.source;L.bindTexture($.TEXTURE_CUBE_MAP,St.__webglTexture,$.TEXTURE0+Ut);const sn=j.get(cn);if(cn.version!==sn.__version||Zt===!0){L.activeTexture($.TEXTURE0+Ut);const bn=ColorManagement.getPrimaries(ColorManagement.workingColorSpace),vn=At.colorSpace===NoColorSpace?null:ColorManagement.getPrimaries(At.colorSpace),Cn=At.colorSpace===NoColorSpace||bn===vn?$.NONE:$.BROWSER_DEFAULT_WEBGL;$.pixelStorei($.UNPACK_FLIP_Y_WEBGL,At.flipY),$.pixelStorei($.UNPACK_PREMULTIPLY_ALPHA_WEBGL,At.premultiplyAlpha),$.pixelStorei($.UNPACK_ALIGNMENT,At.unpackAlignment),$.pixelStorei($.UNPACK_COLORSPACE_CONVERSION_WEBGL,Cn);const Un=At.isCompressedTexture||At.image[0].isCompressedTexture,yn=At.image[0]&&At.image[0].isDataTexture,$n=[];for(let En=0;En<6;En++)!Un&&!yn?$n[En]=Fe(At.image[En],!0,ee.maxCubemapSize):$n[En]=yn?At.image[En].image:At.image[En],$n[En]=gn(At,$n[En]);const Jn=$n[0],Hn=re.convert(At.format,At.colorSpace),Bn=re.convert(At.type),Yn=ze(At.internalFormat,Hn,Bn,At.colorSpace),Qn=At.isVideoTexture!==!0,Kn=sn.__version===void 0||Zt===!0,Wt=cn.dataReady;let zn=He(At,Jn);Dt($.TEXTURE_CUBE_MAP,At);let Xt;if(Un){Qn&&Kn&&L.texStorage2D($.TEXTURE_CUBE_MAP,zn,Yn,Jn.width,Jn.height);for(let En=0;En<6;En++){Xt=$n[En].mipmaps;for(let Fn=0;Fn<Xt.length;Fn++){const Zn=Xt[Fn];At.format!==RGBAFormat?Hn!==null?Qn?Wt&&L.compressedTexSubImage2D($.TEXTURE_CUBE_MAP_POSITIVE_X+En,Fn,0,0,Zn.width,Zn.height,Hn,Zn.data):L.compressedTexImage2D($.TEXTURE_CUBE_MAP_POSITIVE_X+En,Fn,Yn,Zn.width,Zn.height,0,Zn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Qn?Wt&&L.texSubImage2D($.TEXTURE_CUBE_MAP_POSITIVE_X+En,Fn,0,0,Zn.width,Zn.height,Hn,Bn,Zn.data):L.texImage2D($.TEXTURE_CUBE_MAP_POSITIVE_X+En,Fn,Yn,Zn.width,Zn.height,0,Hn,Bn,Zn.data)}}}else{if(Xt=At.mipmaps,Qn&&Kn){Xt.length>0&&zn++;const En=xn($n[0]);L.texStorage2D($.TEXTURE_CUBE_MAP,zn,Yn,En.width,En.height)}for(let En=0;En<6;En++)if(yn){Qn?Wt&&L.texSubImage2D($.TEXTURE_CUBE_MAP_POSITIVE_X+En,0,0,0,$n[En].width,$n[En].height,Hn,Bn,$n[En].data):L.texImage2D($.TEXTURE_CUBE_MAP_POSITIVE_X+En,0,Yn,$n[En].width,$n[En].height,0,Hn,Bn,$n[En].data);for(let Fn=0;Fn<Xt.length;Fn++){const hi=Xt[Fn].image[En].image;Qn?Wt&&L.texSubImage2D($.TEXTURE_CUBE_MAP_POSITIVE_X+En,Fn+1,0,0,hi.width,hi.height,Hn,Bn,hi.data):L.texImage2D($.TEXTURE_CUBE_MAP_POSITIVE_X+En,Fn+1,Yn,hi.width,hi.height,0,Hn,Bn,hi.data)}}else{Qn?Wt&&L.texSubImage2D($.TEXTURE_CUBE_MAP_POSITIVE_X+En,0,0,0,Hn,Bn,$n[En]):L.texImage2D($.TEXTURE_CUBE_MAP_POSITIVE_X+En,0,Yn,Hn,Bn,$n[En]);for(let Fn=0;Fn<Xt.length;Fn++){const Zn=Xt[Fn];Qn?Wt&&L.texSubImage2D($.TEXTURE_CUBE_MAP_POSITIVE_X+En,Fn+1,0,0,Hn,Bn,Zn.image[En]):L.texImage2D($.TEXTURE_CUBE_MAP_POSITIVE_X+En,Fn+1,Yn,Hn,Bn,Zn.image[En])}}}Oe(At)&&Ne($.TEXTURE_CUBE_MAP),sn.__version=cn.version,At.onUpdate&&At.onUpdate(At)}St.__version=At.version}function Vt(St,At,Ut,Zt,cn,sn){const bn=re.convert(Ut.format,Ut.colorSpace),vn=re.convert(Ut.type),Cn=ze(Ut.internalFormat,bn,vn,Ut.colorSpace);if(!j.get(At).__hasExternalTextures){const yn=Math.max(1,At.width>>sn),$n=Math.max(1,At.height>>sn);cn===$.TEXTURE_3D||cn===$.TEXTURE_2D_ARRAY?L.texImage3D(cn,sn,Cn,yn,$n,At.depth,0,bn,vn,null):L.texImage2D(cn,sn,Cn,yn,$n,0,bn,vn,null)}L.bindFramebuffer($.FRAMEBUFFER,St),ln(At)?ve.framebufferTexture2DMultisampleEXT($.FRAMEBUFFER,Zt,cn,j.get(Ut).__webglTexture,0,Kt(At)):(cn===$.TEXTURE_2D||cn>=$.TEXTURE_CUBE_MAP_POSITIVE_X&&cn<=$.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&$.framebufferTexture2D($.FRAMEBUFFER,Zt,cn,j.get(Ut).__webglTexture,sn),L.bindFramebuffer($.FRAMEBUFFER,null)}function Mt(St,At,Ut){if($.bindRenderbuffer($.RENDERBUFFER,St),At.depthBuffer){const Zt=At.depthTexture,cn=Zt&&Zt.isDepthTexture?Zt.type:null,sn=$e(At.stencilBuffer,cn),bn=At.stencilBuffer?$.DEPTH_STENCIL_ATTACHMENT:$.DEPTH_ATTACHMENT,vn=Kt(At);ln(At)?ve.renderbufferStorageMultisampleEXT($.RENDERBUFFER,vn,sn,At.width,At.height):Ut?$.renderbufferStorageMultisample($.RENDERBUFFER,vn,sn,At.width,At.height):$.renderbufferStorage($.RENDERBUFFER,sn,At.width,At.height),$.framebufferRenderbuffer($.FRAMEBUFFER,bn,$.RENDERBUFFER,St)}else{const Zt=At.textures;for(let cn=0;cn<Zt.length;cn++){const sn=Zt[cn],bn=re.convert(sn.format,sn.colorSpace),vn=re.convert(sn.type),Cn=ze(sn.internalFormat,bn,vn,sn.colorSpace),Un=Kt(At);Ut&&ln(At)===!1?$.renderbufferStorageMultisample($.RENDERBUFFER,Un,Cn,At.width,At.height):ln(At)?ve.renderbufferStorageMultisampleEXT($.RENDERBUFFER,Un,Cn,At.width,At.height):$.renderbufferStorage($.RENDERBUFFER,Cn,At.width,At.height)}}$.bindRenderbuffer($.RENDERBUFFER,null)}function Tt(St,At){if(At&&At.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(L.bindFramebuffer($.FRAMEBUFFER,St),!(At.depthTexture&&At.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!j.get(At.depthTexture).__webglTexture||At.depthTexture.image.width!==At.width||At.depthTexture.image.height!==At.height)&&(At.depthTexture.image.width=At.width,At.depthTexture.image.height=At.height,At.depthTexture.needsUpdate=!0),bt(At.depthTexture,0);const Zt=j.get(At.depthTexture).__webglTexture,cn=Kt(At);if(At.depthTexture.format===DepthFormat)ln(At)?ve.framebufferTexture2DMultisampleEXT($.FRAMEBUFFER,$.DEPTH_ATTACHMENT,$.TEXTURE_2D,Zt,0,cn):$.framebufferTexture2D($.FRAMEBUFFER,$.DEPTH_ATTACHMENT,$.TEXTURE_2D,Zt,0);else if(At.depthTexture.format===DepthStencilFormat)ln(At)?ve.framebufferTexture2DMultisampleEXT($.FRAMEBUFFER,$.DEPTH_STENCIL_ATTACHMENT,$.TEXTURE_2D,Zt,0,cn):$.framebufferTexture2D($.FRAMEBUFFER,$.DEPTH_STENCIL_ATTACHMENT,$.TEXTURE_2D,Zt,0);else throw new Error("Unknown depthTexture format")}function qt(St){const At=j.get(St),Ut=St.isWebGLCubeRenderTarget===!0;if(St.depthTexture&&!At.__autoAllocateDepthBuffer){if(Ut)throw new Error("target.depthTexture not supported in Cube render targets");Tt(At.__webglFramebuffer,St)}else if(Ut){At.__webglDepthbuffer=[];for(let Zt=0;Zt<6;Zt++)L.bindFramebuffer($.FRAMEBUFFER,At.__webglFramebuffer[Zt]),At.__webglDepthbuffer[Zt]=$.createRenderbuffer(),Mt(At.__webglDepthbuffer[Zt],St,!1)}else L.bindFramebuffer($.FRAMEBUFFER,At.__webglFramebuffer),At.__webglDepthbuffer=$.createRenderbuffer(),Mt(At.__webglDepthbuffer,St,!1);L.bindFramebuffer($.FRAMEBUFFER,null)}function on(St,At,Ut){const Zt=j.get(St);At!==void 0&&Vt(Zt.__webglFramebuffer,St,St.texture,$.COLOR_ATTACHMENT0,$.TEXTURE_2D,0),Ut!==void 0&&qt(St)}function pn(St){const At=St.texture,Ut=j.get(St),Zt=j.get(At);St.addEventListener("dispose",qe);const cn=St.textures,sn=St.isWebGLCubeRenderTarget===!0,bn=cn.length>1;if(bn||(Zt.__webglTexture===void 0&&(Zt.__webglTexture=$.createTexture()),Zt.__version=At.version,le.memory.textures++),sn){Ut.__webglFramebuffer=[];for(let vn=0;vn<6;vn++)if(At.mipmaps&&At.mipmaps.length>0){Ut.__webglFramebuffer[vn]=[];for(let Cn=0;Cn<At.mipmaps.length;Cn++)Ut.__webglFramebuffer[vn][Cn]=$.createFramebuffer()}else Ut.__webglFramebuffer[vn]=$.createFramebuffer()}else{if(At.mipmaps&&At.mipmaps.length>0){Ut.__webglFramebuffer=[];for(let vn=0;vn<At.mipmaps.length;vn++)Ut.__webglFramebuffer[vn]=$.createFramebuffer()}else Ut.__webglFramebuffer=$.createFramebuffer();if(bn)for(let vn=0,Cn=cn.length;vn<Cn;vn++){const Un=j.get(cn[vn]);Un.__webglTexture===void 0&&(Un.__webglTexture=$.createTexture(),le.memory.textures++)}if(St.samples>0&&ln(St)===!1){Ut.__webglMultisampledFramebuffer=$.createFramebuffer(),Ut.__webglColorRenderbuffer=[],L.bindFramebuffer($.FRAMEBUFFER,Ut.__webglMultisampledFramebuffer);for(let vn=0;vn<cn.length;vn++){const Cn=cn[vn];Ut.__webglColorRenderbuffer[vn]=$.createRenderbuffer(),$.bindRenderbuffer($.RENDERBUFFER,Ut.__webglColorRenderbuffer[vn]);const Un=re.convert(Cn.format,Cn.colorSpace),yn=re.convert(Cn.type),$n=ze(Cn.internalFormat,Un,yn,Cn.colorSpace,St.isXRRenderTarget===!0),Jn=Kt(St);$.renderbufferStorageMultisample($.RENDERBUFFER,Jn,$n,St.width,St.height),$.framebufferRenderbuffer($.FRAMEBUFFER,$.COLOR_ATTACHMENT0+vn,$.RENDERBUFFER,Ut.__webglColorRenderbuffer[vn])}$.bindRenderbuffer($.RENDERBUFFER,null),St.depthBuffer&&(Ut.__webglDepthRenderbuffer=$.createRenderbuffer(),Mt(Ut.__webglDepthRenderbuffer,St,!0)),L.bindFramebuffer($.FRAMEBUFFER,null)}}if(sn){L.bindTexture($.TEXTURE_CUBE_MAP,Zt.__webglTexture),Dt($.TEXTURE_CUBE_MAP,At);for(let vn=0;vn<6;vn++)if(At.mipmaps&&At.mipmaps.length>0)for(let Cn=0;Cn<At.mipmaps.length;Cn++)Vt(Ut.__webglFramebuffer[vn][Cn],St,At,$.COLOR_ATTACHMENT0,$.TEXTURE_CUBE_MAP_POSITIVE_X+vn,Cn);else Vt(Ut.__webglFramebuffer[vn],St,At,$.COLOR_ATTACHMENT0,$.TEXTURE_CUBE_MAP_POSITIVE_X+vn,0);Oe(At)&&Ne($.TEXTURE_CUBE_MAP),L.unbindTexture()}else if(bn){for(let vn=0,Cn=cn.length;vn<Cn;vn++){const Un=cn[vn],yn=j.get(Un);L.bindTexture($.TEXTURE_2D,yn.__webglTexture),Dt($.TEXTURE_2D,Un),Vt(Ut.__webglFramebuffer,St,Un,$.COLOR_ATTACHMENT0+vn,$.TEXTURE_2D,0),Oe(Un)&&Ne($.TEXTURE_2D)}L.unbindTexture()}else{let vn=$.TEXTURE_2D;if((St.isWebGL3DRenderTarget||St.isWebGLArrayRenderTarget)&&(vn=St.isWebGL3DRenderTarget?$.TEXTURE_3D:$.TEXTURE_2D_ARRAY),L.bindTexture(vn,Zt.__webglTexture),Dt(vn,At),At.mipmaps&&At.mipmaps.length>0)for(let Cn=0;Cn<At.mipmaps.length;Cn++)Vt(Ut.__webglFramebuffer[Cn],St,At,$.COLOR_ATTACHMENT0,vn,Cn);else Vt(Ut.__webglFramebuffer,St,At,$.COLOR_ATTACHMENT0,vn,0);Oe(At)&&Ne(vn),L.unbindTexture()}St.depthBuffer&&qt(St)}function kt(St){const At=St.textures;for(let Ut=0,Zt=At.length;Ut<Zt;Ut++){const cn=At[Ut];if(Oe(cn)){const sn=St.isWebGLCubeRenderTarget?$.TEXTURE_CUBE_MAP:$.TEXTURE_2D,bn=j.get(cn).__webglTexture;L.bindTexture(sn,bn),Ne(sn),L.unbindTexture()}}}const Mn=[],wt=[];function It(St){if(St.samples>0){if(ln(St)===!1){const At=St.textures,Ut=St.width,Zt=St.height;let cn=$.COLOR_BUFFER_BIT;const sn=St.stencilBuffer?$.DEPTH_STENCIL_ATTACHMENT:$.DEPTH_ATTACHMENT,bn=j.get(St),vn=At.length>1;if(vn)for(let Cn=0;Cn<At.length;Cn++)L.bindFramebuffer($.FRAMEBUFFER,bn.__webglMultisampledFramebuffer),$.framebufferRenderbuffer($.FRAMEBUFFER,$.COLOR_ATTACHMENT0+Cn,$.RENDERBUFFER,null),L.bindFramebuffer($.FRAMEBUFFER,bn.__webglFramebuffer),$.framebufferTexture2D($.DRAW_FRAMEBUFFER,$.COLOR_ATTACHMENT0+Cn,$.TEXTURE_2D,null,0);L.bindFramebuffer($.READ_FRAMEBUFFER,bn.__webglMultisampledFramebuffer),L.bindFramebuffer($.DRAW_FRAMEBUFFER,bn.__webglFramebuffer);for(let Cn=0;Cn<At.length;Cn++){if(St.resolveDepthBuffer&&(St.depthBuffer&&(cn|=$.DEPTH_BUFFER_BIT),St.stencilBuffer&&St.resolveStencilBuffer&&(cn|=$.STENCIL_BUFFER_BIT)),vn){$.framebufferRenderbuffer($.READ_FRAMEBUFFER,$.COLOR_ATTACHMENT0,$.RENDERBUFFER,bn.__webglColorRenderbuffer[Cn]);const Un=j.get(At[Cn]).__webglTexture;$.framebufferTexture2D($.DRAW_FRAMEBUFFER,$.COLOR_ATTACHMENT0,$.TEXTURE_2D,Un,0)}$.blitFramebuffer(0,0,Ut,Zt,0,0,Ut,Zt,cn,$.NEAREST),ye===!0&&(Mn.length=0,wt.length=0,Mn.push($.COLOR_ATTACHMENT0+Cn),St.depthBuffer&&St.resolveDepthBuffer===!1&&(Mn.push(sn),wt.push(sn),$.invalidateFramebuffer($.DRAW_FRAMEBUFFER,wt)),$.invalidateFramebuffer($.READ_FRAMEBUFFER,Mn))}if(L.bindFramebuffer($.READ_FRAMEBUFFER,null),L.bindFramebuffer($.DRAW_FRAMEBUFFER,null),vn)for(let Cn=0;Cn<At.length;Cn++){L.bindFramebuffer($.FRAMEBUFFER,bn.__webglMultisampledFramebuffer),$.framebufferRenderbuffer($.FRAMEBUFFER,$.COLOR_ATTACHMENT0+Cn,$.RENDERBUFFER,bn.__webglColorRenderbuffer[Cn]);const Un=j.get(At[Cn]).__webglTexture;L.bindFramebuffer($.FRAMEBUFFER,bn.__webglFramebuffer),$.framebufferTexture2D($.DRAW_FRAMEBUFFER,$.COLOR_ATTACHMENT0+Cn,$.TEXTURE_2D,Un,0)}L.bindFramebuffer($.DRAW_FRAMEBUFFER,bn.__webglMultisampledFramebuffer)}else if(St.depthBuffer&&St.resolveDepthBuffer===!1&&ye){const At=St.stencilBuffer?$.DEPTH_STENCIL_ATTACHMENT:$.DEPTH_ATTACHMENT;$.invalidateFramebuffer($.DRAW_FRAMEBUFFER,[At])}}}function Kt(St){return Math.min(ee.maxSamples,St.samples)}function ln(St){const At=j.get(St);return St.samples>0&&m.has("WEBGL_multisampled_render_to_texture")===!0&&At.__useRenderToTexture!==!1}function nn(St){const At=le.render.frame;Me.get(St)!==At&&(Me.set(St,At),St.update())}function gn(St,At){const Ut=St.colorSpace,Zt=St.format,cn=St.type;return St.isCompressedTexture===!0||St.isVideoTexture===!0||Ut!==LinearSRGBColorSpace&&Ut!==NoColorSpace&&(ColorManagement.getTransfer(Ut)===SRGBTransfer?(Zt!==RGBAFormat||cn!==UnsignedByteType)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Ut)),At}function xn(St){return typeof HTMLImageElement<"u"&&St instanceof HTMLImageElement?(Ee.width=St.naturalWidth||St.width,Ee.height=St.naturalHeight||St.height):typeof VideoFrame<"u"&&St instanceof VideoFrame?(Ee.width=St.displayWidth,Ee.height=St.displayHeight):(Ee.width=St.width,Ee.height=St.height),Ee}this.allocateTextureUnit=mt,this.resetTextureUnits=ft,this.setTexture2D=bt,this.setTexture2DArray=Ct,this.setTexture3D=st,this.setTextureCube=at,this.rebindTextures=on,this.setupRenderTarget=pn,this.updateRenderTargetMipmap=kt,this.updateMultisampleRenderTarget=It,this.setupDepthRenderbuffer=qt,this.setupFrameBufferTexture=Vt,this.useMultisampledRTT=ln}function WebGLUtils($,m){function L(j,ee=NoColorSpace){let re;const le=ColorManagement.getTransfer(ee);if(j===UnsignedByteType)return $.UNSIGNED_BYTE;if(j===UnsignedShort4444Type)return $.UNSIGNED_SHORT_4_4_4_4;if(j===UnsignedShort5551Type)return $.UNSIGNED_SHORT_5_5_5_1;if(j===UnsignedInt5999Type)return $.UNSIGNED_INT_5_9_9_9_REV;if(j===ByteType)return $.BYTE;if(j===ShortType)return $.SHORT;if(j===UnsignedShortType)return $.UNSIGNED_SHORT;if(j===IntType)return $.INT;if(j===UnsignedIntType)return $.UNSIGNED_INT;if(j===FloatType)return $.FLOAT;if(j===HalfFloatType)return $.HALF_FLOAT;if(j===AlphaFormat)return $.ALPHA;if(j===RGBFormat)return $.RGB;if(j===RGBAFormat)return $.RGBA;if(j===LuminanceFormat)return $.LUMINANCE;if(j===LuminanceAlphaFormat)return $.LUMINANCE_ALPHA;if(j===DepthFormat)return $.DEPTH_COMPONENT;if(j===DepthStencilFormat)return $.DEPTH_STENCIL;if(j===RedFormat)return $.RED;if(j===RedIntegerFormat)return $.RED_INTEGER;if(j===RGFormat)return $.RG;if(j===RGIntegerFormat)return $.RG_INTEGER;if(j===RGBAIntegerFormat)return $.RGBA_INTEGER;if(j===RGB_S3TC_DXT1_Format||j===RGBA_S3TC_DXT1_Format||j===RGBA_S3TC_DXT3_Format||j===RGBA_S3TC_DXT5_Format)if(le===SRGBTransfer)if(re=m.get("WEBGL_compressed_texture_s3tc_srgb"),re!==null){if(j===RGB_S3TC_DXT1_Format)return re.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(j===RGBA_S3TC_DXT1_Format)return re.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(j===RGBA_S3TC_DXT3_Format)return re.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(j===RGBA_S3TC_DXT5_Format)return re.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(re=m.get("WEBGL_compressed_texture_s3tc"),re!==null){if(j===RGB_S3TC_DXT1_Format)return re.COMPRESSED_RGB_S3TC_DXT1_EXT;if(j===RGBA_S3TC_DXT1_Format)return re.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(j===RGBA_S3TC_DXT3_Format)return re.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(j===RGBA_S3TC_DXT5_Format)return re.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(j===RGB_PVRTC_4BPPV1_Format||j===RGB_PVRTC_2BPPV1_Format||j===RGBA_PVRTC_4BPPV1_Format||j===RGBA_PVRTC_2BPPV1_Format)if(re=m.get("WEBGL_compressed_texture_pvrtc"),re!==null){if(j===RGB_PVRTC_4BPPV1_Format)return re.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(j===RGB_PVRTC_2BPPV1_Format)return re.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(j===RGBA_PVRTC_4BPPV1_Format)return re.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(j===RGBA_PVRTC_2BPPV1_Format)return re.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(j===RGB_ETC1_Format||j===RGB_ETC2_Format||j===RGBA_ETC2_EAC_Format)if(re=m.get("WEBGL_compressed_texture_etc"),re!==null){if(j===RGB_ETC1_Format||j===RGB_ETC2_Format)return le===SRGBTransfer?re.COMPRESSED_SRGB8_ETC2:re.COMPRESSED_RGB8_ETC2;if(j===RGBA_ETC2_EAC_Format)return le===SRGBTransfer?re.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:re.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(j===RGBA_ASTC_4x4_Format||j===RGBA_ASTC_5x4_Format||j===RGBA_ASTC_5x5_Format||j===RGBA_ASTC_6x5_Format||j===RGBA_ASTC_6x6_Format||j===RGBA_ASTC_8x5_Format||j===RGBA_ASTC_8x6_Format||j===RGBA_ASTC_8x8_Format||j===RGBA_ASTC_10x5_Format||j===RGBA_ASTC_10x6_Format||j===RGBA_ASTC_10x8_Format||j===RGBA_ASTC_10x10_Format||j===RGBA_ASTC_12x10_Format||j===RGBA_ASTC_12x12_Format)if(re=m.get("WEBGL_compressed_texture_astc"),re!==null){if(j===RGBA_ASTC_4x4_Format)return le===SRGBTransfer?re.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:re.COMPRESSED_RGBA_ASTC_4x4_KHR;if(j===RGBA_ASTC_5x4_Format)return le===SRGBTransfer?re.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:re.COMPRESSED_RGBA_ASTC_5x4_KHR;if(j===RGBA_ASTC_5x5_Format)return le===SRGBTransfer?re.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:re.COMPRESSED_RGBA_ASTC_5x5_KHR;if(j===RGBA_ASTC_6x5_Format)return le===SRGBTransfer?re.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:re.COMPRESSED_RGBA_ASTC_6x5_KHR;if(j===RGBA_ASTC_6x6_Format)return le===SRGBTransfer?re.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:re.COMPRESSED_RGBA_ASTC_6x6_KHR;if(j===RGBA_ASTC_8x5_Format)return le===SRGBTransfer?re.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:re.COMPRESSED_RGBA_ASTC_8x5_KHR;if(j===RGBA_ASTC_8x6_Format)return le===SRGBTransfer?re.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:re.COMPRESSED_RGBA_ASTC_8x6_KHR;if(j===RGBA_ASTC_8x8_Format)return le===SRGBTransfer?re.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:re.COMPRESSED_RGBA_ASTC_8x8_KHR;if(j===RGBA_ASTC_10x5_Format)return le===SRGBTransfer?re.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:re.COMPRESSED_RGBA_ASTC_10x5_KHR;if(j===RGBA_ASTC_10x6_Format)return le===SRGBTransfer?re.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:re.COMPRESSED_RGBA_ASTC_10x6_KHR;if(j===RGBA_ASTC_10x8_Format)return le===SRGBTransfer?re.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:re.COMPRESSED_RGBA_ASTC_10x8_KHR;if(j===RGBA_ASTC_10x10_Format)return le===SRGBTransfer?re.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:re.COMPRESSED_RGBA_ASTC_10x10_KHR;if(j===RGBA_ASTC_12x10_Format)return le===SRGBTransfer?re.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:re.COMPRESSED_RGBA_ASTC_12x10_KHR;if(j===RGBA_ASTC_12x12_Format)return le===SRGBTransfer?re.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:re.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(j===RGBA_BPTC_Format||j===RGB_BPTC_SIGNED_Format||j===RGB_BPTC_UNSIGNED_Format)if(re=m.get("EXT_texture_compression_bptc"),re!==null){if(j===RGBA_BPTC_Format)return le===SRGBTransfer?re.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:re.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(j===RGB_BPTC_SIGNED_Format)return re.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(j===RGB_BPTC_UNSIGNED_Format)return re.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(j===RED_RGTC1_Format||j===SIGNED_RED_RGTC1_Format||j===RED_GREEN_RGTC2_Format||j===SIGNED_RED_GREEN_RGTC2_Format)if(re=m.get("EXT_texture_compression_rgtc"),re!==null){if(j===RGBA_BPTC_Format)return re.COMPRESSED_RED_RGTC1_EXT;if(j===SIGNED_RED_RGTC1_Format)return re.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(j===RED_GREEN_RGTC2_Format)return re.COMPRESSED_RED_GREEN_RGTC2_EXT;if(j===SIGNED_RED_GREEN_RGTC2_Format)return re.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return j===UnsignedInt248Type?$.UNSIGNED_INT_24_8:$[j]!==void 0?$[j]:null}return{convert:L}}class ArrayCamera extends PerspectiveCamera{constructor(m=[]){super(),this.isArrayCamera=!0,this.cameras=m}}class Group extends Object3D{constructor(){super(),this.isGroup=!0,this.type="Group"}}const _moveEvent={type:"move"};class WebXRController{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Group,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Group,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Vector3,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Vector3),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Group,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Vector3,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Vector3),this._grip}dispatchEvent(m){return this._targetRay!==null&&this._targetRay.dispatchEvent(m),this._grip!==null&&this._grip.dispatchEvent(m),this._hand!==null&&this._hand.dispatchEvent(m),this}connect(m){if(m&&m.hand){const L=this._hand;if(L)for(const j of m.hand.values())this._getHandJoint(L,j)}return this.dispatchEvent({type:"connected",data:m}),this}disconnect(m){return this.dispatchEvent({type:"disconnected",data:m}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(m,L,j){let ee=null,re=null,le=null;const ve=this._targetRay,ye=this._grip,Ee=this._hand;if(m&&L.session.visibilityState!=="visible-blurred"){if(Ee&&m.hand){le=!0;for(const Fe of m.hand.values()){const Oe=L.getJointPose(Fe,j),Ne=this._getHandJoint(Ee,Fe);Oe!==null&&(Ne.matrix.fromArray(Oe.transform.matrix),Ne.matrix.decompose(Ne.position,Ne.rotation,Ne.scale),Ne.matrixWorldNeedsUpdate=!0,Ne.jointRadius=Oe.radius),Ne.visible=Oe!==null}const Me=Ee.joints["index-finger-tip"],Ce=Ee.joints["thumb-tip"],De=Me.position.distanceTo(Ce.position),Be=.02,ke=.005;Ee.inputState.pinching&&De>Be+ke?(Ee.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:m.handedness,target:this})):!Ee.inputState.pinching&&De<=Be-ke&&(Ee.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:m.handedness,target:this}))}else ye!==null&&m.gripSpace&&(re=L.getPose(m.gripSpace,j),re!==null&&(ye.matrix.fromArray(re.transform.matrix),ye.matrix.decompose(ye.position,ye.rotation,ye.scale),ye.matrixWorldNeedsUpdate=!0,re.linearVelocity?(ye.hasLinearVelocity=!0,ye.linearVelocity.copy(re.linearVelocity)):ye.hasLinearVelocity=!1,re.angularVelocity?(ye.hasAngularVelocity=!0,ye.angularVelocity.copy(re.angularVelocity)):ye.hasAngularVelocity=!1));ve!==null&&(ee=L.getPose(m.targetRaySpace,j),ee===null&&re!==null&&(ee=re),ee!==null&&(ve.matrix.fromArray(ee.transform.matrix),ve.matrix.decompose(ve.position,ve.rotation,ve.scale),ve.matrixWorldNeedsUpdate=!0,ee.linearVelocity?(ve.hasLinearVelocity=!0,ve.linearVelocity.copy(ee.linearVelocity)):ve.hasLinearVelocity=!1,ee.angularVelocity?(ve.hasAngularVelocity=!0,ve.angularVelocity.copy(ee.angularVelocity)):ve.hasAngularVelocity=!1,this.dispatchEvent(_moveEvent)))}return ve!==null&&(ve.visible=ee!==null),ye!==null&&(ye.visible=re!==null),Ee!==null&&(Ee.visible=le!==null),this}_getHandJoint(m,L){if(m.joints[L.jointName]===void 0){const j=new Group;j.matrixAutoUpdate=!1,j.visible=!1,m.joints[L.jointName]=j,m.add(j)}return m.joints[L.jointName]}}const _occlusion_vertex=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,_occlusion_fragment=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class WebXRDepthSensing{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(m,L,j){if(this.texture===null){const ee=new Texture,re=m.properties.get(ee);re.__webglTexture=L.texture,(L.depthNear!=j.depthNear||L.depthFar!=j.depthFar)&&(this.depthNear=L.depthNear,this.depthFar=L.depthFar),this.texture=ee}}getMesh(m){if(this.texture!==null&&this.mesh===null){const L=m.cameras[0].viewport,j=new ShaderMaterial({vertexShader:_occlusion_vertex,fragmentShader:_occlusion_fragment,uniforms:{depthColor:{value:this.texture},depthWidth:{value:L.z},depthHeight:{value:L.w}}});this.mesh=new Mesh(new PlaneGeometry(20,20),j)}return this.mesh}reset(){this.texture=null,this.mesh=null}}class WebXRManager extends EventDispatcher$2{constructor(m,L){super();const j=this;let ee=null,re=1,le=null,ve="local-floor",ye=1,Ee=null,Me=null,Ce=null,De=null,Be=null,ke=null;const Fe=new WebXRDepthSensing,Oe=L.getContextAttributes();let Ne=null,ze=null;const $e=[],He=[],We=new Vector2;let qe=null;const Ye=new PerspectiveCamera;Ye.layers.enable(1),Ye.viewport=new Vector4;const Ze=new PerspectiveCamera;Ze.layers.enable(2),Ze.viewport=new Vector4;const Ke=[Ye,Ze],rt=new ArrayCamera;rt.layers.enable(1),rt.layers.enable(2);let ft=null,mt=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(zt){let Vt=$e[zt];return Vt===void 0&&(Vt=new WebXRController,$e[zt]=Vt),Vt.getTargetRaySpace()},this.getControllerGrip=function(zt){let Vt=$e[zt];return Vt===void 0&&(Vt=new WebXRController,$e[zt]=Vt),Vt.getGripSpace()},this.getHand=function(zt){let Vt=$e[zt];return Vt===void 0&&(Vt=new WebXRController,$e[zt]=Vt),Vt.getHandSpace()};function Et(zt){const Vt=He.indexOf(zt.inputSource);if(Vt===-1)return;const Mt=$e[Vt];Mt!==void 0&&(Mt.update(zt.inputSource,zt.frame,Ee||le),Mt.dispatchEvent({type:zt.type,data:zt.inputSource}))}function bt(){ee.removeEventListener("select",Et),ee.removeEventListener("selectstart",Et),ee.removeEventListener("selectend",Et),ee.removeEventListener("squeeze",Et),ee.removeEventListener("squeezestart",Et),ee.removeEventListener("squeezeend",Et),ee.removeEventListener("end",bt),ee.removeEventListener("inputsourceschange",Ct);for(let zt=0;zt<$e.length;zt++){const Vt=He[zt];Vt!==null&&(He[zt]=null,$e[zt].disconnect(Vt))}ft=null,mt=null,Fe.reset(),m.setRenderTarget(Ne),Be=null,De=null,Ce=null,ee=null,ze=null,tn.stop(),j.isPresenting=!1,m.setPixelRatio(qe),m.setSize(We.width,We.height,!1),j.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(zt){re=zt,j.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(zt){ve=zt,j.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return Ee||le},this.setReferenceSpace=function(zt){Ee=zt},this.getBaseLayer=function(){return De!==null?De:Be},this.getBinding=function(){return Ce},this.getFrame=function(){return ke},this.getSession=function(){return ee},this.setSession=async function(zt){if(ee=zt,ee!==null){if(Ne=m.getRenderTarget(),ee.addEventListener("select",Et),ee.addEventListener("selectstart",Et),ee.addEventListener("selectend",Et),ee.addEventListener("squeeze",Et),ee.addEventListener("squeezestart",Et),ee.addEventListener("squeezeend",Et),ee.addEventListener("end",bt),ee.addEventListener("inputsourceschange",Ct),Oe.xrCompatible!==!0&&await L.makeXRCompatible(),qe=m.getPixelRatio(),m.getSize(We),ee.renderState.layers===void 0){const Vt={antialias:Oe.antialias,alpha:!0,depth:Oe.depth,stencil:Oe.stencil,framebufferScaleFactor:re};Be=new XRWebGLLayer(ee,L,Vt),ee.updateRenderState({baseLayer:Be}),m.setPixelRatio(1),m.setSize(Be.framebufferWidth,Be.framebufferHeight,!1),ze=new WebGLRenderTarget(Be.framebufferWidth,Be.framebufferHeight,{format:RGBAFormat,type:UnsignedByteType,colorSpace:m.outputColorSpace,stencilBuffer:Oe.stencil})}else{let Vt=null,Mt=null,Tt=null;Oe.depth&&(Tt=Oe.stencil?L.DEPTH24_STENCIL8:L.DEPTH_COMPONENT24,Vt=Oe.stencil?DepthStencilFormat:DepthFormat,Mt=Oe.stencil?UnsignedInt248Type:UnsignedIntType);const qt={colorFormat:L.RGBA8,depthFormat:Tt,scaleFactor:re};Ce=new XRWebGLBinding(ee,L),De=Ce.createProjectionLayer(qt),ee.updateRenderState({layers:[De]}),m.setPixelRatio(1),m.setSize(De.textureWidth,De.textureHeight,!1),ze=new WebGLRenderTarget(De.textureWidth,De.textureHeight,{format:RGBAFormat,type:UnsignedByteType,depthTexture:new DepthTexture(De.textureWidth,De.textureHeight,Mt,void 0,void 0,void 0,void 0,void 0,void 0,Vt),stencilBuffer:Oe.stencil,colorSpace:m.outputColorSpace,samples:Oe.antialias?4:0,resolveDepthBuffer:De.ignoreDepthValues===!1})}ze.isXRRenderTarget=!0,this.setFoveation(ye),Ee=null,le=await ee.requestReferenceSpace(ve),tn.setContext(ee),tn.start(),j.isPresenting=!0,j.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(ee!==null)return ee.environmentBlendMode};function Ct(zt){for(let Vt=0;Vt<zt.removed.length;Vt++){const Mt=zt.removed[Vt],Tt=He.indexOf(Mt);Tt>=0&&(He[Tt]=null,$e[Tt].disconnect(Mt))}for(let Vt=0;Vt<zt.added.length;Vt++){const Mt=zt.added[Vt];let Tt=He.indexOf(Mt);if(Tt===-1){for(let on=0;on<$e.length;on++)if(on>=He.length){He.push(Mt),Tt=on;break}else if(He[on]===null){He[on]=Mt,Tt=on;break}if(Tt===-1)break}const qt=$e[Tt];qt&&qt.connect(Mt)}}const st=new Vector3,at=new Vector3;function Xe(zt,Vt,Mt){st.setFromMatrixPosition(Vt.matrixWorld),at.setFromMatrixPosition(Mt.matrixWorld);const Tt=st.distanceTo(at),qt=Vt.projectionMatrix.elements,on=Mt.projectionMatrix.elements,pn=qt[14]/(qt[10]-1),kt=qt[14]/(qt[10]+1),Mn=(qt[9]+1)/qt[5],wt=(qt[9]-1)/qt[5],It=(qt[8]-1)/qt[0],Kt=(on[8]+1)/on[0],ln=pn*It,nn=pn*Kt,gn=Tt/(-It+Kt),xn=gn*-It;Vt.matrixWorld.decompose(zt.position,zt.quaternion,zt.scale),zt.translateX(xn),zt.translateZ(gn),zt.matrixWorld.compose(zt.position,zt.quaternion,zt.scale),zt.matrixWorldInverse.copy(zt.matrixWorld).invert();const St=pn+gn,At=kt+gn,Ut=ln-xn,Zt=nn+(Tt-xn),cn=Mn*kt/At*St,sn=wt*kt/At*St;zt.projectionMatrix.makePerspective(Ut,Zt,cn,sn,St,At),zt.projectionMatrixInverse.copy(zt.projectionMatrix).invert()}function ht(zt,Vt){Vt===null?zt.matrixWorld.copy(zt.matrix):zt.matrixWorld.multiplyMatrices(Vt.matrixWorld,zt.matrix),zt.matrixWorldInverse.copy(zt.matrixWorld).invert()}this.updateCamera=function(zt){if(ee===null)return;Fe.texture!==null&&(zt.near=Fe.depthNear,zt.far=Fe.depthFar),rt.near=Ze.near=Ye.near=zt.near,rt.far=Ze.far=Ye.far=zt.far,(ft!==rt.near||mt!==rt.far)&&(ee.updateRenderState({depthNear:rt.near,depthFar:rt.far}),ft=rt.near,mt=rt.far,Ye.near=ft,Ye.far=mt,Ze.near=ft,Ze.far=mt,Ye.updateProjectionMatrix(),Ze.updateProjectionMatrix(),zt.updateProjectionMatrix());const Vt=zt.parent,Mt=rt.cameras;ht(rt,Vt);for(let Tt=0;Tt<Mt.length;Tt++)ht(Mt[Tt],Vt);Mt.length===2?Xe(rt,Ye,Ze):rt.projectionMatrix.copy(Ye.projectionMatrix),Bt(zt,rt,Vt)};function Bt(zt,Vt,Mt){Mt===null?zt.matrix.copy(Vt.matrixWorld):(zt.matrix.copy(Mt.matrixWorld),zt.matrix.invert(),zt.matrix.multiply(Vt.matrixWorld)),zt.matrix.decompose(zt.position,zt.quaternion,zt.scale),zt.updateMatrixWorld(!0),zt.projectionMatrix.copy(Vt.projectionMatrix),zt.projectionMatrixInverse.copy(Vt.projectionMatrixInverse),zt.isPerspectiveCamera&&(zt.fov=RAD2DEG*2*Math.atan(1/zt.projectionMatrix.elements[5]),zt.zoom=1)}this.getCamera=function(){return rt},this.getFoveation=function(){if(!(De===null&&Be===null))return ye},this.setFoveation=function(zt){ye=zt,De!==null&&(De.fixedFoveation=zt),Be!==null&&Be.fixedFoveation!==void 0&&(Be.fixedFoveation=zt)},this.hasDepthSensing=function(){return Fe.texture!==null},this.getDepthSensingMesh=function(){return Fe.getMesh(rt)};let Dt=null;function Jt(zt,Vt){if(Me=Vt.getViewerPose(Ee||le),ke=Vt,Me!==null){const Mt=Me.views;Be!==null&&(m.setRenderTargetFramebuffer(ze,Be.framebuffer),m.setRenderTarget(ze));let Tt=!1;Mt.length!==rt.cameras.length&&(rt.cameras.length=0,Tt=!0);for(let on=0;on<Mt.length;on++){const pn=Mt[on];let kt=null;if(Be!==null)kt=Be.getViewport(pn);else{const wt=Ce.getViewSubImage(De,pn);kt=wt.viewport,on===0&&(m.setRenderTargetTextures(ze,wt.colorTexture,De.ignoreDepthValues?void 0:wt.depthStencilTexture),m.setRenderTarget(ze))}let Mn=Ke[on];Mn===void 0&&(Mn=new PerspectiveCamera,Mn.layers.enable(on),Mn.viewport=new Vector4,Ke[on]=Mn),Mn.matrix.fromArray(pn.transform.matrix),Mn.matrix.decompose(Mn.position,Mn.quaternion,Mn.scale),Mn.projectionMatrix.fromArray(pn.projectionMatrix),Mn.projectionMatrixInverse.copy(Mn.projectionMatrix).invert(),Mn.viewport.set(kt.x,kt.y,kt.width,kt.height),on===0&&(rt.matrix.copy(Mn.matrix),rt.matrix.decompose(rt.position,rt.quaternion,rt.scale)),Tt===!0&&rt.cameras.push(Mn)}const qt=ee.enabledFeatures;if(qt&&qt.includes("depth-sensing")){const on=Ce.getDepthInformation(Mt[0]);on&&on.isValid&&on.texture&&Fe.init(m,on,ee.renderState)}}for(let Mt=0;Mt<$e.length;Mt++){const Tt=He[Mt],qt=$e[Mt];Tt!==null&&qt!==void 0&&qt.update(Tt,Vt,Ee||le)}Dt&&Dt(zt,Vt),Vt.detectedPlanes&&j.dispatchEvent({type:"planesdetected",data:Vt}),ke=null}const tn=new WebGLAnimation;tn.setAnimationLoop(Jt),this.setAnimationLoop=function(zt){Dt=zt},this.dispose=function(){}}}const _e1=new Euler,_m1=new Matrix4;function WebGLMaterials($,m){function L(Oe,Ne){Oe.matrixAutoUpdate===!0&&Oe.updateMatrix(),Ne.value.copy(Oe.matrix)}function j(Oe,Ne){Ne.color.getRGB(Oe.fogColor.value,getUnlitUniformColorSpace($)),Ne.isFog?(Oe.fogNear.value=Ne.near,Oe.fogFar.value=Ne.far):Ne.isFogExp2&&(Oe.fogDensity.value=Ne.density)}function ee(Oe,Ne,ze,$e,He){Ne.isMeshBasicMaterial||Ne.isMeshLambertMaterial?re(Oe,Ne):Ne.isMeshToonMaterial?(re(Oe,Ne),Ce(Oe,Ne)):Ne.isMeshPhongMaterial?(re(Oe,Ne),Me(Oe,Ne)):Ne.isMeshStandardMaterial?(re(Oe,Ne),De(Oe,Ne),Ne.isMeshPhysicalMaterial&&Be(Oe,Ne,He)):Ne.isMeshMatcapMaterial?(re(Oe,Ne),ke(Oe,Ne)):Ne.isMeshDepthMaterial?re(Oe,Ne):Ne.isMeshDistanceMaterial?(re(Oe,Ne),Fe(Oe,Ne)):Ne.isMeshNormalMaterial?re(Oe,Ne):Ne.isLineBasicMaterial?(le(Oe,Ne),Ne.isLineDashedMaterial&&ve(Oe,Ne)):Ne.isPointsMaterial?ye(Oe,Ne,ze,$e):Ne.isSpriteMaterial?Ee(Oe,Ne):Ne.isShadowMaterial?(Oe.color.value.copy(Ne.color),Oe.opacity.value=Ne.opacity):Ne.isShaderMaterial&&(Ne.uniformsNeedUpdate=!1)}function re(Oe,Ne){Oe.opacity.value=Ne.opacity,Ne.color&&Oe.diffuse.value.copy(Ne.color),Ne.emissive&&Oe.emissive.value.copy(Ne.emissive).multiplyScalar(Ne.emissiveIntensity),Ne.map&&(Oe.map.value=Ne.map,L(Ne.map,Oe.mapTransform)),Ne.alphaMap&&(Oe.alphaMap.value=Ne.alphaMap,L(Ne.alphaMap,Oe.alphaMapTransform)),Ne.bumpMap&&(Oe.bumpMap.value=Ne.bumpMap,L(Ne.bumpMap,Oe.bumpMapTransform),Oe.bumpScale.value=Ne.bumpScale,Ne.side===BackSide&&(Oe.bumpScale.value*=-1)),Ne.normalMap&&(Oe.normalMap.value=Ne.normalMap,L(Ne.normalMap,Oe.normalMapTransform),Oe.normalScale.value.copy(Ne.normalScale),Ne.side===BackSide&&Oe.normalScale.value.negate()),Ne.displacementMap&&(Oe.displacementMap.value=Ne.displacementMap,L(Ne.displacementMap,Oe.displacementMapTransform),Oe.displacementScale.value=Ne.displacementScale,Oe.displacementBias.value=Ne.displacementBias),Ne.emissiveMap&&(Oe.emissiveMap.value=Ne.emissiveMap,L(Ne.emissiveMap,Oe.emissiveMapTransform)),Ne.specularMap&&(Oe.specularMap.value=Ne.specularMap,L(Ne.specularMap,Oe.specularMapTransform)),Ne.alphaTest>0&&(Oe.alphaTest.value=Ne.alphaTest);const ze=m.get(Ne),$e=ze.envMap,He=ze.envMapRotation;$e&&(Oe.envMap.value=$e,_e1.copy(He),_e1.x*=-1,_e1.y*=-1,_e1.z*=-1,$e.isCubeTexture&&$e.isRenderTargetTexture===!1&&(_e1.y*=-1,_e1.z*=-1),Oe.envMapRotation.value.setFromMatrix4(_m1.makeRotationFromEuler(_e1)),Oe.flipEnvMap.value=$e.isCubeTexture&&$e.isRenderTargetTexture===!1?-1:1,Oe.reflectivity.value=Ne.reflectivity,Oe.ior.value=Ne.ior,Oe.refractionRatio.value=Ne.refractionRatio),Ne.lightMap&&(Oe.lightMap.value=Ne.lightMap,Oe.lightMapIntensity.value=Ne.lightMapIntensity,L(Ne.lightMap,Oe.lightMapTransform)),Ne.aoMap&&(Oe.aoMap.value=Ne.aoMap,Oe.aoMapIntensity.value=Ne.aoMapIntensity,L(Ne.aoMap,Oe.aoMapTransform))}function le(Oe,Ne){Oe.diffuse.value.copy(Ne.color),Oe.opacity.value=Ne.opacity,Ne.map&&(Oe.map.value=Ne.map,L(Ne.map,Oe.mapTransform))}function ve(Oe,Ne){Oe.dashSize.value=Ne.dashSize,Oe.totalSize.value=Ne.dashSize+Ne.gapSize,Oe.scale.value=Ne.scale}function ye(Oe,Ne,ze,$e){Oe.diffuse.value.copy(Ne.color),Oe.opacity.value=Ne.opacity,Oe.size.value=Ne.size*ze,Oe.scale.value=$e*.5,Ne.map&&(Oe.map.value=Ne.map,L(Ne.map,Oe.uvTransform)),Ne.alphaMap&&(Oe.alphaMap.value=Ne.alphaMap,L(Ne.alphaMap,Oe.alphaMapTransform)),Ne.alphaTest>0&&(Oe.alphaTest.value=Ne.alphaTest)}function Ee(Oe,Ne){Oe.diffuse.value.copy(Ne.color),Oe.opacity.value=Ne.opacity,Oe.rotation.value=Ne.rotation,Ne.map&&(Oe.map.value=Ne.map,L(Ne.map,Oe.mapTransform)),Ne.alphaMap&&(Oe.alphaMap.value=Ne.alphaMap,L(Ne.alphaMap,Oe.alphaMapTransform)),Ne.alphaTest>0&&(Oe.alphaTest.value=Ne.alphaTest)}function Me(Oe,Ne){Oe.specular.value.copy(Ne.specular),Oe.shininess.value=Math.max(Ne.shininess,1e-4)}function Ce(Oe,Ne){Ne.gradientMap&&(Oe.gradientMap.value=Ne.gradientMap)}function De(Oe,Ne){Oe.metalness.value=Ne.metalness,Ne.metalnessMap&&(Oe.metalnessMap.value=Ne.metalnessMap,L(Ne.metalnessMap,Oe.metalnessMapTransform)),Oe.roughness.value=Ne.roughness,Ne.roughnessMap&&(Oe.roughnessMap.value=Ne.roughnessMap,L(Ne.roughnessMap,Oe.roughnessMapTransform)),Ne.envMap&&(Oe.envMapIntensity.value=Ne.envMapIntensity)}function Be(Oe,Ne,ze){Oe.ior.value=Ne.ior,Ne.sheen>0&&(Oe.sheenColor.value.copy(Ne.sheenColor).multiplyScalar(Ne.sheen),Oe.sheenRoughness.value=Ne.sheenRoughness,Ne.sheenColorMap&&(Oe.sheenColorMap.value=Ne.sheenColorMap,L(Ne.sheenColorMap,Oe.sheenColorMapTransform)),Ne.sheenRoughnessMap&&(Oe.sheenRoughnessMap.value=Ne.sheenRoughnessMap,L(Ne.sheenRoughnessMap,Oe.sheenRoughnessMapTransform))),Ne.clearcoat>0&&(Oe.clearcoat.value=Ne.clearcoat,Oe.clearcoatRoughness.value=Ne.clearcoatRoughness,Ne.clearcoatMap&&(Oe.clearcoatMap.value=Ne.clearcoatMap,L(Ne.clearcoatMap,Oe.clearcoatMapTransform)),Ne.clearcoatRoughnessMap&&(Oe.clearcoatRoughnessMap.value=Ne.clearcoatRoughnessMap,L(Ne.clearcoatRoughnessMap,Oe.clearcoatRoughnessMapTransform)),Ne.clearcoatNormalMap&&(Oe.clearcoatNormalMap.value=Ne.clearcoatNormalMap,L(Ne.clearcoatNormalMap,Oe.clearcoatNormalMapTransform),Oe.clearcoatNormalScale.value.copy(Ne.clearcoatNormalScale),Ne.side===BackSide&&Oe.clearcoatNormalScale.value.negate())),Ne.dispersion>0&&(Oe.dispersion.value=Ne.dispersion),Ne.iridescence>0&&(Oe.iridescence.value=Ne.iridescence,Oe.iridescenceIOR.value=Ne.iridescenceIOR,Oe.iridescenceThicknessMinimum.value=Ne.iridescenceThicknessRange[0],Oe.iridescenceThicknessMaximum.value=Ne.iridescenceThicknessRange[1],Ne.iridescenceMap&&(Oe.iridescenceMap.value=Ne.iridescenceMap,L(Ne.iridescenceMap,Oe.iridescenceMapTransform)),Ne.iridescenceThicknessMap&&(Oe.iridescenceThicknessMap.value=Ne.iridescenceThicknessMap,L(Ne.iridescenceThicknessMap,Oe.iridescenceThicknessMapTransform))),Ne.transmission>0&&(Oe.transmission.value=Ne.transmission,Oe.transmissionSamplerMap.value=ze.texture,Oe.transmissionSamplerSize.value.set(ze.width,ze.height),Ne.transmissionMap&&(Oe.transmissionMap.value=Ne.transmissionMap,L(Ne.transmissionMap,Oe.transmissionMapTransform)),Oe.thickness.value=Ne.thickness,Ne.thicknessMap&&(Oe.thicknessMap.value=Ne.thicknessMap,L(Ne.thicknessMap,Oe.thicknessMapTransform)),Oe.attenuationDistance.value=Ne.attenuationDistance,Oe.attenuationColor.value.copy(Ne.attenuationColor)),Ne.anisotropy>0&&(Oe.anisotropyVector.value.set(Ne.anisotropy*Math.cos(Ne.anisotropyRotation),Ne.anisotropy*Math.sin(Ne.anisotropyRotation)),Ne.anisotropyMap&&(Oe.anisotropyMap.value=Ne.anisotropyMap,L(Ne.anisotropyMap,Oe.anisotropyMapTransform))),Oe.specularIntensity.value=Ne.specularIntensity,Oe.specularColor.value.copy(Ne.specularColor),Ne.specularColorMap&&(Oe.specularColorMap.value=Ne.specularColorMap,L(Ne.specularColorMap,Oe.specularColorMapTransform)),Ne.specularIntensityMap&&(Oe.specularIntensityMap.value=Ne.specularIntensityMap,L(Ne.specularIntensityMap,Oe.specularIntensityMapTransform))}function ke(Oe,Ne){Ne.matcap&&(Oe.matcap.value=Ne.matcap)}function Fe(Oe,Ne){const ze=m.get(Ne).light;Oe.referencePosition.value.setFromMatrixPosition(ze.matrixWorld),Oe.nearDistance.value=ze.shadow.camera.near,Oe.farDistance.value=ze.shadow.camera.far}return{refreshFogUniforms:j,refreshMaterialUniforms:ee}}function WebGLUniformsGroups($,m,L,j){let ee={},re={},le=[];const ve=$.getParameter($.MAX_UNIFORM_BUFFER_BINDINGS);function ye(ze,$e){const He=$e.program;j.uniformBlockBinding(ze,He)}function Ee(ze,$e){let He=ee[ze.id];He===void 0&&(ke(ze),He=Me(ze),ee[ze.id]=He,ze.addEventListener("dispose",Oe));const We=$e.program;j.updateUBOMapping(ze,We);const qe=m.render.frame;re[ze.id]!==qe&&(De(ze),re[ze.id]=qe)}function Me(ze){const $e=Ce();ze.__bindingPointIndex=$e;const He=$.createBuffer(),We=ze.__size,qe=ze.usage;return $.bindBuffer($.UNIFORM_BUFFER,He),$.bufferData($.UNIFORM_BUFFER,We,qe),$.bindBuffer($.UNIFORM_BUFFER,null),$.bindBufferBase($.UNIFORM_BUFFER,$e,He),He}function Ce(){for(let ze=0;ze<ve;ze++)if(le.indexOf(ze)===-1)return le.push(ze),ze;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function De(ze){const $e=ee[ze.id],He=ze.uniforms,We=ze.__cache;$.bindBuffer($.UNIFORM_BUFFER,$e);for(let qe=0,Ye=He.length;qe<Ye;qe++){const Ze=Array.isArray(He[qe])?He[qe]:[He[qe]];for(let Ke=0,rt=Ze.length;Ke<rt;Ke++){const ft=Ze[Ke];if(Be(ft,qe,Ke,We)===!0){const mt=ft.__offset,Et=Array.isArray(ft.value)?ft.value:[ft.value];let bt=0;for(let Ct=0;Ct<Et.length;Ct++){const st=Et[Ct],at=Fe(st);typeof st=="number"||typeof st=="boolean"?(ft.__data[0]=st,$.bufferSubData($.UNIFORM_BUFFER,mt+bt,ft.__data)):st.isMatrix3?(ft.__data[0]=st.elements[0],ft.__data[1]=st.elements[1],ft.__data[2]=st.elements[2],ft.__data[3]=0,ft.__data[4]=st.elements[3],ft.__data[5]=st.elements[4],ft.__data[6]=st.elements[5],ft.__data[7]=0,ft.__data[8]=st.elements[6],ft.__data[9]=st.elements[7],ft.__data[10]=st.elements[8],ft.__data[11]=0):(st.toArray(ft.__data,bt),bt+=at.storage/Float32Array.BYTES_PER_ELEMENT)}$.bufferSubData($.UNIFORM_BUFFER,mt,ft.__data)}}}$.bindBuffer($.UNIFORM_BUFFER,null)}function Be(ze,$e,He,We){const qe=ze.value,Ye=$e+"_"+He;if(We[Ye]===void 0)return typeof qe=="number"||typeof qe=="boolean"?We[Ye]=qe:We[Ye]=qe.clone(),!0;{const Ze=We[Ye];if(typeof qe=="number"||typeof qe=="boolean"){if(Ze!==qe)return We[Ye]=qe,!0}else if(Ze.equals(qe)===!1)return Ze.copy(qe),!0}return!1}function ke(ze){const $e=ze.uniforms;let He=0;const We=16;for(let Ye=0,Ze=$e.length;Ye<Ze;Ye++){const Ke=Array.isArray($e[Ye])?$e[Ye]:[$e[Ye]];for(let rt=0,ft=Ke.length;rt<ft;rt++){const mt=Ke[rt],Et=Array.isArray(mt.value)?mt.value:[mt.value];for(let bt=0,Ct=Et.length;bt<Ct;bt++){const st=Et[bt],at=Fe(st),Xe=He%We;Xe!==0&&We-Xe<at.boundary&&(He+=We-Xe),mt.__data=new Float32Array(at.storage/Float32Array.BYTES_PER_ELEMENT),mt.__offset=He,He+=at.storage}}}const qe=He%We;return qe>0&&(He+=We-qe),ze.__size=He,ze.__cache={},this}function Fe(ze){const $e={boundary:0,storage:0};return typeof ze=="number"||typeof ze=="boolean"?($e.boundary=4,$e.storage=4):ze.isVector2?($e.boundary=8,$e.storage=8):ze.isVector3||ze.isColor?($e.boundary=16,$e.storage=12):ze.isVector4?($e.boundary=16,$e.storage=16):ze.isMatrix3?($e.boundary=48,$e.storage=48):ze.isMatrix4?($e.boundary=64,$e.storage=64):ze.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",ze),$e}function Oe(ze){const $e=ze.target;$e.removeEventListener("dispose",Oe);const He=le.indexOf($e.__bindingPointIndex);le.splice(He,1),$.deleteBuffer(ee[$e.id]),delete ee[$e.id],delete re[$e.id]}function Ne(){for(const ze in ee)$.deleteBuffer(ee[ze]);le=[],ee={},re={}}return{bind:ye,update:Ee,dispose:Ne}}class WebGLRenderer{constructor(m={}){const{canvas:L=createCanvasElement(),context:j=null,depth:ee=!0,stencil:re=!1,alpha:le=!1,antialias:ve=!1,premultipliedAlpha:ye=!0,preserveDrawingBuffer:Ee=!1,powerPreference:Me="default",failIfMajorPerformanceCaveat:Ce=!1}=m;this.isWebGLRenderer=!0;let De;if(j!==null){if(typeof WebGLRenderingContext<"u"&&j instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");De=j.getContextAttributes().alpha}else De=le;const Be=new Uint32Array(4),ke=new Int32Array(4);let Fe=null,Oe=null;const Ne=[],ze=[];this.domElement=L,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=SRGBColorSpace,this.toneMapping=NoToneMapping,this.toneMappingExposure=1;const $e=this;let He=!1,We=0,qe=0,Ye=null,Ze=-1,Ke=null;const rt=new Vector4,ft=new Vector4;let mt=null;const Et=new Color(0);let bt=0,Ct=L.width,st=L.height,at=1,Xe=null,ht=null;const Bt=new Vector4(0,0,Ct,st),Dt=new Vector4(0,0,Ct,st);let Jt=!1;const tn=new Frustum;let zt=!1,Vt=!1;const Mt=new Matrix4,Tt=new Vector3,qt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let on=!1;function pn(){return Ye===null?at:1}let kt=j;function Mn(Pt,Yt){return L.getContext(Pt,Yt)}try{const Pt={alpha:!0,depth:ee,stencil:re,antialias:ve,premultipliedAlpha:ye,preserveDrawingBuffer:Ee,powerPreference:Me,failIfMajorPerformanceCaveat:Ce};if("setAttribute"in L&&L.setAttribute("data-engine",`three.js r${REVISION}`),L.addEventListener("webglcontextlost",zn,!1),L.addEventListener("webglcontextrestored",Xt,!1),L.addEventListener("webglcontextcreationerror",En,!1),kt===null){const Yt="webgl2";if(kt=Mn(Yt,Pt),kt===null)throw Mn(Yt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(Pt){throw console.error("THREE.WebGLRenderer: "+Pt.message),Pt}let wt,It,Kt,ln,nn,gn,xn,St,At,Ut,Zt,cn,sn,bn,vn,Cn,Un,yn,$n,Jn,Hn,Bn,Yn,Qn;function Kn(){wt=new WebGLExtensions(kt),wt.init(),Bn=new WebGLUtils(kt,wt),It=new WebGLCapabilities(kt,wt,m,Bn),Kt=new WebGLState(kt),ln=new WebGLInfo(kt),nn=new WebGLProperties,gn=new WebGLTextures(kt,wt,Kt,nn,It,Bn,ln),xn=new WebGLCubeMaps($e),St=new WebGLCubeUVMaps($e),At=new WebGLAttributes(kt),Yn=new WebGLBindingStates(kt,At),Ut=new WebGLGeometries(kt,At,ln,Yn),Zt=new WebGLObjects(kt,Ut,At,ln),$n=new WebGLMorphtargets(kt,It,gn),Cn=new WebGLClipping(nn),cn=new WebGLPrograms($e,xn,St,wt,It,Yn,Cn),sn=new WebGLMaterials($e,nn),bn=new WebGLRenderLists,vn=new WebGLRenderStates(wt),yn=new WebGLBackground($e,xn,St,Kt,Zt,De,ye),Un=new WebGLShadowMap($e,Zt,It),Qn=new WebGLUniformsGroups(kt,ln,It,Kt),Jn=new WebGLBufferRenderer(kt,wt,ln),Hn=new WebGLIndexedBufferRenderer(kt,wt,ln),ln.programs=cn.programs,$e.capabilities=It,$e.extensions=wt,$e.properties=nn,$e.renderLists=bn,$e.shadowMap=Un,$e.state=Kt,$e.info=ln}Kn();const Wt=new WebXRManager($e,kt);this.xr=Wt,this.getContext=function(){return kt},this.getContextAttributes=function(){return kt.getContextAttributes()},this.forceContextLoss=function(){const Pt=wt.get("WEBGL_lose_context");Pt&&Pt.loseContext()},this.forceContextRestore=function(){const Pt=wt.get("WEBGL_lose_context");Pt&&Pt.restoreContext()},this.getPixelRatio=function(){return at},this.setPixelRatio=function(Pt){Pt!==void 0&&(at=Pt,this.setSize(Ct,st,!1))},this.getSize=function(Pt){return Pt.set(Ct,st)},this.setSize=function(Pt,Yt,un=!0){if(Wt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Ct=Pt,st=Yt,L.width=Math.floor(Pt*at),L.height=Math.floor(Yt*at),un===!0&&(L.style.width=Pt+"px",L.style.height=Yt+"px"),this.setViewport(0,0,Pt,Yt)},this.getDrawingBufferSize=function(Pt){return Pt.set(Ct*at,st*at).floor()},this.setDrawingBufferSize=function(Pt,Yt,un){Ct=Pt,st=Yt,at=un,L.width=Math.floor(Pt*un),L.height=Math.floor(Yt*un),this.setViewport(0,0,Pt,Yt)},this.getCurrentViewport=function(Pt){return Pt.copy(rt)},this.getViewport=function(Pt){return Pt.copy(Bt)},this.setViewport=function(Pt,Yt,un,it){Pt.isVector4?Bt.set(Pt.x,Pt.y,Pt.z,Pt.w):Bt.set(Pt,Yt,un,it),Kt.viewport(rt.copy(Bt).multiplyScalar(at).round())},this.getScissor=function(Pt){return Pt.copy(Dt)},this.setScissor=function(Pt,Yt,un,it){Pt.isVector4?Dt.set(Pt.x,Pt.y,Pt.z,Pt.w):Dt.set(Pt,Yt,un,it),Kt.scissor(ft.copy(Dt).multiplyScalar(at).round())},this.getScissorTest=function(){return Jt},this.setScissorTest=function(Pt){Kt.setScissorTest(Jt=Pt)},this.setOpaqueSort=function(Pt){Xe=Pt},this.setTransparentSort=function(Pt){ht=Pt},this.getClearColor=function(Pt){return Pt.copy(yn.getClearColor())},this.setClearColor=function(){yn.setClearColor.apply(yn,arguments)},this.getClearAlpha=function(){return yn.getClearAlpha()},this.setClearAlpha=function(){yn.setClearAlpha.apply(yn,arguments)},this.clear=function(Pt=!0,Yt=!0,un=!0){let it=0;if(Pt){let lt=!1;if(Ye!==null){const xt=Ye.texture.format;lt=xt===RGBAIntegerFormat||xt===RGIntegerFormat||xt===RedIntegerFormat}if(lt){const xt=Ye.texture.type,Nt=xt===UnsignedByteType||xt===UnsignedIntType||xt===UnsignedShortType||xt===UnsignedInt248Type||xt===UnsignedShort4444Type||xt===UnsignedShort5551Type,Qt=yn.getClearColor(),Ht=yn.getClearAlpha(),dn=Qt.r,en=Qt.g,hn=Qt.b;Nt?(Be[0]=dn,Be[1]=en,Be[2]=hn,Be[3]=Ht,kt.clearBufferuiv(kt.COLOR,0,Be)):(ke[0]=dn,ke[1]=en,ke[2]=hn,ke[3]=Ht,kt.clearBufferiv(kt.COLOR,0,ke))}else it|=kt.COLOR_BUFFER_BIT}Yt&&(it|=kt.DEPTH_BUFFER_BIT),un&&(it|=kt.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),kt.clear(it)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){L.removeEventListener("webglcontextlost",zn,!1),L.removeEventListener("webglcontextrestored",Xt,!1),L.removeEventListener("webglcontextcreationerror",En,!1),bn.dispose(),vn.dispose(),nn.dispose(),xn.dispose(),St.dispose(),Zt.dispose(),Yn.dispose(),Qn.dispose(),cn.dispose(),Wt.dispose(),Wt.removeEventListener("sessionstart",ui),Wt.removeEventListener("sessionend",Fi),pi.stop()};function zn(Pt){Pt.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),He=!0}function Xt(){console.log("THREE.WebGLRenderer: Context Restored."),He=!1;const Pt=ln.autoReset,Yt=Un.enabled,un=Un.autoUpdate,it=Un.needsUpdate,lt=Un.type;Kn(),ln.autoReset=Pt,Un.enabled=Yt,Un.autoUpdate=un,Un.needsUpdate=it,Un.type=lt}function En(Pt){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Pt.statusMessage)}function Fn(Pt){const Yt=Pt.target;Yt.removeEventListener("dispose",Fn),Zn(Yt)}function Zn(Pt){hi(Pt),nn.remove(Pt)}function hi(Pt){const Yt=nn.get(Pt).programs;Yt!==void 0&&(Yt.forEach(function(un){cn.releaseProgram(un)}),Pt.isShaderMaterial&&cn.releaseShaderCache(Pt))}this.renderBufferDirect=function(Pt,Yt,un,it,lt,xt){Yt===null&&(Yt=qt);const Nt=lt.isMesh&&lt.matrixWorld.determinant()<0,Qt=br(Pt,Yt,un,it,lt);Kt.setMaterial(it,Nt);let Ht=un.index,dn=1;if(it.wireframe===!0){if(Ht=Ut.getWireframeAttribute(un),Ht===void 0)return;dn=2}const en=un.drawRange,hn=un.attributes.position;let _n=en.start*dn,fn=(en.start+en.count)*dn;xt!==null&&(_n=Math.max(_n,xt.start*dn),fn=Math.min(fn,(xt.start+xt.count)*dn)),Ht!==null?(_n=Math.max(_n,0),fn=Math.min(fn,Ht.count)):hn!=null&&(_n=Math.max(_n,0),fn=Math.min(fn,hn.count));const Tn=fn-_n;if(Tn<0||Tn===1/0)return;Yn.setup(lt,it,Qt,un,Ht);let Ln,Pn=Jn;if(Ht!==null&&(Ln=At.get(Ht),Pn=Hn,Pn.setIndex(Ln)),lt.isMesh)it.wireframe===!0?(Kt.setLineWidth(it.wireframeLinewidth*pn()),Pn.setMode(kt.LINES)):Pn.setMode(kt.TRIANGLES);else if(lt.isLine){let wn=it.linewidth;wn===void 0&&(wn=1),Kt.setLineWidth(wn*pn()),lt.isLineSegments?Pn.setMode(kt.LINES):lt.isLineLoop?Pn.setMode(kt.LINE_LOOP):Pn.setMode(kt.LINE_STRIP)}else lt.isPoints?Pn.setMode(kt.POINTS):lt.isSprite&&Pn.setMode(kt.TRIANGLES);if(lt.isBatchedMesh)lt._multiDrawInstances!==null?Pn.renderMultiDrawInstances(lt._multiDrawStarts,lt._multiDrawCounts,lt._multiDrawCount,lt._multiDrawInstances):Pn.renderMultiDraw(lt._multiDrawStarts,lt._multiDrawCounts,lt._multiDrawCount);else if(lt.isInstancedMesh)Pn.renderInstances(_n,Tn,lt.count);else if(un.isInstancedBufferGeometry){const wn=un._maxInstanceCount!==void 0?un._maxInstanceCount:1/0,Nn=Math.min(un.instanceCount,wn);Pn.renderInstances(_n,Tn,Nn)}else Pn.render(_n,Tn)};function bi(Pt,Yt,un){Pt.transparent===!0&&Pt.side===DoubleSide&&Pt.forceSinglePass===!1?(Pt.side=BackSide,Pt.needsUpdate=!0,Qi(Pt,Yt,un),Pt.side=FrontSide,Pt.needsUpdate=!0,Qi(Pt,Yt,un),Pt.side=DoubleSide):Qi(Pt,Yt,un)}this.compile=function(Pt,Yt,un=null){un===null&&(un=Pt),Oe=vn.get(un),Oe.init(Yt),ze.push(Oe),un.traverseVisible(function(lt){lt.isLight&&lt.layers.test(Yt.layers)&&(Oe.pushLight(lt),lt.castShadow&&Oe.pushShadow(lt))}),Pt!==un&&Pt.traverseVisible(function(lt){lt.isLight&&lt.layers.test(Yt.layers)&&(Oe.pushLight(lt),lt.castShadow&&Oe.pushShadow(lt))}),Oe.setupLights();const it=new Set;return Pt.traverse(function(lt){const xt=lt.material;if(xt)if(Array.isArray(xt))for(let Nt=0;Nt<xt.length;Nt++){const Qt=xt[Nt];bi(Qt,un,lt),it.add(Qt)}else bi(xt,un,lt),it.add(xt)}),ze.pop(),Oe=null,it},this.compileAsync=function(Pt,Yt,un=null){const it=this.compile(Pt,Yt,un);return new Promise(lt=>{function xt(){if(it.forEach(function(Nt){nn.get(Nt).currentProgram.isReady()&&it.delete(Nt)}),it.size===0){lt(Pt);return}setTimeout(xt,10)}wt.get("KHR_parallel_shader_compile")!==null?xt():setTimeout(xt,10)})};let _i=null;function ci(Pt){_i&&_i(Pt)}function ui(){pi.stop()}function Fi(){pi.start()}const pi=new WebGLAnimation;pi.setAnimationLoop(ci),typeof self<"u"&&pi.setContext(self),this.setAnimationLoop=function(Pt){_i=Pt,Wt.setAnimationLoop(Pt),Pt===null?pi.stop():pi.start()},Wt.addEventListener("sessionstart",ui),Wt.addEventListener("sessionend",Fi),this.render=function(Pt,Yt){if(Yt!==void 0&&Yt.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(He===!0)return;if(Pt.matrixWorldAutoUpdate===!0&&Pt.updateMatrixWorld(),Yt.parent===null&&Yt.matrixWorldAutoUpdate===!0&&Yt.updateMatrixWorld(),Wt.enabled===!0&&Wt.isPresenting===!0&&(Wt.cameraAutoUpdate===!0&&Wt.updateCamera(Yt),Yt=Wt.getCamera()),Pt.isScene===!0&&Pt.onBeforeRender($e,Pt,Yt,Ye),Oe=vn.get(Pt,ze.length),Oe.init(Yt),ze.push(Oe),Mt.multiplyMatrices(Yt.projectionMatrix,Yt.matrixWorldInverse),tn.setFromProjectionMatrix(Mt),Vt=this.localClippingEnabled,zt=Cn.init(this.clippingPlanes,Vt),Fe=bn.get(Pt,Ne.length),Fe.init(),Ne.push(Fe),Wt.enabled===!0&&Wt.isPresenting===!0){const xt=$e.xr.getDepthSensingMesh();xt!==null&&ir(xt,Yt,-1/0,$e.sortObjects)}ir(Pt,Yt,0,$e.sortObjects),Fe.finish(),$e.sortObjects===!0&&Fe.sort(Xe,ht),on=Wt.enabled===!1||Wt.isPresenting===!1||Wt.hasDepthSensing()===!1,on&&yn.addToRenderList(Fe,Pt),this.info.render.frame++,zt===!0&&Cn.beginShadows();const un=Oe.state.shadowsArray;Un.render(un,Pt,Yt),zt===!0&&Cn.endShadows(),this.info.autoReset===!0&&this.info.reset();const it=Fe.opaque,lt=Fe.transmissive;if(Oe.setupLights(),Yt.isArrayCamera){const xt=Yt.cameras;if(lt.length>0)for(let Nt=0,Qt=xt.length;Nt<Qt;Nt++){const Ht=xt[Nt];rr(it,lt,Pt,Ht)}on&&yn.render(Pt);for(let Nt=0,Qt=xt.length;Nt<Qt;Nt++){const Ht=xt[Nt];Ki(Fe,Pt,Ht,Ht.viewport)}}else lt.length>0&&rr(it,lt,Pt,Yt),on&&yn.render(Pt),Ki(Fe,Pt,Yt);Ye!==null&&(gn.updateMultisampleRenderTarget(Ye),gn.updateRenderTargetMipmap(Ye)),Pt.isScene===!0&&Pt.onAfterRender($e,Pt,Yt),Yn.resetDefaultState(),Ze=-1,Ke=null,ze.pop(),ze.length>0?(Oe=ze[ze.length-1],zt===!0&&Cn.setGlobalState($e.clippingPlanes,Oe.state.camera)):Oe=null,Ne.pop(),Ne.length>0?Fe=Ne[Ne.length-1]:Fe=null};function ir(Pt,Yt,un,it){if(Pt.visible===!1)return;if(Pt.layers.test(Yt.layers)){if(Pt.isGroup)un=Pt.renderOrder;else if(Pt.isLOD)Pt.autoUpdate===!0&&Pt.update(Yt);else if(Pt.isLight)Oe.pushLight(Pt),Pt.castShadow&&Oe.pushShadow(Pt);else if(Pt.isSprite){if(!Pt.frustumCulled||tn.intersectsSprite(Pt)){it&&Tt.setFromMatrixPosition(Pt.matrixWorld).applyMatrix4(Mt);const Nt=Zt.update(Pt),Qt=Pt.material;Qt.visible&&Fe.push(Pt,Nt,Qt,un,Tt.z,null)}}else if((Pt.isMesh||Pt.isLine||Pt.isPoints)&&(!Pt.frustumCulled||tn.intersectsObject(Pt))){const Nt=Zt.update(Pt),Qt=Pt.material;if(it&&(Pt.boundingSphere!==void 0?(Pt.boundingSphere===null&&Pt.computeBoundingSphere(),Tt.copy(Pt.boundingSphere.center)):(Nt.boundingSphere===null&&Nt.computeBoundingSphere(),Tt.copy(Nt.boundingSphere.center)),Tt.applyMatrix4(Pt.matrixWorld).applyMatrix4(Mt)),Array.isArray(Qt)){const Ht=Nt.groups;for(let dn=0,en=Ht.length;dn<en;dn++){const hn=Ht[dn],_n=Qt[hn.materialIndex];_n&&_n.visible&&Fe.push(Pt,Nt,_n,un,Tt.z,hn)}}else Qt.visible&&Fe.push(Pt,Nt,Qt,un,Tt.z,null)}}const xt=Pt.children;for(let Nt=0,Qt=xt.length;Nt<Qt;Nt++)ir(xt[Nt],Yt,un,it)}function Ki(Pt,Yt,un,it){const lt=Pt.opaque,xt=Pt.transmissive,Nt=Pt.transparent;Oe.setupLightsView(un),zt===!0&&Cn.setGlobalState($e.clippingPlanes,un),it&&Kt.viewport(rt.copy(it)),lt.length>0&&ki(lt,Yt,un),xt.length>0&&ki(xt,Yt,un),Nt.length>0&&ki(Nt,Yt,un),Kt.buffers.depth.setTest(!0),Kt.buffers.depth.setMask(!0),Kt.buffers.color.setMask(!0),Kt.setPolygonOffset(!1)}function rr(Pt,Yt,un,it){if((un.isScene===!0?un.overrideMaterial:null)!==null)return;Oe.state.transmissionRenderTarget[it.id]===void 0&&(Oe.state.transmissionRenderTarget[it.id]=new WebGLRenderTarget(1,1,{generateMipmaps:!0,type:wt.has("EXT_color_buffer_half_float")||wt.has("EXT_color_buffer_float")?HalfFloatType:UnsignedByteType,minFilter:LinearMipmapLinearFilter,samples:4,stencilBuffer:re,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:ColorManagement.workingColorSpace}));const xt=Oe.state.transmissionRenderTarget[it.id],Nt=it.viewport||rt;xt.setSize(Nt.z,Nt.w);const Qt=$e.getRenderTarget();$e.setRenderTarget(xt),$e.getClearColor(Et),bt=$e.getClearAlpha(),bt<1&&$e.setClearColor(16777215,.5),on?yn.render(un):$e.clear();const Ht=$e.toneMapping;$e.toneMapping=NoToneMapping;const dn=it.viewport;if(it.viewport!==void 0&&(it.viewport=void 0),Oe.setupLightsView(it),zt===!0&&Cn.setGlobalState($e.clippingPlanes,it),ki(Pt,un,it),gn.updateMultisampleRenderTarget(xt),gn.updateRenderTargetMipmap(xt),wt.has("WEBGL_multisampled_render_to_texture")===!1){let en=!1;for(let hn=0,_n=Yt.length;hn<_n;hn++){const fn=Yt[hn],Tn=fn.object,Ln=fn.geometry,Pn=fn.material,wn=fn.group;if(Pn.side===DoubleSide&&Tn.layers.test(it.layers)){const Nn=Pn.side;Pn.side=BackSide,Pn.needsUpdate=!0,Gi(Tn,un,it,Ln,Pn,wn),Pn.side=Nn,Pn.needsUpdate=!0,en=!0}}en===!0&&(gn.updateMultisampleRenderTarget(xt),gn.updateRenderTargetMipmap(xt))}$e.setRenderTarget(Qt),$e.setClearColor(Et,bt),dn!==void 0&&(it.viewport=dn),$e.toneMapping=Ht}function ki(Pt,Yt,un){const it=Yt.isScene===!0?Yt.overrideMaterial:null;for(let lt=0,xt=Pt.length;lt<xt;lt++){const Nt=Pt[lt],Qt=Nt.object,Ht=Nt.geometry,dn=it===null?Nt.material:it,en=Nt.group;Qt.layers.test(un.layers)&&Gi(Qt,Yt,un,Ht,dn,en)}}function Gi(Pt,Yt,un,it,lt,xt){Pt.onBeforeRender($e,Yt,un,it,lt,xt),Pt.modelViewMatrix.multiplyMatrices(un.matrixWorldInverse,Pt.matrixWorld),Pt.normalMatrix.getNormalMatrix(Pt.modelViewMatrix),lt.onBeforeRender($e,Yt,un,it,Pt,xt),lt.transparent===!0&&lt.side===DoubleSide&&lt.forceSinglePass===!1?(lt.side=BackSide,lt.needsUpdate=!0,$e.renderBufferDirect(un,Yt,it,lt,Pt,xt),lt.side=FrontSide,lt.needsUpdate=!0,$e.renderBufferDirect(un,Yt,it,lt,Pt,xt),lt.side=DoubleSide):$e.renderBufferDirect(un,Yt,it,lt,Pt,xt),Pt.onAfterRender($e,Yt,un,it,lt,xt)}function Qi(Pt,Yt,un){Yt.isScene!==!0&&(Yt=qt);const it=nn.get(Pt),lt=Oe.state.lights,xt=Oe.state.shadowsArray,Nt=lt.state.version,Qt=cn.getParameters(Pt,lt.state,xt,Yt,un),Ht=cn.getProgramCacheKey(Qt);let dn=it.programs;it.environment=Pt.isMeshStandardMaterial?Yt.environment:null,it.fog=Yt.fog,it.envMap=(Pt.isMeshStandardMaterial?St:xn).get(Pt.envMap||it.environment),it.envMapRotation=it.environment!==null&&Pt.envMap===null?Yt.environmentRotation:Pt.envMapRotation,dn===void 0&&(Pt.addEventListener("dispose",Fn),dn=new Map,it.programs=dn);let en=dn.get(Ht);if(en!==void 0){if(it.currentProgram===en&&it.lightsStateVersion===Nt)return gr(Pt,Qt),en}else Qt.uniforms=cn.getUniforms(Pt),Pt.onBuild(un,Qt,$e),Pt.onBeforeCompile(Qt,$e),en=cn.acquireProgram(Qt,Ht),dn.set(Ht,en),it.uniforms=Qt.uniforms;const hn=it.uniforms;return(!Pt.isShaderMaterial&&!Pt.isRawShaderMaterial||Pt.clipping===!0)&&(hn.clippingPlanes=Cn.uniform),gr(Pt,Qt),it.needsLights=er(Pt),it.lightsStateVersion=Nt,it.needsLights&&(hn.ambientLightColor.value=lt.state.ambient,hn.lightProbe.value=lt.state.probe,hn.directionalLights.value=lt.state.directional,hn.directionalLightShadows.value=lt.state.directionalShadow,hn.spotLights.value=lt.state.spot,hn.spotLightShadows.value=lt.state.spotShadow,hn.rectAreaLights.value=lt.state.rectArea,hn.ltc_1.value=lt.state.rectAreaLTC1,hn.ltc_2.value=lt.state.rectAreaLTC2,hn.pointLights.value=lt.state.point,hn.pointLightShadows.value=lt.state.pointShadow,hn.hemisphereLights.value=lt.state.hemi,hn.directionalShadowMap.value=lt.state.directionalShadowMap,hn.directionalShadowMatrix.value=lt.state.directionalShadowMatrix,hn.spotShadowMap.value=lt.state.spotShadowMap,hn.spotLightMatrix.value=lt.state.spotLightMatrix,hn.spotLightMap.value=lt.state.spotLightMap,hn.pointShadowMap.value=lt.state.pointShadowMap,hn.pointShadowMatrix.value=lt.state.pointShadowMatrix),it.currentProgram=en,it.uniformsList=null,en}function mr(Pt){if(Pt.uniformsList===null){const Yt=Pt.currentProgram.getUniforms();Pt.uniformsList=WebGLUniforms.seqWithValue(Yt.seq,Pt.uniforms)}return Pt.uniformsList}function gr(Pt,Yt){const un=nn.get(Pt);un.outputColorSpace=Yt.outputColorSpace,un.batching=Yt.batching,un.batchingColor=Yt.batchingColor,un.instancing=Yt.instancing,un.instancingColor=Yt.instancingColor,un.instancingMorph=Yt.instancingMorph,un.skinning=Yt.skinning,un.morphTargets=Yt.morphTargets,un.morphNormals=Yt.morphNormals,un.morphColors=Yt.morphColors,un.morphTargetsCount=Yt.morphTargetsCount,un.numClippingPlanes=Yt.numClippingPlanes,un.numIntersection=Yt.numClipIntersection,un.vertexAlphas=Yt.vertexAlphas,un.vertexTangents=Yt.vertexTangents,un.toneMapping=Yt.toneMapping}function br(Pt,Yt,un,it,lt){Yt.isScene!==!0&&(Yt=qt),gn.resetTextureUnits();const xt=Yt.fog,Nt=it.isMeshStandardMaterial?Yt.environment:null,Qt=Ye===null?$e.outputColorSpace:Ye.isXRRenderTarget===!0?Ye.texture.colorSpace:LinearSRGBColorSpace,Ht=(it.isMeshStandardMaterial?St:xn).get(it.envMap||Nt),dn=it.vertexColors===!0&&!!un.attributes.color&&un.attributes.color.itemSize===4,en=!!un.attributes.tangent&&(!!it.normalMap||it.anisotropy>0),hn=!!un.morphAttributes.position,_n=!!un.morphAttributes.normal,fn=!!un.morphAttributes.color;let Tn=NoToneMapping;it.toneMapped&&(Ye===null||Ye.isXRRenderTarget===!0)&&(Tn=$e.toneMapping);const Ln=un.morphAttributes.position||un.morphAttributes.normal||un.morphAttributes.color,Pn=Ln!==void 0?Ln.length:0,wn=nn.get(it),Nn=Oe.state.lights;if(zt===!0&&(Vt===!0||Pt!==Ke)){const gi=Pt===Ke&&it.id===Ze;Cn.setState(it,Pt,gi)}let Dn=!1;it.version===wn.__version?(wn.needsLights&&wn.lightsStateVersion!==Nn.state.version||wn.outputColorSpace!==Qt||lt.isBatchedMesh&&wn.batching===!1||!lt.isBatchedMesh&&wn.batching===!0||lt.isBatchedMesh&&wn.batchingColor===!0&&lt.colorTexture===null||lt.isBatchedMesh&&wn.batchingColor===!1&&lt.colorTexture!==null||lt.isInstancedMesh&&wn.instancing===!1||!lt.isInstancedMesh&&wn.instancing===!0||lt.isSkinnedMesh&&wn.skinning===!1||!lt.isSkinnedMesh&&wn.skinning===!0||lt.isInstancedMesh&&wn.instancingColor===!0&&lt.instanceColor===null||lt.isInstancedMesh&&wn.instancingColor===!1&&lt.instanceColor!==null||lt.isInstancedMesh&&wn.instancingMorph===!0&&lt.morphTexture===null||lt.isInstancedMesh&&wn.instancingMorph===!1&&lt.morphTexture!==null||wn.envMap!==Ht||it.fog===!0&&wn.fog!==xt||wn.numClippingPlanes!==void 0&&(wn.numClippingPlanes!==Cn.numPlanes||wn.numIntersection!==Cn.numIntersection)||wn.vertexAlphas!==dn||wn.vertexTangents!==en||wn.morphTargets!==hn||wn.morphNormals!==_n||wn.morphColors!==fn||wn.toneMapping!==Tn||wn.morphTargetsCount!==Pn)&&(Dn=!0):(Dn=!0,wn.__version=it.version);let jn=wn.currentProgram;Dn===!0&&(jn=Qi(it,Yt,lt));let si=!1,oi=!1,Ai=!1;const ei=jn.getUniforms(),ni=wn.uniforms;if(Kt.useProgram(jn.program)&&(si=!0,oi=!0,Ai=!0),it.id!==Ze&&(Ze=it.id,oi=!0),si||Ke!==Pt){ei.setValue(kt,"projectionMatrix",Pt.projectionMatrix),ei.setValue(kt,"viewMatrix",Pt.matrixWorldInverse);const gi=ei.map.cameraPosition;gi!==void 0&&gi.setValue(kt,Tt.setFromMatrixPosition(Pt.matrixWorld)),It.logarithmicDepthBuffer&&ei.setValue(kt,"logDepthBufFC",2/(Math.log(Pt.far+1)/Math.LN2)),(it.isMeshPhongMaterial||it.isMeshToonMaterial||it.isMeshLambertMaterial||it.isMeshBasicMaterial||it.isMeshStandardMaterial||it.isShaderMaterial)&&ei.setValue(kt,"isOrthographic",Pt.isOrthographicCamera===!0),Ke!==Pt&&(Ke=Pt,oi=!0,Ai=!0)}if(lt.isSkinnedMesh){ei.setOptional(kt,lt,"bindMatrix"),ei.setOptional(kt,lt,"bindMatrixInverse");const gi=lt.skeleton;gi&&(gi.boneTexture===null&&gi.computeBoneTexture(),ei.setValue(kt,"boneTexture",gi.boneTexture,gn))}lt.isBatchedMesh&&(ei.setOptional(kt,lt,"batchingTexture"),ei.setValue(kt,"batchingTexture",lt._matricesTexture,gn),ei.setOptional(kt,lt,"batchingColorTexture"),lt._colorsTexture!==null&&ei.setValue(kt,"batchingColorTexture",lt._colorsTexture,gn));const wi=un.morphAttributes;if((wi.position!==void 0||wi.normal!==void 0||wi.color!==void 0)&&$n.update(lt,un,jn),(oi||wn.receiveShadow!==lt.receiveShadow)&&(wn.receiveShadow=lt.receiveShadow,ei.setValue(kt,"receiveShadow",lt.receiveShadow)),it.isMeshGouraudMaterial&&it.envMap!==null&&(ni.envMap.value=Ht,ni.flipEnvMap.value=Ht.isCubeTexture&&Ht.isRenderTargetTexture===!1?-1:1),it.isMeshStandardMaterial&&it.envMap===null&&Yt.environment!==null&&(ni.envMapIntensity.value=Yt.environmentIntensity),oi&&(ei.setValue(kt,"toneMappingExposure",$e.toneMappingExposure),wn.needsLights&&hr(ni,Ai),xt&&it.fog===!0&&sn.refreshFogUniforms(ni,xt),sn.refreshMaterialUniforms(ni,it,at,st,Oe.state.transmissionRenderTarget[Pt.id]),WebGLUniforms.upload(kt,mr(wn),ni,gn)),it.isShaderMaterial&&it.uniformsNeedUpdate===!0&&(WebGLUniforms.upload(kt,mr(wn),ni,gn),it.uniformsNeedUpdate=!1),it.isSpriteMaterial&&ei.setValue(kt,"center",lt.center),ei.setValue(kt,"modelViewMatrix",lt.modelViewMatrix),ei.setValue(kt,"normalMatrix",lt.normalMatrix),ei.setValue(kt,"modelMatrix",lt.matrixWorld),it.isShaderMaterial||it.isRawShaderMaterial){const gi=it.uniformsGroups;for(let di=0,Xn=gi.length;di<Xn;di++){const fi=gi[di];Qn.update(fi,jn),Qn.bind(fi,jn)}}return jn}function hr(Pt,Yt){Pt.ambientLightColor.needsUpdate=Yt,Pt.lightProbe.needsUpdate=Yt,Pt.directionalLights.needsUpdate=Yt,Pt.directionalLightShadows.needsUpdate=Yt,Pt.pointLights.needsUpdate=Yt,Pt.pointLightShadows.needsUpdate=Yt,Pt.spotLights.needsUpdate=Yt,Pt.spotLightShadows.needsUpdate=Yt,Pt.rectAreaLights.needsUpdate=Yt,Pt.hemisphereLights.needsUpdate=Yt}function er(Pt){return Pt.isMeshLambertMaterial||Pt.isMeshToonMaterial||Pt.isMeshPhongMaterial||Pt.isMeshStandardMaterial||Pt.isShadowMaterial||Pt.isShaderMaterial&&Pt.lights===!0}this.getActiveCubeFace=function(){return We},this.getActiveMipmapLevel=function(){return qe},this.getRenderTarget=function(){return Ye},this.setRenderTargetTextures=function(Pt,Yt,un){nn.get(Pt.texture).__webglTexture=Yt,nn.get(Pt.depthTexture).__webglTexture=un;const it=nn.get(Pt);it.__hasExternalTextures=!0,it.__autoAllocateDepthBuffer=un===void 0,it.__autoAllocateDepthBuffer||wt.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),it.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(Pt,Yt){const un=nn.get(Pt);un.__webglFramebuffer=Yt,un.__useDefaultFramebuffer=Yt===void 0},this.setRenderTarget=function(Pt,Yt=0,un=0){Ye=Pt,We=Yt,qe=un;let it=!0,lt=null,xt=!1,Nt=!1;if(Pt){const Ht=nn.get(Pt);Ht.__useDefaultFramebuffer!==void 0?(Kt.bindFramebuffer(kt.FRAMEBUFFER,null),it=!1):Ht.__webglFramebuffer===void 0?gn.setupRenderTarget(Pt):Ht.__hasExternalTextures&&gn.rebindTextures(Pt,nn.get(Pt.texture).__webglTexture,nn.get(Pt.depthTexture).__webglTexture);const dn=Pt.texture;(dn.isData3DTexture||dn.isDataArrayTexture||dn.isCompressedArrayTexture)&&(Nt=!0);const en=nn.get(Pt).__webglFramebuffer;Pt.isWebGLCubeRenderTarget?(Array.isArray(en[Yt])?lt=en[Yt][un]:lt=en[Yt],xt=!0):Pt.samples>0&&gn.useMultisampledRTT(Pt)===!1?lt=nn.get(Pt).__webglMultisampledFramebuffer:Array.isArray(en)?lt=en[un]:lt=en,rt.copy(Pt.viewport),ft.copy(Pt.scissor),mt=Pt.scissorTest}else rt.copy(Bt).multiplyScalar(at).floor(),ft.copy(Dt).multiplyScalar(at).floor(),mt=Jt;if(Kt.bindFramebuffer(kt.FRAMEBUFFER,lt)&&it&&Kt.drawBuffers(Pt,lt),Kt.viewport(rt),Kt.scissor(ft),Kt.setScissorTest(mt),xt){const Ht=nn.get(Pt.texture);kt.framebufferTexture2D(kt.FRAMEBUFFER,kt.COLOR_ATTACHMENT0,kt.TEXTURE_CUBE_MAP_POSITIVE_X+Yt,Ht.__webglTexture,un)}else if(Nt){const Ht=nn.get(Pt.texture),dn=Yt||0;kt.framebufferTextureLayer(kt.FRAMEBUFFER,kt.COLOR_ATTACHMENT0,Ht.__webglTexture,un||0,dn)}Ze=-1},this.readRenderTargetPixels=function(Pt,Yt,un,it,lt,xt,Nt){if(!(Pt&&Pt.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Qt=nn.get(Pt).__webglFramebuffer;if(Pt.isWebGLCubeRenderTarget&&Nt!==void 0&&(Qt=Qt[Nt]),Qt){Kt.bindFramebuffer(kt.FRAMEBUFFER,Qt);try{const Ht=Pt.texture,dn=Ht.format,en=Ht.type;if(!It.textureFormatReadable(dn)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!It.textureTypeReadable(en)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Yt>=0&&Yt<=Pt.width-it&&un>=0&&un<=Pt.height-lt&&kt.readPixels(Yt,un,it,lt,Bn.convert(dn),Bn.convert(en),xt)}finally{const Ht=Ye!==null?nn.get(Ye).__webglFramebuffer:null;Kt.bindFramebuffer(kt.FRAMEBUFFER,Ht)}}},this.readRenderTargetPixelsAsync=async function(Pt,Yt,un,it,lt,xt,Nt){if(!(Pt&&Pt.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Qt=nn.get(Pt).__webglFramebuffer;if(Pt.isWebGLCubeRenderTarget&&Nt!==void 0&&(Qt=Qt[Nt]),Qt){Kt.bindFramebuffer(kt.FRAMEBUFFER,Qt);try{const Ht=Pt.texture,dn=Ht.format,en=Ht.type;if(!It.textureFormatReadable(dn))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!It.textureTypeReadable(en))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(Yt>=0&&Yt<=Pt.width-it&&un>=0&&un<=Pt.height-lt){const hn=kt.createBuffer();kt.bindBuffer(kt.PIXEL_PACK_BUFFER,hn),kt.bufferData(kt.PIXEL_PACK_BUFFER,xt.byteLength,kt.STREAM_READ),kt.readPixels(Yt,un,it,lt,Bn.convert(dn),Bn.convert(en),0),kt.flush();const _n=kt.fenceSync(kt.SYNC_GPU_COMMANDS_COMPLETE,0);await probeAsync(kt,_n,4);try{kt.bindBuffer(kt.PIXEL_PACK_BUFFER,hn),kt.getBufferSubData(kt.PIXEL_PACK_BUFFER,0,xt)}finally{kt.deleteBuffer(hn),kt.deleteSync(_n)}return xt}}finally{const Ht=Ye!==null?nn.get(Ye).__webglFramebuffer:null;Kt.bindFramebuffer(kt.FRAMEBUFFER,Ht)}}},this.copyFramebufferToTexture=function(Pt,Yt=null,un=0){Pt.isTexture!==!0&&(console.warn("WebGLRenderer: copyFramebufferToTexture function signature has changed."),Yt=arguments[0]||null,Pt=arguments[1]);const it=Math.pow(2,-un),lt=Math.floor(Pt.image.width*it),xt=Math.floor(Pt.image.height*it),Nt=Yt!==null?Yt.x:0,Qt=Yt!==null?Yt.y:0;gn.setTexture2D(Pt,0),kt.copyTexSubImage2D(kt.TEXTURE_2D,un,0,0,Nt,Qt,lt,xt),Kt.unbindTexture()},this.copyTextureToTexture=function(Pt,Yt,un=null,it=null,lt=0){Pt.isTexture!==!0&&(console.warn("WebGLRenderer: copyTextureToTexture function signature has changed."),it=arguments[0]||null,Pt=arguments[1],Yt=arguments[2],lt=arguments[3]||0,un=null);let xt,Nt,Qt,Ht,dn,en;un!==null?(xt=un.max.x-un.min.x,Nt=un.max.y-un.min.y,Qt=un.min.x,Ht=un.min.y):(xt=Pt.image.width,Nt=Pt.image.height,Qt=0,Ht=0),it!==null?(dn=it.x,en=it.y):(dn=0,en=0);const hn=Bn.convert(Yt.format),_n=Bn.convert(Yt.type);gn.setTexture2D(Yt,0),kt.pixelStorei(kt.UNPACK_FLIP_Y_WEBGL,Yt.flipY),kt.pixelStorei(kt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Yt.premultiplyAlpha),kt.pixelStorei(kt.UNPACK_ALIGNMENT,Yt.unpackAlignment);const fn=kt.getParameter(kt.UNPACK_ROW_LENGTH),Tn=kt.getParameter(kt.UNPACK_IMAGE_HEIGHT),Ln=kt.getParameter(kt.UNPACK_SKIP_PIXELS),Pn=kt.getParameter(kt.UNPACK_SKIP_ROWS),wn=kt.getParameter(kt.UNPACK_SKIP_IMAGES),Nn=Pt.isCompressedTexture?Pt.mipmaps[lt]:Pt.image;kt.pixelStorei(kt.UNPACK_ROW_LENGTH,Nn.width),kt.pixelStorei(kt.UNPACK_IMAGE_HEIGHT,Nn.height),kt.pixelStorei(kt.UNPACK_SKIP_PIXELS,Qt),kt.pixelStorei(kt.UNPACK_SKIP_ROWS,Ht),Pt.isDataTexture?kt.texSubImage2D(kt.TEXTURE_2D,lt,dn,en,xt,Nt,hn,_n,Nn.data):Pt.isCompressedTexture?kt.compressedTexSubImage2D(kt.TEXTURE_2D,lt,dn,en,Nn.width,Nn.height,hn,Nn.data):kt.texSubImage2D(kt.TEXTURE_2D,lt,dn,en,hn,_n,Nn),kt.pixelStorei(kt.UNPACK_ROW_LENGTH,fn),kt.pixelStorei(kt.UNPACK_IMAGE_HEIGHT,Tn),kt.pixelStorei(kt.UNPACK_SKIP_PIXELS,Ln),kt.pixelStorei(kt.UNPACK_SKIP_ROWS,Pn),kt.pixelStorei(kt.UNPACK_SKIP_IMAGES,wn),lt===0&&Yt.generateMipmaps&&kt.generateMipmap(kt.TEXTURE_2D),Kt.unbindTexture()},this.copyTextureToTexture3D=function(Pt,Yt,un=null,it=null,lt=0){Pt.isTexture!==!0&&(console.warn("WebGLRenderer: copyTextureToTexture3D function signature has changed."),un=arguments[0]||null,it=arguments[1]||null,Pt=arguments[2],Yt=arguments[3],lt=arguments[4]||0);let xt,Nt,Qt,Ht,dn,en,hn,_n,fn;const Tn=Pt.isCompressedTexture?Pt.mipmaps[lt]:Pt.image;un!==null?(xt=un.max.x-un.min.x,Nt=un.max.y-un.min.y,Qt=un.max.z-un.min.z,Ht=un.min.x,dn=un.min.y,en=un.min.z):(xt=Tn.width,Nt=Tn.height,Qt=Tn.depth,Ht=0,dn=0,en=0),it!==null?(hn=it.x,_n=it.y,fn=it.z):(hn=0,_n=0,fn=0);const Ln=Bn.convert(Yt.format),Pn=Bn.convert(Yt.type);let wn;if(Yt.isData3DTexture)gn.setTexture3D(Yt,0),wn=kt.TEXTURE_3D;else if(Yt.isDataArrayTexture||Yt.isCompressedArrayTexture)gn.setTexture2DArray(Yt,0),wn=kt.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}kt.pixelStorei(kt.UNPACK_FLIP_Y_WEBGL,Yt.flipY),kt.pixelStorei(kt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Yt.premultiplyAlpha),kt.pixelStorei(kt.UNPACK_ALIGNMENT,Yt.unpackAlignment);const Nn=kt.getParameter(kt.UNPACK_ROW_LENGTH),Dn=kt.getParameter(kt.UNPACK_IMAGE_HEIGHT),jn=kt.getParameter(kt.UNPACK_SKIP_PIXELS),si=kt.getParameter(kt.UNPACK_SKIP_ROWS),oi=kt.getParameter(kt.UNPACK_SKIP_IMAGES);kt.pixelStorei(kt.UNPACK_ROW_LENGTH,Tn.width),kt.pixelStorei(kt.UNPACK_IMAGE_HEIGHT,Tn.height),kt.pixelStorei(kt.UNPACK_SKIP_PIXELS,Ht),kt.pixelStorei(kt.UNPACK_SKIP_ROWS,dn),kt.pixelStorei(kt.UNPACK_SKIP_IMAGES,en),Pt.isDataTexture||Pt.isData3DTexture?kt.texSubImage3D(wn,lt,hn,_n,fn,xt,Nt,Qt,Ln,Pn,Tn.data):Yt.isCompressedArrayTexture?kt.compressedTexSubImage3D(wn,lt,hn,_n,fn,xt,Nt,Qt,Ln,Tn.data):kt.texSubImage3D(wn,lt,hn,_n,fn,xt,Nt,Qt,Ln,Pn,Tn),kt.pixelStorei(kt.UNPACK_ROW_LENGTH,Nn),kt.pixelStorei(kt.UNPACK_IMAGE_HEIGHT,Dn),kt.pixelStorei(kt.UNPACK_SKIP_PIXELS,jn),kt.pixelStorei(kt.UNPACK_SKIP_ROWS,si),kt.pixelStorei(kt.UNPACK_SKIP_IMAGES,oi),lt===0&&Yt.generateMipmaps&&kt.generateMipmap(wn),Kt.unbindTexture()},this.initRenderTarget=function(Pt){nn.get(Pt).__webglFramebuffer===void 0&&gn.setupRenderTarget(Pt)},this.initTexture=function(Pt){Pt.isCubeTexture?gn.setTextureCube(Pt,0):Pt.isData3DTexture?gn.setTexture3D(Pt,0):Pt.isDataArrayTexture||Pt.isCompressedArrayTexture?gn.setTexture2DArray(Pt,0):gn.setTexture2D(Pt,0),Kt.unbindTexture()},this.resetState=function(){We=0,qe=0,Ye=null,Kt.reset(),Yn.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return WebGLCoordinateSystem}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(m){this._outputColorSpace=m;const L=this.getContext();L.drawingBufferColorSpace=m===DisplayP3ColorSpace?"display-p3":"srgb",L.unpackColorSpace=ColorManagement.workingColorSpace===LinearDisplayP3ColorSpace?"display-p3":"srgb"}}class Scene extends Object3D{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Euler,this.environmentIntensity=1,this.environmentRotation=new Euler,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(m,L){return super.copy(m,L),m.background!==null&&(this.background=m.background.clone()),m.environment!==null&&(this.environment=m.environment.clone()),m.fog!==null&&(this.fog=m.fog.clone()),this.backgroundBlurriness=m.backgroundBlurriness,this.backgroundIntensity=m.backgroundIntensity,this.backgroundRotation.copy(m.backgroundRotation),this.environmentIntensity=m.environmentIntensity,this.environmentRotation.copy(m.environmentRotation),m.overrideMaterial!==null&&(this.overrideMaterial=m.overrideMaterial.clone()),this.matrixAutoUpdate=m.matrixAutoUpdate,this}toJSON(m){const L=super.toJSON(m);return this.fog!==null&&(L.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(L.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(L.object.backgroundIntensity=this.backgroundIntensity),L.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(L.object.environmentIntensity=this.environmentIntensity),L.object.environmentRotation=this.environmentRotation.toArray(),L}}class InterleavedBuffer{constructor(m,L){this.isInterleavedBuffer=!0,this.array=m,this.stride=L,this.count=m!==void 0?m.length/L:0,this.usage=StaticDrawUsage,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=generateUUID()}onUploadCallback(){}set needsUpdate(m){m===!0&&this.version++}get updateRange(){return warnOnce("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(m){return this.usage=m,this}addUpdateRange(m,L){this.updateRanges.push({start:m,count:L})}clearUpdateRanges(){this.updateRanges.length=0}copy(m){return this.array=new m.array.constructor(m.array),this.count=m.count,this.stride=m.stride,this.usage=m.usage,this}copyAt(m,L,j){m*=this.stride,j*=L.stride;for(let ee=0,re=this.stride;ee<re;ee++)this.array[m+ee]=L.array[j+ee];return this}set(m,L=0){return this.array.set(m,L),this}clone(m){m.arrayBuffers===void 0&&(m.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=generateUUID()),m.arrayBuffers[this.array.buffer._uuid]===void 0&&(m.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const L=new this.array.constructor(m.arrayBuffers[this.array.buffer._uuid]),j=new this.constructor(L,this.stride);return j.setUsage(this.usage),j}onUpload(m){return this.onUploadCallback=m,this}toJSON(m){return m.arrayBuffers===void 0&&(m.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=generateUUID()),m.arrayBuffers[this.array.buffer._uuid]===void 0&&(m.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const _vector$6=new Vector3;class InterleavedBufferAttribute{constructor(m,L,j,ee=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=m,this.itemSize=L,this.offset=j,this.normalized=ee}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(m){this.data.needsUpdate=m}applyMatrix4(m){for(let L=0,j=this.data.count;L<j;L++)_vector$6.fromBufferAttribute(this,L),_vector$6.applyMatrix4(m),this.setXYZ(L,_vector$6.x,_vector$6.y,_vector$6.z);return this}applyNormalMatrix(m){for(let L=0,j=this.count;L<j;L++)_vector$6.fromBufferAttribute(this,L),_vector$6.applyNormalMatrix(m),this.setXYZ(L,_vector$6.x,_vector$6.y,_vector$6.z);return this}transformDirection(m){for(let L=0,j=this.count;L<j;L++)_vector$6.fromBufferAttribute(this,L),_vector$6.transformDirection(m),this.setXYZ(L,_vector$6.x,_vector$6.y,_vector$6.z);return this}getComponent(m,L){let j=this.array[m*this.data.stride+this.offset+L];return this.normalized&&(j=denormalize(j,this.array)),j}setComponent(m,L,j){return this.normalized&&(j=normalize(j,this.array)),this.data.array[m*this.data.stride+this.offset+L]=j,this}setX(m,L){return this.normalized&&(L=normalize(L,this.array)),this.data.array[m*this.data.stride+this.offset]=L,this}setY(m,L){return this.normalized&&(L=normalize(L,this.array)),this.data.array[m*this.data.stride+this.offset+1]=L,this}setZ(m,L){return this.normalized&&(L=normalize(L,this.array)),this.data.array[m*this.data.stride+this.offset+2]=L,this}setW(m,L){return this.normalized&&(L=normalize(L,this.array)),this.data.array[m*this.data.stride+this.offset+3]=L,this}getX(m){let L=this.data.array[m*this.data.stride+this.offset];return this.normalized&&(L=denormalize(L,this.array)),L}getY(m){let L=this.data.array[m*this.data.stride+this.offset+1];return this.normalized&&(L=denormalize(L,this.array)),L}getZ(m){let L=this.data.array[m*this.data.stride+this.offset+2];return this.normalized&&(L=denormalize(L,this.array)),L}getW(m){let L=this.data.array[m*this.data.stride+this.offset+3];return this.normalized&&(L=denormalize(L,this.array)),L}setXY(m,L,j){return m=m*this.data.stride+this.offset,this.normalized&&(L=normalize(L,this.array),j=normalize(j,this.array)),this.data.array[m+0]=L,this.data.array[m+1]=j,this}setXYZ(m,L,j,ee){return m=m*this.data.stride+this.offset,this.normalized&&(L=normalize(L,this.array),j=normalize(j,this.array),ee=normalize(ee,this.array)),this.data.array[m+0]=L,this.data.array[m+1]=j,this.data.array[m+2]=ee,this}setXYZW(m,L,j,ee,re){return m=m*this.data.stride+this.offset,this.normalized&&(L=normalize(L,this.array),j=normalize(j,this.array),ee=normalize(ee,this.array),re=normalize(re,this.array)),this.data.array[m+0]=L,this.data.array[m+1]=j,this.data.array[m+2]=ee,this.data.array[m+3]=re,this}clone(m){if(m===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const L=[];for(let j=0;j<this.count;j++){const ee=j*this.data.stride+this.offset;for(let re=0;re<this.itemSize;re++)L.push(this.data.array[ee+re])}return new BufferAttribute(new this.array.constructor(L),this.itemSize,this.normalized)}else return m.interleavedBuffers===void 0&&(m.interleavedBuffers={}),m.interleavedBuffers[this.data.uuid]===void 0&&(m.interleavedBuffers[this.data.uuid]=this.data.clone(m)),new InterleavedBufferAttribute(m.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(m){if(m===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const L=[];for(let j=0;j<this.count;j++){const ee=j*this.data.stride+this.offset;for(let re=0;re<this.itemSize;re++)L.push(this.data.array[ee+re])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:L,normalized:this.normalized}}else return m.interleavedBuffers===void 0&&(m.interleavedBuffers={}),m.interleavedBuffers[this.data.uuid]===void 0&&(m.interleavedBuffers[this.data.uuid]=this.data.toJSON(m)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class SpriteMaterial extends Material{constructor(m){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(m)}copy(m){return super.copy(m),this.color.copy(m.color),this.map=m.map,this.alphaMap=m.alphaMap,this.rotation=m.rotation,this.sizeAttenuation=m.sizeAttenuation,this.fog=m.fog,this}}let _geometry;const _intersectPoint=new Vector3,_worldScale=new Vector3,_mvPosition=new Vector3,_alignedPosition=new Vector2,_rotatedPosition=new Vector2,_viewWorldMatrix=new Matrix4,_vA$2=new Vector3,_vB$2=new Vector3,_vC$2=new Vector3,_uvA=new Vector2,_uvB=new Vector2,_uvC=new Vector2;class Sprite extends Object3D{constructor(m=new SpriteMaterial){if(super(),this.isSprite=!0,this.type="Sprite",_geometry===void 0){_geometry=new BufferGeometry;const L=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),j=new InterleavedBuffer(L,5);_geometry.setIndex([0,1,2,0,2,3]),_geometry.setAttribute("position",new InterleavedBufferAttribute(j,3,0,!1)),_geometry.setAttribute("uv",new InterleavedBufferAttribute(j,2,3,!1))}this.geometry=_geometry,this.material=m,this.center=new Vector2(.5,.5)}raycast(m,L){m.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),_worldScale.setFromMatrixScale(this.matrixWorld),_viewWorldMatrix.copy(m.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(m.camera.matrixWorldInverse,this.matrixWorld),_mvPosition.setFromMatrixPosition(this.modelViewMatrix),m.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&_worldScale.multiplyScalar(-_mvPosition.z);const j=this.material.rotation;let ee,re;j!==0&&(re=Math.cos(j),ee=Math.sin(j));const le=this.center;transformVertex(_vA$2.set(-.5,-.5,0),_mvPosition,le,_worldScale,ee,re),transformVertex(_vB$2.set(.5,-.5,0),_mvPosition,le,_worldScale,ee,re),transformVertex(_vC$2.set(.5,.5,0),_mvPosition,le,_worldScale,ee,re),_uvA.set(0,0),_uvB.set(1,0),_uvC.set(1,1);let ve=m.ray.intersectTriangle(_vA$2,_vB$2,_vC$2,!1,_intersectPoint);if(ve===null&&(transformVertex(_vB$2.set(-.5,.5,0),_mvPosition,le,_worldScale,ee,re),_uvB.set(0,1),ve=m.ray.intersectTriangle(_vA$2,_vC$2,_vB$2,!1,_intersectPoint),ve===null))return;const ye=m.ray.origin.distanceTo(_intersectPoint);ye<m.near||ye>m.far||L.push({distance:ye,point:_intersectPoint.clone(),uv:Triangle$1.getInterpolation(_intersectPoint,_vA$2,_vB$2,_vC$2,_uvA,_uvB,_uvC,new Vector2),face:null,object:this})}copy(m,L){return super.copy(m,L),m.center!==void 0&&this.center.copy(m.center),this.material=m.material,this}}function transformVertex($,m,L,j,ee,re){_alignedPosition.subVectors($,L).addScalar(.5).multiply(j),ee!==void 0?(_rotatedPosition.x=re*_alignedPosition.x-ee*_alignedPosition.y,_rotatedPosition.y=ee*_alignedPosition.x+re*_alignedPosition.y):_rotatedPosition.copy(_alignedPosition),$.copy(m),$.x+=_rotatedPosition.x,$.y+=_rotatedPosition.y,$.applyMatrix4(_viewWorldMatrix)}const _basePosition=new Vector3,_skinIndex=new Vector4,_skinWeight=new Vector4,_vector3=new Vector3,_matrix4=new Matrix4,_vertex=new Vector3,_sphere$4=new Sphere,_inverseMatrix$2=new Matrix4,_ray$2=new Ray;class SkinnedMesh extends Mesh{constructor(m,L){super(m,L),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=AttachedBindMode,this.bindMatrix=new Matrix4,this.bindMatrixInverse=new Matrix4,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const m=this.geometry;this.boundingBox===null&&(this.boundingBox=new Box3),this.boundingBox.makeEmpty();const L=m.getAttribute("position");for(let j=0;j<L.count;j++)this.getVertexPosition(j,_vertex),this.boundingBox.expandByPoint(_vertex)}computeBoundingSphere(){const m=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Sphere),this.boundingSphere.makeEmpty();const L=m.getAttribute("position");for(let j=0;j<L.count;j++)this.getVertexPosition(j,_vertex),this.boundingSphere.expandByPoint(_vertex)}copy(m,L){return super.copy(m,L),this.bindMode=m.bindMode,this.bindMatrix.copy(m.bindMatrix),this.bindMatrixInverse.copy(m.bindMatrixInverse),this.skeleton=m.skeleton,m.boundingBox!==null&&(this.boundingBox=m.boundingBox.clone()),m.boundingSphere!==null&&(this.boundingSphere=m.boundingSphere.clone()),this}raycast(m,L){const j=this.material,ee=this.matrixWorld;j!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),_sphere$4.copy(this.boundingSphere),_sphere$4.applyMatrix4(ee),m.ray.intersectsSphere(_sphere$4)!==!1&&(_inverseMatrix$2.copy(ee).invert(),_ray$2.copy(m.ray).applyMatrix4(_inverseMatrix$2),!(this.boundingBox!==null&&_ray$2.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(m,L,_ray$2)))}getVertexPosition(m,L){return super.getVertexPosition(m,L),this.applyBoneTransform(m,L),L}bind(m,L){this.skeleton=m,L===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),L=this.matrixWorld),this.bindMatrix.copy(L),this.bindMatrixInverse.copy(L).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const m=new Vector4,L=this.geometry.attributes.skinWeight;for(let j=0,ee=L.count;j<ee;j++){m.fromBufferAttribute(L,j);const re=1/m.manhattanLength();re!==1/0?m.multiplyScalar(re):m.set(1,0,0,0),L.setXYZW(j,m.x,m.y,m.z,m.w)}}updateMatrixWorld(m){super.updateMatrixWorld(m),this.bindMode===AttachedBindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===DetachedBindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(m,L){const j=this.skeleton,ee=this.geometry;_skinIndex.fromBufferAttribute(ee.attributes.skinIndex,m),_skinWeight.fromBufferAttribute(ee.attributes.skinWeight,m),_basePosition.copy(L).applyMatrix4(this.bindMatrix),L.set(0,0,0);for(let re=0;re<4;re++){const le=_skinWeight.getComponent(re);if(le!==0){const ve=_skinIndex.getComponent(re);_matrix4.multiplyMatrices(j.bones[ve].matrixWorld,j.boneInverses[ve]),L.addScaledVector(_vector3.copy(_basePosition).applyMatrix4(_matrix4),le)}}return L.applyMatrix4(this.bindMatrixInverse)}}class Bone extends Object3D{constructor(){super(),this.isBone=!0,this.type="Bone"}}class DataTexture extends Texture{constructor(m=null,L=1,j=1,ee,re,le,ve,ye,Ee=NearestFilter,Me=NearestFilter,Ce,De){super(null,le,ve,ye,Ee,Me,ee,re,Ce,De),this.isDataTexture=!0,this.image={data:m,width:L,height:j},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const _offsetMatrix=new Matrix4,_identityMatrix$1=new Matrix4;class Skeleton{constructor(m=[],L=[]){this.uuid=generateUUID(),this.bones=m.slice(0),this.boneInverses=L,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const m=this.bones,L=this.boneInverses;if(this.boneMatrices=new Float32Array(m.length*16),L.length===0)this.calculateInverses();else if(m.length!==L.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let j=0,ee=this.bones.length;j<ee;j++)this.boneInverses.push(new Matrix4)}}calculateInverses(){this.boneInverses.length=0;for(let m=0,L=this.bones.length;m<L;m++){const j=new Matrix4;this.bones[m]&&j.copy(this.bones[m].matrixWorld).invert(),this.boneInverses.push(j)}}pose(){for(let m=0,L=this.bones.length;m<L;m++){const j=this.bones[m];j&&j.matrixWorld.copy(this.boneInverses[m]).invert()}for(let m=0,L=this.bones.length;m<L;m++){const j=this.bones[m];j&&(j.parent&&j.parent.isBone?(j.matrix.copy(j.parent.matrixWorld).invert(),j.matrix.multiply(j.matrixWorld)):j.matrix.copy(j.matrixWorld),j.matrix.decompose(j.position,j.quaternion,j.scale))}}update(){const m=this.bones,L=this.boneInverses,j=this.boneMatrices,ee=this.boneTexture;for(let re=0,le=m.length;re<le;re++){const ve=m[re]?m[re].matrixWorld:_identityMatrix$1;_offsetMatrix.multiplyMatrices(ve,L[re]),_offsetMatrix.toArray(j,re*16)}ee!==null&&(ee.needsUpdate=!0)}clone(){return new Skeleton(this.bones,this.boneInverses)}computeBoneTexture(){let m=Math.sqrt(this.bones.length*4);m=Math.ceil(m/4)*4,m=Math.max(m,4);const L=new Float32Array(m*m*4);L.set(this.boneMatrices);const j=new DataTexture(L,m,m,RGBAFormat,FloatType);return j.needsUpdate=!0,this.boneMatrices=L,this.boneTexture=j,this}getBoneByName(m){for(let L=0,j=this.bones.length;L<j;L++){const ee=this.bones[L];if(ee.name===m)return ee}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(m,L){this.uuid=m.uuid;for(let j=0,ee=m.bones.length;j<ee;j++){const re=m.bones[j];let le=L[re];le===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",re),le=new Bone),this.bones.push(le),this.boneInverses.push(new Matrix4().fromArray(m.boneInverses[j]))}return this.init(),this}toJSON(){const m={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};m.uuid=this.uuid;const L=this.bones,j=this.boneInverses;for(let ee=0,re=L.length;ee<re;ee++){const le=L[ee];m.bones.push(le.uuid);const ve=j[ee];m.boneInverses.push(ve.toArray())}return m}}class InstancedBufferAttribute extends BufferAttribute{constructor(m,L,j,ee=1){super(m,L,j),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=ee}copy(m){return super.copy(m),this.meshPerAttribute=m.meshPerAttribute,this}toJSON(){const m=super.toJSON();return m.meshPerAttribute=this.meshPerAttribute,m.isInstancedBufferAttribute=!0,m}}const _instanceLocalMatrix=new Matrix4,_instanceWorldMatrix=new Matrix4,_instanceIntersects=[],_box3=new Box3,_identity=new Matrix4,_mesh$1=new Mesh,_sphere$3=new Sphere;class InstancedMesh extends Mesh{constructor(m,L,j){super(m,L),this.isInstancedMesh=!0,this.instanceMatrix=new InstancedBufferAttribute(new Float32Array(j*16),16),this.instanceColor=null,this.morphTexture=null,this.count=j,this.boundingBox=null,this.boundingSphere=null;for(let ee=0;ee<j;ee++)this.setMatrixAt(ee,_identity)}computeBoundingBox(){const m=this.geometry,L=this.count;this.boundingBox===null&&(this.boundingBox=new Box3),m.boundingBox===null&&m.computeBoundingBox(),this.boundingBox.makeEmpty();for(let j=0;j<L;j++)this.getMatrixAt(j,_instanceLocalMatrix),_box3.copy(m.boundingBox).applyMatrix4(_instanceLocalMatrix),this.boundingBox.union(_box3)}computeBoundingSphere(){const m=this.geometry,L=this.count;this.boundingSphere===null&&(this.boundingSphere=new Sphere),m.boundingSphere===null&&m.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let j=0;j<L;j++)this.getMatrixAt(j,_instanceLocalMatrix),_sphere$3.copy(m.boundingSphere).applyMatrix4(_instanceLocalMatrix),this.boundingSphere.union(_sphere$3)}copy(m,L){return super.copy(m,L),this.instanceMatrix.copy(m.instanceMatrix),m.morphTexture!==null&&(this.morphTexture=m.morphTexture.clone()),m.instanceColor!==null&&(this.instanceColor=m.instanceColor.clone()),this.count=m.count,m.boundingBox!==null&&(this.boundingBox=m.boundingBox.clone()),m.boundingSphere!==null&&(this.boundingSphere=m.boundingSphere.clone()),this}getColorAt(m,L){L.fromArray(this.instanceColor.array,m*3)}getMatrixAt(m,L){L.fromArray(this.instanceMatrix.array,m*16)}getMorphAt(m,L){const j=L.morphTargetInfluences,ee=this.morphTexture.source.data.data,re=j.length+1,le=m*re+1;for(let ve=0;ve<j.length;ve++)j[ve]=ee[le+ve]}raycast(m,L){const j=this.matrixWorld,ee=this.count;if(_mesh$1.geometry=this.geometry,_mesh$1.material=this.material,_mesh$1.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),_sphere$3.copy(this.boundingSphere),_sphere$3.applyMatrix4(j),m.ray.intersectsSphere(_sphere$3)!==!1))for(let re=0;re<ee;re++){this.getMatrixAt(re,_instanceLocalMatrix),_instanceWorldMatrix.multiplyMatrices(j,_instanceLocalMatrix),_mesh$1.matrixWorld=_instanceWorldMatrix,_mesh$1.raycast(m,_instanceIntersects);for(let le=0,ve=_instanceIntersects.length;le<ve;le++){const ye=_instanceIntersects[le];ye.instanceId=re,ye.object=this,L.push(ye)}_instanceIntersects.length=0}}setColorAt(m,L){this.instanceColor===null&&(this.instanceColor=new InstancedBufferAttribute(new Float32Array(this.instanceMatrix.count*3),3)),L.toArray(this.instanceColor.array,m*3)}setMatrixAt(m,L){L.toArray(this.instanceMatrix.array,m*16)}setMorphAt(m,L){const j=L.morphTargetInfluences,ee=j.length+1;this.morphTexture===null&&(this.morphTexture=new DataTexture(new Float32Array(ee*this.count),ee,this.count,RedFormat,FloatType));const re=this.morphTexture.source.data.data;let le=0;for(let Ee=0;Ee<j.length;Ee++)le+=j[Ee];const ve=this.geometry.morphTargetsRelative?1:1-le,ye=ee*m;re[ye]=ve,re.set(j,ye+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}class LineBasicMaterial extends Material{constructor(m){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Color(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(m)}copy(m){return super.copy(m),this.color.copy(m.color),this.map=m.map,this.linewidth=m.linewidth,this.linecap=m.linecap,this.linejoin=m.linejoin,this.fog=m.fog,this}}const _vStart=new Vector3,_vEnd=new Vector3,_inverseMatrix$1=new Matrix4,_ray$1=new Ray,_sphere$1=new Sphere,_intersectPointOnRay=new Vector3,_intersectPointOnSegment=new Vector3;class Line extends Object3D{constructor(m=new BufferGeometry,L=new LineBasicMaterial){super(),this.isLine=!0,this.type="Line",this.geometry=m,this.material=L,this.updateMorphTargets()}copy(m,L){return super.copy(m,L),this.material=Array.isArray(m.material)?m.material.slice():m.material,this.geometry=m.geometry,this}computeLineDistances(){const m=this.geometry;if(m.index===null){const L=m.attributes.position,j=[0];for(let ee=1,re=L.count;ee<re;ee++)_vStart.fromBufferAttribute(L,ee-1),_vEnd.fromBufferAttribute(L,ee),j[ee]=j[ee-1],j[ee]+=_vStart.distanceTo(_vEnd);m.setAttribute("lineDistance",new Float32BufferAttribute(j,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(m,L){const j=this.geometry,ee=this.matrixWorld,re=m.params.Line.threshold,le=j.drawRange;if(j.boundingSphere===null&&j.computeBoundingSphere(),_sphere$1.copy(j.boundingSphere),_sphere$1.applyMatrix4(ee),_sphere$1.radius+=re,m.ray.intersectsSphere(_sphere$1)===!1)return;_inverseMatrix$1.copy(ee).invert(),_ray$1.copy(m.ray).applyMatrix4(_inverseMatrix$1);const ve=re/((this.scale.x+this.scale.y+this.scale.z)/3),ye=ve*ve,Ee=this.isLineSegments?2:1,Me=j.index,De=j.attributes.position;if(Me!==null){const Be=Math.max(0,le.start),ke=Math.min(Me.count,le.start+le.count);for(let Fe=Be,Oe=ke-1;Fe<Oe;Fe+=Ee){const Ne=Me.getX(Fe),ze=Me.getX(Fe+1),$e=checkIntersection(this,m,_ray$1,ye,Ne,ze);$e&&L.push($e)}if(this.isLineLoop){const Fe=Me.getX(ke-1),Oe=Me.getX(Be),Ne=checkIntersection(this,m,_ray$1,ye,Fe,Oe);Ne&&L.push(Ne)}}else{const Be=Math.max(0,le.start),ke=Math.min(De.count,le.start+le.count);for(let Fe=Be,Oe=ke-1;Fe<Oe;Fe+=Ee){const Ne=checkIntersection(this,m,_ray$1,ye,Fe,Fe+1);Ne&&L.push(Ne)}if(this.isLineLoop){const Fe=checkIntersection(this,m,_ray$1,ye,ke-1,Be);Fe&&L.push(Fe)}}}updateMorphTargets(){const L=this.geometry.morphAttributes,j=Object.keys(L);if(j.length>0){const ee=L[j[0]];if(ee!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let re=0,le=ee.length;re<le;re++){const ve=ee[re].name||String(re);this.morphTargetInfluences.push(0),this.morphTargetDictionary[ve]=re}}}}}function checkIntersection($,m,L,j,ee,re){const le=$.geometry.attributes.position;if(_vStart.fromBufferAttribute(le,ee),_vEnd.fromBufferAttribute(le,re),L.distanceSqToSegment(_vStart,_vEnd,_intersectPointOnRay,_intersectPointOnSegment)>j)return;_intersectPointOnRay.applyMatrix4($.matrixWorld);const ye=m.ray.origin.distanceTo(_intersectPointOnRay);if(!(ye<m.near||ye>m.far))return{distance:ye,point:_intersectPointOnSegment.clone().applyMatrix4($.matrixWorld),index:ee,face:null,faceIndex:null,object:$}}const _start=new Vector3,_end=new Vector3;class LineSegments extends Line{constructor(m,L){super(m,L),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const m=this.geometry;if(m.index===null){const L=m.attributes.position,j=[];for(let ee=0,re=L.count;ee<re;ee+=2)_start.fromBufferAttribute(L,ee),_end.fromBufferAttribute(L,ee+1),j[ee]=ee===0?0:j[ee-1],j[ee+1]=j[ee]+_start.distanceTo(_end);m.setAttribute("lineDistance",new Float32BufferAttribute(j,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class LineLoop extends Line{constructor(m,L){super(m,L),this.isLineLoop=!0,this.type="LineLoop"}}class PointsMaterial extends Material{constructor(m){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(m)}copy(m){return super.copy(m),this.color.copy(m.color),this.map=m.map,this.alphaMap=m.alphaMap,this.size=m.size,this.sizeAttenuation=m.sizeAttenuation,this.fog=m.fog,this}}const _inverseMatrix=new Matrix4,_ray=new Ray,_sphere=new Sphere,_position$2=new Vector3;class Points extends Object3D{constructor(m=new BufferGeometry,L=new PointsMaterial){super(),this.isPoints=!0,this.type="Points",this.geometry=m,this.material=L,this.updateMorphTargets()}copy(m,L){return super.copy(m,L),this.material=Array.isArray(m.material)?m.material.slice():m.material,this.geometry=m.geometry,this}raycast(m,L){const j=this.geometry,ee=this.matrixWorld,re=m.params.Points.threshold,le=j.drawRange;if(j.boundingSphere===null&&j.computeBoundingSphere(),_sphere.copy(j.boundingSphere),_sphere.applyMatrix4(ee),_sphere.radius+=re,m.ray.intersectsSphere(_sphere)===!1)return;_inverseMatrix.copy(ee).invert(),_ray.copy(m.ray).applyMatrix4(_inverseMatrix);const ve=re/((this.scale.x+this.scale.y+this.scale.z)/3),ye=ve*ve,Ee=j.index,Ce=j.attributes.position;if(Ee!==null){const De=Math.max(0,le.start),Be=Math.min(Ee.count,le.start+le.count);for(let ke=De,Fe=Be;ke<Fe;ke++){const Oe=Ee.getX(ke);_position$2.fromBufferAttribute(Ce,Oe),testPoint(_position$2,Oe,ye,ee,m,L,this)}}else{const De=Math.max(0,le.start),Be=Math.min(Ce.count,le.start+le.count);for(let ke=De,Fe=Be;ke<Fe;ke++)_position$2.fromBufferAttribute(Ce,ke),testPoint(_position$2,ke,ye,ee,m,L,this)}}updateMorphTargets(){const L=this.geometry.morphAttributes,j=Object.keys(L);if(j.length>0){const ee=L[j[0]];if(ee!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let re=0,le=ee.length;re<le;re++){const ve=ee[re].name||String(re);this.morphTargetInfluences.push(0),this.morphTargetDictionary[ve]=re}}}}}function testPoint($,m,L,j,ee,re,le){const ve=_ray.distanceSqToPoint($);if(ve<L){const ye=new Vector3;_ray.closestPointToPoint($,ye),ye.applyMatrix4(j);const Ee=ee.ray.origin.distanceTo(ye);if(Ee<ee.near||Ee>ee.far)return;re.push({distance:Ee,distanceToRay:Math.sqrt(ve),point:ye,index:m,face:null,object:le})}}class CompressedTexture extends Texture{constructor(m,L,j,ee,re,le,ve,ye,Ee,Me,Ce,De){super(null,le,ve,ye,Ee,Me,ee,re,Ce,De),this.isCompressedTexture=!0,this.image={width:L,height:j},this.mipmaps=m,this.flipY=!1,this.generateMipmaps=!1}}class CompressedArrayTexture extends CompressedTexture{constructor(m,L,j,ee,re,le){super(m,L,j,re,le),this.isCompressedArrayTexture=!0,this.image.depth=ee,this.wrapR=ClampToEdgeWrapping,this.layerUpdates=new Set}addLayerUpdates(m){this.layerUpdates.add(m)}clearLayerUpdates(){this.layerUpdates.clear()}}class CompressedCubeTexture extends CompressedTexture{constructor(m,L,j){super(void 0,m[0].width,m[0].height,L,j,CubeReflectionMapping),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=m}}class CylinderGeometry extends BufferGeometry{constructor(m=1,L=1,j=1,ee=32,re=1,le=!1,ve=0,ye=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:m,radiusBottom:L,height:j,radialSegments:ee,heightSegments:re,openEnded:le,thetaStart:ve,thetaLength:ye};const Ee=this;ee=Math.floor(ee),re=Math.floor(re);const Me=[],Ce=[],De=[],Be=[];let ke=0;const Fe=[],Oe=j/2;let Ne=0;ze(),le===!1&&(m>0&&$e(!0),L>0&&$e(!1)),this.setIndex(Me),this.setAttribute("position",new Float32BufferAttribute(Ce,3)),this.setAttribute("normal",new Float32BufferAttribute(De,3)),this.setAttribute("uv",new Float32BufferAttribute(Be,2));function ze(){const He=new Vector3,We=new Vector3;let qe=0;const Ye=(L-m)/j;for(let Ze=0;Ze<=re;Ze++){const Ke=[],rt=Ze/re,ft=rt*(L-m)+m;for(let mt=0;mt<=ee;mt++){const Et=mt/ee,bt=Et*ye+ve,Ct=Math.sin(bt),st=Math.cos(bt);We.x=ft*Ct,We.y=-rt*j+Oe,We.z=ft*st,Ce.push(We.x,We.y,We.z),He.set(Ct,Ye,st).normalize(),De.push(He.x,He.y,He.z),Be.push(Et,1-rt),Ke.push(ke++)}Fe.push(Ke)}for(let Ze=0;Ze<ee;Ze++)for(let Ke=0;Ke<re;Ke++){const rt=Fe[Ke][Ze],ft=Fe[Ke+1][Ze],mt=Fe[Ke+1][Ze+1],Et=Fe[Ke][Ze+1];Me.push(rt,ft,Et),Me.push(ft,mt,Et),qe+=6}Ee.addGroup(Ne,qe,0),Ne+=qe}function $e(He){const We=ke,qe=new Vector2,Ye=new Vector3;let Ze=0;const Ke=He===!0?m:L,rt=He===!0?1:-1;for(let mt=1;mt<=ee;mt++)Ce.push(0,Oe*rt,0),De.push(0,rt,0),Be.push(.5,.5),ke++;const ft=ke;for(let mt=0;mt<=ee;mt++){const bt=mt/ee*ye+ve,Ct=Math.cos(bt),st=Math.sin(bt);Ye.x=Ke*st,Ye.y=Oe*rt,Ye.z=Ke*Ct,Ce.push(Ye.x,Ye.y,Ye.z),De.push(0,rt,0),qe.x=Ct*.5+.5,qe.y=st*.5*rt+.5,Be.push(qe.x,qe.y),ke++}for(let mt=0;mt<ee;mt++){const Et=We+mt,bt=ft+mt;He===!0?Me.push(bt,bt+1,Et):Me.push(bt+1,bt,Et),Ze+=3}Ee.addGroup(Ne,Ze,He===!0?1:2),Ne+=Ze}}copy(m){return super.copy(m),this.parameters=Object.assign({},m.parameters),this}static fromJSON(m){return new CylinderGeometry(m.radiusTop,m.radiusBottom,m.height,m.radialSegments,m.heightSegments,m.openEnded,m.thetaStart,m.thetaLength)}}class PolyhedronGeometry extends BufferGeometry{constructor(m=[],L=[],j=1,ee=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:m,indices:L,radius:j,detail:ee};const re=[],le=[];ve(ee),Ee(j),Me(),this.setAttribute("position",new Float32BufferAttribute(re,3)),this.setAttribute("normal",new Float32BufferAttribute(re.slice(),3)),this.setAttribute("uv",new Float32BufferAttribute(le,2)),ee===0?this.computeVertexNormals():this.normalizeNormals();function ve(ze){const $e=new Vector3,He=new Vector3,We=new Vector3;for(let qe=0;qe<L.length;qe+=3)Be(L[qe+0],$e),Be(L[qe+1],He),Be(L[qe+2],We),ye($e,He,We,ze)}function ye(ze,$e,He,We){const qe=We+1,Ye=[];for(let Ze=0;Ze<=qe;Ze++){Ye[Ze]=[];const Ke=ze.clone().lerp(He,Ze/qe),rt=$e.clone().lerp(He,Ze/qe),ft=qe-Ze;for(let mt=0;mt<=ft;mt++)mt===0&&Ze===qe?Ye[Ze][mt]=Ke:Ye[Ze][mt]=Ke.clone().lerp(rt,mt/ft)}for(let Ze=0;Ze<qe;Ze++)for(let Ke=0;Ke<2*(qe-Ze)-1;Ke++){const rt=Math.floor(Ke/2);Ke%2===0?(De(Ye[Ze][rt+1]),De(Ye[Ze+1][rt]),De(Ye[Ze][rt])):(De(Ye[Ze][rt+1]),De(Ye[Ze+1][rt+1]),De(Ye[Ze+1][rt]))}}function Ee(ze){const $e=new Vector3;for(let He=0;He<re.length;He+=3)$e.x=re[He+0],$e.y=re[He+1],$e.z=re[He+2],$e.normalize().multiplyScalar(ze),re[He+0]=$e.x,re[He+1]=$e.y,re[He+2]=$e.z}function Me(){const ze=new Vector3;for(let $e=0;$e<re.length;$e+=3){ze.x=re[$e+0],ze.y=re[$e+1],ze.z=re[$e+2];const He=Oe(ze)/2/Math.PI+.5,We=Ne(ze)/Math.PI+.5;le.push(He,1-We)}ke(),Ce()}function Ce(){for(let ze=0;ze<le.length;ze+=6){const $e=le[ze+0],He=le[ze+2],We=le[ze+4],qe=Math.max($e,He,We),Ye=Math.min($e,He,We);qe>.9&&Ye<.1&&($e<.2&&(le[ze+0]+=1),He<.2&&(le[ze+2]+=1),We<.2&&(le[ze+4]+=1))}}function De(ze){re.push(ze.x,ze.y,ze.z)}function Be(ze,$e){const He=ze*3;$e.x=m[He+0],$e.y=m[He+1],$e.z=m[He+2]}function ke(){const ze=new Vector3,$e=new Vector3,He=new Vector3,We=new Vector3,qe=new Vector2,Ye=new Vector2,Ze=new Vector2;for(let Ke=0,rt=0;Ke<re.length;Ke+=9,rt+=6){ze.set(re[Ke+0],re[Ke+1],re[Ke+2]),$e.set(re[Ke+3],re[Ke+4],re[Ke+5]),He.set(re[Ke+6],re[Ke+7],re[Ke+8]),qe.set(le[rt+0],le[rt+1]),Ye.set(le[rt+2],le[rt+3]),Ze.set(le[rt+4],le[rt+5]),We.copy(ze).add($e).add(He).divideScalar(3);const ft=Oe(We);Fe(qe,rt+0,ze,ft),Fe(Ye,rt+2,$e,ft),Fe(Ze,rt+4,He,ft)}}function Fe(ze,$e,He,We){We<0&&ze.x===1&&(le[$e]=ze.x-1),He.x===0&&He.z===0&&(le[$e]=We/2/Math.PI+.5)}function Oe(ze){return Math.atan2(ze.z,-ze.x)}function Ne(ze){return Math.atan2(-ze.y,Math.sqrt(ze.x*ze.x+ze.z*ze.z))}}copy(m){return super.copy(m),this.parameters=Object.assign({},m.parameters),this}static fromJSON(m){return new PolyhedronGeometry(m.vertices,m.indices,m.radius,m.details)}}class IcosahedronGeometry extends PolyhedronGeometry{constructor(m=1,L=0){const j=(1+Math.sqrt(5))/2,ee=[-1,j,0,1,j,0,-1,-j,0,1,-j,0,0,-1,j,0,1,j,0,-1,-j,0,1,-j,j,0,-1,j,0,1,-j,0,-1,-j,0,1],re=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(ee,re,m,L),this.type="IcosahedronGeometry",this.parameters={radius:m,detail:L}}static fromJSON(m){return new IcosahedronGeometry(m.radius,m.detail)}}class TorusGeometry extends BufferGeometry{constructor(m=1,L=.4,j=12,ee=48,re=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:m,tube:L,radialSegments:j,tubularSegments:ee,arc:re},j=Math.floor(j),ee=Math.floor(ee);const le=[],ve=[],ye=[],Ee=[],Me=new Vector3,Ce=new Vector3,De=new Vector3;for(let Be=0;Be<=j;Be++)for(let ke=0;ke<=ee;ke++){const Fe=ke/ee*re,Oe=Be/j*Math.PI*2;Ce.x=(m+L*Math.cos(Oe))*Math.cos(Fe),Ce.y=(m+L*Math.cos(Oe))*Math.sin(Fe),Ce.z=L*Math.sin(Oe),ve.push(Ce.x,Ce.y,Ce.z),Me.x=m*Math.cos(Fe),Me.y=m*Math.sin(Fe),De.subVectors(Ce,Me).normalize(),ye.push(De.x,De.y,De.z),Ee.push(ke/ee),Ee.push(Be/j)}for(let Be=1;Be<=j;Be++)for(let ke=1;ke<=ee;ke++){const Fe=(ee+1)*Be+ke-1,Oe=(ee+1)*(Be-1)+ke-1,Ne=(ee+1)*(Be-1)+ke,ze=(ee+1)*Be+ke;le.push(Fe,Oe,ze),le.push(Oe,Ne,ze)}this.setIndex(le),this.setAttribute("position",new Float32BufferAttribute(ve,3)),this.setAttribute("normal",new Float32BufferAttribute(ye,3)),this.setAttribute("uv",new Float32BufferAttribute(Ee,2))}copy(m){return super.copy(m),this.parameters=Object.assign({},m.parameters),this}static fromJSON(m){return new TorusGeometry(m.radius,m.tube,m.radialSegments,m.tubularSegments,m.arc)}}class RawShaderMaterial extends ShaderMaterial{constructor(m){super(m),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class MeshStandardMaterial extends Material{constructor(m){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Color(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Euler,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(m)}copy(m){return super.copy(m),this.defines={STANDARD:""},this.color.copy(m.color),this.roughness=m.roughness,this.metalness=m.metalness,this.map=m.map,this.lightMap=m.lightMap,this.lightMapIntensity=m.lightMapIntensity,this.aoMap=m.aoMap,this.aoMapIntensity=m.aoMapIntensity,this.emissive.copy(m.emissive),this.emissiveMap=m.emissiveMap,this.emissiveIntensity=m.emissiveIntensity,this.bumpMap=m.bumpMap,this.bumpScale=m.bumpScale,this.normalMap=m.normalMap,this.normalMapType=m.normalMapType,this.normalScale.copy(m.normalScale),this.displacementMap=m.displacementMap,this.displacementScale=m.displacementScale,this.displacementBias=m.displacementBias,this.roughnessMap=m.roughnessMap,this.metalnessMap=m.metalnessMap,this.alphaMap=m.alphaMap,this.envMap=m.envMap,this.envMapRotation.copy(m.envMapRotation),this.envMapIntensity=m.envMapIntensity,this.wireframe=m.wireframe,this.wireframeLinewidth=m.wireframeLinewidth,this.wireframeLinecap=m.wireframeLinecap,this.wireframeLinejoin=m.wireframeLinejoin,this.flatShading=m.flatShading,this.fog=m.fog,this}}class MeshPhysicalMaterial extends MeshStandardMaterial{constructor(m){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Vector2(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return clamp$1(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(L){this.ior=(1+.4*L)/(1-.4*L)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Color(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Color(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Color(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(m)}get anisotropy(){return this._anisotropy}set anisotropy(m){this._anisotropy>0!=m>0&&this.version++,this._anisotropy=m}get clearcoat(){return this._clearcoat}set clearcoat(m){this._clearcoat>0!=m>0&&this.version++,this._clearcoat=m}get iridescence(){return this._iridescence}set iridescence(m){this._iridescence>0!=m>0&&this.version++,this._iridescence=m}get dispersion(){return this._dispersion}set dispersion(m){this._dispersion>0!=m>0&&this.version++,this._dispersion=m}get sheen(){return this._sheen}set sheen(m){this._sheen>0!=m>0&&this.version++,this._sheen=m}get transmission(){return this._transmission}set transmission(m){this._transmission>0!=m>0&&this.version++,this._transmission=m}copy(m){return super.copy(m),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=m.anisotropy,this.anisotropyRotation=m.anisotropyRotation,this.anisotropyMap=m.anisotropyMap,this.clearcoat=m.clearcoat,this.clearcoatMap=m.clearcoatMap,this.clearcoatRoughness=m.clearcoatRoughness,this.clearcoatRoughnessMap=m.clearcoatRoughnessMap,this.clearcoatNormalMap=m.clearcoatNormalMap,this.clearcoatNormalScale.copy(m.clearcoatNormalScale),this.dispersion=m.dispersion,this.ior=m.ior,this.iridescence=m.iridescence,this.iridescenceMap=m.iridescenceMap,this.iridescenceIOR=m.iridescenceIOR,this.iridescenceThicknessRange=[...m.iridescenceThicknessRange],this.iridescenceThicknessMap=m.iridescenceThicknessMap,this.sheen=m.sheen,this.sheenColor.copy(m.sheenColor),this.sheenColorMap=m.sheenColorMap,this.sheenRoughness=m.sheenRoughness,this.sheenRoughnessMap=m.sheenRoughnessMap,this.transmission=m.transmission,this.transmissionMap=m.transmissionMap,this.thickness=m.thickness,this.thicknessMap=m.thicknessMap,this.attenuationDistance=m.attenuationDistance,this.attenuationColor.copy(m.attenuationColor),this.specularIntensity=m.specularIntensity,this.specularIntensityMap=m.specularIntensityMap,this.specularColor.copy(m.specularColor),this.specularColorMap=m.specularColorMap,this}}class MeshPhongMaterial extends Material{constructor(m){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Color(16777215),this.specular=new Color(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Euler,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(m)}copy(m){return super.copy(m),this.color.copy(m.color),this.specular.copy(m.specular),this.shininess=m.shininess,this.map=m.map,this.lightMap=m.lightMap,this.lightMapIntensity=m.lightMapIntensity,this.aoMap=m.aoMap,this.aoMapIntensity=m.aoMapIntensity,this.emissive.copy(m.emissive),this.emissiveMap=m.emissiveMap,this.emissiveIntensity=m.emissiveIntensity,this.bumpMap=m.bumpMap,this.bumpScale=m.bumpScale,this.normalMap=m.normalMap,this.normalMapType=m.normalMapType,this.normalScale.copy(m.normalScale),this.displacementMap=m.displacementMap,this.displacementScale=m.displacementScale,this.displacementBias=m.displacementBias,this.specularMap=m.specularMap,this.alphaMap=m.alphaMap,this.envMap=m.envMap,this.envMapRotation.copy(m.envMapRotation),this.combine=m.combine,this.reflectivity=m.reflectivity,this.refractionRatio=m.refractionRatio,this.wireframe=m.wireframe,this.wireframeLinewidth=m.wireframeLinewidth,this.wireframeLinecap=m.wireframeLinecap,this.wireframeLinejoin=m.wireframeLinejoin,this.flatShading=m.flatShading,this.fog=m.fog,this}}function convertArray($,m,L){return!$||!L&&$.constructor===m?$:typeof m.BYTES_PER_ELEMENT=="number"?new m($):Array.prototype.slice.call($)}function isTypedArray$3($){return ArrayBuffer.isView($)&&!($ instanceof DataView)}function getKeyframeOrder($){function m(ee,re){return $[ee]-$[re]}const L=$.length,j=new Array(L);for(let ee=0;ee!==L;++ee)j[ee]=ee;return j.sort(m),j}function sortedArray($,m,L){const j=$.length,ee=new $.constructor(j);for(let re=0,le=0;le!==j;++re){const ve=L[re]*m;for(let ye=0;ye!==m;++ye)ee[le++]=$[ve+ye]}return ee}function flattenJSON($,m,L,j){let ee=1,re=$[0];for(;re!==void 0&&re[j]===void 0;)re=$[ee++];if(re===void 0)return;let le=re[j];if(le!==void 0)if(Array.isArray(le))do le=re[j],le!==void 0&&(m.push(re.time),L.push.apply(L,le)),re=$[ee++];while(re!==void 0);else if(le.toArray!==void 0)do le=re[j],le!==void 0&&(m.push(re.time),le.toArray(L,L.length)),re=$[ee++];while(re!==void 0);else do le=re[j],le!==void 0&&(m.push(re.time),L.push(le)),re=$[ee++];while(re!==void 0)}class Interpolant{constructor(m,L,j,ee){this.parameterPositions=m,this._cachedIndex=0,this.resultBuffer=ee!==void 0?ee:new L.constructor(j),this.sampleValues=L,this.valueSize=j,this.settings=null,this.DefaultSettings_={}}evaluate(m){const L=this.parameterPositions;let j=this._cachedIndex,ee=L[j],re=L[j-1];e:{t:{let le;n:{i:if(!(m<ee)){for(let ve=j+2;;){if(ee===void 0){if(m<re)break i;return j=L.length,this._cachedIndex=j,this.copySampleValue_(j-1)}if(j===ve)break;if(re=ee,ee=L[++j],m<ee)break t}le=L.length;break n}if(!(m>=re)){const ve=L[1];m<ve&&(j=2,re=ve);for(let ye=j-2;;){if(re===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(j===ye)break;if(ee=re,re=L[--j-1],m>=re)break t}le=j,j=0;break n}break e}for(;j<le;){const ve=j+le>>>1;m<L[ve]?le=ve:j=ve+1}if(ee=L[j],re=L[j-1],re===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(ee===void 0)return j=L.length,this._cachedIndex=j,this.copySampleValue_(j-1)}this._cachedIndex=j,this.intervalChanged_(j,re,ee)}return this.interpolate_(j,re,m,ee)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(m){const L=this.resultBuffer,j=this.sampleValues,ee=this.valueSize,re=m*ee;for(let le=0;le!==ee;++le)L[le]=j[re+le];return L}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class CubicInterpolant extends Interpolant{constructor(m,L,j,ee){super(m,L,j,ee),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding}}intervalChanged_(m,L,j){const ee=this.parameterPositions;let re=m-2,le=m+1,ve=ee[re],ye=ee[le];if(ve===void 0)switch(this.getSettings_().endingStart){case ZeroSlopeEnding:re=m,ve=2*L-j;break;case WrapAroundEnding:re=ee.length-2,ve=L+ee[re]-ee[re+1];break;default:re=m,ve=j}if(ye===void 0)switch(this.getSettings_().endingEnd){case ZeroSlopeEnding:le=m,ye=2*j-L;break;case WrapAroundEnding:le=1,ye=j+ee[1]-ee[0];break;default:le=m-1,ye=L}const Ee=(j-L)*.5,Me=this.valueSize;this._weightPrev=Ee/(L-ve),this._weightNext=Ee/(ye-j),this._offsetPrev=re*Me,this._offsetNext=le*Me}interpolate_(m,L,j,ee){const re=this.resultBuffer,le=this.sampleValues,ve=this.valueSize,ye=m*ve,Ee=ye-ve,Me=this._offsetPrev,Ce=this._offsetNext,De=this._weightPrev,Be=this._weightNext,ke=(j-L)/(ee-L),Fe=ke*ke,Oe=Fe*ke,Ne=-De*Oe+2*De*Fe-De*ke,ze=(1+De)*Oe+(-1.5-2*De)*Fe+(-.5+De)*ke+1,$e=(-1-Be)*Oe+(1.5+Be)*Fe+.5*ke,He=Be*Oe-Be*Fe;for(let We=0;We!==ve;++We)re[We]=Ne*le[Me+We]+ze*le[Ee+We]+$e*le[ye+We]+He*le[Ce+We];return re}}class LinearInterpolant extends Interpolant{constructor(m,L,j,ee){super(m,L,j,ee)}interpolate_(m,L,j,ee){const re=this.resultBuffer,le=this.sampleValues,ve=this.valueSize,ye=m*ve,Ee=ye-ve,Me=(j-L)/(ee-L),Ce=1-Me;for(let De=0;De!==ve;++De)re[De]=le[Ee+De]*Ce+le[ye+De]*Me;return re}}class DiscreteInterpolant extends Interpolant{constructor(m,L,j,ee){super(m,L,j,ee)}interpolate_(m){return this.copySampleValue_(m-1)}}class KeyframeTrack{constructor(m,L,j,ee){if(m===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(L===void 0||L.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+m);this.name=m,this.times=convertArray(L,this.TimeBufferType),this.values=convertArray(j,this.ValueBufferType),this.setInterpolation(ee||this.DefaultInterpolation)}static toJSON(m){const L=m.constructor;let j;if(L.toJSON!==this.toJSON)j=L.toJSON(m);else{j={name:m.name,times:convertArray(m.times,Array),values:convertArray(m.values,Array)};const ee=m.getInterpolation();ee!==m.DefaultInterpolation&&(j.interpolation=ee)}return j.type=m.ValueTypeName,j}InterpolantFactoryMethodDiscrete(m){return new DiscreteInterpolant(this.times,this.values,this.getValueSize(),m)}InterpolantFactoryMethodLinear(m){return new LinearInterpolant(this.times,this.values,this.getValueSize(),m)}InterpolantFactoryMethodSmooth(m){return new CubicInterpolant(this.times,this.values,this.getValueSize(),m)}setInterpolation(m){let L;switch(m){case InterpolateDiscrete:L=this.InterpolantFactoryMethodDiscrete;break;case InterpolateLinear:L=this.InterpolantFactoryMethodLinear;break;case InterpolateSmooth:L=this.InterpolantFactoryMethodSmooth;break}if(L===void 0){const j="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(m!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(j);return console.warn("THREE.KeyframeTrack:",j),this}return this.createInterpolant=L,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return InterpolateDiscrete;case this.InterpolantFactoryMethodLinear:return InterpolateLinear;case this.InterpolantFactoryMethodSmooth:return InterpolateSmooth}}getValueSize(){return this.values.length/this.times.length}shift(m){if(m!==0){const L=this.times;for(let j=0,ee=L.length;j!==ee;++j)L[j]+=m}return this}scale(m){if(m!==1){const L=this.times;for(let j=0,ee=L.length;j!==ee;++j)L[j]*=m}return this}trim(m,L){const j=this.times,ee=j.length;let re=0,le=ee-1;for(;re!==ee&&j[re]<m;)++re;for(;le!==-1&&j[le]>L;)--le;if(++le,re!==0||le!==ee){re>=le&&(le=Math.max(le,1),re=le-1);const ve=this.getValueSize();this.times=j.slice(re,le),this.values=this.values.slice(re*ve,le*ve)}return this}validate(){let m=!0;const L=this.getValueSize();L-Math.floor(L)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),m=!1);const j=this.times,ee=this.values,re=j.length;re===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),m=!1);let le=null;for(let ve=0;ve!==re;ve++){const ye=j[ve];if(typeof ye=="number"&&isNaN(ye)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,ve,ye),m=!1;break}if(le!==null&&le>ye){console.error("THREE.KeyframeTrack: Out of order keys.",this,ve,ye,le),m=!1;break}le=ye}if(ee!==void 0&&isTypedArray$3(ee))for(let ve=0,ye=ee.length;ve!==ye;++ve){const Ee=ee[ve];if(isNaN(Ee)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,ve,Ee),m=!1;break}}return m}optimize(){const m=this.times.slice(),L=this.values.slice(),j=this.getValueSize(),ee=this.getInterpolation()===InterpolateSmooth,re=m.length-1;let le=1;for(let ve=1;ve<re;++ve){let ye=!1;const Ee=m[ve],Me=m[ve+1];if(Ee!==Me&&(ve!==1||Ee!==m[0]))if(ee)ye=!0;else{const Ce=ve*j,De=Ce-j,Be=Ce+j;for(let ke=0;ke!==j;++ke){const Fe=L[Ce+ke];if(Fe!==L[De+ke]||Fe!==L[Be+ke]){ye=!0;break}}}if(ye){if(ve!==le){m[le]=m[ve];const Ce=ve*j,De=le*j;for(let Be=0;Be!==j;++Be)L[De+Be]=L[Ce+Be]}++le}}if(re>0){m[le]=m[re];for(let ve=re*j,ye=le*j,Ee=0;Ee!==j;++Ee)L[ye+Ee]=L[ve+Ee];++le}return le!==m.length?(this.times=m.slice(0,le),this.values=L.slice(0,le*j)):(this.times=m,this.values=L),this}clone(){const m=this.times.slice(),L=this.values.slice(),j=this.constructor,ee=new j(this.name,m,L);return ee.createInterpolant=this.createInterpolant,ee}}KeyframeTrack.prototype.TimeBufferType=Float32Array;KeyframeTrack.prototype.ValueBufferType=Float32Array;KeyframeTrack.prototype.DefaultInterpolation=InterpolateLinear;class BooleanKeyframeTrack extends KeyframeTrack{constructor(m,L,j){super(m,L,j)}}BooleanKeyframeTrack.prototype.ValueTypeName="bool";BooleanKeyframeTrack.prototype.ValueBufferType=Array;BooleanKeyframeTrack.prototype.DefaultInterpolation=InterpolateDiscrete;BooleanKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0;BooleanKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class ColorKeyframeTrack extends KeyframeTrack{}ColorKeyframeTrack.prototype.ValueTypeName="color";class NumberKeyframeTrack extends KeyframeTrack{}NumberKeyframeTrack.prototype.ValueTypeName="number";class QuaternionLinearInterpolant extends Interpolant{constructor(m,L,j,ee){super(m,L,j,ee)}interpolate_(m,L,j,ee){const re=this.resultBuffer,le=this.sampleValues,ve=this.valueSize,ye=(j-L)/(ee-L);let Ee=m*ve;for(let Me=Ee+ve;Ee!==Me;Ee+=4)Quaternion.slerpFlat(re,0,le,Ee-ve,le,Ee,ye);return re}}class QuaternionKeyframeTrack extends KeyframeTrack{InterpolantFactoryMethodLinear(m){return new QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),m)}}QuaternionKeyframeTrack.prototype.ValueTypeName="quaternion";QuaternionKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class StringKeyframeTrack extends KeyframeTrack{constructor(m,L,j){super(m,L,j)}}StringKeyframeTrack.prototype.ValueTypeName="string";StringKeyframeTrack.prototype.ValueBufferType=Array;StringKeyframeTrack.prototype.DefaultInterpolation=InterpolateDiscrete;StringKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0;StringKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class VectorKeyframeTrack extends KeyframeTrack{}VectorKeyframeTrack.prototype.ValueTypeName="vector";class AnimationClip{constructor(m="",L=-1,j=[],ee=NormalAnimationBlendMode){this.name=m,this.tracks=j,this.duration=L,this.blendMode=ee,this.uuid=generateUUID(),this.duration<0&&this.resetDuration()}static parse(m){const L=[],j=m.tracks,ee=1/(m.fps||1);for(let le=0,ve=j.length;le!==ve;++le)L.push(parseKeyframeTrack(j[le]).scale(ee));const re=new this(m.name,m.duration,L,m.blendMode);return re.uuid=m.uuid,re}static toJSON(m){const L=[],j=m.tracks,ee={name:m.name,duration:m.duration,tracks:L,uuid:m.uuid,blendMode:m.blendMode};for(let re=0,le=j.length;re!==le;++re)L.push(KeyframeTrack.toJSON(j[re]));return ee}static CreateFromMorphTargetSequence(m,L,j,ee){const re=L.length,le=[];for(let ve=0;ve<re;ve++){let ye=[],Ee=[];ye.push((ve+re-1)%re,ve,(ve+1)%re),Ee.push(0,1,0);const Me=getKeyframeOrder(ye);ye=sortedArray(ye,1,Me),Ee=sortedArray(Ee,1,Me),!ee&&ye[0]===0&&(ye.push(re),Ee.push(Ee[0])),le.push(new NumberKeyframeTrack(".morphTargetInfluences["+L[ve].name+"]",ye,Ee).scale(1/j))}return new this(m,-1,le)}static findByName(m,L){let j=m;if(!Array.isArray(m)){const ee=m;j=ee.geometry&&ee.geometry.animations||ee.animations}for(let ee=0;ee<j.length;ee++)if(j[ee].name===L)return j[ee];return null}static CreateClipsFromMorphTargetSequences(m,L,j){const ee={},re=/^([\w-]*?)([\d]+)$/;for(let ve=0,ye=m.length;ve<ye;ve++){const Ee=m[ve],Me=Ee.name.match(re);if(Me&&Me.length>1){const Ce=Me[1];let De=ee[Ce];De||(ee[Ce]=De=[]),De.push(Ee)}}const le=[];for(const ve in ee)le.push(this.CreateFromMorphTargetSequence(ve,ee[ve],L,j));return le}static parseAnimation(m,L){if(!m)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const j=function(Ce,De,Be,ke,Fe){if(Be.length!==0){const Oe=[],Ne=[];flattenJSON(Be,Oe,Ne,ke),Oe.length!==0&&Fe.push(new Ce(De,Oe,Ne))}},ee=[],re=m.name||"default",le=m.fps||30,ve=m.blendMode;let ye=m.length||-1;const Ee=m.hierarchy||[];for(let Ce=0;Ce<Ee.length;Ce++){const De=Ee[Ce].keys;if(!(!De||De.length===0))if(De[0].morphTargets){const Be={};let ke;for(ke=0;ke<De.length;ke++)if(De[ke].morphTargets)for(let Fe=0;Fe<De[ke].morphTargets.length;Fe++)Be[De[ke].morphTargets[Fe]]=-1;for(const Fe in Be){const Oe=[],Ne=[];for(let ze=0;ze!==De[ke].morphTargets.length;++ze){const $e=De[ke];Oe.push($e.time),Ne.push($e.morphTarget===Fe?1:0)}ee.push(new NumberKeyframeTrack(".morphTargetInfluence["+Fe+"]",Oe,Ne))}ye=Be.length*le}else{const Be=".bones["+L[Ce].name+"]";j(VectorKeyframeTrack,Be+".position",De,"pos",ee),j(QuaternionKeyframeTrack,Be+".quaternion",De,"rot",ee),j(VectorKeyframeTrack,Be+".scale",De,"scl",ee)}}return ee.length===0?null:new this(re,ye,ee,ve)}resetDuration(){const m=this.tracks;let L=0;for(let j=0,ee=m.length;j!==ee;++j){const re=this.tracks[j];L=Math.max(L,re.times[re.times.length-1])}return this.duration=L,this}trim(){for(let m=0;m<this.tracks.length;m++)this.tracks[m].trim(0,this.duration);return this}validate(){let m=!0;for(let L=0;L<this.tracks.length;L++)m=m&&this.tracks[L].validate();return m}optimize(){for(let m=0;m<this.tracks.length;m++)this.tracks[m].optimize();return this}clone(){const m=[];for(let L=0;L<this.tracks.length;L++)m.push(this.tracks[L].clone());return new this.constructor(this.name,this.duration,m,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function getTrackTypeForValueTypeName($){switch($.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return NumberKeyframeTrack;case"vector":case"vector2":case"vector3":case"vector4":return VectorKeyframeTrack;case"color":return ColorKeyframeTrack;case"quaternion":return QuaternionKeyframeTrack;case"bool":case"boolean":return BooleanKeyframeTrack;case"string":return StringKeyframeTrack}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+$)}function parseKeyframeTrack($){if($.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const m=getTrackTypeForValueTypeName($.type);if($.times===void 0){const L=[],j=[];flattenJSON($.keys,L,j,"value"),$.times=L,$.values=j}return m.parse!==void 0?m.parse($):new m($.name,$.times,$.values,$.interpolation)}const Cache={enabled:!1,files:{},add:function($,m){this.enabled!==!1&&(this.files[$]=m)},get:function($){if(this.enabled!==!1)return this.files[$]},remove:function($){delete this.files[$]},clear:function(){this.files={}}};class LoadingManager{constructor(m,L,j){const ee=this;let re=!1,le=0,ve=0,ye;const Ee=[];this.onStart=void 0,this.onLoad=m,this.onProgress=L,this.onError=j,this.itemStart=function(Me){ve++,re===!1&&ee.onStart!==void 0&&ee.onStart(Me,le,ve),re=!0},this.itemEnd=function(Me){le++,ee.onProgress!==void 0&&ee.onProgress(Me,le,ve),le===ve&&(re=!1,ee.onLoad!==void 0&&ee.onLoad())},this.itemError=function(Me){ee.onError!==void 0&&ee.onError(Me)},this.resolveURL=function(Me){return ye?ye(Me):Me},this.setURLModifier=function(Me){return ye=Me,this},this.addHandler=function(Me,Ce){return Ee.push(Me,Ce),this},this.removeHandler=function(Me){const Ce=Ee.indexOf(Me);return Ce!==-1&&Ee.splice(Ce,2),this},this.getHandler=function(Me){for(let Ce=0,De=Ee.length;Ce<De;Ce+=2){const Be=Ee[Ce],ke=Ee[Ce+1];if(Be.global&&(Be.lastIndex=0),Be.test(Me))return ke}return null}}}const DefaultLoadingManager=new LoadingManager;let Loader$1=class{constructor(m){this.manager=m!==void 0?m:DefaultLoadingManager,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(m,L){const j=this;return new Promise(function(ee,re){j.load(m,ee,L,re)})}parse(){}setCrossOrigin(m){return this.crossOrigin=m,this}setWithCredentials(m){return this.withCredentials=m,this}setPath(m){return this.path=m,this}setResourcePath(m){return this.resourcePath=m,this}setRequestHeader(m){return this.requestHeader=m,this}};Loader$1.DEFAULT_MATERIAL_NAME="__DEFAULT";const loading={};class HttpError extends Error{constructor(m,L){super(m),this.response=L}}class FileLoader extends Loader$1{constructor(m){super(m)}load(m,L,j,ee){m===void 0&&(m=""),this.path!==void 0&&(m=this.path+m),m=this.manager.resolveURL(m);const re=Cache.get(m);if(re!==void 0)return this.manager.itemStart(m),setTimeout(()=>{L&&L(re),this.manager.itemEnd(m)},0),re;if(loading[m]!==void 0){loading[m].push({onLoad:L,onProgress:j,onError:ee});return}loading[m]=[],loading[m].push({onLoad:L,onProgress:j,onError:ee});const le=new Request(m,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),ve=this.mimeType,ye=this.responseType;fetch(le).then(Ee=>{if(Ee.status===200||Ee.status===0){if(Ee.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||Ee.body===void 0||Ee.body.getReader===void 0)return Ee;const Me=loading[m],Ce=Ee.body.getReader(),De=Ee.headers.get("X-File-Size")||Ee.headers.get("Content-Length"),Be=De?parseInt(De):0,ke=Be!==0;let Fe=0;const Oe=new ReadableStream({start(Ne){ze();function ze(){Ce.read().then(({done:$e,value:He})=>{if($e)Ne.close();else{Fe+=He.byteLength;const We=new ProgressEvent("progress",{lengthComputable:ke,loaded:Fe,total:Be});for(let qe=0,Ye=Me.length;qe<Ye;qe++){const Ze=Me[qe];Ze.onProgress&&Ze.onProgress(We)}Ne.enqueue(He),ze()}},$e=>{Ne.error($e)})}}});return new Response(Oe)}else throw new HttpError(`fetch for "${Ee.url}" responded with ${Ee.status}: ${Ee.statusText}`,Ee)}).then(Ee=>{switch(ye){case"arraybuffer":return Ee.arrayBuffer();case"blob":return Ee.blob();case"document":return Ee.text().then(Me=>new DOMParser().parseFromString(Me,ve));case"json":return Ee.json();default:if(ve===void 0)return Ee.text();{const Ce=/charset="?([^;"\s]*)"?/i.exec(ve),De=Ce&&Ce[1]?Ce[1].toLowerCase():void 0,Be=new TextDecoder(De);return Ee.arrayBuffer().then(ke=>Be.decode(ke))}}}).then(Ee=>{Cache.add(m,Ee);const Me=loading[m];delete loading[m];for(let Ce=0,De=Me.length;Ce<De;Ce++){const Be=Me[Ce];Be.onLoad&&Be.onLoad(Ee)}}).catch(Ee=>{const Me=loading[m];if(Me===void 0)throw this.manager.itemError(m),Ee;delete loading[m];for(let Ce=0,De=Me.length;Ce<De;Ce++){const Be=Me[Ce];Be.onError&&Be.onError(Ee)}this.manager.itemError(m)}).finally(()=>{this.manager.itemEnd(m)}),this.manager.itemStart(m)}setResponseType(m){return this.responseType=m,this}setMimeType(m){return this.mimeType=m,this}}class ImageLoader extends Loader$1{constructor(m){super(m)}load(m,L,j,ee){this.path!==void 0&&(m=this.path+m),m=this.manager.resolveURL(m);const re=this,le=Cache.get(m);if(le!==void 0)return re.manager.itemStart(m),setTimeout(function(){L&&L(le),re.manager.itemEnd(m)},0),le;const ve=createElementNS("img");function ye(){Me(),Cache.add(m,this),L&&L(this),re.manager.itemEnd(m)}function Ee(Ce){Me(),ee&&ee(Ce),re.manager.itemError(m),re.manager.itemEnd(m)}function Me(){ve.removeEventListener("load",ye,!1),ve.removeEventListener("error",Ee,!1)}return ve.addEventListener("load",ye,!1),ve.addEventListener("error",Ee,!1),m.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(ve.crossOrigin=this.crossOrigin),re.manager.itemStart(m),ve.src=m,ve}}class DataTextureLoader extends Loader$1{constructor(m){super(m)}load(m,L,j,ee){const re=this,le=new DataTexture,ve=new FileLoader(this.manager);return ve.setResponseType("arraybuffer"),ve.setRequestHeader(this.requestHeader),ve.setPath(this.path),ve.setWithCredentials(re.withCredentials),ve.load(m,function(ye){let Ee;try{Ee=re.parse(ye)}catch(Me){if(ee!==void 0)ee(Me);else{console.error(Me);return}}Ee.image!==void 0?le.image=Ee.image:Ee.data!==void 0&&(le.image.width=Ee.width,le.image.height=Ee.height,le.image.data=Ee.data),le.wrapS=Ee.wrapS!==void 0?Ee.wrapS:ClampToEdgeWrapping,le.wrapT=Ee.wrapT!==void 0?Ee.wrapT:ClampToEdgeWrapping,le.magFilter=Ee.magFilter!==void 0?Ee.magFilter:LinearFilter,le.minFilter=Ee.minFilter!==void 0?Ee.minFilter:LinearFilter,le.anisotropy=Ee.anisotropy!==void 0?Ee.anisotropy:1,Ee.colorSpace!==void 0&&(le.colorSpace=Ee.colorSpace),Ee.flipY!==void 0&&(le.flipY=Ee.flipY),Ee.format!==void 0&&(le.format=Ee.format),Ee.type!==void 0&&(le.type=Ee.type),Ee.mipmaps!==void 0&&(le.mipmaps=Ee.mipmaps,le.minFilter=LinearMipmapLinearFilter),Ee.mipmapCount===1&&(le.minFilter=LinearFilter),Ee.generateMipmaps!==void 0&&(le.generateMipmaps=Ee.generateMipmaps),le.needsUpdate=!0,L&&L(le,Ee)},j,ee),le}}class TextureLoader extends Loader$1{constructor(m){super(m)}load(m,L,j,ee){const re=new Texture,le=new ImageLoader(this.manager);return le.setCrossOrigin(this.crossOrigin),le.setPath(this.path),le.load(m,function(ve){re.image=ve,re.needsUpdate=!0,L!==void 0&&L(re)},j,ee),re}}class Light extends Object3D{constructor(m,L=1){super(),this.isLight=!0,this.type="Light",this.color=new Color(m),this.intensity=L}dispose(){}copy(m,L){return super.copy(m,L),this.color.copy(m.color),this.intensity=m.intensity,this}toJSON(m){const L=super.toJSON(m);return L.object.color=this.color.getHex(),L.object.intensity=this.intensity,this.groundColor!==void 0&&(L.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(L.object.distance=this.distance),this.angle!==void 0&&(L.object.angle=this.angle),this.decay!==void 0&&(L.object.decay=this.decay),this.penumbra!==void 0&&(L.object.penumbra=this.penumbra),this.shadow!==void 0&&(L.object.shadow=this.shadow.toJSON()),L}}const _projScreenMatrix$1=new Matrix4,_lightPositionWorld$1=new Vector3,_lookTarget$1=new Vector3;class LightShadow{constructor(m){this.camera=m,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Vector2(512,512),this.map=null,this.mapPass=null,this.matrix=new Matrix4,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Frustum,this._frameExtents=new Vector2(1,1),this._viewportCount=1,this._viewports=[new Vector4(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(m){const L=this.camera,j=this.matrix;_lightPositionWorld$1.setFromMatrixPosition(m.matrixWorld),L.position.copy(_lightPositionWorld$1),_lookTarget$1.setFromMatrixPosition(m.target.matrixWorld),L.lookAt(_lookTarget$1),L.updateMatrixWorld(),_projScreenMatrix$1.multiplyMatrices(L.projectionMatrix,L.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_projScreenMatrix$1),j.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),j.multiply(_projScreenMatrix$1)}getViewport(m){return this._viewports[m]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(m){return this.camera=m.camera.clone(),this.bias=m.bias,this.radius=m.radius,this.mapSize.copy(m.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const m={};return this.bias!==0&&(m.bias=this.bias),this.normalBias!==0&&(m.normalBias=this.normalBias),this.radius!==1&&(m.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(m.mapSize=this.mapSize.toArray()),m.camera=this.camera.toJSON(!1).object,delete m.camera.matrix,m}}class SpotLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(m){const L=this.camera,j=RAD2DEG*2*m.angle*this.focus,ee=this.mapSize.width/this.mapSize.height,re=m.distance||L.far;(j!==L.fov||ee!==L.aspect||re!==L.far)&&(L.fov=j,L.aspect=ee,L.far=re,L.updateProjectionMatrix()),super.updateMatrices(m)}copy(m){return super.copy(m),this.focus=m.focus,this}}class SpotLight extends Light{constructor(m,L,j=0,ee=Math.PI/3,re=0,le=2){super(m,L),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.target=new Object3D,this.distance=j,this.angle=ee,this.penumbra=re,this.decay=le,this.map=null,this.shadow=new SpotLightShadow}get power(){return this.intensity*Math.PI}set power(m){this.intensity=m/Math.PI}dispose(){this.shadow.dispose()}copy(m,L){return super.copy(m,L),this.distance=m.distance,this.angle=m.angle,this.penumbra=m.penumbra,this.decay=m.decay,this.target=m.target.clone(),this.shadow=m.shadow.clone(),this}}const _projScreenMatrix=new Matrix4,_lightPositionWorld=new Vector3,_lookTarget=new Vector3;class PointLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Vector2(4,2),this._viewportCount=6,this._viewports=[new Vector4(2,1,1,1),new Vector4(0,1,1,1),new Vector4(3,1,1,1),new Vector4(1,1,1,1),new Vector4(3,0,1,1),new Vector4(1,0,1,1)],this._cubeDirections=[new Vector3(1,0,0),new Vector3(-1,0,0),new Vector3(0,0,1),new Vector3(0,0,-1),new Vector3(0,1,0),new Vector3(0,-1,0)],this._cubeUps=[new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,0,1),new Vector3(0,0,-1)]}updateMatrices(m,L=0){const j=this.camera,ee=this.matrix,re=m.distance||j.far;re!==j.far&&(j.far=re,j.updateProjectionMatrix()),_lightPositionWorld.setFromMatrixPosition(m.matrixWorld),j.position.copy(_lightPositionWorld),_lookTarget.copy(j.position),_lookTarget.add(this._cubeDirections[L]),j.up.copy(this._cubeUps[L]),j.lookAt(_lookTarget),j.updateMatrixWorld(),ee.makeTranslation(-_lightPositionWorld.x,-_lightPositionWorld.y,-_lightPositionWorld.z),_projScreenMatrix.multiplyMatrices(j.projectionMatrix,j.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_projScreenMatrix)}}class PointLight extends Light{constructor(m,L,j=0,ee=2){super(m,L),this.isPointLight=!0,this.type="PointLight",this.distance=j,this.decay=ee,this.shadow=new PointLightShadow}get power(){return this.intensity*4*Math.PI}set power(m){this.intensity=m/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(m,L){return super.copy(m,L),this.distance=m.distance,this.decay=m.decay,this.shadow=m.shadow.clone(),this}}class DirectionalLightShadow extends LightShadow{constructor(){super(new OrthographicCamera(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class DirectionalLight extends Light{constructor(m,L){super(m,L),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.target=new Object3D,this.shadow=new DirectionalLightShadow}dispose(){this.shadow.dispose()}copy(m){return super.copy(m),this.target=m.target.clone(),this.shadow=m.shadow.clone(),this}}class LoaderUtils{static decodeText(m){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(m);let L="";for(let j=0,ee=m.length;j<ee;j++)L+=String.fromCharCode(m[j]);try{return decodeURIComponent(escape(L))}catch{return L}}static extractUrlBase(m){const L=m.lastIndexOf("/");return L===-1?"./":m.slice(0,L+1)}static resolveURL(m,L){return typeof m!="string"||m===""?"":(/^https?:\/\//i.test(L)&&/^\//.test(m)&&(L=L.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(m)||/^data:.*,.*$/i.test(m)||/^blob:.*$/i.test(m)?m:L+m)}}class InstancedBufferGeometry extends BufferGeometry{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(m){return super.copy(m),this.instanceCount=m.instanceCount,this}toJSON(){const m=super.toJSON();return m.instanceCount=this.instanceCount,m.isInstancedBufferGeometry=!0,m}}class ImageBitmapLoader extends Loader$1{constructor(m){super(m),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(m){return this.options=m,this}load(m,L,j,ee){m===void 0&&(m=""),this.path!==void 0&&(m=this.path+m),m=this.manager.resolveURL(m);const re=this,le=Cache.get(m);if(le!==void 0){if(re.manager.itemStart(m),le.then){le.then(Ee=>{L&&L(Ee),re.manager.itemEnd(m)}).catch(Ee=>{ee&&ee(Ee)});return}return setTimeout(function(){L&&L(le),re.manager.itemEnd(m)},0),le}const ve={};ve.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",ve.headers=this.requestHeader;const ye=fetch(m,ve).then(function(Ee){return Ee.blob()}).then(function(Ee){return createImageBitmap(Ee,Object.assign(re.options,{colorSpaceConversion:"none"}))}).then(function(Ee){return Cache.add(m,Ee),L&&L(Ee),re.manager.itemEnd(m),Ee}).catch(function(Ee){ee&&ee(Ee),Cache.remove(m),re.manager.itemError(m),re.manager.itemEnd(m)});Cache.add(m,ye),re.manager.itemStart(m)}}class Clock{constructor(m=!0){this.autoStart=m,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=now$1(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let m=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const L=now$1();m=(L-this.oldTime)/1e3,this.oldTime=L,this.elapsedTime+=m}return m}}function now$1(){return(typeof performance>"u"?Date:performance).now()}class PropertyMixer{constructor(m,L,j){this.binding=m,this.valueSize=j;let ee,re,le;switch(L){case"quaternion":ee=this._slerp,re=this._slerpAdditive,le=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(j*6),this._workIndex=5;break;case"string":case"bool":ee=this._select,re=this._select,le=this._setAdditiveIdentityOther,this.buffer=new Array(j*5);break;default:ee=this._lerp,re=this._lerpAdditive,le=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(j*5)}this._mixBufferRegion=ee,this._mixBufferRegionAdditive=re,this._setIdentity=le,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(m,L){const j=this.buffer,ee=this.valueSize,re=m*ee+ee;let le=this.cumulativeWeight;if(le===0){for(let ve=0;ve!==ee;++ve)j[re+ve]=j[ve];le=L}else{le+=L;const ve=L/le;this._mixBufferRegion(j,re,0,ve,ee)}this.cumulativeWeight=le}accumulateAdditive(m){const L=this.buffer,j=this.valueSize,ee=j*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(L,ee,0,m,j),this.cumulativeWeightAdditive+=m}apply(m){const L=this.valueSize,j=this.buffer,ee=m*L+L,re=this.cumulativeWeight,le=this.cumulativeWeightAdditive,ve=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,re<1){const ye=L*this._origIndex;this._mixBufferRegion(j,ee,ye,1-re,L)}le>0&&this._mixBufferRegionAdditive(j,ee,this._addIndex*L,1,L);for(let ye=L,Ee=L+L;ye!==Ee;++ye)if(j[ye]!==j[ye+L]){ve.setValue(j,ee);break}}saveOriginalState(){const m=this.binding,L=this.buffer,j=this.valueSize,ee=j*this._origIndex;m.getValue(L,ee);for(let re=j,le=ee;re!==le;++re)L[re]=L[ee+re%j];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const m=this.valueSize*3;this.binding.setValue(this.buffer,m)}_setAdditiveIdentityNumeric(){const m=this._addIndex*this.valueSize,L=m+this.valueSize;for(let j=m;j<L;j++)this.buffer[j]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const m=this._origIndex*this.valueSize,L=this._addIndex*this.valueSize;for(let j=0;j<this.valueSize;j++)this.buffer[L+j]=this.buffer[m+j]}_select(m,L,j,ee,re){if(ee>=.5)for(let le=0;le!==re;++le)m[L+le]=m[j+le]}_slerp(m,L,j,ee){Quaternion.slerpFlat(m,L,m,L,m,j,ee)}_slerpAdditive(m,L,j,ee,re){const le=this._workIndex*re;Quaternion.multiplyQuaternionsFlat(m,le,m,L,m,j),Quaternion.slerpFlat(m,L,m,L,m,le,ee)}_lerp(m,L,j,ee,re){const le=1-ee;for(let ve=0;ve!==re;++ve){const ye=L+ve;m[ye]=m[ye]*le+m[j+ve]*ee}}_lerpAdditive(m,L,j,ee,re){for(let le=0;le!==re;++le){const ve=L+le;m[ve]=m[ve]+m[j+le]*ee}}}const _RESERVED_CHARS_RE="\\[\\]\\.:\\/",_reservedRe=new RegExp("["+_RESERVED_CHARS_RE+"]","g"),_wordChar="[^"+_RESERVED_CHARS_RE+"]",_wordCharOrDot="[^"+_RESERVED_CHARS_RE.replace("\\.","")+"]",_directoryRe=/((?:WC+[\/:])*)/.source.replace("WC",_wordChar),_nodeRe=/(WCOD+)?/.source.replace("WCOD",_wordCharOrDot),_objectRe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_wordChar),_propertyRe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_wordChar),_trackRe=new RegExp("^"+_directoryRe+_nodeRe+_objectRe+_propertyRe+"$"),_supportedObjectNames=["material","materials","bones","map"];class Composite{constructor(m,L,j){const ee=j||PropertyBinding.parseTrackName(L);this._targetGroup=m,this._bindings=m.subscribe_(L,ee)}getValue(m,L){this.bind();const j=this._targetGroup.nCachedObjects_,ee=this._bindings[j];ee!==void 0&&ee.getValue(m,L)}setValue(m,L){const j=this._bindings;for(let ee=this._targetGroup.nCachedObjects_,re=j.length;ee!==re;++ee)j[ee].setValue(m,L)}bind(){const m=this._bindings;for(let L=this._targetGroup.nCachedObjects_,j=m.length;L!==j;++L)m[L].bind()}unbind(){const m=this._bindings;for(let L=this._targetGroup.nCachedObjects_,j=m.length;L!==j;++L)m[L].unbind()}}class PropertyBinding{constructor(m,L,j){this.path=L,this.parsedPath=j||PropertyBinding.parseTrackName(L),this.node=PropertyBinding.findNode(m,this.parsedPath.nodeName),this.rootNode=m,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(m,L,j){return m&&m.isAnimationObjectGroup?new PropertyBinding.Composite(m,L,j):new PropertyBinding(m,L,j)}static sanitizeNodeName(m){return m.replace(/\s/g,"_").replace(_reservedRe,"")}static parseTrackName(m){const L=_trackRe.exec(m);if(L===null)throw new Error("PropertyBinding: Cannot parse trackName: "+m);const j={nodeName:L[2],objectName:L[3],objectIndex:L[4],propertyName:L[5],propertyIndex:L[6]},ee=j.nodeName&&j.nodeName.lastIndexOf(".");if(ee!==void 0&&ee!==-1){const re=j.nodeName.substring(ee+1);_supportedObjectNames.indexOf(re)!==-1&&(j.nodeName=j.nodeName.substring(0,ee),j.objectName=re)}if(j.propertyName===null||j.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+m);return j}static findNode(m,L){if(L===void 0||L===""||L==="."||L===-1||L===m.name||L===m.uuid)return m;if(m.skeleton){const j=m.skeleton.getBoneByName(L);if(j!==void 0)return j}if(m.children){const j=function(re){for(let le=0;le<re.length;le++){const ve=re[le];if(ve.name===L||ve.uuid===L)return ve;const ye=j(ve.children);if(ye)return ye}return null},ee=j(m.children);if(ee)return ee}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(m,L){m[L]=this.targetObject[this.propertyName]}_getValue_array(m,L){const j=this.resolvedProperty;for(let ee=0,re=j.length;ee!==re;++ee)m[L++]=j[ee]}_getValue_arrayElement(m,L){m[L]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(m,L){this.resolvedProperty.toArray(m,L)}_setValue_direct(m,L){this.targetObject[this.propertyName]=m[L]}_setValue_direct_setNeedsUpdate(m,L){this.targetObject[this.propertyName]=m[L],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(m,L){this.targetObject[this.propertyName]=m[L],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(m,L){const j=this.resolvedProperty;for(let ee=0,re=j.length;ee!==re;++ee)j[ee]=m[L++]}_setValue_array_setNeedsUpdate(m,L){const j=this.resolvedProperty;for(let ee=0,re=j.length;ee!==re;++ee)j[ee]=m[L++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(m,L){const j=this.resolvedProperty;for(let ee=0,re=j.length;ee!==re;++ee)j[ee]=m[L++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(m,L){this.resolvedProperty[this.propertyIndex]=m[L]}_setValue_arrayElement_setNeedsUpdate(m,L){this.resolvedProperty[this.propertyIndex]=m[L],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(m,L){this.resolvedProperty[this.propertyIndex]=m[L],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(m,L){this.resolvedProperty.fromArray(m,L)}_setValue_fromArray_setNeedsUpdate(m,L){this.resolvedProperty.fromArray(m,L),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(m,L){this.resolvedProperty.fromArray(m,L),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(m,L){this.bind(),this.getValue(m,L)}_setValue_unbound(m,L){this.bind(),this.setValue(m,L)}bind(){let m=this.node;const L=this.parsedPath,j=L.objectName,ee=L.propertyName;let re=L.propertyIndex;if(m||(m=PropertyBinding.findNode(this.rootNode,L.nodeName),this.node=m),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!m){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(j){let Ee=L.objectIndex;switch(j){case"materials":if(!m.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!m.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}m=m.material.materials;break;case"bones":if(!m.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}m=m.skeleton.bones;for(let Me=0;Me<m.length;Me++)if(m[Me].name===Ee){Ee=Me;break}break;case"map":if("map"in m){m=m.map;break}if(!m.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!m.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}m=m.material.map;break;default:if(m[j]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}m=m[j]}if(Ee!==void 0){if(m[Ee]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,m);return}m=m[Ee]}}const le=m[ee];if(le===void 0){const Ee=L.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+Ee+"."+ee+" but it wasn't found.",m);return}let ve=this.Versioning.None;this.targetObject=m,m.needsUpdate!==void 0?ve=this.Versioning.NeedsUpdate:m.matrixWorldNeedsUpdate!==void 0&&(ve=this.Versioning.MatrixWorldNeedsUpdate);let ye=this.BindingType.Direct;if(re!==void 0){if(ee==="morphTargetInfluences"){if(!m.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!m.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}m.morphTargetDictionary[re]!==void 0&&(re=m.morphTargetDictionary[re])}ye=this.BindingType.ArrayElement,this.resolvedProperty=le,this.propertyIndex=re}else le.fromArray!==void 0&&le.toArray!==void 0?(ye=this.BindingType.HasFromToArray,this.resolvedProperty=le):Array.isArray(le)?(ye=this.BindingType.EntireArray,this.resolvedProperty=le):this.propertyName=ee;this.getValue=this.GetterByBindingType[ye],this.setValue=this.SetterByBindingTypeAndVersioning[ye][ve]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}PropertyBinding.Composite=Composite;PropertyBinding.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};PropertyBinding.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};PropertyBinding.prototype.GetterByBindingType=[PropertyBinding.prototype._getValue_direct,PropertyBinding.prototype._getValue_array,PropertyBinding.prototype._getValue_arrayElement,PropertyBinding.prototype._getValue_toArray];PropertyBinding.prototype.SetterByBindingTypeAndVersioning=[[PropertyBinding.prototype._setValue_direct,PropertyBinding.prototype._setValue_direct_setNeedsUpdate,PropertyBinding.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_array,PropertyBinding.prototype._setValue_array_setNeedsUpdate,PropertyBinding.prototype._setValue_array_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_arrayElement,PropertyBinding.prototype._setValue_arrayElement_setNeedsUpdate,PropertyBinding.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_fromArray,PropertyBinding.prototype._setValue_fromArray_setNeedsUpdate,PropertyBinding.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class AnimationAction{constructor(m,L,j=null,ee=L.blendMode){this._mixer=m,this._clip=L,this._localRoot=j,this.blendMode=ee;const re=L.tracks,le=re.length,ve=new Array(le),ye={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding};for(let Ee=0;Ee!==le;++Ee){const Me=re[Ee].createInterpolant(null);ve[Ee]=Me,Me.settings=ye}this._interpolantSettings=ye,this._interpolants=ve,this._propertyBindings=new Array(le),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=LoopRepeat,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(m){return this._startTime=m,this}setLoop(m,L){return this.loop=m,this.repetitions=L,this}setEffectiveWeight(m){return this.weight=m,this._effectiveWeight=this.enabled?m:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(m){return this._scheduleFading(m,0,1)}fadeOut(m){return this._scheduleFading(m,1,0)}crossFadeFrom(m,L,j){if(m.fadeOut(L),this.fadeIn(L),j){const ee=this._clip.duration,re=m._clip.duration,le=re/ee,ve=ee/re;m.warp(1,le,L),this.warp(ve,1,L)}return this}crossFadeTo(m,L,j){return m.crossFadeFrom(this,L,j)}stopFading(){const m=this._weightInterpolant;return m!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(m)),this}setEffectiveTimeScale(m){return this.timeScale=m,this._effectiveTimeScale=this.paused?0:m,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(m){return this.timeScale=this._clip.duration/m,this.stopWarping()}syncWith(m){return this.time=m.time,this.timeScale=m.timeScale,this.stopWarping()}halt(m){return this.warp(this._effectiveTimeScale,0,m)}warp(m,L,j){const ee=this._mixer,re=ee.time,le=this.timeScale;let ve=this._timeScaleInterpolant;ve===null&&(ve=ee._lendControlInterpolant(),this._timeScaleInterpolant=ve);const ye=ve.parameterPositions,Ee=ve.sampleValues;return ye[0]=re,ye[1]=re+j,Ee[0]=m/le,Ee[1]=L/le,this}stopWarping(){const m=this._timeScaleInterpolant;return m!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(m)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(m,L,j,ee){if(!this.enabled){this._updateWeight(m);return}const re=this._startTime;if(re!==null){const ye=(m-re)*j;ye<0||j===0?L=0:(this._startTime=null,L=j*ye)}L*=this._updateTimeScale(m);const le=this._updateTime(L),ve=this._updateWeight(m);if(ve>0){const ye=this._interpolants,Ee=this._propertyBindings;switch(this.blendMode){case AdditiveAnimationBlendMode:for(let Me=0,Ce=ye.length;Me!==Ce;++Me)ye[Me].evaluate(le),Ee[Me].accumulateAdditive(ve);break;case NormalAnimationBlendMode:default:for(let Me=0,Ce=ye.length;Me!==Ce;++Me)ye[Me].evaluate(le),Ee[Me].accumulate(ee,ve)}}}_updateWeight(m){let L=0;if(this.enabled){L=this.weight;const j=this._weightInterpolant;if(j!==null){const ee=j.evaluate(m)[0];L*=ee,m>j.parameterPositions[1]&&(this.stopFading(),ee===0&&(this.enabled=!1))}}return this._effectiveWeight=L,L}_updateTimeScale(m){let L=0;if(!this.paused){L=this.timeScale;const j=this._timeScaleInterpolant;if(j!==null){const ee=j.evaluate(m)[0];L*=ee,m>j.parameterPositions[1]&&(this.stopWarping(),L===0?this.paused=!0:this.timeScale=L)}}return this._effectiveTimeScale=L,L}_updateTime(m){const L=this._clip.duration,j=this.loop;let ee=this.time+m,re=this._loopCount;const le=j===LoopPingPong;if(m===0)return re===-1?ee:le&&(re&1)===1?L-ee:ee;if(j===LoopOnce){re===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(ee>=L)ee=L;else if(ee<0)ee=0;else{this.time=ee;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=ee,this._mixer.dispatchEvent({type:"finished",action:this,direction:m<0?-1:1})}}else{if(re===-1&&(m>=0?(re=0,this._setEndings(!0,this.repetitions===0,le)):this._setEndings(this.repetitions===0,!0,le)),ee>=L||ee<0){const ve=Math.floor(ee/L);ee-=L*ve,re+=Math.abs(ve);const ye=this.repetitions-re;if(ye<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,ee=m>0?L:0,this.time=ee,this._mixer.dispatchEvent({type:"finished",action:this,direction:m>0?1:-1});else{if(ye===1){const Ee=m<0;this._setEndings(Ee,!Ee,le)}else this._setEndings(!1,!1,le);this._loopCount=re,this.time=ee,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:ve})}}else this.time=ee;if(le&&(re&1)===1)return L-ee}return ee}_setEndings(m,L,j){const ee=this._interpolantSettings;j?(ee.endingStart=ZeroSlopeEnding,ee.endingEnd=ZeroSlopeEnding):(m?ee.endingStart=this.zeroSlopeAtStart?ZeroSlopeEnding:ZeroCurvatureEnding:ee.endingStart=WrapAroundEnding,L?ee.endingEnd=this.zeroSlopeAtEnd?ZeroSlopeEnding:ZeroCurvatureEnding:ee.endingEnd=WrapAroundEnding)}_scheduleFading(m,L,j){const ee=this._mixer,re=ee.time;let le=this._weightInterpolant;le===null&&(le=ee._lendControlInterpolant(),this._weightInterpolant=le);const ve=le.parameterPositions,ye=le.sampleValues;return ve[0]=re,ye[0]=L,ve[1]=re+m,ye[1]=j,this}}const _controlInterpolantsResultBuffer=new Float32Array(1);class AnimationMixer extends EventDispatcher$2{constructor(m){super(),this._root=m,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(m,L){const j=m._localRoot||this._root,ee=m._clip.tracks,re=ee.length,le=m._propertyBindings,ve=m._interpolants,ye=j.uuid,Ee=this._bindingsByRootAndName;let Me=Ee[ye];Me===void 0&&(Me={},Ee[ye]=Me);for(let Ce=0;Ce!==re;++Ce){const De=ee[Ce],Be=De.name;let ke=Me[Be];if(ke!==void 0)++ke.referenceCount,le[Ce]=ke;else{if(ke=le[Ce],ke!==void 0){ke._cacheIndex===null&&(++ke.referenceCount,this._addInactiveBinding(ke,ye,Be));continue}const Fe=L&&L._propertyBindings[Ce].binding.parsedPath;ke=new PropertyMixer(PropertyBinding.create(j,Be,Fe),De.ValueTypeName,De.getValueSize()),++ke.referenceCount,this._addInactiveBinding(ke,ye,Be),le[Ce]=ke}ve[Ce].resultBuffer=ke.buffer}}_activateAction(m){if(!this._isActiveAction(m)){if(m._cacheIndex===null){const j=(m._localRoot||this._root).uuid,ee=m._clip.uuid,re=this._actionsByClip[ee];this._bindAction(m,re&&re.knownActions[0]),this._addInactiveAction(m,ee,j)}const L=m._propertyBindings;for(let j=0,ee=L.length;j!==ee;++j){const re=L[j];re.useCount++===0&&(this._lendBinding(re),re.saveOriginalState())}this._lendAction(m)}}_deactivateAction(m){if(this._isActiveAction(m)){const L=m._propertyBindings;for(let j=0,ee=L.length;j!==ee;++j){const re=L[j];--re.useCount===0&&(re.restoreOriginalState(),this._takeBackBinding(re))}this._takeBackAction(m)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const m=this;this.stats={actions:{get total(){return m._actions.length},get inUse(){return m._nActiveActions}},bindings:{get total(){return m._bindings.length},get inUse(){return m._nActiveBindings}},controlInterpolants:{get total(){return m._controlInterpolants.length},get inUse(){return m._nActiveControlInterpolants}}}}_isActiveAction(m){const L=m._cacheIndex;return L!==null&&L<this._nActiveActions}_addInactiveAction(m,L,j){const ee=this._actions,re=this._actionsByClip;let le=re[L];if(le===void 0)le={knownActions:[m],actionByRoot:{}},m._byClipCacheIndex=0,re[L]=le;else{const ve=le.knownActions;m._byClipCacheIndex=ve.length,ve.push(m)}m._cacheIndex=ee.length,ee.push(m),le.actionByRoot[j]=m}_removeInactiveAction(m){const L=this._actions,j=L[L.length-1],ee=m._cacheIndex;j._cacheIndex=ee,L[ee]=j,L.pop(),m._cacheIndex=null;const re=m._clip.uuid,le=this._actionsByClip,ve=le[re],ye=ve.knownActions,Ee=ye[ye.length-1],Me=m._byClipCacheIndex;Ee._byClipCacheIndex=Me,ye[Me]=Ee,ye.pop(),m._byClipCacheIndex=null;const Ce=ve.actionByRoot,De=(m._localRoot||this._root).uuid;delete Ce[De],ye.length===0&&delete le[re],this._removeInactiveBindingsForAction(m)}_removeInactiveBindingsForAction(m){const L=m._propertyBindings;for(let j=0,ee=L.length;j!==ee;++j){const re=L[j];--re.referenceCount===0&&this._removeInactiveBinding(re)}}_lendAction(m){const L=this._actions,j=m._cacheIndex,ee=this._nActiveActions++,re=L[ee];m._cacheIndex=ee,L[ee]=m,re._cacheIndex=j,L[j]=re}_takeBackAction(m){const L=this._actions,j=m._cacheIndex,ee=--this._nActiveActions,re=L[ee];m._cacheIndex=ee,L[ee]=m,re._cacheIndex=j,L[j]=re}_addInactiveBinding(m,L,j){const ee=this._bindingsByRootAndName,re=this._bindings;let le=ee[L];le===void 0&&(le={},ee[L]=le),le[j]=m,m._cacheIndex=re.length,re.push(m)}_removeInactiveBinding(m){const L=this._bindings,j=m.binding,ee=j.rootNode.uuid,re=j.path,le=this._bindingsByRootAndName,ve=le[ee],ye=L[L.length-1],Ee=m._cacheIndex;ye._cacheIndex=Ee,L[Ee]=ye,L.pop(),delete ve[re],Object.keys(ve).length===0&&delete le[ee]}_lendBinding(m){const L=this._bindings,j=m._cacheIndex,ee=this._nActiveBindings++,re=L[ee];m._cacheIndex=ee,L[ee]=m,re._cacheIndex=j,L[j]=re}_takeBackBinding(m){const L=this._bindings,j=m._cacheIndex,ee=--this._nActiveBindings,re=L[ee];m._cacheIndex=ee,L[ee]=m,re._cacheIndex=j,L[j]=re}_lendControlInterpolant(){const m=this._controlInterpolants,L=this._nActiveControlInterpolants++;let j=m[L];return j===void 0&&(j=new LinearInterpolant(new Float32Array(2),new Float32Array(2),1,_controlInterpolantsResultBuffer),j.__cacheIndex=L,m[L]=j),j}_takeBackControlInterpolant(m){const L=this._controlInterpolants,j=m.__cacheIndex,ee=--this._nActiveControlInterpolants,re=L[ee];m.__cacheIndex=ee,L[ee]=m,re.__cacheIndex=j,L[j]=re}clipAction(m,L,j){const ee=L||this._root,re=ee.uuid;let le=typeof m=="string"?AnimationClip.findByName(ee,m):m;const ve=le!==null?le.uuid:m,ye=this._actionsByClip[ve];let Ee=null;if(j===void 0&&(le!==null?j=le.blendMode:j=NormalAnimationBlendMode),ye!==void 0){const Ce=ye.actionByRoot[re];if(Ce!==void 0&&Ce.blendMode===j)return Ce;Ee=ye.knownActions[0],le===null&&(le=Ee._clip)}if(le===null)return null;const Me=new AnimationAction(this,le,L,j);return this._bindAction(Me,Ee),this._addInactiveAction(Me,ve,re),Me}existingAction(m,L){const j=L||this._root,ee=j.uuid,re=typeof m=="string"?AnimationClip.findByName(j,m):m,le=re?re.uuid:m,ve=this._actionsByClip[le];return ve!==void 0&&ve.actionByRoot[ee]||null}stopAllAction(){const m=this._actions,L=this._nActiveActions;for(let j=L-1;j>=0;--j)m[j].stop();return this}update(m){m*=this.timeScale;const L=this._actions,j=this._nActiveActions,ee=this.time+=m,re=Math.sign(m),le=this._accuIndex^=1;for(let Ee=0;Ee!==j;++Ee)L[Ee]._update(ee,m,re,le);const ve=this._bindings,ye=this._nActiveBindings;for(let Ee=0;Ee!==ye;++Ee)ve[Ee].apply(le);return this}setTime(m){this.time=0;for(let L=0;L<this._actions.length;L++)this._actions[L].time=0;return this.update(m)}getRoot(){return this._root}uncacheClip(m){const L=this._actions,j=m.uuid,ee=this._actionsByClip,re=ee[j];if(re!==void 0){const le=re.knownActions;for(let ve=0,ye=le.length;ve!==ye;++ve){const Ee=le[ve];this._deactivateAction(Ee);const Me=Ee._cacheIndex,Ce=L[L.length-1];Ee._cacheIndex=null,Ee._byClipCacheIndex=null,Ce._cacheIndex=Me,L[Me]=Ce,L.pop(),this._removeInactiveBindingsForAction(Ee)}delete ee[j]}}uncacheRoot(m){const L=m.uuid,j=this._actionsByClip;for(const le in j){const ve=j[le].actionByRoot,ye=ve[L];ye!==void 0&&(this._deactivateAction(ye),this._removeInactiveAction(ye))}const ee=this._bindingsByRootAndName,re=ee[L];if(re!==void 0)for(const le in re){const ve=re[le];ve.restoreOriginalState(),this._removeInactiveBinding(ve)}}uncacheAction(m,L){const j=this.existingAction(m,L);j!==null&&(this._deactivateAction(j),this._removeInactiveAction(j))}}const _matrix=new Matrix4;class Raycaster{constructor(m,L,j=0,ee=1/0){this.ray=new Ray(m,L),this.near=j,this.far=ee,this.camera=null,this.layers=new Layers,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(m,L){this.ray.set(m,L)}setFromCamera(m,L){L.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(L.matrixWorld),this.ray.direction.set(m.x,m.y,.5).unproject(L).sub(this.ray.origin).normalize(),this.camera=L):L.isOrthographicCamera?(this.ray.origin.set(m.x,m.y,(L.near+L.far)/(L.near-L.far)).unproject(L),this.ray.direction.set(0,0,-1).transformDirection(L.matrixWorld),this.camera=L):console.error("THREE.Raycaster: Unsupported camera type: "+L.type)}setFromXRController(m){return _matrix.identity().extractRotation(m.matrixWorld),this.ray.origin.setFromMatrixPosition(m.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(_matrix),this}intersectObject(m,L=!0,j=[]){return intersect(m,this,j,L),j.sort(ascSort),j}intersectObjects(m,L=!0,j=[]){for(let ee=0,re=m.length;ee<re;ee++)intersect(m[ee],this,j,L);return j.sort(ascSort),j}}function ascSort($,m){return $.distance-m.distance}function intersect($,m,L,j){let ee=!0;if($.layers.test(m.layers)&&$.raycast(m,L)===!1&&(ee=!1),ee===!0&&j===!0){const re=$.children;for(let le=0,ve=re.length;le<ve;le++)intersect(re[le],m,L,!0)}}class Spherical{constructor(m=1,L=0,j=0){return this.radius=m,this.phi=L,this.theta=j,this}set(m,L,j){return this.radius=m,this.phi=L,this.theta=j,this}copy(m){return this.radius=m.radius,this.phi=m.phi,this.theta=m.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(m){return this.setFromCartesianCoords(m.x,m.y,m.z)}setFromCartesianCoords(m,L,j){return this.radius=Math.sqrt(m*m+L*L+j*j),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(m,j),this.phi=Math.acos(clamp$1(L/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:REVISION}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=REVISION);function destroyTimeline($,m=!1){if($){$.parent&&m&&destroyTimeline($.parent,!1),$==null||$.kill();for(const L in $)typeof $[L]!="function"&&$[L]!=null&&($[L]instanceof gsapWithCSS.core.Timeline||$[L]instanceof gsapWithCSS.core.Tween)&&($[L]=null)}}var commonjsGlobal$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs($){return $&&$.__esModule&&Object.prototype.hasOwnProperty.call($,"default")?$.default:$}var axios$3={exports:{}},bind$3=function(m,L){return function(){for(var ee=new Array(arguments.length),re=0;re<ee.length;re++)ee[re]=arguments[re];return m.apply(L,ee)}},bind$2=bind$3,toString$1=Object.prototype.toString,kindOf=function($){return function(m){var L=toString$1.call(m);return $[L]||($[L]=L.slice(8,-1).toLowerCase())}}(Object.create(null));function kindOfTest($){return $=$.toLowerCase(),function(L){return kindOf(L)===$}}function isArray$2($){return Array.isArray($)}function isUndefined$1($){return typeof $>"u"}function isBuffer($){return $!==null&&!isUndefined$1($)&&$.constructor!==null&&!isUndefined$1($.constructor)&&typeof $.constructor.isBuffer=="function"&&$.constructor.isBuffer($)}var isArrayBuffer$1=kindOfTest("ArrayBuffer");function isArrayBufferView($){var m;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?m=ArrayBuffer.isView($):m=$&&$.buffer&&isArrayBuffer$1($.buffer),m}function isString$1($){return typeof $=="string"}function isNumber$1($){return typeof $=="number"}function isObject$3($){return $!==null&&typeof $=="object"}function isPlainObject$2($){if(kindOf($)!=="object")return!1;var m=Object.getPrototypeOf($);return m===null||m===Object.prototype}var isDate$1=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList");function isFunction$2($){return toString$1.call($)==="[object Function]"}function isStream($){return isObject$3($)&&isFunction$2($.pipe)}function isFormData($){var m="[object FormData]";return $&&(typeof FormData=="function"&&$ instanceof FormData||toString$1.call($)===m||isFunction$2($.toString)&&$.toString()===m)}var isURLSearchParams=kindOfTest("URLSearchParams");function trim($){return $.trim?$.trim():$.replace(/^\s+|\s+$/g,"")}function isStandardBrowserEnv(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function forEach$1($,m){if(!($===null||typeof $>"u"))if(typeof $!="object"&&($=[$]),isArray$2($))for(var L=0,j=$.length;L<j;L++)m.call(null,$[L],L,$);else for(var ee in $)Object.prototype.hasOwnProperty.call($,ee)&&m.call(null,$[ee],ee,$)}function merge$1(){var $={};function m(ee,re){isPlainObject$2($[re])&&isPlainObject$2(ee)?$[re]=merge$1($[re],ee):isPlainObject$2(ee)?$[re]=merge$1({},ee):isArray$2(ee)?$[re]=ee.slice():$[re]=ee}for(var L=0,j=arguments.length;L<j;L++)forEach$1(arguments[L],m);return $}function extend$1($,m,L){return forEach$1(m,function(ee,re){L&&typeof ee=="function"?$[re]=bind$2(ee,L):$[re]=ee}),$}function stripBOM($){return $.charCodeAt(0)===65279&&($=$.slice(1)),$}function inherits($,m,L,j){$.prototype=Object.create(m.prototype,j),$.prototype.constructor=$,L&&Object.assign($.prototype,L)}function toFlatObject($,m,L){var j,ee,re,le={};m=m||{};do{for(j=Object.getOwnPropertyNames($),ee=j.length;ee-- >0;)re=j[ee],le[re]||(m[re]=$[re],le[re]=!0);$=Object.getPrototypeOf($)}while($&&(!L||L($,m))&&$!==Object.prototype);return m}function endsWith($,m,L){$=String($),(L===void 0||L>$.length)&&(L=$.length),L-=m.length;var j=$.indexOf(m,L);return j!==-1&&j===L}function toArray$1($){if(!$)return null;var m=$.length;if(isUndefined$1(m))return null;for(var L=new Array(m);m-- >0;)L[m]=$[m];return L}var isTypedArray$2=function($){return function(m){return $&&m instanceof $}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array)),utils$b={isArray:isArray$2,isArrayBuffer:isArrayBuffer$1,isBuffer,isFormData,isArrayBufferView,isString:isString$1,isNumber:isNumber$1,isObject:isObject$3,isPlainObject:isPlainObject$2,isUndefined:isUndefined$1,isDate:isDate$1,isFile,isBlob,isFunction:isFunction$2,isStream,isURLSearchParams,isStandardBrowserEnv,forEach:forEach$1,merge:merge$1,extend:extend$1,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray:toArray$1,isTypedArray:isTypedArray$2,isFileList},utils$a=utils$b;function encode($){return encodeURIComponent($).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var buildURL$1=function(m,L,j){if(!L)return m;var ee;if(j)ee=j(L);else if(utils$a.isURLSearchParams(L))ee=L.toString();else{var re=[];utils$a.forEach(L,function(ye,Ee){ye===null||typeof ye>"u"||(utils$a.isArray(ye)?Ee=Ee+"[]":ye=[ye],utils$a.forEach(ye,function(Ce){utils$a.isDate(Ce)?Ce=Ce.toISOString():utils$a.isObject(Ce)&&(Ce=JSON.stringify(Ce)),re.push(encode(Ee)+"="+encode(Ce))}))}),ee=re.join("&")}if(ee){var le=m.indexOf("#");le!==-1&&(m=m.slice(0,le)),m+=(m.indexOf("?")===-1?"?":"&")+ee}return m},utils$9=utils$b;function InterceptorManager$1(){this.handlers=[]}InterceptorManager$1.prototype.use=function(m,L,j){return this.handlers.push({fulfilled:m,rejected:L,synchronous:j?j.synchronous:!1,runWhen:j?j.runWhen:null}),this.handlers.length-1};InterceptorManager$1.prototype.eject=function(m){this.handlers[m]&&(this.handlers[m]=null)};InterceptorManager$1.prototype.forEach=function(m){utils$9.forEach(this.handlers,function(j){j!==null&&m(j)})};var InterceptorManager_1=InterceptorManager$1,utils$8=utils$b,normalizeHeaderName$1=function(m,L){utils$8.forEach(m,function(ee,re){re!==L&&re.toUpperCase()===L.toUpperCase()&&(m[L]=ee,delete m[re])})},utils$7=utils$b;function AxiosError$2($,m,L,j,ee){Error.call(this),this.message=$,this.name="AxiosError",m&&(this.code=m),L&&(this.config=L),j&&(this.request=j),ee&&(this.response=ee)}utils$7.inherits(AxiosError$2,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var prototype=AxiosError$2.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function($){descriptors[$]={value:$}});Object.defineProperties(AxiosError$2,descriptors);Object.defineProperty(prototype,"isAxiosError",{value:!0});AxiosError$2.from=function($,m,L,j,ee,re){var le=Object.create(prototype);return utils$7.toFlatObject($,le,function(ye){return ye!==Error.prototype}),AxiosError$2.call(le,$.message,m,L,j,ee),le.name=$.name,re&&Object.assign(le,re),le};var AxiosError_1=AxiosError$2,transitional={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},utils$6=utils$b;function toFormData$1($,m){m=m||new FormData;var L=[];function j(re){return re===null?"":utils$6.isDate(re)?re.toISOString():utils$6.isArrayBuffer(re)||utils$6.isTypedArray(re)?typeof Blob=="function"?new Blob([re]):Buffer.from(re):re}function ee(re,le){if(utils$6.isPlainObject(re)||utils$6.isArray(re)){if(L.indexOf(re)!==-1)throw Error("Circular reference detected in "+le);L.push(re),utils$6.forEach(re,function(ye,Ee){if(!utils$6.isUndefined(ye)){var Me=le?le+"."+Ee:Ee,Ce;if(ye&&!le&&typeof ye=="object"){if(utils$6.endsWith(Ee,"{}"))ye=JSON.stringify(ye);else if(utils$6.endsWith(Ee,"[]")&&(Ce=utils$6.toArray(ye))){Ce.forEach(function(De){!utils$6.isUndefined(De)&&m.append(Me,j(De))});return}}ee(ye,Me)}}),L.pop()}else m.append(le,j(re))}return ee($),m}var toFormData_1=toFormData$1,settle,hasRequiredSettle;function requireSettle(){if(hasRequiredSettle)return settle;hasRequiredSettle=1;var $=AxiosError_1;return settle=function(L,j,ee){var re=ee.config.validateStatus;!ee.status||!re||re(ee.status)?L(ee):j(new $("Request failed with status code "+ee.status,[$.ERR_BAD_REQUEST,$.ERR_BAD_RESPONSE][Math.floor(ee.status/100)-4],ee.config,ee.request,ee))},settle}var cookies,hasRequiredCookies;function requireCookies(){if(hasRequiredCookies)return cookies;hasRequiredCookies=1;var $=utils$b;return cookies=$.isStandardBrowserEnv()?function(){return{write:function(j,ee,re,le,ve,ye){var Ee=[];Ee.push(j+"="+encodeURIComponent(ee)),$.isNumber(re)&&Ee.push("expires="+new Date(re).toGMTString()),$.isString(le)&&Ee.push("path="+le),$.isString(ve)&&Ee.push("domain="+ve),ye===!0&&Ee.push("secure"),document.cookie=Ee.join("; ")},read:function(j){var ee=document.cookie.match(new RegExp("(^|;\\s*)("+j+")=([^;]*)"));return ee?decodeURIComponent(ee[3]):null},remove:function(j){this.write(j,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),cookies}var isAbsoluteURL$1=function(m){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(m)},combineURLs$1=function(m,L){return L?m.replace(/\/+$/,"")+"/"+L.replace(/^\/+/,""):m},isAbsoluteURL=isAbsoluteURL$1,combineURLs=combineURLs$1,buildFullPath$1=function(m,L){return m&&!isAbsoluteURL(L)?combineURLs(m,L):L},parseHeaders,hasRequiredParseHeaders;function requireParseHeaders(){if(hasRequiredParseHeaders)return parseHeaders;hasRequiredParseHeaders=1;var $=utils$b,m=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return parseHeaders=function(j){var ee={},re,le,ve;return j&&$.forEach(j.split(`
`),function(Ee){if(ve=Ee.indexOf(":"),re=$.trim(Ee.substr(0,ve)).toLowerCase(),le=$.trim(Ee.substr(ve+1)),re){if(ee[re]&&m.indexOf(re)>=0)return;re==="set-cookie"?ee[re]=(ee[re]?ee[re]:[]).concat([le]):ee[re]=ee[re]?ee[re]+", "+le:le}}),ee},parseHeaders}var isURLSameOrigin,hasRequiredIsURLSameOrigin;function requireIsURLSameOrigin(){if(hasRequiredIsURLSameOrigin)return isURLSameOrigin;hasRequiredIsURLSameOrigin=1;var $=utils$b;return isURLSameOrigin=$.isStandardBrowserEnv()?function(){var L=/(msie|trident)/i.test(navigator.userAgent),j=document.createElement("a"),ee;function re(le){var ve=le;return L&&(j.setAttribute("href",ve),ve=j.href),j.setAttribute("href",ve),{href:j.href,protocol:j.protocol?j.protocol.replace(/:$/,""):"",host:j.host,search:j.search?j.search.replace(/^\?/,""):"",hash:j.hash?j.hash.replace(/^#/,""):"",hostname:j.hostname,port:j.port,pathname:j.pathname.charAt(0)==="/"?j.pathname:"/"+j.pathname}}return ee=re(window.location.href),function(ve){var ye=$.isString(ve)?re(ve):ve;return ye.protocol===ee.protocol&&ye.host===ee.host}}():function(){return function(){return!0}}(),isURLSameOrigin}var CanceledError_1,hasRequiredCanceledError;function requireCanceledError(){if(hasRequiredCanceledError)return CanceledError_1;hasRequiredCanceledError=1;var $=AxiosError_1,m=utils$b;function L(j){$.call(this,j??"canceled",$.ERR_CANCELED),this.name="CanceledError"}return m.inherits(L,$,{__CANCEL__:!0}),CanceledError_1=L,CanceledError_1}var parseProtocol,hasRequiredParseProtocol;function requireParseProtocol(){return hasRequiredParseProtocol||(hasRequiredParseProtocol=1,parseProtocol=function(m){var L=/^([-+\w]{1,25})(:?\/\/|:)/.exec(m);return L&&L[1]||""}),parseProtocol}var xhr,hasRequiredXhr;function requireXhr(){if(hasRequiredXhr)return xhr;hasRequiredXhr=1;var $=utils$b,m=requireSettle(),L=requireCookies(),j=buildURL$1,ee=buildFullPath$1,re=requireParseHeaders(),le=requireIsURLSameOrigin(),ve=transitional,ye=AxiosError_1,Ee=requireCanceledError(),Me=requireParseProtocol();return xhr=function(De){return new Promise(function(ke,Fe){var Oe=De.data,Ne=De.headers,ze=De.responseType,$e;function He(){De.cancelToken&&De.cancelToken.unsubscribe($e),De.signal&&De.signal.removeEventListener("abort",$e)}$.isFormData(Oe)&&$.isStandardBrowserEnv()&&delete Ne["Content-Type"];var We=new XMLHttpRequest;if(De.auth){var qe=De.auth.username||"",Ye=De.auth.password?unescape(encodeURIComponent(De.auth.password)):"";Ne.Authorization="Basic "+btoa(qe+":"+Ye)}var Ze=ee(De.baseURL,De.url);We.open(De.method.toUpperCase(),j(Ze,De.params,De.paramsSerializer),!0),We.timeout=De.timeout;function Ke(){if(We){var mt="getAllResponseHeaders"in We?re(We.getAllResponseHeaders()):null,Et=!ze||ze==="text"||ze==="json"?We.responseText:We.response,bt={data:Et,status:We.status,statusText:We.statusText,headers:mt,config:De,request:We};m(function(st){ke(st),He()},function(st){Fe(st),He()},bt),We=null}}if("onloadend"in We?We.onloadend=Ke:We.onreadystatechange=function(){!We||We.readyState!==4||We.status===0&&!(We.responseURL&&We.responseURL.indexOf("file:")===0)||setTimeout(Ke)},We.onabort=function(){We&&(Fe(new ye("Request aborted",ye.ECONNABORTED,De,We)),We=null)},We.onerror=function(){Fe(new ye("Network Error",ye.ERR_NETWORK,De,We,We)),We=null},We.ontimeout=function(){var Et=De.timeout?"timeout of "+De.timeout+"ms exceeded":"timeout exceeded",bt=De.transitional||ve;De.timeoutErrorMessage&&(Et=De.timeoutErrorMessage),Fe(new ye(Et,bt.clarifyTimeoutError?ye.ETIMEDOUT:ye.ECONNABORTED,De,We)),We=null},$.isStandardBrowserEnv()){var rt=(De.withCredentials||le(Ze))&&De.xsrfCookieName?L.read(De.xsrfCookieName):void 0;rt&&(Ne[De.xsrfHeaderName]=rt)}"setRequestHeader"in We&&$.forEach(Ne,function(Et,bt){typeof Oe>"u"&&bt.toLowerCase()==="content-type"?delete Ne[bt]:We.setRequestHeader(bt,Et)}),$.isUndefined(De.withCredentials)||(We.withCredentials=!!De.withCredentials),ze&&ze!=="json"&&(We.responseType=De.responseType),typeof De.onDownloadProgress=="function"&&We.addEventListener("progress",De.onDownloadProgress),typeof De.onUploadProgress=="function"&&We.upload&&We.upload.addEventListener("progress",De.onUploadProgress),(De.cancelToken||De.signal)&&($e=function(mt){We&&(Fe(!mt||mt&&mt.type?new Ee:mt),We.abort(),We=null)},De.cancelToken&&De.cancelToken.subscribe($e),De.signal&&(De.signal.aborted?$e():De.signal.addEventListener("abort",$e))),Oe||(Oe=null);var ft=Me(Ze);if(ft&&["http","https","file"].indexOf(ft)===-1){Fe(new ye("Unsupported protocol "+ft+":",ye.ERR_BAD_REQUEST,De));return}We.send(Oe)})},xhr}var _null,hasRequired_null;function require_null(){return hasRequired_null||(hasRequired_null=1,_null=null),_null}var utils$5=utils$b,normalizeHeaderName=normalizeHeaderName$1,AxiosError$1=AxiosError_1,transitionalDefaults=transitional,toFormData=toFormData_1,DEFAULT_CONTENT_TYPE={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset($,m){!utils$5.isUndefined($)&&utils$5.isUndefined($["Content-Type"])&&($["Content-Type"]=m)}function getDefaultAdapter(){var $;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&($=requireXhr()),$}function stringifySafely($,m,L){if(utils$5.isString($))try{return(m||JSON.parse)($),utils$5.trim($)}catch(j){if(j.name!=="SyntaxError")throw j}return(L||JSON.stringify)($)}var defaults$4={transitional:transitionalDefaults,adapter:getDefaultAdapter(),transformRequest:[function(m,L){if(normalizeHeaderName(L,"Accept"),normalizeHeaderName(L,"Content-Type"),utils$5.isFormData(m)||utils$5.isArrayBuffer(m)||utils$5.isBuffer(m)||utils$5.isStream(m)||utils$5.isFile(m)||utils$5.isBlob(m))return m;if(utils$5.isArrayBufferView(m))return m.buffer;if(utils$5.isURLSearchParams(m))return setContentTypeIfUnset(L,"application/x-www-form-urlencoded;charset=utf-8"),m.toString();var j=utils$5.isObject(m),ee=L&&L["Content-Type"],re;if((re=utils$5.isFileList(m))||j&&ee==="multipart/form-data"){var le=this.env&&this.env.FormData;return toFormData(re?{"files[]":m}:m,le&&new le)}else if(j||ee==="application/json")return setContentTypeIfUnset(L,"application/json"),stringifySafely(m);return m}],transformResponse:[function(m){var L=this.transitional||defaults$4.transitional,j=L&&L.silentJSONParsing,ee=L&&L.forcedJSONParsing,re=!j&&this.responseType==="json";if(re||ee&&utils$5.isString(m)&&m.length)try{return JSON.parse(m)}catch(le){if(re)throw le.name==="SyntaxError"?AxiosError$1.from(le,AxiosError$1.ERR_BAD_RESPONSE,this,null,this.response):le}return m}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:require_null()},validateStatus:function(m){return m>=200&&m<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};utils$5.forEach(["delete","get","head"],function(m){defaults$4.headers[m]={}});utils$5.forEach(["post","put","patch"],function(m){defaults$4.headers[m]=utils$5.merge(DEFAULT_CONTENT_TYPE)});var defaults_1=defaults$4,utils$4=utils$b,defaults$3=defaults_1,transformData$1=function(m,L,j){var ee=this||defaults$3;return utils$4.forEach(j,function(le){m=le.call(ee,m,L)}),m},isCancel$1,hasRequiredIsCancel;function requireIsCancel(){return hasRequiredIsCancel||(hasRequiredIsCancel=1,isCancel$1=function(m){return!!(m&&m.__CANCEL__)}),isCancel$1}var utils$3=utils$b,transformData=transformData$1,isCancel=requireIsCancel(),defaults$2=defaults_1,CanceledError=requireCanceledError();function throwIfCancellationRequested($){if($.cancelToken&&$.cancelToken.throwIfRequested(),$.signal&&$.signal.aborted)throw new CanceledError}var dispatchRequest$1=function(m){throwIfCancellationRequested(m),m.headers=m.headers||{},m.data=transformData.call(m,m.data,m.headers,m.transformRequest),m.headers=utils$3.merge(m.headers.common||{},m.headers[m.method]||{},m.headers),utils$3.forEach(["delete","get","head","post","put","patch","common"],function(ee){delete m.headers[ee]});var L=m.adapter||defaults$2.adapter;return L(m).then(function(ee){return throwIfCancellationRequested(m),ee.data=transformData.call(m,ee.data,ee.headers,m.transformResponse),ee},function(ee){return isCancel(ee)||(throwIfCancellationRequested(m),ee&&ee.response&&(ee.response.data=transformData.call(m,ee.response.data,ee.response.headers,m.transformResponse))),Promise.reject(ee)})},utils$2=utils$b,mergeConfig$3=function(m,L){L=L||{};var j={};function ee(Me,Ce){return utils$2.isPlainObject(Me)&&utils$2.isPlainObject(Ce)?utils$2.merge(Me,Ce):utils$2.isPlainObject(Ce)?utils$2.merge({},Ce):utils$2.isArray(Ce)?Ce.slice():Ce}function re(Me){if(utils$2.isUndefined(L[Me])){if(!utils$2.isUndefined(m[Me]))return ee(void 0,m[Me])}else return ee(m[Me],L[Me])}function le(Me){if(!utils$2.isUndefined(L[Me]))return ee(void 0,L[Me])}function ve(Me){if(utils$2.isUndefined(L[Me])){if(!utils$2.isUndefined(m[Me]))return ee(void 0,m[Me])}else return ee(void 0,L[Me])}function ye(Me){if(Me in L)return ee(m[Me],L[Me]);if(Me in m)return ee(void 0,m[Me])}var Ee={url:le,method:le,data:le,baseURL:ve,transformRequest:ve,transformResponse:ve,paramsSerializer:ve,timeout:ve,timeoutMessage:ve,withCredentials:ve,adapter:ve,responseType:ve,xsrfCookieName:ve,xsrfHeaderName:ve,onUploadProgress:ve,onDownloadProgress:ve,decompress:ve,maxContentLength:ve,maxBodyLength:ve,beforeRedirect:ve,transport:ve,httpAgent:ve,httpsAgent:ve,cancelToken:ve,socketPath:ve,responseEncoding:ve,validateStatus:ye};return utils$2.forEach(Object.keys(m).concat(Object.keys(L)),function(Ce){var De=Ee[Ce]||re,Be=De(Ce);utils$2.isUndefined(Be)&&De!==ye||(j[Ce]=Be)}),j},data,hasRequiredData;function requireData(){return hasRequiredData||(hasRequiredData=1,data={version:"0.27.2"}),data}var VERSION$1=requireData().version,AxiosError=AxiosError_1,validators$1={};["object","boolean","number","function","string","symbol"].forEach(function($,m){validators$1[$]=function(j){return typeof j===$||"a"+(m<1?"n ":" ")+$}});var deprecatedWarnings={};validators$1.transitional=function(m,L,j){function ee(re,le){return"[Axios v"+VERSION$1+"] Transitional option '"+re+"'"+le+(j?". "+j:"")}return function(re,le,ve){if(m===!1)throw new AxiosError(ee(le," has been removed"+(L?" in "+L:"")),AxiosError.ERR_DEPRECATED);return L&&!deprecatedWarnings[le]&&(deprecatedWarnings[le]=!0,console.warn(ee(le," has been deprecated since v"+L+" and will be removed in the near future"))),m?m(re,le,ve):!0}};function assertOptions($,m,L){if(typeof $!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);for(var j=Object.keys($),ee=j.length;ee-- >0;){var re=j[ee],le=m[re];if(le){var ve=$[re],ye=ve===void 0||le(ve,re,$);if(ye!==!0)throw new AxiosError("option "+re+" must be "+ye,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(L!==!0)throw new AxiosError("Unknown option "+re,AxiosError.ERR_BAD_OPTION)}}var validator$1={assertOptions,validators:validators$1},utils$1=utils$b,buildURL=buildURL$1,InterceptorManager=InterceptorManager_1,dispatchRequest=dispatchRequest$1,mergeConfig$2=mergeConfig$3,buildFullPath=buildFullPath$1,validator=validator$1,validators=validator.validators;function Axios$1($){this.defaults=$,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}Axios$1.prototype.request=function(m,L){typeof m=="string"?(L=L||{},L.url=m):L=m||{},L=mergeConfig$2(this.defaults,L),L.method?L.method=L.method.toLowerCase():this.defaults.method?L.method=this.defaults.method.toLowerCase():L.method="get";var j=L.transitional;j!==void 0&&validator.assertOptions(j,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1);var ee=[],re=!0;this.interceptors.request.forEach(function(Be){typeof Be.runWhen=="function"&&Be.runWhen(L)===!1||(re=re&&Be.synchronous,ee.unshift(Be.fulfilled,Be.rejected))});var le=[];this.interceptors.response.forEach(function(Be){le.push(Be.fulfilled,Be.rejected)});var ve;if(!re){var ye=[dispatchRequest,void 0];for(Array.prototype.unshift.apply(ye,ee),ye=ye.concat(le),ve=Promise.resolve(L);ye.length;)ve=ve.then(ye.shift(),ye.shift());return ve}for(var Ee=L;ee.length;){var Me=ee.shift(),Ce=ee.shift();try{Ee=Me(Ee)}catch(De){Ce(De);break}}try{ve=dispatchRequest(Ee)}catch(De){return Promise.reject(De)}for(;le.length;)ve=ve.then(le.shift(),le.shift());return ve};Axios$1.prototype.getUri=function(m){m=mergeConfig$2(this.defaults,m);var L=buildFullPath(m.baseURL,m.url);return buildURL(L,m.params,m.paramsSerializer)};utils$1.forEach(["delete","get","head","options"],function(m){Axios$1.prototype[m]=function(L,j){return this.request(mergeConfig$2(j||{},{method:m,url:L,data:(j||{}).data}))}});utils$1.forEach(["post","put","patch"],function(m){function L(j){return function(re,le,ve){return this.request(mergeConfig$2(ve||{},{method:m,headers:j?{"Content-Type":"multipart/form-data"}:{},url:re,data:le}))}}Axios$1.prototype[m]=L(),Axios$1.prototype[m+"Form"]=L(!0)});var Axios_1=Axios$1,CancelToken_1,hasRequiredCancelToken;function requireCancelToken(){if(hasRequiredCancelToken)return CancelToken_1;hasRequiredCancelToken=1;var $=requireCanceledError();function m(L){if(typeof L!="function")throw new TypeError("executor must be a function.");var j;this.promise=new Promise(function(le){j=le});var ee=this;this.promise.then(function(re){if(ee._listeners){var le,ve=ee._listeners.length;for(le=0;le<ve;le++)ee._listeners[le](re);ee._listeners=null}}),this.promise.then=function(re){var le,ve=new Promise(function(ye){ee.subscribe(ye),le=ye}).then(re);return ve.cancel=function(){ee.unsubscribe(le)},ve},L(function(le){ee.reason||(ee.reason=new $(le),j(ee.reason))})}return m.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},m.prototype.subscribe=function(j){if(this.reason){j(this.reason);return}this._listeners?this._listeners.push(j):this._listeners=[j]},m.prototype.unsubscribe=function(j){if(this._listeners){var ee=this._listeners.indexOf(j);ee!==-1&&this._listeners.splice(ee,1)}},m.source=function(){var j,ee=new m(function(le){j=le});return{token:ee,cancel:j}},CancelToken_1=m,CancelToken_1}var spread,hasRequiredSpread;function requireSpread(){return hasRequiredSpread||(hasRequiredSpread=1,spread=function(m){return function(j){return m.apply(null,j)}}),spread}var isAxiosError,hasRequiredIsAxiosError;function requireIsAxiosError(){if(hasRequiredIsAxiosError)return isAxiosError;hasRequiredIsAxiosError=1;var $=utils$b;return isAxiosError=function(L){return $.isObject(L)&&L.isAxiosError===!0},isAxiosError}var utils=utils$b,bind$1=bind$3,Axios=Axios_1,mergeConfig$1=mergeConfig$3,defaults$1=defaults_1;function createInstance($){var m=new Axios($),L=bind$1(Axios.prototype.request,m);return utils.extend(L,Axios.prototype,m),utils.extend(L,m),L.create=function(ee){return createInstance(mergeConfig$1($,ee))},L}var axios$2=createInstance(defaults$1);axios$2.Axios=Axios;axios$2.CanceledError=requireCanceledError();axios$2.CancelToken=requireCancelToken();axios$2.isCancel=requireIsCancel();axios$2.VERSION=requireData().version;axios$2.toFormData=toFormData_1;axios$2.AxiosError=AxiosError_1;axios$2.Cancel=axios$2.CanceledError;axios$2.all=function(m){return Promise.all(m)};axios$2.spread=requireSpread();axios$2.isAxiosError=requireIsAxiosError();axios$3.exports=axios$2;axios$3.exports.default=axios$2;var axiosExports=axios$3.exports,axios=axiosExports;const axios$1=getDefaultExportFromCjs(axios),isVue2=!1;/*!
 * pinia v2.1.7
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */let activePinia;const setActivePinia=$=>activePinia=$,piniaSymbol=Symbol();function isPlainObject$1($){return $&&typeof $=="object"&&Object.prototype.toString.call($)==="[object Object]"&&typeof $.toJSON!="function"}var MutationType;(function($){$.direct="direct",$.patchObject="patch object",$.patchFunction="patch function"})(MutationType||(MutationType={}));function createPinia(){const $=effectScope(!0),m=$.run(()=>ref({}));let L=[],j=[];const ee=markRaw({install(re){setActivePinia(ee),ee._a=re,re.provide(piniaSymbol,ee),re.config.globalProperties.$pinia=ee,j.forEach(le=>L.push(le)),j=[]},use(re){return!this._a&&!isVue2?j.push(re):L.push(re),this},_p:L,_a:null,_e:$,_s:new Map,state:m});return ee}const noop$1=()=>{};function addSubscription($,m,L,j=noop$1){$.push(m);const ee=()=>{const re=$.indexOf(m);re>-1&&($.splice(re,1),j())};return!L&&getCurrentScope()&&onScopeDispose(ee),ee}function triggerSubscriptions($,...m){$.slice().forEach(L=>{L(...m)})}const fallbackRunWithContext=$=>$();function mergeReactiveObjects($,m){$ instanceof Map&&m instanceof Map&&m.forEach((L,j)=>$.set(j,L)),$ instanceof Set&&m instanceof Set&&m.forEach($.add,$);for(const L in m){if(!m.hasOwnProperty(L))continue;const j=m[L],ee=$[L];isPlainObject$1(ee)&&isPlainObject$1(j)&&$.hasOwnProperty(L)&&!isRef(j)&&!isReactive(j)?$[L]=mergeReactiveObjects(ee,j):$[L]=j}return $}const skipHydrateSymbol=Symbol();function shouldHydrate($){return!isPlainObject$1($)||!$.hasOwnProperty(skipHydrateSymbol)}const{assign}=Object;function isComputed($){return!!(isRef($)&&$.effect)}function createOptionsStore($,m,L,j){const{state:ee,actions:re,getters:le}=m,ve=L.state.value[$];let ye;function Ee(){ve||(L.state.value[$]=ee?ee():{});const Me=toRefs(L.state.value[$]);return assign(Me,re,Object.keys(le||{}).reduce((Ce,De)=>(Ce[De]=markRaw(computed(()=>{setActivePinia(L);const Be=L._s.get($);return le[De].call(Be,Be)})),Ce),{}))}return ye=createSetupStore($,Ee,m,L,j,!0),ye}function createSetupStore($,m,L={},j,ee,re){let le;const ve=assign({actions:{}},L),ye={deep:!0};let Ee,Me,Ce=[],De=[],Be;const ke=j.state.value[$];!re&&!ke&&(j.state.value[$]={}),ref({});let Fe;function Oe(Ze){let Ke;Ee=Me=!1,typeof Ze=="function"?(Ze(j.state.value[$]),Ke={type:MutationType.patchFunction,storeId:$,events:Be}):(mergeReactiveObjects(j.state.value[$],Ze),Ke={type:MutationType.patchObject,payload:Ze,storeId:$,events:Be});const rt=Fe=Symbol();nextTick().then(()=>{Fe===rt&&(Ee=!0)}),Me=!0,triggerSubscriptions(Ce,Ke,j.state.value[$])}const Ne=re?function(){const{state:Ke}=L,rt=Ke?Ke():{};this.$patch(ft=>{assign(ft,rt)})}:noop$1;function ze(){le.stop(),Ce=[],De=[],j._s.delete($)}function $e(Ze,Ke){return function(){setActivePinia(j);const rt=Array.from(arguments),ft=[],mt=[];function Et(st){ft.push(st)}function bt(st){mt.push(st)}triggerSubscriptions(De,{args:rt,name:Ze,store:We,after:Et,onError:bt});let Ct;try{Ct=Ke.apply(this&&this.$id===$?this:We,rt)}catch(st){throw triggerSubscriptions(mt,st),st}return Ct instanceof Promise?Ct.then(st=>(triggerSubscriptions(ft,st),st)).catch(st=>(triggerSubscriptions(mt,st),Promise.reject(st))):(triggerSubscriptions(ft,Ct),Ct)}}const He={_p:j,$id:$,$onAction:addSubscription.bind(null,De),$patch:Oe,$reset:Ne,$subscribe(Ze,Ke={}){const rt=addSubscription(Ce,Ze,Ke.detached,()=>ft()),ft=le.run(()=>watch(()=>j.state.value[$],mt=>{(Ke.flush==="sync"?Me:Ee)&&Ze({storeId:$,type:MutationType.direct,events:Be},mt)},assign({},ye,Ke)));return rt},$dispose:ze},We=reactive(He);j._s.set($,We);const Ye=(j._a&&j._a.runWithContext||fallbackRunWithContext)(()=>j._e.run(()=>(le=effectScope()).run(m)));for(const Ze in Ye){const Ke=Ye[Ze];if(isRef(Ke)&&!isComputed(Ke)||isReactive(Ke))re||(ke&&shouldHydrate(Ke)&&(isRef(Ke)?Ke.value=ke[Ze]:mergeReactiveObjects(Ke,ke[Ze])),j.state.value[$][Ze]=Ke);else if(typeof Ke=="function"){const rt=$e(Ze,Ke);Ye[Ze]=rt,ve.actions[Ze]=Ke}}return assign(We,Ye),assign(toRaw(We),Ye),Object.defineProperty(We,"$state",{get:()=>j.state.value[$],set:Ze=>{Oe(Ke=>{assign(Ke,Ze)})}}),j._p.forEach(Ze=>{assign(We,le.run(()=>Ze({store:We,app:j._a,pinia:j,options:ve})))}),ke&&re&&L.hydrate&&L.hydrate(We.$state,ke),Ee=!0,Me=!0,We}function defineStore($,m,L){let j,ee;const re=typeof m=="function";typeof $=="string"?(j=$,ee=re?L:m):(ee=$,j=$.id);function le(ve,ye){const Ee=hasInjectionContext();return ve=ve||(Ee?inject(piniaSymbol,null):null),ve&&setActivePinia(ve),ve=activePinia,ve._s.has(j)||(re?createSetupStore(j,m,ee,ve):createOptionsStore(j,ee,ve)),ve._s.get(j)}return le.$id=j,le}function storeToRefs($){{$=toRaw($);const m={};for(const L in $){const j=$[L];(isRef(j)||isReactive(j))&&(m[L]=toRef($,L))}return m}}const axiosInstance$1=axios$1.create({baseURL:"",headers:{"Content-Type":"application/json",Accept:"application/json"}});function getCacheSuffix(){const $=new Date;return $.getFullYear()+"-"+$.getMonth()+"-"+$.getDate()+"_"+$.getHours()+"h"}async function graphqlCall($,m,L,j={},ee=null,re=!1,le=!1,ve=1){var ye,Ee,Me;try{ee||(ee=axiosInstance$1);const Ce=re?$+"_"+getCacheSuffix():null;if(typeof localStorage<"u"&&Ce){console.log("graphqlCall / cacheName GET",Ce);const Fe=localStorage.getItem(Ce);if(Fe)return{data:JSON.parse(Fe)}}let De;try{L=L.replace(/\t/g," "),De=(await ee.post(m,{query:L,variables:j},{withCredentials:!1})).data}catch(Fe){throw((Ee=(ye=Fe.response)==null?void 0:ye.data)==null?void 0:Ee.errors)||((Me=Fe.response)==null?void 0:Me.data)||{message:`request failed : ${m} / ${JSON.stringify(j)}`}}const Be=getErrors(De);if(Be&&!le){const Fe=getMainError(Be,ve);return console.warn(`graphql.${$} | errors`,Fe),Promise.reject(Fe)}const ke=getData(De);return typeof localStorage<"u"&&Ce&&ke&&localStorage.setItem(Ce,JSON.stringify(ke)),{data:ke,errors:Be}}catch(Ce){return le?{data:null,errors:[Ce]}:(console.warn(`graphql.${$} | error`,Ce),Promise.reject(Ce))}}function getData($){return $!=null&&$.data?edgesToArray($.data):null}function edgesToArray($){if(typeof $=="object"&&$&&$.edges!==void 0)return $.edges.map(m=>edgesToArray(m.node));if(typeof $=="object"){for(const m in $)$[m]=edgesToArray($[m]);return $}else return $}function getErrors($){if(!$)return[];const m=getData($);return $.errors&&$.errors.length?$.errors:m&&m.userErrors&&m.userErrors.length>0?m.userErrors:m&&m.customerUserErrors&&m.customerUserErrors.length>0?m.customerUserErrors:m&&m.checkoutUserErrors&&m.checkoutUserErrors.length>0?m.checkoutUserErrors:null}function getMainError($,m=1){const L={};if($&&$.length>0){let j,ee;$.forEach(re=>{!re.field||!re.field[m]?(ee||(ee=[]),ee.push(re==null?void 0:re.message)):(j||(j={}),j[re.field[m]]=re==null?void 0:re.message)}),ee&&(L.message=ee.join(", ")),j&&(L.fields=j)}return L}const getBase$1=`query getBase ($state: PublicationState, $locale: I18NLocaleCode = "en") {
	i18NLocales {
		data {
			attributes {
				code
				name
			}
		}
	}
	home(publicationState: LIVE, locale: $locale) {
		data {
			type: __typename
			attributes {
				title
			}
		}
	}
	about(publicationState: LIVE, locale: $locale) {
		data {
			type: __typename
			attributes {
				slug
				title
			}
		}
	}
	contact(publicationState: LIVE, locale: $locale) {
		data {
			type: __typename
			attributes {
				slug
				title
			}
		}
	}
	term(publicationState: LIVE, locale: $locale) {
		data {
			type: __typename
			attributes {
				slug
				title
			}
		}
	}
	global(publicationState: $state, locale: $locale) {
		data {
			type: __typename
			attributes {
				menu {
					type: __typename
					baseline
					appCta {
						type: __typename
						label
						url
					}
					medias {
						type: __typename
						icon
						url
					}
				}
				footer {
					type: __typename
					title
					copyright
					baselineTop
					baselineBottom
					mediaKitLink {
						type: __typename
						label
						file {
							data {
								type: __typename
								attributes {
									url
								}
							}
						}
					}
					creditsLink {
						type: __typename
						label
						url
					}
				}
				valuePopup {
					type: __typename
					totalValueLegend
					title
					subtitle
					linkText
					linkCta {
						type: __typename
						label
						url
					}
					footerCta {
						type: __typename
						label
						url
					}
				}
				texts {
					type: __typename
					loading
					headphones
					clickHoldToListen
					clickToEnableSound
					clickToEnter
					clickToDiscover
					ctaSound
					ctaMenu
					ctaClose
				}
				metas {
					type: __typename
					title
					desc
					image {
						data {
							type: __typename
							attributes {
								url
							}
						}
					}
				}
			}
		}
	}
	homes_en: home(publicationState: $state, locale: "en") { data { attributes { locale } } }
	homes_fr: home(publicationState: $state, locale: "fr") { data { attributes { locale } } }
	homes_zh: home(publicationState: $state, locale: "zh") { data { attributes { locale } } }
	homes_ko: home(publicationState: $state, locale: "ko") { data { attributes { locale } } }
	homes_pt: home(publicationState: $state, locale: "pt") { data { attributes { locale } } }
	homes_ro: home(publicationState: $state, locale: "ro") { data { attributes { locale } } }
	homes_es: home(publicationState: $state, locale: "es") { data { attributes { locale } } }
}
`,getBase=async($,m,L,j=!1,ee=!1)=>await graphqlCall("base",m,getBase$1,{state:j?"PREVIEW":"LIVE",locale:L},$,!j&&ee,!1),getHomePage$1=`query getHome ($state: PublicationState, $locale: I18NLocaleCode = "en") {
  	page: home(publicationState: $state, locale: $locale) {
		data {
			type: __typename
			attributes {
				title
				scrollToDiscover
				metas {
					type: __typename
					title
					desc
					image {
						data {
							type: __typename
							attributes {
								url
							}
						}
					}
				}
				phases {
					type: __typename
					caption
					title
					legend
					desc
					descLinks {
						type: __typename
						label
						url
					}
					audio {
						data {
							type: __typename
							attributes {
								url
							}
						}
					}
					subtitles {
						data {
							type: __typename
							attributes {
								url
							}
						}
					}
				}
			}
		}
	}
}
`,getHomePage=async($,m,L,j=null,ee=!1)=>await graphqlCall("home",m,getHomePage$1,{state:j?"PREVIEW":"LIVE",locale:L},$,!j&&ee,!1),getAboutPage$1=`query getAbout ($state: PublicationState, $locale: I18NLocaleCode = "en") {
  	page: about(publicationState: $state, locale: $locale) {
		data {
			type: __typename
			attributes {
				slug
				title
				metas {
					type: __typename
					title
					desc
					image {
						data {
							type: __typename
							attributes {
								url
							}
						}
					}
				}
				story {
					type: __typename
					navTitle
					title
					subtitle
				}
				storyBlocks {
					... on ComponentAboutStoryFullText {
						type: __typename
						text
					}
					... on ComponentAboutStorySplitText {
						type: __typename
						textLeft
						textRight
					}
				}
				team {
					type: __typename
					navTitle
					title
					subtitle
					moreCta
				}
				partners {
					type: __typename
					navTitle
					title
					subtitle
				}
			}
		}
	}
	members(publicationState: $state, locale: $locale, pagination: { limit: 100 }, sort: "rank:asc") {
		data {
			type: __typename
			attributes {
				name
				role
				picture {
					data {
						type: __typename
						attributes {
							url
							formats
						}
					}
				}
				medias {
					type: __typename
					icon
					url
				}
			}
		}
	}
	partnersList: partners(publicationState: $state, pagination: { limit: 100 }, sort: "rank:asc") {
		data {
			type: __typename
			attributes {
				name
				logo {
					data {
						type: __typename
						attributes {
							url
							formats
						}
					}
				}
			}
		}
	}
}
`,getAboutPage=async($,m,L,j=null,ee=!1)=>await graphqlCall("about",m,getAboutPage$1,{state:j?"PREVIEW":"LIVE",locale:L},$,!j&&ee,!1),getContactPage$1=`query getContact($state: PublicationState, $locale: I18NLocaleCode) {
	page: contact(publicationState: $state, locale: $locale) {
		data {
			type: __typename
			attributes {
				title
				metas {
					type: __typename
					title
					desc
					image {
						data {
							type: __typename
							attributes {
								url
							}
						}
					}
				}
				slug
				hero {
					title
					text
					cta
					mediasCta
					medias {
						icon
						url
					}
				}
				form {
					subject {
						text
						placeholder
						options
					}
					firstname {
						text
						placeholder
					}
					lastname {
						text
						placeholder
					}
					email {
						text
						placeholder
					}
					message {
						text
						placeholder
					}
					submitCta
					messages {
						success
						error_global
						error_field_required
						error_field_format
						error_field_length
					}
				}
				push {
					title
					indication
					button {
						label
						url
					}
				}
			}
		}
	}
}
`,getContactPage=async($,m,L,j=null,ee=!1)=>await graphqlCall("contact",m,getContactPage$1,{state:j?"PREVIEW":"LIVE",locale:L},$,!j&&ee,!1),getTermsPage$1=`query getTerms ($state: PublicationState, $locale: I18NLocaleCode = "en") {
  	page: term(publicationState: $state, locale: $locale) {
		data {
			type: __typename
			attributes {
				slug
				title
				body
				metas {
					type: __typename
					title
					desc
					image {
						data {
							type: __typename
							attributes {
								url
							}
						}
					}
				}
			}
		}
	}
}
`,getTermsPage=async($,m,L,j=null,ee=!1)=>await graphqlCall("terms",m,getTermsPage$1,{state:j?"PREVIEW":"LIVE",locale:L},$,!j&&ee,!1),DEFAULT_CONFIG=[{mdTag:"**",htmlTag:"strong",applyByWords:!1},{mdTag:"_",htmlTag:"em",applyByWords:!1},{mdTag:"`",htmlTag:"code",applyByWords:!1},{mdTag:"-",htmlTag:"li",applyByWords:!1},{mdTag:{start:"<u>",end:"</u>"},htmlTag:"u",applyByWords:!1},{mdTag:{start:"######",end:`
`},htmlTag:"h6",applyByWords:!1},{mdTag:{start:"#####",end:`
`},htmlTag:"h5",applyByWords:!1},{mdTag:{start:"####",end:`
`},htmlTag:"h4",applyByWords:!1},{mdTag:{start:"###",end:`
`},htmlTag:"h3",applyByWords:!1},{mdTag:{start:"##",end:`
`},htmlTag:"h2",applyByWords:!1},{mdTag:{start:"#",end:`
`},htmlTag:"h1",applyByWords:!1}];function customMarkdownParse($,m=DEFAULT_CONFIG){if(!$)return"";let L=$;for(const{htmlTag:j,mdTag:ee,applyByWords:re}of m)j==="li"?L=listToHTMLTag(L):L=markdownToHTMLTag(L,ee,j,re);return L=L.replace("> <",">‎ <"),L}function listToHTMLTag($){let m=$;const L=markdownToHTMLTag(m,{start:"- ",end:`
`},"li",!1);return L!==m&&(m=L,m=m.replace(/<li>/,"<ul><li>"),m=m.replace(/<\/li>([^<])/,"</li></ul><br/>$1")),m}function markdownToHTMLTag($,m,L,j=!0){const ee=typeof m=="object"?m.start:m,re=typeof m=="object"?m.end:m,le=ee.split("").map(Ce=>"\\"+Ce).join(""),ve=re.split("").map(Ce=>"\\"+Ce).join("");let ye=$;ye=ye.replace(/<br\/>/g,`
`),ye=`
`+ye.replace(/^\n/,"").replace(/\n$/,"")+`
`;const Ee=new RegExp(`(${le}[\\s\\S]*?${ve})`,"g");return ye=ye.split(Ee).map(Ce=>{if(Ce.startsWith(ee)){const De=Ce.substring(ee.length,Ce.length-re.length);if(j){const Be=De.split(" ");return Be.map((ke,Fe)=>{const Oe=Fe===Be.length-1;return`<${L}>${ke+(Oe?"":" ")}</${L}>`}).join("")}else return`<${L}>${De}</${L}>`}else return Ce}).join(""),ye=ye.replace(/^\n/,"").replace(/\n$/,""),ye=ye.replace(/\n/g,"<br/>"),ye}function parseNavItem($,m="",L=null){const{uri:j,slug:ee,title:re,type:le}=$;let ve=j+(j!==""&&!j.match(/\/$/)?"/":""),ye=ee;le==="home"&&(ve="",ye="home");let Ee=m+ve;return L&&Ee==="/"+L+"/"&&(Ee="/"),{...$,id:ye,label:re,url:Ee,urlPrefix:m,uri:ve,type:le}}function parsePage($,m="",L=null){return{...parseNavItem($,m,L)}}function parseDatas($,m="",L={},j=0){if(!$&&j===0)return{};if($&&typeof $=="object")for(const ee in $)$[ee]=parseDatas($[ee],m,L,j+1);if($&&typeof $=="object"){if(typeof $.page<"u"){let ee=$.page;ee&&ee instanceof Array&&(ee=ee[0]),Object.keys($).forEach(re=>{re!=="page"&&(ee[re]=$[re])}),$=ee}if($&&typeof $.data<"u"&&Object.keys($).length===1&&($=$.data),$&&typeof $.attributes<"u"){for(const ee in $.attributes)$[ee]=$.attributes[ee];delete $.attributes}}return j===0&&($=parseEntities($,m,L,0)),$}function parseEntities($,m="",L={},j=0){if($&&typeof $=="object")for(const ee in $)$[ee]=parseEntities($[ee],m,L,j+1);else $&&typeof $=="string"&&($=$.replace(/\n$/g,""),$=$.replace(/\n/g,"<br/>"));return $&&typeof $=="object"&&typeof $.type<"u"&&($=parseEntity($,m,L)),$}function parseEntity($,m="",L={}){var j,ee,re,le,ve,ye;switch($.type){case"HomeEntity":case"AboutEntity":case"ContactEntity":case"TermEntity":$.blocks||($.blocks=[]);break}switch($.type){case"HomeEntity":$.type="home",$.uri="";break;case"AboutEntity":$.type="about",$.uri=$.slug;break;case"ContactEntity":$.type="contact",$.uri=$.slug;break;case"TermEntity":$.type="terms",$.uri=$.slug,$.body=customMarkdownParse($.body);break;case"ComponentAboutStorySplitText":$.type="split";break;case"ComponentAboutStoryFullText":$.type="full";break;case"UploadFileEntity":(j=$.url)!=null&&j.toLowerCase().includes(".glb")?$.type="glb":(ee=$.url)!=null&&ee.toLowerCase().includes(".mp4")?$.type="video":(re=$.url)!=null&&re.toLowerCase().includes(".srt")?$.type="srt":$.type="image",$.formats&&(L.desktop?$.url=((le=$.formats.medium)==null?void 0:le.url)||$.url:$.url=((ve=$.formats.small)==null?void 0:ve.url)||((ye=$.formats.medium)==null?void 0:ye.url)||$.url),$.url&&$.url.match(/^\/uploads/)&&($.url=$.url.replace("/uploads/","http://localhost:1337/uploads/"));break;case"ComponentGlobalMetas":$.type="metas";break}return $}const enDatas=()=>({pages:[]}),staticDatas={en:enDatas()},getAllProperties=$=>{const m=new Set;do for(const L of Reflect.ownKeys($))m.add([$,L]);while(($=Reflect.getPrototypeOf($))&&$!==Object.prototype);return m};function autoBind($,{include:m,exclude:L}={}){const j=ee=>{const re=le=>typeof le=="string"?ee===le:le.test(ee);return m?m.some(re):L?!L.some(re):!0};for(const[ee,re]of getAllProperties($.constructor.prototype)){if(re==="constructor"||!j(re))continue;const le=Reflect.getOwnPropertyDescriptor(ee,re);le&&typeof le.value=="function"&&($[re]=$[re].bind($))}return $}var __spreadArray=function($,m,L){if(L||arguments.length===2)for(var j=0,ee=m.length,re;j<ee;j++)(re||!(j in m))&&(re||(re=Array.prototype.slice.call(m,0,j)),re[j]=m[j]);return $.concat(re||Array.prototype.slice.call(m))},BrowserInfo=function(){function $(m,L,j){this.name=m,this.version=L,this.os=j,this.type="browser"}return $}(),NodeInfo=function(){function $(m){this.version=m,this.type="node",this.name="node",this.os=process.platform}return $}(),SearchBotDeviceInfo=function(){function $(m,L,j,ee){this.name=m,this.version=L,this.os=j,this.bot=ee,this.type="bot-device"}return $}(),BotInfo=function(){function $(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return $}(),ReactNativeInfo=function(){function $(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return $}(),SEARCHBOX_UA_REGEX=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,SEARCHBOT_OS_REGEX=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,REQUIRED_VERSION_PARTS=3,userAgentRules=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",SEARCHBOX_UA_REGEX]],operatingSystemRules=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function detect($){return $?parseUserAgent($):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new ReactNativeInfo:typeof navigator<"u"?parseUserAgent(navigator.userAgent):getNodeVersion()}function matchUserAgent($){return $!==""&&userAgentRules.reduce(function(m,L){var j=L[0],ee=L[1];if(m)return m;var re=ee.exec($);return!!re&&[j,re]},!1)}function parseUserAgent($){var m=matchUserAgent($);if(!m)return null;var L=m[0],j=m[1];if(L==="searchbot")return new BotInfo;var ee=j[1]&&j[1].split(".").join("_").split("_").slice(0,3);ee?ee.length<REQUIRED_VERSION_PARTS&&(ee=__spreadArray(__spreadArray([],ee,!0),createVersionParts(REQUIRED_VERSION_PARTS-ee.length),!0)):ee=[];var re=ee.join("."),le=detectOS($),ve=SEARCHBOT_OS_REGEX.exec($);return ve&&ve[1]?new SearchBotDeviceInfo(L,re,le,ve[1]):new BrowserInfo(L,re,le)}function detectOS($){for(var m=0,L=operatingSystemRules.length;m<L;m++){var j=operatingSystemRules[m],ee=j[0],re=j[1],le=re.exec($);if(le)return ee}return null}function getNodeVersion(){var $=typeof process<"u"&&process.version;return $?new NodeInfo(process.version.slice(1)):null}function createVersionParts($){for(var m=[],L=0;L<$;L++)m.push("0");return m}function e($,m,L,j){return new(L||(L=Promise))(function(ee,re){function le(Ee){try{ye(j.next(Ee))}catch(Me){re(Me)}}function ve(Ee){try{ye(j.throw(Ee))}catch(Me){re(Me)}}function ye(Ee){var Me;Ee.done?ee(Ee.value):(Me=Ee.value,Me instanceof L?Me:new L(function(Ce){Ce(Me)})).then(le,ve)}ye((j=j.apply($,m||[])).next())})}const t$4=["geforce 320m","geforce 8600","geforce 8600m gt","geforce 8800 gs","geforce 8800 gt","geforce 9400","geforce 9400m g","geforce 9400m","geforce 9600m gt","geforce 9600m","geforce fx go5200","geforce gt 120","geforce gt 130","geforce gt 330m","geforce gtx 285","google swiftshader","intel g41","intel g45","intel gma 4500mhd","intel gma x3100","intel hd 3000","intel q45","legacy","mali-2","mali-3","mali-4","quadro fx 1500","quadro fx 4","quadro fx 5","radeon hd 2400","radeon hd 2600","radeon hd 4670","radeon hd 4850","radeon hd 4870","radeon hd 5670","radeon hd 5750","radeon hd 6290","radeon hd 6300","radeon hd 6310","radeon hd 6320","radeon hd 6490m","radeon hd 6630m","radeon hd 6750m","radeon hd 6770m","radeon hd 6970m","sgx 543","sgx543"];function r$6($){return $=$.toLowerCase().replace(/.*angle ?\((.+)\)(?: on vulkan [0-9.]+)?$/i,"$1").replace(/\s(\d{1,2}gb|direct3d.+$)|\(r\)| \([^)]+\)$/g,"").replace(/(?:vulkan|opengl) \d+\.\d+(?:\.\d+)?(?: \((.*)\))?/,"$1")}const n$7=typeof window>"u",o$6=(()=>{if(n$7)return;const{userAgent:$,platform:m,maxTouchPoints:L}=window.navigator,j=/(iphone|ipod|ipad)/i.test($),ee=m==="iPad"||m==="MacIntel"&&L>0&&!window.MSStream;return{isIpad:ee,isMobile:/android/i.test($)||j||ee,isSafari12:/Version\/12.+Safari/.test($),isFirefox:/Firefox/.test($)}})();function a$1($,m,L){if(!L)return[m];const j=function(Ee){const Me=`
    precision highp float;
    attribute vec3 aPosition;
    varying float vvv;
    void main() {
      vvv = 0.31622776601683794;
      gl_Position = vec4(aPosition, 1.0);
    }
  `,Ce=`
    precision highp float;
    varying float vvv;
    void main() {
      vec4 enc = vec4(1.0, 255.0, 65025.0, 16581375.0) * vvv;
      enc = fract(enc);
      enc -= enc.yzww * vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 0.0);
      gl_FragColor = enc;
    }
  `,De=Ee.createShader(35633),Be=Ee.createShader(35632),ke=Ee.createProgram();if(!(Be&&De&&ke))return;Ee.shaderSource(De,Me),Ee.shaderSource(Be,Ce),Ee.compileShader(De),Ee.compileShader(Be),Ee.attachShader(ke,De),Ee.attachShader(ke,Be),Ee.linkProgram(ke),Ee.detachShader(ke,De),Ee.detachShader(ke,Be),Ee.deleteShader(De),Ee.deleteShader(Be),Ee.useProgram(ke);const Fe=Ee.createBuffer();Ee.bindBuffer(34962,Fe),Ee.bufferData(34962,new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),35044);const Oe=Ee.getAttribLocation(ke,"aPosition");Ee.vertexAttribPointer(Oe,3,5126,!1,0,0),Ee.enableVertexAttribArray(Oe),Ee.clearColor(1,1,1,1),Ee.clear(16384),Ee.viewport(0,0,1,1),Ee.drawArrays(4,0,3);const Ne=new Uint8Array(4);return Ee.readPixels(0,0,1,1,6408,5121,Ne),Ee.deleteProgram(ke),Ee.deleteBuffer(Fe),Ne.join("")}($),ee="801621810",re="8016218135",le="80162181161",ve=o$6!=null&&o$6.isIpad?[["a7",le,12],["a8",re,15],["a8x",re,15],["a9",re,15],["a9x",re,15],["a10",re,15],["a10x",re,15],["a12",ee,15],["a12x",ee,15],["a12z",ee,15],["a14",ee,15],["m1",ee,15]]:[["a7",le,12],["a8",re,12],["a9",re,15],["a10",re,15],["a11",ee,15],["a12",ee,15],["a13",ee,15],["a14",ee,15],["a15",ee,15],["a16",ee,15],["a17",ee,15]];let ye;return j==="80162181255"?ye=ve.filter(([,,Ee])=>Ee>=14):(ye=ve.filter(([,Ee])=>Ee===j),ye.length||(ye=ve)),ye.map(([Ee])=>`apple ${Ee} gpu`)}let i$7=class extends Error{constructor(m){super(m),Object.setPrototypeOf(this,new.target.prototype)}};const c$6=[],d=[];function l$1($,m){if($===m)return 0;const L=$;$.length>m.length&&($=m,m=L);let j=$.length,ee=m.length;for(;j>0&&$.charCodeAt(~-j)===m.charCodeAt(~-ee);)j--,ee--;let re,le=0;for(;le<j&&$.charCodeAt(le)===m.charCodeAt(le);)le++;if(j-=le,ee-=le,j===0)return ee;let ve,ye,Ee=0,Me=0,Ce=0;for(;Me<j;)d[Me]=$.charCodeAt(le+Me),c$6[Me]=++Me;for(;Ce<ee;)for(re=m.charCodeAt(le+Ce),ve=Ce++,Ee=Ce,Me=0;Me<j;Me++)ye=re===d[Me]?ve:ve+1,ve=c$6[Me],Ee=c$6[Me]=ve>Ee?ye>Ee?Ee+1:ye:ye>ve?ve+1:ye;return Ee}function s($){return $!=null}const f=({mobileTiers:$=[0,15,30,60],desktopTiers:m=[0,15,30,60],override:L={},glContext:j,failIfMajorPerformanceCaveat:ee=!1,benchmarksURL:re="https://unpkg.com/detect-gpu@5.0.38/dist/benchmarks"}={})=>e(void 0,void 0,void 0,function*(){const le={};if(n$7)return{tier:0,type:"SSR"};const{isIpad:ve=!!(o$6!=null&&o$6.isIpad),isMobile:ye=!!(o$6!=null&&o$6.isMobile),screenSize:Ee=window.screen,loadBenchmarks:Me=We=>e(void 0,void 0,void 0,function*(){const qe=yield fetch(`${re}/${We}`).then(Ye=>Ye.json());if(parseInt(qe.shift().split(".")[0],10)<4)throw new i$7("Detect GPU benchmark data is out of date. Please update to version 4x");return qe})}=L;let{renderer:Ce}=L;const De=(We,qe,Ye,Ze,Ke)=>({device:Ke,fps:Ze,gpu:Ye,isMobile:ye,tier:We,type:qe});let Be,ke="";if(Ce)Ce=r$6(Ce),Be=[Ce];else{const We=j||function(Ye,Ze=!1){const Ke={alpha:!1,antialias:!1,depth:!1,failIfMajorPerformanceCaveat:Ze,powerPreference:"high-performance",stencil:!1};Ye&&delete Ke.powerPreference;const rt=window.document.createElement("canvas"),ft=rt.getContext("webgl",Ke)||rt.getContext("experimental-webgl",Ke);return ft??void 0}(o$6==null?void 0:o$6.isSafari12,ee);if(!We)return De(0,"WEBGL_UNSUPPORTED");const qe=o$6!=null&&o$6.isFirefox?null:We.getExtension("WEBGL_debug_renderer_info");if(Ce=qe?We.getParameter(qe.UNMASKED_RENDERER_WEBGL):We.getParameter(We.RENDERER),!Ce)return De(1,"FALLBACK");ke=Ce,Ce=r$6(Ce),Be=function(Ye,Ze,Ke){return Ze==="apple gpu"?a$1(Ye,Ze,Ke):[Ze]}(We,Ce,ye)}const Fe=(yield Promise.all(Be.map(function(We){var qe;return e(this,void 0,void 0,function*(){const Ye=(tn=>{const zt=ye?["adreno","apple","mali-t","mali","nvidia","powervr","samsung"]:["intel","apple","amd","radeon","nvidia","geforce","adreno"];for(const Vt of zt)if(tn.includes(Vt))return Vt})(We);if(!Ye)return;const Ze=`${ye?"m":"d"}-${Ye}${ve?"-ipad":""}.json`,Ke=le[Ze]=(qe=le[Ze])!==null&&qe!==void 0?qe:Me(Ze);let rt;try{rt=yield Ke}catch(tn){if(tn instanceof i$7)throw tn;return}const ft=function(tn){var zt;const Vt=(tn=tn.replace(/\([^)]+\)/,"")).match(/\d+/)||tn.match(/(\W|^)([A-Za-z]{1,3})(\W|$)/g);return(zt=Vt==null?void 0:Vt.join("").replace(/\W|amd/g,""))!==null&&zt!==void 0?zt:""}(We);let mt=rt.filter(([,tn])=>tn===ft);mt.length||(mt=rt.filter(([tn])=>tn.includes(We)));const Et=mt.length;if(Et===0)return;const bt=We.split(/[.,()\[\]/\s]/g).sort().filter((tn,zt,Vt)=>zt===0||tn!==Vt[zt-1]).join(" ");let Ct,[st,,,,at]=Et>1?mt.map(tn=>[tn,l$1(bt,tn[2])]).sort(([,tn],[,zt])=>tn-zt)[0][0]:mt[0],Xe=Number.MAX_VALUE;const{devicePixelRatio:ht}=window,Bt=Ee.width*ht*Ee.height*ht;for(const tn of at){const[zt,Vt]=tn,Mt=zt*Vt,Tt=Math.abs(Bt-Mt);Tt<Xe&&(Xe=Tt,Ct=tn)}if(!Ct)return;const[,,Dt,Jt]=Ct;return[Xe,Dt,st,Jt]})}))).filter(s).sort(([We=Number.MAX_VALUE,qe],[Ye=Number.MAX_VALUE,Ze])=>We===Ye?qe-Ze:We-Ye);if(!Fe.length){const We=t$4.find(qe=>Ce.includes(qe));return We?De(0,"BLOCKLISTED",We):De(1,"FALLBACK",`${Ce} (${ke})`)}const[,Oe,Ne,ze]=Fe[0];if(Oe===-1)return De(0,"BLOCKLISTED",Ne,Oe,ze);const $e=ye?$:m;let He=0;for(let We=0;We<$e.length;We++)Oe>=$e[We]&&(He=We);return De(He,"BENCHMARK",Ne,Oe,ze)});function hasDebugUrlParam($){return new URLSearchParams(window.location.search).get($)!==null}function getDebugUrlParam($){return new URLSearchParams(window.location.search).get($)}function setDebugUrlParams($){const m=new URLSearchParams(window.location.search);for(const j in $){const ee=$[j];typeof ee=="boolean"?ee===!0&&!m.has(j)?m.append(j,""):ee===!1&&m.has(j)&&m.delete(j):m.set(j,ee)}let L="?"+m.toString();L=L.replace(/\=$/,""),L=L.replace(/\=\&/g,"&"),window.history.pushState({str:L},"",L)}const isServer=!1,urlParams=new URLSearchParams(window.location.search),isDevFromUrl=urlParams.get("debug")!==null&&!0,isProdFromUrl=urlParams.get("production")!==null&&!1,isDevelopment=isDevFromUrl&&!isProdFromUrl,isProduction=!isDevFromUrl,params={debug:hasDebugUrlParam("debug"),production:hasDebugUrlParam("production"),debugDom:isDevelopment&&hasDebugUrlParam("debugDom"),remindScrollY:isDevelopment&&hasDebugUrlParam("remindScrollY"),audio:isDevelopment&&hasDebugUrlParam("audio"),skipLoader:hasDebugUrlParam("skipLoader"),previewMode:hasDebugUrlParam("draftId"),overlay:isDevelopment&&hasDebugUrlParam("overlay")&&getDebugUrlParam("overlay"),stats:hasDebugUrlParam("stats"),nav:hasDebugUrlParam("nav"),menu:hasDebugUrlParam("menu"),debugTexture:{enabled:hasDebugUrlParam("debugTexture"),index:isNaN(parseInt(getDebugUrlParam("debugTexture")))?-1:parseInt(getDebugUrlParam("debugTexture"))}},GLOBAL={isDevelopment,isProduction,isServer,isClient:!isServer,params},DEVICES={MOBILE:"mobile",TABLET:"tablet",DESKTOP:"desktop"},TIER={BAD:0,LOW:1,GOOD:2,HIGH:3};let log$4=console.log.bind(console,"%c - DeviceHelper - ","background-color: lightyellow; color: black");GLOBAL.isProduction&&(log$4=()=>{});class DeviceHelperClass{constructor(){Rn(this,"browserName","");Rn(this,"browser",{ie:!1,edge:!1,firefox:!1,chrome:!1,safari:!1,samsung:!1});Rn(this,"deviceName","");Rn(this,"device",{desktop:!1,tablet:!1,mobile:!1});Rn(this,"osName","");Rn(this,"os",{mac:!1,windows:!1,linux:!1,ios:!1,android:!1});Rn(this,"detect",{touch:!1,imagebitmap:!1,webp:!1,avif:!1});Rn(this,"isTouch",!1);Rn(this,"gpu",{tierName:null,tier:0,type:null,isMobile:!1,fps:0,gpu:"",device:""});Rn(this,"_prefixedCache",{});Rn(this,"_gpuCkeckInitialized",!1);Rn(this,"_gpuCheckPromise",null);autoBind(this),this.detect=detect();const{name:m,version:L,os:j}=this.detect||{name:"",version:"",os:""};this.os={mac:j.match(/mac/i)!=null,windows:j.match(/windows/i)!=null,linux:j.match(/linux/i)!=null,ios:j.match(/ios/i)!=null,android:j.match(/android/i)!=null},this.osName="",Object.keys(this.os).forEach(re=>{this.os[re]&&(this.osName=re)}),this.browser={ie:m==="ie",edge:m.match(/edge/i)!=null,firefox:m==="firefox"||m==="fxios",chrome:m==="chrome"||m==="crios",safari:m==="safari"||m==="ios",samsung:m==="samsung"},this.browserName="",Object.keys(this.browser).forEach(re=>{this.browser[re]&&(this.browserName=re)}),this.browserVersion=parseFloat(L.split(".").splice(0,2).join("."));const ee=typeof window<"u"?Math.min(window.innerWidth,window.innerHeight):0;if(this.device={desktop:this.os.mac||this.os.windows||this.os.linux,tablet:(this.os.ios||this.os.android)&&ee>=768,mobile:(this.os.ios||this.os.android)&&ee<768},this.deviceName="",Object.keys(this.device).forEach(re=>{this.device[re]&&(this.deviceName=re)}),this.detect={touch:typeof document<"u"&&"ontouchstart"in document.documentElement,imagebitmap:this.browser.firefox?!1:typeof window<"u"&&"ImageBitmap"in window,webp:canUseWebP(),avif:!1},this.isTouch=this.detect.touch,log$4("global",{device:this.deviceName,os:this.osName,browser:this.browserName,browserVersion:this.browserVersion}),typeof window<"u"){this.resize=this.resize.bind(this),window.addEventListener("resize",this.resize);const re=document.querySelector("html");Object.keys(this.os).forEach(le=>re.classList.toggle(le,this.os[le])),Object.keys(this.browser).forEach(le=>{this.browser[le]&&(re.classList.toggle(le,!0),re.classList.toggle(le+"_"+this.browserVersion,!0))}),re.classList.add(this.detect.touch?"touch":"no-touch"),checkImageFormat("avif").then(()=>this.detect.avif=!0)}}resize(){this._prefixedCache={}}async checkGpu(m){this._gpuCkeckInitialized||(this._gpuCheckPromise||(this._gpuCheckPromise=new Promise((L,j)=>{this._checkGpuPromise(m).then(()=>{L()})})),await this._gpuCheckPromise,this._gpuCheckPromise=null,this._gpuCkeckInitialized=!0)}async _checkGpuPromise(m){if(typeof window>"u")return;const L=await f({glContext:m,desktopTiers:[0,30,50,60],mobileTiers:[0,30,50,60]});return this.gpu={tierName:Object.keys(TIER)[L.tier],tier:L.tier,type:L.type,isMobile:L.isMobile,fps:L.fps,gpu:L.gpu,device:L.device},this.browser.safari&&this.device.desktop&&this.gpu.gpu==="apple gpu (Apple GPU)"&&(this.gpu.tier=3),log$4("gpu",this.gpu),this.gpu}log(m=!1){const{deviceName:L,osName:j,browserName:ee,browserVersion:re,detect:le,gpu:ve}=this;console.log("DeviceHelper >>",L,j,ee,re,`
detect: `+JSON.stringify(le,null,"	"),ve.tier!=null?`
gpu:`+JSON.stringify(ve,null,"	"):""),this.detect.touch&&m&&this.alert()}alert(){const{deviceName:m,osName:L,browserName:j,browserVersion:ee,detect:re,gpu:le}=this;alert("DeviceHelper >> "+JSON.stringify({deviceName:m,osName:L,browserName:j,browserVersion:ee,detect:re,gpu:le.tier!=null?le:""},null,"	"))}}const DeviceHelper=new DeviceHelperClass;async function checkImageFormat($="webp",m=null,L=null){const j={webp:"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",webp_lossy:"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",webp_lossless:"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",webp_alpha:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==",webp_animation:"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA",avif:"AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="};return await new Promise((ee,re)=>{const le=new Image;le.onload=()=>{const ye=le.width>0&&le.height>0;ye?ee():re(),L&&L(ye)},le.onerror=()=>{re(),L&&L(!1)};const ve=m&&j[$+"_"+m]||j[$];le.src=`data:image/${$};base64,${ve}`})}function canUseWebP(){if(typeof document>"u")return!1;const $=document.createElement("canvas");return $.getContext&&$.getContext("2d")?$.toDataURL("image/webp").indexOf("data:image/webp")==0:!1}function deviceConfig($,m=!1,L=null,j=null){L==null&&(L=DeviceHelper.deviceName),Object.keys(DEVICES).map(Ee=>Ee.toLowerCase()).includes(L)||(L="default"),j==null&&(j=DeviceHelper.gpu.tierName.toLowerCase()),Object.keys(TIER).map(Ee=>Ee.toLowerCase()).includes(j)||(j="default");const le=$.default||{},ve=$[L]||{},ye=mergeConfig(le.default,ve[j],ve.default,le[j]);return m&&(console.log("--------------------- DeviceHelper / deviceConfig ---------------------"),console.log(L,j,JSON.stringify(ye)),Object.keys(DEVICES).forEach(Ee=>{Object.keys(TIER).forEach(Me=>{console.log("-----",Ee.toLowerCase(),Me.toLowerCase(),JSON.stringify(deviceConfig($,!1,Ee.toLowerCase(),Me.toLowerCase())))})}),console.log("--------------------- DeviceHelper / deviceConfig ---------------------")),ye}function mergeConfig($,m,L=null,j=null){if(Array.isArray($))return $.map((ee,re)=>mergeConfig($[re],m&&m[re],L&&L[re],j&&j[re]));if($!=null&&typeof $=="object"){if(!(le=>le.constructor===Object&&Object.getPrototypeOf(le)===Object.prototype)($))return null;const re={};for(const le in $)re[le]=mergeConfig($[le],m&&m[le],L&&L[le],j&&j[le]);return re}else return m??L??j??$}const DEFAULT_LANG="en",LANGS=["en","fr","zh","ko","pt","ro","es"],OFFLINE=!1,loadPromises={en:null,fr:null,zh:null,ko:null,pt:null,ro:null,es:null};function getDefaultBase(){return{loaded:!1,loading:!1,data:null}}let axiosInstance=null,log$3=console.log.bind(console,"%c - Datas Store - ","background-color: black; color: white");GLOBAL.isProduction&&(log$3=()=>{});const useDatasStore=defineStore("datas",{state:()=>({baseUrl:null,apiUrl:null,cacheEnabled:!1,lang:DEFAULT_LANG,langs:LANGS,langsUnpublished:[],urlPrefix:"",footer:null,menu:null,valuePopup:null,globalTexts:null,tvl:{total:0,items:[]},nav:[],pages:[],metas:null,base:{en:getDefaultBase(),fr:getDefaultBase(),zh:getDefaultBase(),ko:getDefaultBase(),pt:getDefaultBase(),ro:getDefaultBase(),es:getDefaultBase()}}),getters:{currentBase(){return this.lang&&this.base[this.lang]},getPageByType(){return $=>this.pages.find(m=>m.type===$)},getPageByPath(){return $=>this.pages.find(m=>isSameRoute(m.url,$))}},actions:{parseRoute(){var re,le,ve,ye;const $=typeof useRouter<"u"&&useRouter(),m=(le=(re=$==null?void 0:$.currentRoute)==null?void 0:re.value)==null?void 0:le.params;(ye=(ve=$==null?void 0:$.currentRoute)==null?void 0:ve.value)==null||ye.query;let L=m&&m.lang||DEFAULT_LANG;L.length>2&&(L=DEFAULT_LANG),LANGS.includes(L)||(L=DEFAULT_LANG),this.lang=L,this.urlPrefix=`/${L}/`;const j=useRuntimeConfig();this.baseUrl=j.public.BASE_URL||"",this.apiUrl=j.public.API_CMS_URL||"",this.cacheEnabled=!!j.public.CACHE_ENABLED;const ee=j.public.API_CMS_KEY||"";axiosInstance=axios$1.create({baseURL:this.apiUrl,headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`bearer ${ee}`}})},async getBase($=!1){this.parseRoute();const m=this.base[this.lang];if(!m.loaded&&!m.loading&&!OFFLINE||$){let le;log$3("getBase - loading",{lang:this.lang,preview:$});try{le=await getBase(axiosInstance,this.apiUrl,this.lang,!!$,this.cacheEnabled)}catch{return m}const ve=parseDatas(le==null?void 0:le.data,this.urlPrefix,DeviceHelper.device),{global:ye,i18NLocales:Ee}=ve;Object.keys(ve).forEach(Ce=>{if(Ce.match(/^homes/)){const De=Ce.replace("homes_","");!ve[Ce]&&this.langs.includes(De)&&(this.langs.splice(this.langs.indexOf(De),1),this.langsUnpublished.push(De))}});const Me=[ve.home,ve.about,ve.contact,ve.term].filter(Ce=>!!Ce);Me.forEach(Ce=>{Ce.loaded=!1}),m.data={global:ye,pages:Me,locales:Ee},m.loading=!1,m.loaded=!0}else if(m.loading){const le=await loadPromises[this.lang];if(!le.data||le.errors)return;m.data=le.data,m.loading=!1,m.loaded=!0}else return m;this.base[this.lang]={...m};const{global:L,pages:j}=m.data||{},ee=staticDatas[this.lang]||staticDatas.en,re=j==null?void 0:j.filter(le=>le.type!=="terms");return this.nav=(re||[]).map(le=>parseNavItem(le,this.urlPrefix,DEFAULT_LANG)),this.menu=(L==null?void 0:L.menu)||{},this.footer=(L==null?void 0:L.footer)||{},this.valuePopup=(L==null?void 0:L.valuePopup)||{},this.globalTexts=(L==null?void 0:L.texts)||{},this.metas=(L==null?void 0:L.metas)||(ee==null?void 0:ee.metas)||{},this.pages=j.map(le=>parsePage(le,this.urlPrefix,DEFAULT_LANG)),log$3("getBase - loaded",{lang:this.lang}),this.base[this.lang]},async getPage($,m=null,L=null,j=null,ee=null){this.parseRoute();let re=L?`${m}/${$}/${L}`:m?`${m}/${$}`:$||"";if(!await this.getBase()||$===null&&!m&&!L&&!j&&!ee)return;let ve;if(ve=this.pages.find(ye=>isSameRoute(ye.uri,re)),ve||(ve={}),j&&(ve={},ve.type=j,ve.loaded=!1,re=j),log$3("getPage - loading",{lang:this.lang,uri:re,loaded:ve&&ve.loaded,type:ve.type,draftId:ee}),!ve.loaded){ve.loading=!0;let ye;if(ve.type==="home"?ye=await getHomePage(axiosInstance,this.apiUrl,this.lang,j&&ee,this.cacheEnabled):ve.type==="about"?ye=await getAboutPage(axiosInstance,this.apiUrl,this.lang,j&&ee,this.cacheEnabled):ve.type==="contact"?ye=await getContactPage(axiosInstance,this.apiUrl,this.lang,j&&ee,this.cacheEnabled):ve.type==="terms"&&(ye=await getTermsPage(axiosInstance,this.apiUrl,this.lang,j&&ee,this.cacheEnabled)),!ye||!(ye!=null&&ye.data)){console.error(`getPage error : ${this.lang} | ${ve.type} | "${re}"`);return}try{ve=parseDatas(ye==null?void 0:ye.data,this.urlPrefix,DeviceHelper.device)}catch(Ee){console.error("parseDatas",Ee)}ve.loaded=!0,ve.loading=!1}if(ve){re=j?ve.uri:re;const ye=this.pages.findIndex(Ee=>isSameRoute(Ee.uri,re));ve=parsePage(ve,this.urlPrefix,DEFAULT_LANG),ye!==-1?this.pages[ye]=ve:this.pages.push(ve),log$3("getPage - loaded",ve)}return ve},async fetchTvl(){const m=useRuntimeConfig().public.TVL_API_URL||"";let L;try{L=await axios$1.get(m)}catch(j){console.error("fetchTvl error",j);return}this.tvl.items=L.data,this.tvl.total=0,this.tvl.items.forEach(j=>{this.tvl.total+=parseFloat(j.value)})}}});function isSameRoute($,m){return $==null||m==null?!1:$.replace(/^\//,"").replace(/\/$/,"")===m.replace(/^\//,"").replace(/\/$/,"")}function completeToShallowRoute($){const{fullPath:m,path:L,hash:j,name:ee,params:re,meta:{layout:le}}=$;return{fullPath:m,path:L,hash:j,name:ee,params:re,meta:{layout:le},href:$.href}}const useTransitionStore=defineStore("transition",{state:()=>({pageTransitions:new Map,layoutTransitions:new Map,cancelCallbacks:{page:null,layout:null},meta:{from:null,to:null},transitionState:"none"}),actions:{updateTimeline($,m,L="page",j="enter"){var re;const ee=this.getTransitions($,L)||{};(re=ee[`gsap_${j}`])==null||re.kill(),ee[`gsap_${j}`]=m},setTransitions($,m,L="page"){this.getTransitionMap(L).set($,m)},setCancelCallback($,m="page"){this.cancelCallbacks[m]=()=>{$(),this.cancelCallbacks[m]=null}},triggerCancelCallback($="page"){var m,L;(L=(m=this.cancelCallbacks)[$])==null||L.call(m)},resetMeta(){this.meta={from:null,to:null}},setMeta($){this.meta={...this.meta,...$}},setTransitionState($){this.transitionState=$}},getters:{getTransitionMap($){return(m="page")=>m==="page"?$.pageTransitions:$.layoutTransitions},getTransitions($){return(m,L="page")=>$.getTransitionMap(L).get(m)},getTransitionsTimeline($){return(m,L="page",j="enter")=>{const ee=$.getTransitionMap(L).get(m);return ee?ee[`gsap_${j}`]:null}},allPageTransitions($){return Array.from($.pageTransitions.values())},allLayoutTransitions($){return Array.from($.layoutTransitions.values())},isInTransition($){return $.transitionState!=="none"},pageTypeFrom($){var L,j;return(j=useDatasStore().getPageByPath((L=$.meta.from)==null?void 0:L.path))==null?void 0:j.type},pageTypeTo($){var L,j;return(j=useDatasStore().getPageByPath((L=$.meta.to)==null?void 0:L.path))==null?void 0:j.type}}});function executeTransition({type:$,direction:m,element:L,done:j,immediate:ee=!1}){var Oe;const re=useRoute$1(),le=useTransitionStore(),{from:ve,to:ye}=le.meta,Ee=((Oe=re.meta)==null?void 0:Oe.layout)||"default",Me=(m==="enter"?ye==null?void 0:ye.path:ve==null?void 0:ve.path)||(re==null?void 0:re.path)||"/",Ce=$==="layout"?Ee:Me,De=le.getTransitions(Ce,$);if(!De){console.warn(`No transitions found for ${$} ${Ce}`);return}const Be=gsapWithCSS.timeline();ee&&Be.timeScale(1e4),m==="leave"&&le.triggerCancelCallback($),le.updateTimeline(Ce,Be,$,m);let ke=0;const Fe=typeof De.mode=="function"?De.mode(le.meta):De.mode;if(m==="enter"){if(Fe==="out-in"){const Ne=ve==null?void 0:ve.path,ze=le.getTransitionsTimeline(Ne,$,"leave");ke=(ze==null?void 0:ze.duration())||0}Be.call(()=>{le.setTransitionState("in")},null,ke)}else le.setTransitionState("out");return typeof(De==null?void 0:De[m])=="function"&&Be.add(De[m](L),ke),Be.call(()=>{destroyTimeline(Be),j()}),le.setCancelCallback(function(){destroyTimeline(Be)},$),Be}function wrapDoneWithResetMeta($){const m=useTransitionStore();return()=>{m.setTransitionState("none"),$()}}function transitionsMeta({layout:$}){return{layout:$,layoutTransition:{name:$,mode:"out-in",css:!1,onEnter(m,L){useTransitionStore().setTransitionState("in"),executeTransition({type:"layout",direction:"enter",element:m,done:L})},onLeave(m,L){useRoute$1();const j=useTransitionStore();j.setTransitionState("out");const ee=gsapWithCSS.timeline();ee.add([executeTransition({type:"layout",direction:"leave",element:m,done:()=>{}}),executeTransition({type:"page",direction:"leave",element:m,done:()=>{}})],0),ee.call(L),j.setCancelCallback(function(){destroyTimeline(ee)},"layout"),j.setCancelCallback(function(){destroyTimeline(ee)},"page")}},pageTransition:{name:"",mode:"",css:!1,onEnter(m,L){const j=useTransitionStore();executeTransition({type:"page",direction:"enter",element:m,done:wrapDoneWithResetMeta(L)}),j.resetMeta()},onLeave(m,L){const ee=useTransitionStore().transitionState==="out";executeTransition({type:"page",direction:"leave",element:m,done:L,immediate:ee})}},middleware(m){const L=(m==null?void 0:m.path)||"/";m.meta.pageTransition.name=L}}}const __nuxt_page_meta$4={...transitionsMeta({layout:"default"})},__nuxt_page_meta$3={...transitionsMeta({layout:"default"})},__nuxt_page_meta$2={...transitionsMeta({layout:"default"})},__nuxt_page_meta$1={...transitionsMeta({layout:"default"})},__nuxt_page_meta={...transitionsMeta({layout:"default"})},_routes=[{name:(__nuxt_page_meta$4==null?void 0:__nuxt_page_meta$4.name)??"lang-section",path:(__nuxt_page_meta$4==null?void 0:__nuxt_page_meta$4.path)??"/:lang()/:section()",meta:__nuxt_page_meta$4||{},alias:(__nuxt_page_meta$4==null?void 0:__nuxt_page_meta$4.alias)||[],redirect:__nuxt_page_meta$4==null?void 0:__nuxt_page_meta$4.redirect,component:()=>__vitePreload(()=>import("./COlbQkY2.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url).then($=>$.default||$)},{name:(__nuxt_page_meta$3==null?void 0:__nuxt_page_meta$3.name)??"lang",path:(__nuxt_page_meta$3==null?void 0:__nuxt_page_meta$3.path)??"/:lang()",meta:__nuxt_page_meta$3||{},alias:(__nuxt_page_meta$3==null?void 0:__nuxt_page_meta$3.alias)||[],redirect:__nuxt_page_meta$3==null?void 0:__nuxt_page_meta$3.redirect,component:()=>__vitePreload(()=>import("./BG5YsrHl.js"),__vite__mapDeps([6,1,7,8,9]),import.meta.url).then($=>$.default||$)},{name:(__nuxt_page_meta$2==null?void 0:__nuxt_page_meta$2.name)??"lang-preview",path:(__nuxt_page_meta$2==null?void 0:__nuxt_page_meta$2.path)??"/:lang()/preview",meta:__nuxt_page_meta$2||{},alias:(__nuxt_page_meta$2==null?void 0:__nuxt_page_meta$2.alias)||[],redirect:__nuxt_page_meta$2==null?void 0:__nuxt_page_meta$2.redirect,component:()=>__vitePreload(()=>import("./CNVl2P_Y.js"),__vite__mapDeps([10,1,7,8,9,2,3,4,5]),import.meta.url).then($=>$.default||$)},{name:(__nuxt_page_meta$1==null?void 0:__nuxt_page_meta$1.name)??"404",path:(__nuxt_page_meta$1==null?void 0:__nuxt_page_meta$1.path)??"/404",meta:__nuxt_page_meta$1||{},alias:(__nuxt_page_meta$1==null?void 0:__nuxt_page_meta$1.alias)||[],redirect:__nuxt_page_meta$1==null?void 0:__nuxt_page_meta$1.redirect,component:()=>__vitePreload(()=>import("./D08MloYT.js"),__vite__mapDeps([11,1]),import.meta.url).then($=>$.default||$)},{name:(__nuxt_page_meta==null?void 0:__nuxt_page_meta.name)??"index",path:(__nuxt_page_meta==null?void 0:__nuxt_page_meta.path)??"/",meta:__nuxt_page_meta||{},alias:(__nuxt_page_meta==null?void 0:__nuxt_page_meta.alias)||[],redirect:__nuxt_page_meta==null?void 0:__nuxt_page_meta.redirect,component:()=>__vitePreload(()=>import("./3p6nlAwc.js"),__vite__mapDeps([12,1,7,8,9]),import.meta.url).then($=>$.default||$)}],_wrapIf=($,m,L)=>(m=m===!0?{}:m,{default:()=>{var j;return m?h($,m,L):(j=L.default)==null?void 0:j.call(L)}});function generateRouteKey($){const m=($==null?void 0:$.meta.key)??$.path.replace(/(:\w+)\([^)]+\)/g,"$1").replace(/(:\w+)[?+*]/g,"$1").replace(/:\w+/g,L=>{var j;return((j=$.params[L.slice(1)])==null?void 0:j.toString())||""});return typeof m=="function"?m($):m}function isChangingPage($,m){return $===m||m===START_LOCATION_NORMALIZED?!1:generateRouteKey($)!==generateRouteKey(m)?!0:!$.matched.every((j,ee)=>{var re,le;return j.components&&j.components.default===((le=(re=m.matched[ee])==null?void 0:re.components)==null?void 0:le.default)})}const routerOptions0={scrollBehavior($,m,L){var Ee;const j=useNuxtApp(),ee=((Ee=useRouter().options)==null?void 0:Ee.scrollBehaviorType)??"auto";let re=L||void 0;const le=typeof $.meta.scrollToTop=="function"?$.meta.scrollToTop($,m):$.meta.scrollToTop;if(!re&&m&&$&&le!==!1&&isChangingPage($,m)&&(re={left:0,top:0}),$.path===m.path)return m.hash&&!$.hash?{left:0,top:0}:$.hash?{el:$.hash,top:_getHashElementScrollMarginTop($.hash),behavior:ee}:!1;const ve=Me=>!!(Me.meta.pageTransition??appPageTransition),ye=ve(m)&&ve($)?"page:transition:finish":"page:finish";return new Promise(Me=>{j.hooks.hookOnce(ye,async()=>{await new Promise(Ce=>setTimeout(Ce,0)),$.hash&&(re={el:$.hash,top:_getHashElementScrollMarginTop($.hash),behavior:ee}),Me(re)})})}};function _getHashElementScrollMarginTop($){try{const m=document.querySelector($);if(m)return parseFloat(getComputedStyle(m).scrollMarginTop)}catch{}return 0}const configRouterOptions={hashMode:!1,scrollBehaviorType:"auto"},routerOptions={...configRouterOptions,...routerOptions0},validate=async $=>{var ye;let m,L;if(!((ye=$.meta)!=null&&ye.validate))return;const j=useNuxtApp(),ee=useRouter();if(([m,L]=executeAsync(()=>Promise.resolve($.meta.validate($))),m=await m,L(),m)===!0)return;const le=createError({statusCode:404,statusMessage:`Page Not Found: ${$.fullPath}`,data:{path:$.fullPath}}),ve=ee.beforeResolve(Ee=>{if(ve(),Ee===$){const Me=ee.afterEach(async()=>{Me(),await j.runWithContext(()=>showError(le)),window.history.pushState({},"",$.fullPath)});return!1}})},EXCEPTED_PARAMS=["remindScrollY"],debug_45params_45global=($,m)=>{if(!GLOBAL.isDevelopment)return;const L=Object.keys(m==null?void 0:m.query).filter(ee=>!EXCEPTED_PARAMS.includes(ee));if(Object.keys($==null?void 0:$.query)<L&&m){const ee={};return L.forEach(re=>{ee[re]=m.query[re]}),navigateTo({path:$.path,query:ee})}},page_45transition_45global=($,m)=>{const L=useTransitionStore();L.triggerCancelCallback("page"),$.meta.layout!==m.meta.layout&&L.triggerCancelCallback("layout"),L.setMeta({from:completeToShallowRoute(m),to:completeToShallowRoute($)})},routes_45global=($,m)=>{const L=useDatasStore();if($.path==="/"&&L.lang!==DEFAULT_LANG)return navigateTo({path:`/${L.lang}`})},manifest_45route_45rule=async $=>{let m,L;const j=([m,L]=executeAsync(()=>getRouteRules($.path)),m=await m,L(),m);if(j.redirect)return hasProtocol(j.redirect,{acceptRelative:!0})?(window.location.href=j.redirect,!1):j.redirect},globalMiddleware=[validate,debug_45params_45global,page_45transition_45global,routes_45global,manifest_45route_45rule],namedMiddleware={};function createCurrentLocation($,m,L){const{pathname:j,search:ee,hash:re}=m,le=$.indexOf("#");if(le>-1){const Ee=re.includes($.slice(le))?$.slice(le).length:1;let Me=re.slice(Ee);return Me[0]!=="/"&&(Me="/"+Me),withoutBase(Me,"")}const ve=withoutBase(j,$),ye=!L||isEqual$1(ve,L,{trailingSlash:!0})?ve:L;return ye+(ye.includes("?")?"":ee)+re}const plugin$1=defineNuxtPlugin({name:"nuxt:router",enforce:"pre",async setup($){var Oe,Ne;let m,L,j=useRuntimeConfig().app.baseURL;routerOptions.hashMode&&!j.includes("#")&&(j+="#");const ee=((Oe=routerOptions.history)==null?void 0:Oe.call(routerOptions,j))??(routerOptions.hashMode?createWebHashHistory(j):createWebHistory(j)),re=((Ne=routerOptions.routes)==null?void 0:Ne.call(routerOptions,_routes))??_routes;let le;const ve=createRouter({...routerOptions,scrollBehavior:(ze,$e,He)=>{if($e===START_LOCATION_NORMALIZED){le=He;return}if(routerOptions.scrollBehavior){if(ve.options.scrollBehavior=routerOptions.scrollBehavior,"scrollRestoration"in window.history){const We=ve.beforeEach(()=>{We(),window.history.scrollRestoration="manual"})}return routerOptions.scrollBehavior(ze,START_LOCATION_NORMALIZED,le||He)}},history:ee,routes:re});"scrollRestoration"in window.history&&(window.history.scrollRestoration="auto"),$.vueApp.use(ve);const ye=shallowRef(ve.currentRoute.value);ve.afterEach((ze,$e)=>{ye.value=$e}),Object.defineProperty($.vueApp.config.globalProperties,"previousRoute",{get:()=>ye.value});const Ee=createCurrentLocation(j,window.location,$.payload.path),Me=shallowRef(ve.currentRoute.value),Ce=()=>{Me.value=ve.currentRoute.value};$.hook("page:finish",Ce),ve.afterEach((ze,$e)=>{var He,We,qe,Ye;((We=(He=ze.matched[0])==null?void 0:He.components)==null?void 0:We.default)===((Ye=(qe=$e.matched[0])==null?void 0:qe.components)==null?void 0:Ye.default)&&Ce()});const De={};for(const ze in Me.value)Object.defineProperty(De,ze,{get:()=>Me.value[ze]});$._route=shallowReactive(De),$._middleware=$._middleware||{global:[],named:{}};try{[m,L]=executeAsync(()=>ve.isReady()),await m,L()}catch(ze){[m,L]=executeAsync(()=>$.runWithContext(()=>showError(ze))),await m,L()}const Be=Ee!==ve.currentRoute.value.fullPath?ve.resolve(Ee):ve.currentRoute.value;Ce();const ke=$.payload.state._layout;ve.beforeEach(async(ze,$e)=>{var He;await $.callHook("page:loading:start"),ze.meta=reactive(ze.meta),$.isHydrating&&ke&&!isReadonly(ze.meta.layout)&&(ze.meta.layout=ke),$._processingMiddleware=!0;{const We=new Set([...globalMiddleware,...$._middleware.global]);for(const qe of ze.matched){const Ye=qe.meta.middleware;if(Ye)for(const Ze of toArray$3(Ye))We.add(Ze)}{const qe=await $.runWithContext(()=>getRouteRules(ze.path));if(qe.appMiddleware)for(const Ye in qe.appMiddleware)qe.appMiddleware[Ye]?We.add(Ye):We.delete(Ye)}for(const qe of We){const Ye=typeof qe=="string"?$._middleware.named[qe]||await((He=namedMiddleware[qe])==null?void 0:He.call(namedMiddleware).then(Ke=>Ke.default||Ke)):qe;if(!Ye)throw new Error(`Unknown route middleware: '${qe}'.`);const Ze=await $.runWithContext(()=>Ye(ze,$e));if(!$.payload.serverRendered&&$.isHydrating&&(Ze===!1||Ze instanceof Error)){const Ke=Ze||createError$1({statusCode:404,statusMessage:`Page Not Found: ${Ee}`});return await $.runWithContext(()=>showError(Ke)),!1}if(Ze!==!0&&(Ze||Ze===!1))return Ze}}}),ve.onError(async()=>{delete $._processingMiddleware,await $.callHook("page:loading:end")});const Fe=useError();return ve.afterEach(async(ze,$e,He)=>{delete $._processingMiddleware,!$.isHydrating&&Fe.value&&await $.runWithContext(clearError),He&&await $.callHook("page:loading:end"),ze.matched.length===0&&await $.runWithContext(()=>showError(createError$1({statusCode:404,fatal:!1,statusMessage:`Page not found: ${ze.fullPath}`,data:{path:ze.fullPath}})))}),$.hooks.hookOnce("app:created",async()=>{try{"name"in Be&&(Be.name=void 0),await ve.replace({...Be,force:!0}),ve.options.scrollBehavior=routerOptions.scrollBehavior}catch(ze){await $.runWithContext(()=>showError(ze))}}),{provide:{router:ve}}}}),useStateKeyPrefix="$s";function useState$1(...$){const m=typeof $[$.length-1]=="string"?$.pop():void 0;typeof $[0]!="string"&&$.unshift(m);const[L,j]=$;if(!L||typeof L!="string")throw new TypeError("[nuxt] [useState] key must be a string: "+L);if(j!==void 0&&typeof j!="function")throw new Error("[nuxt] [useState] init must be a function: "+j);const ee=useStateKeyPrefix+L,re=useNuxtApp(),le=toRef(re.payload.state,ee);if(le.value===void 0&&j){const ve=j();if(isRef(ve))return re.payload.state[ee]=ve,ve;le.value=ve}return le}const requestIdleCallback=globalThis.requestIdleCallback||($=>{const m=Date.now(),L={didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-m))};return setTimeout(()=>{$(L)},1)}),cancelIdleCallback=globalThis.cancelIdleCallback||($=>{clearTimeout($)}),onNuxtReady=$=>{const m=useNuxtApp();m.isHydrating?m.hooks.hookOnce("app:suspense:resolve",()=>{requestIdleCallback($)}):requestIdleCallback($)};async function preloadRouteComponents($,m=useRouter()){const{path:L,matched:j}=m.resolve($);if(!j.length||(m._routePreloaded||(m._routePreloaded=new Set),m._routePreloaded.has(L)))return;const ee=m._preloadPromises=m._preloadPromises||[];if(ee.length>4)return Promise.all(ee).then(()=>preloadRouteComponents($,m));m._routePreloaded.add(L);const re=j.map(le=>{var ve;return(ve=le.components)==null?void 0:ve.default}).filter(le=>typeof le=="function");for(const le of re){const ve=Promise.resolve(le()).catch(()=>{}).finally(()=>ee.splice(ee.indexOf(ve)));ee.push(ve)}await Promise.all(ee)}function reloadNuxtApp($={}){const m=$.path||window.location.pathname;let L={};try{L=destr(sessionStorage.getItem("nuxt:reload")||"{}")}catch{}if($.force||(L==null?void 0:L.path)!==m||(L==null?void 0:L.expires)<Date.now()){try{sessionStorage.setItem("nuxt:reload",JSON.stringify({path:m,expires:Date.now()+($.ttl??1e4)}))}catch{}if($.persistState)try{sessionStorage.setItem("nuxt:reload:state",JSON.stringify({state:useNuxtApp().payload.state}))}catch{}window.location.pathname!==m?window.location.href=m:window.location.reload()}}const firstNonUndefined=(...$)=>$.find(m=>m!==void 0);function defineNuxtLink($){const m=$.componentName||"NuxtLink";function L(j,ee){if(!j||$.trailingSlash!=="append"&&$.trailingSlash!=="remove")return j;if(typeof j=="string")return applyTrailingSlashBehavior(j,$.trailingSlash);const re="path"in j&&j.path!==void 0?j.path:ee(j).path;return{...j,name:void 0,path:applyTrailingSlashBehavior(re,$.trailingSlash)}}return defineComponent({name:m,props:{to:{type:[String,Object],default:void 0,required:!1},href:{type:[String,Object],default:void 0,required:!1},target:{type:String,default:void 0,required:!1},rel:{type:String,default:void 0,required:!1},noRel:{type:Boolean,default:void 0,required:!1},prefetch:{type:Boolean,default:void 0,required:!1},noPrefetch:{type:Boolean,default:void 0,required:!1},activeClass:{type:String,default:void 0,required:!1},exactActiveClass:{type:String,default:void 0,required:!1},prefetchedClass:{type:String,default:void 0,required:!1},replace:{type:Boolean,default:void 0,required:!1},ariaCurrentValue:{type:String,default:void 0,required:!1},external:{type:Boolean,default:void 0,required:!1},custom:{type:Boolean,default:void 0,required:!1}},setup(j,{slots:ee}){const re=useRouter(),le=useRuntimeConfig(),ve=computed(()=>{const ke=j.to||j.href||"";return L(ke,re.resolve)}),ye=computed(()=>typeof ve.value=="string"&&hasProtocol(ve.value,{acceptRelative:!0})),Ee=computed(()=>j.target&&j.target!=="_self"),Me=computed(()=>j.external||Ee.value?!0:typeof ve.value=="object"?!1:ve.value===""||ye.value),Ce=ref(!1),De=ref(null),Be=ke=>{var Fe;De.value=j.custom?(Fe=ke==null?void 0:ke.$el)==null?void 0:Fe.nextElementSibling:ke==null?void 0:ke.$el};if(j.prefetch!==!1&&j.noPrefetch!==!0&&j.target!=="_blank"&&!isSlowConnection()){const Fe=useNuxtApp();let Oe,Ne=null;onMounted(()=>{const ze=useObserver();onNuxtReady(()=>{Oe=requestIdleCallback(()=>{var $e;($e=De==null?void 0:De.value)!=null&&$e.tagName&&(Ne=ze.observe(De.value,async()=>{Ne==null||Ne(),Ne=null;const He=typeof ve.value=="string"?ve.value:re.resolve(ve.value).fullPath;await Promise.all([Fe.hooks.callHook("link:prefetch",He).catch(()=>{}),!Me.value&&preloadRouteComponents(ve.value,re).catch(()=>{})]),Ce.value=!0}))})})}),onBeforeUnmount(()=>{Oe&&cancelIdleCallback(Oe),Ne==null||Ne(),Ne=null})}return()=>{var Ne,ze;if(!Me.value){const $e={ref:Be,to:ve.value,activeClass:j.activeClass||$.activeClass,exactActiveClass:j.exactActiveClass||$.exactActiveClass,replace:j.replace,ariaCurrentValue:j.ariaCurrentValue,custom:j.custom};return j.custom||(Ce.value&&($e.class=j.prefetchedClass||$.prefetchedClass),$e.rel=j.rel||void 0),h(resolveComponent("RouterLink"),$e,ee.default)}const ke=typeof ve.value=="object"?((Ne=re.resolve(ve.value))==null?void 0:Ne.href)??null:ve.value&&!j.external&&!ye.value?L(joinURL(le.app.baseURL,ve.value),re.resolve):ve.value||null,Fe=j.target||null,Oe=firstNonUndefined(j.noRel?"":j.rel,$.externalRelAttribute,ye.value||Ee.value?"noopener noreferrer":"")||null;if(j.custom){if(!ee.default)return null;const $e=()=>navigateTo(ke,{replace:j.replace,external:j.external});return ee.default({href:ke,navigate:$e,get route(){if(!ke)return;const He=parseURL$1(ke);return{path:He.pathname,fullPath:He.pathname,get query(){return parseQuery$1(He.search)},hash:He.hash,params:{},name:void 0,matched:[],redirectedFrom:void 0,meta:{},href:ke}},rel:Oe,target:Fe,isExternal:Me.value,isActive:!1,isExactActive:!1})}return h("a",{ref:De,href:ke,rel:Oe,target:Fe},(ze=ee.default)==null?void 0:ze.call(ee))}}})}const __nuxt_component_0$1=defineNuxtLink(nuxtLinkDefaults);function applyTrailingSlashBehavior($,m){const L=m==="append"?withTrailingSlash:withoutTrailingSlash;return hasProtocol($)&&!$.startsWith("http")?$:L($,!0)}function useObserver(){const $=useNuxtApp();if($._observer)return $._observer;let m=null;const L=new Map,j=(re,le)=>(m||(m=new IntersectionObserver(ve=>{for(const ye of ve){const Ee=L.get(ye.target);(ye.isIntersecting||ye.intersectionRatio>0)&&Ee&&Ee()}})),L.set(re,le),m.observe(re),()=>{L.delete(re),m.unobserve(re),L.size===0&&(m.disconnect(),m=null)});return $._observer={observe:j}}function isSlowConnection(){const $=navigator.connection;return!!($&&($.saveData||/2g/.test($.effectiveType)))}const _0_siteConfig_MwZUzHrRNP=defineNuxtPlugin({name:"nuxt-site-config:init",enforce:"pre",async setup($){const m=useState$1("site-config");let L={};return L=m.value||window.__NUXT_SITE_CONFIG__,{provide:{nuxtSiteConfig:L}}}}),payload_client_yVLowv6hDl=defineNuxtPlugin({name:"nuxt:payload",setup($){useRouter().beforeResolve(async(m,L)=>{if(m.path===L.path)return;const j=await loadPayload(m.path);j&&Object.assign($.static.data,j.data)}),onNuxtReady(()=>{var m;$.hooks.hook("link:prefetch",async L=>{parseURL$1(L).protocol||await loadPayload(L)}),((m=navigator.connection)==null?void 0:m.effectiveType)!=="slow-2g"&&setTimeout(getAppManifest,1e3)})}}),check_outdated_build_client_8vK7RkfGxZ=defineNuxtPlugin($=>{let m;async function L(){const j=await getAppManifest();m&&clearTimeout(m),m=setTimeout(L,1e3*60*60);try{const ee=await $fetch(buildAssetsURL("builds/latest.json")+`?${Date.now()}`);ee.id!==j.id&&$.hooks.callHook("app:manifest:update",ee)}catch{}}onNuxtReady(()=>{m=setTimeout(L,1e3*60*60)})}),plugin=defineNuxtPlugin($=>{const m=createPinia();return $.vueApp.use(m),setActivePinia(m),$.payload&&$.payload.pinia&&(m.state.value=$.payload.pinia),{provide:{pinia:m}}}),components_plugin_KR1HBZs4kY=defineNuxtPlugin({name:"nuxt:global-components"}),layouts={default:()=>__vitePreload(()=>import("./Dmtd47fJ.js"),__vite__mapDeps([13,8,3,4,14]),import.meta.url).then($=>$.default||$),proto:()=>__vitePreload(()=>import("./D9kQUH7P.js"),__vite__mapDeps([15,16]),import.meta.url).then($=>$.default||$)},prefetch_client_5tzzN0oIVL=defineNuxtPlugin({name:"nuxt:prefetch",setup($){const m=useRouter();$.hooks.hook("app:mounted",()=>{m.beforeEach(async L=>{var ee;const j=(ee=L==null?void 0:L.meta)==null?void 0:ee.layout;j&&typeof layouts[j]=="function"&&await layouts[j]()})}),$.hooks.hook("link:prefetch",L=>{if(hasProtocol(L))return;const j=m.resolve(L);if(!j)return;const ee=j.meta.layout;let re=toArray$3(j.meta.middleware);re=re.filter(le=>typeof le=="string");for(const le of re)typeof namedMiddleware[le]=="function"&&namedMiddleware[le]();ee&&typeof layouts[ee]=="function"&&layouts[ee]()})}}),chunk_reload_client_UciE0i6zes=defineNuxtPlugin({name:"nuxt:chunk-reload",setup($){const m=useRouter(),L=useRuntimeConfig(),j=new Set;m.beforeEach(()=>{j.clear()}),$.hook("app:chunkError",({error:re})=>{j.add(re)});function ee(re){const ve="href"in re&&re.href[0]==="#"?L.app.baseURL+re.href:joinURL(L.app.baseURL,re.fullPath);reloadNuxtApp({path:ve,persistState:!0})}$.hook("app:manifest:update",()=>{m.beforeResolve(ee)}),m.onError((re,le)=>{j.has(re)&&ee(le)})}});var isBrowser=function(){return typeof document<"u"&&typeof window<"u"},loadScript=function(m,L){return new Promise(function(j,ee){var re=document.head||document.getElementsByTagName("head")[0],le=document.createElement("script");if(le.async=!0,le.src=m,le.charset="utf-8",L){var ve=document.createElement("link");ve.href=L,ve.rel="preconnect",re.appendChild(ve)}re.appendChild(le),le.onload=j,le.onerror=ee})},merge=function(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Object.keys(L).forEach(function(j){m[j]=L[j]})},state=reactive({property:null,isEnabled:!0,disableScriptLoader:!1,useDebugger:!1,globalObjectName:"gtag",dataLayerName:"dataLayer",resourceURL:"https://www.googletagmanager.com/gtag/js",preconnectOrigin:"https://www.googletagmanager.com",customResource:null,appName:null,appId:null,appVersion:null}),useState=function(){return toRefs(state)},defaultProperty=computed(function(){var $=useState(),m=$.property;if(m.value)return Array.isArray(m.value)?m.value.find(function(L){return L.default===!0})||m.value[0]:m.value}),hasId=computed(function(){var $=useState(),m=$.property;return!!(m.value&&m.value.id!==null)}),allProperties=computed(function(){var $=useState(),m=$.property;return Array.isArray(m.value)?m.value:[m.value]}),isTracking=computed(function(){var $=useState(),m=$.isEnabled,L=defaultProperty.value;return!!(L&&L.id&&m.value)}),query$1=function(){var $;if(isBrowser()){for(var m=useState(),L=m.globalObjectName,j=m.useDebugger,ee=arguments.length,re=new Array(ee),le=0;le<ee;le++)re[le]=arguments[le];j.value&&console.warn("[vue-gtag] Debugger:",re),($=window)[L.value].apply($,re)}},config$1=function(){for(var $=arguments.length,m=new Array($),L=0;L<$;L++)m[L]=arguments[L];allProperties.value.forEach(function(j){query$1.apply(void 0,["config",j.id].concat(m))})},customMap=function($){config$1({custom_map:$})},disable=function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;isBrowser()&&allProperties.value.forEach(function(m){window["ga-disable-".concat(m.id)]=$})},event=function($){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},L=Object.assign({},m);!L.send_to&&allProperties.value.length>1&&(L.send_to=allProperties.value.map(function(j){return j.id})),query$1("event",$,L)},exception=function(){for(var $=arguments.length,m=new Array($),L=0;L<$;L++)m[L]=arguments[L];event.apply(void 0,["exception"].concat(m))},linker=function(){for(var $=arguments.length,m=new Array($),L=0;L<$;L++)m[L]=arguments[L];config$1.apply(void 0,["linker"].concat(m))},pageview=function($){var m={};typeof $=="string"?m={page_path:$,page_location:window.location.href}:m=$,typeof m.send_page_view>"u"&&(m.send_page_view=!0),event("page_view",m)},purchase=function(){for(var $=arguments.length,m=new Array($),L=0;L<$;L++)m[L]=arguments[L];event.apply(void 0,["purchase"].concat(m))},refund=function(){for(var $=arguments.length,m=new Array($),L=0;L<$;L++)m[L]=arguments[L];event.apply(void 0,["refund"].concat(m))},screenview=function(){for(var $=useState(),m=$.appName,L=$.appId,j=$.appVersion,ee=arguments.length,re=new Array(ee),le=0;le<ee;le++)re[le]=arguments[le];var ve=re[0],ye={};typeof ve=="string"?ye={screen_name:ve}:ye=ve,ye.app_name==null&&m.value!=null&&(ye.app_name=m.value),ye.app_id==null&&L.value!=null&&(ye.app_id=L.value),ye.app_version==null&&j.value!=null&&(ye.app_version=j.value),event("screen_view",ye)},set=function(){for(var $=arguments.length,m=new Array($),L=0;L<$;L++)m[L]=arguments[L];query$1.apply(void 0,["set"].concat(m))},time=function(){for(var $=arguments.length,m=new Array($),L=0;L<$;L++)m[L]=arguments[L];event.apply(void 0,["timing_complete"].concat(m))},api=Object.freeze({__proto__:null,config:config$1,customMap,disable,event,exception,linker,pageview,purchase,query:query$1,refund,screenview,set,time}),isReady=ref(!1),isBootstrapped=ref(!1),bootstrap=function(){var m=useState(),L=m.disableScriptLoader,j=m.preconnectOrigin,ee=m.resourceURL,re=m.dataLayerName;if(!(!isBrowser()||!hasId.value||isBootstrapped.value)){if(isBootstrapped.value=!0,allProperties.value.forEach(function(ve){var ye=Object.assign({send_page_view:!1},ve.params);query$1("config",ve.id,ye)}),L.value){isReady.value=!0;return}var le="".concat(ee.value,"?id=").concat(defaultProperty.value.id,"&l=").concat(re.value);loadScript(le,j.value).then(function(){isReady.value=!0})}},useBootstrapWatcher=function(){watch(function(){return isTracking.value},function(m){return m&&bootstrap()},{immediate:!0})},registerGlobalObject=function(){if(isBrowser()){var $=useState(),m=$.globalObjectName,L=$.dataLayerName;window[m.value]==null&&(window[L.value]=window[L.value]||[],window[m.value]=function(){window[L.value].push(arguments)}),window[m.value]("js",new Date)}},useGtag=function(){return api};reactive({template:null,useScreenview:!1,skipSamePath:!0});var index={install:function(m){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};merge(state,L),registerGlobalObject(),useBootstrapWatcher(),m.config.globalProperties.$gtag=api}};const gtag_RbOvmu12fv=defineNuxtPlugin($=>{const m=useRuntimeConfig();useRouter(),$.vueApp.use(index,{isEnabled:m.public.GOOGLE_G4_ID&&m.public.GOOGLE_G4_ID!="",property:{id:m.public.GOOGLE_G4_ID,params:{send_page_view:!1}}})});class Panel{constructor(m,L,j){this.name=m,this.fg=L,this.bg=j,this.PR=Math.round(window.devicePixelRatio||1),this.WIDTH=90*this.PR,this.HEIGHT=48*this.PR,this.TEXT_X=3*this.PR,this.TEXT_Y=2*this.PR,this.GRAPH_X=3*this.PR,this.GRAPH_Y=15*this.PR,this.GRAPH_WIDTH=84*this.PR,this.GRAPH_HEIGHT=30*this.PR,this.canvas=document.createElement("canvas"),this.canvas.width=90*this.PR,this.canvas.height=48*this.PR,this.canvas.style.width="90px",this.canvas.style.position="absolute",this.canvas.style.height="48px",this.canvas.style.cssText="width:90px;height:48px",this.context=this.canvas.getContext("2d"),this.context&&(this.context.font="bold "+9*this.PR+"px Helvetica,Arial,sans-serif",this.context.textBaseline="top",this.context.fillStyle=this.bg,this.context.fillRect(0,0,this.WIDTH,this.HEIGHT),this.context.fillStyle=this.fg,this.context.fillText(this.name,this.TEXT_X,this.TEXT_Y),this.context.fillRect(this.GRAPH_X,this.GRAPH_Y,this.GRAPH_WIDTH,this.GRAPH_HEIGHT),this.context.fillStyle=this.bg,this.context.globalAlpha=.9,this.context.fillRect(this.GRAPH_X,this.GRAPH_Y,this.GRAPH_WIDTH,this.GRAPH_HEIGHT))}update(m,L,j,ee,re=0){let le=1/0,ve=0;this.context&&(le=Math.min(le,m),ve=Math.max(j,m),ee=Math.max(ee,L),this.context.fillStyle=this.bg,this.context.globalAlpha=1,this.context.fillRect(0,0,this.WIDTH,this.GRAPH_Y),this.context.fillStyle=this.fg,this.context.fillText(m.toFixed(re)+" "+this.name+" ("+le.toFixed(re)+"-"+parseFloat(ve.toFixed(re))+")",this.TEXT_X,this.TEXT_Y),this.context.drawImage(this.canvas,this.GRAPH_X+this.PR,this.GRAPH_Y,this.GRAPH_WIDTH-this.PR,this.GRAPH_HEIGHT,this.GRAPH_X,this.GRAPH_Y,this.GRAPH_WIDTH-this.PR,this.GRAPH_HEIGHT),this.context.fillRect(this.GRAPH_X+this.GRAPH_WIDTH-this.PR,this.GRAPH_Y,this.PR,this.GRAPH_HEIGHT),this.context.fillStyle=this.bg,this.context.globalAlpha=.9,this.context.fillRect(this.GRAPH_X+this.GRAPH_WIDTH-this.PR,this.GRAPH_Y,this.PR,(1-L/ee)*this.GRAPH_HEIGHT))}}const _Stats=class Hs{constructor({logsPerSecond:m=20,samplesLog:L=100,samplesGraph:j=10,precision:ee=2,minimal:re=!1,horizontal:le=!0,mode:ve=0}={}){this.mode=ve,this.horizontal=le,this.container=document.createElement("div"),this.container.style.cssText="position:fixed;top:0;left:0;opacity:0.9;z-index:10000;",re&&(this.container.style.cssText+="cursor:pointer"),this.gl=null,this.query=null,this.minimal=re,this.beginTime=(performance||Date).now(),this.prevTime=this.beginTime,this.prevCpuTime=this.beginTime,this.frames=0,this.averageCpu={logs:[],graph:[]},this.averageGpu={logs:[],graph:[]},this.queryCreated=!1,this.fpsPanel=this.addPanel(new Hs.Panel("FPS","#0ff","#002"),0),this.msPanel=this.addPanel(new Hs.Panel("CPU","#0f0","#020"),1),this.gpuPanel=null,this.samplesLog=L,this.samplesGraph=j,this.precision=ee,this.logsPerSecond=m,this.minimal?(this.container.addEventListener("click",ye=>{ye.preventDefault(),this.showPanel(++this.mode%this.container.children.length)},!1),this.mode=ve,this.showPanel(this.mode)):window.addEventListener("resize",()=>{this.resizePanel(this.fpsPanel,0),this.resizePanel(this.msPanel,1),this.gpuPanel&&this.resizePanel(this.gpuPanel,2)})}resizePanel(m,L){m.canvas.style.position="absolute",this.minimal?m.canvas.style.display="none":(m.canvas.style.display="block",this.horizontal?(m.canvas.style.top="0px",m.canvas.style.left=L*m.WIDTH/m.PR+"px"):(m.canvas.style.left="0px",m.canvas.style.top=L*m.HEIGHT/m.PR+"px"))}addPanel(m,L){return m.canvas&&(this.container.appendChild(m.canvas),this.resizePanel(m,L)),m}showPanel(m){for(let L=0;L<this.container.children.length;L++){const j=this.container.children[L];j.style.display=L===m?"block":"none"}this.mode=m}init(m){if(!m){console.error('Stats: The "canvas" parameter is undefined.');return}if(m instanceof WebGL2RenderingContext)this.gl=m;else if(m instanceof HTMLCanvasElement||m instanceof OffscreenCanvas){if(this.gl=m.getContext("webgl2"),!this.gl){console.error("Stats: Unable to obtain WebGL2 context.");return}}else{console.error("Stats: Invalid input type. Expected WebGL2RenderingContext, HTMLCanvasElement, or OffscreenCanvas.");return}this.ext=this.gl.getExtension("EXT_disjoint_timer_query_webgl2"),this.ext&&(this.gpuPanel=this.addPanel(new Hs.Panel("GPU","#ff0","#220"),2))}begin(){if(this.beginProfiling("cpu-started"),!(!this.gl||!this.ext)){if(this.query){const m=this.gl.getQueryParameter(this.query,this.gl.QUERY_RESULT_AVAILABLE);if(this.disjoint=this.gl.getParameter(this.ext.GPU_DISJOINT_EXT),m&&!this.disjoint){this.ns=this.gl.getQueryParameter(this.query,this.gl.QUERY_RESULT);const L=this.ns*1e-6;(m||this.disjoint)&&(this.gl.deleteQuery(this.query),this.query=null),m&&this.addToAverage(L,this.averageGpu)}}this.query||(this.queryCreated=!0,this.query=this.gl.createQuery(),this.query&&this.gl.beginQuery(this.ext.TIME_ELAPSED_EXT,this.query))}}end(){this.beginTime=this.endInternal(),this.endProfiling("cpu-started","cpu-finished","cpu-duration",this.averageCpu),!(!this.gl||!this.ext)&&this.queryCreated&&this.gl.getQuery(this.ext.TIME_ELAPSED_EXT,this.gl.CURRENT_QUERY)&&this.gl.endQuery(this.ext.TIME_ELAPSED_EXT)}endInternal(){this.frames++;const m=(performance||Date).now();if(m>=this.prevCpuTime+1e3/this.logsPerSecond&&(this.updatePanel(this.msPanel,this.averageCpu),this.updatePanel(this.gpuPanel,this.averageGpu),this.prevCpuTime=m),m>=this.prevTime+1e3){const L=this.frames*1e3/(m-this.prevTime);this.fpsPanel.update(L,L,100,100,0),this.prevTime=m,this.frames=0}return m}addToAverage(m,L){L.logs.push(m),L.logs.length>this.samplesLog&&L.logs.shift(),L.graph.push(m),L.graph.length>this.samplesGraph&&L.graph.shift()}beginProfiling(m){window.performance&&window.performance.mark(m)}endProfiling(m,L,j,ee){if(window.performance&&L){window.performance.mark(L);const re=performance.measure(j,m,L);this.addToAverage(re.duration,ee)}}updatePanel(m,L){if(L.logs.length>0){let j=0,ee=.01;for(let ve=0;ve<L.logs.length;ve++)j+=L.logs[ve],L.logs[ve]>ee&&(ee=L.logs[ve]);let re=0,le=.01;for(let ve=0;ve<L.graph.length;ve++)re+=L.graph[ve],L.graph[ve]>le&&(le=L.graph[ve]);m&&m.update(j/Math.min(L.logs.length,this.samplesLog),re/Math.min(L.graph.length,this.samplesGraph),ee,le,this.precision)}}};_Stats.Panel=Panel;let Stats=_Stats;var stats_min={exports:{}};(function($,m){(function(L,j){$.exports=j()})(commonjsGlobal$1,function(){var L=function(){function j(Be){return le.appendChild(Be.dom),Be}function ee(Be){for(var ke=0;ke<le.children.length;ke++)le.children[ke].style.display=ke===Be?"block":"none";re=Be}var re=0,le=document.createElement("div");le.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",le.addEventListener("click",function(Be){Be.preventDefault(),ee(++re%le.children.length)},!1);var ve=(performance||Date).now(),ye=ve,Ee=0,Me=j(new L.Panel("FPS","#0ff","#002")),Ce=j(new L.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var De=j(new L.Panel("MB","#f08","#201"));return ee(0),{REVISION:16,dom:le,addPanel:j,showPanel:ee,begin:function(){ve=(performance||Date).now()},end:function(){Ee++;var Be=(performance||Date).now();if(Ce.update(Be-ve,200),Be>ye+1e3&&(Me.update(1e3*Ee/(Be-ye),100),ye=Be,Ee=0,De)){var ke=performance.memory;De.update(ke.usedJSHeapSize/1048576,ke.jsHeapSizeLimit/1048576)}return Be},update:function(){ve=this.end()},domElement:le,setMode:ee}};return L.Panel=function(j,ee,re){var le=1/0,ve=0,ye=Math.round,Ee=ye(window.devicePixelRatio||1),Me=80*Ee,Ce=48*Ee,De=3*Ee,Be=2*Ee,ke=3*Ee,Fe=15*Ee,Oe=74*Ee,Ne=30*Ee,ze=document.createElement("canvas");ze.width=Me,ze.height=Ce,ze.style.cssText="width:80px;height:48px";var $e=ze.getContext("2d");return $e.font="bold "+9*Ee+"px Helvetica,Arial,sans-serif",$e.textBaseline="top",$e.fillStyle=re,$e.fillRect(0,0,Me,Ce),$e.fillStyle=ee,$e.fillText(j,De,Be),$e.fillRect(ke,Fe,Oe,Ne),$e.fillStyle=re,$e.globalAlpha=.9,$e.fillRect(ke,Fe,Oe,Ne),{dom:ze,update:function(He,We){le=Math.min(le,He),ve=Math.max(ve,He),$e.fillStyle=re,$e.globalAlpha=1,$e.fillRect(0,0,Me,Fe),$e.fillStyle=ee,$e.fillText(ye(He)+" "+j+" ("+ye(le)+"-"+ye(ve)+")",De,Be),$e.drawImage(ze,ke+Ee,Fe,Oe-Ee,Ne,ke,Fe,Oe-Ee,Ne),$e.fillRect(ke+Oe-Ee,Fe,Ee,Ne),$e.fillStyle=re,$e.globalAlpha=.9,$e.fillRect(ke+Oe-Ee,Fe,Ee,ye((1-He/We)*Ne))}}},L})})(stats_min);const globalConfig={composer:{samples:2},overlays:{samples:0},device:null,deviceConfig:()=>deviceConfig({default:{default:{test:!0},bad:{test:!0},low:{test:!0}},mobile:{default:{test:!0}},tablet:{default:{test:!0}},desktop:{default:{test:!0}}},!1)};var tweakpane={exports:{}};/*! Tweakpane 3.1.10 (c) 2016 cocopon, licensed under the MIT license. */(function($,m){(function(L,j){j(m)})(commonjsGlobal$1,function(L){class j{constructor(Le){const[Ue,je]=Le.split("-"),_t=Ue.split(".");this.major=parseInt(_t[0],10),this.minor=parseInt(_t[1],10),this.patch=parseInt(_t[2],10),this.prerelease=je??null}toString(){const Le=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[Le,this.prerelease].join("-"):Le}}class ee{constructor(Le){this.controller_=Le}get element(){return this.controller_.view.element}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(Le){this.controller_.viewProps.set("disabled",Le)}get hidden(){return this.controller_.viewProps.get("hidden")}set hidden(Le){this.controller_.viewProps.set("hidden",Le)}dispose(){this.controller_.viewProps.set("disposed",!0)}}class re{constructor(Le){this.target=Le}}class le extends re{constructor(Le,Ue,je,_t){super(Le),this.value=Ue,this.presetKey=je,this.last=_t??!0}}class ve extends re{constructor(Le,Ue,je){super(Le),this.value=Ue,this.presetKey=je}}class ye extends re{constructor(Le,Ue){super(Le),this.expanded=Ue}}class Ee extends re{constructor(Le,Ue){super(Le),this.index=Ue}}function Me(Ge){return Ge}function Ce(Ge){return Ge==null}function De(Ge,Le){if(Ge.length!==Le.length)return!1;for(let Ue=0;Ue<Ge.length;Ue++)if(Ge[Ue]!==Le[Ue])return!1;return!0}function Be(Ge,Le){let Ue=Ge;do{const je=Object.getOwnPropertyDescriptor(Ue,Le);if(je&&(je.set!==void 0||je.writable===!0))return!0;Ue=Object.getPrototypeOf(Ue)}while(Ue!==null);return!1}const ke={alreadydisposed:()=>"View has been already disposed",invalidparams:Ge=>`Invalid parameters for '${Ge.name}'`,nomatchingcontroller:Ge=>`No matching controller for '${Ge.key}'`,nomatchingview:Ge=>`No matching view for '${JSON.stringify(Ge.params)}'`,notbindable:()=>"Value is not bindable",propertynotfound:Ge=>`Property '${Ge.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class Fe{static alreadyDisposed(){return new Fe({type:"alreadydisposed"})}static notBindable(){return new Fe({type:"notbindable"})}static propertyNotFound(Le){return new Fe({type:"propertynotfound",context:{name:Le}})}static shouldNeverHappen(){return new Fe({type:"shouldneverhappen"})}constructor(Le){var Ue;this.message=(Ue=ke[Le.type](Le.context))!==null&&Ue!==void 0?Ue:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=Le.type}}class Oe{constructor(Le,Ue,je){this.obj_=Le,this.key_=Ue,this.presetKey_=je??Ue}static isBindable(Le){return!(Le===null||typeof Le!="object"&&typeof Le!="function")}get key(){return this.key_}get presetKey(){return this.presetKey_}read(){return this.obj_[this.key_]}write(Le){this.obj_[this.key_]=Le}writeProperty(Le,Ue){const je=this.read();if(!Oe.isBindable(je))throw Fe.notBindable();if(!(Le in je))throw Fe.propertyNotFound(Le);je[Le]=Ue}}class Ne extends ee{get label(){return this.controller_.props.get("label")}set label(Le){this.controller_.props.set("label",Le)}get title(){var Le;return(Le=this.controller_.valueController.props.get("title"))!==null&&Le!==void 0?Le:""}set title(Le){this.controller_.valueController.props.set("title",Le)}on(Le,Ue){const je=Ue.bind(this);return this.controller_.valueController.emitter.on(Le,()=>{je(new re(this))}),this}}class ze{constructor(){this.observers_={}}on(Le,Ue){let je=this.observers_[Le];return je||(je=this.observers_[Le]=[]),je.push({handler:Ue}),this}off(Le,Ue){const je=this.observers_[Le];return je&&(this.observers_[Le]=je.filter(_t=>_t.handler!==Ue)),this}emit(Le,Ue){const je=this.observers_[Le];je&&je.forEach(_t=>{_t.handler(Ue)})}}const $e="tp";function He(Ge){return(Ue,je)=>[$e,"-",Ge,"v",Ue?`_${Ue}`:"",je?`-${je}`:""].join("")}function We(Ge,Le){return Ue=>Le(Ge(Ue))}function qe(Ge){return Ge.rawValue}function Ye(Ge,Le){Ge.emitter.on("change",We(qe,Le)),Le(Ge.rawValue)}function Ze(Ge,Le,Ue){Ye(Ge.value(Le),Ue)}function Ke(Ge,Le,Ue){Ue?Ge.classList.add(Le):Ge.classList.remove(Le)}function rt(Ge,Le){return Ue=>{Ke(Ge,Le,Ue)}}function ft(Ge,Le){Ye(Ge,Ue=>{Le.textContent=Ue??""})}const mt=He("btn");class Et{constructor(Le,Ue){this.element=Le.createElement("div"),this.element.classList.add(mt()),Ue.viewProps.bindClassModifiers(this.element);const je=Le.createElement("button");je.classList.add(mt("b")),Ue.viewProps.bindDisabled(je),this.element.appendChild(je),this.buttonElement=je;const _t=Le.createElement("div");_t.classList.add(mt("t")),ft(Ue.props.value("title"),_t),this.buttonElement.appendChild(_t)}}class bt{constructor(Le,Ue){this.emitter=new ze,this.onClick_=this.onClick_.bind(this),this.props=Ue.props,this.viewProps=Ue.viewProps,this.view=new Et(Le,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class Ct{constructor(Le,Ue){var je;this.constraint_=Ue==null?void 0:Ue.constraint,this.equals_=(je=Ue==null?void 0:Ue.equals)!==null&&je!==void 0?je:(_t,Gt)=>_t===Gt,this.emitter=new ze,this.rawValue_=Le}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(Le){this.setRawValue(Le,{forceEmit:!1,last:!0})}setRawValue(Le,Ue){const je=Ue??{forceEmit:!1,last:!0},_t=this.constraint_?this.constraint_.constrain(Le):Le,Gt=this.rawValue_;this.equals_(Gt,_t)&&!je.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=_t,this.emitter.emit("change",{options:je,previousRawValue:Gt,rawValue:_t,sender:this}))}}class st{constructor(Le){this.emitter=new ze,this.value_=Le}get rawValue(){return this.value_}set rawValue(Le){this.setRawValue(Le,{forceEmit:!1,last:!0})}setRawValue(Le,Ue){const je=Ue??{forceEmit:!1,last:!0},_t=this.value_;_t===Le&&!je.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=Le,this.emitter.emit("change",{options:je,previousRawValue:_t,rawValue:this.value_,sender:this}))}}function at(Ge,Le){const Ue=Le==null?void 0:Le.constraint,je=Le==null?void 0:Le.equals;return!Ue&&!je?new st(Ge):new Ct(Ge,Le)}class Xe{constructor(Le){this.emitter=new ze,this.valMap_=Le;for(const Ue in this.valMap_)this.valMap_[Ue].emitter.on("change",()=>{this.emitter.emit("change",{key:Ue,sender:this})})}static createCore(Le){return Object.keys(Le).reduce((je,_t)=>Object.assign(je,{[_t]:at(Le[_t])}),{})}static fromObject(Le){const Ue=this.createCore(Le);return new Xe(Ue)}get(Le){return this.valMap_[Le].rawValue}set(Le,Ue){this.valMap_[Le].rawValue=Ue}value(Le){return this.valMap_[Le]}}function ht(Ge,Le){const je=Object.keys(Le).reduce((_t,Gt)=>{if(_t===void 0)return;const an=Le[Gt],kn=an(Ge[Gt]);return kn.succeeded?Object.assign(Object.assign({},_t),{[Gt]:kn.value}):void 0},{});return je}function Bt(Ge,Le){return Ge.reduce((Ue,je)=>{if(Ue===void 0)return;const _t=Le(je);if(!(!_t.succeeded||_t.value===void 0))return[...Ue,_t.value]},[])}function Dt(Ge){return Ge===null?!1:typeof Ge=="object"}function Jt(Ge){return Le=>Ue=>{if(!Le&&Ue===void 0)return{succeeded:!1,value:void 0};if(Le&&Ue===void 0)return{succeeded:!0,value:void 0};const je=Ge(Ue);return je!==void 0?{succeeded:!0,value:je}:{succeeded:!1,value:void 0}}}function tn(Ge){return{custom:Le=>Jt(Le)(Ge),boolean:Jt(Le=>typeof Le=="boolean"?Le:void 0)(Ge),number:Jt(Le=>typeof Le=="number"?Le:void 0)(Ge),string:Jt(Le=>typeof Le=="string"?Le:void 0)(Ge),function:Jt(Le=>typeof Le=="function"?Le:void 0)(Ge),constant:Le=>Jt(Ue=>Ue===Le?Le:void 0)(Ge),raw:Jt(Le=>Le)(Ge),object:Le=>Jt(Ue=>{if(Dt(Ue))return ht(Ue,Le)})(Ge),array:Le=>Jt(Ue=>{if(Array.isArray(Ue))return Bt(Ue,Le)})(Ge)}}const zt={optional:tn(!0),required:tn(!1)};function Vt(Ge,Le){const Ue=zt.required.object(Le)(Ge);return Ue.succeeded?Ue.value:void 0}function Mt(Ge){console.warn([`Missing '${Ge.key}' of ${Ge.target} in ${Ge.place}.`,"Please rebuild plugins with the latest core package."].join(" "))}function Tt(Ge){return Ge&&Ge.parentElement&&Ge.parentElement.removeChild(Ge),null}class qt{constructor(Le){this.value_=Le}static create(Le){return[new qt(Le),(Ue,je)=>{Le.setRawValue(Ue,je)}]}get emitter(){return this.value_.emitter}get rawValue(){return this.value_.rawValue}}const on=He("");function pn(Ge,Le){return rt(Ge,on(void 0,Le))}class kt extends Xe{constructor(Le){var Ue;super(Le),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=qt.create(at(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(Ue=this.get("parent"))===null||Ue===void 0||Ue.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(Le){var Ue,je,_t;const Gt=Le??{};return new kt(Xe.createCore({disabled:(Ue=Gt.disabled)!==null&&Ue!==void 0?Ue:!1,disposed:!1,hidden:(je=Gt.hidden)!==null&&je!==void 0?je:!1,parent:(_t=Gt.parent)!==null&&_t!==void 0?_t:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(Le){Ye(this.globalDisabled_,pn(Le,"disabled")),Ze(this,"hidden",pn(Le,"hidden"))}bindDisabled(Le){Ye(this.globalDisabled_,Ue=>{Le.disabled=Ue})}bindTabIndex(Le){Ye(this.globalDisabled_,Ue=>{Le.tabIndex=Ue?-1:0})}handleDispose(Le){this.value("disposed").emitter.on("change",Ue=>{Ue&&Le()})}getGlobalDisabled_(){const Le=this.get("parent");return(Le?Le.globalDisabled.rawValue:!1)||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(Le){var Ue;const je=Le.previousRawValue;je==null||je.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(Ue=this.get("parent"))===null||Ue===void 0||Ue.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}}function Mn(){return["veryfirst","first","last","verylast"]}const wt=He(""),It={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class Kt{constructor(Le){this.parent_=null,this.blade=Le.blade,this.view=Le.view,this.viewProps=Le.viewProps;const Ue=this.view.element;this.blade.value("positions").emitter.on("change",()=>{Mn().forEach(je=>{Ue.classList.remove(wt(void 0,It[je]))}),this.blade.get("positions").forEach(je=>{Ue.classList.add(wt(void 0,It[je]))})}),this.viewProps.handleDispose(()=>{Tt(Ue)})}get parent(){return this.parent_}set parent(Le){if(this.parent_=Le,!("parent"in this.viewProps.valMap_)){Mt({key:"parent",target:kt.name,place:"BladeController.parent"});return}this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}}const ln="http://www.w3.org/2000/svg";function nn(Ge){Ge.offsetHeight}function gn(Ge,Le){const Ue=Ge.style.transition;Ge.style.transition="none",Le(),Ge.style.transition=Ue}function xn(Ge){return Ge.ontouchstart!==void 0}function St(){return globalThis}function At(){return St().document}function Ut(Ge){const Le=Ge.ownerDocument.defaultView;return Le&&"document"in Le?Ge.getContext("2d",{willReadFrequently:!0}):null}const Zt={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function cn(Ge,Le){const Ue=Ge.createElementNS(ln,"svg");return Ue.innerHTML=Zt[Le],Ue}function sn(Ge,Le,Ue){Ge.insertBefore(Le,Ge.children[Ue])}function bn(Ge){Ge.parentElement&&Ge.parentElement.removeChild(Ge)}function vn(Ge){for(;Ge.children.length>0;)Ge.removeChild(Ge.children[0])}function Cn(Ge){for(;Ge.childNodes.length>0;)Ge.removeChild(Ge.childNodes[0])}function Un(Ge){return Ge.relatedTarget?Ge.relatedTarget:"explicitOriginalTarget"in Ge?Ge.explicitOriginalTarget:null}const yn=He("lbl");function $n(Ge,Le){const Ue=Ge.createDocumentFragment();return Le.split(`
`).map(_t=>Ge.createTextNode(_t)).forEach((_t,Gt)=>{Gt>0&&Ue.appendChild(Ge.createElement("br")),Ue.appendChild(_t)}),Ue}class Jn{constructor(Le,Ue){this.element=Le.createElement("div"),this.element.classList.add(yn()),Ue.viewProps.bindClassModifiers(this.element);const je=Le.createElement("div");je.classList.add(yn("l")),Ze(Ue.props,"label",Gt=>{Ce(Gt)?this.element.classList.add(yn(void 0,"nol")):(this.element.classList.remove(yn(void 0,"nol")),Cn(je),je.appendChild($n(Le,Gt)))}),this.element.appendChild(je),this.labelElement=je;const _t=Le.createElement("div");_t.classList.add(yn("v")),this.element.appendChild(_t),this.valueElement=_t}}class Hn extends Kt{constructor(Le,Ue){const je=Ue.valueController.viewProps;super(Object.assign(Object.assign({},Ue),{view:new Jn(Le,{props:Ue.props,viewProps:je}),viewProps:je})),this.props=Ue.props,this.valueController=Ue.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}const Bn={id:"button",type:"blade",accept(Ge){const Le=zt,Ue=Vt(Ge,{title:Le.required.string,view:Le.required.constant("button"),label:Le.optional.string});return Ue?{params:Ue}:null},controller(Ge){return new Hn(Ge.document,{blade:Ge.blade,props:Xe.fromObject({label:Ge.params.label}),valueController:new bt(Ge.document,{props:Xe.fromObject({title:Ge.params.title}),viewProps:Ge.viewProps})})},api(Ge){return!(Ge.controller instanceof Hn)||!(Ge.controller.valueController instanceof bt)?null:new Ne(Ge.controller)}};class Yn extends Kt{constructor(Le){super(Le),this.value=Le.value}}function Qn(){return new Xe({positions:at([],{equals:De})})}class Kn extends Xe{constructor(Le){super(Le)}static create(Le){const Ue={completed:!0,expanded:Le,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},je=Xe.createCore(Ue);return new Kn(je)}get styleExpanded(){var Le;return(Le=this.get("temporaryExpanded"))!==null&&Le!==void 0?Le:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const Le=this.get("expandedHeight");return this.get("shouldFixHeight")&&!Ce(Le)?`${Le}px`:"auto"}bindExpandedClass(Le,Ue){const je=()=>{this.styleExpanded?Le.classList.add(Ue):Le.classList.remove(Ue)};Ze(this,"expanded",je),Ze(this,"temporaryExpanded",je)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function Wt(Ge,Le){let Ue=0;return gn(Le,()=>{Ge.set("expandedHeight",null),Ge.set("temporaryExpanded",!0),nn(Le),Ue=Le.clientHeight,Ge.set("temporaryExpanded",null),nn(Le)}),Ue}function zn(Ge,Le){Le.style.height=Ge.styleHeight}function Xt(Ge,Le){Ge.value("expanded").emitter.on("beforechange",()=>{if(Ge.set("completed",!1),Ce(Ge.get("expandedHeight"))){const Ue=Wt(Ge,Le);Ue>0&&Ge.set("expandedHeight",Ue)}Ge.set("shouldFixHeight",!0),nn(Le)}),Ge.emitter.on("change",()=>{zn(Ge,Le)}),zn(Ge,Le),Le.addEventListener("transitionend",Ue=>{Ue.propertyName==="height"&&Ge.cleanUpTransition()})}class En extends ee{constructor(Le,Ue){super(Le),this.rackApi_=Ue}}function Fn(Ge,Le){return Ge.addBlade(Object.assign(Object.assign({},Le),{view:"button"}))}function Zn(Ge,Le){return Ge.addBlade(Object.assign(Object.assign({},Le),{view:"folder"}))}function hi(Ge,Le){const Ue=Le??{};return Ge.addBlade(Object.assign(Object.assign({},Ue),{view:"separator"}))}function bi(Ge,Le){return Ge.addBlade(Object.assign(Object.assign({},Le),{view:"tab"}))}class _i{constructor(Le){this.emitter=new ze,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=Le}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(Le){for(const Ue of this.allItems())if(Le(Ue))return Ue;return null}includes(Le){return this.cache_.has(Le)}add(Le,Ue){if(this.includes(Le))throw Fe.shouldNeverHappen();const je=Ue!==void 0?Ue:this.items_.length;this.items_.splice(je,0,Le),this.cache_.add(Le);const _t=this.extract_(Le);_t&&(_t.emitter.on("add",this.onSubListAdd_),_t.emitter.on("remove",this.onSubListRemove_),_t.allItems().forEach(Gt=>{this.cache_.add(Gt)})),this.emitter.emit("add",{index:je,item:Le,root:this,target:this})}remove(Le){const Ue=this.items_.indexOf(Le);if(Ue<0)return;this.items_.splice(Ue,1),this.cache_.delete(Le);const je=this.extract_(Le);je&&(je.emitter.off("add",this.onSubListAdd_),je.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:Ue,item:Le,root:this,target:this})}onSubListAdd_(Le){this.cache_.add(Le.item),this.emitter.emit("add",{index:Le.index,item:Le.item,root:this,target:Le.target})}onSubListRemove_(Le){this.cache_.delete(Le.item),this.emitter.emit("remove",{index:Le.index,item:Le.item,root:this,target:Le.target})}}class ci extends ee{constructor(Le){super(Le),this.onBindingChange_=this.onBindingChange_.bind(this),this.emitter_=new ze,this.controller_.binding.emitter.on("change",this.onBindingChange_)}get label(){return this.controller_.props.get("label")}set label(Le){this.controller_.props.set("label",Le)}on(Le,Ue){const je=Ue.bind(this);return this.emitter_.on(Le,_t=>{je(_t.event)}),this}refresh(){this.controller_.binding.read()}onBindingChange_(Le){const Ue=Le.sender.target.read();this.emitter_.emit("change",{event:new le(this,Ue,this.controller_.binding.target.presetKey,Le.options.last)})}}class ui extends Hn{constructor(Le,Ue){super(Le,Ue),this.binding=Ue.binding}}class Fi extends ee{constructor(Le){super(Le),this.onBindingUpdate_=this.onBindingUpdate_.bind(this),this.emitter_=new ze,this.controller_.binding.emitter.on("update",this.onBindingUpdate_)}get label(){return this.controller_.props.get("label")}set label(Le){this.controller_.props.set("label",Le)}on(Le,Ue){const je=Ue.bind(this);return this.emitter_.on(Le,_t=>{je(_t.event)}),this}refresh(){this.controller_.binding.read()}onBindingUpdate_(Le){const Ue=Le.sender.target.read();this.emitter_.emit("update",{event:new ve(this,Ue,this.controller_.binding.target.presetKey)})}}class pi extends Hn{constructor(Le,Ue){super(Le,Ue),this.binding=Ue.binding,this.viewProps.bindDisabled(this.binding.ticker),this.viewProps.handleDispose(()=>{this.binding.dispose()})}}function ir(Ge){return Ge instanceof ki?Ge.apiSet_:Ge instanceof En?Ge.rackApi_.apiSet_:null}function Ki(Ge,Le){const Ue=Ge.find(je=>je.controller_===Le);if(!Ue)throw Fe.shouldNeverHappen();return Ue}function rr(Ge,Le,Ue){if(!Oe.isBindable(Ge))throw Fe.notBindable();return new Oe(Ge,Le,Ue)}class ki extends ee{constructor(Le,Ue){super(Le),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.onRackInputChange_=this.onRackInputChange_.bind(this),this.onRackMonitorUpdate_=this.onRackMonitorUpdate_.bind(this),this.emitter_=new ze,this.apiSet_=new _i(ir),this.pool_=Ue;const je=this.controller_.rack;je.emitter.on("add",this.onRackAdd_),je.emitter.on("remove",this.onRackRemove_),je.emitter.on("inputchange",this.onRackInputChange_),je.emitter.on("monitorupdate",this.onRackMonitorUpdate_),je.children.forEach(_t=>{this.setUpApi_(_t)})}get children(){return this.controller_.rack.children.map(Le=>Ki(this.apiSet_,Le))}addInput(Le,Ue,je){const _t=je??{},Gt=this.controller_.view.element.ownerDocument,an=this.pool_.createInput(Gt,rr(Le,Ue,_t.presetKey),_t),kn=new ci(an);return this.add(kn,_t.index)}addMonitor(Le,Ue,je){const _t=je??{},Gt=this.controller_.view.element.ownerDocument,an=this.pool_.createMonitor(Gt,rr(Le,Ue),_t),kn=new Fi(an);return this.add(kn,_t.index)}addFolder(Le){return Zn(this,Le)}addButton(Le){return Fn(this,Le)}addSeparator(Le){return hi(this,Le)}addTab(Le){return bi(this,Le)}add(Le,Ue){this.controller_.rack.add(Le.controller_,Ue);const je=this.apiSet_.find(_t=>_t.controller_===Le.controller_);return je&&this.apiSet_.remove(je),this.apiSet_.add(Le),Le}remove(Le){this.controller_.rack.remove(Le.controller_)}addBlade(Le){const Ue=this.controller_.view.element.ownerDocument,je=this.pool_.createBlade(Ue,Le),_t=this.pool_.createBladeApi(je);return this.add(_t,Le.index)}on(Le,Ue){const je=Ue.bind(this);return this.emitter_.on(Le,_t=>{je(_t.event)}),this}setUpApi_(Le){this.apiSet_.find(je=>je.controller_===Le)||this.apiSet_.add(this.pool_.createBladeApi(Le))}onRackAdd_(Le){this.setUpApi_(Le.bladeController)}onRackRemove_(Le){if(Le.isRoot){const Ue=Ki(this.apiSet_,Le.bladeController);this.apiSet_.remove(Ue)}}onRackInputChange_(Le){const Ue=Le.bladeController;if(Ue instanceof ui){const je=Ki(this.apiSet_,Ue),_t=Ue.binding;this.emitter_.emit("change",{event:new le(je,_t.target.read(),_t.target.presetKey,Le.options.last)})}else if(Ue instanceof Yn){const je=Ki(this.apiSet_,Ue);this.emitter_.emit("change",{event:new le(je,Ue.value.rawValue,void 0,Le.options.last)})}}onRackMonitorUpdate_(Le){if(!(Le.bladeController instanceof pi))throw Fe.shouldNeverHappen();const Ue=Ki(this.apiSet_,Le.bladeController),je=Le.bladeController.binding;this.emitter_.emit("update",{event:new ve(Ue,je.target.read(),je.target.presetKey)})}}class Gi extends En{constructor(Le,Ue){super(Le,new ki(Le.rackController,Ue)),this.emitter_=new ze,this.controller_.foldable.value("expanded").emitter.on("change",je=>{this.emitter_.emit("fold",{event:new ye(this,je.sender.rawValue)})}),this.rackApi_.on("change",je=>{this.emitter_.emit("change",{event:je})}),this.rackApi_.on("update",je=>{this.emitter_.emit("update",{event:je})})}get expanded(){return this.controller_.foldable.get("expanded")}set expanded(Le){this.controller_.foldable.set("expanded",Le)}get title(){return this.controller_.props.get("title")}set title(Le){this.controller_.props.set("title",Le)}get children(){return this.rackApi_.children}addInput(Le,Ue,je){return this.rackApi_.addInput(Le,Ue,je)}addMonitor(Le,Ue,je){return this.rackApi_.addMonitor(Le,Ue,je)}addFolder(Le){return this.rackApi_.addFolder(Le)}addButton(Le){return this.rackApi_.addButton(Le)}addSeparator(Le){return this.rackApi_.addSeparator(Le)}addTab(Le){return this.rackApi_.addTab(Le)}add(Le,Ue){return this.rackApi_.add(Le,Ue)}remove(Le){this.rackApi_.remove(Le)}addBlade(Le){return this.rackApi_.addBlade(Le)}on(Le,Ue){const je=Ue.bind(this);return this.emitter_.on(Le,_t=>{je(_t.event)}),this}}class Qi extends Kt{constructor(Le){super({blade:Le.blade,view:Le.view,viewProps:Le.rackController.viewProps}),this.rackController=Le.rackController}}class mr{constructor(Le,Ue){const je=He(Ue.viewName);this.element=Le.createElement("div"),this.element.classList.add(je()),Ue.viewProps.bindClassModifiers(this.element)}}function gr(Ge,Le){for(let Ue=0;Ue<Ge.length;Ue++){const je=Ge[Ue];if(je instanceof ui&&je.binding===Le)return je}return null}function br(Ge,Le){for(let Ue=0;Ue<Ge.length;Ue++){const je=Ge[Ue];if(je instanceof pi&&je.binding===Le)return je}return null}function hr(Ge,Le){for(let Ue=0;Ue<Ge.length;Ue++){const je=Ge[Ue];if(je instanceof Yn&&je.value===Le)return je}return null}function er(Ge){return Ge instanceof un?Ge.rack:Ge instanceof Qi?Ge.rackController.rack:null}function Pt(Ge){const Le=er(Ge);return Le?Le.bcSet_:null}class Yt{constructor(Le){var Ue,je;this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildInputChange_=this.onChildInputChange_.bind(this),this.onChildMonitorUpdate_=this.onChildMonitorUpdate_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onDescendantLayout_=this.onDescendantLayout_.bind(this),this.onDescendantInputChange_=this.onDescendantInputChange_.bind(this),this.onDescendantMonitorUpdate_=this.onDescendantMonitorUpdate_.bind(this),this.emitter=new ze,this.blade_=(Ue=Le.blade)!==null&&Ue!==void 0?Ue:null,(je=this.blade_)===null||je===void 0||je.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=Le.viewProps,this.bcSet_=new _i(Pt),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(Le,Ue){var je;(je=Le.parent)===null||je===void 0||je.remove(Le),Be(Le,"parent")?Le.parent=this:(Le.parent_=this,Mt({key:"parent",target:"BladeController",place:"BladeRack.add"})),this.bcSet_.add(Le,Ue)}remove(Le){Be(Le,"parent")?Le.parent=null:(Le.parent_=null,Mt({key:"parent",target:"BladeController",place:"BladeRack.remove"})),this.bcSet_.remove(Le)}find(Le){return this.bcSet_.allItems().filter(Ue=>Ue instanceof Le)}onSetAdd_(Le){this.updatePositions_();const Ue=Le.target===Le.root;if(this.emitter.emit("add",{bladeController:Le.item,index:Le.index,isRoot:Ue,sender:this}),!Ue)return;const je=Le.item;if(je.viewProps.emitter.on("change",this.onChildViewPropsChange_),je.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),je.viewProps.handleDispose(this.onChildDispose_),je instanceof ui)je.binding.emitter.on("change",this.onChildInputChange_);else if(je instanceof pi)je.binding.emitter.on("update",this.onChildMonitorUpdate_);else if(je instanceof Yn)je.value.emitter.on("change",this.onChildValueChange_);else{const _t=er(je);if(_t){const Gt=_t.emitter;Gt.on("layout",this.onDescendantLayout_),Gt.on("inputchange",this.onDescendantInputChange_),Gt.on("monitorupdate",this.onDescendantMonitorUpdate_)}}}onSetRemove_(Le){this.updatePositions_();const Ue=Le.target===Le.root;if(this.emitter.emit("remove",{bladeController:Le.item,isRoot:Ue,sender:this}),!Ue)return;const je=Le.item;if(je instanceof ui)je.binding.emitter.off("change",this.onChildInputChange_);else if(je instanceof pi)je.binding.emitter.off("update",this.onChildMonitorUpdate_);else if(je instanceof Yn)je.value.emitter.off("change",this.onChildValueChange_);else{const _t=er(je);if(_t){const Gt=_t.emitter;Gt.off("layout",this.onDescendantLayout_),Gt.off("inputchange",this.onDescendantInputChange_),Gt.off("monitorupdate",this.onDescendantMonitorUpdate_)}}}updatePositions_(){const Le=this.bcSet_.items.filter(_t=>!_t.viewProps.get("hidden")),Ue=Le[0],je=Le[Le.length-1];this.bcSet_.items.forEach(_t=>{const Gt=[];_t===Ue&&(Gt.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&Gt.push("veryfirst")),_t===je&&(Gt.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&Gt.push("verylast")),_t.blade.set("positions",Gt)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(Le){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(Ue=>Ue.viewProps.get("disposed")).forEach(Ue=>{this.bcSet_.remove(Ue)})}onChildInputChange_(Le){const Ue=gr(this.find(ui),Le.sender);if(!Ue)throw Fe.alreadyDisposed();this.emitter.emit("inputchange",{bladeController:Ue,options:Le.options,sender:this})}onChildMonitorUpdate_(Le){const Ue=br(this.find(pi),Le.sender);if(!Ue)throw Fe.alreadyDisposed();this.emitter.emit("monitorupdate",{bladeController:Ue,sender:this})}onChildValueChange_(Le){const Ue=hr(this.find(Yn),Le.sender);if(!Ue)throw Fe.alreadyDisposed();this.emitter.emit("inputchange",{bladeController:Ue,options:Le.options,sender:this})}onDescendantLayout_(Le){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onDescendantInputChange_(Le){this.emitter.emit("inputchange",{bladeController:Le.bladeController,options:Le.options,sender:this})}onDescendantMonitorUpdate_(Le){this.emitter.emit("monitorupdate",{bladeController:Le.bladeController,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class un extends Kt{constructor(Le,Ue){super(Object.assign(Object.assign({},Ue),{view:new mr(Le,{viewName:"brk",viewProps:Ue.viewProps})})),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const je=new Yt({blade:Ue.root?void 0:Ue.blade,viewProps:Ue.viewProps});je.emitter.on("add",this.onRackAdd_),je.emitter.on("remove",this.onRackRemove_),this.rack=je,this.viewProps.handleDispose(()=>{for(let _t=this.rack.children.length-1;_t>=0;_t--)this.rack.children[_t].viewProps.set("disposed",!0)})}onRackAdd_(Le){Le.isRoot&&sn(this.view.element,Le.bladeController.view.element,Le.index)}onRackRemove_(Le){Le.isRoot&&bn(Le.bladeController.view.element)}}const it=He("cnt");class lt{constructor(Le,Ue){var je;this.className_=He((je=Ue.viewName)!==null&&je!==void 0?je:"fld"),this.element=Le.createElement("div"),this.element.classList.add(this.className_(),it()),Ue.viewProps.bindClassModifiers(this.element),this.foldable_=Ue.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),Ze(this.foldable_,"completed",rt(this.element,this.className_(void 0,"cpl")));const _t=Le.createElement("button");_t.classList.add(this.className_("b")),Ze(Ue.props,"title",ii=>{Ce(ii)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),Ue.viewProps.bindDisabled(_t),this.element.appendChild(_t),this.buttonElement=_t;const Gt=Le.createElement("div");Gt.classList.add(this.className_("i")),this.element.appendChild(Gt);const an=Le.createElement("div");an.classList.add(this.className_("t")),ft(Ue.props.value("title"),an),this.buttonElement.appendChild(an),this.titleElement=an;const kn=Le.createElement("div");kn.classList.add(this.className_("m")),this.buttonElement.appendChild(kn);const ti=Ue.containerElement;ti.classList.add(this.className_("c")),this.element.appendChild(ti),this.containerElement=ti}}class xt extends Qi{constructor(Le,Ue){var je;const _t=Kn.create((je=Ue.expanded)!==null&&je!==void 0?je:!0),Gt=new un(Le,{blade:Ue.blade,root:Ue.root,viewProps:Ue.viewProps});super(Object.assign(Object.assign({},Ue),{rackController:Gt,view:new lt(Le,{containerElement:Gt.view.element,foldable:_t,props:Ue.props,viewName:Ue.root?"rot":void 0,viewProps:Ue.viewProps})})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=Ue.props,this.foldable=_t,Xt(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}const Nt={id:"folder",type:"blade",accept(Ge){const Le=zt,Ue=Vt(Ge,{title:Le.required.string,view:Le.required.constant("folder"),expanded:Le.optional.boolean});return Ue?{params:Ue}:null},controller(Ge){return new xt(Ge.document,{blade:Ge.blade,expanded:Ge.params.expanded,props:Xe.fromObject({title:Ge.params.title}),viewProps:Ge.viewProps})},api(Ge){return Ge.controller instanceof xt?new Gi(Ge.controller,Ge.pool):null}};class Qt extends Yn{constructor(Le,Ue){const je=Ue.valueController.viewProps;super(Object.assign(Object.assign({},Ue),{value:Ue.valueController.value,view:new Jn(Le,{props:Ue.props,viewProps:je}),viewProps:je})),this.props=Ue.props,this.valueController=Ue.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}class Ht extends ee{}const dn=He("spr");class en{constructor(Le,Ue){this.element=Le.createElement("div"),this.element.classList.add(dn()),Ue.viewProps.bindClassModifiers(this.element);const je=Le.createElement("hr");je.classList.add(dn("r")),this.element.appendChild(je)}}class hn extends Kt{constructor(Le,Ue){super(Object.assign(Object.assign({},Ue),{view:new en(Le,{viewProps:Ue.viewProps})}))}}const _n={id:"separator",type:"blade",accept(Ge){const Ue=Vt(Ge,{view:zt.required.constant("separator")});return Ue?{params:Ue}:null},controller(Ge){return new hn(Ge.document,{blade:Ge.blade,viewProps:Ge.viewProps})},api(Ge){return Ge.controller instanceof hn?new Ht(Ge.controller):null}},fn=He("tbi");class Tn{constructor(Le,Ue){this.element=Le.createElement("div"),this.element.classList.add(fn()),Ue.viewProps.bindClassModifiers(this.element),Ze(Ue.props,"selected",Gt=>{Gt?this.element.classList.add(fn(void 0,"sel")):this.element.classList.remove(fn(void 0,"sel"))});const je=Le.createElement("button");je.classList.add(fn("b")),Ue.viewProps.bindDisabled(je),this.element.appendChild(je),this.buttonElement=je;const _t=Le.createElement("div");_t.classList.add(fn("t")),ft(Ue.props.value("title"),_t),this.buttonElement.appendChild(_t),this.titleElement=_t}}class Ln{constructor(Le,Ue){this.emitter=new ze,this.onClick_=this.onClick_.bind(this),this.props=Ue.props,this.viewProps=Ue.viewProps,this.view=new Tn(Le,{props:Ue.props,viewProps:Ue.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class Pn{constructor(Le,Ue){this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new Ln(Le,{props:Ue.itemProps,viewProps:kt.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.cc_=new un(Le,{blade:Qn(),viewProps:kt.create()}),this.props=Ue.props,Ze(this.props,"selected",je=>{this.itemController.props.set("selected",je),this.contentController.viewProps.set("hidden",!je)})}get itemController(){return this.ic_}get contentController(){return this.cc_}onItemClick_(){this.props.set("selected",!0)}}class wn{constructor(Le,Ue){this.controller_=Le,this.rackApi_=Ue}get title(){var Le;return(Le=this.controller_.itemController.props.get("title"))!==null&&Le!==void 0?Le:""}set title(Le){this.controller_.itemController.props.set("title",Le)}get selected(){return this.controller_.props.get("selected")}set selected(Le){this.controller_.props.set("selected",Le)}get children(){return this.rackApi_.children}addButton(Le){return this.rackApi_.addButton(Le)}addFolder(Le){return this.rackApi_.addFolder(Le)}addSeparator(Le){return this.rackApi_.addSeparator(Le)}addTab(Le){return this.rackApi_.addTab(Le)}add(Le,Ue){this.rackApi_.add(Le,Ue)}remove(Le){this.rackApi_.remove(Le)}addInput(Le,Ue,je){return this.rackApi_.addInput(Le,Ue,je)}addMonitor(Le,Ue,je){return this.rackApi_.addMonitor(Le,Ue,je)}addBlade(Le){return this.rackApi_.addBlade(Le)}}class Nn extends En{constructor(Le,Ue){super(Le,new ki(Le.rackController,Ue)),this.onPageAdd_=this.onPageAdd_.bind(this),this.onPageRemove_=this.onPageRemove_.bind(this),this.onSelect_=this.onSelect_.bind(this),this.emitter_=new ze,this.pageApiMap_=new Map,this.rackApi_.on("change",je=>{this.emitter_.emit("change",{event:je})}),this.rackApi_.on("update",je=>{this.emitter_.emit("update",{event:je})}),this.controller_.tab.selectedIndex.emitter.on("change",this.onSelect_),this.controller_.pageSet.emitter.on("add",this.onPageAdd_),this.controller_.pageSet.emitter.on("remove",this.onPageRemove_),this.controller_.pageSet.items.forEach(je=>{this.setUpPageApi_(je)})}get pages(){return this.controller_.pageSet.items.map(Le=>{const Ue=this.pageApiMap_.get(Le);if(!Ue)throw Fe.shouldNeverHappen();return Ue})}addPage(Le){const Ue=this.controller_.view.element.ownerDocument,je=new Pn(Ue,{itemProps:Xe.fromObject({selected:!1,title:Le.title}),props:Xe.fromObject({selected:!1})});this.controller_.add(je,Le.index);const _t=this.pageApiMap_.get(je);if(!_t)throw Fe.shouldNeverHappen();return _t}removePage(Le){this.controller_.remove(Le)}on(Le,Ue){const je=Ue.bind(this);return this.emitter_.on(Le,_t=>{je(_t.event)}),this}setUpPageApi_(Le){const Ue=this.rackApi_.apiSet_.find(_t=>_t.controller_===Le.contentController);if(!Ue)throw Fe.shouldNeverHappen();const je=new wn(Le,Ue);this.pageApiMap_.set(Le,je)}onPageAdd_(Le){this.setUpPageApi_(Le.item)}onPageRemove_(Le){if(!this.pageApiMap_.get(Le.item))throw Fe.shouldNeverHappen();this.pageApiMap_.delete(Le.item)}onSelect_(Le){this.emitter_.emit("select",{event:new Ee(this,Le.rawValue)})}}const Dn=-1;class jn{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=at(!0),this.selectedIndex=at(Dn),this.items_=[]}add(Le,Ue){const je=Ue??this.items_.length;this.items_.splice(je,0,Le),Le.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(Le){const Ue=this.items_.indexOf(Le);Ue<0||(this.items_.splice(Ue,1),Le.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=Dn,this.empty.rawValue=!0;return}const Le=this.items_.findIndex(Ue=>Ue.rawValue);Le<0?(this.items_.forEach((Ue,je)=>{Ue.rawValue=je===0}),this.selectedIndex.rawValue=0):(this.items_.forEach((Ue,je)=>{Ue.rawValue=je===Le}),this.selectedIndex.rawValue=Le),this.empty.rawValue=!1}onItemSelectedChange_(Le){if(Le.rawValue){const Ue=this.items_.findIndex(je=>je===Le.sender);this.items_.forEach((je,_t)=>{je.rawValue=_t===Ue}),this.selectedIndex.rawValue=Ue}else this.keepSelection_()}}const si=He("tab");class oi{constructor(Le,Ue){this.element=Le.createElement("div"),this.element.classList.add(si(),it()),Ue.viewProps.bindClassModifiers(this.element),Ye(Ue.empty,rt(this.element,si(void 0,"nop")));const je=Le.createElement("div");je.classList.add(si("t")),this.element.appendChild(je),this.itemsElement=je;const _t=Le.createElement("div");_t.classList.add(si("i")),this.element.appendChild(_t);const Gt=Ue.contentsElement;Gt.classList.add(si("c")),this.element.appendChild(Gt),this.contentsElement=Gt}}class Ai extends Qi{constructor(Le,Ue){const je=new un(Le,{blade:Ue.blade,viewProps:Ue.viewProps}),_t=new jn;super({blade:Ue.blade,rackController:je,view:new oi(Le,{contentsElement:je.view.element,empty:_t.empty,viewProps:Ue.viewProps})}),this.onPageAdd_=this.onPageAdd_.bind(this),this.onPageRemove_=this.onPageRemove_.bind(this),this.pageSet_=new _i(()=>null),this.pageSet_.emitter.on("add",this.onPageAdd_),this.pageSet_.emitter.on("remove",this.onPageRemove_),this.tab=_t}get pageSet(){return this.pageSet_}add(Le,Ue){this.pageSet_.add(Le,Ue)}remove(Le){this.pageSet_.remove(this.pageSet_.items[Le])}onPageAdd_(Le){const Ue=Le.item;sn(this.view.itemsElement,Ue.itemController.view.element,Le.index),Ue.itemController.viewProps.set("parent",this.viewProps),this.rackController.rack.add(Ue.contentController,Le.index),this.tab.add(Ue.props.value("selected"))}onPageRemove_(Le){const Ue=Le.item;bn(Ue.itemController.view.element),Ue.itemController.viewProps.set("parent",null),this.rackController.rack.remove(Ue.contentController),this.tab.remove(Ue.props.value("selected"))}}const ei={id:"tab",type:"blade",accept(Ge){const Le=zt,Ue=Vt(Ge,{pages:Le.required.array(Le.required.object({title:Le.required.string})),view:Le.required.constant("tab")});return!Ue||Ue.pages.length===0?null:{params:Ue}},controller(Ge){const Le=new Ai(Ge.document,{blade:Ge.blade,viewProps:Ge.viewProps});return Ge.params.pages.forEach(Ue=>{const je=new Pn(Ge.document,{itemProps:Xe.fromObject({selected:!1,title:Ue.title}),props:Xe.fromObject({selected:!1})});Le.add(je)}),Le},api(Ge){return Ge.controller instanceof Ai?new Nn(Ge.controller,Ge.pool):null}};function ni(Ge,Le){const Ue=Ge.accept(Le.params);if(!Ue)return null;const je=zt.optional.boolean(Le.params.disabled).value,_t=zt.optional.boolean(Le.params.hidden).value;return Ge.controller({blade:Qn(),document:Le.document,params:Object.assign(Object.assign({},Ue.params),{disabled:je,hidden:_t}),viewProps:kt.create({disabled:je,hidden:_t})})}class wi{constructor(){this.disabled=!1,this.emitter=new ze}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}}class gi{constructor(Le,Ue){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=Le,this.emitter=new ze,this.interval_=Ue,this.setTimer_()}get disabled(){return this.disabled_}set disabled(Le){this.disabled_=Le,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(this.timerId_===null)return;const Le=this.doc_.defaultView;Le&&Le.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const Le=this.doc_.defaultView;Le&&(this.timerId_=Le.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}}class di{constructor(Le){this.onValueChange_=this.onValueChange_.bind(this),this.reader=Le.reader,this.writer=Le.writer,this.emitter=new ze,this.value=Le.value,this.value.emitter.on("change",this.onValueChange_),this.target=Le.target,this.read()}read(){const Le=this.target.read();Le!==void 0&&(this.value.rawValue=this.reader(Le))}write_(Le){this.writer(this.target,Le)}onValueChange_(Le){this.write_(Le.rawValue),this.emitter.emit("change",{options:Le.options,rawValue:Le.rawValue,sender:this})}}function Xn(Ge,Le){for(;Ge.length<Le;)Ge.push(void 0)}function fi(Ge){const Le=[];return Xn(Le,Ge),at(Le)}function Vi(Ge){const Le=Ge.indexOf(void 0);return Le<0?Ge:Ge.slice(0,Le)}function Bi(Ge,Le){const Ue=[...Vi(Ge),Le];return Ue.length>Ge.length?Ue.splice(0,Ue.length-Ge.length):Xn(Ue,Ge.length),Ue}class Hi{constructor(Le){this.onTick_=this.onTick_.bind(this),this.reader_=Le.reader,this.target=Le.target,this.emitter=new ze,this.value=Le.value,this.ticker=Le.ticker,this.ticker.emitter.on("tick",this.onTick_),this.read()}dispose(){this.ticker.dispose()}read(){const Le=this.target.read();if(Le===void 0)return;const Ue=this.value.rawValue,je=this.reader_(Le);this.value.rawValue=Bi(Ue,je),this.emitter.emit("update",{rawValue:je,sender:this})}onTick_(Le){this.read()}}class Yi{constructor(Le){this.constraints=Le}constrain(Le){return this.constraints.reduce((Ue,je)=>je.constrain(Ue),Le)}}function Wi(Ge,Le){if(Ge instanceof Le)return Ge;if(Ge instanceof Yi){const Ue=Ge.constraints.reduce((je,_t)=>je||(_t instanceof Le?_t:null),null);if(Ue)return Ue}return null}class _r{constructor(Le){this.values=Xe.fromObject({max:Le.max,min:Le.min})}constrain(Le){const Ue=this.values.get("max"),je=this.values.get("min");return Math.min(Math.max(Le,je),Ue)}}class Cr{constructor(Le){this.values=Xe.fromObject({options:Le})}get options(){return this.values.get("options")}constrain(Le){const Ue=this.values.get("options");return Ue.length===0||Ue.filter(_t=>_t.value===Le).length>0?Le:Ue[0].value}}class Or{constructor(Le){this.values=Xe.fromObject({max:Le.max,min:Le.min})}get maxValue(){return this.values.get("max")}get minValue(){return this.values.get("min")}constrain(Le){const Ue=this.values.get("max"),je=this.values.get("min");let _t=Le;return Ce(je)||(_t=Math.max(_t,je)),Ce(Ue)||(_t=Math.min(_t,Ue)),_t}}class Xi{constructor(Le,Ue=0){this.step=Le,this.origin=Ue}constrain(Le){const Ue=this.origin%this.step,je=Math.round((Le-Ue)/this.step);return Ue+je*this.step}}const Ar=He("lst");class Zr{constructor(Le,Ue){this.onValueChange_=this.onValueChange_.bind(this),this.props_=Ue.props,this.element=Le.createElement("div"),this.element.classList.add(Ar()),Ue.viewProps.bindClassModifiers(this.element);const je=Le.createElement("select");je.classList.add(Ar("s")),Ue.viewProps.bindDisabled(je),this.element.appendChild(je),this.selectElement=je;const _t=Le.createElement("div");_t.classList.add(Ar("m")),_t.appendChild(cn(Le,"dropdown")),this.element.appendChild(_t),Ue.value.emitter.on("change",this.onValueChange_),this.value_=Ue.value,Ze(this.props_,"options",Gt=>{vn(this.selectElement),Gt.forEach(an=>{const kn=Le.createElement("option");kn.textContent=an.text,this.selectElement.appendChild(kn)}),this.update_()})}update_(){const Le=this.props_.get("options").map(Ue=>Ue.value);this.selectElement.selectedIndex=Le.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}}class sr{constructor(Le,Ue){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=Ue.props,this.value=Ue.value,this.viewProps=Ue.viewProps,this.view=new Zr(Le,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(Le){const Ue=Le.currentTarget;this.value.rawValue=this.props.get("options")[Ue.selectedIndex].value}}const es=He("pop");class ms{constructor(Le,Ue){this.element=Le.createElement("div"),this.element.classList.add(es()),Ue.viewProps.bindClassModifiers(this.element),Ye(Ue.shows,rt(this.element,es(void 0,"v")))}}class ts{constructor(Le,Ue){this.shows=at(!1),this.viewProps=Ue.viewProps,this.view=new ms(Le,{shows:this.shows,viewProps:this.viewProps})}}const tr=He("txt");class gs{constructor(Le,Ue){this.onChange_=this.onChange_.bind(this),this.element=Le.createElement("div"),this.element.classList.add(tr()),Ue.viewProps.bindClassModifiers(this.element),this.props_=Ue.props,this.props_.emitter.on("change",this.onChange_);const je=Le.createElement("input");je.classList.add(tr("i")),je.type="text",Ue.viewProps.bindDisabled(je),this.element.appendChild(je),this.inputElement=je,Ue.value.emitter.on("change",this.onChange_),this.value_=Ue.value,this.refresh()}refresh(){const Le=this.props_.get("formatter");this.inputElement.value=Le(this.value_.rawValue)}onChange_(){this.refresh()}}class wr{constructor(Le,Ue){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=Ue.parser,this.props=Ue.props,this.value=Ue.value,this.viewProps=Ue.viewProps,this.view=new gs(Le,{props:Ue.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(Le){const je=Le.currentTarget.value,_t=this.parser_(je);Ce(_t)||(this.value.rawValue=_t),this.view.refresh()}}function Ur(Ge){return String(Ge)}function or(Ge){return Ge==="false"?!1:!!Ge}function $r(Ge){return Ur(Ge)}class ns{constructor(Le){this.text=Le}evaluate(){return Number(this.text)}toString(){return this.text}}const _s={"**":(Ge,Le)=>Math.pow(Ge,Le),"*":(Ge,Le)=>Ge*Le,"/":(Ge,Le)=>Ge/Le,"%":(Ge,Le)=>Ge%Le,"+":(Ge,Le)=>Ge+Le,"-":(Ge,Le)=>Ge-Le,"<<":(Ge,Le)=>Ge<<Le,">>":(Ge,Le)=>Ge>>Le,">>>":(Ge,Le)=>Ge>>>Le,"&":(Ge,Le)=>Ge&Le,"^":(Ge,Le)=>Ge^Le,"|":(Ge,Le)=>Ge|Le};class As{constructor(Le,Ue,je){this.left=Ue,this.operator=Le,this.right=je}evaluate(){const Le=_s[this.operator];if(!Le)throw new Error(`unexpected binary operator: '${this.operator}`);return Le(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const zr={"+":Ge=>Ge,"-":Ge=>-Ge,"~":Ge=>~Ge};class is{constructor(Le,Ue){this.operator=Le,this.expression=Ue}evaluate(){const Le=zr[this.operator];if(!Le)throw new Error(`unexpected unary operator: '${this.operator}`);return Le(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function vr(Ge){return(Le,Ue)=>{for(let je=0;je<Ge.length;je++){const _t=Ge[je](Le,Ue);if(_t!=="")return _t}return""}}function ar(Ge,Le){var Ue;const je=Ge.substr(Le).match(/^\s+/);return(Ue=je&&je[0])!==null&&Ue!==void 0?Ue:""}function rs(Ge,Le){const Ue=Ge.substr(Le,1);return Ue.match(/^[1-9]$/)?Ue:""}function xr(Ge,Le){var Ue;const je=Ge.substr(Le).match(/^[0-9]+/);return(Ue=je&&je[0])!==null&&Ue!==void 0?Ue:""}function vt(Ge,Le){const Ue=xr(Ge,Le);if(Ue!=="")return Ue;const je=Ge.substr(Le,1);if(Le+=1,je!=="-"&&je!=="+")return"";const _t=xr(Ge,Le);return _t===""?"":je+_t}function Je(Ge,Le){const Ue=Ge.substr(Le,1);if(Le+=1,Ue.toLowerCase()!=="e")return"";const je=vt(Ge,Le);return je===""?"":Ue+je}function ut(Ge,Le){const Ue=Ge.substr(Le,1);if(Ue==="0")return Ue;const je=rs(Ge,Le);return Le+=je.length,je===""?"":je+xr(Ge,Le)}function Rt(Ge,Le){const Ue=ut(Ge,Le);if(Le+=Ue.length,Ue==="")return"";const je=Ge.substr(Le,1);if(Le+=je.length,je!==".")return"";const _t=xr(Ge,Le);return Le+=_t.length,Ue+je+_t+Je(Ge,Le)}function jt(Ge,Le){const Ue=Ge.substr(Le,1);if(Le+=Ue.length,Ue!==".")return"";const je=xr(Ge,Le);return Le+=je.length,je===""?"":Ue+je+Je(Ge,Le)}function mn(Ge,Le){const Ue=ut(Ge,Le);return Le+=Ue.length,Ue===""?"":Ue+Je(Ge,Le)}const Vn=vr([Rt,jt,mn]);function Gn(Ge,Le){var Ue;const je=Ge.substr(Le).match(/^[01]+/);return(Ue=je&&je[0])!==null&&Ue!==void 0?Ue:""}function Wn(Ge,Le){const Ue=Ge.substr(Le,2);if(Le+=Ue.length,Ue.toLowerCase()!=="0b")return"";const je=Gn(Ge,Le);return je===""?"":Ue+je}function qn(Ge,Le){var Ue;const je=Ge.substr(Le).match(/^[0-7]+/);return(Ue=je&&je[0])!==null&&Ue!==void 0?Ue:""}function ri(Ge,Le){const Ue=Ge.substr(Le,2);if(Le+=Ue.length,Ue.toLowerCase()!=="0o")return"";const je=qn(Ge,Le);return je===""?"":Ue+je}function xi(Ge,Le){var Ue;const je=Ge.substr(Le).match(/^[0-9a-f]+/i);return(Ue=je&&je[0])!==null&&Ue!==void 0?Ue:""}function Mi(Ge,Le){const Ue=Ge.substr(Le,2);if(Le+=Ue.length,Ue.toLowerCase()!=="0x")return"";const je=xi(Ge,Le);return je===""?"":Ue+je}const Ni=vr([Wn,ri,Mi]),$i=vr([Ni,Vn]);function Oi(Ge,Le){const Ue=$i(Ge,Le);return Le+=Ue.length,Ue===""?null:{evaluable:new ns(Ue),cursor:Le}}function vi(Ge,Le){const Ue=Ge.substr(Le,1);if(Le+=Ue.length,Ue!=="(")return null;const je=ss(Ge,Le);if(!je)return null;Le=je.cursor,Le+=ar(Ge,Le).length;const _t=Ge.substr(Le,1);return Le+=_t.length,_t!==")"?null:{evaluable:je.evaluable,cursor:Le}}function Dr(Ge,Le){var Ue;return(Ue=Oi(Ge,Le))!==null&&Ue!==void 0?Ue:vi(Ge,Le)}function vs(Ge,Le){const Ue=Dr(Ge,Le);if(Ue)return Ue;const je=Ge.substr(Le,1);if(Le+=je.length,je!=="+"&&je!=="-"&&je!=="~")return null;const _t=vs(Ge,Le);return _t?(Le=_t.cursor,{cursor:Le,evaluable:new is(je,_t.evaluable)}):null}function Qs(Ge,Le,Ue){Ue+=ar(Le,Ue).length;const je=Ge.filter(_t=>Le.startsWith(_t,Ue))[0];return je?(Ue+=je.length,Ue+=ar(Le,Ue).length,{cursor:Ue,operator:je}):null}function Sr(Ge,Le){return(Ue,je)=>{const _t=Ge(Ue,je);if(!_t)return null;je=_t.cursor;let Gt=_t.evaluable;for(;;){const an=Qs(Le,Ue,je);if(!an)break;je=an.cursor;const kn=Ge(Ue,je);if(!kn)return null;je=kn.cursor,Gt=new As(an.operator,Gt,kn.evaluable)}return Gt?{cursor:je,evaluable:Gt}:null}}const Ls=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((Ge,Le)=>Sr(Ge,Le),vs);function ss(Ge,Le){return Le+=ar(Ge,Le).length,Ls(Ge,Le)}function ks(Ge){const Le=ss(Ge,0);return!Le||Le.cursor+ar(Ge,Le.cursor).length!==Ge.length?null:Le.evaluable}function lr(Ge){var Le;const Ue=ks(Ge);return(Le=Ue==null?void 0:Ue.evaluate())!==null&&Le!==void 0?Le:null}function dr(Ge){if(typeof Ge=="number")return Ge;if(typeof Ge=="string"){const Le=lr(Ge);if(!Ce(Le))return Le}return 0}function Ws(Ge){return String(Ge)}function Ui(Ge){return Le=>Le.toFixed(Math.max(Math.min(Ge,20),0))}const Fs=Ui(0);function Gr(Ge){return Fs(Ge)+"%"}function ys(Ge){return String(Ge)}function yr(Ge){return Ge}function Br({primary:Ge,secondary:Le,forward:Ue,backward:je}){let _t=!1;function Gt(an){_t||(_t=!0,an(),_t=!1)}Ge.emitter.on("change",an=>{Gt(()=>{Le.setRawValue(Ue(Ge,Le),an.options)})}),Le.emitter.on("change",an=>{Gt(()=>{Ge.setRawValue(je(Ge,Le),an.options)}),Gt(()=>{Le.setRawValue(Ue(Ge,Le),an.options)})}),Gt(()=>{Le.setRawValue(Ue(Ge,Le),{forceEmit:!1,last:!0})})}function zi(Ge,Le){const Ue=Ge*(Le.altKey?.1:1)*(Le.shiftKey?10:1);return Le.upKey?+Ue:Le.downKey?-Ue:0}function Hr(Ge){return{altKey:Ge.altKey,downKey:Ge.key==="ArrowDown",shiftKey:Ge.shiftKey,upKey:Ge.key==="ArrowUp"}}function cr(Ge){return{altKey:Ge.altKey,downKey:Ge.key==="ArrowLeft",shiftKey:Ge.shiftKey,upKey:Ge.key==="ArrowRight"}}function Vs(Ge){return Ge==="ArrowUp"||Ge==="ArrowDown"}function os(Ge){return Vs(Ge)||Ge==="ArrowLeft"||Ge==="ArrowRight"}function Es(Ge,Le){var Ue,je;const _t=Le.ownerDocument.defaultView,Gt=Le.getBoundingClientRect();return{x:Ge.pageX-(((Ue=_t&&_t.scrollX)!==null&&Ue!==void 0?Ue:0)+Gt.left),y:Ge.pageY-(((je=_t&&_t.scrollY)!==null&&je!==void 0?je:0)+Gt.top)}}class Tr{constructor(Le){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=Le,this.emitter=new ze,Le.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),Le.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),Le.addEventListener("touchend",this.onTouchEnd_),Le.addEventListener("mousedown",this.onMouseDown_)}computePosition_(Le){const Ue=this.elem_.getBoundingClientRect();return{bounds:{width:Ue.width,height:Ue.height},point:Le?{x:Le.x,y:Le.y}:null}}onMouseDown_(Le){var Ue;Le.preventDefault(),(Ue=Le.currentTarget)===null||Ue===void 0||Ue.focus();const je=this.elem_.ownerDocument;je.addEventListener("mousemove",this.onDocumentMouseMove_),je.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:Le.altKey,data:this.computePosition_(Es(Le,this.elem_)),sender:this,shiftKey:Le.shiftKey})}onDocumentMouseMove_(Le){this.emitter.emit("move",{altKey:Le.altKey,data:this.computePosition_(Es(Le,this.elem_)),sender:this,shiftKey:Le.shiftKey})}onDocumentMouseUp_(Le){const Ue=this.elem_.ownerDocument;Ue.removeEventListener("mousemove",this.onDocumentMouseMove_),Ue.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:Le.altKey,data:this.computePosition_(Es(Le,this.elem_)),sender:this,shiftKey:Le.shiftKey})}onTouchStart_(Le){Le.preventDefault();const Ue=Le.targetTouches.item(0),je=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:Le.altKey,data:this.computePosition_(Ue?{x:Ue.clientX-je.left,y:Ue.clientY-je.top}:void 0),sender:this,shiftKey:Le.shiftKey}),this.lastTouch_=Ue}onTouchMove_(Le){const Ue=Le.targetTouches.item(0),je=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:Le.altKey,data:this.computePosition_(Ue?{x:Ue.clientX-je.left,y:Ue.clientY-je.top}:void 0),sender:this,shiftKey:Le.shiftKey}),this.lastTouch_=Ue}onTouchEnd_(Le){var Ue;const je=(Ue=Le.targetTouches.item(0))!==null&&Ue!==void 0?Ue:this.lastTouch_,_t=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:Le.altKey,data:this.computePosition_(je?{x:je.clientX-_t.left,y:je.clientY-_t.top}:void 0),sender:this,shiftKey:Le.shiftKey})}}function Ri(Ge,Le,Ue,je,_t){const Gt=(Ge-Le)/(Ue-Le);return je+Gt*(_t-je)}function bs(Ge){return String(Ge.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function Li(Ge,Le,Ue){return Math.min(Math.max(Ge,Le),Ue)}function Lr(Ge,Le){return(Ge%Le+Le)%Le}const qi=He("txt");class Cs{constructor(Le,Ue){this.onChange_=this.onChange_.bind(this),this.props_=Ue.props,this.props_.emitter.on("change",this.onChange_),this.element=Le.createElement("div"),this.element.classList.add(qi(),qi(void 0,"num")),Ue.arrayPosition&&this.element.classList.add(qi(void 0,Ue.arrayPosition)),Ue.viewProps.bindClassModifiers(this.element);const je=Le.createElement("input");je.classList.add(qi("i")),je.type="text",Ue.viewProps.bindDisabled(je),this.element.appendChild(je),this.inputElement=je,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=Ue.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(qi()),this.inputElement.classList.add(qi("i"));const _t=Le.createElement("div");_t.classList.add(qi("k")),this.element.appendChild(_t),this.knobElement=_t;const Gt=Le.createElementNS(ln,"svg");Gt.classList.add(qi("g")),this.knobElement.appendChild(Gt);const an=Le.createElementNS(ln,"path");an.classList.add(qi("gb")),Gt.appendChild(an),this.guideBodyElem_=an;const kn=Le.createElementNS(ln,"path");kn.classList.add(qi("gh")),Gt.appendChild(kn),this.guideHeadElem_=kn;const ti=Le.createElement("div");ti.classList.add(He("tt")()),this.knobElement.appendChild(ti),this.tooltipElem_=ti,Ue.value.emitter.on("change",this.onChange_),this.value=Ue.value,this.refresh()}onDraggingChange_(Le){if(Le.rawValue===null){this.element.classList.remove(qi(void 0,"drg"));return}this.element.classList.add(qi(void 0,"drg"));const Ue=Le.rawValue/this.props_.get("draggingScale"),je=Ue+(Ue>0?-1:Ue<0?1:0),_t=Li(-je,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${je+_t},0 L${je},4 L${je+_t},8`,`M ${Ue},-1 L${Ue},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${Ue},4`);const Gt=this.props_.get("formatter");this.tooltipElem_.textContent=Gt(this.value.rawValue),this.tooltipElem_.style.left=`${Ue}px`}refresh(){const Le=this.props_.get("formatter");this.inputElement.value=Le(this.value.rawValue)}onChange_(){this.refresh()}}class Qr{constructor(Le,Ue){var je;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=Ue.baseStep,this.parser_=Ue.parser,this.props=Ue.props,this.sliderProps_=(je=Ue.sliderProps)!==null&&je!==void 0?je:null,this.value=Ue.value,this.viewProps=Ue.viewProps,this.dragging_=at(null),this.view=new Cs(Le,{arrayPosition:Ue.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const _t=new Tr(this.view.knobElement);_t.emitter.on("down",this.onPointerDown_),_t.emitter.on("move",this.onPointerMove_),_t.emitter.on("up",this.onPointerUp_)}constrainValue_(Le){var Ue,je;const _t=(Ue=this.sliderProps_)===null||Ue===void 0?void 0:Ue.get("minValue"),Gt=(je=this.sliderProps_)===null||je===void 0?void 0:je.get("maxValue");let an=Le;return _t!==void 0&&(an=Math.max(an,_t)),Gt!==void 0&&(an=Math.min(an,Gt)),an}onInputChange_(Le){const je=Le.currentTarget.value,_t=this.parser_(je);Ce(_t)||(this.value.rawValue=this.constrainValue_(_t)),this.view.refresh()}onInputKeyDown_(Le){const Ue=zi(this.baseStep_,Hr(Le));Ue!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+Ue),{forceEmit:!1,last:!1})}onInputKeyUp_(Le){zi(this.baseStep_,Hr(Le))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(Le){if(!Le.point)return null;const Ue=Le.point.x-Le.bounds.width/2;return this.constrainValue_(this.originRawValue_+Ue*this.props.get("draggingScale"))}onPointerMove_(Le){const Ue=this.computeDraggingValue_(Le.data);Ue!==null&&(this.value.setRawValue(Ue,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(Le){const Ue=this.computeDraggingValue_(Le.data);Ue!==null&&(this.value.setRawValue(Ue,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}const ws=He("sld");class ji{constructor(Le,Ue){this.onChange_=this.onChange_.bind(this),this.props_=Ue.props,this.props_.emitter.on("change",this.onChange_),this.element=Le.createElement("div"),this.element.classList.add(ws()),Ue.viewProps.bindClassModifiers(this.element);const je=Le.createElement("div");je.classList.add(ws("t")),Ue.viewProps.bindTabIndex(je),this.element.appendChild(je),this.trackElement=je;const _t=Le.createElement("div");_t.classList.add(ws("k")),this.trackElement.appendChild(_t),this.knobElement=_t,Ue.value.emitter.on("change",this.onChange_),this.value=Ue.value,this.update_()}update_(){const Le=Li(Ri(this.value.rawValue,this.props_.get("minValue"),this.props_.get("maxValue"),0,100),0,100);this.knobElement.style.width=`${Le}%`}onChange_(){this.update_()}}class xs{constructor(Le,Ue){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=Ue.baseStep,this.value=Ue.value,this.viewProps=Ue.viewProps,this.props=Ue.props,this.view=new ji(Le,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Tr(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(Le,Ue){Le.point&&this.value.setRawValue(Ri(Li(Le.point.x,0,Le.bounds.width),0,Le.bounds.width,this.props.get("minValue"),this.props.get("maxValue")),Ue)}onPointerDownOrMove_(Le){this.handlePointerEvent_(Le.data,{forceEmit:!1,last:!1})}onPointerUp_(Le){this.handlePointerEvent_(Le.data,{forceEmit:!0,last:!0})}onKeyDown_(Le){const Ue=zi(this.baseStep_,cr(Le));Ue!==0&&this.value.setRawValue(this.value.rawValue+Ue,{forceEmit:!1,last:!1})}onKeyUp_(Le){zi(this.baseStep_,cr(Le))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Wr=He("sldtxt");class Ss{constructor(Le,Ue){this.element=Le.createElement("div"),this.element.classList.add(Wr());const je=Le.createElement("div");je.classList.add(Wr("s")),this.sliderView_=Ue.sliderView,je.appendChild(this.sliderView_.element),this.element.appendChild(je);const _t=Le.createElement("div");_t.classList.add(Wr("t")),this.textView_=Ue.textView,_t.appendChild(this.textView_.element),this.element.appendChild(_t)}}class as{constructor(Le,Ue){this.value=Ue.value,this.viewProps=Ue.viewProps,this.sliderC_=new xs(Le,{baseStep:Ue.baseStep,props:Ue.sliderProps,value:Ue.value,viewProps:this.viewProps}),this.textC_=new Qr(Le,{baseStep:Ue.baseStep,parser:Ue.parser,props:Ue.textProps,sliderProps:Ue.sliderProps,value:Ue.value,viewProps:Ue.viewProps}),this.view=new Ss(Le,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}}function nr(Ge,Le){Ge.write(Le)}function qr(Ge){const Le=zt;if(Array.isArray(Ge))return Le.required.array(Le.required.object({text:Le.required.string,value:Le.required.raw}))(Ge).value;if(typeof Ge=="object")return Le.required.raw(Ge).value}function Ts(Ge){if(Ge==="inline"||Ge==="popup")return Ge}function fr(Ge){const Le=zt;return Le.required.object({max:Le.optional.number,min:Le.optional.number,step:Le.optional.number})(Ge).value}function Ns(Ge){if(Array.isArray(Ge))return Ge;const Le=[];return Object.keys(Ge).forEach(Ue=>{Le.push({text:Ue,value:Ge[Ue]})}),Le}function Is(Ge){return Ce(Ge)?null:new Cr(Ns(Ge))}function qs(Ge){const Le=Ge?Wi(Ge,Xi):null;return Le?Le.step:null}function ls(Ge,Le){const Ue=Ge&&Wi(Ge,Xi);return Ue?bs(Ue.step):Math.max(bs(Le),2)}function Ir(Ge){const Le=qs(Ge);return Le??1}function Pr(Ge,Le){var Ue;const je=Ge&&Wi(Ge,Xi),_t=Math.abs((Ue=je==null?void 0:je.step)!==null&&Ue!==void 0?Ue:Le);return _t===0?.1:Math.pow(10,Math.floor(Math.log10(_t))-1)}const jr=He("ckb");class Kr{constructor(Le,Ue){this.onValueChange_=this.onValueChange_.bind(this),this.element=Le.createElement("div"),this.element.classList.add(jr()),Ue.viewProps.bindClassModifiers(this.element);const je=Le.createElement("label");je.classList.add(jr("l")),this.element.appendChild(je);const _t=Le.createElement("input");_t.classList.add(jr("i")),_t.type="checkbox",je.appendChild(_t),this.inputElement=_t,Ue.viewProps.bindDisabled(this.inputElement);const Gt=Le.createElement("div");Gt.classList.add(jr("w")),je.appendChild(Gt);const an=cn(Le,"check");Gt.appendChild(an),Ue.value.emitter.on("change",this.onValueChange_),this.value=Ue.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class Os{constructor(Le,Ue){this.onInputChange_=this.onInputChange_.bind(this),this.value=Ue.value,this.viewProps=Ue.viewProps,this.view=new Kr(Le,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(Le){const Ue=Le.currentTarget;this.value.rawValue=Ue.checked}}function Us(Ge){const Le=[],Ue=Is(Ge.options);return Ue&&Le.push(Ue),new Yi(Le)}const cs={id:"input-bool",type:"input",accept:(Ge,Le)=>{if(typeof Ge!="boolean")return null;const je=Vt(Le,{options:zt.optional.custom(qr)});return je?{initialValue:Ge,params:je}:null},binding:{reader:Ge=>or,constraint:Ge=>Us(Ge.params),writer:Ge=>nr},controller:Ge=>{const Le=Ge.document,Ue=Ge.value,je=Ge.constraint,_t=je&&Wi(je,Cr);return _t?new sr(Le,{props:new Xe({options:_t.values.value("options")}),value:Ue,viewProps:Ge.viewProps}):new Os(Le,{value:Ue,viewProps:Ge.viewProps})}},Rr=He("col");class Ps{constructor(Le,Ue){this.element=Le.createElement("div"),this.element.classList.add(Rr()),Ue.foldable.bindExpandedClass(this.element,Rr(void 0,"expanded")),Ze(Ue.foldable,"completed",rt(this.element,Rr(void 0,"cpl")));const je=Le.createElement("div");je.classList.add(Rr("h")),this.element.appendChild(je);const _t=Le.createElement("div");_t.classList.add(Rr("s")),je.appendChild(_t),this.swatchElement=_t;const Gt=Le.createElement("div");if(Gt.classList.add(Rr("t")),je.appendChild(Gt),this.textElement=Gt,Ue.pickerLayout==="inline"){const an=Le.createElement("div");an.classList.add(Rr("p")),this.element.appendChild(an),this.pickerElement=an}else this.pickerElement=null}}function js(Ge,Le,Ue){const je=Li(Ge/255,0,1),_t=Li(Le/255,0,1),Gt=Li(Ue/255,0,1),an=Math.max(je,_t,Gt),kn=Math.min(je,_t,Gt),ti=an-kn;let ii=0,yi=0;const Ci=(kn+an)/2;return ti!==0&&(yi=ti/(1-Math.abs(an+kn-1)),je===an?ii=(_t-Gt)/ti:_t===an?ii=2+(Gt-je)/ti:ii=4+(je-_t)/ti,ii=ii/6+(ii<0?1:0)),[ii*360,yi*100,Ci*100]}function Ks(Ge,Le,Ue){const je=(Ge%360+360)%360,_t=Li(Le/100,0,1),Gt=Li(Ue/100,0,1),an=(1-Math.abs(2*Gt-1))*_t,kn=an*(1-Math.abs(je/60%2-1)),ti=Gt-an/2;let ii,yi,Ci;return je>=0&&je<60?[ii,yi,Ci]=[an,kn,0]:je>=60&&je<120?[ii,yi,Ci]=[kn,an,0]:je>=120&&je<180?[ii,yi,Ci]=[0,an,kn]:je>=180&&je<240?[ii,yi,Ci]=[0,kn,an]:je>=240&&je<300?[ii,yi,Ci]=[kn,0,an]:[ii,yi,Ci]=[an,0,kn],[(ii+ti)*255,(yi+ti)*255,(Ci+ti)*255]}function Ys(Ge,Le,Ue){const je=Li(Ge/255,0,1),_t=Li(Le/255,0,1),Gt=Li(Ue/255,0,1),an=Math.max(je,_t,Gt),kn=Math.min(je,_t,Gt),ti=an-kn;let ii;ti===0?ii=0:an===je?ii=60*(((_t-Gt)/ti%6+6)%6):an===_t?ii=60*((Gt-je)/ti+2):ii=60*((je-_t)/ti+4);const yi=an===0?0:ti/an,Ci=an;return[ii,yi*100,Ci*100]}function $s(Ge,Le,Ue){const je=Lr(Ge,360),_t=Li(Le/100,0,1),Gt=Li(Ue/100,0,1),an=Gt*_t,kn=an*(1-Math.abs(je/60%2-1)),ti=Gt-an;let ii,yi,Ci;return je>=0&&je<60?[ii,yi,Ci]=[an,kn,0]:je>=60&&je<120?[ii,yi,Ci]=[kn,an,0]:je>=120&&je<180?[ii,yi,Ci]=[0,an,kn]:je>=180&&je<240?[ii,yi,Ci]=[0,kn,an]:je>=240&&je<300?[ii,yi,Ci]=[kn,0,an]:[ii,yi,Ci]=[an,0,kn],[(ii+ti)*255,(yi+ti)*255,(Ci+ti)*255]}function ot(Ge,Le,Ue){const je=Ue+Le*(100-Math.abs(2*Ue-100))/200;return[Ge,je!==0?Le*(100-Math.abs(2*Ue-100))/je:0,Ue+Le*(100-Math.abs(2*Ue-100))/(2*100)]}function Qe(Ge,Le,Ue){const je=100-Math.abs(Ue*(200-Le)/100-100);return[Ge,je!==0?Le*Ue/je:0,Ue*(200-Le)/(2*100)]}function tt(Ge){return[Ge[0],Ge[1],Ge[2]]}function pt(Ge,Le){return[Ge[0],Ge[1],Ge[2],Le]}const Lt={hsl:{hsl:(Ge,Le,Ue)=>[Ge,Le,Ue],hsv:ot,rgb:Ks},hsv:{hsl:Qe,hsv:(Ge,Le,Ue)=>[Ge,Le,Ue],rgb:$s},rgb:{hsl:js,hsv:Ys,rgb:(Ge,Le,Ue)=>[Ge,Le,Ue]}};function rn(Ge,Le){return[Le==="float"?1:Ge==="rgb"?255:360,Le==="float"?1:Ge==="rgb"?255:100,Le==="float"?1:Ge==="rgb"?255:100]}function An(Ge,Le){return Ge===Le?Le:Lr(Ge,Le)}function On(Ge,Le,Ue){var je;const _t=rn(Le,Ue);return[Le==="rgb"?Li(Ge[0],0,_t[0]):An(Ge[0],_t[0]),Li(Ge[1],0,_t[1]),Li(Ge[2],0,_t[2]),Li((je=Ge[3])!==null&&je!==void 0?je:1,0,1)]}function mi(Ge,Le,Ue,je){const _t=rn(Le,Ue),Gt=rn(Le,je);return Ge.map((an,kn)=>an/_t[kn]*Gt[kn])}function Ji(Ge,Le,Ue){const je=mi(Ge,Le.mode,Le.type,"int"),_t=Lt[Le.mode][Ue.mode](...je);return mi(_t,Ue.mode,"int",Ue.type)}function Zi(Ge,Le){return typeof Ge!="object"||Ce(Ge)?!1:Le in Ge&&typeof Ge[Le]=="number"}class li{static black(Le="int"){return new li([0,0,0],"rgb",Le)}static fromObject(Le,Ue="int"){const je="a"in Le?[Le.r,Le.g,Le.b,Le.a]:[Le.r,Le.g,Le.b];return new li(je,"rgb",Ue)}static toRgbaObject(Le,Ue="int"){return Le.toRgbaObject(Ue)}static isRgbColorObject(Le){return Zi(Le,"r")&&Zi(Le,"g")&&Zi(Le,"b")}static isRgbaColorObject(Le){return this.isRgbColorObject(Le)&&Zi(Le,"a")}static isColorObject(Le){return this.isRgbColorObject(Le)}static equals(Le,Ue){if(Le.mode!==Ue.mode)return!1;const je=Le.comps_,_t=Ue.comps_;for(let Gt=0;Gt<je.length;Gt++)if(je[Gt]!==_t[Gt])return!1;return!0}constructor(Le,Ue,je="int"){this.mode=Ue,this.type=je,this.comps_=On(Le,Ue,je)}getComponents(Le,Ue="int"){return pt(Ji(tt(this.comps_),{mode:this.mode,type:this.type},{mode:Le??this.mode,type:Ue}),this.comps_[3])}toRgbaObject(Le="int"){const Ue=this.getComponents("rgb",Le);return{r:Ue[0],g:Ue[1],b:Ue[2],a:Ue[3]}}}const Er=He("colp");class Xs{constructor(Le,Ue){this.alphaViews_=null,this.element=Le.createElement("div"),this.element.classList.add(Er()),Ue.viewProps.bindClassModifiers(this.element);const je=Le.createElement("div");je.classList.add(Er("hsv"));const _t=Le.createElement("div");_t.classList.add(Er("sv")),this.svPaletteView_=Ue.svPaletteView,_t.appendChild(this.svPaletteView_.element),je.appendChild(_t);const Gt=Le.createElement("div");Gt.classList.add(Er("h")),this.hPaletteView_=Ue.hPaletteView,Gt.appendChild(this.hPaletteView_.element),je.appendChild(Gt),this.element.appendChild(je);const an=Le.createElement("div");if(an.classList.add(Er("rgb")),this.textView_=Ue.textView,an.appendChild(this.textView_.element),this.element.appendChild(an),Ue.alphaViews){this.alphaViews_={palette:Ue.alphaViews.palette,text:Ue.alphaViews.text};const kn=Le.createElement("div");kn.classList.add(Er("a"));const ti=Le.createElement("div");ti.classList.add(Er("ap")),ti.appendChild(this.alphaViews_.palette.element),kn.appendChild(ti);const ii=Le.createElement("div");ii.classList.add(Er("at")),ii.appendChild(this.alphaViews_.text.element),kn.appendChild(ii),this.element.appendChild(kn)}}get allFocusableElements(){const Le=[this.svPaletteView_.element,this.hPaletteView_.element,this.textView_.modeSelectElement,...this.textView_.textViews.map(Ue=>Ue.inputElement)];return this.alphaViews_&&Le.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),Le}}function Zo(Ge){return Ge==="int"?"int":Ge==="float"?"float":void 0}function Js(Ge){const Le=zt;return Vt(Ge,{alpha:Le.optional.boolean,color:Le.optional.object({alpha:Le.optional.boolean,type:Le.optional.custom(Zo)}),expanded:Le.optional.boolean,picker:Le.optional.custom(Ts)})}function Yr(Ge){return Ge?.1:1}function Xr(Ge){var Le;return(Le=Ge.color)===null||Le===void 0?void 0:Le.type}function la(Ge,Le){return Ge.alpha===Le.alpha&&Ge.mode===Le.mode&&Ge.notation===Le.notation&&Ge.type===Le.type}function ur(Ge,Le){const Ue=Ge.match(/^(.+)%$/);return Math.min(Ue?parseFloat(Ue[1])*.01*Le:parseFloat(Ge),Le)}const ga={deg:Ge=>Ge,grad:Ge=>Ge*360/400,rad:Ge=>Ge*360/(2*Math.PI),turn:Ge=>Ge*360};function mo(Ge){const Le=Ge.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!Le)return parseFloat(Ge);const Ue=parseFloat(Le[1]),je=Le[2];return ga[je](Ue)}function go(Ge){const Le=Ge.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!Le)return null;const Ue=[ur(Le[1],255),ur(Le[2],255),ur(Le[3],255)];return isNaN(Ue[0])||isNaN(Ue[1])||isNaN(Ue[2])?null:Ue}function _o(Ge){return Le=>{const Ue=go(Le);return Ue?new li(Ue,"rgb",Ge):null}}function Ao(Ge){const Le=Ge.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!Le)return null;const Ue=[ur(Le[1],255),ur(Le[2],255),ur(Le[3],255),ur(Le[4],1)];return isNaN(Ue[0])||isNaN(Ue[1])||isNaN(Ue[2])||isNaN(Ue[3])?null:Ue}function vo(Ge){return Le=>{const Ue=Ao(Le);return Ue?new li(Ue,"rgb",Ge):null}}function yo(Ge){const Le=Ge.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!Le)return null;const Ue=[mo(Le[1]),ur(Le[2],100),ur(Le[3],100)];return isNaN(Ue[0])||isNaN(Ue[1])||isNaN(Ue[2])?null:Ue}function Eo(Ge){return Le=>{const Ue=yo(Le);return Ue?new li(Ue,"hsl",Ge):null}}function bo(Ge){const Le=Ge.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!Le)return null;const Ue=[mo(Le[1]),ur(Le[2],100),ur(Le[3],100),ur(Le[4],1)];return isNaN(Ue[0])||isNaN(Ue[1])||isNaN(Ue[2])||isNaN(Ue[3])?null:Ue}function Co(Ge){return Le=>{const Ue=bo(Le);return Ue?new li(Ue,"hsl",Ge):null}}function wo(Ge){const Le=Ge.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(Le)return[parseInt(Le[1]+Le[1],16),parseInt(Le[2]+Le[2],16),parseInt(Le[3]+Le[3],16)];const Ue=Ge.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return Ue?[parseInt(Ue[1],16),parseInt(Ue[2],16),parseInt(Ue[3],16)]:null}function La(Ge){const Le=wo(Ge);return Le?new li(Le,"rgb","int"):null}function xo(Ge){const Le=Ge.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(Le)return[parseInt(Le[1]+Le[1],16),parseInt(Le[2]+Le[2],16),parseInt(Le[3]+Le[3],16),Ri(parseInt(Le[4]+Le[4],16),0,255,0,1)];const Ue=Ge.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return Ue?[parseInt(Ue[1],16),parseInt(Ue[2],16),parseInt(Ue[3],16),Ri(parseInt(Ue[4],16),0,255,0,1)]:null}function ja(Ge){const Le=xo(Ge);return Le?new li(Le,"rgb","int"):null}function So(Ge){const Le=Ge.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!Le)return null;const Ue=[parseFloat(Le[1]),parseFloat(Le[2]),parseFloat(Le[3])];return isNaN(Ue[0])||isNaN(Ue[1])||isNaN(Ue[2])?null:Ue}function To(Ge){return Le=>{const Ue=So(Le);return Ue?new li(Ue,"rgb",Ge):null}}function Io(Ge){const Le=Ge.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!Le)return null;const Ue=[parseFloat(Le[1]),parseFloat(Le[2]),parseFloat(Le[3]),parseFloat(Le[4])];return isNaN(Ue[0])||isNaN(Ue[1])||isNaN(Ue[2])||isNaN(Ue[3])?null:Ue}function Po(Ge){return Le=>{const Ue=Io(Le);return Ue?new li(Ue,"rgb",Ge):null}}const Ka=[{parser:wo,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:xo,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:go,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:Ao,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:yo,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:bo,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:So,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:Io,result:{alpha:!0,mode:"rgb",notation:"object"}}];function Xa(Ge){return Ka.reduce((Le,{parser:Ue,result:je})=>Le||(Ue(Ge)?je:null),null)}function Zs(Ge,Le="int"){const Ue=Xa(Ge);return Ue?Ue.notation==="hex"&&Le!=="float"?Object.assign(Object.assign({},Ue),{type:"int"}):Ue.notation==="func"?Object.assign(Object.assign({},Ue),{type:Le}):null:null}const Ro={int:[La,ja,_o("int"),vo("int"),Eo("int"),Co("int"),To("int"),Po("int")],float:[_o("float"),vo("float"),Eo("float"),Co("float"),To("float"),Po("float")]};function el(Ge){const Le=Ro[Ge];return Ue=>{if(typeof Ue!="string")return li.black(Ge);const je=Le.reduce((_t,Gt)=>_t||Gt(Ue),null);return je??li.black(Ge)}}function eo(Ge){const Le=Ro[Ge];return Ue=>Le.reduce((je,_t)=>je||_t(Ue),null)}function Mo(Ge){const Le=Li(Math.floor(Ge),0,255).toString(16);return Le.length===1?`0${Le}`:Le}function Do(Ge,Le="#"){const Ue=tt(Ge.getComponents("rgb")).map(Mo).join("");return`${Le}${Ue}`}function to(Ge,Le="#"){const Ue=Ge.getComponents("rgb"),je=[Ue[0],Ue[1],Ue[2],Ue[3]*255].map(Mo).join("");return`${Le}${je}`}function Bo(Ge,Le){const Ue=Ui(Le==="float"?2:0);return`rgb(${tt(Ge.getComponents("rgb",Le)).map(_t=>Ue(_t)).join(", ")})`}function tl(Ge){return Le=>Bo(Le,Ge)}function zs(Ge,Le){const Ue=Ui(2),je=Ui(Le==="float"?2:0);return`rgba(${Ge.getComponents("rgb",Le).map((Gt,an)=>(an===3?Ue:je)(Gt)).join(", ")})`}function nl(Ge){return Le=>zs(Le,Ge)}function il(Ge){const Le=[Ui(0),Gr,Gr];return`hsl(${tt(Ge.getComponents("hsl")).map((je,_t)=>Le[_t](je)).join(", ")})`}function rl(Ge){const Le=[Ui(0),Gr,Gr,Ui(2)];return`hsla(${Ge.getComponents("hsl").map((je,_t)=>Le[_t](je)).join(", ")})`}function Lo(Ge,Le){const Ue=Ui(Le==="float"?2:0),je=["r","g","b"];return`{${tt(Ge.getComponents("rgb",Le)).map((Gt,an)=>`${je[an]}: ${Ue(Gt)}`).join(", ")}}`}function sl(Ge){return Le=>Lo(Le,Ge)}function ko(Ge,Le){const Ue=Ui(2),je=Ui(Le==="float"?2:0),_t=["r","g","b","a"];return`{${Ge.getComponents("rgb",Le).map((an,kn)=>{const ti=kn===3?Ue:je;return`${_t[kn]}: ${ti(an)}`}).join(", ")}}`}function ol(Ge){return Le=>ko(Le,Ge)}const al=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:Do},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:to},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:il},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:rl},...["int","float"].reduce((Ge,Le)=>[...Ge,{format:{alpha:!1,mode:"rgb",notation:"func",type:Le},stringifier:tl(Le)},{format:{alpha:!0,mode:"rgb",notation:"func",type:Le},stringifier:nl(Le)},{format:{alpha:!1,mode:"rgb",notation:"object",type:Le},stringifier:sl(Le)},{format:{alpha:!0,mode:"rgb",notation:"object",type:Le},stringifier:ol(Le)}],[])];function no(Ge){return al.reduce((Le,Ue)=>Le||(la(Ue.format,Ge)?Ue.stringifier:null),null)}const Rs=He("apl");class ll{constructor(Le,Ue){this.onValueChange_=this.onValueChange_.bind(this),this.value=Ue.value,this.value.emitter.on("change",this.onValueChange_),this.element=Le.createElement("div"),this.element.classList.add(Rs()),Ue.viewProps.bindClassModifiers(this.element),Ue.viewProps.bindTabIndex(this.element);const je=Le.createElement("div");je.classList.add(Rs("b")),this.element.appendChild(je);const _t=Le.createElement("div");_t.classList.add(Rs("c")),je.appendChild(_t),this.colorElem_=_t;const Gt=Le.createElement("div");Gt.classList.add(Rs("m")),this.element.appendChild(Gt),this.markerElem_=Gt;const an=Le.createElement("div");an.classList.add(Rs("p")),this.markerElem_.appendChild(an),this.previewElem_=an,this.update_()}update_(){const Le=this.value.rawValue,Ue=Le.getComponents("rgb"),je=new li([Ue[0],Ue[1],Ue[2],0],"rgb"),_t=new li([Ue[0],Ue[1],Ue[2],255],"rgb"),Gt=["to right",zs(je),zs(_t)];this.colorElem_.style.background=`linear-gradient(${Gt.join(",")})`,this.previewElem_.style.backgroundColor=zs(Le);const an=Ri(Ue[3],0,1,0,100);this.markerElem_.style.left=`${an}%`}onValueChange_(){this.update_()}}class cl{constructor(Le,Ue){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=Ue.value,this.viewProps=Ue.viewProps,this.view=new ll(Le,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Tr(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(Le,Ue){if(!Le.point)return;const je=Le.point.x/Le.bounds.width,_t=this.value.rawValue,[Gt,an,kn]=_t.getComponents("hsv");this.value.setRawValue(new li([Gt,an,kn,je],"hsv"),Ue)}onPointerDown_(Le){this.handlePointerEvent_(Le.data,{forceEmit:!1,last:!1})}onPointerMove_(Le){this.handlePointerEvent_(Le.data,{forceEmit:!1,last:!1})}onPointerUp_(Le){this.handlePointerEvent_(Le.data,{forceEmit:!0,last:!0})}onKeyDown_(Le){const Ue=zi(Yr(!0),cr(Le));if(Ue===0)return;const je=this.value.rawValue,[_t,Gt,an,kn]=je.getComponents("hsv");this.value.setRawValue(new li([_t,Gt,an,kn+Ue],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(Le){zi(Yr(!0),cr(Le))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const us=He("coltxt");function ul(Ge){const Le=Ge.createElement("select"),Ue=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"}];return Le.appendChild(Ue.reduce((je,_t)=>{const Gt=Ge.createElement("option");return Gt.textContent=_t.text,Gt.value=_t.value,je.appendChild(Gt),je},Ge.createDocumentFragment())),Le}class hl{constructor(Le,Ue){this.element=Le.createElement("div"),this.element.classList.add(us()),Ue.viewProps.bindClassModifiers(this.element);const je=Le.createElement("div");je.classList.add(us("m")),this.modeElem_=ul(Le),this.modeElem_.classList.add(us("ms")),je.appendChild(this.modeSelectElement),Ue.viewProps.bindDisabled(this.modeElem_);const _t=Le.createElement("div");_t.classList.add(us("mm")),_t.appendChild(cn(Le,"dropdown")),je.appendChild(_t),this.element.appendChild(je);const Gt=Le.createElement("div");Gt.classList.add(us("w")),this.element.appendChild(Gt),this.textsElem_=Gt,this.textViews_=Ue.textViews,this.applyTextViews_(),Ye(Ue.colorMode,an=>{this.modeElem_.value=an})}get modeSelectElement(){return this.modeElem_}get textViews(){return this.textViews_}set textViews(Le){this.textViews_=Le,this.applyTextViews_()}applyTextViews_(){vn(this.textsElem_);const Le=this.element.ownerDocument;this.textViews_.forEach(Ue=>{const je=Le.createElement("div");je.classList.add(us("c")),je.appendChild(Ue.element),this.textsElem_.appendChild(je)})}}function dl(Ge){return Ui(Ge==="float"?2:0)}function pl(Ge,Le,Ue){const je=rn(Ge,Le)[Ue];return new _r({min:0,max:je})}function io(Ge,Le,Ue){return new Qr(Ge,{arrayPosition:Ue===0?"fst":Ue===2?"lst":"mid",baseStep:Yr(!1),parser:Le.parser,props:Xe.fromObject({draggingScale:Le.colorType==="float"?.01:1,formatter:dl(Le.colorType)}),value:at(0,{constraint:pl(Le.colorMode,Le.colorType,Ue)}),viewProps:Le.viewProps})}class ml{constructor(Le,Ue){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=Ue.colorType,this.parser_=Ue.parser,this.value=Ue.value,this.viewProps=Ue.viewProps,this.colorMode=at(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(Le),this.view=new hl(Le,{colorMode:this.colorMode,textViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(Le){const Ue={colorMode:this.colorMode.rawValue,colorType:this.colorType_,parser:this.parser_,viewProps:this.viewProps},je=[io(Le,Ue,0),io(Le,Ue,1),io(Le,Ue,2)];return je.forEach((_t,Gt)=>{Br({primary:this.value,secondary:_t.value,forward:an=>an.rawValue.getComponents(this.colorMode.rawValue,this.colorType_)[Gt],backward:(an,kn)=>{const ti=this.colorMode.rawValue,ii=an.rawValue.getComponents(ti,this.colorType_);return ii[Gt]=kn.rawValue,new li(pt(tt(ii),ii[3]),ti,this.colorType_)}})}),je}onModeSelectChange_(Le){const Ue=Le.currentTarget;this.colorMode.rawValue=Ue.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.textViews=[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view]}}const ro=He("hpl");class gl{constructor(Le,Ue){this.onValueChange_=this.onValueChange_.bind(this),this.value=Ue.value,this.value.emitter.on("change",this.onValueChange_),this.element=Le.createElement("div"),this.element.classList.add(ro()),Ue.viewProps.bindClassModifiers(this.element),Ue.viewProps.bindTabIndex(this.element);const je=Le.createElement("div");je.classList.add(ro("c")),this.element.appendChild(je);const _t=Le.createElement("div");_t.classList.add(ro("m")),this.element.appendChild(_t),this.markerElem_=_t,this.update_()}update_(){const Le=this.value.rawValue,[Ue]=Le.getComponents("hsv");this.markerElem_.style.backgroundColor=Bo(new li([Ue,100,100],"hsv"));const je=Ri(Ue,0,360,0,100);this.markerElem_.style.left=`${je}%`}onValueChange_(){this.update_()}}class _l{constructor(Le,Ue){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=Ue.value,this.viewProps=Ue.viewProps,this.view=new gl(Le,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Tr(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(Le,Ue){if(!Le.point)return;const je=Ri(Li(Le.point.x,0,Le.bounds.width),0,Le.bounds.width,0,360),_t=this.value.rawValue,[,Gt,an,kn]=_t.getComponents("hsv");this.value.setRawValue(new li([je,Gt,an,kn],"hsv"),Ue)}onPointerDown_(Le){this.handlePointerEvent_(Le.data,{forceEmit:!1,last:!1})}onPointerMove_(Le){this.handlePointerEvent_(Le.data,{forceEmit:!1,last:!1})}onPointerUp_(Le){this.handlePointerEvent_(Le.data,{forceEmit:!0,last:!0})}onKeyDown_(Le){const Ue=zi(Yr(!1),cr(Le));if(Ue===0)return;const je=this.value.rawValue,[_t,Gt,an,kn]=je.getComponents("hsv");this.value.setRawValue(new li([_t+Ue,Gt,an,kn],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(Le){zi(Yr(!1),cr(Le))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const so=He("svp"),Fo=64;class Al{constructor(Le,Ue){this.onValueChange_=this.onValueChange_.bind(this),this.value=Ue.value,this.value.emitter.on("change",this.onValueChange_),this.element=Le.createElement("div"),this.element.classList.add(so()),Ue.viewProps.bindClassModifiers(this.element),Ue.viewProps.bindTabIndex(this.element);const je=Le.createElement("canvas");je.height=Fo,je.width=Fo,je.classList.add(so("c")),this.element.appendChild(je),this.canvasElement=je;const _t=Le.createElement("div");_t.classList.add(so("m")),this.element.appendChild(_t),this.markerElem_=_t,this.update_()}update_(){const Le=Ut(this.canvasElement);if(!Le)return;const je=this.value.rawValue.getComponents("hsv"),_t=this.canvasElement.width,Gt=this.canvasElement.height,an=Le.getImageData(0,0,_t,Gt),kn=an.data;for(let yi=0;yi<Gt;yi++)for(let Ci=0;Ci<_t;Ci++){const Jr=Ri(Ci,0,_t,0,100),Ds=Ri(yi,0,Gt,100,0),Bs=$s(je[0],Jr,Ds),Gs=(yi*_t+Ci)*4;kn[Gs]=Bs[0],kn[Gs+1]=Bs[1],kn[Gs+2]=Bs[2],kn[Gs+3]=255}Le.putImageData(an,0,0);const ti=Ri(je[1],0,100,0,100);this.markerElem_.style.left=`${ti}%`;const ii=Ri(je[2],0,100,100,0);this.markerElem_.style.top=`${ii}%`}onValueChange_(){this.update_()}}class vl{constructor(Le,Ue){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=Ue.value,this.viewProps=Ue.viewProps,this.view=new Al(Le,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Tr(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(Le,Ue){if(!Le.point)return;const je=Ri(Le.point.x,0,Le.bounds.width,0,100),_t=Ri(Le.point.y,0,Le.bounds.height,100,0),[Gt,,,an]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new li([Gt,je,_t,an],"hsv"),Ue)}onPointerDown_(Le){this.handlePointerEvent_(Le.data,{forceEmit:!1,last:!1})}onPointerMove_(Le){this.handlePointerEvent_(Le.data,{forceEmit:!1,last:!1})}onPointerUp_(Le){this.handlePointerEvent_(Le.data,{forceEmit:!0,last:!0})}onKeyDown_(Le){os(Le.key)&&Le.preventDefault();const[Ue,je,_t,Gt]=this.value.rawValue.getComponents("hsv"),an=Yr(!1),kn=zi(an,cr(Le)),ti=zi(an,Hr(Le));kn===0&&ti===0||this.value.setRawValue(new li([Ue,je+kn,_t+ti,Gt],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(Le){const Ue=Yr(!1),je=zi(Ue,cr(Le)),_t=zi(Ue,Hr(Le));je===0&&_t===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class yl{constructor(Le,Ue){this.value=Ue.value,this.viewProps=Ue.viewProps,this.hPaletteC_=new _l(Le,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new vl(Le,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=Ue.supportsAlpha?{palette:new cl(Le,{value:this.value,viewProps:this.viewProps}),text:new Qr(Le,{parser:lr,baseStep:.1,props:Xe.fromObject({draggingScale:.01,formatter:Ui(2)}),value:at(0,{constraint:new _r({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&Br({primary:this.value,secondary:this.alphaIcs_.text.value,forward:je=>je.rawValue.getComponents()[3],backward:(je,_t)=>{const Gt=je.rawValue.getComponents();return Gt[3]=_t.rawValue,new li(Gt,je.rawValue.mode)}}),this.textC_=new ml(Le,{colorType:Ue.colorType,parser:lr,value:this.value,viewProps:this.viewProps}),this.view=new Xs(Le,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:Ue.supportsAlpha,svPaletteView:this.svPaletteC_.view,textView:this.textC_.view,viewProps:this.viewProps})}get textController(){return this.textC_}}const oo=He("colsw");class El{constructor(Le,Ue){this.onValueChange_=this.onValueChange_.bind(this),Ue.value.emitter.on("change",this.onValueChange_),this.value=Ue.value,this.element=Le.createElement("div"),this.element.classList.add(oo()),Ue.viewProps.bindClassModifiers(this.element);const je=Le.createElement("div");je.classList.add(oo("sw")),this.element.appendChild(je),this.swatchElem_=je;const _t=Le.createElement("button");_t.classList.add(oo("b")),Ue.viewProps.bindDisabled(_t),this.element.appendChild(_t),this.buttonElement=_t,this.update_()}update_(){const Le=this.value.rawValue;this.swatchElem_.style.backgroundColor=to(Le)}onValueChange_(){this.update_()}}class bl{constructor(Le,Ue){this.value=Ue.value,this.viewProps=Ue.viewProps,this.view=new El(Le,{value:this.value,viewProps:this.viewProps})}}class ao{constructor(Le,Ue){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=Ue.value,this.viewProps=Ue.viewProps,this.foldable_=Kn.create(Ue.expanded),this.swatchC_=new bl(Le,{value:this.value,viewProps:this.viewProps});const je=this.swatchC_.view.buttonElement;je.addEventListener("blur",this.onButtonBlur_),je.addEventListener("click",this.onButtonClick_),this.textC_=new wr(Le,{parser:Ue.parser,props:Xe.fromObject({formatter:Ue.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new Ps(Le,{foldable:this.foldable_,pickerLayout:Ue.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=Ue.pickerLayout==="popup"?new ts(Le,{viewProps:this.viewProps}):null;const _t=new yl(Le,{colorType:Ue.colorType,supportsAlpha:Ue.supportsAlpha,value:this.value,viewProps:this.viewProps});_t.view.allFocusableElements.forEach(Gt=>{Gt.addEventListener("blur",this.onPopupChildBlur_),Gt.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=_t,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(_t.view.element),Br({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:Gt=>Gt.rawValue,backward:(Gt,an)=>an.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),Xt(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(Le){if(!this.popC_)return;const Ue=this.view.element,je=Le.relatedTarget;(!je||!Ue.contains(je))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(Le){if(!this.popC_)return;const Ue=this.popC_.view.element,je=Un(Le);je&&Ue.contains(je)||je&&je===this.swatchC_.view.buttonElement&&!xn(Ue.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(Le){this.popC_?Le.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&Le.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}}function Cl(Ge,Le){return li.isColorObject(Ge)?li.fromObject(Ge,Le):li.black(Le)}function wl(Ge){return tt(Ge.getComponents("rgb")).reduce((Le,Ue)=>Le<<8|Math.floor(Ue)&255,0)}function xl(Ge){return Ge.getComponents("rgb").reduce((Le,Ue,je)=>{const _t=Math.floor(je===3?Ue*255:Ue)&255;return Le<<8|_t},0)>>>0}function Sl(Ge){return new li([Ge>>16&255,Ge>>8&255,Ge&255],"rgb")}function Tl(Ge){return new li([Ge>>24&255,Ge>>16&255,Ge>>8&255,Ri(Ge&255,0,255,0,1)],"rgb")}function Il(Ge){return typeof Ge!="number"?li.black():Sl(Ge)}function Pl(Ge){return typeof Ge!="number"?li.black():Tl(Ge)}function Rl(Ge){const Le=no(Ge);return Le?(Ue,je)=>{nr(Ue,Le(je))}:null}function Ml(Ge){const Le=Ge?xl:wl;return(Ue,je)=>{nr(Ue,Le(je))}}function Dl(Ge,Le,Ue){const je=Le.toRgbaObject(Ue);Ge.writeProperty("r",je.r),Ge.writeProperty("g",je.g),Ge.writeProperty("b",je.b),Ge.writeProperty("a",je.a)}function Bl(Ge,Le,Ue){const je=Le.toRgbaObject(Ue);Ge.writeProperty("r",je.r),Ge.writeProperty("g",je.g),Ge.writeProperty("b",je.b)}function Ll(Ge,Le){return(Ue,je)=>{Ge?Dl(Ue,je,Le):Bl(Ue,je,Le)}}function lo(Ge){var Le;return!!(Ge!=null&&Ge.alpha||!((Le=Ge==null?void 0:Ge.color)===null||Le===void 0)&&Le.alpha)}function kl(Ge){return Ge?Le=>to(Le,"0x"):Le=>Do(Le,"0x")}function Fl(Ge){return"color"in Ge||"view"in Ge&&Ge.view==="color"}const Vl={id:"input-color-number",type:"input",accept:(Ge,Le)=>{if(typeof Ge!="number"||!Fl(Le))return null;const Ue=Js(Le);return Ue?{initialValue:Ge,params:Ue}:null},binding:{reader:Ge=>lo(Ge.params)?Pl:Il,equals:li.equals,writer:Ge=>Ml(lo(Ge.params))},controller:Ge=>{const Le=lo(Ge.params),Ue="expanded"in Ge.params?Ge.params.expanded:void 0,je="picker"in Ge.params?Ge.params.picker:void 0;return new ao(Ge.document,{colorType:"int",expanded:Ue??!1,formatter:kl(Le),parser:eo("int"),pickerLayout:je??"popup",supportsAlpha:Le,value:Ge.value,viewProps:Ge.viewProps})}};function Nl(Ge){return li.isRgbaColorObject(Ge)}function Ol(Ge){return Le=>Cl(Le,Ge)}function Ul(Ge,Le){return Ue=>Ge?ko(Ue,Le):Lo(Ue,Le)}const $l={id:"input-color-object",type:"input",accept:(Ge,Le)=>{if(!li.isColorObject(Ge))return null;const Ue=Js(Le);return Ue?{initialValue:Ge,params:Ue}:null},binding:{reader:Ge=>Ol(Xr(Ge.params)),equals:li.equals,writer:Ge=>Ll(Nl(Ge.initialValue),Xr(Ge.params))},controller:Ge=>{var Le;const Ue=li.isRgbaColorObject(Ge.initialValue),je="expanded"in Ge.params?Ge.params.expanded:void 0,_t="picker"in Ge.params?Ge.params.picker:void 0,Gt=(Le=Xr(Ge.params))!==null&&Le!==void 0?Le:"int";return new ao(Ge.document,{colorType:Gt,expanded:je??!1,formatter:Ul(Ue,Gt),parser:eo(Gt),pickerLayout:_t??"popup",supportsAlpha:Ue,value:Ge.value,viewProps:Ge.viewProps})}},zl={id:"input-color-string",type:"input",accept:(Ge,Le)=>{if(typeof Ge!="string"||"view"in Le&&Le.view==="text")return null;const Ue=Zs(Ge,Xr(Le));if(!Ue||!no(Ue))return null;const _t=Js(Le);return _t?{initialValue:Ge,params:_t}:null},binding:{reader:Ge=>{var Le;return el((Le=Xr(Ge.params))!==null&&Le!==void 0?Le:"int")},equals:li.equals,writer:Ge=>{const Le=Zs(Ge.initialValue,Xr(Ge.params));if(!Le)throw Fe.shouldNeverHappen();const Ue=Rl(Le);if(!Ue)throw Fe.notBindable();return Ue}},controller:Ge=>{const Le=Zs(Ge.initialValue,Xr(Ge.params));if(!Le)throw Fe.shouldNeverHappen();const Ue=no(Le);if(!Ue)throw Fe.shouldNeverHappen();const je="expanded"in Ge.params?Ge.params.expanded:void 0,_t="picker"in Ge.params?Ge.params.picker:void 0;return new ao(Ge.document,{colorType:Le.type,expanded:je??!1,formatter:Ue,parser:eo(Le.type),pickerLayout:_t??"popup",supportsAlpha:Le.alpha,value:Ge.value,viewProps:Ge.viewProps})}};class kr{constructor(Le){this.components=Le.components,this.asm_=Le.assembly}constrain(Le){const Ue=this.asm_.toComponents(Le).map((je,_t)=>{var Gt,an;return(an=(Gt=this.components[_t])===null||Gt===void 0?void 0:Gt.constrain(je))!==null&&an!==void 0?an:je});return this.asm_.fromComponents(Ue)}}const Vo=He("pndtxt");class Gl{constructor(Le,Ue){this.textViews=Ue.textViews,this.element=Le.createElement("div"),this.element.classList.add(Vo()),this.textViews.forEach(je=>{const _t=Le.createElement("div");_t.classList.add(Vo("a")),_t.appendChild(je.element),this.element.appendChild(_t)})}}function Hl(Ge,Le,Ue){return new Qr(Ge,{arrayPosition:Ue===0?"fst":Ue===Le.axes.length-1?"lst":"mid",baseStep:Le.axes[Ue].baseStep,parser:Le.parser,props:Le.axes[Ue].textProps,value:at(0,{constraint:Le.axes[Ue].constraint}),viewProps:Le.viewProps})}class co{constructor(Le,Ue){this.value=Ue.value,this.viewProps=Ue.viewProps,this.acs_=Ue.axes.map((je,_t)=>Hl(Le,Ue,_t)),this.acs_.forEach((je,_t)=>{Br({primary:this.value,secondary:je.value,forward:Gt=>Ue.assembly.toComponents(Gt.rawValue)[_t],backward:(Gt,an)=>{const kn=Ue.assembly.toComponents(Gt.rawValue);return kn[_t]=an.rawValue,Ue.assembly.fromComponents(kn)}})}),this.view=new Gl(Le,{textViews:this.acs_.map(je=>je.view)})}}function No(Ge,Le){return"step"in Ge&&!Ce(Ge.step)?new Xi(Ge.step,Le):null}function Oo(Ge){return!Ce(Ge.max)&&!Ce(Ge.min)?new _r({max:Ge.max,min:Ge.min}):!Ce(Ge.max)||!Ce(Ge.min)?new Or({max:Ge.max,min:Ge.min}):null}function Ql(Ge){const Le=Wi(Ge,_r);if(Le)return[Le.values.get("min"),Le.values.get("max")];const Ue=Wi(Ge,Or);return Ue?[Ue.minValue,Ue.maxValue]:[void 0,void 0]}function Wl(Ge,Le){const Ue=[],je=No(Ge,Le);je&&Ue.push(je);const _t=Oo(Ge);_t&&Ue.push(_t);const Gt=Is(Ge.options);return Gt&&Ue.push(Gt),new Yi(Ue)}const ql={id:"input-number",type:"input",accept:(Ge,Le)=>{if(typeof Ge!="number")return null;const Ue=zt,je=Vt(Le,{format:Ue.optional.function,max:Ue.optional.number,min:Ue.optional.number,options:Ue.optional.custom(qr),step:Ue.optional.number});return je?{initialValue:Ge,params:je}:null},binding:{reader:Ge=>dr,constraint:Ge=>Wl(Ge.params,Ge.initialValue),writer:Ge=>nr},controller:Ge=>{var Le;const Ue=Ge.value,je=Ge.constraint,_t=je&&Wi(je,Cr);if(_t)return new sr(Ge.document,{props:new Xe({options:_t.values.value("options")}),value:Ue,viewProps:Ge.viewProps});const Gt=(Le="format"in Ge.params?Ge.params.format:void 0)!==null&&Le!==void 0?Le:Ui(ls(je,Ue.rawValue)),an=je&&Wi(je,_r);return an?new as(Ge.document,{baseStep:Ir(je),parser:lr,sliderProps:new Xe({maxValue:an.values.value("max"),minValue:an.values.value("min")}),textProps:Xe.fromObject({draggingScale:Pr(je,Ue.rawValue),formatter:Gt}),value:Ue,viewProps:Ge.viewProps}):new Qr(Ge.document,{baseStep:Ir(je),parser:lr,props:Xe.fromObject({draggingScale:Pr(je,Ue.rawValue),formatter:Gt}),value:Ue,viewProps:Ge.viewProps})}};class Fr{constructor(Le=0,Ue=0){this.x=Le,this.y=Ue}getComponents(){return[this.x,this.y]}static isObject(Le){if(Ce(Le))return!1;const Ue=Le.x,je=Le.y;return!(typeof Ue!="number"||typeof je!="number")}static equals(Le,Ue){return Le.x===Ue.x&&Le.y===Ue.y}toObject(){return{x:this.x,y:this.y}}}const Uo={toComponents:Ge=>Ge.getComponents(),fromComponents:Ge=>new Fr(...Ge)},hs=He("p2d");class jl{constructor(Le,Ue){this.element=Le.createElement("div"),this.element.classList.add(hs()),Ue.viewProps.bindClassModifiers(this.element),Ye(Ue.expanded,rt(this.element,hs(void 0,"expanded")));const je=Le.createElement("div");je.classList.add(hs("h")),this.element.appendChild(je);const _t=Le.createElement("button");_t.classList.add(hs("b")),_t.appendChild(cn(Le,"p2dpad")),Ue.viewProps.bindDisabled(_t),je.appendChild(_t),this.buttonElement=_t;const Gt=Le.createElement("div");if(Gt.classList.add(hs("t")),je.appendChild(Gt),this.textElement=Gt,Ue.pickerLayout==="inline"){const an=Le.createElement("div");an.classList.add(hs("p")),this.element.appendChild(an),this.pickerElement=an}else this.pickerElement=null}}const Vr=He("p2dp");class Kl{constructor(Le,Ue){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.invertsY_=Ue.invertsY,this.maxValue_=Ue.maxValue,this.element=Le.createElement("div"),this.element.classList.add(Vr()),Ue.layout==="popup"&&this.element.classList.add(Vr(void 0,"p")),Ue.viewProps.bindClassModifiers(this.element);const je=Le.createElement("div");je.classList.add(Vr("p")),Ue.viewProps.bindTabIndex(je),this.element.appendChild(je),this.padElement=je;const _t=Le.createElementNS(ln,"svg");_t.classList.add(Vr("g")),this.padElement.appendChild(_t),this.svgElem_=_t;const Gt=Le.createElementNS(ln,"line");Gt.classList.add(Vr("ax")),Gt.setAttributeNS(null,"x1","0"),Gt.setAttributeNS(null,"y1","50%"),Gt.setAttributeNS(null,"x2","100%"),Gt.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(Gt);const an=Le.createElementNS(ln,"line");an.classList.add(Vr("ax")),an.setAttributeNS(null,"x1","50%"),an.setAttributeNS(null,"y1","0"),an.setAttributeNS(null,"x2","50%"),an.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(an);const kn=Le.createElementNS(ln,"line");kn.classList.add(Vr("l")),kn.setAttributeNS(null,"x1","50%"),kn.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(kn),this.lineElem_=kn;const ti=Le.createElement("div");ti.classList.add(Vr("m")),this.padElement.appendChild(ti),this.markerElem_=ti,Ue.value.emitter.on("change",this.onValueChange_),this.value=Ue.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[Le,Ue]=this.value.rawValue.getComponents(),je=this.maxValue_,_t=Ri(Le,-je,+je,0,100),Gt=Ri(Ue,-je,+je,0,100),an=this.invertsY_?100-Gt:Gt;this.lineElem_.setAttributeNS(null,"x2",`${_t}%`),this.lineElem_.setAttributeNS(null,"y2",`${an}%`),this.markerElem_.style.left=`${_t}%`,this.markerElem_.style.top=`${an}%`}onValueChange_(){this.update_()}onFoldableChange_(){this.update_()}}function $o(Ge,Le,Ue){return[zi(Le[0],cr(Ge)),zi(Le[1],Hr(Ge))*(Ue?1:-1)]}class Yl{constructor(Le,Ue){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=Ue.value,this.viewProps=Ue.viewProps,this.baseSteps_=Ue.baseSteps,this.maxValue_=Ue.maxValue,this.invertsY_=Ue.invertsY,this.view=new Kl(Le,{invertsY:this.invertsY_,layout:Ue.layout,maxValue:this.maxValue_,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Tr(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(Le,Ue){if(!Le.point)return;const je=this.maxValue_,_t=Ri(Le.point.x,0,Le.bounds.width,-je,+je),Gt=Ri(this.invertsY_?Le.bounds.height-Le.point.y:Le.point.y,0,Le.bounds.height,-je,+je);this.value.setRawValue(new Fr(_t,Gt),Ue)}onPointerDown_(Le){this.handlePointerEvent_(Le.data,{forceEmit:!1,last:!1})}onPointerMove_(Le){this.handlePointerEvent_(Le.data,{forceEmit:!1,last:!1})}onPointerUp_(Le){this.handlePointerEvent_(Le.data,{forceEmit:!0,last:!0})}onPadKeyDown_(Le){os(Le.key)&&Le.preventDefault();const[Ue,je]=$o(Le,this.baseSteps_,this.invertsY_);Ue===0&&je===0||this.value.setRawValue(new Fr(this.value.rawValue.x+Ue,this.value.rawValue.y+je),{forceEmit:!1,last:!1})}onPadKeyUp_(Le){const[Ue,je]=$o(Le,this.baseSteps_,this.invertsY_);Ue===0&&je===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class Xl{constructor(Le,Ue){var je,_t;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=Ue.value,this.viewProps=Ue.viewProps,this.foldable_=Kn.create(Ue.expanded),this.popC_=Ue.pickerLayout==="popup"?new ts(Le,{viewProps:this.viewProps}):null;const Gt=new Yl(Le,{baseSteps:[Ue.axes[0].baseStep,Ue.axes[1].baseStep],invertsY:Ue.invertsY,layout:Ue.pickerLayout,maxValue:Ue.maxValue,value:this.value,viewProps:this.viewProps});Gt.view.allFocusableElements.forEach(an=>{an.addEventListener("blur",this.onPopupChildBlur_),an.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=Gt,this.textC_=new co(Le,{assembly:Uo,axes:Ue.axes,parser:Ue.parser,value:this.value,viewProps:this.viewProps}),this.view=new jl(Le,{expanded:this.foldable_.value("expanded"),pickerLayout:Ue.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(je=this.view.buttonElement)===null||je===void 0||je.addEventListener("blur",this.onPadButtonBlur_),(_t=this.view.buttonElement)===null||_t===void 0||_t.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),Br({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:an=>an.rawValue,backward:(an,kn)=>kn.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),Xt(this.foldable_,this.view.pickerElement))}onPadButtonBlur_(Le){if(!this.popC_)return;const Ue=this.view.element,je=Le.relatedTarget;(!je||!Ue.contains(je))&&(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(Le){if(!this.popC_)return;const Ue=this.popC_.view.element,je=Un(Le);je&&Ue.contains(je)||je&&je===this.view.buttonElement&&!xn(Ue.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(Le){this.popC_?Le.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&Le.key==="Escape"&&this.view.buttonElement.focus()}}class ds{constructor(Le=0,Ue=0,je=0){this.x=Le,this.y=Ue,this.z=je}getComponents(){return[this.x,this.y,this.z]}static isObject(Le){if(Ce(Le))return!1;const Ue=Le.x,je=Le.y,_t=Le.z;return!(typeof Ue!="number"||typeof je!="number"||typeof _t!="number")}static equals(Le,Ue){return Le.x===Ue.x&&Le.y===Ue.y&&Le.z===Ue.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const zo={toComponents:Ge=>Ge.getComponents(),fromComponents:Ge=>new ds(...Ge)};function Jl(Ge){return ds.isObject(Ge)?new ds(Ge.x,Ge.y,Ge.z):new ds}function Zl(Ge,Le){Ge.writeProperty("x",Le.x),Ge.writeProperty("y",Le.y),Ge.writeProperty("z",Le.z)}function _c(Ge,Le){return new kr({assembly:zo,components:[Mr("x"in Ge?Ge.x:void 0,Le.x),Mr("y"in Ge?Ge.y:void 0,Le.y),Mr("z"in Ge?Ge.z:void 0,Le.z)]})}function uo(Ge,Le){return{baseStep:Ir(Le),constraint:Le,textProps:Xe.fromObject({draggingScale:Pr(Le,Ge),formatter:Ui(ls(Le,Ge))})}}const eu={id:"input-point3d",type:"input",accept:(Ge,Le)=>{if(!ds.isObject(Ge))return null;const Ue=zt,je=Vt(Le,{x:Ue.optional.custom(fr),y:Ue.optional.custom(fr),z:Ue.optional.custom(fr)});return je?{initialValue:Ge,params:je}:null},binding:{reader:Ge=>Jl,constraint:Ge=>_c(Ge.params,Ge.initialValue),equals:ds.equals,writer:Ge=>Zl},controller:Ge=>{const Le=Ge.value,Ue=Ge.constraint;if(!(Ue instanceof kr))throw Fe.shouldNeverHappen();return new co(Ge.document,{assembly:zo,axes:[uo(Le.rawValue.x,Ue.components[0]),uo(Le.rawValue.y,Ue.components[1]),uo(Le.rawValue.z,Ue.components[2])],parser:lr,value:Le,viewProps:Ge.viewProps})}};class fs{constructor(Le=0,Ue=0,je=0,_t=0){this.x=Le,this.y=Ue,this.z=je,this.w=_t}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(Le){if(Ce(Le))return!1;const Ue=Le.x,je=Le.y,_t=Le.z,Gt=Le.w;return!(typeof Ue!="number"||typeof je!="number"||typeof _t!="number"||typeof Gt!="number")}static equals(Le,Ue){return Le.x===Ue.x&&Le.y===Ue.y&&Le.z===Ue.z&&Le.w===Ue.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const Go={toComponents:Ge=>Ge.getComponents(),fromComponents:Ge=>new fs(...Ge)};function tu(Ge){return fs.isObject(Ge)?new fs(Ge.x,Ge.y,Ge.z,Ge.w):new fs}function nu(Ge,Le){Ge.writeProperty("x",Le.x),Ge.writeProperty("y",Le.y),Ge.writeProperty("z",Le.z),Ge.writeProperty("w",Le.w)}function iu(Ge,Le){return new kr({assembly:Go,components:[Mr("x"in Ge?Ge.x:void 0,Le.x),Mr("y"in Ge?Ge.y:void 0,Le.y),Mr("z"in Ge?Ge.z:void 0,Le.z),Mr("w"in Ge?Ge.w:void 0,Le.w)]})}function ru(Ge,Le){return{baseStep:Ir(Le),constraint:Le,textProps:Xe.fromObject({draggingScale:Pr(Le,Ge),formatter:Ui(ls(Le,Ge))})}}const su={id:"input-point4d",type:"input",accept:(Ge,Le)=>{if(!fs.isObject(Ge))return null;const Ue=zt,je=Vt(Le,{x:Ue.optional.custom(fr),y:Ue.optional.custom(fr),z:Ue.optional.custom(fr),w:Ue.optional.custom(fr)});return je?{initialValue:Ge,params:je}:null},binding:{reader:Ge=>tu,constraint:Ge=>iu(Ge.params,Ge.initialValue),equals:fs.equals,writer:Ge=>nu},controller:Ge=>{const Le=Ge.value,Ue=Ge.constraint;if(!(Ue instanceof kr))throw Fe.shouldNeverHappen();return new co(Ge.document,{assembly:Go,axes:Le.rawValue.getComponents().map((je,_t)=>ru(je,Ue.components[_t])),parser:lr,value:Le,viewProps:Ge.viewProps})}};function ou(Ge){const Le=[],Ue=Is(Ge.options);return Ue&&Le.push(Ue),new Yi(Le)}const au={id:"input-string",type:"input",accept:(Ge,Le)=>{if(typeof Ge!="string")return null;const je=Vt(Le,{options:zt.optional.custom(qr)});return je?{initialValue:Ge,params:je}:null},binding:{reader:Ge=>ys,constraint:Ge=>ou(Ge.params),writer:Ge=>nr},controller:Ge=>{const Le=Ge.document,Ue=Ge.value,je=Ge.constraint,_t=je&&Wi(je,Cr);return _t?new sr(Le,{props:new Xe({options:_t.values.value("options")}),value:Ue,viewProps:Ge.viewProps}):new wr(Le,{parser:Gt=>Gt,props:Xe.fromObject({formatter:yr}),value:Ue,viewProps:Ge.viewProps})}},Ms={monitor:{defaultInterval:200,defaultLineCount:3}},Ho=He("mll");class lu{constructor(Le,Ue){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=Ue.formatter,this.element=Le.createElement("div"),this.element.classList.add(Ho()),Ue.viewProps.bindClassModifiers(this.element);const je=Le.createElement("textarea");je.classList.add(Ho("i")),je.style.height=`calc(var(--bld-us) * ${Ue.lineCount})`,je.readOnly=!0,Ue.viewProps.bindDisabled(je),this.element.appendChild(je),this.textareaElem_=je,Ue.value.emitter.on("change",this.onValueUpdate_),this.value=Ue.value,this.update_()}update_(){const Le=this.textareaElem_,Ue=Le.scrollTop===Le.scrollHeight-Le.clientHeight,je=[];this.value.rawValue.forEach(_t=>{_t!==void 0&&je.push(this.formatter_(_t))}),Le.textContent=je.join(`
`),Ue&&(Le.scrollTop=Le.scrollHeight)}onValueUpdate_(){this.update_()}}class ho{constructor(Le,Ue){this.value=Ue.value,this.viewProps=Ue.viewProps,this.view=new lu(Le,{formatter:Ue.formatter,lineCount:Ue.lineCount,value:this.value,viewProps:this.viewProps})}}const Qo=He("sgl");class cu{constructor(Le,Ue){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=Ue.formatter,this.element=Le.createElement("div"),this.element.classList.add(Qo()),Ue.viewProps.bindClassModifiers(this.element);const je=Le.createElement("input");je.classList.add(Qo("i")),je.readOnly=!0,je.type="text",Ue.viewProps.bindDisabled(je),this.element.appendChild(je),this.inputElement=je,Ue.value.emitter.on("change",this.onValueUpdate_),this.value=Ue.value,this.update_()}update_(){const Le=this.value.rawValue,Ue=Le[Le.length-1];this.inputElement.value=Ue!==void 0?this.formatter_(Ue):""}onValueUpdate_(){this.update_()}}class fo{constructor(Le,Ue){this.value=Ue.value,this.viewProps=Ue.viewProps,this.view=new cu(Le,{formatter:Ue.formatter,value:this.value,viewProps:this.viewProps})}}const uu={id:"monitor-bool",type:"monitor",accept:(Ge,Le)=>{if(typeof Ge!="boolean")return null;const je=Vt(Le,{lineCount:zt.optional.number});return je?{initialValue:Ge,params:je}:null},binding:{reader:Ge=>or},controller:Ge=>{var Le;return Ge.value.rawValue.length===1?new fo(Ge.document,{formatter:$r,value:Ge.value,viewProps:Ge.viewProps}):new ho(Ge.document,{formatter:$r,lineCount:(Le=Ge.params.lineCount)!==null&&Le!==void 0?Le:Ms.monitor.defaultLineCount,value:Ge.value,viewProps:Ge.viewProps})}},Nr=He("grl");class hu{constructor(Le,Ue){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=Le.createElement("div"),this.element.classList.add(Nr()),Ue.viewProps.bindClassModifiers(this.element),this.formatter_=Ue.formatter,this.props_=Ue.props,this.cursor_=Ue.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const je=Le.createElementNS(ln,"svg");je.classList.add(Nr("g")),je.style.height=`calc(var(--bld-us) * ${Ue.lineCount})`,this.element.appendChild(je),this.svgElem_=je;const _t=Le.createElementNS(ln,"polyline");this.svgElem_.appendChild(_t),this.lineElem_=_t;const Gt=Le.createElement("div");Gt.classList.add(Nr("t"),He("tt")()),this.element.appendChild(Gt),this.tooltipElem_=Gt,Ue.value.emitter.on("change",this.onValueUpdate_),this.value=Ue.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const Le=this.svgElem_.getBoundingClientRect(),Ue=this.value.rawValue.length-1,je=this.props_.get("minValue"),_t=this.props_.get("maxValue"),Gt=[];this.value.rawValue.forEach((yi,Ci)=>{if(yi===void 0)return;const Jr=Ri(Ci,0,Ue,0,Le.width),Ds=Ri(yi,je,_t,Le.height,0);Gt.push([Jr,Ds].join(","))}),this.lineElem_.setAttributeNS(null,"points",Gt.join(" "));const an=this.tooltipElem_,kn=this.value.rawValue[this.cursor_.rawValue];if(kn===void 0){an.classList.remove(Nr("t","a"));return}const ti=Ri(this.cursor_.rawValue,0,Ue,0,Le.width),ii=Ri(kn,je,_t,Le.height,0);an.style.left=`${ti}px`,an.style.top=`${ii}px`,an.textContent=`${this.formatter_(kn)}`,an.classList.contains(Nr("t","a"))||(an.classList.add(Nr("t","a"),Nr("t","in")),nn(an),an.classList.remove(Nr("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class du{constructor(Le,Ue){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props_=Ue.props,this.value=Ue.value,this.viewProps=Ue.viewProps,this.cursor_=at(-1),this.view=new hu(Le,{cursor:this.cursor_,formatter:Ue.formatter,lineCount:Ue.lineCount,props:this.props_,value:this.value,viewProps:this.viewProps}),!xn(Le))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const je=new Tr(this.view.element);je.emitter.on("down",this.onGraphPointerDown_),je.emitter.on("move",this.onGraphPointerMove_),je.emitter.on("up",this.onGraphPointerUp_)}}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(Le){const Ue=this.view.element.getBoundingClientRect();this.cursor_.rawValue=Math.floor(Ri(Le.offsetX,0,Ue.width,0,this.value.rawValue.length))}onGraphPointerDown_(Le){this.onGraphPointerMove_(Le)}onGraphPointerMove_(Le){if(!Le.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(Ri(Le.data.point.x,0,Le.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}}function po(Ge){return"format"in Ge&&!Ce(Ge.format)?Ge.format:Ui(2)}function fu(Ge){var Le;return Ge.value.rawValue.length===1?new fo(Ge.document,{formatter:po(Ge.params),value:Ge.value,viewProps:Ge.viewProps}):new ho(Ge.document,{formatter:po(Ge.params),lineCount:(Le=Ge.params.lineCount)!==null&&Le!==void 0?Le:Ms.monitor.defaultLineCount,value:Ge.value,viewProps:Ge.viewProps})}function pu(Ge){var Le,Ue,je;return new du(Ge.document,{formatter:po(Ge.params),lineCount:(Le=Ge.params.lineCount)!==null&&Le!==void 0?Le:Ms.monitor.defaultLineCount,props:Xe.fromObject({maxValue:(Ue="max"in Ge.params?Ge.params.max:null)!==null&&Ue!==void 0?Ue:100,minValue:(je="min"in Ge.params?Ge.params.min:null)!==null&&je!==void 0?je:0}),value:Ge.value,viewProps:Ge.viewProps})}function Wo(Ge){return"view"in Ge&&Ge.view==="graph"}const mu={id:"monitor-number",type:"monitor",accept:(Ge,Le)=>{if(typeof Ge!="number")return null;const Ue=zt,je=Vt(Le,{format:Ue.optional.function,lineCount:Ue.optional.number,max:Ue.optional.number,min:Ue.optional.number,view:Ue.optional.string});return je?{initialValue:Ge,params:je}:null},binding:{defaultBufferSize:Ge=>Wo(Ge)?64:1,reader:Ge=>dr},controller:Ge=>Wo(Ge.params)?pu(Ge):fu(Ge)},gu={id:"monitor-string",type:"monitor",accept:(Ge,Le)=>{if(typeof Ge!="string")return null;const Ue=zt,je=Vt(Le,{lineCount:Ue.optional.number,multiline:Ue.optional.boolean});return je?{initialValue:Ge,params:je}:null},binding:{reader:Ge=>ys},controller:Ge=>{var Le;const Ue=Ge.value;return Ue.rawValue.length>1||"multiline"in Ge.params&&Ge.params.multiline?new ho(Ge.document,{formatter:yr,lineCount:(Le=Ge.params.lineCount)!==null&&Le!==void 0?Le:Ms.monitor.defaultLineCount,value:Ue,viewProps:Ge.viewProps}):new fo(Ge.document,{formatter:yr,value:Ue,viewProps:Ge.viewProps})}};function _u(Ge,Le){var Ue;const je=Ge.accept(Le.target.read(),Le.params);if(Ce(je))return null;const _t=zt,Gt={target:Le.target,initialValue:je.initialValue,params:je.params},an=Ge.binding.reader(Gt),kn=Ge.binding.constraint?Ge.binding.constraint(Gt):void 0,ti=at(an(je.initialValue),{constraint:kn,equals:Ge.binding.equals}),ii=new di({reader:an,target:Le.target,value:ti,writer:Ge.binding.writer(Gt)}),yi=_t.optional.boolean(Le.params.disabled).value,Ci=_t.optional.boolean(Le.params.hidden).value,Jr=Ge.controller({constraint:kn,document:Le.document,initialValue:je.initialValue,params:je.params,value:ii.value,viewProps:kt.create({disabled:yi,hidden:Ci})});return new ui(Le.document,{binding:ii,blade:Qn(),props:Xe.fromObject({label:"label"in Le.params?(Ue=_t.optional.string(Le.params.label).value)!==null&&Ue!==void 0?Ue:null:Le.target.key}),valueController:Jr})}function Au(Ge,Le){return Le===0?new wi:new gi(Ge,Le??Ms.monitor.defaultInterval)}function vu(Ge,Le){var Ue,je,_t;const Gt=zt,an=Ge.accept(Le.target.read(),Le.params);if(Ce(an))return null;const kn={target:Le.target,initialValue:an.initialValue,params:an.params},ti=Ge.binding.reader(kn),ii=(je=(Ue=Gt.optional.number(Le.params.bufferSize).value)!==null&&Ue!==void 0?Ue:Ge.binding.defaultBufferSize&&Ge.binding.defaultBufferSize(an.params))!==null&&je!==void 0?je:1,yi=Gt.optional.number(Le.params.interval).value,Ci=new Hi({reader:ti,target:Le.target,ticker:Au(Le.document,yi),value:fi(ii)}),Jr=Gt.optional.boolean(Le.params.disabled).value,Ds=Gt.optional.boolean(Le.params.hidden).value,Bs=Ge.controller({document:Le.document,params:an.params,value:Ci.value,viewProps:kt.create({disabled:Jr,hidden:Ds})});return new pi(Le.document,{binding:Ci,blade:Qn(),props:Xe.fromObject({label:"label"in Le.params?(_t=Gt.optional.string(Le.params.label).value)!==null&&_t!==void 0?_t:null:Le.target.key}),valueController:Bs})}class yu{constructor(){this.pluginsMap_={blades:[],inputs:[],monitors:[]}}getAll(){return[...this.pluginsMap_.blades,...this.pluginsMap_.inputs,...this.pluginsMap_.monitors]}register(Le){Le.type==="blade"?this.pluginsMap_.blades.unshift(Le):Le.type==="input"?this.pluginsMap_.inputs.unshift(Le):Le.type==="monitor"&&this.pluginsMap_.monitors.unshift(Le)}createInput(Le,Ue,je){const _t=Ue.read();if(Ce(_t))throw new Fe({context:{key:Ue.key},type:"nomatchingcontroller"});const Gt=this.pluginsMap_.inputs.reduce((an,kn)=>an??_u(kn,{document:Le,target:Ue,params:je}),null);if(Gt)return Gt;throw new Fe({context:{key:Ue.key},type:"nomatchingcontroller"})}createMonitor(Le,Ue,je){const _t=this.pluginsMap_.monitors.reduce((Gt,an)=>Gt??vu(an,{document:Le,params:je,target:Ue}),null);if(_t)return _t;throw new Fe({context:{key:Ue.key},type:"nomatchingcontroller"})}createBlade(Le,Ue){const je=this.pluginsMap_.blades.reduce((_t,Gt)=>_t??ni(Gt,{document:Le,params:Ue}),null);if(!je)throw new Fe({type:"nomatchingview",context:{params:Ue}});return je}createBladeApi(Le){if(Le instanceof ui)return new ci(Le);if(Le instanceof pi)return new Fi(Le);if(Le instanceof un)return new ki(Le,this);const Ue=this.pluginsMap_.blades.reduce((je,_t)=>je??_t.api({controller:Le,pool:this}),null);if(!Ue)throw Fe.shouldNeverHappen();return Ue}}function Eu(){const Ge=new yu;return[Tu,eu,su,au,ql,zl,$l,Vl,cs,uu,gu,mu,Bn,Nt,_n,ei].forEach(Le=>{Ge.register(Le)}),Ge}function bu(Ge){return Fr.isObject(Ge)?new Fr(Ge.x,Ge.y):new Fr}function Cu(Ge,Le){Ge.writeProperty("x",Le.x),Ge.writeProperty("y",Le.y)}function Mr(Ge,Le){if(!Ge)return;const Ue=[],je=No(Ge,Le);je&&Ue.push(je);const _t=Oo(Ge);return _t&&Ue.push(_t),new Yi(Ue)}function wu(Ge,Le){return new kr({assembly:Uo,components:[Mr("x"in Ge?Ge.x:void 0,Le.x),Mr("y"in Ge?Ge.y:void 0,Le.y)]})}function qo(Ge,Le){const[Ue,je]=Ge?Ql(Ge):[];if(!Ce(Ue)||!Ce(je))return Math.max(Math.abs(Ue??0),Math.abs(je??0));const _t=Ir(Ge);return Math.max(Math.abs(_t)*10,Math.abs(Le)*10)}function xu(Ge,Le){const Ue=Le instanceof kr?Le.components[0]:void 0,je=Le instanceof kr?Le.components[1]:void 0,_t=qo(Ue,Ge.x),Gt=qo(je,Ge.y);return Math.max(_t,Gt)}function jo(Ge,Le){return{baseStep:Ir(Le),constraint:Le,textProps:Xe.fromObject({draggingScale:Pr(Le,Ge),formatter:Ui(ls(Le,Ge))})}}function Su(Ge){if(!("y"in Ge))return!1;const Le=Ge.y;return Le&&"inverted"in Le?!!Le.inverted:!1}const Tu={id:"input-point2d",type:"input",accept:(Ge,Le)=>{if(!Fr.isObject(Ge))return null;const Ue=zt,je=Vt(Le,{expanded:Ue.optional.boolean,picker:Ue.optional.custom(Ts),x:Ue.optional.custom(fr),y:Ue.optional.object({inverted:Ue.optional.boolean,max:Ue.optional.number,min:Ue.optional.number,step:Ue.optional.number})});return je?{initialValue:Ge,params:je}:null},binding:{reader:Ge=>bu,constraint:Ge=>wu(Ge.params,Ge.initialValue),equals:Fr.equals,writer:Ge=>Cu},controller:Ge=>{const Le=Ge.document,Ue=Ge.value,je=Ge.constraint;if(!(je instanceof kr))throw Fe.shouldNeverHappen();const _t="expanded"in Ge.params?Ge.params.expanded:void 0,Gt="picker"in Ge.params?Ge.params.picker:void 0;return new Xl(Le,{axes:[jo(Ue.rawValue.x,je.components[0]),jo(Ue.rawValue.y,je.components[1])],expanded:_t??!1,invertsY:Su(Ge.params),maxValue:xu(Ue.rawValue,je),parser:lr,pickerLayout:Gt??"popup",value:Ue,viewProps:Ge.viewProps})}};class Ko extends ee{constructor(Le){super(Le),this.emitter_=new ze,this.controller_.valueController.value.emitter.on("change",Ue=>{this.emitter_.emit("change",{event:new le(this,Ue.rawValue)})})}get label(){return this.controller_.props.get("label")}set label(Le){this.controller_.props.set("label",Le)}get options(){return this.controller_.valueController.props.get("options")}set options(Le){this.controller_.valueController.props.set("options",Le)}get value(){return this.controller_.valueController.value.rawValue}set value(Le){this.controller_.valueController.value.rawValue=Le}on(Le,Ue){const je=Ue.bind(this);return this.emitter_.on(Le,_t=>{je(_t.event)}),this}}class Yo extends ee{constructor(Le){super(Le),this.emitter_=new ze,this.controller_.valueController.value.emitter.on("change",Ue=>{this.emitter_.emit("change",{event:new le(this,Ue.rawValue)})})}get label(){return this.controller_.props.get("label")}set label(Le){this.controller_.props.set("label",Le)}get maxValue(){return this.controller_.valueController.sliderController.props.get("maxValue")}set maxValue(Le){this.controller_.valueController.sliderController.props.set("maxValue",Le)}get minValue(){return this.controller_.valueController.sliderController.props.get("minValue")}set minValue(Le){this.controller_.valueController.sliderController.props.set("minValue",Le)}get value(){return this.controller_.valueController.value.rawValue}set value(Le){this.controller_.valueController.value.rawValue=Le}on(Le,Ue){const je=Ue.bind(this);return this.emitter_.on(Le,_t=>{je(_t.event)}),this}}class Xo extends ee{constructor(Le){super(Le),this.emitter_=new ze,this.controller_.valueController.value.emitter.on("change",Ue=>{this.emitter_.emit("change",{event:new le(this,Ue.rawValue)})})}get label(){return this.controller_.props.get("label")}set label(Le){this.controller_.props.set("label",Le)}get formatter(){return this.controller_.valueController.props.get("formatter")}set formatter(Le){this.controller_.valueController.props.set("formatter",Le)}get value(){return this.controller_.valueController.value.rawValue}set value(Le){this.controller_.valueController.value.rawValue=Le}on(Le,Ue){const je=Ue.bind(this);return this.emitter_.on(Le,_t=>{je(_t.event)}),this}}const Iu=function(){return{id:"list",type:"blade",accept(Ge){const Le=zt,Ue=Vt(Ge,{options:Le.required.custom(qr),value:Le.required.raw,view:Le.required.constant("list"),label:Le.optional.string});return Ue?{params:Ue}:null},controller(Ge){const Le=new Cr(Ns(Ge.params.options)),Ue=at(Ge.params.value,{constraint:Le}),je=new sr(Ge.document,{props:new Xe({options:Le.values.value("options")}),value:Ue,viewProps:Ge.viewProps});return new Qt(Ge.document,{blade:Ge.blade,props:Xe.fromObject({label:Ge.params.label}),valueController:je})},api(Ge){return!(Ge.controller instanceof Qt)||!(Ge.controller.valueController instanceof sr)?null:new Ko(Ge.controller)}}}();function Pu(Ge){return Ge.reduce((Le,Ue)=>Object.assign(Le,{[Ue.presetKey]:Ue.read()}),{})}function Ru(Ge,Le){Ge.forEach(Ue=>{const je=Le[Ue.target.presetKey];je!==void 0&&Ue.writer(Ue.target,Ue.reader(je))})}class Mu extends Gi{constructor(Le,Ue){super(Le,Ue)}get element(){return this.controller_.view.element}importPreset(Le){const Ue=this.controller_.rackController.rack.find(ui).map(je=>je.binding);Ru(Ue,Le),this.refresh()}exportPreset(){const Le=this.controller_.rackController.rack.find(ui).map(Ue=>Ue.binding.target);return Pu(Le)}refresh(){this.controller_.rackController.rack.find(ui).forEach(Le=>{Le.binding.read()}),this.controller_.rackController.rack.find(pi).forEach(Le=>{Le.binding.read()})}}class Du extends xt{constructor(Le,Ue){super(Le,{expanded:Ue.expanded,blade:Ue.blade,props:Ue.props,root:!0,viewProps:Ue.viewProps})}}const Bu={id:"slider",type:"blade",accept(Ge){const Le=zt,Ue=Vt(Ge,{max:Le.required.number,min:Le.required.number,view:Le.required.constant("slider"),format:Le.optional.function,label:Le.optional.string,value:Le.optional.number});return Ue?{params:Ue}:null},controller(Ge){var Le,Ue;const je=(Le=Ge.params.value)!==null&&Le!==void 0?Le:0,_t=new _r({max:Ge.params.max,min:Ge.params.min}),Gt=new as(Ge.document,{baseStep:1,parser:lr,sliderProps:new Xe({maxValue:_t.values.value("max"),minValue:_t.values.value("min")}),textProps:Xe.fromObject({draggingScale:Pr(void 0,je),formatter:(Ue=Ge.params.format)!==null&&Ue!==void 0?Ue:Ws}),value:at(je,{constraint:_t}),viewProps:Ge.viewProps});return new Qt(Ge.document,{blade:Ge.blade,props:Xe.fromObject({label:Ge.params.label}),valueController:Gt})},api(Ge){return!(Ge.controller instanceof Qt)||!(Ge.controller.valueController instanceof as)?null:new Yo(Ge.controller)}},Lu=function(){return{id:"text",type:"blade",accept(Ge){const Le=zt,Ue=Vt(Ge,{parse:Le.required.function,value:Le.required.raw,view:Le.required.constant("text"),format:Le.optional.function,label:Le.optional.string});return Ue?{params:Ue}:null},controller(Ge){var Le;const Ue=new wr(Ge.document,{parser:Ge.params.parse,props:Xe.fromObject({formatter:(Le=Ge.params.format)!==null&&Le!==void 0?Le:je=>String(je)}),value:at(Ge.params.value),viewProps:Ge.viewProps});return new Qt(Ge.document,{blade:Ge.blade,props:Xe.fromObject({label:Ge.params.label}),valueController:Ue})},api(Ge){return!(Ge.controller instanceof Qt)||!(Ge.controller.valueController instanceof wr)?null:new Xo(Ge.controller)}}}();function ku(Ge){const Le=Ge.createElement("div");return Le.classList.add(He("dfw")()),Ge.body&&Ge.body.appendChild(Le),Le}function Jo(Ge,Le,Ue){if(Ge.querySelector(`style[data-tp-style=${Le}]`))return;const je=Ge.createElement("style");je.dataset.tpStyle=Le,je.textContent=Ue,Ge.head.appendChild(je)}class Fu extends Mu{constructor(Le){var Ue,je;const _t=Le??{},Gt=(Ue=_t.document)!==null&&Ue!==void 0?Ue:At(),an=Eu(),kn=new Du(Gt,{expanded:_t.expanded,blade:Qn(),props:Xe.fromObject({title:_t.title}),viewProps:kt.create()});super(kn,an),this.pool_=an,this.containerElem_=(je=_t.container)!==null&&je!==void 0?je:ku(Gt),this.containerElem_.appendChild(this.element),this.doc_=Gt,this.usesDefaultWrapper_=!_t.container,this.setUpDefaultPlugins_()}get document(){if(!this.doc_)throw Fe.alreadyDisposed();return this.doc_}dispose(){const Le=this.containerElem_;if(!Le)throw Fe.alreadyDisposed();if(this.usesDefaultWrapper_){const Ue=Le.parentElement;Ue&&Ue.removeChild(Le)}this.containerElem_=null,this.doc_=null,super.dispose()}registerPlugin(Le){("plugin"in Le?[Le.plugin]:"plugins"in Le?Le.plugins:[]).forEach(je=>{this.pool_.register(je),this.embedPluginStyle_(je)})}embedPluginStyle_(Le){Le.css&&Jo(this.document,`plugin-${Le.id}`,Le.css)}setUpDefaultPlugins_(){Jo(this.document,"default",'.tp-tbiv_b,.tp-coltxtv_ms,.tp-ckbv_i,.tp-rotv_b,.tp-fldv_b,.tp-mllv_i,.tp-sglv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-mllv_i,.tp-sglv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--mo-fg);height:var(--bld-us);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-mllv_i::-webkit-scrollbar,.tp-sglv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-mllv_i::-webkit-scrollbar-corner,.tp-sglv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-mllv_i::-webkit-scrollbar-thumb,.tp-sglv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-rotv{--font-family: var(--tp-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-br: var(--tp-base-border-radius, 6px);--cnt-h-p: var(--tp-container-horizontal-padding, 4px);--cnt-v-p: var(--tp-container-vertical-padding, 4px);--elm-br: var(--tp-element-border-radius, 2px);--bld-s: var(--tp-blade-spacing, 4px);--bld-us: var(--tp-blade-unit-size, 20px);--bs-bg: var(--tp-base-background-color, hsl(230, 7%, 17%));--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--btn-bg: var(--tp-button-background-color, hsl(230, 7%, 70%));--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230, 7%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230, 7%, 75%));--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, hsl(230, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tabv_c .tp-brkv>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-v-p))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tabv_c .tp-brkv>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--bld-s)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tabv_c .tp-brkv>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tabv_c .tp-brkv>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--elm-br);border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tabv_c .tp-brkv .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-fldv_b{border-top-left-radius:0}.tp-tabv_c .tp-brkv>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv>.tp-tabv_t{border-top-left-radius:0}.tp-tabv_c .tp-brkv>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{border-top-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--elm-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);overflow:hidden;padding-left:var(--cnt-h-p);padding-right:calc(4px + var(--bld-us) + var(--cnt-h-p));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:"";display:block;height:6px;right:calc(var(--cnt-h-p) + (var(--bld-us) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--elm-br);cursor:pointer;display:block;height:var(--bld-us);position:relative;width:var(--bld-us)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--bld-us)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-expanded.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--bld-s);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--bld-s)}.tp-colpv_rgb{display:flex;margin-top:var(--bld-s);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-v-p);padding-top:calc(var(--cnt-v-p) + 2px);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);content:"";height:2px;left:calc(-1*var(--cnt-h-p));position:absolute;right:calc(-1*var(--cnt-h-p));top:0}.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--elm-br);outline:none;overflow:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--bld-us)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative}.tp-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative;width:100%}.tp-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--elm-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--elm-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;cursor:pointer;display:block;height:var(--bld-us);left:0;margin:0;outline:none;padding:0;position:absolute;top:0;width:var(--bld-us)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--elm-br);bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--elm-br);color:var(--lbl-fg);cursor:pointer;height:var(--bld-us);line-height:var(--bld-us);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv.tp-fldv-not .tp-fldv_b{display:none}.tp-fldv_t{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--bld-us) + 4px);width:var(--bs-br)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--bld-us)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-h-p);padding-right:var(--cnt-h-p)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:160px}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding:0 4px}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--bld-us)*3);line-height:var(--bld-us);padding:0 4px;resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--bld-us);margin-right:4px;position:relative;width:var(--bld-us)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--bld-s);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-p2dpv{padding-left:calc(var(--bld-us) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:6px;box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:168px;padding:var(--cnt-v-p) var(--cnt-h-p);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--bld-us);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--elm-br);bottom:0;content:"";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:"";height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::before{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--bld-us) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:0;position:absolute;right:0}.tp-tabv_c{padding-bottom:var(--cnt-v-p);padding-left:4px;padding-top:var(--cnt-v-p)}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--bld-us) + 4px);width:var(--bs-br)}.tp-tabv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hover+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-disabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-h-p) + 4px);padding-right:calc(var(--cnt-h-p) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_b::before{background-color:var(--cnt-bg);bottom:2px;content:"";left:0;pointer-events:none;position:absolute;right:0;top:0}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);opacity:.5;overflow:hidden;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-txtv{position:relative}.tp-txtv_i{padding:0 4px}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:-3px;position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";height:calc(var(--bld-us) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--elm-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:"";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--font-family);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--bld-us) + var(--cnt-h-p));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0}.tp-rotv.tp-rotv-not .tp-rotv_b{display:none}.tp-rotv_b:disabled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}'),this.pool_.getAll().forEach(Le=>{this.embedPluginStyle_(Le)}),this.registerPlugin({plugins:[Bu,Iu,ei,Lu]})}}const Vu=new j("3.1.10");L.BladeApi=ee,L.ButtonApi=Ne,L.FolderApi=Gi,L.InputBindingApi=ci,L.ListApi=Ko,L.MonitorBindingApi=Fi,L.Pane=Fu,L.SeparatorApi=Ht,L.SliderApi=Yo,L.TabApi=Nn,L.TabPageApi=wn,L.TextApi=Xo,L.TpChangeEvent=le,L.VERSION=Vu,Object.defineProperty(L,"__esModule",{value:!0})})})(tweakpane,tweakpane.exports);var tweakpaneExports=tweakpane.exports,tweakpanePluginEssentials$1={exports:{}};(function($,m){(function(L,j){j(m)})(commonjsGlobal$1,function(L){class j{constructor(Qe){this.controller_=Qe}get element(){return this.controller_.view.element}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(Qe){this.controller_.viewProps.set("disabled",Qe)}get hidden(){return this.controller_.viewProps.get("hidden")}set hidden(Qe){this.controller_.viewProps.set("hidden",Qe)}dispose(){this.controller_.viewProps.set("disposed",!0)}}class ee{constructor(Qe){this.target=Qe}}class re extends ee{constructor(Qe,tt,pt,Lt){super(Qe),this.value=tt,this.presetKey=pt,this.last=Lt??!0}}function le(ot){return ot}function ve(ot){return ot==null}const ye={alreadydisposed:()=>"View has been already disposed",invalidparams:ot=>`Invalid parameters for '${ot.name}'`,nomatchingcontroller:ot=>`No matching controller for '${ot.key}'`,nomatchingview:ot=>`No matching view for '${JSON.stringify(ot.params)}'`,notbindable:()=>"Value is not bindable",propertynotfound:ot=>`Property '${ot.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class Ee{constructor(Qe){var tt;this.message=(tt=ye[Qe.type](Qe.context))!==null&&tt!==void 0?tt:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=Qe.type}static alreadyDisposed(){return new Ee({type:"alreadydisposed"})}static notBindable(){return new Ee({type:"notbindable"})}static propertyNotFound(Qe){return new Ee({type:"propertynotfound",context:{name:Qe}})}static shouldNeverHappen(){return new Ee({type:"shouldneverhappen"})}}class Me{constructor(){this.observers_={}}on(Qe,tt){let pt=this.observers_[Qe];return pt||(pt=this.observers_[Qe]=[]),pt.push({handler:tt}),this}off(Qe,tt){const pt=this.observers_[Qe];return pt&&(this.observers_[Qe]=pt.filter(Lt=>Lt.handler!==tt)),this}emit(Qe,tt){const pt=this.observers_[Qe];pt&&pt.forEach(Lt=>{Lt.handler(tt)})}}const Ce="tp";function De(ot){return(tt,pt)=>[Ce,"-",ot,"v",tt?`_${tt}`:"",pt?`-${pt}`:""].join("")}function Be(ot,Qe){return tt=>Qe(ot(tt))}function ke(ot){return ot.rawValue}function Fe(ot,Qe){ot.emitter.on("change",Be(ke,Qe)),Qe(ot.rawValue)}function Oe(ot,Qe,tt){Fe(ot.value(Qe),tt)}function Ne(ot,Qe,tt){tt?ot.classList.add(Qe):ot.classList.remove(Qe)}function ze(ot,Qe){return tt=>{Ne(ot,Qe,tt)}}function $e(ot,Qe){Fe(ot,tt=>{Qe.textContent=tt??""})}const He=De("btn");class We{constructor(Qe,tt){this.element=Qe.createElement("div"),this.element.classList.add(He()),tt.viewProps.bindClassModifiers(this.element);const pt=Qe.createElement("button");pt.classList.add(He("b")),tt.viewProps.bindDisabled(pt),this.element.appendChild(pt),this.buttonElement=pt;const Lt=Qe.createElement("div");Lt.classList.add(He("t")),$e(tt.props.value("title"),Lt),this.buttonElement.appendChild(Lt)}}class qe{constructor(Qe,tt){this.emitter=new Me,this.onClick_=this.onClick_.bind(this),this.props=tt.props,this.viewProps=tt.viewProps,this.view=new We(Qe,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class Ye{constructor(Qe,tt){var pt;this.constraint_=tt==null?void 0:tt.constraint,this.equals_=(pt=tt==null?void 0:tt.equals)!==null&&pt!==void 0?pt:(Lt,rn)=>Lt===rn,this.emitter=new Me,this.rawValue_=Qe}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(Qe){this.setRawValue(Qe,{forceEmit:!1,last:!0})}setRawValue(Qe,tt){const pt=tt??{forceEmit:!1,last:!0},Lt=this.constraint_?this.constraint_.constrain(Qe):Qe,rn=this.rawValue_;this.equals_(rn,Lt)&&!pt.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=Lt,this.emitter.emit("change",{options:pt,previousRawValue:rn,rawValue:Lt,sender:this}))}}class Ze{constructor(Qe){this.emitter=new Me,this.value_=Qe}get rawValue(){return this.value_}set rawValue(Qe){this.setRawValue(Qe,{forceEmit:!1,last:!0})}setRawValue(Qe,tt){const pt=tt??{forceEmit:!1,last:!0},Lt=this.value_;Lt===Qe&&!pt.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=Qe,this.emitter.emit("change",{options:pt,previousRawValue:Lt,rawValue:this.value_,sender:this}))}}function Ke(ot,Qe){const tt=Qe==null?void 0:Qe.constraint,pt=Qe==null?void 0:Qe.equals;return!tt&&!pt?new Ze(ot):new Ye(ot,Qe)}class rt{constructor(Qe){this.emitter=new Me,this.valMap_=Qe;for(const tt in this.valMap_)this.valMap_[tt].emitter.on("change",()=>{this.emitter.emit("change",{key:tt,sender:this})})}static createCore(Qe){return Object.keys(Qe).reduce((pt,Lt)=>Object.assign(pt,{[Lt]:Ke(Qe[Lt])}),{})}static fromObject(Qe){const tt=this.createCore(Qe);return new rt(tt)}get(Qe){return this.valMap_[Qe].rawValue}set(Qe,tt){this.valMap_[Qe].rawValue=tt}value(Qe){return this.valMap_[Qe]}}function ft(ot,Qe){const pt=Object.keys(Qe).reduce((Lt,rn)=>{if(Lt===void 0)return;const An=Qe[rn],On=An(ot[rn]);return On.succeeded?Object.assign(Object.assign({},Lt),{[rn]:On.value}):void 0},{});return pt}function mt(ot,Qe){return ot.reduce((tt,pt)=>{if(tt===void 0)return;const Lt=Qe(pt);if(!(!Lt.succeeded||Lt.value===void 0))return[...tt,Lt.value]},[])}function Et(ot){return ot===null?!1:typeof ot=="object"}function bt(ot){return Qe=>tt=>{if(!Qe&&tt===void 0)return{succeeded:!1,value:void 0};if(Qe&&tt===void 0)return{succeeded:!0,value:void 0};const pt=ot(tt);return pt!==void 0?{succeeded:!0,value:pt}:{succeeded:!1,value:void 0}}}function Ct(ot){return{custom:Qe=>bt(Qe)(ot),boolean:bt(Qe=>typeof Qe=="boolean"?Qe:void 0)(ot),number:bt(Qe=>typeof Qe=="number"?Qe:void 0)(ot),string:bt(Qe=>typeof Qe=="string"?Qe:void 0)(ot),function:bt(Qe=>typeof Qe=="function"?Qe:void 0)(ot),constant:Qe=>bt(tt=>tt===Qe?Qe:void 0)(ot),raw:bt(Qe=>Qe)(ot),object:Qe=>bt(tt=>{if(Et(tt))return ft(tt,Qe)})(ot),array:Qe=>bt(tt=>{if(Array.isArray(tt))return mt(tt,Qe)})(ot)}}const st={optional:Ct(!0),required:Ct(!1)};function at(ot,Qe){const tt=st.required.object(Qe)(ot);return tt.succeeded?tt.value:void 0}function Xe(ot){console.warn([`Missing '${ot.key}' of ${ot.target} in ${ot.place}.`,"Please rebuild plugins with the latest core package."].join(" "))}function ht(ot){return ot&&ot.parentElement&&ot.parentElement.removeChild(ot),null}class Bt{constructor(Qe){this.value_=Qe}static create(Qe){return[new Bt(Qe),(tt,pt)=>{Qe.setRawValue(tt,pt)}]}get emitter(){return this.value_.emitter}get rawValue(){return this.value_.rawValue}}const Dt=De("");function Jt(ot,Qe){return ze(ot,Dt(void 0,Qe))}class tn extends rt{constructor(Qe){var tt;super(Qe),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=Bt.create(Ke(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(tt=this.get("parent"))===null||tt===void 0||tt.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(Qe){var tt,pt,Lt;const rn=Qe??{};return new tn(rt.createCore({disabled:(tt=rn.disabled)!==null&&tt!==void 0?tt:!1,disposed:!1,hidden:(pt=rn.hidden)!==null&&pt!==void 0?pt:!1,parent:(Lt=rn.parent)!==null&&Lt!==void 0?Lt:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(Qe){Fe(this.globalDisabled_,Jt(Qe,"disabled")),Oe(this,"hidden",Jt(Qe,"hidden"))}bindDisabled(Qe){Fe(this.globalDisabled_,tt=>{Qe.disabled=tt})}bindTabIndex(Qe){Fe(this.globalDisabled_,tt=>{Qe.tabIndex=tt?-1:0})}handleDispose(Qe){this.value("disposed").emitter.on("change",tt=>{tt&&Qe()})}getGlobalDisabled_(){const Qe=this.get("parent");return(Qe?Qe.globalDisabled.rawValue:!1)||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(Qe){var tt;const pt=Qe.previousRawValue;pt==null||pt.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(tt=this.get("parent"))===null||tt===void 0||tt.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}}function zt(){return["veryfirst","first","last","verylast"]}const Vt=De(""),Mt={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class Tt{constructor(Qe){this.parent_=null,this.blade=Qe.blade,this.view=Qe.view,this.viewProps=Qe.viewProps;const tt=this.view.element;this.blade.value("positions").emitter.on("change",()=>{zt().forEach(pt=>{tt.classList.remove(Vt(void 0,Mt[pt]))}),this.blade.get("positions").forEach(pt=>{tt.classList.add(Vt(void 0,Mt[pt]))})}),this.viewProps.handleDispose(()=>{ht(tt)})}get parent(){return this.parent_}set parent(Qe){if(this.parent_=Qe,!("parent"in this.viewProps.valMap_)){Xe({key:"parent",target:tn.name,place:"BladeController.parent"});return}this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}}const qt="http://www.w3.org/2000/svg";function on(ot){ot.offsetHeight}function pn(ot,Qe){const tt=ot.style.transition;ot.style.transition="none",Qe(),ot.style.transition=tt}function kt(ot){return ot.ontouchstart!==void 0}function Mn(ot){for(;ot.childNodes.length>0;)ot.removeChild(ot.childNodes[0])}function wt(ot){return ot.relatedTarget?ot.relatedTarget:"explicitOriginalTarget"in ot?ot.explicitOriginalTarget:null}const It=De("lbl");function Kt(ot,Qe){const tt=ot.createDocumentFragment();return Qe.split(`
`).map(Lt=>ot.createTextNode(Lt)).forEach((Lt,rn)=>{rn>0&&tt.appendChild(ot.createElement("br")),tt.appendChild(Lt)}),tt}class ln{constructor(Qe,tt){this.element=Qe.createElement("div"),this.element.classList.add(It()),tt.viewProps.bindClassModifiers(this.element);const pt=Qe.createElement("div");pt.classList.add(It("l")),Oe(tt.props,"label",rn=>{ve(rn)?this.element.classList.add(It(void 0,"nol")):(this.element.classList.remove(It(void 0,"nol")),Mn(pt),pt.appendChild(Kt(Qe,rn)))}),this.element.appendChild(pt),this.labelElement=pt;const Lt=Qe.createElement("div");Lt.classList.add(It("v")),this.element.appendChild(Lt),this.valueElement=Lt}}class nn extends Tt{constructor(Qe,tt){const pt=tt.valueController.viewProps;super(Object.assign(Object.assign({},tt),{view:new ln(Qe,{props:tt.props,viewProps:pt}),viewProps:pt})),this.props=tt.props,this.valueController=tt.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}class gn extends Tt{constructor(Qe){super(Qe),this.value=Qe.value}}class xn extends rt{constructor(Qe){super(Qe)}static create(Qe){const tt={completed:!0,expanded:Qe,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},pt=rt.createCore(tt);return new xn(pt)}get styleExpanded(){var Qe;return(Qe=this.get("temporaryExpanded"))!==null&&Qe!==void 0?Qe:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const Qe=this.get("expandedHeight");return this.get("shouldFixHeight")&&!ve(Qe)?`${Qe}px`:"auto"}bindExpandedClass(Qe,tt){const pt=()=>{this.styleExpanded?Qe.classList.add(tt):Qe.classList.remove(tt)};Oe(this,"expanded",pt),Oe(this,"temporaryExpanded",pt)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function St(ot){return xn.create(ot)}function At(ot,Qe){let tt=0;return pn(Qe,()=>{ot.set("expandedHeight",null),ot.set("temporaryExpanded",!0),on(Qe),tt=Qe.clientHeight,ot.set("temporaryExpanded",null),on(Qe)}),tt}function Ut(ot,Qe){Qe.style.height=ot.styleHeight}function Zt(ot,Qe){ot.value("expanded").emitter.on("beforechange",()=>{ot.set("completed",!1),ve(ot.get("expandedHeight"))&&ot.set("expandedHeight",At(ot,Qe)),ot.set("shouldFixHeight",!0),on(Qe)}),ot.emitter.on("change",()=>{Ut(ot,Qe)}),Ut(ot,Qe),Qe.addEventListener("transitionend",tt=>{tt.propertyName==="height"&&ot.cleanUpTransition()})}class cn{constructor(Qe,tt){const pt=De(tt.viewName);this.element=Qe.createElement("div"),this.element.classList.add(pt()),tt.viewProps.bindClassModifiers(this.element)}}class sn extends gn{constructor(Qe,tt){const pt=tt.valueController.viewProps;super(Object.assign(Object.assign({},tt),{value:tt.valueController.value,view:new ln(Qe,{props:tt.props,viewProps:pt}),viewProps:pt})),this.props=tt.props,this.valueController=tt.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}class bn{constructor(){this.disabled=!1,this.emitter=new Me}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}}class vn{constructor(Qe,tt){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=Qe,this.emitter=new Me,this.interval_=tt,this.setTimer_()}get disabled(){return this.disabled_}set disabled(Qe){this.disabled_=Qe,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(this.timerId_===null)return;const Qe=this.doc_.defaultView;Qe&&Qe.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const Qe=this.doc_.defaultView;Qe&&(this.timerId_=Qe.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}}class Cn{constructor(Qe){this.constraints=Qe}constrain(Qe){return this.constraints.reduce((tt,pt)=>pt.constrain(tt),Qe)}}function Un(ot,Qe){if(ot instanceof Qe)return ot;if(ot instanceof Cn){const tt=ot.constraints.reduce((pt,Lt)=>pt||(Lt instanceof Qe?Lt:null),null);if(tt)return tt}return null}class yn{constructor(Qe){this.values=rt.fromObject({max:Qe.max,min:Qe.min})}constrain(Qe){const tt=this.values.get("max"),pt=this.values.get("min");return Math.min(Math.max(Qe,pt),tt)}}class $n{constructor(Qe){this.values=rt.fromObject({max:Qe.max,min:Qe.min})}get maxValue(){return this.values.get("max")}get minValue(){return this.values.get("min")}constrain(Qe){const tt=this.values.get("max"),pt=this.values.get("min");let Lt=Qe;return ve(pt)||(Lt=Math.max(Lt,pt)),ve(tt)||(Lt=Math.min(Lt,tt)),Lt}}class Jn{constructor(Qe,tt=0){this.step=Qe,this.origin=tt}constrain(Qe){const tt=this.origin%this.step,pt=Math.round((Qe-tt)/this.step);return tt+pt*this.step}}const Hn=De("pop");class Bn{constructor(Qe,tt){this.element=Qe.createElement("div"),this.element.classList.add(Hn()),tt.viewProps.bindClassModifiers(this.element),Fe(tt.shows,ze(this.element,Hn(void 0,"v")))}}class Yn{constructor(Qe,tt){this.shows=Ke(!1),this.viewProps=tt.viewProps,this.view=new Bn(Qe,{shows:this.shows,viewProps:this.viewProps})}}const Qn=De("txt");class Kn{constructor(Qe,tt){this.onChange_=this.onChange_.bind(this),this.element=Qe.createElement("div"),this.element.classList.add(Qn()),tt.viewProps.bindClassModifiers(this.element),this.props_=tt.props,this.props_.emitter.on("change",this.onChange_);const pt=Qe.createElement("input");pt.classList.add(Qn("i")),pt.type="text",tt.viewProps.bindDisabled(pt),this.element.appendChild(pt),this.inputElement=pt,tt.value.emitter.on("change",this.onChange_),this.value_=tt.value,this.refresh()}refresh(){const Qe=this.props_.get("formatter");this.inputElement.value=Qe(this.value_.rawValue)}onChange_(){this.refresh()}}class Wt{constructor(Qe,tt){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=tt.parser,this.props=tt.props,this.value=tt.value,this.viewProps=tt.viewProps,this.view=new Kn(Qe,{props:tt.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(Qe){const pt=Qe.currentTarget.value,Lt=this.parser_(pt);ve(Lt)||(this.value.rawValue=Lt),this.view.refresh()}}function zn(ot){return ot==="false"?!1:!!ot}class Xt{constructor(Qe){this.text=Qe}evaluate(){return Number(this.text)}toString(){return this.text}}const En={"**":(ot,Qe)=>Math.pow(ot,Qe),"*":(ot,Qe)=>ot*Qe,"/":(ot,Qe)=>ot/Qe,"%":(ot,Qe)=>ot%Qe,"+":(ot,Qe)=>ot+Qe,"-":(ot,Qe)=>ot-Qe,"<<":(ot,Qe)=>ot<<Qe,">>":(ot,Qe)=>ot>>Qe,">>>":(ot,Qe)=>ot>>>Qe,"&":(ot,Qe)=>ot&Qe,"^":(ot,Qe)=>ot^Qe,"|":(ot,Qe)=>ot|Qe};class Fn{constructor(Qe,tt,pt){this.left=tt,this.operator=Qe,this.right=pt}evaluate(){const Qe=En[this.operator];if(!Qe)throw new Error(`unexpected binary operator: '${this.operator}`);return Qe(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const Zn={"+":ot=>ot,"-":ot=>-ot,"~":ot=>~ot};class hi{constructor(Qe,tt){this.operator=Qe,this.expression=tt}evaluate(){const Qe=Zn[this.operator];if(!Qe)throw new Error(`unexpected unary operator: '${this.operator}`);return Qe(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function bi(ot){return(Qe,tt)=>{for(let pt=0;pt<ot.length;pt++){const Lt=ot[pt](Qe,tt);if(Lt!=="")return Lt}return""}}function _i(ot,Qe){var tt;const pt=ot.substr(Qe).match(/^\s+/);return(tt=pt&&pt[0])!==null&&tt!==void 0?tt:""}function ci(ot,Qe){const tt=ot.substr(Qe,1);return tt.match(/^[1-9]$/)?tt:""}function ui(ot,Qe){var tt;const pt=ot.substr(Qe).match(/^[0-9]+/);return(tt=pt&&pt[0])!==null&&tt!==void 0?tt:""}function Fi(ot,Qe){const tt=ui(ot,Qe);if(tt!=="")return tt;const pt=ot.substr(Qe,1);if(Qe+=1,pt!=="-"&&pt!=="+")return"";const Lt=ui(ot,Qe);return Lt===""?"":pt+Lt}function pi(ot,Qe){const tt=ot.substr(Qe,1);if(Qe+=1,tt.toLowerCase()!=="e")return"";const pt=Fi(ot,Qe);return pt===""?"":tt+pt}function ir(ot,Qe){const tt=ot.substr(Qe,1);if(tt==="0")return tt;const pt=ci(ot,Qe);return Qe+=pt.length,pt===""?"":pt+ui(ot,Qe)}function Ki(ot,Qe){const tt=ir(ot,Qe);if(Qe+=tt.length,tt==="")return"";const pt=ot.substr(Qe,1);if(Qe+=pt.length,pt!==".")return"";const Lt=ui(ot,Qe);return Qe+=Lt.length,tt+pt+Lt+pi(ot,Qe)}function rr(ot,Qe){const tt=ot.substr(Qe,1);if(Qe+=tt.length,tt!==".")return"";const pt=ui(ot,Qe);return Qe+=pt.length,pt===""?"":tt+pt+pi(ot,Qe)}function ki(ot,Qe){const tt=ir(ot,Qe);return Qe+=tt.length,tt===""?"":tt+pi(ot,Qe)}const Gi=bi([Ki,rr,ki]);function Qi(ot,Qe){var tt;const pt=ot.substr(Qe).match(/^[01]+/);return(tt=pt&&pt[0])!==null&&tt!==void 0?tt:""}function mr(ot,Qe){const tt=ot.substr(Qe,2);if(Qe+=tt.length,tt.toLowerCase()!=="0b")return"";const pt=Qi(ot,Qe);return pt===""?"":tt+pt}function gr(ot,Qe){var tt;const pt=ot.substr(Qe).match(/^[0-7]+/);return(tt=pt&&pt[0])!==null&&tt!==void 0?tt:""}function br(ot,Qe){const tt=ot.substr(Qe,2);if(Qe+=tt.length,tt.toLowerCase()!=="0o")return"";const pt=gr(ot,Qe);return pt===""?"":tt+pt}function hr(ot,Qe){var tt;const pt=ot.substr(Qe).match(/^[0-9a-f]+/i);return(tt=pt&&pt[0])!==null&&tt!==void 0?tt:""}function er(ot,Qe){const tt=ot.substr(Qe,2);if(Qe+=tt.length,tt.toLowerCase()!=="0x")return"";const pt=hr(ot,Qe);return pt===""?"":tt+pt}const Pt=bi([mr,br,er]),Yt=bi([Pt,Gi]);function un(ot,Qe){const tt=Yt(ot,Qe);return Qe+=tt.length,tt===""?null:{evaluable:new Xt(tt),cursor:Qe}}function it(ot,Qe){const tt=ot.substr(Qe,1);if(Qe+=tt.length,tt!=="(")return null;const pt=dn(ot,Qe);if(!pt)return null;Qe=pt.cursor,Qe+=_i(ot,Qe).length;const Lt=ot.substr(Qe,1);return Qe+=Lt.length,Lt!==")"?null:{evaluable:pt.evaluable,cursor:Qe}}function lt(ot,Qe){var tt;return(tt=un(ot,Qe))!==null&&tt!==void 0?tt:it(ot,Qe)}function xt(ot,Qe){const tt=lt(ot,Qe);if(tt)return tt;const pt=ot.substr(Qe,1);if(Qe+=pt.length,pt!=="+"&&pt!=="-"&&pt!=="~")return null;const Lt=xt(ot,Qe);return Lt?(Qe=Lt.cursor,{cursor:Qe,evaluable:new hi(pt,Lt.evaluable)}):null}function Nt(ot,Qe,tt){tt+=_i(Qe,tt).length;const pt=ot.filter(Lt=>Qe.startsWith(Lt,tt))[0];return pt?(tt+=pt.length,tt+=_i(Qe,tt).length,{cursor:tt,operator:pt}):null}function Qt(ot,Qe){return(tt,pt)=>{const Lt=ot(tt,pt);if(!Lt)return null;pt=Lt.cursor;let rn=Lt.evaluable;for(;;){const An=Nt(Qe,tt,pt);if(!An)break;pt=An.cursor;const On=ot(tt,pt);if(!On)return null;pt=On.cursor,rn=new Fn(An.operator,rn,On.evaluable)}return rn?{cursor:pt,evaluable:rn}:null}}const Ht=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((ot,Qe)=>Qt(ot,Qe),xt);function dn(ot,Qe){return Qe+=_i(ot,Qe).length,Ht(ot,Qe)}function en(ot){const Qe=dn(ot,0);return!Qe||Qe.cursor+_i(ot,Qe.cursor).length!==ot.length?null:Qe.evaluable}function hn(ot){var Qe;const tt=en(ot);return(Qe=tt==null?void 0:tt.evaluate())!==null&&Qe!==void 0?Qe:null}function _n(ot){if(typeof ot=="number")return ot;if(typeof ot=="string"){const Qe=hn(ot);if(!ve(Qe))return Qe}return 0}function fn(ot){return Qe=>Qe.toFixed(Math.max(Math.min(ot,20),0))}const Tn=fn(0);function Ln(ot){return Tn(ot)+"%"}function Pn(ot){return String(ot)}function wn(ot,Qe){for(;ot.length<Qe;)ot.push(void 0)}function Nn(ot){const Qe=[];return wn(Qe,ot),Ke(Qe)}function Dn(ot){const Qe=ot.indexOf(void 0);return Qe<0?ot:ot.slice(0,Qe)}function jn(ot,Qe){const tt=[...Dn(ot),Qe];return tt.length>ot.length?tt.splice(0,tt.length-ot.length):wn(tt,ot.length),tt}function si({primary:ot,secondary:Qe,forward:tt,backward:pt}){let Lt=!1;function rn(An){Lt||(Lt=!0,An(),Lt=!1)}ot.emitter.on("change",An=>{rn(()=>{Qe.setRawValue(tt(ot,Qe),An.options)})}),Qe.emitter.on("change",An=>{rn(()=>{ot.setRawValue(pt(ot,Qe),An.options)}),rn(()=>{Qe.setRawValue(tt(ot,Qe),An.options)})}),rn(()=>{Qe.setRawValue(tt(ot,Qe),{forceEmit:!1,last:!0})})}function oi(ot,Qe){const tt=ot*(Qe.altKey?.1:1)*(Qe.shiftKey?10:1);return Qe.upKey?+tt:Qe.downKey?-tt:0}function Ai(ot){return{altKey:ot.altKey,downKey:ot.key==="ArrowDown",shiftKey:ot.shiftKey,upKey:ot.key==="ArrowUp"}}function ei(ot){return{altKey:ot.altKey,downKey:ot.key==="ArrowLeft",shiftKey:ot.shiftKey,upKey:ot.key==="ArrowRight"}}function ni(ot){return ot==="ArrowUp"||ot==="ArrowDown"}function wi(ot){return ni(ot)||ot==="ArrowLeft"||ot==="ArrowRight"}function gi(ot,Qe){var tt,pt;const Lt=Qe.ownerDocument.defaultView,rn=Qe.getBoundingClientRect();return{x:ot.pageX-(((tt=Lt&&Lt.scrollX)!==null&&tt!==void 0?tt:0)+rn.left),y:ot.pageY-(((pt=Lt&&Lt.scrollY)!==null&&pt!==void 0?pt:0)+rn.top)}}class di{constructor(Qe){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=Qe,this.emitter=new Me,Qe.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),Qe.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),Qe.addEventListener("touchend",this.onTouchEnd_),Qe.addEventListener("mousedown",this.onMouseDown_)}computePosition_(Qe){const tt=this.elem_.getBoundingClientRect();return{bounds:{width:tt.width,height:tt.height},point:Qe?{x:Qe.x,y:Qe.y}:null}}onMouseDown_(Qe){var tt;Qe.preventDefault(),(tt=Qe.currentTarget)===null||tt===void 0||tt.focus();const pt=this.elem_.ownerDocument;pt.addEventListener("mousemove",this.onDocumentMouseMove_),pt.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:Qe.altKey,data:this.computePosition_(gi(Qe,this.elem_)),sender:this,shiftKey:Qe.shiftKey})}onDocumentMouseMove_(Qe){this.emitter.emit("move",{altKey:Qe.altKey,data:this.computePosition_(gi(Qe,this.elem_)),sender:this,shiftKey:Qe.shiftKey})}onDocumentMouseUp_(Qe){const tt=this.elem_.ownerDocument;tt.removeEventListener("mousemove",this.onDocumentMouseMove_),tt.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:Qe.altKey,data:this.computePosition_(gi(Qe,this.elem_)),sender:this,shiftKey:Qe.shiftKey})}onTouchStart_(Qe){Qe.preventDefault();const tt=Qe.targetTouches.item(0),pt=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:Qe.altKey,data:this.computePosition_(tt?{x:tt.clientX-pt.left,y:tt.clientY-pt.top}:void 0),sender:this,shiftKey:Qe.shiftKey}),this.lastTouch_=tt}onTouchMove_(Qe){const tt=Qe.targetTouches.item(0),pt=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:Qe.altKey,data:this.computePosition_(tt?{x:tt.clientX-pt.left,y:tt.clientY-pt.top}:void 0),sender:this,shiftKey:Qe.shiftKey}),this.lastTouch_=tt}onTouchEnd_(Qe){var tt;const pt=(tt=Qe.targetTouches.item(0))!==null&&tt!==void 0?tt:this.lastTouch_,Lt=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:Qe.altKey,data:this.computePosition_(pt?{x:pt.clientX-Lt.left,y:pt.clientY-Lt.top}:void 0),sender:this,shiftKey:Qe.shiftKey})}}function Xn(ot,Qe,tt,pt,Lt){const rn=(ot-Qe)/(tt-Qe);return pt+rn*(Lt-pt)}function fi(ot){return String(ot.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function Vi(ot,Qe,tt){return Math.min(Math.max(ot,Qe),tt)}const Bi=De("txt");class Hi{constructor(Qe,tt){this.onChange_=this.onChange_.bind(this),this.props_=tt.props,this.props_.emitter.on("change",this.onChange_),this.element=Qe.createElement("div"),this.element.classList.add(Bi(),Bi(void 0,"num")),tt.arrayPosition&&this.element.classList.add(Bi(void 0,tt.arrayPosition)),tt.viewProps.bindClassModifiers(this.element);const pt=Qe.createElement("input");pt.classList.add(Bi("i")),pt.type="text",tt.viewProps.bindDisabled(pt),this.element.appendChild(pt),this.inputElement=pt,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=tt.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(Bi()),this.inputElement.classList.add(Bi("i"));const Lt=Qe.createElement("div");Lt.classList.add(Bi("k")),this.element.appendChild(Lt),this.knobElement=Lt;const rn=Qe.createElementNS(qt,"svg");rn.classList.add(Bi("g")),this.knobElement.appendChild(rn);const An=Qe.createElementNS(qt,"path");An.classList.add(Bi("gb")),rn.appendChild(An),this.guideBodyElem_=An;const On=Qe.createElementNS(qt,"path");On.classList.add(Bi("gh")),rn.appendChild(On),this.guideHeadElem_=On;const mi=Qe.createElement("div");mi.classList.add(De("tt")()),this.knobElement.appendChild(mi),this.tooltipElem_=mi,tt.value.emitter.on("change",this.onChange_),this.value=tt.value,this.refresh()}onDraggingChange_(Qe){if(Qe.rawValue===null){this.element.classList.remove(Bi(void 0,"drg"));return}this.element.classList.add(Bi(void 0,"drg"));const tt=Qe.rawValue/this.props_.get("draggingScale"),pt=tt+(tt>0?-1:tt<0?1:0),Lt=Vi(-pt,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${pt+Lt},0 L${pt},4 L${pt+Lt},8`,`M ${tt},-1 L${tt},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${tt},4`);const rn=this.props_.get("formatter");this.tooltipElem_.textContent=rn(this.value.rawValue),this.tooltipElem_.style.left=`${tt}px`}refresh(){const Qe=this.props_.get("formatter");this.inputElement.value=Qe(this.value.rawValue)}onChange_(){this.refresh()}}class Yi{constructor(Qe,tt){var pt;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=tt.baseStep,this.parser_=tt.parser,this.props=tt.props,this.sliderProps_=(pt=tt.sliderProps)!==null&&pt!==void 0?pt:null,this.value=tt.value,this.viewProps=tt.viewProps,this.dragging_=Ke(null),this.view=new Hi(Qe,{arrayPosition:tt.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const Lt=new di(this.view.knobElement);Lt.emitter.on("down",this.onPointerDown_),Lt.emitter.on("move",this.onPointerMove_),Lt.emitter.on("up",this.onPointerUp_)}constrainValue_(Qe){var tt,pt;const Lt=(tt=this.sliderProps_)===null||tt===void 0?void 0:tt.get("minValue"),rn=(pt=this.sliderProps_)===null||pt===void 0?void 0:pt.get("maxValue");let An=Qe;return Lt!==void 0&&(An=Math.max(An,Lt)),rn!==void 0&&(An=Math.min(An,rn)),An}onInputChange_(Qe){const pt=Qe.currentTarget.value,Lt=this.parser_(pt);ve(Lt)||(this.value.rawValue=this.constrainValue_(Lt)),this.view.refresh()}onInputKeyDown_(Qe){const tt=oi(this.baseStep_,Ai(Qe));tt!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+tt),{forceEmit:!1,last:!1})}onInputKeyUp_(Qe){oi(this.baseStep_,Ai(Qe))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(Qe){if(!Qe.point)return null;const tt=Qe.point.x-Qe.bounds.width/2;return this.constrainValue_(this.originRawValue_+tt*this.props.get("draggingScale"))}onPointerMove_(Qe){const tt=this.computeDraggingValue_(Qe.data);tt!==null&&(this.value.setRawValue(tt,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(Qe){const tt=this.computeDraggingValue_(Qe.data);tt!==null&&(this.value.setRawValue(tt,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}function Wi(ot,Qe){ot.write(Qe)}function _r(ot){const Qe=ot?Un(ot,Jn):null;return Qe?Qe.step:null}function Cr(ot,Qe){const tt=ot&&Un(ot,Jn);return tt?fi(tt.step):Math.max(fi(Qe),2)}function Or(ot){const Qe=_r(ot);return Qe??1}function Xi(ot,Qe){var tt;const pt=ot&&Un(ot,Jn),Lt=Math.abs((tt=pt==null?void 0:pt.step)!==null&&tt!==void 0?tt:Qe);return Lt===0?.1:Math.pow(10,Math.floor(Math.log10(Lt))-1)}function Ar(ot){return[ot[0],ot[1],ot[2]]}function Zr(ot){const Qe=Vi(Math.floor(ot),0,255).toString(16);return Qe.length===1?`0${Qe}`:Qe}function sr(ot,Qe="#"){const tt=Ar(ot.getComponents("rgb")).map(Zr).join("");return`${Qe}${tt}`}function es(ot,Qe="#"){const tt=ot.getComponents("rgb"),pt=[tt[0],tt[1],tt[2],tt[3]*255].map(Zr).join("");return`${Qe}${pt}`}function ms(ot,Qe){const tt=fn(Qe==="float"?2:0);return`rgb(${Ar(ot.getComponents("rgb",Qe)).map(Lt=>tt(Lt)).join(", ")})`}function ts(ot){return Qe=>ms(Qe,ot)}function tr(ot,Qe){const tt=fn(2),pt=fn(Qe==="float"?2:0);return`rgba(${ot.getComponents("rgb",Qe).map((rn,An)=>(An===3?tt:pt)(rn)).join(", ")})`}function gs(ot){return Qe=>tr(Qe,ot)}function wr(ot){const Qe=[fn(0),Ln,Ln];return`hsl(${Ar(ot.getComponents("hsl")).map((pt,Lt)=>Qe[Lt](pt)).join(", ")})`}function Ur(ot){const Qe=[fn(0),Ln,Ln,fn(2)];return`hsla(${ot.getComponents("hsl").map((pt,Lt)=>Qe[Lt](pt)).join(", ")})`}function or(ot,Qe){const tt=fn(Qe==="float"?2:0),pt=["r","g","b"];return`{${Ar(ot.getComponents("rgb",Qe)).map((rn,An)=>`${pt[An]}: ${tt(rn)}`).join(", ")}}`}function $r(ot){return Qe=>or(Qe,ot)}function ns(ot,Qe){const tt=fn(2),pt=fn(Qe==="float"?2:0),Lt=["r","g","b","a"];return`{${ot.getComponents("rgb",Qe).map((An,On)=>{const mi=On===3?tt:pt;return`${Lt[On]}: ${mi(An)}`}).join(", ")}}`}function _s(ot){return Qe=>ns(Qe,ot)}[...["int","float"].reduce((ot,Qe)=>[...ot,{format:{alpha:!1,mode:"rgb",notation:"func",type:Qe},stringifier:ts(Qe)},{format:{alpha:!0,mode:"rgb",notation:"func",type:Qe},stringifier:gs(Qe)},{format:{alpha:!1,mode:"rgb",notation:"object",type:Qe},stringifier:$r(Qe)},{format:{alpha:!0,mode:"rgb",notation:"object",type:Qe},stringifier:_s(Qe)}],[])];class As{constructor(Qe){this.components=Qe.components,this.asm_=Qe.assembly}constrain(Qe){const tt=this.asm_.toComponents(Qe).map((pt,Lt)=>{var rn,An;return(An=(rn=this.components[Lt])===null||rn===void 0?void 0:rn.constrain(pt))!==null&&An!==void 0?An:pt});return this.asm_.fromComponents(tt)}}const zr=De("pndtxt");class is{constructor(Qe,tt){this.textViews=tt.textViews,this.element=Qe.createElement("div"),this.element.classList.add(zr()),this.textViews.forEach(pt=>{const Lt=Qe.createElement("div");Lt.classList.add(zr("a")),Lt.appendChild(pt.element),this.element.appendChild(Lt)})}}function vr(ot,Qe,tt){return new Yi(ot,{arrayPosition:tt===0?"fst":tt===Qe.axes.length-1?"lst":"mid",baseStep:Qe.axes[tt].baseStep,parser:Qe.parser,props:Qe.axes[tt].textProps,value:Ke(0,{constraint:Qe.axes[tt].constraint}),viewProps:Qe.viewProps})}class ar{constructor(Qe,tt){this.value=tt.value,this.viewProps=tt.viewProps,this.acs_=tt.axes.map((pt,Lt)=>vr(Qe,tt,Lt)),this.acs_.forEach((pt,Lt)=>{si({primary:this.value,secondary:pt.value,forward:rn=>tt.assembly.toComponents(rn.rawValue)[Lt],backward:(rn,An)=>{const On=tt.assembly.toComponents(rn.rawValue);return On[Lt]=An.rawValue,tt.assembly.fromComponents(On)}})}),this.view=new is(Qe,{textViews:this.acs_.map(pt=>pt.view)})}}function rs(ot,Qe){return"step"in ot&&!ve(ot.step)?new Jn(ot.step,Qe):null}function xr(ot){return!ve(ot.max)&&!ve(ot.min)?new yn({max:ot.max,min:ot.min}):!ve(ot.max)||!ve(ot.min)?new $n({max:ot.max,min:ot.min}):null}const vt={monitor:{defaultInterval:200,defaultLineCount:3}},Je=De("grl");class ut{constructor(Qe,tt){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=Qe.createElement("div"),this.element.classList.add(Je()),tt.viewProps.bindClassModifiers(this.element),this.formatter_=tt.formatter,this.props_=tt.props,this.cursor_=tt.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const pt=Qe.createElementNS(qt,"svg");pt.classList.add(Je("g")),pt.style.height=`calc(var(--bld-us) * ${tt.lineCount})`,this.element.appendChild(pt),this.svgElem_=pt;const Lt=Qe.createElementNS(qt,"polyline");this.svgElem_.appendChild(Lt),this.lineElem_=Lt;const rn=Qe.createElement("div");rn.classList.add(Je("t"),De("tt")()),this.element.appendChild(rn),this.tooltipElem_=rn,tt.value.emitter.on("change",this.onValueUpdate_),this.value=tt.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const Qe=this.svgElem_.getBoundingClientRect(),tt=this.value.rawValue.length-1,pt=this.props_.get("minValue"),Lt=this.props_.get("maxValue"),rn=[];this.value.rawValue.forEach((Zi,li)=>{if(Zi===void 0)return;const Er=Xn(li,0,tt,0,Qe.width),Xs=Xn(Zi,pt,Lt,Qe.height,0);rn.push([Er,Xs].join(","))}),this.lineElem_.setAttributeNS(null,"points",rn.join(" "));const An=this.tooltipElem_,On=this.value.rawValue[this.cursor_.rawValue];if(On===void 0){An.classList.remove(Je("t","a"));return}const mi=Xn(this.cursor_.rawValue,0,tt,0,Qe.width),Ji=Xn(On,pt,Lt,Qe.height,0);An.style.left=`${mi}px`,An.style.top=`${Ji}px`,An.textContent=`${this.formatter_(On)}`,An.classList.contains(Je("t","a"))||(An.classList.add(Je("t","a"),Je("t","in")),on(An),An.classList.remove(Je("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class Rt{constructor(Qe,tt){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props_=tt.props,this.value=tt.value,this.viewProps=tt.viewProps,this.cursor_=Ke(-1),this.view=new ut(Qe,{cursor:this.cursor_,formatter:tt.formatter,lineCount:tt.lineCount,props:this.props_,value:this.value,viewProps:this.viewProps}),!kt(Qe))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const pt=new di(this.view.element);pt.emitter.on("down",this.onGraphPointerDown_),pt.emitter.on("move",this.onGraphPointerMove_),pt.emitter.on("up",this.onGraphPointerUp_)}}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(Qe){const tt=this.view.element.getBoundingClientRect();this.cursor_.rawValue=Math.floor(Xn(Qe.offsetX,0,tt.width,0,this.value.rawValue.length))}onGraphPointerDown_(Qe){this.onGraphPointerMove_(Qe)}onGraphPointerMove_(Qe){if(!Qe.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(Xn(Qe.data.point.x,0,Qe.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}}class jt{constructor(Qe){this.controller_=Qe}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(Qe){this.controller_.viewProps.set("disabled",Qe)}get title(){var Qe;return(Qe=this.controller_.props.get("title"))!==null&&Qe!==void 0?Qe:""}set title(Qe){this.controller_.props.set("title",Qe)}on(Qe,tt){const pt=tt.bind(this);return this.controller_.emitter.on(Qe,()=>{pt(new ee(this))}),this}}class mn extends ee{constructor(Qe,tt,pt){super(Qe),this.cell=tt,this.index=pt}}class Vn extends j{constructor(Qe){super(Qe),this.cellToApiMap_=new Map,this.emitter_=new Me;const tt=this.controller_.valueController;tt.cellControllers.forEach((pt,Lt)=>{const rn=new jt(pt);this.cellToApiMap_.set(pt,rn),pt.emitter.on("click",()=>{const An=Lt%tt.size[0],On=Math.floor(Lt/tt.size[0]);this.emitter_.emit("click",{event:new mn(this,rn,[An,On])})})})}cell(Qe,tt){const pt=this.controller_.valueController,Lt=pt.cellControllers[tt*pt.size[0]+Qe];return this.cellToApiMap_.get(Lt)}on(Qe,tt){const pt=tt.bind(this);return this.emitter_.on(Qe,Lt=>{pt(Lt.event)}),this}}class Gn{constructor(Qe,tt){this.size=tt.size;const[pt,Lt]=this.size,rn=[];for(let An=0;An<Lt;An++)for(let On=0;On<pt;On++){const mi=new qe(Qe,{props:rt.fromObject(Object.assign({},tt.cellConfig(On,An))),viewProps:tn.create()});rn.push(mi)}this.cellCs_=rn,this.viewProps=tn.create(),this.viewProps.handleDispose(()=>{this.cellCs_.forEach(An=>{An.viewProps.set("disposed",!0)})}),this.view=new cn(Qe,{viewProps:this.viewProps,viewName:"btngrid"}),this.view.element.style.gridTemplateColumns=`repeat(${pt}, 1fr)`,this.cellCs_.forEach(An=>{this.view.element.appendChild(An.view.element)})}get cellControllers(){return this.cellCs_}}const Wn={id:"buttongrid",type:"blade",css:'.tp-cbzgv,.tp-radv_b,.tp-rslv_k,.tp-cbzv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-radv_b,.tp-rslv_k,.tp-cbzv_b{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-radv_b:hover,.tp-rslv_k:hover,.tp-cbzv_b:hover{background-color:var(--btn-bg-h)}.tp-radv_b:focus,.tp-rslv_k:focus,.tp-cbzv_b:focus{background-color:var(--btn-bg-f)}.tp-radv_b:active,.tp-rslv_k:active,.tp-cbzv_b:active{background-color:var(--btn-bg-a)}.tp-radv_b:disabled,.tp-rslv_k:disabled,.tp-cbzv_b:disabled{opacity:.5}.tp-cbzgv{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-cbzgv:hover{background-color:var(--in-bg-h)}.tp-cbzgv:focus{background-color:var(--in-bg-f)}.tp-cbzgv:active{background-color:var(--in-bg-a)}.tp-cbzgv:disabled{opacity:.5}.tp-btngridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-btngridv.tp-v-disabled{opacity:.5}.tp-btngridv .tp-btnv_b:disabled{opacity:1}.tp-btngridv .tp-btnv_b:disabled .tp-btnv_t{opacity:.5}.tp-btngridv .tp-btnv_b{border-radius:0}.tp-cbzv{position:relative}.tp-cbzv_h{display:flex}.tp-cbzv_b{margin-right:4px;position:relative;width:var(--bld-us)}.tp-cbzv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-cbzv_b svg path{stroke:var(--bs-bg);stroke-width:2}.tp-cbzv_t{flex:1}.tp-cbzv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-cbzv.tp-cbzv-expanded .tp-cbzv_p{margin-top:var(--bld-s);opacity:1}.tp-cbzv.tp-cbzv-cpl .tp-cbzv_p{overflow:visible}.tp-cbzv .tp-popv{left:calc(-1*var(--cnt-h-p));position:absolute;right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-cbzpv_t{margin-top:var(--bld-s)}.tp-cbzgv{height:auto;overflow:hidden;position:relative}.tp-cbzgv.tp-v-disabled{opacity:.5}.tp-cbzgv_p{left:16px;position:absolute;right:16px;top:0}.tp-cbzgv_g{cursor:pointer;display:block;height:calc(var(--bld-us)*5);width:100%}.tp-cbzgv_u{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_l{fill:rgba(0,0,0,0);stroke:var(--in-fg)}.tp-cbzgv_v{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_h{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;pointer-events:none;position:absolute;width:4px}.tp-cbzgv:focus .tp-cbzgv_h-sel{background-color:var(--in-fg);border-width:0}.tp-cbzprvv{cursor:pointer;height:4px;padding:4px 0;position:relative}.tp-cbzprvv_g{display:block;height:100%;overflow:visible;width:100%}.tp-cbzprvv_t{opacity:.5;stroke:var(--mo-fg)}.tp-cbzprvv_m{background-color:var(--mo-fg);border-radius:50%;height:4px;margin-left:-2px;margin-top:-2px;opacity:0;position:absolute;top:50%;transition:opacity .2s ease-out;width:4px}.tp-cbzprvv_m.tp-cbzprvv_m-a{opacity:1}.tp-fpsv{position:relative}.tp-fpsv_l{bottom:4px;color:var(--mo-fg);line-height:1;right:4px;pointer-events:none;position:absolute}.tp-fpsv_u{margin-left:.2em;opacity:.7}.tp-rslv{cursor:pointer;padding-left:8px;padding-right:8px}.tp-rslv.tp-v-disabled{opacity:.5}.tp-rslv_t{height:calc(var(--bld-us));position:relative}.tp-rslv_t::before{background-color:var(--in-bg);border-radius:1px;content:"";height:2px;margin-top:-1px;position:absolute;top:50%;left:-4px;right:-4px}.tp-rslv_b{bottom:0;top:0;position:absolute}.tp-rslv_b::before{background-color:var(--in-fg);content:"";height:2px;margin-top:-1px;position:absolute;top:50%;left:0;right:0}.tp-rslv_k{height:calc(var(--bld-us) - 8px);margin-top:calc((var(--bld-us) - 8px)/-2);position:absolute;top:50%;width:8px}.tp-rslv_k.tp-rslv_k-min{margin-left:-8px}.tp-rslv_k.tp-rslv_k-max{margin-left:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-min{border-bottom-right-radius:0;border-top-right-radius:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-max{border-bottom-left-radius:0;border-top-left-radius:0}.tp-rsltxtv{display:flex}.tp-rsltxtv_s{flex:1}.tp-rsltxtv_t{flex:1;margin-left:4px}.tp-radv_l{display:block;position:relative}.tp-radv_i{left:0;opacity:0;position:absolute;top:0}.tp-radv_b{opacity:.5}.tp-radv_i:hover+.tp-radv_b{background-color:var(--btn-bg-h)}.tp-radv_i:focus+.tp-radv_b{background-color:var(--btn-bg-f)}.tp-radv_i:active+.tp-radv_b{background-color:var(--btn-bg-a)}.tp-radv_i:checked+.tp-radv_b{opacity:1}.tp-radv_t{bottom:0;color:inherit;left:0;overflow:hidden;position:absolute;right:0;text-align:center;text-overflow:ellipsis;top:0}.tp-radv_i:disabled+.tp-radv_b>.tp-radv_t{opacity:.5}.tp-radgridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-radgridv.tp-v-disabled{opacity:.5}.tp-radgridv .tp-radv_b{border-radius:0}',accept(ot){const Qe=st,tt=at(ot,{cells:Qe.required.function,size:Qe.required.array(Qe.required.number),view:Qe.required.constant("buttongrid"),label:Qe.optional.string});return tt?{params:tt}:null},controller(ot){return new nn(ot.document,{blade:ot.blade,props:rt.fromObject({label:ot.params.label}),valueController:new Gn(ot.document,{cellConfig:ot.params.cells,size:ot.params.size})})},api(ot){return!(ot.controller instanceof nn)||!(ot.controller.valueController instanceof Gn)?null:new Vn(ot.controller)}};class qn extends j{get label(){return this.controller_.props.get("label")}set label(Qe){this.controller_.props.set("label",Qe)}get value(){return this.controller_.valueController.value.rawValue}set value(Qe){this.controller_.valueController.value.rawValue=Qe}on(Qe,tt){const pt=tt.bind(this);return this.controller_.valueController.value.emitter.on(Qe,Lt=>{pt(new re(this,Lt.rawValue,void 0,Lt.options.last))}),this}}function ri(ot,Qe,tt){return ot*(1-tt)+Qe*tt}const xi=20,Mi=.001,Ni=100;function $i(ot,Qe){let tt=.25,pt=.5,Lt=-1;for(let rn=0;rn<xi;rn++){const[An,On]=ot.curve(pt);if(pt+=tt*(An<Qe?1:-1),Lt=On,tt*=.5,Math.abs(Qe-An)<Mi)break}return Lt}class Oi{constructor(Qe=0,tt=0,pt=1,Lt=1){this.cache_=[],this.comps_=[Qe,tt,pt,Lt]}get x1(){return this.comps_[0]}get y1(){return this.comps_[1]}get x2(){return this.comps_[2]}get y2(){return this.comps_[3]}static isObject(Qe){return ve(Qe)||!Array.isArray(Qe)?!1:typeof Qe[0]=="number"&&typeof Qe[1]=="number"&&typeof Qe[2]=="number"&&typeof Qe[3]=="number"}static equals(Qe,tt){return Qe.x1===tt.x1&&Qe.y1===tt.y1&&Qe.x2===tt.x2&&Qe.y2===tt.y2}curve(Qe){const tt=ri(0,this.x1,Qe),pt=ri(0,this.y1,Qe),Lt=ri(this.x1,this.x2,Qe),rn=ri(this.y1,this.y2,Qe),An=ri(this.x2,1,Qe),On=ri(this.y2,1,Qe),mi=ri(tt,Lt,Qe),Ji=ri(pt,rn,Qe),Zi=ri(Lt,An,Qe),li=ri(rn,On,Qe);return[ri(mi,Zi,Qe),ri(Ji,li,Qe)]}y(Qe){if(this.cache_.length===0){const tt=[];for(let pt=0;pt<Ni;pt++)tt.push($i(this,Xn(pt,0,Ni-1,0,1)));this.cache_=tt}return this.cache_[Math.round(Xn(Vi(Qe,0,1),0,1,0,Ni-1))]}toObject(){return[this.comps_[0],this.comps_[1],this.comps_[2],this.comps_[3]]}}const vi={toComponents:ot=>ot.toObject(),fromComponents:ot=>new Oi(...ot)};function Dr(ot){const Qe=fn(2);return`cubic-bezier(${ot.toObject().map(pt=>Qe(pt)).join(", ")})`}const vs=[0,.5,.5,1];function Qs(ot){const Qe=ot.match(/^cubic-bezier\s*\(\s*([0-9.]+)\s*,\s*([0-9.]+)\s*,\s*([0-9.]+)\s*,\s*([0-9.]+)\s*\)$/);if(!Qe)return new Oi(...vs);const tt=[Qe[1],Qe[2],Qe[3],Qe[4]].reduce((pt,Lt)=>{if(!pt)return null;const rn=Number(Lt);return isNaN(rn)?null:[...pt,rn]},[]);return new Oi(...tt??vs)}const Sr=De("cbz");class Ls{constructor(Qe,tt){this.element=Qe.createElement("div"),this.element.classList.add(Sr()),tt.viewProps.bindClassModifiers(this.element),tt.foldable.bindExpandedClass(this.element,Sr(void 0,"expanded")),Oe(tt.foldable,"completed",ze(this.element,Sr(void 0,"cpl")));const pt=Qe.createElement("div");pt.classList.add(Sr("h")),this.element.appendChild(pt);const Lt=Qe.createElement("button");Lt.classList.add(Sr("b")),tt.viewProps.bindDisabled(Lt);const rn=Qe.createElementNS(qt,"svg");rn.innerHTML='<path d="M2 13C8 13 8 3 14 3"/>',Lt.appendChild(rn),pt.appendChild(Lt),this.buttonElement=Lt;const An=Qe.createElement("div");if(An.classList.add(Sr("t")),pt.appendChild(An),this.textElement=An,tt.pickerLayout==="inline"){const On=Qe.createElement("div");On.classList.add(Sr("p")),this.element.appendChild(On),this.pickerElement=On}else this.pickerElement=null}}const ss=De("cbzp");class ks{constructor(Qe,tt){this.element=Qe.createElement("div"),this.element.classList.add(ss()),tt.viewProps.bindClassModifiers(this.element);const pt=Qe.createElement("div");pt.classList.add(ss("g")),this.element.appendChild(pt),this.graphElement=pt;const Lt=Qe.createElement("div");Lt.classList.add(ss("t")),this.element.appendChild(Lt),this.textElement=Lt}}function lr(ot,Qe){const tt=new MutationObserver(Lt=>{for(const rn of Lt)rn.type==="childList"&&rn.addedNodes.forEach(An=>{An.contains(An)&&(Qe(),tt.disconnect())})}),pt=ot.ownerDocument;tt.observe(pt.body,{attributes:!0,childList:!0,subtree:!0})}const dr=De("cbzg");function Ws(ot,Qe){return tt=>Qe(ot(tt))}class Ui{constructor(Qe,tt){this.element=Qe.createElement("div"),this.element.classList.add(dr()),tt.viewProps.bindClassModifiers(this.element),tt.viewProps.bindTabIndex(this.element);const pt=Qe.createElement("div");pt.classList.add(dr("p")),this.element.appendChild(pt),this.previewElement=pt;const Lt=Qe.createElementNS(qt,"svg");Lt.classList.add(dr("g")),this.element.appendChild(Lt),this.svgElem_=Lt;const rn=Qe.createElementNS(qt,"path");rn.classList.add(dr("u")),this.svgElem_.appendChild(rn),this.guideElem_=rn;const An=Qe.createElementNS(qt,"polyline");An.classList.add(dr("l")),this.svgElem_.appendChild(An),this.lineElem_=An,this.handleElems_=[Qe.createElement("div"),Qe.createElement("div")],this.handleElems_.forEach(On=>{On.classList.add(dr("h")),this.element.appendChild(On)}),this.vectorElems_=[Qe.createElementNS(qt,"line"),Qe.createElementNS(qt,"line")],this.vectorElems_.forEach(On=>{On.classList.add(dr("v")),this.svgElem_.appendChild(On)}),this.value_=tt.value,this.value_.emitter.on("change",this.onValueChange_.bind(this)),this.sel_=tt.selection,this.handleElems_.forEach((On,mi)=>{Fe(this.sel_,Ws(Ji=>Ji===mi,ze(On,dr("h","sel"))))}),lr(this.element,()=>{this.refresh()})}getVertMargin_(Qe){return Qe*.25}valueToPosition(Qe,tt){const pt=this.element.getBoundingClientRect(),Lt=pt.width,rn=pt.height,An=this.getVertMargin_(rn);return{x:Xn(Qe,0,1,0,Lt),y:Xn(tt,0,1,rn-An,An)}}positionToValue(Qe,tt){const pt=this.element.getBoundingClientRect(),Lt=pt.width,rn=pt.height,An=this.getVertMargin_(rn);return{x:Vi(Xn(Qe,0,Lt,0,1),0,1),y:Xn(tt,rn-An,An,0,1)}}refresh(){this.guideElem_.setAttributeNS(null,"d",[0,1].map(rn=>{const An=this.valueToPosition(0,rn),On=this.valueToPosition(1,rn);return[`M ${An.x},${An.y}`,`L ${On.x},${On.y}`].join(" ")}).join(" "));const Qe=this.value_.rawValue,tt=[];let pt=0;for(;;){const rn=this.valueToPosition(...Qe.curve(pt));if(tt.push([rn.x,rn.y].join(",")),pt>=1)break;pt=Math.min(pt+.05,1)}this.lineElem_.setAttributeNS(null,"points",tt.join(" "));const Lt=Qe.toObject();[0,1].forEach(rn=>{const An=this.valueToPosition(rn,rn),On=this.valueToPosition(Lt[rn*2],Lt[rn*2+1]),mi=this.vectorElems_[rn];mi.setAttributeNS(null,"x1",String(An.x)),mi.setAttributeNS(null,"y1",String(An.y)),mi.setAttributeNS(null,"x2",String(On.x)),mi.setAttributeNS(null,"y2",String(On.y));const Ji=this.handleElems_[rn];Ji.style.left=`${On.x}px`,Ji.style.top=`${On.y}px`})}onValueChange_(){this.refresh()}}const Fs=24,Gr=400,ys=1e3,yr=De("cbzprv");class Br{constructor(Qe,tt){this.stopped_=!0,this.startTime_=-1,this.onDispose_=this.onDispose_.bind(this),this.onTimer_=this.onTimer_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.element=Qe.createElement("div"),this.element.classList.add(yr()),tt.viewProps.bindClassModifiers(this.element);const pt=Qe.createElementNS(qt,"svg");pt.classList.add(yr("g")),this.element.appendChild(pt),this.svgElem_=pt;const Lt=Qe.createElementNS(qt,"path");Lt.classList.add(yr("t")),this.svgElem_.appendChild(Lt),this.ticksElem_=Lt;const rn=Qe.createElement("div");rn.classList.add(yr("m")),this.element.appendChild(rn),this.markerElem_=rn,this.value_=tt.value,this.value_.emitter.on("change",this.onValueChange_),tt.viewProps.handleDispose(this.onDispose_),lr(this.element,()=>{this.refresh()})}play(){this.stop(),this.updateMarker_(0),this.markerElem_.classList.add(yr("m","a")),this.startTime_=new Date().getTime()+Gr,this.stopped_=!1,requestAnimationFrame(this.onTimer_)}stop(){this.stopped_=!0,this.markerElem_.classList.remove(yr("m","a"))}onDispose_(){this.stop()}updateMarker_(Qe){const tt=this.value_.rawValue.y(Vi(Qe,0,1));this.markerElem_.style.left=`${tt*100}%`}refresh(){const Qe=this.svgElem_.getBoundingClientRect(),tt=Qe.width,pt=Qe.height,Lt=[],rn=this.value_.rawValue;for(let An=0;An<Fs;An++){const On=Xn(An,0,Fs-1,0,1),mi=Xn(rn.y(On),0,1,0,tt);Lt.push(`M ${mi},0 v${pt}`)}this.ticksElem_.setAttributeNS(null,"d",Lt.join(" "))}onTimer_(){if(this.startTime_===null)return;const Qe=new Date().getTime()-this.startTime_,tt=Qe/ys;this.updateMarker_(tt),Qe>ys+Gr&&this.stop(),this.stopped_||requestAnimationFrame(this.onTimer_)}onValueChange_(){this.refresh(),this.play()}}function zi(ot,Qe,tt,pt){const Lt=tt-ot,rn=pt-Qe;return Math.sqrt(Lt*Lt+rn*rn)}function Hr(ot,Qe,tt,pt){const Lt=zi(ot,Qe,tt,pt),rn=Math.atan2(pt-Qe,tt-ot),An=Math.round(rn/(Math.PI/4))*Math.PI/4;return{x:ot+Math.cos(An)*Lt,y:Qe+Math.sin(An)*Lt}}class cr{constructor(Qe,tt){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=tt.baseStep,this.value=tt.value,this.sel_=Ke(0),this.viewProps=tt.viewProps,this.view=new Ui(Qe,{selection:this.sel_,value:this.value,viewProps:this.viewProps}),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_),this.prevView_=new Br(Qe,{value:this.value,viewProps:this.viewProps}),this.prevView_.element.addEventListener("mousedown",Lt=>{Lt.stopImmediatePropagation(),Lt.preventDefault(),this.prevView_.play()}),this.view.previewElement.appendChild(this.prevView_.element);const pt=new di(this.view.element);pt.emitter.on("down",this.onPointerDown_),pt.emitter.on("move",this.onPointerMove_),pt.emitter.on("up",this.onPointerUp_)}refresh(){this.view.refresh(),this.prevView_.refresh(),this.prevView_.play()}updateValue_(Qe,tt,pt){const Lt=this.sel_.rawValue,rn=this.value.rawValue.toObject(),An=this.view.positionToValue(Qe.x,Qe.y),On=tt?Hr(Lt,Lt,An.x,An.y):An;rn[Lt*2]=On.x,rn[Lt*2+1]=On.y,this.value.setRawValue(new Oi(...rn),pt)}onPointerDown_(Qe){const tt=Qe.data;if(!tt.point)return;const pt=this.value.rawValue,Lt=this.view.valueToPosition(pt.x1,pt.y1),rn=zi(tt.point.x,tt.point.y,Lt.x,Lt.y),An=this.view.valueToPosition(pt.x2,pt.y2),On=zi(tt.point.x,tt.point.y,An.x,An.y);this.sel_.rawValue=rn<=On?0:1,this.updateValue_(tt.point,Qe.shiftKey,{forceEmit:!1,last:!1})}onPointerMove_(Qe){const tt=Qe.data;tt.point&&this.updateValue_(tt.point,Qe.shiftKey,{forceEmit:!1,last:!1})}onPointerUp_(Qe){const tt=Qe.data;tt.point&&this.updateValue_(tt.point,Qe.shiftKey,{forceEmit:!0,last:!0})}onKeyDown_(Qe){wi(Qe.key)&&Qe.preventDefault();const tt=this.sel_.rawValue,pt=this.value.rawValue.toObject();pt[tt*2]+=oi(this.baseStep_,ei(Qe)),pt[tt*2+1]+=oi(this.baseStep_,Ai(Qe)),this.value.setRawValue(new Oi(...pt),{forceEmit:!1,last:!1})}onKeyUp_(Qe){wi(Qe.key)&&Qe.preventDefault();const tt=oi(this.baseStep_,ei(Qe)),pt=oi(this.baseStep_,Ai(Qe));tt===0&&pt===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class Vs{constructor(Qe,tt){this.value=tt.value,this.viewProps=tt.viewProps,this.view=new ks(Qe,{viewProps:this.viewProps}),this.gc_=new cr(Qe,{baseStep:tt.axis.baseStep,value:this.value,viewProps:this.viewProps}),this.view.graphElement.appendChild(this.gc_.view.element);const pt=Object.assign(Object.assign({},tt.axis),{constraint:new $n({max:1,min:0})}),Lt=Object.assign(Object.assign({},tt.axis),{constraint:void 0});this.tc_=new ar(Qe,{assembly:vi,axes:[pt,Lt,pt,Lt],parser:hn,value:this.value,viewProps:this.viewProps}),this.view.textElement.appendChild(this.tc_.view.element)}get allFocusableElements(){return[this.gc_.view.element,...this.tc_.view.textViews.map(Qe=>Qe.inputElement)]}refresh(){this.gc_.refresh()}}class os{constructor(Qe,tt){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=tt.value,this.viewProps=tt.viewProps,this.foldable_=St(tt.expanded),this.view=new Ls(Qe,{foldable:this.foldable_,pickerLayout:tt.pickerLayout,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("blur",this.onButtonBlur_),this.view.buttonElement.addEventListener("click",this.onButtonClick_),this.tc_=new Wt(Qe,{parser:Qs,props:rt.fromObject({formatter:Dr}),value:this.value,viewProps:this.viewProps}),this.view.textElement.appendChild(this.tc_.view.element),this.popC_=tt.pickerLayout==="popup"?new Yn(Qe,{viewProps:this.viewProps}):null;const pt=new Vs(Qe,{axis:tt.axis,value:this.value,viewProps:this.viewProps});pt.allFocusableElements.forEach(Lt=>{Lt.addEventListener("blur",this.onPopupChildBlur_),Lt.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=pt,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),Fe(this.popC_.shows,Lt=>{Lt&&pt.refresh()}),si({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:Lt=>Lt.rawValue,backward:(Lt,rn)=>rn.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),Zt(this.foldable_,this.view.pickerElement))}onButtonBlur_(Qe){if(!this.popC_)return;const tt=Qe.relatedTarget;(!tt||!this.popC_.view.element.contains(tt))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.allFocusableElements[0].focus()}onPopupChildBlur_(Qe){if(!this.popC_)return;const tt=this.popC_.view.element,pt=wt(Qe);pt&&tt.contains(pt)||pt&&pt===this.view.buttonElement&&!kt(tt.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(Qe){this.popC_&&Qe.key==="Escape"&&(this.popC_.shows.rawValue=!1)}}function Es(){return new As({assembly:vi,components:[0,1,2,3].map(ot=>ot%2===0?new $n({min:0,max:1}):void 0)})}const Tr={id:"cubic-bezier",type:"blade",css:'.tp-cbzgv,.tp-radv_b,.tp-rslv_k,.tp-cbzv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-radv_b,.tp-rslv_k,.tp-cbzv_b{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-radv_b:hover,.tp-rslv_k:hover,.tp-cbzv_b:hover{background-color:var(--btn-bg-h)}.tp-radv_b:focus,.tp-rslv_k:focus,.tp-cbzv_b:focus{background-color:var(--btn-bg-f)}.tp-radv_b:active,.tp-rslv_k:active,.tp-cbzv_b:active{background-color:var(--btn-bg-a)}.tp-radv_b:disabled,.tp-rslv_k:disabled,.tp-cbzv_b:disabled{opacity:.5}.tp-cbzgv{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-cbzgv:hover{background-color:var(--in-bg-h)}.tp-cbzgv:focus{background-color:var(--in-bg-f)}.tp-cbzgv:active{background-color:var(--in-bg-a)}.tp-cbzgv:disabled{opacity:.5}.tp-btngridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-btngridv.tp-v-disabled{opacity:.5}.tp-btngridv .tp-btnv_b:disabled{opacity:1}.tp-btngridv .tp-btnv_b:disabled .tp-btnv_t{opacity:.5}.tp-btngridv .tp-btnv_b{border-radius:0}.tp-cbzv{position:relative}.tp-cbzv_h{display:flex}.tp-cbzv_b{margin-right:4px;position:relative;width:var(--bld-us)}.tp-cbzv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-cbzv_b svg path{stroke:var(--bs-bg);stroke-width:2}.tp-cbzv_t{flex:1}.tp-cbzv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-cbzv.tp-cbzv-expanded .tp-cbzv_p{margin-top:var(--bld-s);opacity:1}.tp-cbzv.tp-cbzv-cpl .tp-cbzv_p{overflow:visible}.tp-cbzv .tp-popv{left:calc(-1*var(--cnt-h-p));position:absolute;right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-cbzpv_t{margin-top:var(--bld-s)}.tp-cbzgv{height:auto;overflow:hidden;position:relative}.tp-cbzgv.tp-v-disabled{opacity:.5}.tp-cbzgv_p{left:16px;position:absolute;right:16px;top:0}.tp-cbzgv_g{cursor:pointer;display:block;height:calc(var(--bld-us)*5);width:100%}.tp-cbzgv_u{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_l{fill:rgba(0,0,0,0);stroke:var(--in-fg)}.tp-cbzgv_v{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_h{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;pointer-events:none;position:absolute;width:4px}.tp-cbzgv:focus .tp-cbzgv_h-sel{background-color:var(--in-fg);border-width:0}.tp-cbzprvv{cursor:pointer;height:4px;padding:4px 0;position:relative}.tp-cbzprvv_g{display:block;height:100%;overflow:visible;width:100%}.tp-cbzprvv_t{opacity:.5;stroke:var(--mo-fg)}.tp-cbzprvv_m{background-color:var(--mo-fg);border-radius:50%;height:4px;margin-left:-2px;margin-top:-2px;opacity:0;position:absolute;top:50%;transition:opacity .2s ease-out;width:4px}.tp-cbzprvv_m.tp-cbzprvv_m-a{opacity:1}.tp-fpsv{position:relative}.tp-fpsv_l{bottom:4px;color:var(--mo-fg);line-height:1;right:4px;pointer-events:none;position:absolute}.tp-fpsv_u{margin-left:.2em;opacity:.7}.tp-rslv{cursor:pointer;padding-left:8px;padding-right:8px}.tp-rslv.tp-v-disabled{opacity:.5}.tp-rslv_t{height:calc(var(--bld-us));position:relative}.tp-rslv_t::before{background-color:var(--in-bg);border-radius:1px;content:"";height:2px;margin-top:-1px;position:absolute;top:50%;left:-4px;right:-4px}.tp-rslv_b{bottom:0;top:0;position:absolute}.tp-rslv_b::before{background-color:var(--in-fg);content:"";height:2px;margin-top:-1px;position:absolute;top:50%;left:0;right:0}.tp-rslv_k{height:calc(var(--bld-us) - 8px);margin-top:calc((var(--bld-us) - 8px)/-2);position:absolute;top:50%;width:8px}.tp-rslv_k.tp-rslv_k-min{margin-left:-8px}.tp-rslv_k.tp-rslv_k-max{margin-left:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-min{border-bottom-right-radius:0;border-top-right-radius:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-max{border-bottom-left-radius:0;border-top-left-radius:0}.tp-rsltxtv{display:flex}.tp-rsltxtv_s{flex:1}.tp-rsltxtv_t{flex:1;margin-left:4px}.tp-radv_l{display:block;position:relative}.tp-radv_i{left:0;opacity:0;position:absolute;top:0}.tp-radv_b{opacity:.5}.tp-radv_i:hover+.tp-radv_b{background-color:var(--btn-bg-h)}.tp-radv_i:focus+.tp-radv_b{background-color:var(--btn-bg-f)}.tp-radv_i:active+.tp-radv_b{background-color:var(--btn-bg-a)}.tp-radv_i:checked+.tp-radv_b{opacity:1}.tp-radv_t{bottom:0;color:inherit;left:0;overflow:hidden;position:absolute;right:0;text-align:center;text-overflow:ellipsis;top:0}.tp-radv_i:disabled+.tp-radv_b>.tp-radv_t{opacity:.5}.tp-radgridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-radgridv.tp-v-disabled{opacity:.5}.tp-radgridv .tp-radv_b{border-radius:0}',accept(ot){const Qe=st,tt=at(ot,{value:Qe.required.array(Qe.required.number),view:Qe.required.constant("cubicbezier"),expanded:Qe.optional.boolean,label:Qe.optional.string,picker:Qe.optional.custom(pt=>pt==="inline"||pt==="popup"?pt:void 0)});return tt?{params:tt}:null},controller(ot){var Qe,tt;const pt=new Oi(...ot.params.value),Lt=Ke(pt,{constraint:Es(),equals:Oi.equals}),rn=new os(ot.document,{axis:{baseStep:.1,textProps:rt.fromObject({draggingScale:.01,formatter:fn(2)})},expanded:(Qe=ot.params.expanded)!==null&&Qe!==void 0?Qe:!1,pickerLayout:(tt=ot.params.picker)!==null&&tt!==void 0?tt:"popup",value:Lt,viewProps:ot.viewProps});return new sn(ot.document,{blade:ot.blade,props:rt.fromObject({label:ot.params.label}),valueController:rn})},api(ot){return!(ot.controller instanceof sn)||!(ot.controller.valueController instanceof os)?null:new qn(ot.controller)}};class Ri extends j{begin(){this.controller_.valueController.begin()}end(){this.controller_.valueController.end()}}const bs=20;class Li{constructor(){this.start_=null,this.duration_=0,this.fps_=null,this.frameCount_=0,this.timestamps_=[]}get duration(){return this.duration_}get fps(){return this.fps_}begin(Qe){this.start_=Qe.getTime()}calculateFps_(Qe){if(this.timestamps_.length===0)return null;const tt=this.timestamps_[0];return 1e3*(this.frameCount_-tt.frameCount)/(Qe-tt.time)}compactTimestamps_(){if(this.timestamps_.length<=bs)return;const Qe=this.timestamps_.length-bs;this.timestamps_.splice(0,Qe);const tt=this.timestamps_[0].frameCount;this.timestamps_.forEach(pt=>{pt.frameCount-=tt}),this.frameCount_-=tt}end(Qe){if(this.start_===null)return;const tt=Qe.getTime();this.duration_=tt-this.start_,this.start_=null,this.fps_=this.calculateFps_(tt),this.timestamps_.push({frameCount:this.frameCount_,time:tt}),++this.frameCount_,this.compactTimestamps_()}}const Lr=De("fps");class qi{constructor(Qe,tt){this.element=Qe.createElement("div"),this.element.classList.add(Lr()),tt.viewProps.bindClassModifiers(this.element),this.graphElement=Qe.createElement("div"),this.graphElement.classList.add(Lr("g")),this.element.appendChild(this.graphElement);const pt=Qe.createElement("div");pt.classList.add(Lr("l")),this.element.appendChild(pt);const Lt=Qe.createElement("span");Lt.classList.add(Lr("v")),Lt.textContent="--",pt.appendChild(Lt),this.valueElement=Lt;const rn=Qe.createElement("span");rn.classList.add(Lr("u")),rn.textContent="FPS",pt.appendChild(rn)}}class Cs{constructor(Qe,tt){this.stopwatch_=new Li,this.onTick_=this.onTick_.bind(this),this.ticker_=tt.ticker,this.ticker_.emitter.on("tick",this.onTick_),this.value_=tt.value,this.viewProps=tt.viewProps,this.view=new qi(Qe,{viewProps:this.viewProps}),this.graphC_=new Rt(Qe,{formatter:fn(0),lineCount:tt.lineCount,props:rt.fromObject({maxValue:tt.maxValue,minValue:tt.minValue}),value:this.value_,viewProps:this.viewProps}),this.view.graphElement.appendChild(this.graphC_.view.element),this.viewProps.handleDispose(()=>{this.graphC_.viewProps.set("disposed",!0),this.ticker_.dispose()})}begin(){this.stopwatch_.begin(new Date)}end(){this.stopwatch_.end(new Date)}onTick_(){const Qe=this.stopwatch_.fps;if(Qe!==null){const tt=this.value_.rawValue;this.value_.rawValue=jn(tt,Qe),this.view.valueElement.textContent=Qe.toFixed(0)}}}function Qr(ot,Qe){return Qe===0?new bn:new vn(ot,Qe??vt.monitor.defaultInterval)}const ws={id:"fpsgraph",type:"blade",accept(ot){const Qe=st,tt=at(ot,{view:Qe.required.constant("fpsgraph"),interval:Qe.optional.number,label:Qe.optional.string,lineCount:Qe.optional.number,max:Qe.optional.number,min:Qe.optional.number});return tt?{params:tt}:null},controller(ot){var Qe,tt,pt,Lt;const rn=(Qe=ot.params.interval)!==null&&Qe!==void 0?Qe:500;return new nn(ot.document,{blade:ot.blade,props:rt.fromObject({label:ot.params.label}),valueController:new Cs(ot.document,{lineCount:(tt=ot.params.lineCount)!==null&&tt!==void 0?tt:2,maxValue:(pt=ot.params.max)!==null&&pt!==void 0?pt:90,minValue:(Lt=ot.params.min)!==null&&Lt!==void 0?Lt:0,ticker:Qr(ot.document,rn),value:Nn(80),viewProps:ot.viewProps})})},api(ot){return!(ot.controller instanceof nn)||!(ot.controller.valueController instanceof Cs)?null:new Ri(ot.controller)}};class ji{constructor(Qe,tt){this.min=Qe,this.max=tt}static isObject(Qe){if(typeof Qe!="object"||Qe===null)return!1;const tt=Qe.min,pt=Qe.max;return!(typeof tt!="number"||typeof pt!="number")}static equals(Qe,tt){return Qe.min===tt.min&&Qe.max===tt.max}get length(){return this.max-this.min}toObject(){return{min:this.min,max:this.max}}}const xs={fromComponents:ot=>new ji(ot[0],ot[1]),toComponents:ot=>[ot.min,ot.max]};class Wr{constructor(Qe){this.edge=Qe}constrain(Qe){var tt,pt,Lt,rn,An,On,mi,Ji;if(Qe.min<=Qe.max)return new ji((pt=(tt=this.edge)===null||tt===void 0?void 0:tt.constrain(Qe.min))!==null&&pt!==void 0?pt:Qe.min,(rn=(Lt=this.edge)===null||Lt===void 0?void 0:Lt.constrain(Qe.max))!==null&&rn!==void 0?rn:Qe.max);const Zi=(Qe.min+Qe.max)/2;return new ji((On=(An=this.edge)===null||An===void 0?void 0:An.constrain(Zi))!==null&&On!==void 0?On:Zi,(Ji=(mi=this.edge)===null||mi===void 0?void 0:mi.constrain(Zi))!==null&&Ji!==void 0?Ji:Zi)}}const Ss=De("rsltxt");class as{constructor(Qe,tt){this.sliderView_=tt.sliderView,this.textView_=tt.textView,this.element=Qe.createElement("div"),this.element.classList.add(Ss());const pt=Qe.createElement("div");pt.classList.add(Ss("s")),pt.appendChild(this.sliderView_.element),this.element.appendChild(pt);const Lt=Qe.createElement("div");Lt.classList.add(Ss("t")),Lt.appendChild(this.textView_.element),this.element.appendChild(Lt)}}const nr=De("rsl");class qr{constructor(Qe,tt){this.onSliderPropsChange_=this.onSliderPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.sliderProps_=tt.sliderProps,this.sliderProps_.emitter.on("change",this.onSliderPropsChange_),this.element=Qe.createElement("div"),this.element.classList.add(nr()),tt.viewProps.bindClassModifiers(this.element),this.value_=tt.value,this.value_.emitter.on("change",this.onValueChange_);const pt=Qe.createElement("div");pt.classList.add(nr("t")),this.element.appendChild(pt),this.trackElement=pt;const Lt=Qe.createElement("div");Lt.classList.add(nr("b")),pt.appendChild(Lt),this.barElement=Lt;const rn=["min","max"].map(An=>{const On=Qe.createElement("div");return On.classList.add(nr("k"),nr("k",An)),pt.appendChild(On),On});this.knobElements=[rn[0],rn[1]],this.update_()}valueToX_(Qe){const tt=this.sliderProps_.get("minValue"),pt=this.sliderProps_.get("maxValue");return Vi(Xn(Qe,tt,pt,0,1),0,1)*100}update_(){const Qe=this.value_.rawValue;Qe.length===0?this.element.classList.add(nr(void 0,"zero")):this.element.classList.remove(nr(void 0,"zero"));const tt=[this.valueToX_(Qe.min),this.valueToX_(Qe.max)];this.barElement.style.left=`${tt[0]}%`,this.barElement.style.right=`${100-tt[1]}%`,this.knobElements.forEach((pt,Lt)=>{pt.style.left=`${tt[Lt]}%`})}onSliderPropsChange_(){this.update_()}onValueChange_(){this.update_()}}class Ts{constructor(Qe,tt){this.grabbing_=null,this.grabOffset_=0,this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.sliderProps=tt.sliderProps,this.viewProps=tt.viewProps,this.value=tt.value,this.view=new qr(Qe,{sliderProps:this.sliderProps,value:this.value,viewProps:tt.viewProps});const pt=new di(this.view.trackElement);pt.emitter.on("down",this.onPointerDown_),pt.emitter.on("move",this.onPointerMove_),pt.emitter.on("up",this.onPointerUp_)}ofs_(){return this.grabbing_==="min"?this.view.knobElements[0].getBoundingClientRect().width/2:this.grabbing_==="max"?-this.view.knobElements[1].getBoundingClientRect().width/2:0}valueFromData_(Qe){if(!Qe.point)return null;const tt=(Qe.point.x+this.ofs_())/Qe.bounds.width,pt=this.sliderProps.get("minValue"),Lt=this.sliderProps.get("maxValue");return Xn(tt,0,1,pt,Lt)}onPointerDown_(Qe){if(!Qe.data.point)return;const tt=Qe.data.point.x/Qe.data.bounds.width,pt=this.value.rawValue,Lt=this.sliderProps.get("minValue"),rn=this.sliderProps.get("maxValue"),An=Xn(pt.min,Lt,rn,0,1),On=Xn(pt.max,Lt,rn,0,1);Math.abs(On-tt)<=.025?this.grabbing_="max":Math.abs(An-tt)<=.025?this.grabbing_="min":tt>=An&&tt<=On?(this.grabbing_="length",this.grabOffset_=Xn(tt-An,0,1,0,rn-Lt)):tt<An?(this.grabbing_="min",this.onPointerMove_(Qe)):tt>On&&(this.grabbing_="max",this.onPointerMove_(Qe))}applyPointToValue_(Qe,tt){const pt=this.valueFromData_(Qe);if(pt===null)return;const Lt=this.sliderProps.get("minValue"),rn=this.sliderProps.get("maxValue");if(this.grabbing_==="min")this.value.setRawValue(new ji(pt,this.value.rawValue.max),tt);else if(this.grabbing_==="max")this.value.setRawValue(new ji(this.value.rawValue.min,pt),tt);else if(this.grabbing_==="length"){const An=this.value.rawValue.length;let On=pt-this.grabOffset_,mi=On+An;On<Lt?(On=Lt,mi=Lt+An):mi>rn&&(On=rn-An,mi=rn),this.value.setRawValue(new ji(On,mi),tt)}}onPointerMove_(Qe){this.applyPointToValue_(Qe.data,{forceEmit:!1,last:!1})}onPointerUp_(Qe){this.applyPointToValue_(Qe.data,{forceEmit:!0,last:!0}),this.grabbing_=null}}class fr{constructor(Qe,tt){this.value=tt.value,this.viewProps=tt.viewProps,this.sc_=new Ts(Qe,tt);const pt={baseStep:tt.baseStep,constraint:tt.constraint,textProps:rt.fromObject({draggingScale:tt.draggingScale,formatter:tt.formatter})};this.tc_=new ar(Qe,{assembly:xs,axes:[pt,pt],parser:tt.parser,value:this.value,viewProps:tt.viewProps}),this.view=new as(Qe,{sliderView:this.sc_.view,textView:this.tc_.view})}get textController(){return this.tc_}}function Ns(ot){return ji.isObject(ot)?new ji(ot.min,ot.max):new ji(0,0)}function Is(ot,Qe){ot.writeProperty("max",Qe.max),ot.writeProperty("min",Qe.min)}function qs(ot){const Qe=[],tt=xr(ot);tt&&Qe.push(tt);const pt=rs(ot);return pt&&Qe.push(pt),new Wr(new Cn(Qe))}const ls={id:"input-interval",type:"input",css:'.tp-cbzgv,.tp-radv_b,.tp-rslv_k,.tp-cbzv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-radv_b,.tp-rslv_k,.tp-cbzv_b{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-radv_b:hover,.tp-rslv_k:hover,.tp-cbzv_b:hover{background-color:var(--btn-bg-h)}.tp-radv_b:focus,.tp-rslv_k:focus,.tp-cbzv_b:focus{background-color:var(--btn-bg-f)}.tp-radv_b:active,.tp-rslv_k:active,.tp-cbzv_b:active{background-color:var(--btn-bg-a)}.tp-radv_b:disabled,.tp-rslv_k:disabled,.tp-cbzv_b:disabled{opacity:.5}.tp-cbzgv{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-cbzgv:hover{background-color:var(--in-bg-h)}.tp-cbzgv:focus{background-color:var(--in-bg-f)}.tp-cbzgv:active{background-color:var(--in-bg-a)}.tp-cbzgv:disabled{opacity:.5}.tp-btngridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-btngridv.tp-v-disabled{opacity:.5}.tp-btngridv .tp-btnv_b:disabled{opacity:1}.tp-btngridv .tp-btnv_b:disabled .tp-btnv_t{opacity:.5}.tp-btngridv .tp-btnv_b{border-radius:0}.tp-cbzv{position:relative}.tp-cbzv_h{display:flex}.tp-cbzv_b{margin-right:4px;position:relative;width:var(--bld-us)}.tp-cbzv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-cbzv_b svg path{stroke:var(--bs-bg);stroke-width:2}.tp-cbzv_t{flex:1}.tp-cbzv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-cbzv.tp-cbzv-expanded .tp-cbzv_p{margin-top:var(--bld-s);opacity:1}.tp-cbzv.tp-cbzv-cpl .tp-cbzv_p{overflow:visible}.tp-cbzv .tp-popv{left:calc(-1*var(--cnt-h-p));position:absolute;right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-cbzpv_t{margin-top:var(--bld-s)}.tp-cbzgv{height:auto;overflow:hidden;position:relative}.tp-cbzgv.tp-v-disabled{opacity:.5}.tp-cbzgv_p{left:16px;position:absolute;right:16px;top:0}.tp-cbzgv_g{cursor:pointer;display:block;height:calc(var(--bld-us)*5);width:100%}.tp-cbzgv_u{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_l{fill:rgba(0,0,0,0);stroke:var(--in-fg)}.tp-cbzgv_v{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_h{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;pointer-events:none;position:absolute;width:4px}.tp-cbzgv:focus .tp-cbzgv_h-sel{background-color:var(--in-fg);border-width:0}.tp-cbzprvv{cursor:pointer;height:4px;padding:4px 0;position:relative}.tp-cbzprvv_g{display:block;height:100%;overflow:visible;width:100%}.tp-cbzprvv_t{opacity:.5;stroke:var(--mo-fg)}.tp-cbzprvv_m{background-color:var(--mo-fg);border-radius:50%;height:4px;margin-left:-2px;margin-top:-2px;opacity:0;position:absolute;top:50%;transition:opacity .2s ease-out;width:4px}.tp-cbzprvv_m.tp-cbzprvv_m-a{opacity:1}.tp-fpsv{position:relative}.tp-fpsv_l{bottom:4px;color:var(--mo-fg);line-height:1;right:4px;pointer-events:none;position:absolute}.tp-fpsv_u{margin-left:.2em;opacity:.7}.tp-rslv{cursor:pointer;padding-left:8px;padding-right:8px}.tp-rslv.tp-v-disabled{opacity:.5}.tp-rslv_t{height:calc(var(--bld-us));position:relative}.tp-rslv_t::before{background-color:var(--in-bg);border-radius:1px;content:"";height:2px;margin-top:-1px;position:absolute;top:50%;left:-4px;right:-4px}.tp-rslv_b{bottom:0;top:0;position:absolute}.tp-rslv_b::before{background-color:var(--in-fg);content:"";height:2px;margin-top:-1px;position:absolute;top:50%;left:0;right:0}.tp-rslv_k{height:calc(var(--bld-us) - 8px);margin-top:calc((var(--bld-us) - 8px)/-2);position:absolute;top:50%;width:8px}.tp-rslv_k.tp-rslv_k-min{margin-left:-8px}.tp-rslv_k.tp-rslv_k-max{margin-left:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-min{border-bottom-right-radius:0;border-top-right-radius:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-max{border-bottom-left-radius:0;border-top-left-radius:0}.tp-rsltxtv{display:flex}.tp-rsltxtv_s{flex:1}.tp-rsltxtv_t{flex:1;margin-left:4px}.tp-radv_l{display:block;position:relative}.tp-radv_i{left:0;opacity:0;position:absolute;top:0}.tp-radv_b{opacity:.5}.tp-radv_i:hover+.tp-radv_b{background-color:var(--btn-bg-h)}.tp-radv_i:focus+.tp-radv_b{background-color:var(--btn-bg-f)}.tp-radv_i:active+.tp-radv_b{background-color:var(--btn-bg-a)}.tp-radv_i:checked+.tp-radv_b{opacity:1}.tp-radv_t{bottom:0;color:inherit;left:0;overflow:hidden;position:absolute;right:0;text-align:center;text-overflow:ellipsis;top:0}.tp-radv_i:disabled+.tp-radv_b>.tp-radv_t{opacity:.5}.tp-radgridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-radgridv.tp-v-disabled{opacity:.5}.tp-radgridv .tp-radv_b{border-radius:0}',accept:(ot,Qe)=>{if(!ji.isObject(ot))return null;const tt=st,pt=at(Qe,{format:tt.optional.function,max:tt.optional.number,min:tt.optional.number,step:tt.optional.number});return pt?{initialValue:new ji(ot.min,ot.max),params:pt}:null},binding:{reader:ot=>Ns,constraint:ot=>qs(ot.params),equals:ji.equals,writer:ot=>Is},controller(ot){var Qe;const tt=ot.value,pt=ot.constraint;if(!(pt instanceof Wr))throw Ee.shouldNeverHappen();const Lt=(tt.rawValue.min+tt.rawValue.max)/2,rn=(Qe=ot.params.format)!==null&&Qe!==void 0?Qe:fn(Cr(pt.edge,Lt)),An=pt.edge&&Un(pt.edge,yn);if(An)return new fr(ot.document,{baseStep:Or(pt.edge),constraint:pt.edge,draggingScale:Xi(pt.edge,Lt),formatter:rn,parser:hn,sliderProps:new rt({maxValue:An.values.value("max"),minValue:An.values.value("min")}),value:tt,viewProps:ot.viewProps});const On={baseStep:Or(pt.edge),constraint:pt.edge,textProps:rt.fromObject({draggingScale:Lt,formatter:rn})};return new ar(ot.document,{assembly:xs,axes:[On,On],parser:hn,value:tt,viewProps:ot.viewProps})}};class Ir{constructor(Qe){this.controller_=Qe}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(Qe){this.controller_.viewProps.set("disabled",Qe)}get title(){var Qe;return(Qe=this.controller_.props.get("title"))!==null&&Qe!==void 0?Qe:""}set title(Qe){this.controller_.props.set("title",Qe)}}class Pr extends re{constructor(Qe,tt,pt,Lt,rn){super(Qe,Lt,rn),this.cell=tt,this.index=pt}}class jr extends j{constructor(Qe){super(Qe),this.cellToApiMap_=new Map,this.controller_.valueController.cellControllers.forEach(pt=>{const Lt=new Ir(pt);this.cellToApiMap_.set(pt,Lt)})}get value(){return this.controller_.value}cell(Qe,tt){const pt=this.controller_.valueController,Lt=pt.cellControllers[tt*pt.size[0]+Qe];return this.cellToApiMap_.get(Lt)}on(Qe,tt){const pt=tt.bind(this);this.controller_.value.emitter.on(Qe,Lt=>{const rn=this.controller_.valueController,An=rn.findCellByValue(Lt.rawValue);if(!An)return;const On=this.cellToApiMap_.get(An);if(!On)return;const mi=rn.cellControllers.indexOf(An);pt(new Pr(this,On,[mi%rn.size[0],Math.floor(mi/rn.size[0])],Lt.rawValue,void 0))})}}const Kr=De("rad");class Os{constructor(Qe,tt){this.element=Qe.createElement("div"),this.element.classList.add(Kr()),tt.viewProps.bindClassModifiers(this.element);const pt=Qe.createElement("label");pt.classList.add(Kr("l")),this.element.appendChild(pt);const Lt=Qe.createElement("input");Lt.classList.add(Kr("i")),Lt.name=tt.name,Lt.type="radio",tt.viewProps.bindDisabled(Lt),pt.appendChild(Lt),this.inputElement=Lt;const rn=Qe.createElement("div");rn.classList.add(Kr("b")),pt.appendChild(rn);const An=Qe.createElement("div");An.classList.add(Kr("t")),rn.appendChild(An),Oe(tt.props,"title",On=>{An.textContent=On})}}class Us{constructor(Qe,tt){this.props=tt.props,this.viewProps=tt.viewProps,this.view=new Os(Qe,{name:tt.name,props:this.props,viewProps:this.viewProps})}}class cs{constructor(Qe,tt){this.cellCs_=[],this.cellValues_=[],this.onCellInputChange_=this.onCellInputChange_.bind(this),this.size=tt.size;const[pt,Lt]=this.size;for(let rn=0;rn<Lt;rn++)for(let An=0;An<pt;An++){const On=new Us(Qe,{name:tt.groupName,props:rt.fromObject(Object.assign({},tt.cellConfig(An,rn))),viewProps:tn.create()});this.cellCs_.push(On),this.cellValues_.push(tt.cellConfig(An,rn).value)}this.value=tt.value,Fe(this.value,rn=>{const An=this.findCellByValue(rn);An&&(An.view.inputElement.checked=!0)}),this.viewProps=tn.create(),this.view=new cn(Qe,{viewProps:this.viewProps,viewName:"radgrid"}),this.view.element.style.gridTemplateColumns=`repeat(${pt}, 1fr)`,this.cellCs_.forEach(rn=>{rn.view.inputElement.addEventListener("change",this.onCellInputChange_),this.view.element.appendChild(rn.view.element)})}get cellControllers(){return this.cellCs_}findCellByValue(Qe){const tt=this.cellValues_.findIndex(pt=>pt===Qe);return tt<0?null:this.cellCs_[tt]}onCellInputChange_(Qe){const tt=Qe.currentTarget,pt=this.cellCs_.findIndex(Lt=>Lt.view.inputElement===tt);pt<0||(this.value.rawValue=this.cellValues_[pt])}}const Rr=function(){return{id:"radiogrid",type:"blade",accept(ot){const Qe=st,tt=at(ot,{cells:Qe.required.function,groupName:Qe.required.string,size:Qe.required.array(Qe.required.number),value:Qe.required.raw,view:Qe.required.constant("radiogrid"),label:Qe.optional.string});return tt?{params:tt}:null},controller(ot){return new sn(ot.document,{blade:ot.blade,props:rt.fromObject({label:ot.params.label}),valueController:new cs(ot.document,{groupName:ot.params.groupName,cellConfig:ot.params.cells,size:ot.params.size,value:Ke(ot.params.value)})})},api(ot){return!(ot.controller instanceof sn)||!(ot.controller.valueController instanceof cs)?null:new jr(ot.controller)}}}();function Ps(ot){return{id:"input-radiogrid",type:"input",accept(Qe,tt){if(!ot.isType(Qe))return null;const pt=st,Lt=at(tt,{cells:pt.required.function,groupName:pt.required.string,size:pt.required.array(pt.required.number),view:pt.required.constant("radiogrid")});return Lt?{initialValue:Qe,params:Lt}:null},binding:ot.binding,controller:Qe=>new cs(Qe.document,{cellConfig:Qe.params.cells,groupName:Qe.params.groupName,size:Qe.params.size,value:Qe.value})}}const js=Ps({isType:ot=>typeof ot=="number",binding:{reader:ot=>_n,writer:ot=>Wi}}),Ks=Ps({isType:ot=>typeof ot=="string",binding:{reader:ot=>Pn,writer:ot=>Wi}}),Ys=Ps({isType:ot=>typeof ot=="boolean",binding:{reader:ot=>zn,writer:ot=>Wi}}),$s=[Wn,Tr,ws,ls,Rr,Ys,js,Ks];L.ButtonCellApi=jt,L.ButtonGridApi=Vn,L.ButtonGridController=Gn,L.CubicBezier=Oi,L.CubicBezierApi=qn,L.CubicBezierAssembly=vi,L.CubicBezierController=os,L.CubicBezierGraphController=cr,L.CubicBezierGraphView=Ui,L.CubicBezierPickerController=Vs,L.CubicBezierPickerView=ks,L.CubicBezierPreviewView=Br,L.CubicBezierView=Ls,L.FpsGraphBladeApi=Ri,L.FpsGraphController=Cs,L.FpsView=qi,L.Fpswatch=Li,L.Interval=ji,L.IntervalAssembly=xs,L.IntervalConstraint=Wr,L.RadioCellApi=Ir,L.RadioController=Us,L.RadioGridApi=jr,L.RadioGridController=cs,L.RadioView=Os,L.RangeSliderController=Ts,L.RangeSliderTextController=fr,L.RangeSliderTextView=as,L.RangeSliderView=qr,L.TpRadioGridChangeEvent=Pr,L.plugins=$s,Object.defineProperty(L,"__esModule",{value:!0})})})(tweakpanePluginEssentials$1,tweakpanePluginEssentials$1.exports);var tweakpanePluginEssentialsExports=tweakpanePluginEssentials$1.exports;const tweakpanePluginEssentials=getDefaultExportFromCjs(tweakpanePluginEssentialsExports),EssentialsPlugin=_mergeNamespaces({__proto__:null,default:tweakpanePluginEssentials},[tweakpanePluginEssentialsExports]);var tweakpanePluginFileImport$1={exports:{}};(function($,m){(function(L,j){j(m)})(commonjsGlobal$1,function(L){function j(Vt){return Vt}class ee{constructor(){this.observers_={}}on(Mt,Tt){let qt=this.observers_[Mt];return qt||(qt=this.observers_[Mt]=[]),qt.push({handler:Tt}),this}off(Mt,Tt){const qt=this.observers_[Mt];return qt&&(this.observers_[Mt]=qt.filter(on=>on.handler!==Tt)),this}emit(Mt,Tt){const qt=this.observers_[Mt];qt&&qt.forEach(on=>{on.handler(Tt)})}}const re="tp";function le(Vt){return(Tt,qt)=>[re,"-",Vt,"v",Tt?`_${Tt}`:"",qt?`-${qt}`:""].join("")}function ve(Vt,Mt){const qt=Object.keys(Mt).reduce((on,pn)=>{if(on===void 0)return;const kt=Mt[pn],Mn=kt(Vt[pn]);return Mn.succeeded?Object.assign(Object.assign({},on),{[pn]:Mn.value}):void 0},{});return qt}function ye(Vt,Mt){return Vt.reduce((Tt,qt)=>{if(Tt===void 0)return;const on=Mt(qt);if(!(!on.succeeded||on.value===void 0))return[...Tt,on.value]},[])}function Ee(Vt){return Vt===null?!1:typeof Vt=="object"}function Me(Vt){return Mt=>Tt=>{if(!Mt&&Tt===void 0)return{succeeded:!1,value:void 0};if(Mt&&Tt===void 0)return{succeeded:!0,value:void 0};const qt=Vt(Tt);return qt!==void 0?{succeeded:!0,value:qt}:{succeeded:!1,value:void 0}}}function Ce(Vt){return{custom:Mt=>Me(Mt)(Vt),boolean:Me(Mt=>typeof Mt=="boolean"?Mt:void 0)(Vt),number:Me(Mt=>typeof Mt=="number"?Mt:void 0)(Vt),string:Me(Mt=>typeof Mt=="string"?Mt:void 0)(Vt),function:Me(Mt=>typeof Mt=="function"?Mt:void 0)(Vt),constant:Mt=>Me(Tt=>Tt===Mt?Mt:void 0)(Vt),raw:Me(Mt=>Mt)(Vt),object:Mt=>Me(Tt=>{if(Ee(Tt))return ve(Tt,Mt)})(Vt),array:Mt=>Me(Tt=>{if(Array.isArray(Tt))return ye(Tt,Mt)})(Vt)}}const De={optional:Ce(!0),required:Ce(!1)};function Be(Vt,Mt){const Tt=De.required.object(Mt)(Vt);return Tt.succeeded?Tt.value:void 0}class ke{constructor(Mt){this.constraints=Mt}constrain(Mt){return this.constraints.reduce((Tt,qt)=>qt.constrain(Tt),Mt)}}function Fe(Vt){return Mt=>Mt.toFixed(Math.max(Math.min(Vt,20),0))}const Oe=Fe(0);function Ne(Vt){return Oe(Vt)+"%"}function ze(Vt,Mt){var Tt,qt;const on=Mt.ownerDocument.defaultView,pn=Mt.getBoundingClientRect();return{x:Vt.pageX-(((Tt=on&&on.scrollX)!==null&&Tt!==void 0?Tt:0)+pn.left),y:Vt.pageY-(((qt=on&&on.scrollY)!==null&&qt!==void 0?qt:0)+pn.top)}}class $e{constructor(Mt){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=Mt,this.emitter=new ee,Mt.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),Mt.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),Mt.addEventListener("touchend",this.onTouchEnd_),Mt.addEventListener("mousedown",this.onMouseDown_)}computePosition_(Mt){const Tt=this.elem_.getBoundingClientRect();return{bounds:{width:Tt.width,height:Tt.height},point:Mt?{x:Mt.x,y:Mt.y}:null}}onMouseDown_(Mt){var Tt;Mt.preventDefault(),(Tt=Mt.currentTarget)===null||Tt===void 0||Tt.focus();const qt=this.elem_.ownerDocument;qt.addEventListener("mousemove",this.onDocumentMouseMove_),qt.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:Mt.altKey,data:this.computePosition_(ze(Mt,this.elem_)),sender:this,shiftKey:Mt.shiftKey})}onDocumentMouseMove_(Mt){this.emitter.emit("move",{altKey:Mt.altKey,data:this.computePosition_(ze(Mt,this.elem_)),sender:this,shiftKey:Mt.shiftKey})}onDocumentMouseUp_(Mt){const Tt=this.elem_.ownerDocument;Tt.removeEventListener("mousemove",this.onDocumentMouseMove_),Tt.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:Mt.altKey,data:this.computePosition_(ze(Mt,this.elem_)),sender:this,shiftKey:Mt.shiftKey})}onTouchStart_(Mt){Mt.preventDefault();const Tt=Mt.targetTouches.item(0),qt=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:Mt.altKey,data:this.computePosition_(Tt?{x:Tt.clientX-qt.left,y:Tt.clientY-qt.top}:void 0),sender:this,shiftKey:Mt.shiftKey}),this.lastTouch_=Tt}onTouchMove_(Mt){const Tt=Mt.targetTouches.item(0),qt=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:Mt.altKey,data:this.computePosition_(Tt?{x:Tt.clientX-qt.left,y:Tt.clientY-qt.top}:void 0),sender:this,shiftKey:Mt.shiftKey}),this.lastTouch_=Tt}onTouchEnd_(Mt){var Tt;const qt=(Tt=Mt.targetTouches.item(0))!==null&&Tt!==void 0?Tt:this.lastTouch_,on=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:Mt.altKey,data:this.computePosition_(qt?{x:qt.clientX-on.left,y:qt.clientY-on.top}:void 0),sender:this,shiftKey:Mt.shiftKey})}}function He(Vt,Mt,Tt){return Math.min(Math.max(Vt,Mt),Tt)}function We(Vt){return[Vt[0],Vt[1],Vt[2]]}function qe(Vt){const Mt=He(Math.floor(Vt),0,255).toString(16);return Mt.length===1?`0${Mt}`:Mt}function Ye(Vt,Mt="#"){const Tt=We(Vt.getComponents("rgb")).map(qe).join("");return`${Mt}${Tt}`}function Ze(Vt,Mt="#"){const Tt=Vt.getComponents("rgb"),qt=[Tt[0],Tt[1],Tt[2],Tt[3]*255].map(qe).join("");return`${Mt}${qt}`}function Ke(Vt,Mt){const Tt=Fe(Mt==="float"?2:0);return`rgb(${We(Vt.getComponents("rgb",Mt)).map(on=>Tt(on)).join(", ")})`}function rt(Vt){return Mt=>Ke(Mt,Vt)}function ft(Vt,Mt){const Tt=Fe(2),qt=Fe(Mt==="float"?2:0);return`rgba(${Vt.getComponents("rgb",Mt).map((pn,kt)=>(kt===3?Tt:qt)(pn)).join(", ")})`}function mt(Vt){return Mt=>ft(Mt,Vt)}function Et(Vt){const Mt=[Fe(0),Ne,Ne];return`hsl(${We(Vt.getComponents("hsl")).map((qt,on)=>Mt[on](qt)).join(", ")})`}function bt(Vt){const Mt=[Fe(0),Ne,Ne,Fe(2)];return`hsla(${Vt.getComponents("hsl").map((qt,on)=>Mt[on](qt)).join(", ")})`}function Ct(Vt,Mt){const Tt=Fe(Mt==="float"?2:0),qt=["r","g","b"];return`{${We(Vt.getComponents("rgb",Mt)).map((pn,kt)=>`${qt[kt]}: ${Tt(pn)}`).join(", ")}}`}function st(Vt){return Mt=>Ct(Mt,Vt)}function at(Vt,Mt){const Tt=Fe(2),qt=Fe(Mt==="float"?2:0),on=["r","g","b","a"];return`{${Vt.getComponents("rgb",Mt).map((kt,Mn)=>{const wt=Mn===3?Tt:qt;return`${on[Mn]}: ${wt(kt)}`}).join(", ")}}`}function Xe(Vt){return Mt=>at(Mt,Vt)}[...["int","float"].reduce((Vt,Mt)=>[...Vt,{format:{alpha:!1,mode:"rgb",notation:"func",type:Mt},stringifier:rt(Mt)},{format:{alpha:!0,mode:"rgb",notation:"func",type:Mt},stringifier:mt(Mt)},{format:{alpha:!1,mode:"rgb",notation:"object",type:Mt},stringifier:st(Mt)},{format:{alpha:!0,mode:"rgb",notation:"object",type:Mt},stringifier:Xe(Mt)}],[])];const ht=le("ctn"),Bt=le("btn");class Dt{constructor(Mt,Tt){this.onDrop_=this.onDrop_.bind(this),this.element=Mt.createElement("div"),this.container=Mt.createElement("div"),this.container.style.height=`calc(var(--bld-us) * ${Tt.lineCount})`,this.container.classList.add(ht()),this.element.appendChild(this.container),this.fileIconEl_=Mt.createElement("div"),this.fileIconEl_.classList.add(ht("icon")),this.container.appendChild(this.fileIconEl_),this.textEl_=Mt.createElement("span"),this.textEl_.classList.add(ht("text")),this.button=Mt.createElement("button"),this.button.classList.add(Bt("b")),this.button.innerHTML="Delete",this.button.style.display="none",this.element.appendChild(this.button),this.element.addEventListener("drop",this.onDrop_),this.element.addEventListener("dragover",this.onDragOver_),this.value_=Tt.value,this.value_.emitter.on("change",this.onValueChange_.bind(this)),Tt.viewProps.bindClassModifiers(this.element),Tt.viewProps.handleDispose(()=>{console.log("TODO: dispose view")})}onDragOver_(Mt){Mt.preventDefault()}onDrop_(Mt){if(Mt instanceof DragEvent&&(Mt.preventDefault(),Mt.dataTransfer&&Mt.dataTransfer.files)){const Tt=[Mt.dataTransfer.files][0];if(Tt.length==1){const qt=Tt.item(0);this.value_.setRawValue(qt)}}}onValueChange_(){const Mt=this.value_.rawValue;Mt?(this.textEl_.textContent=Mt.name,this.container.appendChild(this.textEl_),this.container.contains(this.fileIconEl_)&&this.container.removeChild(this.fileIconEl_),this.button.style.display="block",this.container.style.border="unset"):(this.textEl_.textContent="",this.container.appendChild(this.fileIconEl_),this.container.removeChild(this.textEl_),this.button.style.display="none",this.container.style.border="1px dashed #717070")}}class Jt{constructor(Mt,Tt){this.onContainerClick_=this.onContainerClick_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.value=Tt.value,this.filetypes=Tt.filetypes,this.viewProps=Tt.viewProps,this.viewProps.handleDispose(()=>{}),this.view=new Dt(Mt,{value:this.value,viewProps:this.viewProps,lineCount:Tt.lineCount}),new $e(this.view.container).emitter.on("down",this.onContainerClick_),new $e(this.view.button).emitter.on("down",this.onButtonClick_)}onContainerClick_(Mt){const Tt=this.filetypes,qt=document.createElement("input");qt.setAttribute("type","file"),qt.style.opacity="0",qt.style.position="fixed",qt.style.pointerEvents="none",document.body.appendChild(qt),qt.addEventListener("input",on=>{var pn;if(qt.files&&qt.files.length>0){const kt=qt.files[0],Mn="."+((pn=kt.name.split(".").pop())===null||pn===void 0?void 0:pn.toLowerCase());if(Tt&&Tt.length>0&&!Tt.includes(Mn)&&Mn)return;this.value.setRawValue(kt)}},{once:!0}),qt.click(),document.body.removeChild(qt)}onButtonClick_(Mt){this.value.rawValue&&this.value.setRawValue(null)}}const zt=[{id:"file-input",type:"input",css:'.tp-ctnv{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-ctnv{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-ctnv:hover{background-color:var(--in-bg-h)}.tp-ctnv:focus{background-color:var(--in-bg-f)}.tp-ctnv:active{background-color:var(--in-bg-a)}.tp-ctnv:disabled{opacity:.5}.tp-ctnv{cursor:pointer;display:flex;justify-content:center;align-items:center;overflow:hidden;position:relative;border:1px dashed #717070;border-radius:5px}.tp-ctnv.tp-v-disabled{opacity:.5}.tp-ctnv_text{color:var(--in-fg);bottom:2px;display:inline-block;font-size:.9em;height:-moz-max-content;height:max-content;line-height:.9;margin:.2rem;max-height:100%;max-width:100%;opacity:.5;position:absolute;right:2px;text-align:right;white-space:normal;width:-moz-max-content;width:max-content;word-wrap:break-word}.tp-ctnv_frac{background-color:var(--in-fg);border-radius:1px;height:2px;left:50%;margin-top:-1px;position:absolute;top:50%}.tp-ctnv_icon{box-sizing:border-box;position:relative;display:block;transform:scale(var(--ggs, 1));width:16px;height:6px;border:2px solid;border-top:0;border-bottom-left-radius:2px;border-bottom-right-radius:2px;margin-top:8px;opacity:.5}.tp-ctnv_icon::after{content:"";display:block;box-sizing:border-box;position:absolute;width:8px;height:8px;border-left:2px solid;border-top:2px solid;transform:rotate(45deg);left:2px;bottom:4px}.tp-ctnv_icon::before{content:"";display:block;box-sizing:border-box;position:absolute;border-radius:3px;width:2px;height:10px;background:currentColor;left:5px;bottom:3px}.tp-btnv_b{margin-top:10px}',accept(Vt,Mt){if(typeof Vt!="string")return null;const Tt=De,qt=Be(Mt,{view:Tt.required.constant("file-input"),lineCount:Tt.optional.number,filetypes:Tt.optional.array(Tt.required.string)});return qt?{initialValue:Vt,params:qt}:null},binding:{reader(Vt){return Mt=>Mt instanceof File?Mt:null},constraint(Vt){return new ke([])},writer(Vt){return(Mt,Tt)=>{Mt.write(Tt)}}},controller(Vt){var Mt;return new Jt(Vt.document,{value:Vt.value,viewProps:Vt.viewProps,lineCount:(Mt=Vt.params.lineCount)!==null&&Mt!==void 0?Mt:3,filetypes:Vt.params.filetypes})}}];L.plugins=zt,Object.defineProperty(L,"__esModule",{value:!0})})})(tweakpanePluginFileImport$1,tweakpanePluginFileImport$1.exports);var tweakpanePluginFileImportExports=tweakpanePluginFileImport$1.exports;const tweakpanePluginFileImport=getDefaultExportFromCjs(tweakpanePluginFileImportExports),FileImportPlugin=_mergeNamespaces({__proto__:null,default:tweakpanePluginFileImport},[tweakpanePluginFileImportExports]);var tweakpanePluginRotation$1={exports:{}};(function($,m){(function(L,j){j(m)})(commonjsGlobal$1,function(L){function j(vt){return vt}function ee(vt){return vt==null}const re={alreadydisposed:()=>"View has been already disposed",invalidparams:vt=>`Invalid parameters for '${vt.name}'`,nomatchingcontroller:vt=>`No matching controller for '${vt.key}'`,nomatchingview:vt=>`No matching view for '${JSON.stringify(vt.params)}'`,notbindable:()=>"Value is not bindable",propertynotfound:vt=>`Property '${vt.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class le{constructor(Je){var ut;this.message=(ut=re[Je.type](Je.context))!==null&&ut!==void 0?ut:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=Je.type}static alreadyDisposed(){return new le({type:"alreadydisposed"})}static notBindable(){return new le({type:"notbindable"})}static propertyNotFound(Je){return new le({type:"propertynotfound",context:{name:Je}})}static shouldNeverHappen(){return new le({type:"shouldneverhappen"})}}class ve{constructor(){this.observers_={}}on(Je,ut){let Rt=this.observers_[Je];return Rt||(Rt=this.observers_[Je]=[]),Rt.push({handler:ut}),this}off(Je,ut){const Rt=this.observers_[Je];return Rt&&(this.observers_[Je]=Rt.filter(jt=>jt.handler!==ut)),this}emit(Je,ut){const Rt=this.observers_[Je];Rt&&Rt.forEach(jt=>{jt.handler(ut)})}}const ye="tp";function Ee(vt){return(ut,Rt)=>[ye,"-",vt,"v",ut?`_${ut}`:"",Rt?`-${Rt}`:""].join("")}function Me(vt,Je){return ut=>Je(vt(ut))}function Ce(vt){return vt.rawValue}function De(vt,Je){vt.emitter.on("change",Me(Ce,Je)),Je(vt.rawValue)}function Be(vt,Je,ut){De(vt.value(Je),ut)}function ke(vt,Je,ut){ut?vt.classList.add(Je):vt.classList.remove(Je)}function Fe(vt,Je){return ut=>{ke(vt,Je,ut)}}class Oe{constructor(Je,ut){var Rt;this.constraint_=ut==null?void 0:ut.constraint,this.equals_=(Rt=ut==null?void 0:ut.equals)!==null&&Rt!==void 0?Rt:(jt,mn)=>jt===mn,this.emitter=new ve,this.rawValue_=Je}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(Je){this.setRawValue(Je,{forceEmit:!1,last:!0})}setRawValue(Je,ut){const Rt=ut??{forceEmit:!1,last:!0},jt=this.constraint_?this.constraint_.constrain(Je):Je;this.equals_(this.rawValue_,jt)&&!Rt.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=jt,this.emitter.emit("change",{options:Rt,rawValue:jt,sender:this}))}}class Ne{constructor(Je){this.emitter=new ve,this.value_=Je}get rawValue(){return this.value_}set rawValue(Je){this.setRawValue(Je,{forceEmit:!1,last:!0})}setRawValue(Je,ut){const Rt=ut??{forceEmit:!1,last:!0};this.value_===Je&&!Rt.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=Je,this.emitter.emit("change",{options:Rt,rawValue:this.value_,sender:this}))}}function ze(vt,Je){const ut=Je==null?void 0:Je.constraint,Rt=Je==null?void 0:Je.equals;return!ut&&!Rt?new Ne(vt):new Oe(vt,Je)}class $e{constructor(Je){this.emitter=new ve,this.valMap_=Je;for(const ut in this.valMap_)this.valMap_[ut].emitter.on("change",()=>{this.emitter.emit("change",{key:ut,sender:this})})}static createCore(Je){return Object.keys(Je).reduce((Rt,jt)=>Object.assign(Rt,{[jt]:ze(Je[jt])}),{})}static fromObject(Je){const ut=this.createCore(Je);return new $e(ut)}get(Je){return this.valMap_[Je].rawValue}set(Je,ut){this.valMap_[Je].rawValue=ut}value(Je){return this.valMap_[Je]}}function He(vt,Je){const Rt=Object.keys(Je).reduce((jt,mn)=>{if(jt===void 0)return;const Vn=Je[mn],Gn=Vn(vt[mn]);return Gn.succeeded?Object.assign(Object.assign({},jt),{[mn]:Gn.value}):void 0},{});return Rt}function We(vt,Je){return vt.reduce((ut,Rt)=>{if(ut===void 0)return;const jt=Je(Rt);if(!(!jt.succeeded||jt.value===void 0))return[...ut,jt.value]},[])}function qe(vt){return vt===null?!1:typeof vt=="object"}function Ye(vt){return Je=>ut=>{if(!Je&&ut===void 0)return{succeeded:!1,value:void 0};if(Je&&ut===void 0)return{succeeded:!0,value:void 0};const Rt=vt(ut);return Rt!==void 0?{succeeded:!0,value:Rt}:{succeeded:!1,value:void 0}}}function Ze(vt){return{custom:Je=>Ye(Je)(vt),boolean:Ye(Je=>typeof Je=="boolean"?Je:void 0)(vt),number:Ye(Je=>typeof Je=="number"?Je:void 0)(vt),string:Ye(Je=>typeof Je=="string"?Je:void 0)(vt),function:Ye(Je=>typeof Je=="function"?Je:void 0)(vt),constant:Je=>Ye(ut=>ut===Je?Je:void 0)(vt),raw:Ye(Je=>Je)(vt),object:Je=>Ye(ut=>{if(qe(ut))return He(ut,Je)})(vt),array:Je=>Ye(ut=>{if(Array.isArray(ut))return We(ut,Je)})(vt)}}const Ke={optional:Ze(!0),required:Ze(!1)};function rt(vt,Je){const ut=Ke.required.object(Je)(vt);return ut.succeeded?ut.value:void 0}const ft="http://www.w3.org/2000/svg";function mt(vt){vt.offsetHeight}function Et(vt,Je){const ut=vt.style.transition;vt.style.transition="none",Je(),vt.style.transition=ut}function bt(vt){return vt.ontouchstart!==void 0}function Ct(vt){return vt.relatedTarget?vt.relatedTarget:"explicitOriginalTarget"in vt?vt.explicitOriginalTarget:null}class st extends $e{constructor(Je){super(Je)}static create(Je){const ut={completed:!0,expanded:Je,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},Rt=$e.createCore(ut);return new st(Rt)}get styleExpanded(){var Je;return(Je=this.get("temporaryExpanded"))!==null&&Je!==void 0?Je:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const Je=this.get("expandedHeight");return this.get("shouldFixHeight")&&!ee(Je)?`${Je}px`:"auto"}bindExpandedClass(Je,ut){Be(this,"expanded",()=>{this.styleExpanded?Je.classList.add(ut):Je.classList.remove(ut)})}}function at(vt,Je){let ut=0;return Et(Je,()=>{vt.set("expandedHeight",null),vt.set("temporaryExpanded",!0),mt(Je),ut=Je.clientHeight,vt.set("temporaryExpanded",null),mt(Je)}),ut}function Xe(vt,Je){Je.style.height=vt.styleHeight}function ht(vt,Je){vt.value("expanded").emitter.on("beforechange",()=>{vt.set("completed",!1),ee(vt.get("expandedHeight"))&&vt.set("expandedHeight",at(vt,Je)),vt.set("shouldFixHeight",!0),mt(Je)}),vt.emitter.on("change",()=>{Xe(vt,Je)}),Xe(vt,Je),Je.addEventListener("transitionend",ut=>{ut.propertyName==="height"&&(vt.set("shouldFixHeight",!1),vt.set("expandedHeight",null),vt.set("completed",!0))})}class Bt{constructor(Je){this.constraints=Je}constrain(Je){return this.constraints.reduce((ut,Rt)=>Rt.constrain(ut),Je)}}class Dt{constructor(Je){this.maxValue=Je.max,this.minValue=Je.min}constrain(Je){let ut=Je;return ee(this.minValue)||(ut=Math.max(ut,this.minValue)),ee(this.maxValue)||(ut=Math.min(ut,this.maxValue)),ut}}class Jt{constructor(Je){this.step=Je}constrain(Je){return(Je<0?-Math.round(-Je/this.step):Math.round(Je/this.step))*this.step}}const tn=Ee("pop");class zt{constructor(Je,ut){this.element=Je.createElement("div"),this.element.classList.add(tn()),ut.viewProps.bindClassModifiers(this.element),De(ut.shows,Fe(this.element,tn(void 0,"v")))}}class Vt{constructor(Je,ut){this.shows=ze(!1),this.viewProps=ut.viewProps,this.view=new zt(Je,{shows:this.shows,viewProps:this.viewProps})}}class Mt{constructor(Je){this.text=Je}evaluate(){return Number(this.text)}toString(){return this.text}}const Tt={"**":(vt,Je)=>Math.pow(vt,Je),"*":(vt,Je)=>vt*Je,"/":(vt,Je)=>vt/Je,"%":(vt,Je)=>vt%Je,"+":(vt,Je)=>vt+Je,"-":(vt,Je)=>vt-Je,"<<":(vt,Je)=>vt<<Je,">>":(vt,Je)=>vt>>Je,">>>":(vt,Je)=>vt>>>Je,"&":(vt,Je)=>vt&Je,"^":(vt,Je)=>vt^Je,"|":(vt,Je)=>vt|Je};class qt{constructor(Je,ut,Rt){this.left=ut,this.operator=Je,this.right=Rt}evaluate(){const Je=Tt[this.operator];if(!Je)throw new Error(`unexpected binary operator: '${this.operator}`);return Je(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const on={"+":vt=>vt,"-":vt=>-vt,"~":vt=>~vt};class pn{constructor(Je,ut){this.operator=Je,this.expression=ut}evaluate(){const Je=on[this.operator];if(!Je)throw new Error(`unexpected unary operator: '${this.operator}`);return Je(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function kt(vt){return(Je,ut)=>{for(let Rt=0;Rt<vt.length;Rt++){const jt=vt[Rt](Je,ut);if(jt!=="")return jt}return""}}function Mn(vt,Je){var ut;const Rt=vt.substr(Je).match(/^\s+/);return(ut=Rt&&Rt[0])!==null&&ut!==void 0?ut:""}function wt(vt,Je){const ut=vt.substr(Je,1);return ut.match(/^[1-9]$/)?ut:""}function It(vt,Je){var ut;const Rt=vt.substr(Je).match(/^[0-9]+/);return(ut=Rt&&Rt[0])!==null&&ut!==void 0?ut:""}function Kt(vt,Je){const ut=It(vt,Je);if(ut!=="")return ut;const Rt=vt.substr(Je,1);if(Je+=1,Rt!=="-"&&Rt!=="+")return"";const jt=It(vt,Je);return jt===""?"":Rt+jt}function ln(vt,Je){const ut=vt.substr(Je,1);if(Je+=1,ut.toLowerCase()!=="e")return"";const Rt=Kt(vt,Je);return Rt===""?"":ut+Rt}function nn(vt,Je){const ut=vt.substr(Je,1);if(ut==="0")return ut;const Rt=wt(vt,Je);return Je+=Rt.length,Rt===""?"":Rt+It(vt,Je)}function gn(vt,Je){const ut=nn(vt,Je);if(Je+=ut.length,ut==="")return"";const Rt=vt.substr(Je,1);if(Je+=Rt.length,Rt!==".")return"";const jt=It(vt,Je);return Je+=jt.length,ut+Rt+jt+ln(vt,Je)}function xn(vt,Je){const ut=vt.substr(Je,1);if(Je+=ut.length,ut!==".")return"";const Rt=It(vt,Je);return Je+=Rt.length,Rt===""?"":ut+Rt+ln(vt,Je)}function St(vt,Je){const ut=nn(vt,Je);return Je+=ut.length,ut===""?"":ut+ln(vt,Je)}const At=kt([gn,xn,St]);function Ut(vt,Je){var ut;const Rt=vt.substr(Je).match(/^[01]+/);return(ut=Rt&&Rt[0])!==null&&ut!==void 0?ut:""}function Zt(vt,Je){const ut=vt.substr(Je,2);if(Je+=ut.length,ut.toLowerCase()!=="0b")return"";const Rt=Ut(vt,Je);return Rt===""?"":ut+Rt}function cn(vt,Je){var ut;const Rt=vt.substr(Je).match(/^[0-7]+/);return(ut=Rt&&Rt[0])!==null&&ut!==void 0?ut:""}function sn(vt,Je){const ut=vt.substr(Je,2);if(Je+=ut.length,ut.toLowerCase()!=="0o")return"";const Rt=cn(vt,Je);return Rt===""?"":ut+Rt}function bn(vt,Je){var ut;const Rt=vt.substr(Je).match(/^[0-9a-f]+/i);return(ut=Rt&&Rt[0])!==null&&ut!==void 0?ut:""}function vn(vt,Je){const ut=vt.substr(Je,2);if(Je+=ut.length,ut.toLowerCase()!=="0x")return"";const Rt=bn(vt,Je);return Rt===""?"":ut+Rt}const Cn=kt([Zt,sn,vn]),Un=kt([Cn,At]);function yn(vt,Je){const ut=Un(vt,Je);return Je+=ut.length,ut===""?null:{evaluable:new Mt(ut),cursor:Je}}function $n(vt,Je){const ut=vt.substr(Je,1);if(Je+=ut.length,ut!=="(")return null;const Rt=Kn(vt,Je);if(!Rt)return null;Je=Rt.cursor,Je+=Mn(vt,Je).length;const jt=vt.substr(Je,1);return Je+=jt.length,jt!==")"?null:{evaluable:Rt.evaluable,cursor:Je}}function Jn(vt,Je){return yn(vt,Je)||$n(vt,Je)}function Hn(vt,Je){const ut=Jn(vt,Je);if(ut)return ut;const Rt=vt.substr(Je,1);if(Je+=Rt.length,Rt!=="+"&&Rt!=="-"&&Rt!=="~")return null;const jt=Hn(vt,Je);return jt?(Je=jt.cursor,{cursor:Je,evaluable:new pn(Rt,jt.evaluable)}):null}function Bn(vt,Je,ut){ut+=Mn(Je,ut).length;const Rt=vt.filter(jt=>Je.startsWith(jt,ut))[0];return Rt?(ut+=Rt.length,ut+=Mn(Je,ut).length,{cursor:ut,operator:Rt}):null}function Yn(vt,Je){return(ut,Rt)=>{const jt=vt(ut,Rt);if(!jt)return null;Rt=jt.cursor;let mn=jt.evaluable;for(;;){const Vn=Bn(Je,ut,Rt);if(!Vn)break;Rt=Vn.cursor;const Gn=vt(ut,Rt);if(!Gn)return null;Rt=Gn.cursor,mn=new qt(Vn.operator,mn,Gn.evaluable)}return mn?{cursor:Rt,evaluable:mn}:null}}const Qn=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((vt,Je)=>Yn(vt,Je),Hn);function Kn(vt,Je){return Je+=Mn(vt,Je).length,Qn(vt,Je)}function Wt(vt){const Je=Kn(vt,0);return!Je||Je.cursor+Mn(vt,Je.cursor).length!==vt.length?null:Je.evaluable}function zn(vt){var Je;const ut=Wt(vt);return(Je=ut==null?void 0:ut.evaluate())!==null&&Je!==void 0?Je:null}function Xt(vt){return Je=>Je.toFixed(Math.max(Math.min(vt,20),0))}function En({primary:vt,secondary:Je,forward:ut,backward:Rt}){let jt=!1;function mn(Vn){jt||(jt=!0,Vn(),jt=!1)}vt.emitter.on("change",Vn=>{mn(()=>{Je.setRawValue(ut(vt,Je),Vn.options)})}),Je.emitter.on("change",Vn=>{mn(()=>{vt.setRawValue(Rt(vt,Je),Vn.options)}),mn(()=>{Je.setRawValue(ut(vt,Je),Vn.options)})}),mn(()=>{Je.setRawValue(ut(vt,Je),{forceEmit:!1,last:!0})})}function Fn(vt,Je){const ut=vt*(Je.altKey?.1:1)*(Je.shiftKey?10:1);return Je.upKey?+ut:Je.downKey?-ut:0}function Zn(vt){return{altKey:vt.altKey,downKey:vt.key==="ArrowDown",shiftKey:vt.shiftKey,upKey:vt.key==="ArrowUp"}}function hi(vt){return{altKey:vt.altKey,downKey:vt.key==="ArrowLeft",shiftKey:vt.shiftKey,upKey:vt.key==="ArrowRight"}}function bi(vt){return vt==="ArrowUp"||vt==="ArrowDown"}function _i(vt){return bi(vt)||vt==="ArrowLeft"||vt==="ArrowRight"}function ci(vt,Je){const ut=Je.ownerDocument.defaultView,Rt=Je.getBoundingClientRect();return{x:vt.pageX-((ut&&ut.scrollX||0)+Rt.left),y:vt.pageY-((ut&&ut.scrollY||0)+Rt.top)}}class ui{constructor(Je){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=Je,this.emitter=new ve,Je.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),Je.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),Je.addEventListener("touchend",this.onTouchEnd_),Je.addEventListener("mousedown",this.onMouseDown_)}computePosition_(Je){const ut=this.elem_.getBoundingClientRect();return{bounds:{width:ut.width,height:ut.height},point:Je?{x:Je.x,y:Je.y}:null}}onMouseDown_(Je){var ut;Je.preventDefault(),(ut=Je.currentTarget)===null||ut===void 0||ut.focus();const Rt=this.elem_.ownerDocument;Rt.addEventListener("mousemove",this.onDocumentMouseMove_),Rt.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:Je.altKey,data:this.computePosition_(ci(Je,this.elem_)),sender:this,shiftKey:Je.shiftKey})}onDocumentMouseMove_(Je){this.emitter.emit("move",{altKey:Je.altKey,data:this.computePosition_(ci(Je,this.elem_)),sender:this,shiftKey:Je.shiftKey})}onDocumentMouseUp_(Je){const ut=this.elem_.ownerDocument;ut.removeEventListener("mousemove",this.onDocumentMouseMove_),ut.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:Je.altKey,data:this.computePosition_(ci(Je,this.elem_)),sender:this,shiftKey:Je.shiftKey})}onTouchStart_(Je){Je.preventDefault();const ut=Je.targetTouches.item(0),Rt=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:Je.altKey,data:this.computePosition_(ut?{x:ut.clientX-Rt.left,y:ut.clientY-Rt.top}:void 0),sender:this,shiftKey:Je.shiftKey}),this.lastTouch_=ut}onTouchMove_(Je){const ut=Je.targetTouches.item(0),Rt=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:Je.altKey,data:this.computePosition_(ut?{x:ut.clientX-Rt.left,y:ut.clientY-Rt.top}:void 0),sender:this,shiftKey:Je.shiftKey}),this.lastTouch_=ut}onTouchEnd_(Je){var ut;const Rt=(ut=Je.targetTouches.item(0))!==null&&ut!==void 0?ut:this.lastTouch_,jt=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:Je.altKey,data:this.computePosition_(Rt?{x:Rt.clientX-jt.left,y:Rt.clientY-jt.top}:void 0),sender:this,shiftKey:Je.shiftKey})}}function Fi(vt,Je,ut){return Math.min(Math.max(vt,Je),ut)}const pi=Ee("txt");class ir{constructor(Je,ut){this.onChange_=this.onChange_.bind(this),this.props_=ut.props,this.props_.emitter.on("change",this.onChange_),this.element=Je.createElement("div"),this.element.classList.add(pi(),pi(void 0,"num")),ut.arrayPosition&&this.element.classList.add(pi(void 0,ut.arrayPosition)),ut.viewProps.bindClassModifiers(this.element);const Rt=Je.createElement("input");Rt.classList.add(pi("i")),Rt.type="text",ut.viewProps.bindDisabled(Rt),this.element.appendChild(Rt),this.inputElement=Rt,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=ut.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(pi()),this.inputElement.classList.add(pi("i"));const jt=Je.createElement("div");jt.classList.add(pi("k")),this.element.appendChild(jt),this.knobElement=jt;const mn=Je.createElementNS(ft,"svg");mn.classList.add(pi("g")),this.knobElement.appendChild(mn);const Vn=Je.createElementNS(ft,"path");Vn.classList.add(pi("gb")),mn.appendChild(Vn),this.guideBodyElem_=Vn;const Gn=Je.createElementNS(ft,"path");Gn.classList.add(pi("gh")),mn.appendChild(Gn),this.guideHeadElem_=Gn;const Wn=Je.createElement("div");Wn.classList.add(Ee("tt")()),this.knobElement.appendChild(Wn),this.tooltipElem_=Wn,ut.value.emitter.on("change",this.onChange_),this.value=ut.value,this.refresh()}onDraggingChange_(Je){if(Je.rawValue===null){this.element.classList.remove(pi(void 0,"drg"));return}this.element.classList.add(pi(void 0,"drg"));const ut=Je.rawValue/this.props_.get("draggingScale"),Rt=ut+(ut>0?-1:ut<0?1:0),jt=Fi(-Rt,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${Rt+jt},0 L${Rt},4 L${Rt+jt},8`,`M ${ut},-1 L${ut},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${ut},4`);const mn=this.props_.get("formatter");this.tooltipElem_.textContent=mn(this.value.rawValue),this.tooltipElem_.style.left=`${ut}px`}refresh(){const Je=this.props_.get("formatter");this.inputElement.value=Je(this.value.rawValue)}onChange_(){this.refresh()}}class Ki{constructor(Je,ut){this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=ut.baseStep,this.parser_=ut.parser,this.props=ut.props,this.value=ut.value,this.viewProps=ut.viewProps,this.dragging_=ze(null),this.view=new ir(Je,{arrayPosition:ut.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const Rt=new ui(this.view.knobElement);Rt.emitter.on("down",this.onPointerDown_),Rt.emitter.on("move",this.onPointerMove_),Rt.emitter.on("up",this.onPointerUp_)}onInputChange_(Je){const Rt=Je.currentTarget.value,jt=this.parser_(Rt);ee(jt)||(this.value.rawValue=jt),this.view.refresh()}onInputKeyDown_(Je){const ut=Fn(this.baseStep_,Zn(Je));ut!==0&&this.value.setRawValue(this.value.rawValue+ut,{forceEmit:!1,last:!1})}onInputKeyUp_(Je){Fn(this.baseStep_,Zn(Je))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(Je){if(!Je.point)return null;const ut=Je.point.x-Je.bounds.width/2;return this.originRawValue_+ut*this.props.get("draggingScale")}onPointerMove_(Je){const ut=this.computeDraggingValue_(Je.data);ut!==null&&(this.value.setRawValue(ut,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(Je){const ut=this.computeDraggingValue_(Je.data);ut!==null&&(this.value.setRawValue(ut,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}function rr(vt){if(vt==="inline"||vt==="popup")return vt}function ki(vt){const Je=Ke;return Je.required.object({max:Je.optional.number,min:Je.optional.number,step:Je.optional.number})(vt).value}class Gi{constructor(Je){this.components=Je.components,this.asm_=Je.assembly}constrain(Je){const ut=this.asm_.toComponents(Je).map((Rt,jt)=>{var mn,Vn;return(Vn=(mn=this.components[jt])===null||mn===void 0?void 0:mn.constrain(Rt))!==null&&Vn!==void 0?Vn:Rt});return this.asm_.fromComponents(ut)}}const Qi=Ee("pndtxt");class mr{constructor(Je,ut){this.textViews=ut.textViews,this.element=Je.createElement("div"),this.element.classList.add(Qi()),this.textViews.forEach(Rt=>{const jt=Je.createElement("div");jt.classList.add(Qi("a")),jt.appendChild(Rt.element),this.element.appendChild(jt)})}}function gr(vt,Je,ut){return new Ki(vt,{arrayPosition:ut===0?"fst":ut===Je.axes.length-1?"lst":"mid",baseStep:Je.axes[ut].baseStep,parser:Je.parser,props:Je.axes[ut].textProps,value:ze(0,{constraint:Je.axes[ut].constraint}),viewProps:Je.viewProps})}class br{constructor(Je,ut){this.value=ut.value,this.viewProps=ut.viewProps,this.acs_=ut.axes.map((Rt,jt)=>gr(Je,ut,jt)),this.acs_.forEach((Rt,jt)=>{En({primary:this.value,secondary:Rt.value,forward:mn=>ut.assembly.toComponents(mn.rawValue)[jt],backward:(mn,Vn)=>{const Gn=ut.assembly.toComponents(mn.rawValue);return Gn[jt]=Vn.rawValue,ut.assembly.fromComponents(Gn)}})}),this.view=new mr(Je,{textViews:this.acs_.map(Rt=>Rt.view)})}}class hr{multiply(Je){return this.format(this.quat.multiply(Je.quat))}premultiply(Je){return this.format(Je.multiply(this))}slerp(Je,ut){return this.format(this.quat.slerp(Je.quat,ut))}}function er(vt,Je,ut){return Math.min(Math.max(vt,Je),ut)}function Pt(vt,Je){return Math.floor(vt/Je)*Je}function Yt(vt,Je){return vt-Pt(vt,Je)}function un(vt){return Yt(vt+Math.PI,Math.PI*2)-Math.PI}class it extends hr{constructor(Je,ut,Rt,jt,mn){super(),this.x=Je??0,this.y=ut??0,this.z=Rt??0,this.order=jt??"XYZ",this.unit=mn??"rad"}static fromQuaternion(Je,ut,Rt){const jt=Je.toMat3(),[mn,Vn,Gn,Wn]=ut==="XYZ"?[0,1,2,1]:ut==="XZY"?[0,2,1,-1]:ut==="YXZ"?[1,0,2,-1]:ut==="YZX"?[1,2,0,1]:ut==="ZXY"?[2,0,1,1]:[2,1,0,-1],qn=[0,0,0],ri=jt[Gn+mn*3];return qn[Vn]=-Wn*Math.asin(er(ri,-1,1)),Math.abs(ri)<.999999?(qn[mn]=Wn*Math.atan2(jt[Gn+Vn*3],jt[Gn*4]),qn[Gn]=Wn*Math.atan2(jt[Vn+mn*3],jt[mn*4])):qn[mn]=Wn*Math.atan2(-jt[Vn+Gn*3],jt[Vn*4]),Math.abs(qn[mn])+Math.abs(qn[Gn])>Math.PI&&(qn[mn]=un(qn[mn]+Math.PI),qn[Vn]=un(Math.PI-qn[Vn]),qn[Gn]=un(qn[Gn]+Math.PI)),new it(...qn,ut).reunit(Rt)}get quat(){return lt.fromEuler(this)}getComponents(){return[this.x,this.y,this.z]}toEuler(Je,ut){return this.reorder(Je).reunit(ut)}format(Je){return Je instanceof it?Je.reorder(this.order):Je.toEuler(this.order,this.unit)}reorder(Je){return Je===this.order?this:this.quat.toEuler(Je,this.unit)}reunit(Je){const ut={deg:Math.PI/180,rad:1,turn:2*Math.PI}[this.unit],Rt={deg:180/Math.PI,rad:1,turn:.5/Math.PI}[Je],jt=ut*Rt;return new it(jt*this.x,jt*this.y,jt*this.z,this.order,Je)}}class lt extends hr{constructor(Je,ut,Rt,jt){super(),this.x=Je??0,this.y=ut??0,this.z=Rt??0,this.w=jt??1}static fromAxisAngle(Je,ut){const Rt=ut/2,jt=Math.sin(Rt);return new lt(Je.x*jt,Je.y*jt,Je.z*jt,Math.cos(Rt))}static fromEuler(Je){const ut=Je.reunit("rad"),[Rt,jt,mn,Vn]=ut.order==="XYZ"?[0,1,2,1]:ut.order==="XZY"?[0,2,1,-1]:ut.order==="YXZ"?[1,0,2,-1]:ut.order==="YZX"?[1,2,0,1]:ut.order==="ZXY"?[2,0,1,1]:[2,1,0,-1],Gn=ut.getComponents(),Wn=.5*Gn[Rt],qn=.5*Vn*Gn[jt],ri=.5*Gn[mn],xi=Math.cos(Wn),Mi=Math.cos(qn),Ni=Math.cos(ri),$i=Math.sin(Wn),Oi=Math.sin(qn),vi=Math.sin(ri),Dr=[0,0,0,Ni*Mi*xi+vi*Oi*$i];return Dr[Rt]=Ni*Mi*$i-vi*Oi*xi,Dr[jt]=Vn*(Ni*Oi*xi+vi*Mi*$i),Dr[mn]=vi*Mi*xi-Ni*Oi*$i,new lt(...Dr)}static lookRotation(Je,ut){const{normal:Rt,tangent:jt,binormal:mn}=Je.orthoNormalize(ut),Vn=mn.x,Gn=jt.x,Wn=Rt.x,qn=mn.y,ri=jt.y,xi=Rt.y,Mi=mn.z,Ni=jt.z,$i=Rt.z,Oi=Vn+ri+$i;if(Oi>0){const vi=.5/Math.sqrt(Oi+1);return new lt((Ni-xi)*vi,(Wn-Mi)*vi,(qn-Gn)*vi,.25/vi)}else if(Vn>ri&&Vn>$i){const vi=2*Math.sqrt(1+Vn-ri-$i);return new lt(.25*vi,(Gn+qn)/vi,(Wn+Mi)/vi,(Ni-xi)/vi)}else if(ri>$i){const vi=2*Math.sqrt(1+ri-Vn-$i);return new lt((Gn+qn)/vi,.25*vi,(xi+Ni)/vi,(Wn-Mi)/vi)}else{const vi=2*Math.sqrt(1+$i-Vn-ri);return new lt((Wn+Mi)/vi,(xi+Ni)/vi,.25*vi,(qn-Gn)/vi)}}get quat(){return this}getComponents(){return[this.x,this.y,this.z,this.w]}toEuler(Je,ut){return it.fromQuaternion(this,Je,ut)}get lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}get length(){return Math.sqrt(this.lengthSq)}get normalized(){const Je=this.length;return Je===0?new lt:new lt(this.x/Je,this.y/Je,this.z/Je,this.w/Je)}get negated(){return new lt(-this.x,-this.y,-this.z,-this.w)}get ban360s(){return this.w<0?this.negated:this}multiply(Je){const ut=Je.quat;return new lt(this.w*ut.x+this.x*ut.w+this.y*ut.z-this.z*ut.y,this.w*ut.y-this.x*ut.z+this.y*ut.w+this.z*ut.x,this.w*ut.z+this.x*ut.y-this.y*ut.x+this.z*ut.w,this.w*ut.w-this.x*ut.x-this.y*ut.y-this.z*ut.z)}format(Je){return Je.quat}slerp(Je,ut){let Rt=Je.quat;if(ut===0)return this;if(ut===1)return Rt;const jt=this.ban360s;Rt=Rt.ban360s;let mn=jt.w*Rt.w+jt.x*Rt.x+jt.y*Rt.y+jt.z*Rt.z;if(mn<0&&(Rt=Rt.negated,mn=-mn),mn>=1)return jt;const Vn=1-mn*mn;if(Vn<=Number.EPSILON){const xi=1-ut;return new lt(xi*jt.x+ut*Rt.x,xi*jt.y+ut*Rt.y,xi*jt.z+ut*Rt.z,xi*jt.w+ut*Rt.w).normalized}const Gn=Math.sqrt(Vn),Wn=Math.atan2(Gn,mn),qn=Math.sin((1-ut)*Wn)/Gn,ri=Math.sin(ut*Wn)/Gn;return new lt(jt.x*qn+Rt.x*ri,jt.y*qn+Rt.y*ri,jt.z*qn+Rt.z*ri,jt.w*qn+Rt.w*ri)}toMat3(){const{x:Je,y:ut,z:Rt,w:jt}=this;return[1-2*ut*ut-2*Rt*Rt,2*Je*ut+2*Rt*jt,2*Je*Rt-2*ut*jt,2*Je*ut-2*Rt*jt,1-2*Je*Je-2*Rt*Rt,2*ut*Rt+2*Je*jt,2*Je*Rt+2*ut*jt,2*ut*Rt-2*Je*jt,1-2*Je*Je-2*ut*ut]}}class xt{constructor(){this.offset=[0,0,-5],this.fov=30,this.aspect=1,this.viewport=[0,0,1,1]}project(Je){const ut=(this.viewport[0]+this.viewport[2])*.5,Rt=(this.viewport[1]+this.viewport[3])*.5,jt=this.viewport[2]-this.viewport[0],mn=this.viewport[3]-this.viewport[1],Vn=1/Math.tan(this.fov*Math.PI/360),Gn=-(Je.z+this.offset[2]),Wn=ut+(Je.x+this.offset[0])/Gn*Vn*jt*.5/this.aspect,qn=Rt-(Je.y+this.offset[1])/Gn*Vn*mn*.5;return[Wn,qn]}}class Nt{constructor(Je,ut,Rt){this.element=Je.createElementNS(ft,"path"),this.vertices=ut,this.projector=Rt}setRotation(Je){let ut="";return this.vertices.forEach((Rt,jt)=>{const mn=Rt.applyQuaternion(Je),[Vn,Gn]=this.projector.project(mn);ut+=`${jt===0?"M":"L"}${Vn} ${Gn}`}),this.element.setAttributeNS(null,"d",ut),this}}class Qt{constructor(Je,ut,Rt){this.x=Je??0,this.y=ut??0,this.z=Rt??0}getComponents(){return[this.x,this.y,this.z]}get lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}get length(){return Math.sqrt(this.lengthSq)}get normalized(){const Je=this.length;return Je===0?new Qt:new Qt(this.x/Je,this.y/Je,this.z/Je)}get negated(){return new Qt(-this.x,-this.y,-this.z)}add(Je){return new Qt(this.x+Je.x,this.y+Je.y,this.z+Je.z)}sub(Je){return new Qt(this.x-Je.x,this.y-Je.y,this.z-Je.z)}scale(Je){return new Qt(this.x*Je,this.y*Je,this.z*Je)}dot(Je){return this.x*Je.x+this.y*Je.y+this.z*Je.z}cross(Je){return new Qt(this.y*Je.z-this.z*Je.y,this.z*Je.x-this.x*Je.z,this.x*Je.y-this.y*Je.x)}orthoNormalize(Je){const ut=this.normalized;Je=Je.normalized;let Rt=ut.dot(Je);Rt===1&&(Math.abs(ut.y)>Math.abs(ut.z)?Je=new Qt(0,0,1):Je=new Qt(0,1,0),Rt=ut.dot(Je)),Je=Je.sub(ut.scale(Rt)).normalized;const jt=Je.cross(ut);return{normal:ut,tangent:Je,binormal:jt}}applyQuaternion(Je){const ut=Je.w*this.x+Je.y*this.z-Je.z*this.y,Rt=Je.w*this.y+Je.z*this.x-Je.x*this.z,jt=Je.w*this.z+Je.x*this.y-Je.y*this.x,mn=-Je.x*this.x-Je.y*this.y-Je.z*this.z;return new Qt(ut*Je.w+mn*-Je.x+Rt*-Je.z-jt*-Je.y,Rt*Je.w+mn*-Je.y+jt*-Je.x-ut*-Je.z,jt*Je.w+mn*-Je.z+ut*-Je.y-Rt*-Je.x)}}function Ht(vt,Je){const ut=Je.z>0?new lt(0,0,0,1):new lt(0,0,1,0);return Math.abs(vt.z)>.9999?ut:lt.lookRotation(vt,Je)}function dn(vt,Je,ut,Rt,jt,mn=1){const Vn=[];for(let Gn=0;Gn<ut;Gn++){const Wn=vt+Je*Gn/(ut-1),qn=new Qt;qn[Rt]=mn*Math.cos(Wn),qn[jt]=mn*Math.sin(Wn),Vn.push(qn)}return Vn}const en=Ee("rotationgizmo"),hn=new Qt(0,0,0),_n=new Qt(1,0,0),fn=new Qt(0,1,0),Tn=new Qt(0,0,1),Ln=new Qt(0,0,-1),Pn=new Qt(.7,0,0),wn=new Qt(0,.7,0),Nn=new Qt(0,0,.7),Dn=new Qt(-.7,0,0),jn=new Qt(0,-.7,0),si=new Qt(0,0,-.7),oi=new lt(0,0,0,1);function Ai(vt,Je,ut){const Rt=vt.createElementNS(ft,"g"),jt=vt.createElementNS(ft,"circle");jt.classList.add(en(Je)),jt.setAttributeNS(null,"cx","0"),jt.setAttributeNS(null,"cy","0"),jt.setAttributeNS(null,"r","8"),Rt.appendChild(jt);const mn=vt.createElementNS(ft,"text");return mn.classList.add(en("labeltext")),mn.setAttributeNS(null,"y","4"),mn.setAttributeNS(null,"text-anchor","middle"),mn.setAttributeNS(null,"font-size","10"),mn.textContent=ut,Rt.appendChild(mn),Rt}class ei{constructor(Je,ut){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.onModeChange_=this.onModeChange_.bind(this),this.element=Je.createElement("div"),this.element.classList.add(en()),ut.pickerLayout==="popup"&&this.element.classList.add(en(void 0,"p"));const Rt=Je.createElement("div");Rt.classList.add(en("p")),ut.viewProps.bindTabIndex(Rt),this.element.appendChild(Rt),this.padElement=Rt;const jt=Je.createElementNS(ft,"svg");jt.classList.add(en("g")),this.padElement.appendChild(jt),this.svgElem_=jt,this.projector_=new xt,this.projector_.viewport=[0,0,136,136];const mn=dn(0,Math.PI,33,"x","y"),Vn=dn(0,2*Math.PI,65,"x","y",1.1);this.xArcB_=new Nt(Je,mn,this.projector_),this.xArcB_.element.classList.add(en("arcx")),this.svgElem_.appendChild(this.xArcB_.element),this.yArcB_=new Nt(Je,mn,this.projector_),this.yArcB_.element.classList.add(en("arcy")),this.svgElem_.appendChild(this.yArcB_.element),this.zArcB_=new Nt(Je,mn,this.projector_),this.zArcB_.element.classList.add(en("arcz")),this.svgElem_.appendChild(this.zArcB_.element),this.xArcBC_=new Nt(Je,mn,this.projector_),this.xArcBC_.element.classList.add(en("arcc")),this.svgElem_.appendChild(this.xArcBC_.element),this.yArcBC_=new Nt(Je,mn,this.projector_),this.yArcBC_.element.classList.add(en("arcc")),this.svgElem_.appendChild(this.yArcBC_.element),this.zArcBC_=new Nt(Je,mn,this.projector_),this.zArcBC_.element.classList.add(en("arcc")),this.svgElem_.appendChild(this.zArcBC_.element);const Gn=Je.createElementNS(ft,"g");jt.classList.add(en("axes")),this.svgElem_.appendChild(Gn),this.axesElem_=Gn,this.xAxis_=new Nt(Je,[hn,Pn],this.projector_),this.xAxis_.element.classList.add(en("axisx")),this.axesElem_.appendChild(this.xAxis_.element),this.yAxis_=new Nt(Je,[hn,wn],this.projector_),this.yAxis_.element.classList.add(en("axisy")),this.axesElem_.appendChild(this.yAxis_.element),this.zAxis_=new Nt(Je,[hn,Nn],this.projector_),this.zAxis_.element.classList.add(en("axisz")),this.axesElem_.appendChild(this.zAxis_.element),this.xnAxis_=new Nt(Je,[hn,Dn],this.projector_),this.xnAxis_.element.classList.add(en("axisn")),this.axesElem_.appendChild(this.xnAxis_.element),this.ynAxis_=new Nt(Je,[hn,jn],this.projector_),this.ynAxis_.element.classList.add(en("axisn")),this.axesElem_.appendChild(this.ynAxis_.element),this.znAxis_=new Nt(Je,[hn,si],this.projector_),this.znAxis_.element.classList.add(en("axisn")),this.axesElem_.appendChild(this.znAxis_.element),this.xArcF_=new Nt(Je,mn,this.projector_),this.xArcF_.element.classList.add(en("arcx")),this.svgElem_.appendChild(this.xArcF_.element),this.yArcF_=new Nt(Je,mn,this.projector_),this.yArcF_.element.classList.add(en("arcy")),this.svgElem_.appendChild(this.yArcF_.element),this.zArcF_=new Nt(Je,mn,this.projector_),this.zArcF_.element.classList.add(en("arcz")),this.svgElem_.appendChild(this.zArcF_.element),this.xArcFC_=new Nt(Je,mn,this.projector_),this.xArcFC_.element.classList.add(en("arcc")),this.svgElem_.appendChild(this.xArcFC_.element),this.yArcFC_=new Nt(Je,mn,this.projector_),this.yArcFC_.element.classList.add(en("arcc")),this.svgElem_.appendChild(this.yArcFC_.element),this.zArcFC_=new Nt(Je,mn,this.projector_),this.zArcFC_.element.classList.add(en("arcc")),this.svgElem_.appendChild(this.zArcFC_.element),this.rArc_=new Nt(Je,Vn,this.projector_),this.rArc_.element.classList.add(en("arcr")),this.rArc_.setRotation(oi),this.svgElem_.appendChild(this.rArc_.element),this.rArcC_=new Nt(Je,Vn,this.projector_),this.rArcC_.element.classList.add(en("arcc")),this.rArcC_.setRotation(oi),this.svgElem_.appendChild(this.rArcC_.element);const Wn=Je.createElementNS(ft,"g");jt.classList.add(en("labels")),this.svgElem_.appendChild(Wn),this.labelsElem_=Wn,this.xLabel=Ai(Je,"labelcirclex","X"),this.labelsElem_.appendChild(this.xLabel),this.yLabel=Ai(Je,"labelcircley","Y"),this.labelsElem_.appendChild(this.yLabel),this.zLabel=Ai(Je,"labelcirclez","Z"),this.labelsElem_.appendChild(this.zLabel),this.xnLabel=Ai(Je,"labelcirclen","-X"),this.labelsElem_.appendChild(this.xnLabel),this.ynLabel=Ai(Je,"labelcirclen","-Y"),this.labelsElem_.appendChild(this.ynLabel),this.znLabel=Ai(Je,"labelcirclen","-Z"),this.labelsElem_.appendChild(this.znLabel);const qn=()=>{this.xArcB_.element.classList.add(en("arcx_hover")),this.xArcF_.element.classList.add(en("arcx_hover"))},ri=()=>{this.xArcB_.element.classList.remove(en("arcx_hover")),this.xArcF_.element.classList.remove(en("arcx_hover"))};this.xArcBC_.element.addEventListener("mouseenter",qn),this.xArcBC_.element.addEventListener("mouseleave",ri),this.xArcFC_.element.addEventListener("mouseenter",qn),this.xArcFC_.element.addEventListener("mouseleave",ri);const xi=()=>{this.yArcB_.element.classList.add(en("arcy_hover")),this.yArcF_.element.classList.add(en("arcy_hover"))},Mi=()=>{this.yArcB_.element.classList.remove(en("arcy_hover")),this.yArcF_.element.classList.remove(en("arcy_hover"))};this.yArcBC_.element.addEventListener("mouseenter",xi),this.yArcBC_.element.addEventListener("mouseleave",Mi),this.yArcFC_.element.addEventListener("mouseenter",xi),this.yArcFC_.element.addEventListener("mouseleave",Mi);const Ni=()=>{this.zArcB_.element.classList.add(en("arcz_hover")),this.zArcF_.element.classList.add(en("arcz_hover"))},$i=()=>{this.zArcB_.element.classList.remove(en("arcz_hover")),this.zArcF_.element.classList.remove(en("arcz_hover"))};this.zArcBC_.element.addEventListener("mouseenter",Ni),this.zArcBC_.element.addEventListener("mouseleave",$i),this.zArcFC_.element.addEventListener("mouseenter",Ni),this.zArcFC_.element.addEventListener("mouseleave",$i);const Oi=()=>{this.rArc_.element.classList.add(en("arcr_hover"))},vi=()=>{this.rArc_.element.classList.remove(en("arcr_hover"))};this.rArcC_.element.addEventListener("mouseenter",Oi),this.rArcC_.element.addEventListener("mouseleave",vi),ut.value.emitter.on("change",this.onValueChange_),this.value=ut.value,ut.mode.emitter.on("change",this.onModeChange_),this.mode_=ut.mode,this.update_()}get xArcBElement(){return this.xArcBC_.element}get yArcBElement(){return this.yArcBC_.element}get zArcBElement(){return this.zArcBC_.element}get xArcFElement(){return this.xArcFC_.element}get yArcFElement(){return this.yArcFC_.element}get zArcFElement(){return this.zArcFC_.element}get rArcElement(){return this.rArcC_.element}get allFocusableElements(){return[this.padElement]}update_(){const Je=this.value.rawValue.quat.normalized;this.xAxis_.setRotation(Je),this.yAxis_.setRotation(Je),this.zAxis_.setRotation(Je),this.xnAxis_.setRotation(Je),this.ynAxis_.setRotation(Je),this.znAxis_.setRotation(Je);const ut=_n.applyQuaternion(Je),Rt=fn.applyQuaternion(Je),jt=Tn.applyQuaternion(Je),mn=ut.negated,Vn=Rt.negated,Gn=jt.negated;[{el:this.xAxis_.element,v:ut},{el:this.yAxis_.element,v:Rt},{el:this.zAxis_.element,v:jt},{el:this.xnAxis_.element,v:mn},{el:this.ynAxis_.element,v:Vn},{el:this.znAxis_.element,v:Gn}].map(({el:Wn,v:qn})=>(this.axesElem_.removeChild(Wn),{el:Wn,v:qn})).sort((Wn,qn)=>Wn.v.z-qn.v.z).forEach(({el:Wn})=>{this.axesElem_.appendChild(Wn)}),this.xArcB_.setRotation(Ht(ut,Ln)),this.yArcB_.setRotation(Ht(Rt,Ln)),this.zArcB_.setRotation(Ht(jt,Ln)),this.xArcBC_.setRotation(Ht(ut,Ln)),this.yArcBC_.setRotation(Ht(Rt,Ln)),this.zArcBC_.setRotation(Ht(jt,Ln)),this.xArcF_.setRotation(Ht(ut,Tn)),this.yArcF_.setRotation(Ht(Rt,Tn)),this.zArcF_.setRotation(Ht(jt,Tn)),this.xArcFC_.setRotation(Ht(ut,Tn)),this.yArcFC_.setRotation(Ht(Rt,Tn)),this.zArcFC_.setRotation(Ht(jt,Tn)),[{el:this.xLabel,v:Pn},{el:this.yLabel,v:wn},{el:this.zLabel,v:Nn},{el:this.xnLabel,v:Dn},{el:this.ynLabel,v:jn},{el:this.znLabel,v:si}].forEach(({el:Wn,v:qn})=>{const[ri,xi]=this.projector_.project(qn.applyQuaternion(Je));Wn.setAttributeNS(null,"transform",`translate( ${ri}, ${xi} )`)}),[{el:this.xLabel,v:ut},{el:this.yLabel,v:Rt},{el:this.zLabel,v:jt},{el:this.xnLabel,v:mn},{el:this.ynLabel,v:Vn},{el:this.znLabel,v:Gn}].map(({el:Wn,v:qn})=>(this.labelsElem_.removeChild(Wn),{el:Wn,v:qn})).sort((Wn,qn)=>Wn.v.z-qn.v.z).forEach(({el:Wn})=>{this.labelsElem_.appendChild(Wn)})}onValueChange_(){this.update_()}onFoldableChange_(){this.update_()}onModeChange_(){const Je=this.mode_.rawValue,ut=Je==="angle-x"?"add":"remove",Rt=Je==="angle-y"?"add":"remove",jt=Je==="angle-z"?"add":"remove",mn=Je==="angle-r"?"add":"remove";this.xArcB_.element.classList[ut](en("arcx_active")),this.yArcB_.element.classList[Rt](en("arcy_active")),this.zArcB_.element.classList[jt](en("arcz_active")),this.xArcF_.element.classList[ut](en("arcx_active")),this.yArcF_.element.classList[Rt](en("arcy_active")),this.zArcF_.element.classList[jt](en("arcz_active")),this.rArc_.element.classList[mn](en("arcr_active"))}}function ni(vt){return er(vt,0,1)}function wi(vt){if(vt<=0)return 0;if(vt>=1)return 1;const Je=1-vt,ut=Je*(Je*(Je*(Je*(Je*(Je*(Je*-6+7))))));return ni(1-ut)}function gi(vt,Je,ut){return ni((ut-vt)/(Je-vt))}const di=1/Math.sqrt(2),Xn=new Qt(1,0,0),fi=new Qt(0,1,0),Vi=new Qt(0,0,1),Bi=new lt(0,0,0,1),Hi=new lt(di,0,0,di),Yi=new lt(0,-di,0,di),Wi=new lt(-di,0,0,di),_r=new lt(0,di,0,di),Cr=new lt(0,1,0,0);class Or{constructor(Je,ut){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=ut.value,this.viewProps=ut.viewProps,this.mode_=ze("free"),this.view=new ei(Je,{value:this.value,mode:this.mode_,viewProps:this.viewProps,pickerLayout:ut.pickerLayout}),this.ptHandler_=new ui(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_);const Rt=new ui(this.view.xArcBElement);Rt.emitter.on("down",()=>this.changeModeIfNotAuto_("angle-x")),Rt.emitter.on("up",()=>this.changeModeIfNotAuto_("free"));const jt=new ui(this.view.xArcFElement);jt.emitter.on("down",()=>this.changeModeIfNotAuto_("angle-x")),jt.emitter.on("up",()=>this.changeModeIfNotAuto_("free"));const mn=new ui(this.view.yArcBElement);mn.emitter.on("down",()=>this.changeModeIfNotAuto_("angle-y")),mn.emitter.on("up",()=>this.changeModeIfNotAuto_("free"));const Vn=new ui(this.view.yArcFElement);Vn.emitter.on("down",()=>this.changeModeIfNotAuto_("angle-y")),Vn.emitter.on("up",()=>this.changeModeIfNotAuto_("free"));const Gn=new ui(this.view.zArcBElement);Gn.emitter.on("down",()=>this.changeModeIfNotAuto_("angle-z")),Gn.emitter.on("up",()=>this.changeModeIfNotAuto_("free"));const Wn=new ui(this.view.zArcFElement);Wn.emitter.on("down",()=>this.changeModeIfNotAuto_("angle-z")),Wn.emitter.on("up",()=>this.changeModeIfNotAuto_("free"));const qn=new ui(this.view.rArcElement);qn.emitter.on("down",()=>this.changeModeIfNotAuto_("angle-r")),qn.emitter.on("up",()=>this.changeModeIfNotAuto_("free")),[{el:this.view.xLabel,q:Yi},{el:this.view.yLabel,q:Hi},{el:this.view.zLabel,q:Bi},{el:this.view.xnLabel,q:_r},{el:this.view.ynLabel,q:Wi},{el:this.view.znLabel,q:Cr}].forEach(({el:ri,q:xi})=>{new ui(ri).emitter.on("down",()=>this.autoRotate_(xi))}),this.px_=null,this.py_=null,this.angleState_=null}handlePointerEvent_(Je){if(!Je.point)return;const ut=this.mode_.rawValue,Rt=Je.point.x,jt=Je.point.y;if(ut!=="auto")if(ut==="free"){if(this.px_!=null&&this.py_!=null){const mn=Rt-this.px_,Vn=jt-this.py_,Gn=Math.sqrt(mn*mn+Vn*Vn);if(Gn===0)return;const Wn=new Qt(Vn/Gn,mn/Gn,0),qn=lt.fromAxisAngle(Wn,Gn/68);this.value.rawValue=this.value.rawValue.premultiply(qn)}this.px_=Rt,this.py_=jt}else if(ut==="angle-r"){const mn=Je.bounds.width/2,Vn=Je.bounds.height/2,Gn=Math.atan2(jt-Vn,Rt-mn);if(this.angleState_==null){const Wn=new Qt(0,0,1);this.angleState_={initialRotation:this.value.rawValue,initialAngle:Gn,axis:Wn,reverseAngle:!0}}else{const{initialRotation:Wn,initialAngle:qn,axis:ri}=this.angleState_,xi=-un(Gn-qn),Mi=lt.fromAxisAngle(ri,xi);this.value.rawValue=Wn.premultiply(Mi)}}else{const mn=Je.bounds.width/2,Vn=Je.bounds.height/2,Gn=Math.atan2(jt-Vn,Rt-mn);if(this.angleState_==null){const Wn=ut==="angle-x"?Xn:ut==="angle-y"?fi:Vi,qn=Wn.applyQuaternion(this.value.rawValue.quat).z>0;this.angleState_={initialRotation:this.value.rawValue,initialAngle:Gn,axis:Wn,reverseAngle:qn}}else{const{initialRotation:Wn,initialAngle:qn,axis:ri,reverseAngle:xi}=this.angleState_;let Mi=un(Gn-qn);Mi=xi?-Mi:Mi;const Ni=lt.fromAxisAngle(ri,Mi);this.value.rawValue=Wn.multiply(Ni)}}}onPointerDown_(Je){this.handlePointerEvent_(Je.data)}onPointerMove_(Je){this.handlePointerEvent_(Je.data)}onPointerUp_(){this.px_=null,this.py_=null,this.angleState_=null}onPadKeyDown_(Je){_i(Je.key)&&Je.preventDefault();const ut=Fn(1,hi(Je)),Rt=Fn(1,Zn(Je));if(ut!==0||Rt!==0){const jt=new Qt(-Rt,ut,0),mn=lt.fromAxisAngle(jt,Math.PI/16);this.value.rawValue=this.value.rawValue.premultiply(mn)}}changeModeIfNotAuto_(Je){this.mode_.rawValue!=="auto"&&(this.mode_.rawValue=Je)}autoRotate_(Je){this.mode_.rawValue="auto";const ut=this.value.rawValue,Rt=Date.now(),jt=()=>{const mn=Date.now(),Vn=wi(gi(0,300,mn-Rt));if(this.value.rawValue=ut.slerp(Je,Vn),Vn===1){this.mode_.rawValue="free";return}requestAnimationFrame(jt)};requestAnimationFrame(jt)}}const Xi=Ee("rotationswatch"),Ar=new Qt(1,0,0),Zr=new Qt(0,1,0),sr=new Qt(0,0,1),es=new lt(0,0,0,1);class ms{constructor(Je,ut){this.onValueChange_=this.onValueChange_.bind(this),ut.value.emitter.on("change",this.onValueChange_),this.value=ut.value,this.element=Je.createElement("div"),this.element.classList.add(Xi()),ut.viewProps.bindClassModifiers(this.element);const Rt=Je.createElement("button");Rt.classList.add(Xi("b")),ut.viewProps.bindDisabled(Rt),this.element.appendChild(Rt),this.buttonElement=Rt;const jt=Je.createElementNS(ft,"svg");jt.classList.add(Xi("g")),Rt.appendChild(jt),this.svgElem_=jt,this.projector_=new xt,this.projector_.viewport=[0,0,20,20];const mn=dn(0,Math.PI,33,"x","y"),Vn=dn(0,2*Math.PI,65,"x","y");this.rArc_=new Nt(Je,Vn,this.projector_),this.rArc_.element.classList.add(Xi("arcr")),jt.appendChild(this.rArc_.element),this.rArc_.setRotation(es),this.xArc_=new Nt(Je,mn,this.projector_),this.xArc_.element.classList.add(Xi("arc")),jt.appendChild(this.xArc_.element),this.yArc_=new Nt(Je,mn,this.projector_),this.yArc_.element.classList.add(Xi("arc")),jt.appendChild(this.yArc_.element),this.zArc_=new Nt(Je,mn,this.projector_),this.zArc_.element.classList.add(Xi("arc")),jt.appendChild(this.zArc_.element),this.update_()}update_(){const Je=this.value.rawValue.quat.normalized,ut=Ar.applyQuaternion(Je),Rt=Zr.applyQuaternion(Je),jt=sr.applyQuaternion(Je);this.xArc_.setRotation(Ht(ut,sr)),this.yArc_.setRotation(Ht(Rt,sr)),this.zArc_.setRotation(Ht(jt,sr))}onValueChange_(){this.update_()}}class ts{constructor(Je,ut){this.value=ut.value,this.viewProps=ut.viewProps,this.view=new ms(Je,{value:this.value,viewProps:this.viewProps})}}const tr=Ee("rotation");class gs{constructor(Je,ut){this.element=Je.createElement("div"),this.element.classList.add(tr()),ut.foldable.bindExpandedClass(this.element,tr(void 0,"expanded")),Be(ut.foldable,"completed",Fe(this.element,tr(void 0,"cpl"))),ut.rotationMode==="quaternion"&&this.element.classList.add(tr("quat"));const Rt=Je.createElement("div");Rt.classList.add(tr("h")),this.element.appendChild(Rt);const jt=Je.createElement("div");jt.classList.add(tr("s")),Rt.appendChild(jt),this.swatchElement=jt;const mn=Je.createElement("div");if(mn.classList.add(tr("t")),Rt.appendChild(mn),this.textElement=mn,ut.pickerLayout==="inline"){const Vn=Je.createElement("div");Vn.classList.add(tr("g")),this.element.appendChild(Vn),this.pickerElement=Vn}else this.pickerElement=null}}class wr{constructor(Je,ut){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=ut.value,this.viewProps=ut.viewProps,this.foldable_=st.create(ut.expanded),this.swatchC_=new ts(Je,{value:this.value,viewProps:this.viewProps});const Rt=this.swatchC_.view.buttonElement;Rt.addEventListener("blur",this.onButtonBlur_),Rt.addEventListener("click",this.onButtonClick_),this.textC_=new br(Je,{assembly:ut.assembly,axes:ut.axes,parser:ut.parser,value:this.value,viewProps:this.viewProps}),this.view=new gs(Je,{rotationMode:ut.rotationMode,foldable:this.foldable_,pickerLayout:ut.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=ut.pickerLayout==="popup"?new Vt(Je,{viewProps:this.viewProps}):null;const jt=new Or(Je,{value:this.value,viewProps:this.viewProps,pickerLayout:ut.pickerLayout});jt.view.allFocusableElements.forEach(mn=>{mn.addEventListener("blur",this.onPopupChildBlur_),mn.addEventListener("keydown",this.onPopupChildKeydown_)}),this.gizmoC_=jt,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(jt.view.element),En({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:mn=>mn.rawValue,backward:(mn,Vn)=>Vn.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.gizmoC_.view.element),ht(this.foldable_,this.view.pickerElement))}onButtonBlur_(Je){if(!this.popC_)return;const ut=this.view.element,Rt=Je.relatedTarget;(!Rt||!ut.contains(Rt))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.gizmoC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(Je){if(!this.popC_)return;const ut=this.popC_.view.element,Rt=Ct(Je);Rt&&ut.contains(Rt)||Rt&&Rt===this.swatchC_.view.buttonElement&&!bt(ut.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(Je){this.popC_?Je.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&Je.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}}function Ur(vt,Je){const ut=Math.pow(.1,vt);return{baseStep:ut,constraint:Je,textProps:$e.fromObject({draggingScale:ut,formatter:Xt(vt)})}}function or(vt){if(!vt)return;const Je=[];return ee(vt.step)||Je.push(new Jt(vt.step)),(!ee(vt.max)||!ee(vt.min))&&Je.push(new Dt({max:vt.max,min:vt.min})),new Bt(Je)}function $r(vt,Je){return{toComponents:ut=>ut.getComponents(),fromComponents:ut=>new it(ut[0],ut[1],ut[2],vt,Je)}}function ns(vt,Je,ut){var Rt,jt,mn;return typeof((Rt=vt)===null||Rt===void 0?void 0:Rt.x)=="number"&&typeof((jt=vt)===null||jt===void 0?void 0:jt.y)=="number"&&typeof((mn=vt)===null||mn===void 0?void 0:mn.z)=="number"?new it(vt.x,vt.y,vt.z,Je,ut):new it(0,0,0,Je,ut)}function _s(vt){switch(vt){case"XYZ":case"XZY":case"YXZ":case"YZX":case"ZXY":case"ZYX":return vt;default:return}}function As(vt){switch(vt){case"rad":case"deg":case"turn":return vt;default:return}}const zr={id:"rotation",type:"input",css:".tp-rotationswatchv_b,.tp-rotationgizmov_p{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-rotationswatchv_b{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-rotationswatchv_b:hover{background-color:var(--btn-bg-h)}.tp-rotationswatchv_b:focus{background-color:var(--btn-bg-f)}.tp-rotationswatchv_b:active{background-color:var(--btn-bg-a)}.tp-rotationswatchv_b:disabled{opacity:0.5}.tp-rotationgizmov_p{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-rotationgizmov_p:hover{background-color:var(--in-bg-h)}.tp-rotationgizmov_p:focus{background-color:var(--in-bg-f)}.tp-rotationgizmov_p:active{background-color:var(--in-bg-a)}.tp-rotationgizmov_p:disabled{opacity:0.5}.tp-rotationv{position:relative}.tp-rotationv_quat .tp-txtv_i{padding-left:0}.tp-rotationv_root{background-color:var(--mo-bg);width:100%;height:calc( 2.0 * var(--bld-us))}.tp-rotationv_h{display:flex}.tp-rotationv_s{flex-grow:0;flex-shrink:0;width:var(--bld-us);margin-right:4px}.tp-rotationv_g{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-rotationv.tp-rotationv-expanded .tp-rotationv_g{margin-top:var(--bld-s);opacity:1}.tp-rotationv .tp-popv{left:calc(-1 * var(--cnt-h-p));right:calc(-1 * var(--cnt-h-p));top:var(--bld-us)}.tp-rotationswatchv path{stroke-linecap:round;stroke-linejoin:round}.tp-rotationswatchv_b{height:var(--bld-us);margin-right:4px;position:relative;width:var(--bld-us)}.tp-rotationswatchv_arc{fill:none;stroke:var(--btn-bg);stroke-width:1px}.tp-rotationswatchv_arcr{fill:var(--btn-fg);stroke:var(--btn-bg);stroke-width:1px}.tp-rotationgizmov{padding-left:calc(var(--bld-us) + 4px)}.tp-rotationgizmov path{stroke-linecap:round;stroke-linejoin:round}.tp-rotationgizmov_p{cursor:move;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-rotationgizmov_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-rotationgizmov_axisx{stroke:#eb103f;stroke-width:2px}.tp-rotationgizmov_axisy{stroke:#4eeb10;stroke-width:2px}.tp-rotationgizmov_axisz{stroke:#1068eb;stroke-width:2px}.tp-rotationgizmov_axisn{stroke:var(--in-fg);stroke-width:2px}.tp-rotationgizmov_arcx{fill:none;stroke:var(--in-fg)}.tp-rotationgizmov_arcx.tp-rotationgizmov_arcx_hover{stroke:#eb103f}.tp-rotationgizmov_arcx.tp-rotationgizmov_arcx_active{stroke:#eb103f;stroke-width:2px}.tp-rotationgizmov_arcy{fill:none;stroke:var(--in-fg)}.tp-rotationgizmov_arcy.tp-rotationgizmov_arcy_hover{stroke:#4eeb10}.tp-rotationgizmov_arcy.tp-rotationgizmov_arcy_active{stroke:#4eeb10;stroke-width:2px}.tp-rotationgizmov_arcz{fill:none;stroke:var(--in-fg)}.tp-rotationgizmov_arcz.tp-rotationgizmov_arcz_hover{stroke:#1068eb}.tp-rotationgizmov_arcz.tp-rotationgizmov_arcz_active{stroke:#1068eb;stroke-width:2px}.tp-rotationgizmov_arcr{fill:none;stroke:var(--in-fg)}.tp-rotationgizmov_arcr.tp-rotationgizmov_arcr_hover{stroke:#ebd510}.tp-rotationgizmov_arcr.tp-rotationgizmov_arcr_active{stroke:#ebd510;stroke-width:2px}.tp-rotationgizmov_arcc{fill:none;stroke:transparent;stroke-width:5px;pointer-events:auto}.tp-rotationgizmov_labelcirclex{fill:#eb103f;cursor:pointer;pointer-events:auto}.tp-rotationgizmov_labelcirclex:hover{opacity:0.7}.tp-rotationgizmov_labelcircley{fill:#4eeb10;cursor:pointer;pointer-events:auto}.tp-rotationgizmov_labelcircley:hover{opacity:0.7}.tp-rotationgizmov_labelcirclez{fill:#1068eb;cursor:pointer;pointer-events:auto}.tp-rotationgizmov_labelcirclez:hover{opacity:0.7}.tp-rotationgizmov_labelcirclen{fill:var(--in-fg);cursor:pointer;pointer-events:auto}.tp-rotationgizmov_labelcirclen:hover{opacity:0.7}.tp-rotationgizmov_labeltext{fill:var(--btn-fg);stroke:var(--btn-fg);stroke-width:1px}.tp-rotationgizmov_p:focus .tp-rotationgizmov_m{background-color:var(--in-fg);border-width:0}",accept(vt,Je){var ut,Rt;const jt=Ke,mn=rt(Je,{view:jt.required.constant("rotation"),label:jt.optional.string,picker:jt.optional.custom(rr),expanded:jt.optional.boolean,rotationMode:jt.required.constant("euler"),x:jt.optional.custom(ki),y:jt.optional.custom(ki),z:jt.optional.custom(ki),order:jt.optional.custom(_s),unit:jt.optional.custom(As)});return mn?{initialValue:ns(vt,(ut=mn.order)!==null&&ut!==void 0?ut:"XYZ",(Rt=mn.unit)!==null&&Rt!==void 0?Rt:"rad"),params:mn}:null},binding:{reader({params:vt}){return Je=>{var ut,Rt;return ns(Je,(ut=vt.order)!==null&&ut!==void 0?ut:"XYZ",(Rt=vt.unit)!==null&&Rt!==void 0?Rt:"rad")}},constraint({params:vt}){var Je,ut;return new Gi({assembly:$r((Je=vt.order)!==null&&Je!==void 0?Je:"XYZ",(ut=vt.unit)!==null&&ut!==void 0?ut:"rad"),components:[or("x"in vt?vt.x:void 0),or("y"in vt?vt.y:void 0),or("z"in vt?vt.z:void 0)]})},writer(vt){return(Je,ut)=>{Je.writeProperty("x",ut.x),Je.writeProperty("y",ut.y),Je.writeProperty("z",ut.z)}}},controller({document:vt,value:Je,constraint:ut,params:Rt,viewProps:jt}){var mn,Vn;if(!(ut instanceof Gi))throw le.shouldNeverHappen();const Gn="expanded"in Rt?Rt.expanded:void 0,Wn="picker"in Rt?Rt.picker:void 0,qn=(mn=Rt.unit)!==null&&mn!==void 0?mn:"rad",ri={rad:2,deg:0,turn:2}[qn];return new wr(vt,{axes:[Ur(ri,ut.components[0]),Ur(ri,ut.components[1]),Ur(ri,ut.components[2])],assembly:$r((Vn=Rt.order)!==null&&Vn!==void 0?Vn:"XYZ",qn),rotationMode:"euler",expanded:Gn??!1,parser:zn,pickerLayout:Wn??"popup",value:Je,viewProps:jt})}},is={toComponents:vt=>[vt.x,vt.y,vt.z,vt.w],fromComponents:vt=>new lt(vt[0],vt[1],vt[2],vt[3])};function vr(vt){return{baseStep:.01,constraint:vt,textProps:$e.fromObject({draggingScale:.01,formatter:Je=>Math.abs(Je)<.995?Je.toFixed(2).replace("0.","."):Je.toFixed(1)})}}function ar(vt){var Je,ut,Rt,jt;return typeof((Je=vt)===null||Je===void 0?void 0:Je.x)=="number"&&typeof((ut=vt)===null||ut===void 0?void 0:ut.y)=="number"&&typeof((Rt=vt)===null||Rt===void 0?void 0:Rt.z)=="number"&&typeof((jt=vt)===null||jt===void 0?void 0:jt.w)=="number"?new lt(vt.x,vt.y,vt.z,vt.w):new lt(0,0,0,1)}const rs={id:"rotation",type:"input",css:".tp-rotationswatchv_b,.tp-rotationgizmov_p{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-rotationswatchv_b{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-rotationswatchv_b:hover{background-color:var(--btn-bg-h)}.tp-rotationswatchv_b:focus{background-color:var(--btn-bg-f)}.tp-rotationswatchv_b:active{background-color:var(--btn-bg-a)}.tp-rotationswatchv_b:disabled{opacity:0.5}.tp-rotationgizmov_p{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-rotationgizmov_p:hover{background-color:var(--in-bg-h)}.tp-rotationgizmov_p:focus{background-color:var(--in-bg-f)}.tp-rotationgizmov_p:active{background-color:var(--in-bg-a)}.tp-rotationgizmov_p:disabled{opacity:0.5}.tp-rotationv{position:relative}.tp-rotationv_quat .tp-txtv_i{padding-left:0}.tp-rotationv_root{background-color:var(--mo-bg);width:100%;height:calc( 2.0 * var(--bld-us))}.tp-rotationv_h{display:flex}.tp-rotationv_s{flex-grow:0;flex-shrink:0;width:var(--bld-us);margin-right:4px}.tp-rotationv_g{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-rotationv.tp-rotationv-expanded .tp-rotationv_g{margin-top:var(--bld-s);opacity:1}.tp-rotationv .tp-popv{left:calc(-1 * var(--cnt-h-p));right:calc(-1 * var(--cnt-h-p));top:var(--bld-us)}.tp-rotationswatchv path{stroke-linecap:round;stroke-linejoin:round}.tp-rotationswatchv_b{height:var(--bld-us);margin-right:4px;position:relative;width:var(--bld-us)}.tp-rotationswatchv_arc{fill:none;stroke:var(--btn-bg);stroke-width:1px}.tp-rotationswatchv_arcr{fill:var(--btn-fg);stroke:var(--btn-bg);stroke-width:1px}.tp-rotationgizmov{padding-left:calc(var(--bld-us) + 4px)}.tp-rotationgizmov path{stroke-linecap:round;stroke-linejoin:round}.tp-rotationgizmov_p{cursor:move;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-rotationgizmov_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-rotationgizmov_axisx{stroke:#eb103f;stroke-width:2px}.tp-rotationgizmov_axisy{stroke:#4eeb10;stroke-width:2px}.tp-rotationgizmov_axisz{stroke:#1068eb;stroke-width:2px}.tp-rotationgizmov_axisn{stroke:var(--in-fg);stroke-width:2px}.tp-rotationgizmov_arcx{fill:none;stroke:var(--in-fg)}.tp-rotationgizmov_arcx.tp-rotationgizmov_arcx_hover{stroke:#eb103f}.tp-rotationgizmov_arcx.tp-rotationgizmov_arcx_active{stroke:#eb103f;stroke-width:2px}.tp-rotationgizmov_arcy{fill:none;stroke:var(--in-fg)}.tp-rotationgizmov_arcy.tp-rotationgizmov_arcy_hover{stroke:#4eeb10}.tp-rotationgizmov_arcy.tp-rotationgizmov_arcy_active{stroke:#4eeb10;stroke-width:2px}.tp-rotationgizmov_arcz{fill:none;stroke:var(--in-fg)}.tp-rotationgizmov_arcz.tp-rotationgizmov_arcz_hover{stroke:#1068eb}.tp-rotationgizmov_arcz.tp-rotationgizmov_arcz_active{stroke:#1068eb;stroke-width:2px}.tp-rotationgizmov_arcr{fill:none;stroke:var(--in-fg)}.tp-rotationgizmov_arcr.tp-rotationgizmov_arcr_hover{stroke:#ebd510}.tp-rotationgizmov_arcr.tp-rotationgizmov_arcr_active{stroke:#ebd510;stroke-width:2px}.tp-rotationgizmov_arcc{fill:none;stroke:transparent;stroke-width:5px;pointer-events:auto}.tp-rotationgizmov_labelcirclex{fill:#eb103f;cursor:pointer;pointer-events:auto}.tp-rotationgizmov_labelcirclex:hover{opacity:0.7}.tp-rotationgizmov_labelcircley{fill:#4eeb10;cursor:pointer;pointer-events:auto}.tp-rotationgizmov_labelcircley:hover{opacity:0.7}.tp-rotationgizmov_labelcirclez{fill:#1068eb;cursor:pointer;pointer-events:auto}.tp-rotationgizmov_labelcirclez:hover{opacity:0.7}.tp-rotationgizmov_labelcirclen{fill:var(--in-fg);cursor:pointer;pointer-events:auto}.tp-rotationgizmov_labelcirclen:hover{opacity:0.7}.tp-rotationgizmov_labeltext{fill:var(--btn-fg);stroke:var(--btn-fg);stroke-width:1px}.tp-rotationgizmov_p:focus .tp-rotationgizmov_m{background-color:var(--in-fg);border-width:0}",accept(vt,Je){const ut=Ke,Rt=rt(Je,{view:ut.required.constant("rotation"),label:ut.optional.string,picker:ut.optional.custom(rr),expanded:ut.optional.boolean,rotationMode:ut.optional.constant("quaternion"),x:ut.optional.custom(ki),y:ut.optional.custom(ki),z:ut.optional.custom(ki),w:ut.optional.custom(ki)});return Rt?{initialValue:ar(vt),params:Rt}:null},binding:{reader(vt){return Je=>ar(Je)},constraint({params:vt}){return new Gi({assembly:is,components:[or("x"in vt?vt.x:void 0),or("y"in vt?vt.y:void 0),or("z"in vt?vt.z:void 0),or("w"in vt?vt.w:void 0)]})},writer(vt){return(Je,ut)=>{Je.writeProperty("x",ut.x),Je.writeProperty("y",ut.y),Je.writeProperty("z",ut.z),Je.writeProperty("w",ut.w)}}},controller({document:vt,value:Je,constraint:ut,params:Rt,viewProps:jt}){if(!(ut instanceof Gi))throw le.shouldNeverHappen();const mn="expanded"in Rt?Rt.expanded:void 0,Vn="picker"in Rt?Rt.picker:void 0;return new wr(vt,{axes:[vr(ut.components[0]),vr(ut.components[1]),vr(ut.components[2]),vr(ut.components[3])],assembly:is,rotationMode:"quaternion",expanded:mn??!1,parser:zn,pickerLayout:Vn??"popup",value:Je,viewProps:jt})}},xr=[zr,rs];L.RotationInputPluginEuler=zr,L.RotationInputPluginQuaternion=rs,L.plugins=xr,Object.defineProperty(L,"__esModule",{value:!0})})})(tweakpanePluginRotation$1,tweakpanePluginRotation$1.exports);var tweakpanePluginRotationExports=tweakpanePluginRotation$1.exports;const tweakpanePluginRotation=getDefaultExportFromCjs(tweakpanePluginRotationExports),RotationPlugin=_mergeNamespaces({__proto__:null,default:tweakpanePluginRotation},[tweakpanePluginRotationExports]);let EventDispatcher$1=class{constructor(){Rn(this,"_listeners");Rn(this,"_fireAtStart");this._listeners={},this._fireAtStart={}}addEventListener(m,L){this._listeners===void 0&&(this._listeners={});const j=this._listeners;j[m]===void 0&&(j[m]=[]),j[m].includes(L)||j[m].push(L),this._fireAtStart[m]!=null&&L.call(this,this._fireAtStart[m])}removeEventListener(m,L){if(this._listeners===void 0)return;const ee=this._listeners[m];if(ee!==void 0){const re=ee.indexOf(L);re!==-1&&ee.splice(re,1)}}dispatchEvent(m,L,j=!1){if(j&&(this._fireAtStart[m]=L),this._listeners===void 0)return;const re=this._listeners[m];if(re!==void 0){const le=re.slice(0);for(let ve=0,ye=le.length;ve<ye;ve++)le[ve].call(this,L)}}};function addWrapperPositionFolder($,m){if(!m)return;function L(){m.classList.toggle("tweakpane--left",j.side==="left")}const j={side:localStorage.getItem("debugger-side")||"right"};L(),$.addInput(j,"side",{options:[{value:"left",text:"left"},{value:"right",text:"right"}],label:"Side"}).on("change",({value:ee})=>{L(),localStorage.setItem("debugger-side",ee.toString())})}class Debugger extends EventDispatcher$1{constructor(){super(),this._tabs=null,this._isHelpersVisible=!1,this._pane=this._createPane()}set isHelpersVisible(m){this._isHelpersVisible=m,this.dispatchEvent("helpers-visible",m)}get isHelpersVisible(){return this._isHelpersVisible}get pane(){return this._pane}addTab(m){this._tabs||(this._tabs=this._createTabs()),this._tabs.addPage({title:m}),this._removeTabPlaceholder()}gotoTab(m){this._tabs.pages.forEach(L=>{L.title===m&&(L.selected=!0)})}removeTabs(){var m;(m=this._tabs)==null||m.dispose(),this._tabs=null}addFolder(m){const{parent:L}=m,j=JSON.parse(localStorage.getItem(`debugger-folder-${m.title}-expanded`));j!==null?m.expanded=j:m.expanded=!1;let ee;if(L){let re;typeof L=="string"?re=this._getTab(L):re=L,ee=re.addFolder(m)}else ee=this._pane.addFolder(m);return ee.on("fold",({expanded:re,target:le})=>{localStorage.setItem(`debugger-folder-${le.title}-expanded`,re)}),ee}_createPane(){if(!document.querySelector(".tweakpane")){const j=document.createElement("div");j.classList.add("tweakpane"),document.body.appendChild(j)}const m=typeof document<"u"&&document.querySelector(".tweakpane"),L=new tweakpaneExports.Pane({title:"Debugger",container:m,expanded:JSON.parse(localStorage.getItem("debugger-expanded"))}).on("fold",({expanded:j})=>{localStorage.setItem("debugger-expanded",j)});return L.registerPlugin(EssentialsPlugin),L.registerPlugin(FileImportPlugin),L.registerPlugin(RotationPlugin),addWrapperPositionFolder(L,m),L}_createTabs(){this._isTabPlaceholderRemoved=!1;const m=this._pane.addTab({pages:[{title:""}]});return m.on("select",L=>{this.dispatchEvent("tab:change",L.target.pages[L.index].title)}),m}_removeTabPlaceholder(){this._isTabPlaceholderRemoved||(this._tabs.removePage(0),this._isTabPlaceholderRemoved=!0)}_getTab(m){const L=this._tabs.pages;for(let j=0,ee=L.length;j<ee;j++)if(L[j].title===m)return L[j];return null}}let debuggerInstance=null;GLOBAL.isDevelopment&&(debuggerInstance=new Debugger);const Debugger$1=debuggerInstance;class LUT3dlLoader extends Loader$1{load(m,L,j,ee){const re=new FileLoader(this.manager);re.setPath(this.path),re.setResponseType("text"),re.load(m,le=>{try{L(this.parse(le))}catch(ve){ee?ee(ve):console.error(ve),this.manager.itemError(m)}},j,ee)}parse(m){m=m.replace(/^#.*?(\n|\r)/gm,"").replace(/^\s*?(\n|\r)/gm,"").trim();const L=m.split(/[\n\r]+/g),ee=L[0].trim().split(/\s+/g).map(Be=>parseFloat(Be)).length,re=new Array(ee*ee*ee*4);let le=0,ve=0;for(let Be=1,ke=L.length;Be<ke;Be++){const Oe=L[Be].trim().split(/\s/g),Ne=parseFloat(Oe[0]),ze=parseFloat(Oe[1]),$e=parseFloat(Oe[2]);ve=Math.max(ve,Ne,ze,$e);const He=le%ee,We=Math.floor(le/ee)%ee,qe=Math.floor(le/(ee*ee))%ee,Ye=He*ee*ee+We*ee+qe;re[4*Ye+0]=Ne,re[4*Ye+1]=ze,re[4*Ye+2]=$e,re[4*Ye+3]=1,le+=1}const ye=Math.ceil(Math.log2(ve)),Ee=Math.pow(2,ye);for(let Be=0,ke=re.length;Be<ke;Be+=4){const Fe=re[Be+0],Oe=re[Be+1],Ne=re[Be+2];re[Be+0]=255*Fe/Ee,re[Be+1]=255*Oe/Ee,re[Be+2]=255*Ne/Ee}const Me=new Uint8Array(re),Ce=new DataTexture;Ce.image.data=Me,Ce.image.width=ee,Ce.image.height=ee*ee,Ce.format=RGBAFormat,Ce.type=UnsignedByteType,Ce.magFilter=LinearFilter,Ce.minFilter=LinearFilter,Ce.wrapS=ClampToEdgeWrapping,Ce.wrapT=ClampToEdgeWrapping,Ce.generateMipmaps=!1,Ce.needsUpdate=!0;const De=new Data3DTexture;return De.image.data=Me,De.image.width=ee,De.image.height=ee,De.image.depth=ee,De.format=RGBAFormat,De.type=UnsignedByteType,De.magFilter=LinearFilter,De.minFilter=LinearFilter,De.wrapS=ClampToEdgeWrapping,De.wrapT=ClampToEdgeWrapping,De.wrapR=ClampToEdgeWrapping,De.generateMipmaps=!1,De.needsUpdate=!0,{size:ee,texture:Ce,texture3D:De}}}var define_process_env_default$1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const stringToByteArray$1=function($){const m=[];let L=0;for(let j=0;j<$.length;j++){let ee=$.charCodeAt(j);ee<128?m[L++]=ee:ee<2048?(m[L++]=ee>>6|192,m[L++]=ee&63|128):(ee&64512)===55296&&j+1<$.length&&($.charCodeAt(j+1)&64512)===56320?(ee=65536+((ee&1023)<<10)+($.charCodeAt(++j)&1023),m[L++]=ee>>18|240,m[L++]=ee>>12&63|128,m[L++]=ee>>6&63|128,m[L++]=ee&63|128):(m[L++]=ee>>12|224,m[L++]=ee>>6&63|128,m[L++]=ee&63|128)}return m},byteArrayToString=function($){const m=[];let L=0,j=0;for(;L<$.length;){const ee=$[L++];if(ee<128)m[j++]=String.fromCharCode(ee);else if(ee>191&&ee<224){const re=$[L++];m[j++]=String.fromCharCode((ee&31)<<6|re&63)}else if(ee>239&&ee<365){const re=$[L++],le=$[L++],ve=$[L++],ye=((ee&7)<<18|(re&63)<<12|(le&63)<<6|ve&63)-65536;m[j++]=String.fromCharCode(55296+(ye>>10)),m[j++]=String.fromCharCode(56320+(ye&1023))}else{const re=$[L++],le=$[L++];m[j++]=String.fromCharCode((ee&15)<<12|(re&63)<<6|le&63)}}return m.join("")},base64={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray($,m){if(!Array.isArray($))throw Error("encodeByteArray takes an array as a parameter");this.init_();const L=m?this.byteToCharMapWebSafe_:this.byteToCharMap_,j=[];for(let ee=0;ee<$.length;ee+=3){const re=$[ee],le=ee+1<$.length,ve=le?$[ee+1]:0,ye=ee+2<$.length,Ee=ye?$[ee+2]:0,Me=re>>2,Ce=(re&3)<<4|ve>>4;let De=(ve&15)<<2|Ee>>6,Be=Ee&63;ye||(Be=64,le||(De=64)),j.push(L[Me],L[Ce],L[De],L[Be])}return j.join("")},encodeString($,m){return this.HAS_NATIVE_SUPPORT&&!m?btoa($):this.encodeByteArray(stringToByteArray$1($),m)},decodeString($,m){return this.HAS_NATIVE_SUPPORT&&!m?atob($):byteArrayToString(this.decodeStringToByteArray($,m))},decodeStringToByteArray($,m){this.init_();const L=m?this.charToByteMapWebSafe_:this.charToByteMap_,j=[];for(let ee=0;ee<$.length;){const re=L[$.charAt(ee++)],ve=ee<$.length?L[$.charAt(ee)]:0;++ee;const Ee=ee<$.length?L[$.charAt(ee)]:64;++ee;const Ce=ee<$.length?L[$.charAt(ee)]:64;if(++ee,re==null||ve==null||Ee==null||Ce==null)throw new DecodeBase64StringError;const De=re<<2|ve>>4;if(j.push(De),Ee!==64){const Be=ve<<4&240|Ee>>2;if(j.push(Be),Ce!==64){const ke=Ee<<6&192|Ce;j.push(ke)}}}return j},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let $=0;$<this.ENCODED_VALS.length;$++)this.byteToCharMap_[$]=this.ENCODED_VALS.charAt($),this.charToByteMap_[this.byteToCharMap_[$]]=$,this.byteToCharMapWebSafe_[$]=this.ENCODED_VALS_WEBSAFE.charAt($),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[$]]=$,$>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt($)]=$,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt($)]=$)}}};class DecodeBase64StringError extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const base64Encode=function($){const m=stringToByteArray$1($);return base64.encodeByteArray(m,!0)},base64urlEncodeWithoutPadding=function($){return base64Encode($).replace(/\./g,"")},base64Decode=function($){try{return base64.decodeString($,!0)}catch(m){console.error("base64Decode failed: ",m)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getGlobal(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const getDefaultsFromGlobal=()=>getGlobal().__FIREBASE_DEFAULTS__,getDefaultsFromEnvVariable=()=>{if(typeof process>"u"||typeof define_process_env_default$1>"u")return;const $=define_process_env_default$1.__FIREBASE_DEFAULTS__;if($)return JSON.parse($)},getDefaultsFromCookie=()=>{if(typeof document>"u")return;let $;try{$=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const m=$&&base64Decode($[1]);return m&&JSON.parse(m)},getDefaults=()=>{try{return getDefaultsFromGlobal()||getDefaultsFromEnvVariable()||getDefaultsFromCookie()}catch($){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${$}`);return}},getDefaultEmulatorHost=$=>{var m,L;return(L=(m=getDefaults())===null||m===void 0?void 0:m.emulatorHosts)===null||L===void 0?void 0:L[$]},getDefaultEmulatorHostnameAndPort=$=>{const m=getDefaultEmulatorHost($);if(!m)return;const L=m.lastIndexOf(":");if(L<=0||L+1===m.length)throw new Error(`Invalid host ${m} with no separate hostname and port!`);const j=parseInt(m.substring(L+1),10);return m[0]==="["?[m.substring(1,L-1),j]:[m.substring(0,L),j]},getDefaultAppConfig=()=>{var $;return($=getDefaults())===null||$===void 0?void 0:$.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Deferred{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((m,L)=>{this.resolve=m,this.reject=L})}wrapCallback(m){return(L,j)=>{L?this.reject(L):this.resolve(j),typeof m=="function"&&(this.promise.catch(()=>{}),m.length===1?m(L):m(L,j))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function createMockUserToken($,m){if($.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const L={alg:"none",type:"JWT"},j=m||"demo-project",ee=$.iat||0,re=$.sub||$.user_id;if(!re)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const le=Object.assign({iss:`https://securetoken.google.com/${j}`,aud:j,iat:ee,exp:ee+3600,auth_time:ee,sub:re,user_id:re,firebase:{sign_in_provider:"custom",identities:{}}},$);return[base64urlEncodeWithoutPadding(JSON.stringify(L)),base64urlEncodeWithoutPadding(JSON.stringify(le)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getUA(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function isNode(){var $;const m=($=getDefaults())===null||$===void 0?void 0:$.forceEnvironment;if(m==="node")return!0;if(m==="browser")return!1;try{return Object.prototype.toString.call(globalThis.process)==="[object process]"}catch{return!1}}function isSafari(){return!isNode()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function isIndexedDBAvailable(){try{return typeof indexedDB=="object"}catch{return!1}}function validateIndexedDBOpenable(){return new Promise(($,m)=>{try{let L=!0;const j="validate-browser-context-for-indexeddb-analytics-module",ee=self.indexedDB.open(j);ee.onsuccess=()=>{ee.result.close(),L||self.indexedDB.deleteDatabase(j),$(!0)},ee.onupgradeneeded=()=>{L=!1},ee.onerror=()=>{var re;m(((re=ee.error)===null||re===void 0?void 0:re.message)||"")}}catch(L){m(L)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERROR_NAME="FirebaseError";class FirebaseError extends Error{constructor(m,L,j){super(L),this.code=m,this.customData=j,this.name=ERROR_NAME,Object.setPrototypeOf(this,FirebaseError.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ErrorFactory.prototype.create)}}class ErrorFactory{constructor(m,L,j){this.service=m,this.serviceName=L,this.errors=j}create(m,...L){const j=L[0]||{},ee=`${this.service}/${m}`,re=this.errors[m],le=re?replaceTemplate(re,j):"Error",ve=`${this.serviceName}: ${le} (${ee}).`;return new FirebaseError(ee,ve,j)}}function replaceTemplate($,m){return $.replace(PATTERN,(L,j)=>{const ee=m[j];return ee!=null?String(ee):`<${j}?>`})}const PATTERN=/\{\$([^}]+)}/g;function deepEqual($,m){if($===m)return!0;const L=Object.keys($),j=Object.keys(m);for(const ee of L){if(!j.includes(ee))return!1;const re=$[ee],le=m[ee];if(isObject$2(re)&&isObject$2(le)){if(!deepEqual(re,le))return!1}else if(re!==le)return!1}for(const ee of j)if(!L.includes(ee))return!1;return!0}function isObject$2($){return $!==null&&typeof $=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getModularInstance($){return $&&$._delegate?$._delegate:$}class Component{constructor(m,L,j){this.name=m,this.instanceFactory=L,this.type=j,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(m){return this.instantiationMode=m,this}setMultipleInstances(m){return this.multipleInstances=m,this}setServiceProps(m){return this.serviceProps=m,this}setInstanceCreatedCallback(m){return this.onInstanceCreated=m,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME$1="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Provider{constructor(m,L){this.name=m,this.container=L,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(m){const L=this.normalizeInstanceIdentifier(m);if(!this.instancesDeferred.has(L)){const j=new Deferred;if(this.instancesDeferred.set(L,j),this.isInitialized(L)||this.shouldAutoInitialize())try{const ee=this.getOrInitializeService({instanceIdentifier:L});ee&&j.resolve(ee)}catch{}}return this.instancesDeferred.get(L).promise}getImmediate(m){var L;const j=this.normalizeInstanceIdentifier(m==null?void 0:m.identifier),ee=(L=m==null?void 0:m.optional)!==null&&L!==void 0?L:!1;if(this.isInitialized(j)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:j})}catch(re){if(ee)return null;throw re}else{if(ee)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(m){if(m.name!==this.name)throw Error(`Mismatching Component ${m.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=m,!!this.shouldAutoInitialize()){if(isComponentEager(m))try{this.getOrInitializeService({instanceIdentifier:DEFAULT_ENTRY_NAME$1})}catch{}for(const[L,j]of this.instancesDeferred.entries()){const ee=this.normalizeInstanceIdentifier(L);try{const re=this.getOrInitializeService({instanceIdentifier:ee});j.resolve(re)}catch{}}}}clearInstance(m=DEFAULT_ENTRY_NAME$1){this.instancesDeferred.delete(m),this.instancesOptions.delete(m),this.instances.delete(m)}async delete(){const m=Array.from(this.instances.values());await Promise.all([...m.filter(L=>"INTERNAL"in L).map(L=>L.INTERNAL.delete()),...m.filter(L=>"_delete"in L).map(L=>L._delete())])}isComponentSet(){return this.component!=null}isInitialized(m=DEFAULT_ENTRY_NAME$1){return this.instances.has(m)}getOptions(m=DEFAULT_ENTRY_NAME$1){return this.instancesOptions.get(m)||{}}initialize(m={}){const{options:L={}}=m,j=this.normalizeInstanceIdentifier(m.instanceIdentifier);if(this.isInitialized(j))throw Error(`${this.name}(${j}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ee=this.getOrInitializeService({instanceIdentifier:j,options:L});for(const[re,le]of this.instancesDeferred.entries()){const ve=this.normalizeInstanceIdentifier(re);j===ve&&le.resolve(ee)}return ee}onInit(m,L){var j;const ee=this.normalizeInstanceIdentifier(L),re=(j=this.onInitCallbacks.get(ee))!==null&&j!==void 0?j:new Set;re.add(m),this.onInitCallbacks.set(ee,re);const le=this.instances.get(ee);return le&&m(le,ee),()=>{re.delete(m)}}invokeOnInitCallbacks(m,L){const j=this.onInitCallbacks.get(L);if(j)for(const ee of j)try{ee(m,L)}catch{}}getOrInitializeService({instanceIdentifier:m,options:L={}}){let j=this.instances.get(m);if(!j&&this.component&&(j=this.component.instanceFactory(this.container,{instanceIdentifier:normalizeIdentifierForFactory(m),options:L}),this.instances.set(m,j),this.instancesOptions.set(m,L),this.invokeOnInitCallbacks(j,m),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,m,j)}catch{}return j||null}normalizeInstanceIdentifier(m=DEFAULT_ENTRY_NAME$1){return this.component?this.component.multipleInstances?m:DEFAULT_ENTRY_NAME$1:m}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function normalizeIdentifierForFactory($){return $===DEFAULT_ENTRY_NAME$1?void 0:$}function isComponentEager($){return $.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ComponentContainer{constructor(m){this.name=m,this.providers=new Map}addComponent(m){const L=this.getProvider(m.name);if(L.isComponentSet())throw new Error(`Component ${m.name} has already been registered with ${this.name}`);L.setComponent(m)}addOrOverwriteComponent(m){this.getProvider(m.name).isComponentSet()&&this.providers.delete(m.name),this.addComponent(m)}getProvider(m){if(this.providers.has(m))return this.providers.get(m);const L=new Provider(m,this);return this.providers.set(m,L),L}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var LogLevel;(function($){$[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT"})(LogLevel||(LogLevel={}));const levelStringToEnum={debug:LogLevel.DEBUG,verbose:LogLevel.VERBOSE,info:LogLevel.INFO,warn:LogLevel.WARN,error:LogLevel.ERROR,silent:LogLevel.SILENT},defaultLogLevel=LogLevel.INFO,ConsoleMethod={[LogLevel.DEBUG]:"log",[LogLevel.VERBOSE]:"log",[LogLevel.INFO]:"info",[LogLevel.WARN]:"warn",[LogLevel.ERROR]:"error"},defaultLogHandler=($,m,...L)=>{if(m<$.logLevel)return;const j=new Date().toISOString(),ee=ConsoleMethod[m];if(ee)console[ee](`[${j}]  ${$.name}:`,...L);else throw new Error(`Attempted to log a message with an invalid logType (value: ${m})`)};class Logger{constructor(m){this.name=m,this._logLevel=defaultLogLevel,this._logHandler=defaultLogHandler,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(m){if(!(m in LogLevel))throw new TypeError(`Invalid value "${m}" assigned to \`logLevel\``);this._logLevel=m}setLogLevel(m){this._logLevel=typeof m=="string"?levelStringToEnum[m]:m}get logHandler(){return this._logHandler}set logHandler(m){if(typeof m!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=m}get userLogHandler(){return this._userLogHandler}set userLogHandler(m){this._userLogHandler=m}debug(...m){this._userLogHandler&&this._userLogHandler(this,LogLevel.DEBUG,...m),this._logHandler(this,LogLevel.DEBUG,...m)}log(...m){this._userLogHandler&&this._userLogHandler(this,LogLevel.VERBOSE,...m),this._logHandler(this,LogLevel.VERBOSE,...m)}info(...m){this._userLogHandler&&this._userLogHandler(this,LogLevel.INFO,...m),this._logHandler(this,LogLevel.INFO,...m)}warn(...m){this._userLogHandler&&this._userLogHandler(this,LogLevel.WARN,...m),this._logHandler(this,LogLevel.WARN,...m)}error(...m){this._userLogHandler&&this._userLogHandler(this,LogLevel.ERROR,...m),this._logHandler(this,LogLevel.ERROR,...m)}}const instanceOfAny=($,m)=>m.some(L=>$ instanceof L);let idbProxyableTypes,cursorAdvanceMethods;function getIdbProxyableTypes(){return idbProxyableTypes||(idbProxyableTypes=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function getCursorAdvanceMethods(){return cursorAdvanceMethods||(cursorAdvanceMethods=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cursorRequestMap=new WeakMap,transactionDoneMap=new WeakMap,transactionStoreNamesMap=new WeakMap,transformCache=new WeakMap,reverseTransformCache=new WeakMap;function promisifyRequest($){const m=new Promise((L,j)=>{const ee=()=>{$.removeEventListener("success",re),$.removeEventListener("error",le)},re=()=>{L(wrap$1($.result)),ee()},le=()=>{j($.error),ee()};$.addEventListener("success",re),$.addEventListener("error",le)});return m.then(L=>{L instanceof IDBCursor&&cursorRequestMap.set(L,$)}).catch(()=>{}),reverseTransformCache.set(m,$),m}function cacheDonePromiseForTransaction($){if(transactionDoneMap.has($))return;const m=new Promise((L,j)=>{const ee=()=>{$.removeEventListener("complete",re),$.removeEventListener("error",le),$.removeEventListener("abort",le)},re=()=>{L(),ee()},le=()=>{j($.error||new DOMException("AbortError","AbortError")),ee()};$.addEventListener("complete",re),$.addEventListener("error",le),$.addEventListener("abort",le)});transactionDoneMap.set($,m)}let idbProxyTraps={get($,m,L){if($ instanceof IDBTransaction){if(m==="done")return transactionDoneMap.get($);if(m==="objectStoreNames")return $.objectStoreNames||transactionStoreNamesMap.get($);if(m==="store")return L.objectStoreNames[1]?void 0:L.objectStore(L.objectStoreNames[0])}return wrap$1($[m])},set($,m,L){return $[m]=L,!0},has($,m){return $ instanceof IDBTransaction&&(m==="done"||m==="store")?!0:m in $}};function replaceTraps($){idbProxyTraps=$(idbProxyTraps)}function wrapFunction($){return $===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(m,...L){const j=$.call(unwrap(this),m,...L);return transactionStoreNamesMap.set(j,m.sort?m.sort():[m]),wrap$1(j)}:getCursorAdvanceMethods().includes($)?function(...m){return $.apply(unwrap(this),m),wrap$1(cursorRequestMap.get(this))}:function(...m){return wrap$1($.apply(unwrap(this),m))}}function transformCachableValue($){return typeof $=="function"?wrapFunction($):($ instanceof IDBTransaction&&cacheDonePromiseForTransaction($),instanceOfAny($,getIdbProxyableTypes())?new Proxy($,idbProxyTraps):$)}function wrap$1($){if($ instanceof IDBRequest)return promisifyRequest($);if(transformCache.has($))return transformCache.get($);const m=transformCachableValue($);return m!==$&&(transformCache.set($,m),reverseTransformCache.set(m,$)),m}const unwrap=$=>reverseTransformCache.get($);function openDB($,m,{blocked:L,upgrade:j,blocking:ee,terminated:re}={}){const le=indexedDB.open($,m),ve=wrap$1(le);return j&&le.addEventListener("upgradeneeded",ye=>{j(wrap$1(le.result),ye.oldVersion,ye.newVersion,wrap$1(le.transaction),ye)}),L&&le.addEventListener("blocked",ye=>L(ye.oldVersion,ye.newVersion,ye)),ve.then(ye=>{re&&ye.addEventListener("close",()=>re()),ee&&ye.addEventListener("versionchange",Ee=>ee(Ee.oldVersion,Ee.newVersion,Ee))}).catch(()=>{}),ve}const readMethods=["get","getKey","getAll","getAllKeys","count"],writeMethods=["put","add","delete","clear"],cachedMethods=new Map;function getMethod($,m){if(!($ instanceof IDBDatabase&&!(m in $)&&typeof m=="string"))return;if(cachedMethods.get(m))return cachedMethods.get(m);const L=m.replace(/FromIndex$/,""),j=m!==L,ee=writeMethods.includes(L);if(!(L in(j?IDBIndex:IDBObjectStore).prototype)||!(ee||readMethods.includes(L)))return;const re=async function(le,...ve){const ye=this.transaction(le,ee?"readwrite":"readonly");let Ee=ye.store;return j&&(Ee=Ee.index(ve.shift())),(await Promise.all([Ee[L](...ve),ee&&ye.done]))[0]};return cachedMethods.set(m,re),re}replaceTraps($=>({...$,get:(m,L,j)=>getMethod(m,L)||$.get(m,L,j),has:(m,L)=>!!getMethod(m,L)||$.has(m,L)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PlatformLoggerServiceImpl{constructor(m){this.container=m}getPlatformInfoString(){return this.container.getProviders().map(L=>{if(isVersionServiceProvider(L)){const j=L.getImmediate();return`${j.library}/${j.version}`}else return null}).filter(L=>L).join(" ")}}function isVersionServiceProvider($){const m=$.getComponent();return(m==null?void 0:m.type)==="VERSION"}const name$o="@firebase/app",version$1="0.10.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logger=new Logger("@firebase/app"),name$n="@firebase/app-compat",name$m="@firebase/analytics-compat",name$l="@firebase/analytics",name$k="@firebase/app-check-compat",name$j="@firebase/app-check",name$i="@firebase/auth",name$h="@firebase/auth-compat",name$g="@firebase/database",name$f="@firebase/database-compat",name$e="@firebase/functions",name$d="@firebase/functions-compat",name$c="@firebase/installations",name$b="@firebase/installations-compat",name$a="@firebase/messaging",name$9="@firebase/messaging-compat",name$8="@firebase/performance",name$7="@firebase/performance-compat",name$6="@firebase/remote-config",name$5="@firebase/remote-config-compat",name$4="@firebase/storage",name$3="@firebase/storage-compat",name$2="@firebase/firestore",name$1="@firebase/firestore-compat",name$p="firebase",version$2="10.11.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME="[DEFAULT]",PLATFORM_LOG_STRING={[name$o]:"fire-core",[name$n]:"fire-core-compat",[name$l]:"fire-analytics",[name$m]:"fire-analytics-compat",[name$j]:"fire-app-check",[name$k]:"fire-app-check-compat",[name$i]:"fire-auth",[name$h]:"fire-auth-compat",[name$g]:"fire-rtdb",[name$f]:"fire-rtdb-compat",[name$e]:"fire-fn",[name$d]:"fire-fn-compat",[name$c]:"fire-iid",[name$b]:"fire-iid-compat",[name$a]:"fire-fcm",[name$9]:"fire-fcm-compat",[name$8]:"fire-perf",[name$7]:"fire-perf-compat",[name$6]:"fire-rc",[name$5]:"fire-rc-compat",[name$4]:"fire-gcs",[name$3]:"fire-gcs-compat",[name$2]:"fire-fst",[name$1]:"fire-fst-compat","fire-js":"fire-js",[name$p]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _apps=new Map,_serverApps=new Map,_components=new Map;function _addComponent($,m){try{$.container.addComponent(m)}catch(L){logger.debug(`Component ${m.name} failed to register with FirebaseApp ${$.name}`,L)}}function _registerComponent($){const m=$.name;if(_components.has(m))return logger.debug(`There were multiple attempts to register component ${m}.`),!1;_components.set(m,$);for(const L of _apps.values())_addComponent(L,$);for(const L of _serverApps.values())_addComponent(L,$);return!0}function _getProvider($,m){const L=$.container.getProvider("heartbeat").getImmediate({optional:!0});return L&&L.triggerHeartbeat(),$.container.getProvider(m)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERRORS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ERROR_FACTORY=new ErrorFactory("app","Firebase",ERRORS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FirebaseAppImpl{constructor(m,L,j){this._isDeleted=!1,this._options=Object.assign({},m),this._config=Object.assign({},L),this._name=L.name,this._automaticDataCollectionEnabled=L.automaticDataCollectionEnabled,this._container=j,this.container.addComponent(new Component("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(m){this.checkDestroyed(),this._automaticDataCollectionEnabled=m}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(m){this._isDeleted=m}checkDestroyed(){if(this.isDeleted)throw ERROR_FACTORY.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SDK_VERSION=version$2;function initializeApp($,m={}){let L=$;typeof m!="object"&&(m={name:m});const j=Object.assign({name:DEFAULT_ENTRY_NAME,automaticDataCollectionEnabled:!1},m),ee=j.name;if(typeof ee!="string"||!ee)throw ERROR_FACTORY.create("bad-app-name",{appName:String(ee)});if(L||(L=getDefaultAppConfig()),!L)throw ERROR_FACTORY.create("no-options");const re=_apps.get(ee);if(re){if(deepEqual(L,re.options)&&deepEqual(j,re.config))return re;throw ERROR_FACTORY.create("duplicate-app",{appName:ee})}const le=new ComponentContainer(ee);for(const ye of _components.values())le.addComponent(ye);const ve=new FirebaseAppImpl(L,j,le);return _apps.set(ee,ve),ve}function getApp($=DEFAULT_ENTRY_NAME){const m=_apps.get($);if(!m&&$===DEFAULT_ENTRY_NAME&&getDefaultAppConfig())return initializeApp();if(!m)throw ERROR_FACTORY.create("no-app",{appName:$});return m}function registerVersion($,m,L){var j;let ee=(j=PLATFORM_LOG_STRING[$])!==null&&j!==void 0?j:$;L&&(ee+=`-${L}`);const re=ee.match(/\s|\//),le=m.match(/\s|\//);if(re||le){const ve=[`Unable to register library "${ee}" with version "${m}":`];re&&ve.push(`library name "${ee}" contains illegal characters (whitespace or "/")`),re&&le&&ve.push("and"),le&&ve.push(`version name "${m}" contains illegal characters (whitespace or "/")`),logger.warn(ve.join(" "));return}_registerComponent(new Component(`${ee}-version`,()=>({library:ee,version:m}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME="firebase-heartbeat-database",DB_VERSION=1,STORE_NAME="firebase-heartbeat-store";let dbPromise=null;function getDbPromise(){return dbPromise||(dbPromise=openDB(DB_NAME,DB_VERSION,{upgrade:($,m)=>{switch(m){case 0:try{$.createObjectStore(STORE_NAME)}catch(L){console.warn(L)}}}}).catch($=>{throw ERROR_FACTORY.create("idb-open",{originalErrorMessage:$.message})})),dbPromise}async function readHeartbeatsFromIndexedDB($){try{const L=(await getDbPromise()).transaction(STORE_NAME),j=await L.objectStore(STORE_NAME).get(computeKey($));return await L.done,j}catch(m){if(m instanceof FirebaseError)logger.warn(m.message);else{const L=ERROR_FACTORY.create("idb-get",{originalErrorMessage:m==null?void 0:m.message});logger.warn(L.message)}}}async function writeHeartbeatsToIndexedDB($,m){try{const j=(await getDbPromise()).transaction(STORE_NAME,"readwrite");await j.objectStore(STORE_NAME).put(m,computeKey($)),await j.done}catch(L){if(L instanceof FirebaseError)logger.warn(L.message);else{const j=ERROR_FACTORY.create("idb-set",{originalErrorMessage:L==null?void 0:L.message});logger.warn(j.message)}}}function computeKey($){return`${$.name}!${$.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MAX_HEADER_BYTES=1024,STORED_HEARTBEAT_RETENTION_MAX_MILLIS=30*24*60*60*1e3;class HeartbeatServiceImpl{constructor(m){this.container=m,this._heartbeatsCache=null;const L=this.container.getProvider("app").getImmediate();this._storage=new HeartbeatStorageImpl(L),this._heartbeatsCachePromise=this._storage.read().then(j=>(this._heartbeatsCache=j,j))}async triggerHeartbeat(){var m,L;const ee=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),re=getUTCDateString();if(!(((m=this._heartbeatsCache)===null||m===void 0?void 0:m.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((L=this._heartbeatsCache)===null||L===void 0?void 0:L.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===re||this._heartbeatsCache.heartbeats.some(le=>le.date===re)))return this._heartbeatsCache.heartbeats.push({date:re,agent:ee}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(le=>{const ve=new Date(le.date).valueOf();return Date.now()-ve<=STORED_HEARTBEAT_RETENTION_MAX_MILLIS}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var m;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((m=this._heartbeatsCache)===null||m===void 0?void 0:m.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const L=getUTCDateString(),{heartbeatsToSend:j,unsentEntries:ee}=extractHeartbeatsForHeader(this._heartbeatsCache.heartbeats),re=base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:j}));return this._heartbeatsCache.lastSentHeartbeatDate=L,ee.length>0?(this._heartbeatsCache.heartbeats=ee,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),re}}function getUTCDateString(){return new Date().toISOString().substring(0,10)}function extractHeartbeatsForHeader($,m=MAX_HEADER_BYTES){const L=[];let j=$.slice();for(const ee of $){const re=L.find(le=>le.agent===ee.agent);if(re){if(re.dates.push(ee.date),countBytes(L)>m){re.dates.pop();break}}else if(L.push({agent:ee.agent,dates:[ee.date]}),countBytes(L)>m){L.pop();break}j=j.slice(1)}return{heartbeatsToSend:L,unsentEntries:j}}class HeartbeatStorageImpl{constructor(m){this.app=m,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return isIndexedDBAvailable()?validateIndexedDBOpenable().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const L=await readHeartbeatsFromIndexedDB(this.app);return L!=null&&L.heartbeats?L:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(m){var L;if(await this._canUseIndexedDBPromise){const ee=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:(L=m.lastSentHeartbeatDate)!==null&&L!==void 0?L:ee.lastSentHeartbeatDate,heartbeats:m.heartbeats})}else return}async add(m){var L;if(await this._canUseIndexedDBPromise){const ee=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:(L=m.lastSentHeartbeatDate)!==null&&L!==void 0?L:ee.lastSentHeartbeatDate,heartbeats:[...ee.heartbeats,...m.heartbeats]})}else return}}function countBytes($){return base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:$})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function registerCoreComponents($){_registerComponent(new Component("platform-logger",m=>new PlatformLoggerServiceImpl(m),"PRIVATE")),_registerComponent(new Component("heartbeat",m=>new HeartbeatServiceImpl(m),"PRIVATE")),registerVersion(name$o,version$1,$),registerVersion(name$o,version$1,"esm2017"),registerVersion("fire-js","")}registerCoreComponents("");var name="firebase",version="10.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */registerVersion(name,version,"app");var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},k,goog=goog||{},l=commonjsGlobal||self;function aa($){var m=typeof $;return m=m!="object"?m:$?Array.isArray($)?"array":m:"null",m=="array"||m=="object"&&typeof $.length=="number"}function p$1($){var m=typeof $;return m=="object"&&$!=null||m=="function"}function ba($){return Object.prototype.hasOwnProperty.call($,ca)&&$[ca]||($[ca]=++da)}var ca="closure_uid_"+(1e9*Math.random()>>>0),da=0;function ea($,m,L){return $.call.apply($.bind,arguments)}function fa($,m,L){if(!$)throw Error();if(2<arguments.length){var j=Array.prototype.slice.call(arguments,2);return function(){var ee=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ee,j),$.apply(m,ee)}}return function(){return $.apply(m,arguments)}}function q($,m,L){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?q=ea:q=fa,q.apply(null,arguments)}function ha($,m){var L=Array.prototype.slice.call(arguments,1);return function(){var j=L.slice();return j.push.apply(j,arguments),$.apply(this,j)}}function r$5($,m){function L(){}L.prototype=m.prototype,$.$=m.prototype,$.prototype=new L,$.prototype.constructor=$,$.ac=function(j,ee,re){for(var le=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)le[ve-2]=arguments[ve];return m.prototype[ee].apply(j,le)}}function v$1(){this.s=this.s,this.o=this.o}var ia=0;v$1.prototype.s=!1;v$1.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),ia!=0)&&ba(this)};v$1.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ka=Array.prototype.indexOf?function($,m){return Array.prototype.indexOf.call($,m,void 0)}:function($,m){if(typeof $=="string")return typeof m!="string"||m.length!=1?-1:$.indexOf(m,0);for(let L=0;L<$.length;L++)if(L in $&&$[L]===m)return L;return-1};function ma($){const m=$.length;if(0<m){const L=Array(m);for(let j=0;j<m;j++)L[j]=$[j];return L}return[]}function na($,m){for(let L=1;L<arguments.length;L++){const j=arguments[L];if(aa(j)){const ee=$.length||0,re=j.length||0;$.length=ee+re;for(let le=0;le<re;le++)$[ee+le]=j[le]}else $.push(j)}}function w$1($,m){this.type=$,this.g=this.target=m,this.defaultPrevented=!1}w$1.prototype.h=function(){this.defaultPrevented=!0};var oa=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var $=!1,m=Object.defineProperty({},"passive",{get:function(){$=!0}});try{const L=()=>{};l.addEventListener("test",L,m),l.removeEventListener("test",L,m)}catch{}return $}();function x$2($){return/^[\s\xa0]*$/.test($)}function pa(){var $=l.navigator;return $&&($=$.userAgent)?$:""}function y($){return pa().indexOf($)!=-1}function qa($){return qa[" "]($),$}qa[" "]=function(){};function ra($,m){var L=sa;return Object.prototype.hasOwnProperty.call(L,$)?L[$]:L[$]=m($)}var ta=y("Opera"),z=y("Trident")||y("MSIE"),ua=y("Edge"),va=ua||z,wa=y("Gecko")&&!(pa().toLowerCase().indexOf("webkit")!=-1&&!y("Edge"))&&!(y("Trident")||y("MSIE"))&&!y("Edge"),xa=pa().toLowerCase().indexOf("webkit")!=-1&&!y("Edge");function ya(){var $=l.document;return $?$.documentMode:void 0}var za;e:{var Aa="",Ba=function(){var $=pa();if(wa)return/rv:([^\);]+)(\)|;)/.exec($);if(ua)return/Edge\/([\d\.]+)/.exec($);if(z)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec($);if(xa)return/WebKit\/(\S+)/.exec($);if(ta)return/(?:Version)[ \/]?(\S+)/.exec($)}();if(Ba&&(Aa=Ba?Ba[1]:""),z){var Ca=ya();if(Ca!=null&&Ca>parseFloat(Aa)){za=String(Ca);break e}}za=Aa}var Da;if(l.document&&z){var Ea=ya();Da=Ea||parseInt(za,10)||void 0}else Da=void 0;var Fa=Da;function A$1($,m){if(w$1.call(this,$?$.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,$){var L=this.type=$.type,j=$.changedTouches&&$.changedTouches.length?$.changedTouches[0]:null;if(this.target=$.target||$.srcElement,this.g=m,m=$.relatedTarget){if(wa){e:{try{qa(m.nodeName);var ee=!0;break e}catch{}ee=!1}ee||(m=null)}}else L=="mouseover"?m=$.fromElement:L=="mouseout"&&(m=$.toElement);this.relatedTarget=m,j?(this.clientX=j.clientX!==void 0?j.clientX:j.pageX,this.clientY=j.clientY!==void 0?j.clientY:j.pageY,this.screenX=j.screenX||0,this.screenY=j.screenY||0):(this.clientX=$.clientX!==void 0?$.clientX:$.pageX,this.clientY=$.clientY!==void 0?$.clientY:$.pageY,this.screenX=$.screenX||0,this.screenY=$.screenY||0),this.button=$.button,this.key=$.key||"",this.ctrlKey=$.ctrlKey,this.altKey=$.altKey,this.shiftKey=$.shiftKey,this.metaKey=$.metaKey,this.pointerId=$.pointerId||0,this.pointerType=typeof $.pointerType=="string"?$.pointerType:Ga[$.pointerType]||"",this.state=$.state,this.i=$,$.defaultPrevented&&A$1.$.h.call(this)}}r$5(A$1,w$1);var Ga={2:"touch",3:"pen",4:"mouse"};A$1.prototype.h=function(){A$1.$.h.call(this);var $=this.i;$.preventDefault?$.preventDefault():$.returnValue=!1};var Ha="closure_listenable_"+(1e6*Math.random()|0),Ia=0;function Ja($,m,L,j,ee){this.listener=$,this.proxy=null,this.src=m,this.type=L,this.capture=!!j,this.la=ee,this.key=++Ia,this.fa=this.ia=!1}function Ma($){$.fa=!0,$.listener=null,$.proxy=null,$.src=null,$.la=null}function Na($,m,L){for(const j in $)m.call(L,$[j],j,$)}function Oa($,m){for(const L in $)m.call(void 0,$[L],L,$)}function Pa($){const m={};for(const L in $)m[L]=$[L];return m}const Qa="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ra($,m){let L,j;for(let ee=1;ee<arguments.length;ee++){j=arguments[ee];for(L in j)$[L]=j[L];for(let re=0;re<Qa.length;re++)L=Qa[re],Object.prototype.hasOwnProperty.call(j,L)&&($[L]=j[L])}}function Sa($){this.src=$,this.g={},this.h=0}Sa.prototype.add=function($,m,L,j,ee){var re=$.toString();$=this.g[re],$||($=this.g[re]=[],this.h++);var le=Ta($,m,j,ee);return-1<le?(m=$[le],L||(m.ia=!1)):(m=new Ja(m,this.src,re,!!j,ee),m.ia=L,$.push(m)),m};function Ua($,m){var L=m.type;if(L in $.g){var j=$.g[L],ee=ka(j,m),re;(re=0<=ee)&&Array.prototype.splice.call(j,ee,1),re&&(Ma(m),$.g[L].length==0&&(delete $.g[L],$.h--))}}function Ta($,m,L,j){for(var ee=0;ee<$.length;++ee){var re=$[ee];if(!re.fa&&re.listener==m&&re.capture==!!L&&re.la==j)return ee}return-1}var Va="closure_lm_"+(1e6*Math.random()|0),Wa={};function Ya($,m,L,j,ee){if(j&&j.once)return Za($,m,L,j,ee);if(Array.isArray(m)){for(var re=0;re<m.length;re++)Ya($,m[re],L,j,ee);return null}return L=$a(L),$&&$[Ha]?$.O(m,L,p$1(j)?!!j.capture:!!j,ee):ab($,m,L,!1,j,ee)}function ab($,m,L,j,ee,re){if(!m)throw Error("Invalid event type");var le=p$1(ee)?!!ee.capture:!!ee,ve=bb($);if(ve||($[Va]=ve=new Sa($)),L=ve.add(m,L,j,le,re),L.proxy)return L;if(j=cb$1(),L.proxy=j,j.src=$,j.listener=L,$.addEventListener)oa||(ee=le),ee===void 0&&(ee=!1),$.addEventListener(m.toString(),j,ee);else if($.attachEvent)$.attachEvent(db(m.toString()),j);else if($.addListener&&$.removeListener)$.addListener(j);else throw Error("addEventListener and attachEvent are unavailable.");return L}function cb$1(){function $(L){return m.call($.src,$.listener,L)}const m=eb;return $}function Za($,m,L,j,ee){if(Array.isArray(m)){for(var re=0;re<m.length;re++)Za($,m[re],L,j,ee);return null}return L=$a(L),$&&$[Ha]?$.P(m,L,p$1(j)?!!j.capture:!!j,ee):ab($,m,L,!0,j,ee)}function fb($,m,L,j,ee){if(Array.isArray(m))for(var re=0;re<m.length;re++)fb($,m[re],L,j,ee);else j=p$1(j)?!!j.capture:!!j,L=$a(L),$&&$[Ha]?($=$.i,m=String(m).toString(),m in $.g&&(re=$.g[m],L=Ta(re,L,j,ee),-1<L&&(Ma(re[L]),Array.prototype.splice.call(re,L,1),re.length==0&&(delete $.g[m],$.h--)))):$&&($=bb($))&&(m=$.g[m.toString()],$=-1,m&&($=Ta(m,L,j,ee)),(L=-1<$?m[$]:null)&&gb(L))}function gb($){if(typeof $!="number"&&$&&!$.fa){var m=$.src;if(m&&m[Ha])Ua(m.i,$);else{var L=$.type,j=$.proxy;m.removeEventListener?m.removeEventListener(L,j,$.capture):m.detachEvent?m.detachEvent(db(L),j):m.addListener&&m.removeListener&&m.removeListener(j),(L=bb(m))?(Ua(L,$),L.h==0&&(L.src=null,m[Va]=null)):Ma($)}}}function db($){return $ in Wa?Wa[$]:Wa[$]="on"+$}function eb($,m){if($.fa)$=!0;else{m=new A$1(m,this);var L=$.listener,j=$.la||$.src;$.ia&&gb($),$=L.call(j,m)}return $}function bb($){return $=$[Va],$ instanceof Sa?$:null}var hb="__closure_events_fn_"+(1e9*Math.random()>>>0);function $a($){return typeof $=="function"?$:($[hb]||($[hb]=function(m){return $.handleEvent(m)}),$[hb])}function B$1(){v$1.call(this),this.i=new Sa(this),this.S=this,this.J=null}r$5(B$1,v$1);B$1.prototype[Ha]=!0;B$1.prototype.removeEventListener=function($,m,L,j){fb(this,$,m,L,j)};function C$2($,m){var L,j=$.J;if(j)for(L=[];j;j=j.J)L.push(j);if($=$.S,j=m.type||m,typeof m=="string")m=new w$1(m,$);else if(m instanceof w$1)m.target=m.target||$;else{var ee=m;m=new w$1(j,$),Ra(m,ee)}if(ee=!0,L)for(var re=L.length-1;0<=re;re--){var le=m.g=L[re];ee=ib(le,j,!0,m)&&ee}if(le=m.g=$,ee=ib(le,j,!0,m)&&ee,ee=ib(le,j,!1,m)&&ee,L)for(re=0;re<L.length;re++)le=m.g=L[re],ee=ib(le,j,!1,m)&&ee}B$1.prototype.N=function(){if(B$1.$.N.call(this),this.i){var $=this.i,m;for(m in $.g){for(var L=$.g[m],j=0;j<L.length;j++)Ma(L[j]);delete $.g[m],$.h--}}this.J=null};B$1.prototype.O=function($,m,L,j){return this.i.add(String($),m,!1,L,j)};B$1.prototype.P=function($,m,L,j){return this.i.add(String($),m,!0,L,j)};function ib($,m,L,j){if(m=$.i.g[String(m)],!m)return!0;m=m.concat();for(var ee=!0,re=0;re<m.length;++re){var le=m[re];if(le&&!le.fa&&le.capture==L){var ve=le.listener,ye=le.la||le.src;le.ia&&Ua($.i,le),ee=ve.call(ye,j)!==!1&&ee}}return ee&&!j.defaultPrevented}var jb=l.JSON.stringify;class kb{constructor(m,L){this.i=m,this.j=L,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function lb(){var $=mb;let m=null;return $.g&&(m=$.g,$.g=$.g.next,$.g||($.h=null),m.next=null),m}class nb{constructor(){this.h=this.g=null}add(m,L){const j=ob.get();j.set(m,L),this.h?this.h.next=j:this.g=j,this.h=j}}var ob=new kb(()=>new pb,$=>$.reset());class pb{constructor(){this.next=this.g=this.h=null}set(m,L){this.h=m,this.g=L,this.next=null}reset(){this.next=this.g=this.h=null}}function qb($){var m=1;$=$.split(":");const L=[];for(;0<m&&$.length;)L.push($.shift()),m--;return $.length&&L.push($.join(":")),L}function rb($){l.setTimeout(()=>{throw $},0)}let sb,tb=!1,mb=new nb,vb=()=>{const $=l.Promise.resolve(void 0);sb=()=>{$.then(ub)}};var ub=()=>{for(var $;$=lb();){try{$.h.call($.g)}catch(L){rb(L)}var m=ob;m.j($),100>m.h&&(m.h++,$.next=m.g,m.g=$)}tb=!1};function wb($,m){B$1.call(this),this.h=$||1,this.g=m||l,this.j=q(this.qb,this),this.l=Date.now()}r$5(wb,B$1);k=wb.prototype;k.ga=!1;k.T=null;k.qb=function(){if(this.ga){var $=Date.now()-this.l;0<$&&$<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-$):(this.T&&(this.g.clearTimeout(this.T),this.T=null),C$2(this,"tick"),this.ga&&(xb(this),this.start()))}};k.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function xb($){$.ga=!1,$.T&&($.g.clearTimeout($.T),$.T=null)}k.N=function(){wb.$.N.call(this),xb(this),delete this.g};function yb($,m,L){if(typeof $=="function")L&&($=q($,L));else if($&&typeof $.handleEvent=="function")$=q($.handleEvent,$);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:l.setTimeout($,m||0)}function zb($){$.g=yb(()=>{$.g=null,$.i&&($.i=!1,zb($))},$.j);const m=$.h;$.h=null,$.m.apply(null,m)}class Ab extends v$1{constructor(m,L){super(),this.m=m,this.j=L,this.h=null,this.i=!1,this.g=null}l(m){this.h=arguments,this.g?this.i=!0:zb(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Bb($){v$1.call(this),this.h=$,this.g={}}r$5(Bb,v$1);var Cb=[];function Eb($,m,L,j){Array.isArray(L)||(L&&(Cb[0]=L.toString()),L=Cb);for(var ee=0;ee<L.length;ee++){var re=Ya(m,L[ee],j||$.handleEvent,!1,$.h||$);if(!re)break;$.g[re.key]=re}}function Fb($){Na($.g,function(m,L){this.g.hasOwnProperty(L)&&gb(m)},$),$.g={}}Bb.prototype.N=function(){Bb.$.N.call(this),Fb(this)};Bb.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Gb(){this.g=!0}Gb.prototype.Ea=function(){this.g=!1};function Hb($,m,L,j,ee,re){$.info(function(){if($.g)if(re)for(var le="",ve=re.split("&"),ye=0;ye<ve.length;ye++){var Ee=ve[ye].split("=");if(1<Ee.length){var Me=Ee[0];Ee=Ee[1];var Ce=Me.split("_");le=2<=Ce.length&&Ce[1]=="type"?le+(Me+"="+Ee+"&"):le+(Me+"=redacted&")}}else le=null;else le=re;return"XMLHTTP REQ ("+j+") [attempt "+ee+"]: "+m+`
`+L+`
`+le})}function Ib($,m,L,j,ee,re,le){$.info(function(){return"XMLHTTP RESP ("+j+") [ attempt "+ee+"]: "+m+`
`+L+`
`+re+" "+le})}function D$1($,m,L,j){$.info(function(){return"XMLHTTP TEXT ("+m+"): "+Jb($,L)+(j?" "+j:"")})}function Kb($,m){$.info(function(){return"TIMEOUT: "+m})}Gb.prototype.info=function(){};function Jb($,m){if(!$.g)return m;if(!m)return null;try{var L=JSON.parse(m);if(L){for($=0;$<L.length;$++)if(Array.isArray(L[$])){var j=L[$];if(!(2>j.length)){var ee=j[1];if(Array.isArray(ee)&&!(1>ee.length)){var re=ee[0];if(re!="noop"&&re!="stop"&&re!="close")for(var le=1;le<ee.length;le++)ee[le]=""}}}}return jb(L)}catch{return m}}var E$1={},Lb=null;function Mb(){return Lb=Lb||new B$1}E$1.Ta="serverreachability";function Nb($){w$1.call(this,E$1.Ta,$)}r$5(Nb,w$1);function Ob($){const m=Mb();C$2(m,new Nb(m))}E$1.STAT_EVENT="statevent";function Pb($,m){w$1.call(this,E$1.STAT_EVENT,$),this.stat=m}r$5(Pb,w$1);function F$2($){const m=Mb();C$2(m,new Pb(m,$))}E$1.Ua="timingevent";function Qb($,m){w$1.call(this,E$1.Ua,$),this.size=m}r$5(Qb,w$1);function Rb($,m){if(typeof $!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){$()},m)}var Sb={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Tb={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Ub(){}Ub.prototype.h=null;function Vb($){return $.h||($.h=$.i())}function Wb(){}var Xb={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Yb(){w$1.call(this,"d")}r$5(Yb,w$1);function Zb(){w$1.call(this,"c")}r$5(Zb,w$1);var $b;function ac(){}r$5(ac,Ub);ac.prototype.g=function(){return new XMLHttpRequest};ac.prototype.i=function(){return{}};$b=new ac;function bc($,m,L,j){this.l=$,this.j=m,this.m=L,this.W=j||1,this.U=new Bb(this),this.P=cc,$=va?125:void 0,this.V=new wb($),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new dc}function dc(){this.i=null,this.g="",this.h=!1}var cc=45e3,ec$1={},fc={};k=bc.prototype;k.setTimeout=function($){this.P=$};function gc($,m,L){$.L=1,$.A=hc(G(m)),$.u=L,$.S=!0,ic($,null)}function ic($,m){$.G=Date.now(),jc($),$.B=G($.A);var L=$.B,j=$.W;Array.isArray(j)||(j=[String(j)]),kc(L.i,"t",j),$.o=0,L=$.l.J,$.h=new dc,$.g=lc($.l,L?m:null,!$.u),0<$.O&&($.M=new Ab(q($.Pa,$,$.g),$.O)),Eb($.U,$.g,"readystatechange",$.nb),m=$.I?Pa($.I):{},$.u?($.v||($.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",$.g.ha($.B,$.v,$.u,m)):($.v="GET",$.g.ha($.B,$.v,null,m)),Ob(),Hb($.j,$.v,$.B,$.m,$.W,$.u)}k.nb=function($){$=$.target;const m=this.M;m&&H($)==3?m.l():this.Pa($)};k.Pa=function($){try{if($==this.g)e:{const Me=H(this.g);var m=this.g.Ia();const Ce=this.g.da();if(!(3>Me)&&(Me!=3||va||this.g&&(this.h.h||this.g.ja()||mc(this.g)))){this.J||Me!=4||m==7||(m==8||0>=Ce?Ob(3):Ob(2)),nc(this);var L=this.g.da();this.ca=L;t:if(oc(this)){var j=mc(this.g);$="";var ee=j.length,re=H(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){I$1(this),pc(this);var le="";break t}this.h.i=new l.TextDecoder}for(m=0;m<ee;m++)this.h.h=!0,$+=this.h.i.decode(j[m],{stream:re&&m==ee-1});j.length=0,this.h.g+=$,this.o=0,le=this.h.g}else le=this.g.ja();if(this.i=L==200,Ib(this.j,this.v,this.B,this.m,this.W,Me,L),this.i){if(this.aa&&!this.K){t:{if(this.g){var ve,ye=this.g;if((ve=ye.g?ye.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x$2(ve)){var Ee=ve;break t}}Ee=null}if(L=Ee)D$1(this.j,this.m,L,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,qc(this,L);else{this.i=!1,this.s=3,F$2(12),I$1(this),pc(this);break e}}this.S?(rc(this,Me,le),va&&this.i&&Me==3&&(Eb(this.U,this.V,"tick",this.mb),this.V.start())):(D$1(this.j,this.m,le,null),qc(this,le)),Me==4&&I$1(this),this.i&&!this.J&&(Me==4?sc(this.l,this):(this.i=!1,jc(this)))}else tc(this.g),L==400&&0<le.indexOf("Unknown SID")?(this.s=3,F$2(12)):(this.s=0,F$2(13)),I$1(this),pc(this)}}}catch{}finally{}};function oc($){return $.g?$.v=="GET"&&$.L!=2&&$.l.Ha:!1}function rc($,m,L){let j=!0,ee;for(;!$.J&&$.o<L.length;)if(ee=uc($,L),ee==fc){m==4&&($.s=4,F$2(14),j=!1),D$1($.j,$.m,null,"[Incomplete Response]");break}else if(ee==ec$1){$.s=4,F$2(15),D$1($.j,$.m,L,"[Invalid Chunk]"),j=!1;break}else D$1($.j,$.m,ee,null),qc($,ee);oc($)&&$.o!=0&&($.h.g=$.h.g.slice($.o),$.o=0),m!=4||L.length!=0||$.h.h||($.s=1,F$2(16),j=!1),$.i=$.i&&j,j?0<L.length&&!$.ba&&($.ba=!0,m=$.l,m.g==$&&m.ca&&!m.M&&(m.l.info("Great, no buffering proxy detected. Bytes received: "+L.length),vc(m),m.M=!0,F$2(11))):(D$1($.j,$.m,L,"[Invalid Chunked Response]"),I$1($),pc($))}k.mb=function(){if(this.g){var $=H(this.g),m=this.g.ja();this.o<m.length&&(nc(this),rc(this,$,m),this.i&&$!=4&&jc(this))}};function uc($,m){var L=$.o,j=m.indexOf(`
`,L);return j==-1?fc:(L=Number(m.substring(L,j)),isNaN(L)?ec$1:(j+=1,j+L>m.length?fc:(m=m.slice(j,j+L),$.o=j+L,m)))}k.cancel=function(){this.J=!0,I$1(this)};function jc($){$.Y=Date.now()+$.P,wc($,$.P)}function wc($,m){if($.C!=null)throw Error("WatchDog timer not null");$.C=Rb(q($.lb,$),m)}function nc($){$.C&&(l.clearTimeout($.C),$.C=null)}k.lb=function(){this.C=null;const $=Date.now();0<=$-this.Y?(Kb(this.j,this.B),this.L!=2&&(Ob(),F$2(17)),I$1(this),this.s=2,pc(this)):wc(this,this.Y-$)};function pc($){$.l.H==0||$.J||sc($.l,$)}function I$1($){nc($);var m=$.M;m&&typeof m.sa=="function"&&m.sa(),$.M=null,xb($.V),Fb($.U),$.g&&(m=$.g,$.g=null,m.abort(),m.sa())}function qc($,m){try{var L=$.l;if(L.H!=0&&(L.g==$||xc(L.i,$))){if(!$.K&&xc(L.i,$)&&L.H==3){try{var j=L.Ja.g.parse(m)}catch{j=null}if(Array.isArray(j)&&j.length==3){var ee=j;if(ee[0]==0){e:if(!L.u){if(L.g)if(L.g.G+3e3<$.G)yc(L),zc(L);else break e;Ac(L),F$2(18)}}else L.Fa=ee[1],0<L.Fa-L.V&&37500>ee[2]&&L.G&&L.A==0&&!L.v&&(L.v=Rb(q(L.ib,L),6e3));if(1>=Bc(L.i)&&L.oa){try{L.oa()}catch{}L.oa=void 0}}else J(L,11)}else if(($.K||L.g==$)&&yc(L),!x$2(m))for(ee=L.Ja.g.parse(m),m=0;m<ee.length;m++){let Ee=ee[m];if(L.V=Ee[0],Ee=Ee[1],L.H==2)if(Ee[0]=="c"){L.K=Ee[1],L.pa=Ee[2];const Me=Ee[3];Me!=null&&(L.ra=Me,L.l.info("VER="+L.ra));const Ce=Ee[4];Ce!=null&&(L.Ga=Ce,L.l.info("SVER="+L.Ga));const De=Ee[5];De!=null&&typeof De=="number"&&0<De&&(j=1.5*De,L.L=j,L.l.info("backChannelRequestTimeoutMs_="+j)),j=L;const Be=$.g;if(Be){const ke=Be.g?Be.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ke){var re=j.i;re.g||ke.indexOf("spdy")==-1&&ke.indexOf("quic")==-1&&ke.indexOf("h2")==-1||(re.j=re.l,re.g=new Set,re.h&&(Cc(re,re.h),re.h=null))}if(j.F){const Fe=Be.g?Be.g.getResponseHeader("X-HTTP-Session-Id"):null;Fe&&(j.Da=Fe,K(j.I,j.F,Fe))}}L.H=3,L.h&&L.h.Ba(),L.ca&&(L.S=Date.now()-$.G,L.l.info("Handshake RTT: "+L.S+"ms")),j=L;var le=$;if(j.wa=Dc(j,j.J?j.pa:null,j.Y),le.K){Ec(j.i,le);var ve=le,ye=j.L;ye&&ve.setTimeout(ye),ve.C&&(nc(ve),jc(ve)),j.g=le}else Fc(j);0<L.j.length&&Gc(L)}else Ee[0]!="stop"&&Ee[0]!="close"||J(L,7);else L.H==3&&(Ee[0]=="stop"||Ee[0]=="close"?Ee[0]=="stop"?J(L,7):Hc(L):Ee[0]!="noop"&&L.h&&L.h.Aa(Ee),L.A=0)}}Ob(4)}catch{}}function Ic($){if($.Z&&typeof $.Z=="function")return $.Z();if(typeof Map<"u"&&$ instanceof Map||typeof Set<"u"&&$ instanceof Set)return Array.from($.values());if(typeof $=="string")return $.split("");if(aa($)){for(var m=[],L=$.length,j=0;j<L;j++)m.push($[j]);return m}m=[],L=0;for(j in $)m[L++]=$[j];return m}function Jc($){if($.ta&&typeof $.ta=="function")return $.ta();if(!$.Z||typeof $.Z!="function"){if(typeof Map<"u"&&$ instanceof Map)return Array.from($.keys());if(!(typeof Set<"u"&&$ instanceof Set)){if(aa($)||typeof $=="string"){var m=[];$=$.length;for(var L=0;L<$;L++)m.push(L);return m}m=[],L=0;for(const j in $)m[L++]=j;return m}}}function Kc($,m){if($.forEach&&typeof $.forEach=="function")$.forEach(m,void 0);else if(aa($)||typeof $=="string")Array.prototype.forEach.call($,m,void 0);else for(var L=Jc($),j=Ic($),ee=j.length,re=0;re<ee;re++)m.call(void 0,j[re],L&&L[re],$)}var Lc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Mc($,m){if($){$=$.split("&");for(var L=0;L<$.length;L++){var j=$[L].indexOf("="),ee=null;if(0<=j){var re=$[L].substring(0,j);ee=$[L].substring(j+1)}else re=$[L];m(re,ee?decodeURIComponent(ee.replace(/\+/g," ")):"")}}}function M($){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,$ instanceof M){this.h=$.h,Nc(this,$.j),this.s=$.s,this.g=$.g,Oc(this,$.m),this.l=$.l;var m=$.i,L=new Pc;L.i=m.i,m.g&&(L.g=new Map(m.g),L.h=m.h),Qc(this,L),this.o=$.o}else $&&(m=String($).match(Lc))?(this.h=!1,Nc(this,m[1]||"",!0),this.s=Rc(m[2]||""),this.g=Rc(m[3]||"",!0),Oc(this,m[4]),this.l=Rc(m[5]||"",!0),Qc(this,m[6]||"",!0),this.o=Rc(m[7]||"")):(this.h=!1,this.i=new Pc(null,this.h))}M.prototype.toString=function(){var $=[],m=this.j;m&&$.push(Sc(m,Tc,!0),":");var L=this.g;return(L||m=="file")&&($.push("//"),(m=this.s)&&$.push(Sc(m,Tc,!0),"@"),$.push(encodeURIComponent(String(L)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),L=this.m,L!=null&&$.push(":",String(L))),(L=this.l)&&(this.g&&L.charAt(0)!="/"&&$.push("/"),$.push(Sc(L,L.charAt(0)=="/"?Uc:Vc,!0))),(L=this.i.toString())&&$.push("?",L),(L=this.o)&&$.push("#",Sc(L,Wc)),$.join("")};function G($){return new M($)}function Nc($,m,L){$.j=L?Rc(m,!0):m,$.j&&($.j=$.j.replace(/:$/,""))}function Oc($,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);$.m=m}else $.m=null}function Qc($,m,L){m instanceof Pc?($.i=m,Xc($.i,$.h)):(L||(m=Sc(m,Yc)),$.i=new Pc(m,$.h))}function K($,m,L){$.i.set(m,L)}function hc($){return K($,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),$}function Rc($,m){return $?m?decodeURI($.replace(/%25/g,"%2525")):decodeURIComponent($):""}function Sc($,m,L){return typeof $=="string"?($=encodeURI($).replace(m,Zc),L&&($=$.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),$):null}function Zc($){return $=$.charCodeAt(0),"%"+($>>4&15).toString(16)+($&15).toString(16)}var Tc=/[#\/\?@]/g,Vc=/[#\?:]/g,Uc=/[#\?]/g,Yc=/[#\?@]/g,Wc=/#/g;function Pc($,m){this.h=this.g=null,this.i=$||null,this.j=!!m}function N($){$.g||($.g=new Map,$.h=0,$.i&&Mc($.i,function(m,L){$.add(decodeURIComponent(m.replace(/\+/g," ")),L)}))}k=Pc.prototype;k.add=function($,m){N(this),this.i=null,$=O(this,$);var L=this.g.get($);return L||this.g.set($,L=[]),L.push(m),this.h+=1,this};function $c($,m){N($),m=O($,m),$.g.has(m)&&($.i=null,$.h-=$.g.get(m).length,$.g.delete(m))}function ad($,m){return N($),m=O($,m),$.g.has(m)}k.forEach=function($,m){N(this),this.g.forEach(function(L,j){L.forEach(function(ee){$.call(m,ee,j,this)},this)},this)};k.ta=function(){N(this);const $=Array.from(this.g.values()),m=Array.from(this.g.keys()),L=[];for(let j=0;j<m.length;j++){const ee=$[j];for(let re=0;re<ee.length;re++)L.push(m[j])}return L};k.Z=function($){N(this);let m=[];if(typeof $=="string")ad(this,$)&&(m=m.concat(this.g.get(O(this,$))));else{$=Array.from(this.g.values());for(let L=0;L<$.length;L++)m=m.concat($[L])}return m};k.set=function($,m){return N(this),this.i=null,$=O(this,$),ad(this,$)&&(this.h-=this.g.get($).length),this.g.set($,[m]),this.h+=1,this};k.get=function($,m){return $?($=this.Z($),0<$.length?String($[0]):m):m};function kc($,m,L){$c($,m),0<L.length&&($.i=null,$.g.set(O($,m),ma(L)),$.h+=L.length)}k.toString=function(){if(this.i)return this.i;if(!this.g)return"";const $=[],m=Array.from(this.g.keys());for(var L=0;L<m.length;L++){var j=m[L];const re=encodeURIComponent(String(j)),le=this.Z(j);for(j=0;j<le.length;j++){var ee=re;le[j]!==""&&(ee+="="+encodeURIComponent(String(le[j]))),$.push(ee)}}return this.i=$.join("&")};function O($,m){return m=String(m),$.j&&(m=m.toLowerCase()),m}function Xc($,m){m&&!$.j&&(N($),$.i=null,$.g.forEach(function(L,j){var ee=j.toLowerCase();j!=ee&&($c(this,j),kc(this,ee,L))},$)),$.j=m}var bd=class{constructor($,m){this.g=$,this.map=m}};function cd($){this.l=$||dd,l.PerformanceNavigationTiming?($=l.performance.getEntriesByType("navigation"),$=0<$.length&&($[0].nextHopProtocol=="hq"||$[0].nextHopProtocol=="h2")):$=!!(l.g&&l.g.Ka&&l.g.Ka()&&l.g.Ka().dc),this.j=$?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var dd=10;function ed($){return $.h?!0:$.g?$.g.size>=$.j:!1}function Bc($){return $.h?1:$.g?$.g.size:0}function xc($,m){return $.h?$.h==m:$.g?$.g.has(m):!1}function Cc($,m){$.g?$.g.add(m):$.h=m}function Ec($,m){$.h&&$.h==m?$.h=null:$.g&&$.g.has(m)&&$.g.delete(m)}cd.prototype.cancel=function(){if(this.i=fd$1(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const $ of this.g.values())$.cancel();this.g.clear()}};function fd$1($){if($.h!=null)return $.i.concat($.h.F);if($.g!=null&&$.g.size!==0){let m=$.i;for(const L of $.g.values())m=m.concat(L.F);return m}return ma($.i)}var gd=class{stringify($){return l.JSON.stringify($,void 0)}parse($){return l.JSON.parse($,void 0)}};function hd(){this.g=new gd}function id($,m,L){const j=L||"";try{Kc($,function(ee,re){let le=ee;p$1(ee)&&(le=jb(ee)),m.push(j+re+"="+encodeURIComponent(le))})}catch(ee){throw m.push(j+"type="+encodeURIComponent("_badmap")),ee}}function jd($,m){const L=new Gb;if(l.Image){const j=new Image;j.onload=ha(kd,L,j,"TestLoadImage: loaded",!0,m),j.onerror=ha(kd,L,j,"TestLoadImage: error",!1,m),j.onabort=ha(kd,L,j,"TestLoadImage: abort",!1,m),j.ontimeout=ha(kd,L,j,"TestLoadImage: timeout",!1,m),l.setTimeout(function(){j.ontimeout&&j.ontimeout()},1e4),j.src=$}else m(!1)}function kd($,m,L,j,ee){try{m.onload=null,m.onerror=null,m.onabort=null,m.ontimeout=null,ee(j)}catch{}}function ld($){this.l=$.ec||null,this.j=$.ob||!1}r$5(ld,Ub);ld.prototype.g=function(){return new md(this.l,this.j)};ld.prototype.i=function($){return function(){return $}}({});function md($,m){B$1.call(this),this.F=$,this.u=m,this.m=void 0,this.readyState=nd,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}r$5(md,B$1);var nd=0;k=md.prototype;k.open=function($,m){if(this.readyState!=nd)throw this.abort(),Error("Error reopening a connection");this.C=$,this.B=m,this.readyState=1,od(this)};k.send=function($){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.v,method:this.C,credentials:this.m,cache:void 0};$&&(m.body=$),(this.F||l).fetch(new Request(this.B,m)).then(this.$a.bind(this),this.ka.bind(this))};k.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,pd(this)),this.readyState=nd};k.$a=function($){if(this.g&&(this.l=$,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=$.headers,this.readyState=2,od(this)),this.g&&(this.readyState=3,od(this),this.g)))if(this.responseType==="arraybuffer")$.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in $){if(this.j=$.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;qd(this)}else $.text().then(this.Za.bind(this),this.ka.bind(this))};function qd($){$.j.read().then($.Xa.bind($)).catch($.ka.bind($))}k.Xa=function($){if(this.g){if(this.u&&$.value)this.response.push($.value);else if(!this.u){var m=$.value?$.value:new Uint8Array(0);(m=this.A.decode(m,{stream:!$.done}))&&(this.response=this.responseText+=m)}$.done?pd(this):od(this),this.readyState==3&&qd(this)}};k.Za=function($){this.g&&(this.response=this.responseText=$,pd(this))};k.Ya=function($){this.g&&(this.response=$,pd(this))};k.ka=function(){this.g&&pd(this)};function pd($){$.readyState=4,$.l=null,$.j=null,$.A=null,od($)}k.setRequestHeader=function($,m){this.v.append($,m)};k.getResponseHeader=function($){return this.h&&this.h.get($.toLowerCase())||""};k.getAllResponseHeaders=function(){if(!this.h)return"";const $=[],m=this.h.entries();for(var L=m.next();!L.done;)L=L.value,$.push(L[0]+": "+L[1]),L=m.next();return $.join(`\r
`)};function od($){$.onreadystatechange&&$.onreadystatechange.call($)}Object.defineProperty(md.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function($){this.m=$?"include":"same-origin"}});var rd=l.JSON.parse;function P($){B$1.call(this),this.headers=new Map,this.u=$||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=sd,this.L=this.M=!1}r$5(P,B$1);var sd="",td$1=/^https?$/i,ud=["POST","PUT"];k=P.prototype;k.Oa=function($){this.M=$};k.ha=function($,m,L,j){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+$);m=m?m.toUpperCase():"GET",this.I=$,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():$b.g(),this.C=this.u?Vb(this.u):Vb($b),this.g.onreadystatechange=q(this.La,this);try{this.G=!0,this.g.open(m,String($),!0),this.G=!1}catch(re){vd(this,re);return}if($=L||"",L=new Map(this.headers),j)if(Object.getPrototypeOf(j)===Object.prototype)for(var ee in j)L.set(ee,j[ee]);else if(typeof j.keys=="function"&&typeof j.get=="function")for(const re of j.keys())L.set(re,j.get(re));else throw Error("Unknown input type for opt_headers: "+String(j));j=Array.from(L.keys()).find(re=>re.toLowerCase()=="content-type"),ee=l.FormData&&$ instanceof l.FormData,!(0<=ka(ud,m))||j||ee||L.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[re,le]of L)this.g.setRequestHeader(re,le);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{wd(this),0<this.B&&((this.L=xd(this.g))?(this.g.timeout=this.B,this.g.ontimeout=q(this.ua,this)):this.A=yb(this.ua,this.B,this)),this.v=!0,this.g.send($),this.v=!1}catch(re){vd(this,re)}};function xd($){return z&&typeof $.timeout=="number"&&$.ontimeout!==void 0}k.ua=function(){typeof goog<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,C$2(this,"timeout"),this.abort(8))};function vd($,m){$.h=!1,$.g&&($.l=!0,$.g.abort(),$.l=!1),$.j=m,$.m=5,yd($),zd($)}function yd($){$.F||($.F=!0,C$2($,"complete"),C$2($,"error"))}k.abort=function($){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=$||7,C$2(this,"complete"),C$2(this,"abort"),zd(this))};k.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),zd(this,!0)),P.$.N.call(this)};k.La=function(){this.s||(this.G||this.v||this.l?Ad(this):this.kb())};k.kb=function(){Ad(this)};function Ad($){if($.h&&typeof goog<"u"&&(!$.C[1]||H($)!=4||$.da()!=2)){if($.v&&H($)==4)yb($.La,0,$);else if(C$2($,"readystatechange"),H($)==4){$.h=!1;try{const le=$.da();e:switch(le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var L;if(!(L=m)){var j;if(j=le===0){var ee=String($.I).match(Lc)[1]||null;!ee&&l.self&&l.self.location&&(ee=l.self.location.protocol.slice(0,-1)),j=!td$1.test(ee?ee.toLowerCase():"")}L=j}if(L)C$2($,"complete"),C$2($,"success");else{$.m=6;try{var re=2<H($)?$.g.statusText:""}catch{re=""}$.j=re+" ["+$.da()+"]",yd($)}}finally{zd($)}}}}function zd($,m){if($.g){wd($);const L=$.g,j=$.C[0]?()=>{}:null;$.g=null,$.C=null,m||C$2($,"ready");try{L.onreadystatechange=j}catch{}}}function wd($){$.g&&$.L&&($.g.ontimeout=null),$.A&&(l.clearTimeout($.A),$.A=null)}k.isActive=function(){return!!this.g};function H($){return $.g?$.g.readyState:0}k.da=function(){try{return 2<H(this)?this.g.status:-1}catch{return-1}};k.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};k.Wa=function($){if(this.g){var m=this.g.responseText;return $&&m.indexOf($)==0&&(m=m.substring($.length)),rd(m)}};function mc($){try{if(!$.g)return null;if("response"in $.g)return $.g.response;switch($.K){case sd:case"text":return $.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in $.g)return $.g.mozResponseArrayBuffer}return null}catch{return null}}function tc($){const m={};$=($.g&&2<=H($)&&$.g.getAllResponseHeaders()||"").split(`\r
`);for(let j=0;j<$.length;j++){if(x$2($[j]))continue;var L=qb($[j]);const ee=L[0];if(L=L[1],typeof L!="string")continue;L=L.trim();const re=m[ee]||[];m[ee]=re,re.push(L)}Oa(m,function(j){return j.join(", ")})}k.Ia=function(){return this.m};k.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function Bd($){let m="";return Na($,function(L,j){m+=j,m+=":",m+=L,m+=`\r
`}),m}function Cd($,m,L){e:{for(j in L){var j=!1;break e}j=!0}j||(L=Bd(L),typeof $=="string"?L!=null&&encodeURIComponent(String(L)):K($,m,L))}function Dd($,m,L){return L&&L.internalChannelParams&&L.internalChannelParams[$]||m}function Ed($){this.Ga=0,this.j=[],this.l=new Gb,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Dd("failFast",!1,$),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Dd("baseRetryDelayMs",5e3,$),this.hb=Dd("retryDelaySeedMs",1e4,$),this.eb=Dd("forwardChannelMaxRetries",2,$),this.xa=Dd("forwardChannelRequestTimeoutMs",2e4,$),this.va=$&&$.xmlHttpFactory||void 0,this.Ha=$&&$.useFetchStreams||!1,this.L=void 0,this.J=$&&$.supportsCrossDomainXhr||!1,this.K="",this.i=new cd($&&$.concurrentRequestLimit),this.Ja=new hd,this.P=$&&$.fastHandshake||!1,this.O=$&&$.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=$&&$.bc||!1,$&&$.Ea&&this.l.Ea(),$&&$.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&$&&$.detectBufferingProxy||!1,this.qa=void 0,$&&$.longPollingTimeout&&0<$.longPollingTimeout&&(this.qa=$.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}k=Ed.prototype;k.ra=8;k.H=1;function Hc($){if(Fd($),$.H==3){var m=$.W++,L=G($.I);if(K(L,"SID",$.K),K(L,"RID",m),K(L,"TYPE","terminate"),Gd($,L),m=new bc($,$.l,m),m.L=2,m.A=hc(G(L)),L=!1,l.navigator&&l.navigator.sendBeacon)try{L=l.navigator.sendBeacon(m.A.toString(),"")}catch{}!L&&l.Image&&(new Image().src=m.A,L=!0),L||(m.g=lc(m.l,null),m.g.ha(m.A)),m.G=Date.now(),jc(m)}Hd($)}function zc($){$.g&&(vc($),$.g.cancel(),$.g=null)}function Fd($){zc($),$.u&&(l.clearTimeout($.u),$.u=null),yc($),$.i.cancel(),$.m&&(typeof $.m=="number"&&l.clearTimeout($.m),$.m=null)}function Gc($){if(!ed($.i)&&!$.m){$.m=!0;var m=$.Na;sb||vb(),tb||(sb(),tb=!0),mb.add(m,$),$.C=0}}function Id($,m){return Bc($.i)>=$.i.j-($.m?1:0)?!1:$.m?($.j=m.F.concat($.j),!0):$.H==1||$.H==2||$.C>=($.cb?0:$.eb)?!1:($.m=Rb(q($.Na,$,m),Jd($,$.C)),$.C++,!0)}k.Na=function($){if(this.m)if(this.m=null,this.H==1){if(!$){this.W=Math.floor(1e5*Math.random()),$=this.W++;const ee=new bc(this,this.l,$);let re=this.s;if(this.U&&(re?(re=Pa(re),Ra(re,this.U)):re=this.U),this.o!==null||this.O||(ee.I=re,re=null),this.P)e:{for(var m=0,L=0;L<this.j.length;L++){t:{var j=this.j[L];if("__data__"in j.map&&(j=j.map.__data__,typeof j=="string")){j=j.length;break t}j=void 0}if(j===void 0)break;if(m+=j,4096<m){m=L;break e}if(m===4096||L===this.j.length-1){m=L+1;break e}}m=1e3}else m=1e3;m=Kd(this,ee,m),L=G(this.I),K(L,"RID",$),K(L,"CVER",22),this.F&&K(L,"X-HTTP-Session-Id",this.F),Gd(this,L),re&&(this.O?m="headers="+encodeURIComponent(String(Bd(re)))+"&"+m:this.o&&Cd(L,this.o,re)),Cc(this.i,ee),this.bb&&K(L,"TYPE","init"),this.P?(K(L,"$req",m),K(L,"SID","null"),ee.aa=!0,gc(ee,L,null)):gc(ee,L,m),this.H=2}}else this.H==3&&($?Ld(this,$):this.j.length==0||ed(this.i)||Ld(this))};function Ld($,m){var L;m?L=m.m:L=$.W++;const j=G($.I);K(j,"SID",$.K),K(j,"RID",L),K(j,"AID",$.V),Gd($,j),$.o&&$.s&&Cd(j,$.o,$.s),L=new bc($,$.l,L,$.C+1),$.o===null&&(L.I=$.s),m&&($.j=m.F.concat($.j)),m=Kd($,L,1e3),L.setTimeout(Math.round(.5*$.xa)+Math.round(.5*$.xa*Math.random())),Cc($.i,L),gc(L,j,m)}function Gd($,m){$.na&&Na($.na,function(L,j){K(m,j,L)}),$.h&&Kc({},function(L,j){K(m,j,L)})}function Kd($,m,L){L=Math.min($.j.length,L);var j=$.h?q($.h.Va,$.h,$):null;e:{var ee=$.j;let re=-1;for(;;){const le=["count="+L];re==-1?0<L?(re=ee[0].g,le.push("ofs="+re)):re=0:le.push("ofs="+re);let ve=!0;for(let ye=0;ye<L;ye++){let Ee=ee[ye].g;const Me=ee[ye].map;if(Ee-=re,0>Ee)re=Math.max(0,ee[ye].g-100),ve=!1;else try{id(Me,le,"req"+Ee+"_")}catch{j&&j(Me)}}if(ve){j=le.join("&");break e}}}return $=$.j.splice(0,L),m.F=$,j}function Fc($){if(!$.g&&!$.u){$.ba=1;var m=$.Ma;sb||vb(),tb||(sb(),tb=!0),mb.add(m,$),$.A=0}}function Ac($){return $.g||$.u||3<=$.A?!1:($.ba++,$.u=Rb(q($.Ma,$),Jd($,$.A)),$.A++,!0)}k.Ma=function(){if(this.u=null,Md(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var $=2*this.S;this.l.info("BP detection timer enabled: "+$),this.B=Rb(q(this.jb,this),$)}};k.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,F$2(10),zc(this),Md(this))};function vc($){$.B!=null&&(l.clearTimeout($.B),$.B=null)}function Md($){$.g=new bc($,$.l,"rpc",$.ba),$.o===null&&($.g.I=$.s),$.g.O=0;var m=G($.wa);K(m,"RID","rpc"),K(m,"SID",$.K),K(m,"AID",$.V),K(m,"CI",$.G?"0":"1"),!$.G&&$.qa&&K(m,"TO",$.qa),K(m,"TYPE","xmlhttp"),Gd($,m),$.o&&$.s&&Cd(m,$.o,$.s),$.L&&$.g.setTimeout($.L);var L=$.g;$=$.pa,L.L=1,L.A=hc(G(m)),L.u=null,L.S=!0,ic(L,$)}k.ib=function(){this.v!=null&&(this.v=null,zc(this),Ac(this),F$2(19))};function yc($){$.v!=null&&(l.clearTimeout($.v),$.v=null)}function sc($,m){var L=null;if($.g==m){yc($),vc($),$.g=null;var j=2}else if(xc($.i,m))L=m.F,Ec($.i,m),j=1;else return;if($.H!=0){if(m.i)if(j==1){L=m.u?m.u.length:0,m=Date.now()-m.G;var ee=$.C;j=Mb(),C$2(j,new Qb(j,L)),Gc($)}else Fc($);else if(ee=m.s,ee==3||ee==0&&0<m.ca||!(j==1&&Id($,m)||j==2&&Ac($)))switch(L&&0<L.length&&(m=$.i,m.i=m.i.concat(L)),ee){case 1:J($,5);break;case 4:J($,10);break;case 3:J($,6);break;default:J($,2)}}}function Jd($,m){let L=$.ab+Math.floor(Math.random()*$.hb);return $.isActive()||(L*=2),L*m}function J($,m){if($.l.info("Error code "+m),m==2){var L=null;$.h&&(L=null);var j=q($.pb,$);L||(L=new M("//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Nc(L,"https"),hc(L)),jd(L.toString(),j)}else F$2(2);$.H=0,$.h&&$.h.za(m),Hd($),Fd($)}k.pb=function($){$?(this.l.info("Successfully pinged google.com"),F$2(2)):(this.l.info("Failed to ping google.com"),F$2(1))};function Hd($){if($.H=0,$.ma=[],$.h){const m=fd$1($.i);(m.length!=0||$.j.length!=0)&&(na($.ma,m),na($.ma,$.j),$.i.i.length=0,ma($.j),$.j.length=0),$.h.ya()}}function Dc($,m,L){var j=L instanceof M?G(L):new M(L);if(j.g!="")m&&(j.g=m+"."+j.g),Oc(j,j.m);else{var ee=l.location;j=ee.protocol,m=m?m+"."+ee.hostname:ee.hostname,ee=+ee.port;var re=new M(null);j&&Nc(re,j),m&&(re.g=m),ee&&Oc(re,ee),L&&(re.l=L),j=re}return L=$.F,m=$.Da,L&&m&&K(j,L,m),K(j,"VER",$.ra),Gd($,j),j}function lc($,m,L){if(m&&!$.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=$.Ha&&!$.va?new P(new ld({ob:L})):new P($.va),m.Oa($.J),m}k.isActive=function(){return!!this.h&&this.h.isActive(this)};function Nd(){}k=Nd.prototype;k.Ba=function(){};k.Aa=function(){};k.za=function(){};k.ya=function(){};k.isActive=function(){return!0};k.Va=function(){};function Od(){if(z&&!(10<=Number(Fa)))throw Error("Environmental error: no available transport.")}Od.prototype.g=function($,m){return new Q$1($,m)};function Q$1($,m){B$1.call(this),this.g=new Ed(m),this.l=$,this.h=m&&m.messageUrlParams||null,$=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&($?$["X-Client-Protocol"]="webchannel":$={"X-Client-Protocol":"webchannel"}),this.g.s=$,$=m&&m.initMessageHeaders||null,m&&m.messageContentType&&($?$["X-WebChannel-Content-Type"]=m.messageContentType:$={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.Ca&&($?$["X-WebChannel-Client-Profile"]=m.Ca:$={"X-WebChannel-Client-Profile":m.Ca}),this.g.U=$,($=m&&m.cc)&&!x$2($)&&(this.g.o=$),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!x$2(m)&&(this.g.F=m,$=this.h,$!==null&&m in $&&($=this.h,m in $&&delete $[m])),this.j=new R(this)}r$5(Q$1,B$1);Q$1.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var $=this.g,m=this.l,L=this.h||void 0;F$2(0),$.Y=m,$.na=L||{},$.G=$.aa,$.I=Dc($,null,$.Y),Gc($)};Q$1.prototype.close=function(){Hc(this.g)};Q$1.prototype.u=function($){var m=this.g;if(typeof $=="string"){var L={};L.__data__=$,$=L}else this.v&&(L={},L.__data__=jb($),$=L);m.j.push(new bd(m.fb++,$)),m.H==3&&Gc(m)};Q$1.prototype.N=function(){this.g.h=null,delete this.j,Hc(this.g),delete this.g,Q$1.$.N.call(this)};function Pd($){Yb.call(this),$.__headers__&&(this.headers=$.__headers__,this.statusCode=$.__status__,delete $.__headers__,delete $.__status__);var m=$.__sm__;if(m){e:{for(const L in m){$=L;break e}$=void 0}(this.i=$)&&($=this.i,m=m!==null&&$ in m?m[$]:void 0),this.data=m}else this.data=$}r$5(Pd,Yb);function Qd(){Zb.call(this),this.status=1}r$5(Qd,Zb);function R($){this.g=$}r$5(R,Nd);R.prototype.Ba=function(){C$2(this.g,"a")};R.prototype.Aa=function($){C$2(this.g,new Pd($))};R.prototype.za=function($){C$2(this.g,new Qd)};R.prototype.ya=function(){C$2(this.g,"b")};function Rd(){this.blockSize=-1}function S$1(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}r$5(S$1,Rd);S$1.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Sd($,m,L){L||(L=0);var j=Array(16);if(typeof m=="string")for(var ee=0;16>ee;++ee)j[ee]=m.charCodeAt(L++)|m.charCodeAt(L++)<<8|m.charCodeAt(L++)<<16|m.charCodeAt(L++)<<24;else for(ee=0;16>ee;++ee)j[ee]=m[L++]|m[L++]<<8|m[L++]<<16|m[L++]<<24;m=$.g[0],L=$.g[1],ee=$.g[2];var re=$.g[3],le=m+(re^L&(ee^re))+j[0]+3614090360&4294967295;m=L+(le<<7&4294967295|le>>>25),le=re+(ee^m&(L^ee))+j[1]+3905402710&4294967295,re=m+(le<<12&4294967295|le>>>20),le=ee+(L^re&(m^L))+j[2]+606105819&4294967295,ee=re+(le<<17&4294967295|le>>>15),le=L+(m^ee&(re^m))+j[3]+3250441966&4294967295,L=ee+(le<<22&4294967295|le>>>10),le=m+(re^L&(ee^re))+j[4]+4118548399&4294967295,m=L+(le<<7&4294967295|le>>>25),le=re+(ee^m&(L^ee))+j[5]+1200080426&4294967295,re=m+(le<<12&4294967295|le>>>20),le=ee+(L^re&(m^L))+j[6]+2821735955&4294967295,ee=re+(le<<17&4294967295|le>>>15),le=L+(m^ee&(re^m))+j[7]+4249261313&4294967295,L=ee+(le<<22&4294967295|le>>>10),le=m+(re^L&(ee^re))+j[8]+1770035416&4294967295,m=L+(le<<7&4294967295|le>>>25),le=re+(ee^m&(L^ee))+j[9]+2336552879&4294967295,re=m+(le<<12&4294967295|le>>>20),le=ee+(L^re&(m^L))+j[10]+4294925233&4294967295,ee=re+(le<<17&4294967295|le>>>15),le=L+(m^ee&(re^m))+j[11]+2304563134&4294967295,L=ee+(le<<22&4294967295|le>>>10),le=m+(re^L&(ee^re))+j[12]+1804603682&4294967295,m=L+(le<<7&4294967295|le>>>25),le=re+(ee^m&(L^ee))+j[13]+4254626195&4294967295,re=m+(le<<12&4294967295|le>>>20),le=ee+(L^re&(m^L))+j[14]+2792965006&4294967295,ee=re+(le<<17&4294967295|le>>>15),le=L+(m^ee&(re^m))+j[15]+1236535329&4294967295,L=ee+(le<<22&4294967295|le>>>10),le=m+(ee^re&(L^ee))+j[1]+4129170786&4294967295,m=L+(le<<5&4294967295|le>>>27),le=re+(L^ee&(m^L))+j[6]+3225465664&4294967295,re=m+(le<<9&4294967295|le>>>23),le=ee+(m^L&(re^m))+j[11]+643717713&4294967295,ee=re+(le<<14&4294967295|le>>>18),le=L+(re^m&(ee^re))+j[0]+3921069994&4294967295,L=ee+(le<<20&4294967295|le>>>12),le=m+(ee^re&(L^ee))+j[5]+3593408605&4294967295,m=L+(le<<5&4294967295|le>>>27),le=re+(L^ee&(m^L))+j[10]+38016083&4294967295,re=m+(le<<9&4294967295|le>>>23),le=ee+(m^L&(re^m))+j[15]+3634488961&4294967295,ee=re+(le<<14&4294967295|le>>>18),le=L+(re^m&(ee^re))+j[4]+3889429448&4294967295,L=ee+(le<<20&4294967295|le>>>12),le=m+(ee^re&(L^ee))+j[9]+568446438&4294967295,m=L+(le<<5&4294967295|le>>>27),le=re+(L^ee&(m^L))+j[14]+3275163606&4294967295,re=m+(le<<9&4294967295|le>>>23),le=ee+(m^L&(re^m))+j[3]+4107603335&4294967295,ee=re+(le<<14&4294967295|le>>>18),le=L+(re^m&(ee^re))+j[8]+1163531501&4294967295,L=ee+(le<<20&4294967295|le>>>12),le=m+(ee^re&(L^ee))+j[13]+2850285829&4294967295,m=L+(le<<5&4294967295|le>>>27),le=re+(L^ee&(m^L))+j[2]+4243563512&4294967295,re=m+(le<<9&4294967295|le>>>23),le=ee+(m^L&(re^m))+j[7]+1735328473&4294967295,ee=re+(le<<14&4294967295|le>>>18),le=L+(re^m&(ee^re))+j[12]+2368359562&4294967295,L=ee+(le<<20&4294967295|le>>>12),le=m+(L^ee^re)+j[5]+4294588738&4294967295,m=L+(le<<4&4294967295|le>>>28),le=re+(m^L^ee)+j[8]+2272392833&4294967295,re=m+(le<<11&4294967295|le>>>21),le=ee+(re^m^L)+j[11]+1839030562&4294967295,ee=re+(le<<16&4294967295|le>>>16),le=L+(ee^re^m)+j[14]+4259657740&4294967295,L=ee+(le<<23&4294967295|le>>>9),le=m+(L^ee^re)+j[1]+2763975236&4294967295,m=L+(le<<4&4294967295|le>>>28),le=re+(m^L^ee)+j[4]+1272893353&4294967295,re=m+(le<<11&4294967295|le>>>21),le=ee+(re^m^L)+j[7]+4139469664&4294967295,ee=re+(le<<16&4294967295|le>>>16),le=L+(ee^re^m)+j[10]+3200236656&4294967295,L=ee+(le<<23&4294967295|le>>>9),le=m+(L^ee^re)+j[13]+681279174&4294967295,m=L+(le<<4&4294967295|le>>>28),le=re+(m^L^ee)+j[0]+3936430074&4294967295,re=m+(le<<11&4294967295|le>>>21),le=ee+(re^m^L)+j[3]+3572445317&4294967295,ee=re+(le<<16&4294967295|le>>>16),le=L+(ee^re^m)+j[6]+76029189&4294967295,L=ee+(le<<23&4294967295|le>>>9),le=m+(L^ee^re)+j[9]+3654602809&4294967295,m=L+(le<<4&4294967295|le>>>28),le=re+(m^L^ee)+j[12]+3873151461&4294967295,re=m+(le<<11&4294967295|le>>>21),le=ee+(re^m^L)+j[15]+530742520&4294967295,ee=re+(le<<16&4294967295|le>>>16),le=L+(ee^re^m)+j[2]+3299628645&4294967295,L=ee+(le<<23&4294967295|le>>>9),le=m+(ee^(L|~re))+j[0]+4096336452&4294967295,m=L+(le<<6&4294967295|le>>>26),le=re+(L^(m|~ee))+j[7]+1126891415&4294967295,re=m+(le<<10&4294967295|le>>>22),le=ee+(m^(re|~L))+j[14]+2878612391&4294967295,ee=re+(le<<15&4294967295|le>>>17),le=L+(re^(ee|~m))+j[5]+4237533241&4294967295,L=ee+(le<<21&4294967295|le>>>11),le=m+(ee^(L|~re))+j[12]+1700485571&4294967295,m=L+(le<<6&4294967295|le>>>26),le=re+(L^(m|~ee))+j[3]+2399980690&4294967295,re=m+(le<<10&4294967295|le>>>22),le=ee+(m^(re|~L))+j[10]+4293915773&4294967295,ee=re+(le<<15&4294967295|le>>>17),le=L+(re^(ee|~m))+j[1]+2240044497&4294967295,L=ee+(le<<21&4294967295|le>>>11),le=m+(ee^(L|~re))+j[8]+1873313359&4294967295,m=L+(le<<6&4294967295|le>>>26),le=re+(L^(m|~ee))+j[15]+4264355552&4294967295,re=m+(le<<10&4294967295|le>>>22),le=ee+(m^(re|~L))+j[6]+2734768916&4294967295,ee=re+(le<<15&4294967295|le>>>17),le=L+(re^(ee|~m))+j[13]+1309151649&4294967295,L=ee+(le<<21&4294967295|le>>>11),le=m+(ee^(L|~re))+j[4]+4149444226&4294967295,m=L+(le<<6&4294967295|le>>>26),le=re+(L^(m|~ee))+j[11]+3174756917&4294967295,re=m+(le<<10&4294967295|le>>>22),le=ee+(m^(re|~L))+j[2]+718787259&4294967295,ee=re+(le<<15&4294967295|le>>>17),le=L+(re^(ee|~m))+j[9]+3951481745&4294967295,$.g[0]=$.g[0]+m&4294967295,$.g[1]=$.g[1]+(ee+(le<<21&4294967295|le>>>11))&4294967295,$.g[2]=$.g[2]+ee&4294967295,$.g[3]=$.g[3]+re&4294967295}S$1.prototype.j=function($,m){m===void 0&&(m=$.length);for(var L=m-this.blockSize,j=this.m,ee=this.h,re=0;re<m;){if(ee==0)for(;re<=L;)Sd(this,$,re),re+=this.blockSize;if(typeof $=="string"){for(;re<m;)if(j[ee++]=$.charCodeAt(re++),ee==this.blockSize){Sd(this,j),ee=0;break}}else for(;re<m;)if(j[ee++]=$[re++],ee==this.blockSize){Sd(this,j),ee=0;break}}this.h=ee,this.i+=m};S$1.prototype.l=function(){var $=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);$[0]=128;for(var m=1;m<$.length-8;++m)$[m]=0;var L=8*this.i;for(m=$.length-8;m<$.length;++m)$[m]=L&255,L/=256;for(this.j($),$=Array(16),m=L=0;4>m;++m)for(var j=0;32>j;j+=8)$[L++]=this.g[m]>>>j&255;return $};function T($,m){this.h=m;for(var L=[],j=!0,ee=$.length-1;0<=ee;ee--){var re=$[ee]|0;j&&re==m||(L[ee]=re,j=!1)}this.g=L}var sa={};function Td($){return-128<=$&&128>$?ra($,function(m){return new T([m|0],0>m?-1:0)}):new T([$|0],0>$?-1:0)}function U($){if(isNaN($)||!isFinite($))return V;if(0>$)return W(U(-$));for(var m=[],L=1,j=0;$>=L;j++)m[j]=$/L|0,L*=Ud;return new T(m,0)}function Vd($,m){if($.length==0)throw Error("number format error: empty string");if(m=m||10,2>m||36<m)throw Error("radix out of range: "+m);if($.charAt(0)=="-")return W(Vd($.substring(1),m));if(0<=$.indexOf("-"))throw Error('number format error: interior "-" character');for(var L=U(Math.pow(m,8)),j=V,ee=0;ee<$.length;ee+=8){var re=Math.min(8,$.length-ee),le=parseInt($.substring(ee,ee+re),m);8>re?(re=U(Math.pow(m,re)),j=j.R(re).add(U(le))):(j=j.R(L),j=j.add(U(le)))}return j}var Ud=4294967296,V=Td(0),Wd=Td(1),Xd=Td(16777216);k=T.prototype;k.ea=function(){if(X$1(this))return-W(this).ea();for(var $=0,m=1,L=0;L<this.g.length;L++){var j=this.D(L);$+=(0<=j?j:Ud+j)*m,m*=Ud}return $};k.toString=function($){if($=$||10,2>$||36<$)throw Error("radix out of range: "+$);if(Y(this))return"0";if(X$1(this))return"-"+W(this).toString($);for(var m=U(Math.pow($,6)),L=this,j="";;){var ee=Yd(L,m).g;L=Zd(L,ee.R(m));var re=((0<L.g.length?L.g[0]:L.h)>>>0).toString($);if(L=ee,Y(L))return re+j;for(;6>re.length;)re="0"+re;j=re+j}};k.D=function($){return 0>$?0:$<this.g.length?this.g[$]:this.h};function Y($){if($.h!=0)return!1;for(var m=0;m<$.g.length;m++)if($.g[m]!=0)return!1;return!0}function X$1($){return $.h==-1}k.X=function($){return $=Zd(this,$),X$1($)?-1:Y($)?0:1};function W($){for(var m=$.g.length,L=[],j=0;j<m;j++)L[j]=~$.g[j];return new T(L,~$.h).add(Wd)}k.abs=function(){return X$1(this)?W(this):this};k.add=function($){for(var m=Math.max(this.g.length,$.g.length),L=[],j=0,ee=0;ee<=m;ee++){var re=j+(this.D(ee)&65535)+($.D(ee)&65535),le=(re>>>16)+(this.D(ee)>>>16)+($.D(ee)>>>16);j=le>>>16,re&=65535,le&=65535,L[ee]=le<<16|re}return new T(L,L[L.length-1]&-2147483648?-1:0)};function Zd($,m){return $.add(W(m))}k.R=function($){if(Y(this)||Y($))return V;if(X$1(this))return X$1($)?W(this).R(W($)):W(W(this).R($));if(X$1($))return W(this.R(W($)));if(0>this.X(Xd)&&0>$.X(Xd))return U(this.ea()*$.ea());for(var m=this.g.length+$.g.length,L=[],j=0;j<2*m;j++)L[j]=0;for(j=0;j<this.g.length;j++)for(var ee=0;ee<$.g.length;ee++){var re=this.D(j)>>>16,le=this.D(j)&65535,ve=$.D(ee)>>>16,ye=$.D(ee)&65535;L[2*j+2*ee]+=le*ye,$d(L,2*j+2*ee),L[2*j+2*ee+1]+=re*ye,$d(L,2*j+2*ee+1),L[2*j+2*ee+1]+=le*ve,$d(L,2*j+2*ee+1),L[2*j+2*ee+2]+=re*ve,$d(L,2*j+2*ee+2)}for(j=0;j<m;j++)L[j]=L[2*j+1]<<16|L[2*j];for(j=m;j<2*m;j++)L[j]=0;return new T(L,0)};function $d($,m){for(;($[m]&65535)!=$[m];)$[m+1]+=$[m]>>>16,$[m]&=65535,m++}function ae$1($,m){this.g=$,this.h=m}function Yd($,m){if(Y(m))throw Error("division by zero");if(Y($))return new ae$1(V,V);if(X$1($))return m=Yd(W($),m),new ae$1(W(m.g),W(m.h));if(X$1(m))return m=Yd($,W(m)),new ae$1(W(m.g),m.h);if(30<$.g.length){if(X$1($)||X$1(m))throw Error("slowDivide_ only works with positive integers.");for(var L=Wd,j=m;0>=j.X($);)L=be(L),j=be(j);var ee=Z(L,1),re=Z(j,1);for(j=Z(j,2),L=Z(L,2);!Y(j);){var le=re.add(j);0>=le.X($)&&(ee=ee.add(L),re=le),j=Z(j,1),L=Z(L,1)}return m=Zd($,ee.R(m)),new ae$1(ee,m)}for(ee=V;0<=$.X(m);){for(L=Math.max(1,Math.floor($.ea()/m.ea())),j=Math.ceil(Math.log(L)/Math.LN2),j=48>=j?1:Math.pow(2,j-48),re=U(L),le=re.R(m);X$1(le)||0<le.X($);)L-=j,re=U(L),le=re.R(m);Y(re)&&(re=Wd),ee=ee.add(re),$=Zd($,le)}return new ae$1(ee,$)}k.gb=function($){return Yd(this,$).h};k.and=function($){for(var m=Math.max(this.g.length,$.g.length),L=[],j=0;j<m;j++)L[j]=this.D(j)&$.D(j);return new T(L,this.h&$.h)};k.or=function($){for(var m=Math.max(this.g.length,$.g.length),L=[],j=0;j<m;j++)L[j]=this.D(j)|$.D(j);return new T(L,this.h|$.h)};k.xor=function($){for(var m=Math.max(this.g.length,$.g.length),L=[],j=0;j<m;j++)L[j]=this.D(j)^$.D(j);return new T(L,this.h^$.h)};function be($){for(var m=$.g.length+1,L=[],j=0;j<m;j++)L[j]=$.D(j)<<1|$.D(j-1)>>>31;return new T(L,$.h)}function Z($,m){var L=m>>5;m%=32;for(var j=$.g.length-L,ee=[],re=0;re<j;re++)ee[re]=0<m?$.D(re+L)>>>m|$.D(re+L+1)<<32-m:$.D(re+L);return new T(ee,$.h)}Od.prototype.createWebChannel=Od.prototype.g;Q$1.prototype.send=Q$1.prototype.u;Q$1.prototype.open=Q$1.prototype.m;Q$1.prototype.close=Q$1.prototype.close;Sb.NO_ERROR=0;Sb.TIMEOUT=8;Sb.HTTP_ERROR=6;Tb.COMPLETE="complete";Wb.EventType=Xb;Xb.OPEN="a";Xb.CLOSE="b";Xb.ERROR="c";Xb.MESSAGE="d";B$1.prototype.listen=B$1.prototype.O;P.prototype.listenOnce=P.prototype.P;P.prototype.getLastError=P.prototype.Sa;P.prototype.getLastErrorCode=P.prototype.Ia;P.prototype.getStatus=P.prototype.da;P.prototype.getResponseJson=P.prototype.Wa;P.prototype.getResponseText=P.prototype.ja;P.prototype.send=P.prototype.ha;P.prototype.setWithCredentials=P.prototype.Oa;S$1.prototype.digest=S$1.prototype.l;S$1.prototype.reset=S$1.prototype.reset;S$1.prototype.update=S$1.prototype.j;T.prototype.add=T.prototype.add;T.prototype.multiply=T.prototype.R;T.prototype.modulo=T.prototype.gb;T.prototype.compare=T.prototype.X;T.prototype.toNumber=T.prototype.ea;T.prototype.toString=T.prototype.toString;T.prototype.getBits=T.prototype.D;T.fromNumber=U;T.fromString=Vd;var createWebChannelTransport=function(){return new Od},getStatEventTarget=function(){return Mb()},ErrorCode=Sb,EventType=Tb,Event$1=E$1,Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},WebChannel=Wb,XhrIo=P,Md5=S$1,Integer=T;const w="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class User{constructor(m){this.uid=m}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(m){return m.uid===this.uid}}User.UNAUTHENTICATED=new User(null),User.GOOGLE_CREDENTIALS=new User("google-credentials-uid"),User.FIRST_PARTY=new User("first-party-uid"),User.MOCK_USER=new User("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let S="10.11.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b=new Logger("@firebase/firestore");function __PRIVATE_getLogLevel(){return b.logLevel}function __PRIVATE_logDebug($,...m){if(b.logLevel<=LogLevel.DEBUG){const L=m.map(__PRIVATE_argToString);b.debug(`Firestore (${S}): ${$}`,...L)}}function __PRIVATE_logError($,...m){if(b.logLevel<=LogLevel.ERROR){const L=m.map(__PRIVATE_argToString);b.error(`Firestore (${S}): ${$}`,...L)}}function __PRIVATE_logWarn($,...m){if(b.logLevel<=LogLevel.WARN){const L=m.map(__PRIVATE_argToString);b.warn(`Firestore (${S}): ${$}`,...L)}}function __PRIVATE_argToString($){if(typeof $=="string")return $;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(L){return JSON.stringify(L)}($)}catch{return $}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fail($="Unexpected state"){const m=`FIRESTORE (${S}) INTERNAL ASSERTION FAILED: `+$;throw __PRIVATE_logError(m),new Error(m)}function __PRIVATE_hardAssert($,m){$||fail()}function __PRIVATE_debugCast($,m){return $}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class FirestoreError extends FirebaseError{constructor(m,L){super(m,L),this.code=m,this.message=L,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_Deferred{constructor(){this.promise=new Promise((m,L)=>{this.resolve=m,this.reject=L})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_OAuthToken{constructor(m,L){this.user=L,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${m}`)}}class __PRIVATE_EmptyAuthCredentialsProvider{getToken(){return Promise.resolve(null)}invalidateToken(){}start(m,L){m.enqueueRetryable(()=>L(User.UNAUTHENTICATED))}shutdown(){}}class __PRIVATE_EmulatorAuthCredentialsProvider{constructor(m){this.token=m,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(m,L){this.changeListener=L,m.enqueueRetryable(()=>L(this.token.user))}shutdown(){this.changeListener=null}}class __PRIVATE_FirebaseAuthCredentialsProvider{constructor(m){this.t=m,this.currentUser=User.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(m,L){let j=this.i;const ee=ye=>this.i!==j?(j=this.i,L(ye)):Promise.resolve();let re=new __PRIVATE_Deferred;this.o=()=>{this.i++,this.currentUser=this.u(),re.resolve(),re=new __PRIVATE_Deferred,m.enqueueRetryable(()=>ee(this.currentUser))};const le=()=>{const ye=re;m.enqueueRetryable(async()=>{await ye.promise,await ee(this.currentUser)})},ve=ye=>{__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=ye,this.auth.addAuthTokenListener(this.o),le()};this.t.onInit(ye=>ve(ye)),setTimeout(()=>{if(!this.auth){const ye=this.t.getImmediate({optional:!0});ye?ve(ye):(__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","Auth not yet detected"),re.resolve(),re=new __PRIVATE_Deferred)}},0),le()}getToken(){const m=this.i,L=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(L).then(j=>this.i!==m?(__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):j?(__PRIVATE_hardAssert(typeof j.accessToken=="string"),new __PRIVATE_OAuthToken(j.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const m=this.auth&&this.auth.getUid();return __PRIVATE_hardAssert(m===null||typeof m=="string"),new User(m)}}class __PRIVATE_FirstPartyToken{constructor(m,L,j){this.l=m,this.h=L,this.P=j,this.type="FirstParty",this.user=User.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const m=this.T();return m&&this.I.set("Authorization",m),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class __PRIVATE_FirstPartyAuthCredentialsProvider{constructor(m,L,j){this.l=m,this.h=L,this.P=j}getToken(){return Promise.resolve(new __PRIVATE_FirstPartyToken(this.l,this.h,this.P))}start(m,L){m.enqueueRetryable(()=>L(User.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class AppCheckToken{constructor(m){this.value=m,this.type="AppCheck",this.headers=new Map,m&&m.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class __PRIVATE_FirebaseAppCheckTokenProvider{constructor(m){this.A=m,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(m,L){const j=re=>{re.error!=null&&__PRIVATE_logDebug("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${re.error.message}`);const le=re.token!==this.R;return this.R=re.token,__PRIVATE_logDebug("FirebaseAppCheckTokenProvider",`Received ${le?"new":"existing"} token.`),le?L(re.token):Promise.resolve()};this.o=re=>{m.enqueueRetryable(()=>j(re))};const ee=re=>{__PRIVATE_logDebug("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=re,this.appCheck.addTokenListener(this.o)};this.A.onInit(re=>ee(re)),setTimeout(()=>{if(!this.appCheck){const re=this.A.getImmediate({optional:!0});re?ee(re):__PRIVATE_logDebug("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const m=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(m).then(L=>L?(__PRIVATE_hardAssert(typeof L.token=="string"),this.R=L.token,new AppCheckToken(L.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_randomBytes($){const m=typeof self<"u"&&(self.crypto||self.msCrypto),L=new Uint8Array($);if(m&&typeof m.getRandomValues=="function")m.getRandomValues(L);else for(let j=0;j<$;j++)L[j]=Math.floor(256*Math.random());return L}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AutoId{static newId(){const m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",L=Math.floor(256/m.length)*m.length;let j="";for(;j.length<20;){const ee=__PRIVATE_randomBytes(40);for(let re=0;re<ee.length;++re)j.length<20&&ee[re]<L&&(j+=m.charAt(ee[re]%m.length))}return j}}function __PRIVATE_primitiveComparator($,m){return $<m?-1:$>m?1:0}function __PRIVATE_arrayEquals($,m,L){return $.length===m.length&&$.every((j,ee)=>L(j,m[ee]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Timestamp{constructor(m,L){if(this.seconds=m,this.nanoseconds=L,L<0)throw new FirestoreError(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+L);if(L>=1e9)throw new FirestoreError(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+L);if(m<-62135596800)throw new FirestoreError(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+m);if(m>=253402300800)throw new FirestoreError(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+m)}static now(){return Timestamp.fromMillis(Date.now())}static fromDate(m){return Timestamp.fromMillis(m.getTime())}static fromMillis(m){const L=Math.floor(m/1e3),j=Math.floor(1e6*(m-1e3*L));return new Timestamp(L,j)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(m){return this.seconds===m.seconds?__PRIVATE_primitiveComparator(this.nanoseconds,m.nanoseconds):__PRIVATE_primitiveComparator(this.seconds,m.seconds)}isEqual(m){return m.seconds===this.seconds&&m.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const m=this.seconds- -62135596800;return String(m).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SnapshotVersion{constructor(m){this.timestamp=m}static fromTimestamp(m){return new SnapshotVersion(m)}static min(){return new SnapshotVersion(new Timestamp(0,0))}static max(){return new SnapshotVersion(new Timestamp(253402300799,999999999))}compareTo(m){return this.timestamp._compareTo(m.timestamp)}isEqual(m){return this.timestamp.isEqual(m.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BasePath{constructor(m,L,j){L===void 0?L=0:L>m.length&&fail(),j===void 0?j=m.length-L:j>m.length-L&&fail(),this.segments=m,this.offset=L,this.len=j}get length(){return this.len}isEqual(m){return BasePath.comparator(this,m)===0}child(m){const L=this.segments.slice(this.offset,this.limit());return m instanceof BasePath?m.forEach(j=>{L.push(j)}):L.push(m),this.construct(L)}limit(){return this.offset+this.length}popFirst(m){return m=m===void 0?1:m,this.construct(this.segments,this.offset+m,this.length-m)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(m){return this.segments[this.offset+m]}isEmpty(){return this.length===0}isPrefixOf(m){if(m.length<this.length)return!1;for(let L=0;L<this.length;L++)if(this.get(L)!==m.get(L))return!1;return!0}isImmediateParentOf(m){if(this.length+1!==m.length)return!1;for(let L=0;L<this.length;L++)if(this.get(L)!==m.get(L))return!1;return!0}forEach(m){for(let L=this.offset,j=this.limit();L<j;L++)m(this.segments[L])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(m,L){const j=Math.min(m.length,L.length);for(let ee=0;ee<j;ee++){const re=m.get(ee),le=L.get(ee);if(re<le)return-1;if(re>le)return 1}return m.length<L.length?-1:m.length>L.length?1:0}}class ResourcePath extends BasePath{construct(m,L,j){return new ResourcePath(m,L,j)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...m){const L=[];for(const j of m){if(j.indexOf("//")>=0)throw new FirestoreError(D.INVALID_ARGUMENT,`Invalid segment (${j}). Paths must not contain // in them.`);L.push(...j.split("/").filter(ee=>ee.length>0))}return new ResourcePath(L)}static emptyPath(){return new ResourcePath([])}}const C$1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class FieldPath$1 extends BasePath{construct(m,L,j){return new FieldPath$1(m,L,j)}static isValidIdentifier(m){return C$1.test(m)}canonicalString(){return this.toArray().map(m=>(m=m.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),FieldPath$1.isValidIdentifier(m)||(m="`"+m+"`"),m)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new FieldPath$1(["__name__"])}static fromServerFormat(m){const L=[];let j="",ee=0;const re=()=>{if(j.length===0)throw new FirestoreError(D.INVALID_ARGUMENT,`Invalid field path (${m}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);L.push(j),j=""};let le=!1;for(;ee<m.length;){const ve=m[ee];if(ve==="\\"){if(ee+1===m.length)throw new FirestoreError(D.INVALID_ARGUMENT,"Path has trailing escape character: "+m);const ye=m[ee+1];if(ye!=="\\"&&ye!=="."&&ye!=="`")throw new FirestoreError(D.INVALID_ARGUMENT,"Path has invalid escape sequence: "+m);j+=ye,ee+=2}else ve==="`"?(le=!le,ee++):ve!=="."||le?(j+=ve,ee++):(re(),ee++)}if(re(),le)throw new FirestoreError(D.INVALID_ARGUMENT,"Unterminated ` in path: "+m);return new FieldPath$1(L)}static emptyPath(){return new FieldPath$1([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentKey{constructor(m){this.path=m}static fromPath(m){return new DocumentKey(ResourcePath.fromString(m))}static fromName(m){return new DocumentKey(ResourcePath.fromString(m).popFirst(5))}static empty(){return new DocumentKey(ResourcePath.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(m){return this.path.length>=2&&this.path.get(this.path.length-2)===m}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(m){return m!==null&&ResourcePath.comparator(this.path,m.path)===0}toString(){return this.path.toString()}static comparator(m,L){return ResourcePath.comparator(m.path,L.path)}static isDocumentKey(m){return m.length%2==0}static fromSegments(m){return new DocumentKey(new ResourcePath(m.slice()))}}function __PRIVATE_newIndexOffsetSuccessorFromReadTime($,m){const L=$.toTimestamp().seconds,j=$.toTimestamp().nanoseconds+1,ee=SnapshotVersion.fromTimestamp(j===1e9?new Timestamp(L+1,0):new Timestamp(L,j));return new IndexOffset(ee,DocumentKey.empty(),m)}function __PRIVATE_newIndexOffsetFromDocument($){return new IndexOffset($.readTime,$.key,-1)}class IndexOffset{constructor(m,L,j){this.readTime=m,this.documentKey=L,this.largestBatchId=j}static min(){return new IndexOffset(SnapshotVersion.min(),DocumentKey.empty(),-1)}static max(){return new IndexOffset(SnapshotVersion.max(),DocumentKey.empty(),-1)}}function __PRIVATE_indexOffsetComparator($,m){let L=$.readTime.compareTo(m.readTime);return L!==0?L:(L=DocumentKey.comparator($.documentKey,m.documentKey),L!==0?L:__PRIVATE_primitiveComparator($.largestBatchId,m.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class PersistenceTransaction{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(m){this.onCommittedListeners.push(m)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(m=>m())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function __PRIVATE_ignoreIfPrimaryLeaseLoss($){if($.code!==D.FAILED_PRECONDITION||$.message!==v)throw $;__PRIVATE_logDebug("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PersistencePromise{constructor(m){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,m(L=>{this.isDone=!0,this.result=L,this.nextCallback&&this.nextCallback(L)},L=>{this.isDone=!0,this.error=L,this.catchCallback&&this.catchCallback(L)})}catch(m){return this.next(void 0,m)}next(m,L){return this.callbackAttached&&fail(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(L,this.error):this.wrapSuccess(m,this.result):new PersistencePromise((j,ee)=>{this.nextCallback=re=>{this.wrapSuccess(m,re).next(j,ee)},this.catchCallback=re=>{this.wrapFailure(L,re).next(j,ee)}})}toPromise(){return new Promise((m,L)=>{this.next(m,L)})}wrapUserFunction(m){try{const L=m();return L instanceof PersistencePromise?L:PersistencePromise.resolve(L)}catch(L){return PersistencePromise.reject(L)}}wrapSuccess(m,L){return m?this.wrapUserFunction(()=>m(L)):PersistencePromise.resolve(L)}wrapFailure(m,L){return m?this.wrapUserFunction(()=>m(L)):PersistencePromise.reject(L)}static resolve(m){return new PersistencePromise((L,j)=>{L(m)})}static reject(m){return new PersistencePromise((L,j)=>{j(m)})}static waitFor(m){return new PersistencePromise((L,j)=>{let ee=0,re=0,le=!1;m.forEach(ve=>{++ee,ve.next(()=>{++re,le&&re===ee&&L()},ye=>j(ye))}),le=!0,re===ee&&L()})}static or(m){let L=PersistencePromise.resolve(!1);for(const j of m)L=L.next(ee=>ee?PersistencePromise.resolve(ee):j());return L}static forEach(m,L){const j=[];return m.forEach((ee,re)=>{j.push(L.call(this,ee,re))}),this.waitFor(j)}static mapArray(m,L){return new PersistencePromise((j,ee)=>{const re=m.length,le=new Array(re);let ve=0;for(let ye=0;ye<re;ye++){const Ee=ye;L(m[Ee]).next(Me=>{le[Ee]=Me,++ve,ve===re&&j(le)},Me=>ee(Me))}})}static doWhile(m,L){return new PersistencePromise((j,ee)=>{const re=()=>{m()===!0?L().next(()=>{re()},ee):j()};re()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_SimpleDbTransaction{constructor(m,L){this.action=m,this.transaction=L,this.aborted=!1,this.V=new __PRIVATE_Deferred,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{L.error?this.V.reject(new __PRIVATE_IndexedDbTransactionError(m,L.error)):this.V.resolve()},this.transaction.onerror=j=>{const ee=__PRIVATE_checkForAndReportiOSError(j.target.error);this.V.reject(new __PRIVATE_IndexedDbTransactionError(m,ee))}}static open(m,L,j,ee){try{return new __PRIVATE_SimpleDbTransaction(L,m.transaction(ee,j))}catch(re){throw new __PRIVATE_IndexedDbTransactionError(L,re)}}get m(){return this.V.promise}abort(m){m&&this.V.reject(m),this.aborted||(__PRIVATE_logDebug("SimpleDb","Aborting transaction:",m?m.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const m=this.transaction;this.aborted||typeof m.commit!="function"||m.commit()}store(m){const L=this.transaction.objectStore(m);return new __PRIVATE_SimpleDbStore(L)}}class __PRIVATE_SimpleDb{constructor(m,L,j){this.name=m,this.version=L,this.p=j,__PRIVATE_SimpleDb.S(getUA())===12.2&&__PRIVATE_logError("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(m){return __PRIVATE_logDebug("SimpleDb","Removing database:",m),__PRIVATE_wrapRequest(window.indexedDB.deleteDatabase(m)).toPromise()}static D(){if(!isIndexedDBAvailable())return!1;if(__PRIVATE_SimpleDb.C())return!0;const m=getUA(),L=__PRIVATE_SimpleDb.S(m),j=0<L&&L<10,ee=__PRIVATE_SimpleDb.v(m),re=0<ee&&ee<4.5;return!(m.indexOf("MSIE ")>0||m.indexOf("Trident/")>0||m.indexOf("Edge/")>0||j||re)}static C(){var m;return typeof process<"u"&&((m=process.__PRIVATE_env)===null||m===void 0?void 0:m.F)==="YES"}static M(m,L){return m.store(L)}static S(m){const L=m.match(/i(?:phone|pad|pod) os ([\d_]+)/i),j=L?L[1].split("_").slice(0,2).join("."):"-1";return Number(j)}static v(m){const L=m.match(/Android ([\d.]+)/i),j=L?L[1].split(".").slice(0,2).join("."):"-1";return Number(j)}async O(m){return this.db||(__PRIVATE_logDebug("SimpleDb","Opening database:",this.name),this.db=await new Promise((L,j)=>{const ee=indexedDB.open(this.name,this.version);ee.onsuccess=re=>{const le=re.target.result;L(le)},ee.onblocked=()=>{j(new __PRIVATE_IndexedDbTransactionError(m,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},ee.onerror=re=>{const le=re.target.error;le.name==="VersionError"?j(new FirestoreError(D.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):le.name==="InvalidStateError"?j(new FirestoreError(D.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+le)):j(new __PRIVATE_IndexedDbTransactionError(m,le))},ee.onupgradeneeded=re=>{__PRIVATE_logDebug("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',re.oldVersion);const le=re.target.result;this.p.N(le,ee.transaction,re.oldVersion,this.version).next(()=>{__PRIVATE_logDebug("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=L=>this.L(L)),this.db}B(m){this.L=m,this.db&&(this.db.onversionchange=L=>m(L))}async runTransaction(m,L,j,ee){const re=L==="readonly";let le=0;for(;;){++le;try{this.db=await this.O(m);const ve=__PRIVATE_SimpleDbTransaction.open(this.db,m,re?"readonly":"readwrite",j),ye=ee(ve).next(Ee=>(ve.g(),Ee)).catch(Ee=>(ve.abort(Ee),PersistencePromise.reject(Ee))).toPromise();return ye.catch(()=>{}),await ve.m,ye}catch(ve){const ye=ve,Ee=ye.name!=="FirebaseError"&&le<3;if(__PRIVATE_logDebug("SimpleDb","Transaction failed with error:",ye.message,"Retrying:",Ee),this.close(),!Ee)return Promise.reject(ye)}}}close(){this.db&&this.db.close(),this.db=void 0}}class __PRIVATE_IterationController{constructor(m){this.k=m,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(m){this.k=m}done(){this.q=!0}U(m){this.K=m}delete(){return __PRIVATE_wrapRequest(this.k.delete())}}class __PRIVATE_IndexedDbTransactionError extends FirestoreError{constructor(m,L){super(D.UNAVAILABLE,`IndexedDB transaction '${m}' failed: ${L}`),this.name="IndexedDbTransactionError"}}function __PRIVATE_isIndexedDbTransactionError($){return $.name==="IndexedDbTransactionError"}class __PRIVATE_SimpleDbStore{constructor(m){this.store=m}put(m,L){let j;return L!==void 0?(__PRIVATE_logDebug("SimpleDb","PUT",this.store.name,m,L),j=this.store.put(L,m)):(__PRIVATE_logDebug("SimpleDb","PUT",this.store.name,"<auto-key>",m),j=this.store.put(m)),__PRIVATE_wrapRequest(j)}add(m){return __PRIVATE_logDebug("SimpleDb","ADD",this.store.name,m,m),__PRIVATE_wrapRequest(this.store.add(m))}get(m){return __PRIVATE_wrapRequest(this.store.get(m)).next(L=>(L===void 0&&(L=null),__PRIVATE_logDebug("SimpleDb","GET",this.store.name,m,L),L))}delete(m){return __PRIVATE_logDebug("SimpleDb","DELETE",this.store.name,m),__PRIVATE_wrapRequest(this.store.delete(m))}count(){return __PRIVATE_logDebug("SimpleDb","COUNT",this.store.name),__PRIVATE_wrapRequest(this.store.count())}W(m,L){const j=this.options(m,L),ee=j.index?this.store.index(j.index):this.store;if(typeof ee.getAll=="function"){const re=ee.getAll(j.range);return new PersistencePromise((le,ve)=>{re.onerror=ye=>{ve(ye.target.error)},re.onsuccess=ye=>{le(ye.target.result)}})}{const re=this.cursor(j),le=[];return this.G(re,(ve,ye)=>{le.push(ye)}).next(()=>le)}}j(m,L){const j=this.store.getAll(m,L===null?void 0:L);return new PersistencePromise((ee,re)=>{j.onerror=le=>{re(le.target.error)},j.onsuccess=le=>{ee(le.target.result)}})}H(m,L){__PRIVATE_logDebug("SimpleDb","DELETE ALL",this.store.name);const j=this.options(m,L);j.J=!1;const ee=this.cursor(j);return this.G(ee,(re,le,ve)=>ve.delete())}Y(m,L){let j;L?j=m:(j={},L=m);const ee=this.cursor(j);return this.G(ee,L)}Z(m){const L=this.cursor({});return new PersistencePromise((j,ee)=>{L.onerror=re=>{const le=__PRIVATE_checkForAndReportiOSError(re.target.error);ee(le)},L.onsuccess=re=>{const le=re.target.result;le?m(le.primaryKey,le.value).next(ve=>{ve?le.continue():j()}):j()}})}G(m,L){const j=[];return new PersistencePromise((ee,re)=>{m.onerror=le=>{re(le.target.error)},m.onsuccess=le=>{const ve=le.target.result;if(!ve)return void ee();const ye=new __PRIVATE_IterationController(ve),Ee=L(ve.primaryKey,ve.value,ye);if(Ee instanceof PersistencePromise){const Me=Ee.catch(Ce=>(ye.done(),PersistencePromise.reject(Ce)));j.push(Me)}ye.isDone?ee():ye.$===null?ve.continue():ve.continue(ye.$)}}).next(()=>PersistencePromise.waitFor(j))}options(m,L){let j;return m!==void 0&&(typeof m=="string"?j=m:L=m),{index:j,range:L}}cursor(m){let L="next";if(m.reverse&&(L="prev"),m.index){const j=this.store.index(m.index);return m.J?j.openKeyCursor(m.range,L):j.openCursor(m.range,L)}return this.store.openCursor(m.range,L)}}function __PRIVATE_wrapRequest($){return new PersistencePromise((m,L)=>{$.onsuccess=j=>{const ee=j.target.result;m(ee)},$.onerror=j=>{const ee=__PRIVATE_checkForAndReportiOSError(j.target.error);L(ee)}})}let F$1=!1;function __PRIVATE_checkForAndReportiOSError($){const m=__PRIVATE_SimpleDb.S(getUA());if(m>=12.2&&m<13){const L="An internal error was encountered in the Indexed Database server";if($.message.indexOf(L)>=0){const j=new FirestoreError("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${L}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return F$1||(F$1=!0,setTimeout(()=>{throw j},0)),j}}return $}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ListenSequence{constructor(m,L){this.previousValue=m,L&&(L.sequenceNumberHandler=j=>this.se(j),this.oe=j=>L.writeSequenceNumber(j))}se(m){return this.previousValue=Math.max(m,this.previousValue),this.previousValue}next(){const m=++this.previousValue;return this.oe&&this.oe(m),m}}__PRIVATE_ListenSequence._e=-1;function __PRIVATE_isNullOrUndefined($){return $==null}function __PRIVATE_isNegativeZero($){return $===0&&1/$==-1/0}function isSafeInteger($){return typeof $=="number"&&Number.isInteger($)&&!__PRIVATE_isNegativeZero($)&&$<=Number.MAX_SAFE_INTEGER&&$>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_objectSize($){let m=0;for(const L in $)Object.prototype.hasOwnProperty.call($,L)&&m++;return m}function forEach($,m){for(const L in $)Object.prototype.hasOwnProperty.call($,L)&&m(L,$[L])}function isEmpty$1($){for(const m in $)if(Object.prototype.hasOwnProperty.call($,m))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SortedMap{constructor(m,L){this.comparator=m,this.root=L||LLRBNode.EMPTY}insert(m,L){return new SortedMap(this.comparator,this.root.insert(m,L,this.comparator).copy(null,null,LLRBNode.BLACK,null,null))}remove(m){return new SortedMap(this.comparator,this.root.remove(m,this.comparator).copy(null,null,LLRBNode.BLACK,null,null))}get(m){let L=this.root;for(;!L.isEmpty();){const j=this.comparator(m,L.key);if(j===0)return L.value;j<0?L=L.left:j>0&&(L=L.right)}return null}indexOf(m){let L=0,j=this.root;for(;!j.isEmpty();){const ee=this.comparator(m,j.key);if(ee===0)return L+j.left.size;ee<0?j=j.left:(L+=j.left.size+1,j=j.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(m){return this.root.inorderTraversal(m)}forEach(m){this.inorderTraversal((L,j)=>(m(L,j),!1))}toString(){const m=[];return this.inorderTraversal((L,j)=>(m.push(`${L}:${j}`),!1)),`{${m.join(", ")}}`}reverseTraversal(m){return this.root.reverseTraversal(m)}getIterator(){return new SortedMapIterator(this.root,null,this.comparator,!1)}getIteratorFrom(m){return new SortedMapIterator(this.root,m,this.comparator,!1)}getReverseIterator(){return new SortedMapIterator(this.root,null,this.comparator,!0)}getReverseIteratorFrom(m){return new SortedMapIterator(this.root,m,this.comparator,!0)}}class SortedMapIterator{constructor(m,L,j,ee){this.isReverse=ee,this.nodeStack=[];let re=1;for(;!m.isEmpty();)if(re=L?j(m.key,L):1,L&&ee&&(re*=-1),re<0)m=this.isReverse?m.left:m.right;else{if(re===0){this.nodeStack.push(m);break}this.nodeStack.push(m),m=this.isReverse?m.right:m.left}}getNext(){let m=this.nodeStack.pop();const L={key:m.key,value:m.value};if(this.isReverse)for(m=m.left;!m.isEmpty();)this.nodeStack.push(m),m=m.right;else for(m=m.right;!m.isEmpty();)this.nodeStack.push(m),m=m.left;return L}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const m=this.nodeStack[this.nodeStack.length-1];return{key:m.key,value:m.value}}}class LLRBNode{constructor(m,L,j,ee,re){this.key=m,this.value=L,this.color=j??LLRBNode.RED,this.left=ee??LLRBNode.EMPTY,this.right=re??LLRBNode.EMPTY,this.size=this.left.size+1+this.right.size}copy(m,L,j,ee,re){return new LLRBNode(m??this.key,L??this.value,j??this.color,ee??this.left,re??this.right)}isEmpty(){return!1}inorderTraversal(m){return this.left.inorderTraversal(m)||m(this.key,this.value)||this.right.inorderTraversal(m)}reverseTraversal(m){return this.right.reverseTraversal(m)||m(this.key,this.value)||this.left.reverseTraversal(m)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(m,L,j){let ee=this;const re=j(m,ee.key);return ee=re<0?ee.copy(null,null,null,ee.left.insert(m,L,j),null):re===0?ee.copy(null,L,null,null,null):ee.copy(null,null,null,null,ee.right.insert(m,L,j)),ee.fixUp()}removeMin(){if(this.left.isEmpty())return LLRBNode.EMPTY;let m=this;return m.left.isRed()||m.left.left.isRed()||(m=m.moveRedLeft()),m=m.copy(null,null,null,m.left.removeMin(),null),m.fixUp()}remove(m,L){let j,ee=this;if(L(m,ee.key)<0)ee.left.isEmpty()||ee.left.isRed()||ee.left.left.isRed()||(ee=ee.moveRedLeft()),ee=ee.copy(null,null,null,ee.left.remove(m,L),null);else{if(ee.left.isRed()&&(ee=ee.rotateRight()),ee.right.isEmpty()||ee.right.isRed()||ee.right.left.isRed()||(ee=ee.moveRedRight()),L(m,ee.key)===0){if(ee.right.isEmpty())return LLRBNode.EMPTY;j=ee.right.min(),ee=ee.copy(j.key,j.value,null,null,ee.right.removeMin())}ee=ee.copy(null,null,null,null,ee.right.remove(m,L))}return ee.fixUp()}isRed(){return this.color}fixUp(){let m=this;return m.right.isRed()&&!m.left.isRed()&&(m=m.rotateLeft()),m.left.isRed()&&m.left.left.isRed()&&(m=m.rotateRight()),m.left.isRed()&&m.right.isRed()&&(m=m.colorFlip()),m}moveRedLeft(){let m=this.colorFlip();return m.right.left.isRed()&&(m=m.copy(null,null,null,null,m.right.rotateRight()),m=m.rotateLeft(),m=m.colorFlip()),m}moveRedRight(){let m=this.colorFlip();return m.left.left.isRed()&&(m=m.rotateRight(),m=m.colorFlip()),m}rotateLeft(){const m=this.copy(null,null,LLRBNode.RED,null,this.right.left);return this.right.copy(null,null,this.color,m,null)}rotateRight(){const m=this.copy(null,null,LLRBNode.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,m)}colorFlip(){const m=this.left.copy(null,null,!this.left.color,null,null),L=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,m,L)}checkMaxDepth(){const m=this.check();return Math.pow(2,m)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw fail();const m=this.left.check();if(m!==this.right.check())throw fail();return m+(this.isRed()?0:1)}}LLRBNode.EMPTY=null,LLRBNode.RED=!0,LLRBNode.BLACK=!1;LLRBNode.EMPTY=new class{constructor(){this.size=0}get key(){throw fail()}get value(){throw fail()}get color(){throw fail()}get left(){throw fail()}get right(){throw fail()}copy(m,L,j,ee,re){return this}insert(m,L,j){return new LLRBNode(m,L)}remove(m,L){return this}isEmpty(){return!0}inorderTraversal(m){return!1}reverseTraversal(m){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SortedSet{constructor(m){this.comparator=m,this.data=new SortedMap(this.comparator)}has(m){return this.data.get(m)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(m){return this.data.indexOf(m)}forEach(m){this.data.inorderTraversal((L,j)=>(m(L),!1))}forEachInRange(m,L){const j=this.data.getIteratorFrom(m[0]);for(;j.hasNext();){const ee=j.getNext();if(this.comparator(ee.key,m[1])>=0)return;L(ee.key)}}forEachWhile(m,L){let j;for(j=L!==void 0?this.data.getIteratorFrom(L):this.data.getIterator();j.hasNext();)if(!m(j.getNext().key))return}firstAfterOrEqual(m){const L=this.data.getIteratorFrom(m);return L.hasNext()?L.getNext().key:null}getIterator(){return new SortedSetIterator(this.data.getIterator())}getIteratorFrom(m){return new SortedSetIterator(this.data.getIteratorFrom(m))}add(m){return this.copy(this.data.remove(m).insert(m,!0))}delete(m){return this.has(m)?this.copy(this.data.remove(m)):this}isEmpty(){return this.data.isEmpty()}unionWith(m){let L=this;return L.size<m.size&&(L=m,m=this),m.forEach(j=>{L=L.add(j)}),L}isEqual(m){if(!(m instanceof SortedSet)||this.size!==m.size)return!1;const L=this.data.getIterator(),j=m.data.getIterator();for(;L.hasNext();){const ee=L.getNext().key,re=j.getNext().key;if(this.comparator(ee,re)!==0)return!1}return!0}toArray(){const m=[];return this.forEach(L=>{m.push(L)}),m}toString(){const m=[];return this.forEach(L=>m.push(L)),"SortedSet("+m.toString()+")"}copy(m){const L=new SortedSet(this.comparator);return L.data=m,L}}class SortedSetIterator{constructor(m){this.iter=m}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldMask{constructor(m){this.fields=m,m.sort(FieldPath$1.comparator)}static empty(){return new FieldMask([])}unionWith(m){let L=new SortedSet(FieldPath$1.comparator);for(const j of this.fields)L=L.add(j);for(const j of m)L=L.add(j);return new FieldMask(L.toArray())}covers(m){for(const L of this.fields)if(L.isPrefixOf(m))return!0;return!1}isEqual(m){return __PRIVATE_arrayEquals(this.fields,m.fields,(L,j)=>L.isEqual(j))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_Base64DecodeError extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ByteString{constructor(m){this.binaryString=m}static fromBase64String(m){const L=function(ee){try{return atob(ee)}catch(re){throw typeof DOMException<"u"&&re instanceof DOMException?new __PRIVATE_Base64DecodeError("Invalid base64 string: "+re):re}}(m);return new ByteString(L)}static fromUint8Array(m){const L=function(ee){let re="";for(let le=0;le<ee.length;++le)re+=String.fromCharCode(ee[le]);return re}(m);return new ByteString(L)}[Symbol.iterator](){let m=0;return{next:()=>m<this.binaryString.length?{value:this.binaryString.charCodeAt(m++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(L){return btoa(L)}(this.binaryString)}toUint8Array(){return function(L){const j=new Uint8Array(L.length);for(let ee=0;ee<L.length;ee++)j[ee]=L.charCodeAt(ee);return j}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(m){return __PRIVATE_primitiveComparator(this.binaryString,m.binaryString)}isEqual(m){return this.binaryString===m.binaryString}}ByteString.EMPTY_BYTE_STRING=new ByteString("");const te=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function __PRIVATE_normalizeTimestamp($){if(__PRIVATE_hardAssert(!!$),typeof $=="string"){let m=0;const L=te.exec($);if(__PRIVATE_hardAssert(!!L),L[1]){let ee=L[1];ee=(ee+"000000000").substr(0,9),m=Number(ee)}const j=new Date($);return{seconds:Math.floor(j.getTime()/1e3),nanos:m}}return{seconds:__PRIVATE_normalizeNumber($.seconds),nanos:__PRIVATE_normalizeNumber($.nanos)}}function __PRIVATE_normalizeNumber($){return typeof $=="number"?$:typeof $=="string"?Number($):0}function __PRIVATE_normalizeByteString($){return typeof $=="string"?ByteString.fromBase64String($):ByteString.fromUint8Array($)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_isServerTimestamp($){var m,L;return((L=(((m=$==null?void 0:$.mapValue)===null||m===void 0?void 0:m.fields)||{}).__type__)===null||L===void 0?void 0:L.stringValue)==="server_timestamp"}function __PRIVATE_getPreviousValue($){const m=$.mapValue.fields.__previous_value__;return __PRIVATE_isServerTimestamp(m)?__PRIVATE_getPreviousValue(m):m}function __PRIVATE_getLocalWriteTime($){const m=__PRIVATE_normalizeTimestamp($.mapValue.fields.__local_write_time__.timestampValue);return new Timestamp(m.seconds,m.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DatabaseInfo{constructor(m,L,j,ee,re,le,ve,ye,Ee){this.databaseId=m,this.appId=L,this.persistenceKey=j,this.host=ee,this.ssl=re,this.forceLongPolling=le,this.autoDetectLongPolling=ve,this.longPollingOptions=ye,this.useFetchStreams=Ee}}class DatabaseId{constructor(m,L){this.projectId=m,this.database=L||"(default)"}static empty(){return new DatabaseId("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(m){return m instanceof DatabaseId&&m.projectId===this.projectId&&m.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function __PRIVATE_typeOrder($){return"nullValue"in $?0:"booleanValue"in $?1:"integerValue"in $||"doubleValue"in $?2:"timestampValue"in $?3:"stringValue"in $?5:"bytesValue"in $?6:"referenceValue"in $?7:"geoPointValue"in $?8:"arrayValue"in $?9:"mapValue"in $?__PRIVATE_isServerTimestamp($)?4:__PRIVATE_isMaxValue($)?9007199254740991:10:fail()}function __PRIVATE_valueEquals($,m){if($===m)return!0;const L=__PRIVATE_typeOrder($);if(L!==__PRIVATE_typeOrder(m))return!1;switch(L){case 0:case 9007199254740991:return!0;case 1:return $.booleanValue===m.booleanValue;case 4:return __PRIVATE_getLocalWriteTime($).isEqual(__PRIVATE_getLocalWriteTime(m));case 3:return function(ee,re){if(typeof ee.timestampValue=="string"&&typeof re.timestampValue=="string"&&ee.timestampValue.length===re.timestampValue.length)return ee.timestampValue===re.timestampValue;const le=__PRIVATE_normalizeTimestamp(ee.timestampValue),ve=__PRIVATE_normalizeTimestamp(re.timestampValue);return le.seconds===ve.seconds&&le.nanos===ve.nanos}($,m);case 5:return $.stringValue===m.stringValue;case 6:return function(ee,re){return __PRIVATE_normalizeByteString(ee.bytesValue).isEqual(__PRIVATE_normalizeByteString(re.bytesValue))}($,m);case 7:return $.referenceValue===m.referenceValue;case 8:return function(ee,re){return __PRIVATE_normalizeNumber(ee.geoPointValue.latitude)===__PRIVATE_normalizeNumber(re.geoPointValue.latitude)&&__PRIVATE_normalizeNumber(ee.geoPointValue.longitude)===__PRIVATE_normalizeNumber(re.geoPointValue.longitude)}($,m);case 2:return function(ee,re){if("integerValue"in ee&&"integerValue"in re)return __PRIVATE_normalizeNumber(ee.integerValue)===__PRIVATE_normalizeNumber(re.integerValue);if("doubleValue"in ee&&"doubleValue"in re){const le=__PRIVATE_normalizeNumber(ee.doubleValue),ve=__PRIVATE_normalizeNumber(re.doubleValue);return le===ve?__PRIVATE_isNegativeZero(le)===__PRIVATE_isNegativeZero(ve):isNaN(le)&&isNaN(ve)}return!1}($,m);case 9:return __PRIVATE_arrayEquals($.arrayValue.values||[],m.arrayValue.values||[],__PRIVATE_valueEquals);case 10:return function(ee,re){const le=ee.mapValue.fields||{},ve=re.mapValue.fields||{};if(__PRIVATE_objectSize(le)!==__PRIVATE_objectSize(ve))return!1;for(const ye in le)if(le.hasOwnProperty(ye)&&(ve[ye]===void 0||!__PRIVATE_valueEquals(le[ye],ve[ye])))return!1;return!0}($,m);default:return fail()}}function __PRIVATE_arrayValueContains($,m){return($.values||[]).find(L=>__PRIVATE_valueEquals(L,m))!==void 0}function __PRIVATE_valueCompare($,m){if($===m)return 0;const L=__PRIVATE_typeOrder($),j=__PRIVATE_typeOrder(m);if(L!==j)return __PRIVATE_primitiveComparator(L,j);switch(L){case 0:case 9007199254740991:return 0;case 1:return __PRIVATE_primitiveComparator($.booleanValue,m.booleanValue);case 2:return function(re,le){const ve=__PRIVATE_normalizeNumber(re.integerValue||re.doubleValue),ye=__PRIVATE_normalizeNumber(le.integerValue||le.doubleValue);return ve<ye?-1:ve>ye?1:ve===ye?0:isNaN(ve)?isNaN(ye)?0:-1:1}($,m);case 3:return __PRIVATE_compareTimestamps($.timestampValue,m.timestampValue);case 4:return __PRIVATE_compareTimestamps(__PRIVATE_getLocalWriteTime($),__PRIVATE_getLocalWriteTime(m));case 5:return __PRIVATE_primitiveComparator($.stringValue,m.stringValue);case 6:return function(re,le){const ve=__PRIVATE_normalizeByteString(re),ye=__PRIVATE_normalizeByteString(le);return ve.compareTo(ye)}($.bytesValue,m.bytesValue);case 7:return function(re,le){const ve=re.split("/"),ye=le.split("/");for(let Ee=0;Ee<ve.length&&Ee<ye.length;Ee++){const Me=__PRIVATE_primitiveComparator(ve[Ee],ye[Ee]);if(Me!==0)return Me}return __PRIVATE_primitiveComparator(ve.length,ye.length)}($.referenceValue,m.referenceValue);case 8:return function(re,le){const ve=__PRIVATE_primitiveComparator(__PRIVATE_normalizeNumber(re.latitude),__PRIVATE_normalizeNumber(le.latitude));return ve!==0?ve:__PRIVATE_primitiveComparator(__PRIVATE_normalizeNumber(re.longitude),__PRIVATE_normalizeNumber(le.longitude))}($.geoPointValue,m.geoPointValue);case 9:return function(re,le){const ve=re.values||[],ye=le.values||[];for(let Ee=0;Ee<ve.length&&Ee<ye.length;++Ee){const Me=__PRIVATE_valueCompare(ve[Ee],ye[Ee]);if(Me)return Me}return __PRIVATE_primitiveComparator(ve.length,ye.length)}($.arrayValue,m.arrayValue);case 10:return function(re,le){if(re===ne.mapValue&&le===ne.mapValue)return 0;if(re===ne.mapValue)return 1;if(le===ne.mapValue)return-1;const ve=re.fields||{},ye=Object.keys(ve),Ee=le.fields||{},Me=Object.keys(Ee);ye.sort(),Me.sort();for(let Ce=0;Ce<ye.length&&Ce<Me.length;++Ce){const De=__PRIVATE_primitiveComparator(ye[Ce],Me[Ce]);if(De!==0)return De;const Be=__PRIVATE_valueCompare(ve[ye[Ce]],Ee[Me[Ce]]);if(Be!==0)return Be}return __PRIVATE_primitiveComparator(ye.length,Me.length)}($.mapValue,m.mapValue);default:throw fail()}}function __PRIVATE_compareTimestamps($,m){if(typeof $=="string"&&typeof m=="string"&&$.length===m.length)return __PRIVATE_primitiveComparator($,m);const L=__PRIVATE_normalizeTimestamp($),j=__PRIVATE_normalizeTimestamp(m),ee=__PRIVATE_primitiveComparator(L.seconds,j.seconds);return ee!==0?ee:__PRIVATE_primitiveComparator(L.nanos,j.nanos)}function canonicalId($){return __PRIVATE_canonifyValue($)}function __PRIVATE_canonifyValue($){return"nullValue"in $?"null":"booleanValue"in $?""+$.booleanValue:"integerValue"in $?""+$.integerValue:"doubleValue"in $?""+$.doubleValue:"timestampValue"in $?function(L){const j=__PRIVATE_normalizeTimestamp(L);return`time(${j.seconds},${j.nanos})`}($.timestampValue):"stringValue"in $?$.stringValue:"bytesValue"in $?function(L){return __PRIVATE_normalizeByteString(L).toBase64()}($.bytesValue):"referenceValue"in $?function(L){return DocumentKey.fromName(L).toString()}($.referenceValue):"geoPointValue"in $?function(L){return`geo(${L.latitude},${L.longitude})`}($.geoPointValue):"arrayValue"in $?function(L){let j="[",ee=!0;for(const re of L.values||[])ee?ee=!1:j+=",",j+=__PRIVATE_canonifyValue(re);return j+"]"}($.arrayValue):"mapValue"in $?function(L){const j=Object.keys(L.fields||{}).sort();let ee="{",re=!0;for(const le of j)re?re=!1:ee+=",",ee+=`${le}:${__PRIVATE_canonifyValue(L.fields[le])}`;return ee+"}"}($.mapValue):fail()}function __PRIVATE_refValue($,m){return{referenceValue:`projects/${$.projectId}/databases/${$.database}/documents/${m.path.canonicalString()}`}}function isInteger($){return!!$&&"integerValue"in $}function isArray$1($){return!!$&&"arrayValue"in $}function __PRIVATE_isNullValue($){return!!$&&"nullValue"in $}function __PRIVATE_isNanValue($){return!!$&&"doubleValue"in $&&isNaN(Number($.doubleValue))}function __PRIVATE_isMapValue($){return!!$&&"mapValue"in $}function __PRIVATE_deepClone($){if($.geoPointValue)return{geoPointValue:Object.assign({},$.geoPointValue)};if($.timestampValue&&typeof $.timestampValue=="object")return{timestampValue:Object.assign({},$.timestampValue)};if($.mapValue){const m={mapValue:{fields:{}}};return forEach($.mapValue.fields,(L,j)=>m.mapValue.fields[L]=__PRIVATE_deepClone(j)),m}if($.arrayValue){const m={arrayValue:{values:[]}};for(let L=0;L<($.arrayValue.values||[]).length;++L)m.arrayValue.values[L]=__PRIVATE_deepClone($.arrayValue.values[L]);return m}return Object.assign({},$)}function __PRIVATE_isMaxValue($){return((($.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ObjectValue{constructor(m){this.value=m}static empty(){return new ObjectValue({mapValue:{}})}field(m){if(m.isEmpty())return this.value;{let L=this.value;for(let j=0;j<m.length-1;++j)if(L=(L.mapValue.fields||{})[m.get(j)],!__PRIVATE_isMapValue(L))return null;return L=(L.mapValue.fields||{})[m.lastSegment()],L||null}}set(m,L){this.getFieldsMap(m.popLast())[m.lastSegment()]=__PRIVATE_deepClone(L)}setAll(m){let L=FieldPath$1.emptyPath(),j={},ee=[];m.forEach((le,ve)=>{if(!L.isImmediateParentOf(ve)){const ye=this.getFieldsMap(L);this.applyChanges(ye,j,ee),j={},ee=[],L=ve.popLast()}le?j[ve.lastSegment()]=__PRIVATE_deepClone(le):ee.push(ve.lastSegment())});const re=this.getFieldsMap(L);this.applyChanges(re,j,ee)}delete(m){const L=this.field(m.popLast());__PRIVATE_isMapValue(L)&&L.mapValue.fields&&delete L.mapValue.fields[m.lastSegment()]}isEqual(m){return __PRIVATE_valueEquals(this.value,m.value)}getFieldsMap(m){let L=this.value;L.mapValue.fields||(L.mapValue={fields:{}});for(let j=0;j<m.length;++j){let ee=L.mapValue.fields[m.get(j)];__PRIVATE_isMapValue(ee)&&ee.mapValue.fields||(ee={mapValue:{fields:{}}},L.mapValue.fields[m.get(j)]=ee),L=ee}return L.mapValue.fields}applyChanges(m,L,j){forEach(L,(ee,re)=>m[ee]=re);for(const ee of j)delete m[ee]}clone(){return new ObjectValue(__PRIVATE_deepClone(this.value))}}function __PRIVATE_extractFieldMask($){const m=[];return forEach($.fields,(L,j)=>{const ee=new FieldPath$1([L]);if(__PRIVATE_isMapValue(j)){const re=__PRIVATE_extractFieldMask(j.mapValue).fields;if(re.length===0)m.push(ee);else for(const le of re)m.push(ee.child(le))}else m.push(ee)}),new FieldMask(m)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MutableDocument{constructor(m,L,j,ee,re,le,ve){this.key=m,this.documentType=L,this.version=j,this.readTime=ee,this.createTime=re,this.data=le,this.documentState=ve}static newInvalidDocument(m){return new MutableDocument(m,0,SnapshotVersion.min(),SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),0)}static newFoundDocument(m,L,j,ee){return new MutableDocument(m,1,L,SnapshotVersion.min(),j,ee,0)}static newNoDocument(m,L){return new MutableDocument(m,2,L,SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),0)}static newUnknownDocument(m,L){return new MutableDocument(m,3,L,SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),2)}convertToFoundDocument(m,L){return!this.createTime.isEqual(SnapshotVersion.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=m),this.version=m,this.documentType=1,this.data=L,this.documentState=0,this}convertToNoDocument(m){return this.version=m,this.documentType=2,this.data=ObjectValue.empty(),this.documentState=0,this}convertToUnknownDocument(m){return this.version=m,this.documentType=3,this.data=ObjectValue.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=SnapshotVersion.min(),this}setReadTime(m){return this.readTime=m,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(m){return m instanceof MutableDocument&&this.key.isEqual(m.key)&&this.version.isEqual(m.version)&&this.documentType===m.documentType&&this.documentState===m.documentState&&this.data.isEqual(m.data)}mutableCopy(){return new MutableDocument(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bound{constructor(m,L){this.position=m,this.inclusive=L}}function __PRIVATE_boundCompareToDocument($,m,L){let j=0;for(let ee=0;ee<$.position.length;ee++){const re=m[ee],le=$.position[ee];if(re.field.isKeyField()?j=DocumentKey.comparator(DocumentKey.fromName(le.referenceValue),L.key):j=__PRIVATE_valueCompare(le,L.data.field(re.field)),re.dir==="desc"&&(j*=-1),j!==0)break}return j}function __PRIVATE_boundEquals($,m){if($===null)return m===null;if(m===null||$.inclusive!==m.inclusive||$.position.length!==m.position.length)return!1;for(let L=0;L<$.position.length;L++)if(!__PRIVATE_valueEquals($.position[L],m.position[L]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OrderBy{constructor(m,L="asc"){this.field=m,this.dir=L}}function __PRIVATE_orderByEquals($,m){return $.dir===m.dir&&$.field.isEqual(m.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Filter{}class FieldFilter extends Filter{constructor(m,L,j){super(),this.field=m,this.op=L,this.value=j}static create(m,L,j){return m.isKeyField()?L==="in"||L==="not-in"?this.createKeyFieldInFilter(m,L,j):new __PRIVATE_KeyFieldFilter(m,L,j):L==="array-contains"?new __PRIVATE_ArrayContainsFilter(m,j):L==="in"?new __PRIVATE_InFilter(m,j):L==="not-in"?new __PRIVATE_NotInFilter(m,j):L==="array-contains-any"?new __PRIVATE_ArrayContainsAnyFilter(m,j):new FieldFilter(m,L,j)}static createKeyFieldInFilter(m,L,j){return L==="in"?new __PRIVATE_KeyFieldInFilter(m,j):new __PRIVATE_KeyFieldNotInFilter(m,j)}matches(m){const L=m.data.field(this.field);return this.op==="!="?L!==null&&this.matchesComparison(__PRIVATE_valueCompare(L,this.value)):L!==null&&__PRIVATE_typeOrder(this.value)===__PRIVATE_typeOrder(L)&&this.matchesComparison(__PRIVATE_valueCompare(L,this.value))}matchesComparison(m){switch(this.op){case"<":return m<0;case"<=":return m<=0;case"==":return m===0;case"!=":return m!==0;case">":return m>0;case">=":return m>=0;default:return fail()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class CompositeFilter extends Filter{constructor(m,L){super(),this.filters=m,this.op=L,this.ue=null}static create(m,L){return new CompositeFilter(m,L)}matches(m){return __PRIVATE_compositeFilterIsConjunction(this)?this.filters.find(L=>!L.matches(m))===void 0:this.filters.find(L=>L.matches(m))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((m,L)=>m.concat(L.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function __PRIVATE_compositeFilterIsConjunction($){return $.op==="and"}function __PRIVATE_compositeFilterIsFlatConjunction($){return __PRIVATE_compositeFilterIsFlat($)&&__PRIVATE_compositeFilterIsConjunction($)}function __PRIVATE_compositeFilterIsFlat($){for(const m of $.filters)if(m instanceof CompositeFilter)return!1;return!0}function __PRIVATE_canonifyFilter($){if($ instanceof FieldFilter)return $.field.canonicalString()+$.op.toString()+canonicalId($.value);if(__PRIVATE_compositeFilterIsFlatConjunction($))return $.filters.map(m=>__PRIVATE_canonifyFilter(m)).join(",");{const m=$.filters.map(L=>__PRIVATE_canonifyFilter(L)).join(",");return`${$.op}(${m})`}}function __PRIVATE_filterEquals($,m){return $ instanceof FieldFilter?function(j,ee){return ee instanceof FieldFilter&&j.op===ee.op&&j.field.isEqual(ee.field)&&__PRIVATE_valueEquals(j.value,ee.value)}($,m):$ instanceof CompositeFilter?function(j,ee){return ee instanceof CompositeFilter&&j.op===ee.op&&j.filters.length===ee.filters.length?j.filters.reduce((re,le,ve)=>re&&__PRIVATE_filterEquals(le,ee.filters[ve]),!0):!1}($,m):void fail()}function __PRIVATE_stringifyFilter($){return $ instanceof FieldFilter?function(L){return`${L.field.canonicalString()} ${L.op} ${canonicalId(L.value)}`}($):$ instanceof CompositeFilter?function(L){return L.op.toString()+" {"+L.getFilters().map(__PRIVATE_stringifyFilter).join(" ,")+"}"}($):"Filter"}class __PRIVATE_KeyFieldFilter extends FieldFilter{constructor(m,L,j){super(m,L,j),this.key=DocumentKey.fromName(j.referenceValue)}matches(m){const L=DocumentKey.comparator(m.key,this.key);return this.matchesComparison(L)}}class __PRIVATE_KeyFieldInFilter extends FieldFilter{constructor(m,L){super(m,"in",L),this.keys=__PRIVATE_extractDocumentKeysFromArrayValue("in",L)}matches(m){return this.keys.some(L=>L.isEqual(m.key))}}class __PRIVATE_KeyFieldNotInFilter extends FieldFilter{constructor(m,L){super(m,"not-in",L),this.keys=__PRIVATE_extractDocumentKeysFromArrayValue("not-in",L)}matches(m){return!this.keys.some(L=>L.isEqual(m.key))}}function __PRIVATE_extractDocumentKeysFromArrayValue($,m){var L;return(((L=m.arrayValue)===null||L===void 0?void 0:L.values)||[]).map(j=>DocumentKey.fromName(j.referenceValue))}class __PRIVATE_ArrayContainsFilter extends FieldFilter{constructor(m,L){super(m,"array-contains",L)}matches(m){const L=m.data.field(this.field);return isArray$1(L)&&__PRIVATE_arrayValueContains(L.arrayValue,this.value)}}class __PRIVATE_InFilter extends FieldFilter{constructor(m,L){super(m,"in",L)}matches(m){const L=m.data.field(this.field);return L!==null&&__PRIVATE_arrayValueContains(this.value.arrayValue,L)}}class __PRIVATE_NotInFilter extends FieldFilter{constructor(m,L){super(m,"not-in",L)}matches(m){if(__PRIVATE_arrayValueContains(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const L=m.data.field(this.field);return L!==null&&!__PRIVATE_arrayValueContains(this.value.arrayValue,L)}}class __PRIVATE_ArrayContainsAnyFilter extends FieldFilter{constructor(m,L){super(m,"array-contains-any",L)}matches(m){const L=m.data.field(this.field);return!(!isArray$1(L)||!L.arrayValue.values)&&L.arrayValue.values.some(j=>__PRIVATE_arrayValueContains(this.value.arrayValue,j))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_TargetImpl{constructor(m,L=null,j=[],ee=[],re=null,le=null,ve=null){this.path=m,this.collectionGroup=L,this.orderBy=j,this.filters=ee,this.limit=re,this.startAt=le,this.endAt=ve,this.ce=null}}function __PRIVATE_newTarget($,m=null,L=[],j=[],ee=null,re=null,le=null){return new __PRIVATE_TargetImpl($,m,L,j,ee,re,le)}function __PRIVATE_canonifyTarget($){const m=__PRIVATE_debugCast($);if(m.ce===null){let L=m.path.canonicalString();m.collectionGroup!==null&&(L+="|cg:"+m.collectionGroup),L+="|f:",L+=m.filters.map(j=>__PRIVATE_canonifyFilter(j)).join(","),L+="|ob:",L+=m.orderBy.map(j=>function(re){return re.field.canonicalString()+re.dir}(j)).join(","),__PRIVATE_isNullOrUndefined(m.limit)||(L+="|l:",L+=m.limit),m.startAt&&(L+="|lb:",L+=m.startAt.inclusive?"b:":"a:",L+=m.startAt.position.map(j=>canonicalId(j)).join(",")),m.endAt&&(L+="|ub:",L+=m.endAt.inclusive?"a:":"b:",L+=m.endAt.position.map(j=>canonicalId(j)).join(",")),m.ce=L}return m.ce}function __PRIVATE_targetEquals($,m){if($.limit!==m.limit||$.orderBy.length!==m.orderBy.length)return!1;for(let L=0;L<$.orderBy.length;L++)if(!__PRIVATE_orderByEquals($.orderBy[L],m.orderBy[L]))return!1;if($.filters.length!==m.filters.length)return!1;for(let L=0;L<$.filters.length;L++)if(!__PRIVATE_filterEquals($.filters[L],m.filters[L]))return!1;return $.collectionGroup===m.collectionGroup&&!!$.path.isEqual(m.path)&&!!__PRIVATE_boundEquals($.startAt,m.startAt)&&__PRIVATE_boundEquals($.endAt,m.endAt)}function __PRIVATE_targetIsDocumentTarget($){return DocumentKey.isDocumentKey($.path)&&$.collectionGroup===null&&$.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryImpl{constructor(m,L=null,j=[],ee=[],re=null,le="F",ve=null,ye=null){this.path=m,this.collectionGroup=L,this.explicitOrderBy=j,this.filters=ee,this.limit=re,this.limitType=le,this.startAt=ve,this.endAt=ye,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function __PRIVATE_newQuery($,m,L,j,ee,re,le,ve){return new __PRIVATE_QueryImpl($,m,L,j,ee,re,le,ve)}function __PRIVATE_newQueryForPath($){return new __PRIVATE_QueryImpl($)}function __PRIVATE_queryMatchesAllDocuments($){return $.filters.length===0&&$.limit===null&&$.startAt==null&&$.endAt==null&&($.explicitOrderBy.length===0||$.explicitOrderBy.length===1&&$.explicitOrderBy[0].field.isKeyField())}function __PRIVATE_isCollectionGroupQuery($){return $.collectionGroup!==null}function __PRIVATE_queryNormalizedOrderBy($){const m=__PRIVATE_debugCast($);if(m.le===null){m.le=[];const L=new Set;for(const re of m.explicitOrderBy)m.le.push(re),L.add(re.field.canonicalString());const j=m.explicitOrderBy.length>0?m.explicitOrderBy[m.explicitOrderBy.length-1].dir:"asc";(function(le){let ve=new SortedSet(FieldPath$1.comparator);return le.filters.forEach(ye=>{ye.getFlattenedFilters().forEach(Ee=>{Ee.isInequality()&&(ve=ve.add(Ee.field))})}),ve})(m).forEach(re=>{L.has(re.canonicalString())||re.isKeyField()||m.le.push(new OrderBy(re,j))}),L.has(FieldPath$1.keyField().canonicalString())||m.le.push(new OrderBy(FieldPath$1.keyField(),j))}return m.le}function __PRIVATE_queryToTarget($){const m=__PRIVATE_debugCast($);return m.he||(m.he=__PRIVATE__queryToTarget(m,__PRIVATE_queryNormalizedOrderBy($))),m.he}function __PRIVATE__queryToTarget($,m){if($.limitType==="F")return __PRIVATE_newTarget($.path,$.collectionGroup,m,$.filters,$.limit,$.startAt,$.endAt);{m=m.map(ee=>{const re=ee.dir==="desc"?"asc":"desc";return new OrderBy(ee.field,re)});const L=$.endAt?new Bound($.endAt.position,$.endAt.inclusive):null,j=$.startAt?new Bound($.startAt.position,$.startAt.inclusive):null;return __PRIVATE_newTarget($.path,$.collectionGroup,m,$.filters,$.limit,L,j)}}function __PRIVATE_queryWithAddedFilter($,m){const L=$.filters.concat([m]);return new __PRIVATE_QueryImpl($.path,$.collectionGroup,$.explicitOrderBy.slice(),L,$.limit,$.limitType,$.startAt,$.endAt)}function __PRIVATE_queryWithLimit($,m,L){return new __PRIVATE_QueryImpl($.path,$.collectionGroup,$.explicitOrderBy.slice(),$.filters.slice(),m,L,$.startAt,$.endAt)}function __PRIVATE_queryEquals($,m){return __PRIVATE_targetEquals(__PRIVATE_queryToTarget($),__PRIVATE_queryToTarget(m))&&$.limitType===m.limitType}function __PRIVATE_canonifyQuery($){return`${__PRIVATE_canonifyTarget(__PRIVATE_queryToTarget($))}|lt:${$.limitType}`}function __PRIVATE_stringifyQuery($){return`Query(target=${function(L){let j=L.path.canonicalString();return L.collectionGroup!==null&&(j+=" collectionGroup="+L.collectionGroup),L.filters.length>0&&(j+=`, filters: [${L.filters.map(ee=>__PRIVATE_stringifyFilter(ee)).join(", ")}]`),__PRIVATE_isNullOrUndefined(L.limit)||(j+=", limit: "+L.limit),L.orderBy.length>0&&(j+=`, orderBy: [${L.orderBy.map(ee=>function(le){return`${le.field.canonicalString()} (${le.dir})`}(ee)).join(", ")}]`),L.startAt&&(j+=", startAt: ",j+=L.startAt.inclusive?"b:":"a:",j+=L.startAt.position.map(ee=>canonicalId(ee)).join(",")),L.endAt&&(j+=", endAt: ",j+=L.endAt.inclusive?"a:":"b:",j+=L.endAt.position.map(ee=>canonicalId(ee)).join(",")),`Target(${j})`}(__PRIVATE_queryToTarget($))}; limitType=${$.limitType})`}function __PRIVATE_queryMatches($,m){return m.isFoundDocument()&&function(j,ee){const re=ee.key.path;return j.collectionGroup!==null?ee.key.hasCollectionId(j.collectionGroup)&&j.path.isPrefixOf(re):DocumentKey.isDocumentKey(j.path)?j.path.isEqual(re):j.path.isImmediateParentOf(re)}($,m)&&function(j,ee){for(const re of __PRIVATE_queryNormalizedOrderBy(j))if(!re.field.isKeyField()&&ee.data.field(re.field)===null)return!1;return!0}($,m)&&function(j,ee){for(const re of j.filters)if(!re.matches(ee))return!1;return!0}($,m)&&function(j,ee){return!(j.startAt&&!function(le,ve,ye){const Ee=__PRIVATE_boundCompareToDocument(le,ve,ye);return le.inclusive?Ee<=0:Ee<0}(j.startAt,__PRIVATE_queryNormalizedOrderBy(j),ee)||j.endAt&&!function(le,ve,ye){const Ee=__PRIVATE_boundCompareToDocument(le,ve,ye);return le.inclusive?Ee>=0:Ee>0}(j.endAt,__PRIVATE_queryNormalizedOrderBy(j),ee))}($,m)}function __PRIVATE_queryCollectionGroup($){return $.collectionGroup||($.path.length%2==1?$.path.lastSegment():$.path.get($.path.length-2))}function __PRIVATE_newQueryComparator($){return(m,L)=>{let j=!1;for(const ee of __PRIVATE_queryNormalizedOrderBy($)){const re=__PRIVATE_compareDocs(ee,m,L);if(re!==0)return re;j=j||ee.field.isKeyField()}return 0}}function __PRIVATE_compareDocs($,m,L){const j=$.field.isKeyField()?DocumentKey.comparator(m.key,L.key):function(re,le,ve){const ye=le.data.field(re),Ee=ve.data.field(re);return ye!==null&&Ee!==null?__PRIVATE_valueCompare(ye,Ee):fail()}($.field,m,L);switch($.dir){case"asc":return j;case"desc":return-1*j;default:return fail()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ObjectMap{constructor(m,L){this.mapKeyFn=m,this.equalsFn=L,this.inner={},this.innerSize=0}get(m){const L=this.mapKeyFn(m),j=this.inner[L];if(j!==void 0){for(const[ee,re]of j)if(this.equalsFn(ee,m))return re}}has(m){return this.get(m)!==void 0}set(m,L){const j=this.mapKeyFn(m),ee=this.inner[j];if(ee===void 0)return this.inner[j]=[[m,L]],void this.innerSize++;for(let re=0;re<ee.length;re++)if(this.equalsFn(ee[re][0],m))return void(ee[re]=[m,L]);ee.push([m,L]),this.innerSize++}delete(m){const L=this.mapKeyFn(m),j=this.inner[L];if(j===void 0)return!1;for(let ee=0;ee<j.length;ee++)if(this.equalsFn(j[ee][0],m))return j.length===1?delete this.inner[L]:j.splice(ee,1),this.innerSize--,!0;return!1}forEach(m){forEach(this.inner,(L,j)=>{for(const[ee,re]of j)m(ee,re)})}isEmpty(){return isEmpty$1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie=new SortedMap(DocumentKey.comparator);function __PRIVATE_mutableDocumentMap(){return ie}const se$1=new SortedMap(DocumentKey.comparator);function documentMap(...$){let m=se$1;for(const L of $)m=m.insert(L.key,L);return m}function __PRIVATE_convertOverlayedDocumentMapToDocumentMap($){let m=se$1;return $.forEach((L,j)=>m=m.insert(L,j.overlayedDocument)),m}function __PRIVATE_newOverlayMap(){return __PRIVATE_newDocumentKeyMap()}function __PRIVATE_newMutationMap(){return __PRIVATE_newDocumentKeyMap()}function __PRIVATE_newDocumentKeyMap(){return new ObjectMap($=>$.toString(),($,m)=>$.isEqual(m))}const oe=new SortedMap(DocumentKey.comparator),_e=new SortedSet(DocumentKey.comparator);function __PRIVATE_documentKeySet(...$){let m=_e;for(const L of $)m=m.add(L);return m}const ae=new SortedSet(__PRIVATE_primitiveComparator);function __PRIVATE_targetIdSet(){return ae}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_toDouble($,m){if($.useProto3Json){if(isNaN(m))return{doubleValue:"NaN"};if(m===1/0)return{doubleValue:"Infinity"};if(m===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:__PRIVATE_isNegativeZero(m)?"-0":m}}function __PRIVATE_toInteger($){return{integerValue:""+$}}function toNumber($,m){return isSafeInteger(m)?__PRIVATE_toInteger(m):__PRIVATE_toDouble($,m)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TransformOperation{constructor(){this._=void 0}}function __PRIVATE_applyTransformOperationToLocalView($,m,L){return $ instanceof __PRIVATE_ServerTimestampTransform?function(ee,re){const le={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:ee.seconds,nanos:ee.nanoseconds}}}};return re&&__PRIVATE_isServerTimestamp(re)&&(re=__PRIVATE_getPreviousValue(re)),re&&(le.fields.__previous_value__=re),{mapValue:le}}(L,m):$ instanceof __PRIVATE_ArrayUnionTransformOperation?__PRIVATE_applyArrayUnionTransformOperation($,m):$ instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_applyArrayRemoveTransformOperation($,m):function(ee,re){const le=__PRIVATE_computeTransformOperationBaseValue(ee,re),ve=asNumber(le)+asNumber(ee.Ie);return isInteger(le)&&isInteger(ee.Ie)?__PRIVATE_toInteger(ve):__PRIVATE_toDouble(ee.serializer,ve)}($,m)}function __PRIVATE_applyTransformOperationToRemoteDocument($,m,L){return $ instanceof __PRIVATE_ArrayUnionTransformOperation?__PRIVATE_applyArrayUnionTransformOperation($,m):$ instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_applyArrayRemoveTransformOperation($,m):L}function __PRIVATE_computeTransformOperationBaseValue($,m){return $ instanceof __PRIVATE_NumericIncrementTransformOperation?function(j){return isInteger(j)||function(re){return!!re&&"doubleValue"in re}(j)}(m)?m:{integerValue:0}:null}class __PRIVATE_ServerTimestampTransform extends TransformOperation{}class __PRIVATE_ArrayUnionTransformOperation extends TransformOperation{constructor(m){super(),this.elements=m}}function __PRIVATE_applyArrayUnionTransformOperation($,m){const L=__PRIVATE_coercedFieldValuesArray(m);for(const j of $.elements)L.some(ee=>__PRIVATE_valueEquals(ee,j))||L.push(j);return{arrayValue:{values:L}}}class __PRIVATE_ArrayRemoveTransformOperation extends TransformOperation{constructor(m){super(),this.elements=m}}function __PRIVATE_applyArrayRemoveTransformOperation($,m){let L=__PRIVATE_coercedFieldValuesArray(m);for(const j of $.elements)L=L.filter(ee=>!__PRIVATE_valueEquals(ee,j));return{arrayValue:{values:L}}}class __PRIVATE_NumericIncrementTransformOperation extends TransformOperation{constructor(m,L){super(),this.serializer=m,this.Ie=L}}function asNumber($){return __PRIVATE_normalizeNumber($.integerValue||$.doubleValue)}function __PRIVATE_coercedFieldValuesArray($){return isArray$1($)&&$.arrayValue.values?$.arrayValue.values.slice():[]}function __PRIVATE_fieldTransformEquals($,m){return $.field.isEqual(m.field)&&function(j,ee){return j instanceof __PRIVATE_ArrayUnionTransformOperation&&ee instanceof __PRIVATE_ArrayUnionTransformOperation||j instanceof __PRIVATE_ArrayRemoveTransformOperation&&ee instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_arrayEquals(j.elements,ee.elements,__PRIVATE_valueEquals):j instanceof __PRIVATE_NumericIncrementTransformOperation&&ee instanceof __PRIVATE_NumericIncrementTransformOperation?__PRIVATE_valueEquals(j.Ie,ee.Ie):j instanceof __PRIVATE_ServerTimestampTransform&&ee instanceof __PRIVATE_ServerTimestampTransform}($.transform,m.transform)}class MutationResult{constructor(m,L){this.version=m,this.transformResults=L}}class Precondition{constructor(m,L){this.updateTime=m,this.exists=L}static none(){return new Precondition}static exists(m){return new Precondition(void 0,m)}static updateTime(m){return new Precondition(m)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(m){return this.exists===m.exists&&(this.updateTime?!!m.updateTime&&this.updateTime.isEqual(m.updateTime):!m.updateTime)}}function __PRIVATE_preconditionIsValidForDocument($,m){return $.updateTime!==void 0?m.isFoundDocument()&&m.version.isEqual($.updateTime):$.exists===void 0||$.exists===m.isFoundDocument()}class Mutation{}function __PRIVATE_calculateOverlayMutation($,m){if(!$.hasLocalMutations||m&&m.fields.length===0)return null;if(m===null)return $.isNoDocument()?new __PRIVATE_DeleteMutation($.key,Precondition.none()):new __PRIVATE_SetMutation($.key,$.data,Precondition.none());{const L=$.data,j=ObjectValue.empty();let ee=new SortedSet(FieldPath$1.comparator);for(let re of m.fields)if(!ee.has(re)){let le=L.field(re);le===null&&re.length>1&&(re=re.popLast(),le=L.field(re)),le===null?j.delete(re):j.set(re,le),ee=ee.add(re)}return new __PRIVATE_PatchMutation($.key,j,new FieldMask(ee.toArray()),Precondition.none())}}function __PRIVATE_mutationApplyToRemoteDocument($,m,L){$ instanceof __PRIVATE_SetMutation?function(ee,re,le){const ve=ee.value.clone(),ye=__PRIVATE_serverTransformResults(ee.fieldTransforms,re,le.transformResults);ve.setAll(ye),re.convertToFoundDocument(le.version,ve).setHasCommittedMutations()}($,m,L):$ instanceof __PRIVATE_PatchMutation?function(ee,re,le){if(!__PRIVATE_preconditionIsValidForDocument(ee.precondition,re))return void re.convertToUnknownDocument(le.version);const ve=__PRIVATE_serverTransformResults(ee.fieldTransforms,re,le.transformResults),ye=re.data;ye.setAll(__PRIVATE_getPatch(ee)),ye.setAll(ve),re.convertToFoundDocument(le.version,ye).setHasCommittedMutations()}($,m,L):function(ee,re,le){re.convertToNoDocument(le.version).setHasCommittedMutations()}(0,m,L)}function __PRIVATE_mutationApplyToLocalView($,m,L,j){return $ instanceof __PRIVATE_SetMutation?function(re,le,ve,ye){if(!__PRIVATE_preconditionIsValidForDocument(re.precondition,le))return ve;const Ee=re.value.clone(),Me=__PRIVATE_localTransformResults(re.fieldTransforms,ye,le);return Ee.setAll(Me),le.convertToFoundDocument(le.version,Ee).setHasLocalMutations(),null}($,m,L,j):$ instanceof __PRIVATE_PatchMutation?function(re,le,ve,ye){if(!__PRIVATE_preconditionIsValidForDocument(re.precondition,le))return ve;const Ee=__PRIVATE_localTransformResults(re.fieldTransforms,ye,le),Me=le.data;return Me.setAll(__PRIVATE_getPatch(re)),Me.setAll(Ee),le.convertToFoundDocument(le.version,Me).setHasLocalMutations(),ve===null?null:ve.unionWith(re.fieldMask.fields).unionWith(re.fieldTransforms.map(Ce=>Ce.field))}($,m,L,j):function(re,le,ve){return __PRIVATE_preconditionIsValidForDocument(re.precondition,le)?(le.convertToNoDocument(le.version).setHasLocalMutations(),null):ve}($,m,L)}function __PRIVATE_mutationExtractBaseValue($,m){let L=null;for(const j of $.fieldTransforms){const ee=m.data.field(j.field),re=__PRIVATE_computeTransformOperationBaseValue(j.transform,ee||null);re!=null&&(L===null&&(L=ObjectValue.empty()),L.set(j.field,re))}return L||null}function __PRIVATE_mutationEquals($,m){return $.type===m.type&&!!$.key.isEqual(m.key)&&!!$.precondition.isEqual(m.precondition)&&!!function(j,ee){return j===void 0&&ee===void 0||!(!j||!ee)&&__PRIVATE_arrayEquals(j,ee,(re,le)=>__PRIVATE_fieldTransformEquals(re,le))}($.fieldTransforms,m.fieldTransforms)&&($.type===0?$.value.isEqual(m.value):$.type!==1||$.data.isEqual(m.data)&&$.fieldMask.isEqual(m.fieldMask))}class __PRIVATE_SetMutation extends Mutation{constructor(m,L,j,ee=[]){super(),this.key=m,this.value=L,this.precondition=j,this.fieldTransforms=ee,this.type=0}getFieldMask(){return null}}class __PRIVATE_PatchMutation extends Mutation{constructor(m,L,j,ee,re=[]){super(),this.key=m,this.data=L,this.fieldMask=j,this.precondition=ee,this.fieldTransforms=re,this.type=1}getFieldMask(){return this.fieldMask}}function __PRIVATE_getPatch($){const m=new Map;return $.fieldMask.fields.forEach(L=>{if(!L.isEmpty()){const j=$.data.field(L);m.set(L,j)}}),m}function __PRIVATE_serverTransformResults($,m,L){const j=new Map;__PRIVATE_hardAssert($.length===L.length);for(let ee=0;ee<L.length;ee++){const re=$[ee],le=re.transform,ve=m.data.field(re.field);j.set(re.field,__PRIVATE_applyTransformOperationToRemoteDocument(le,ve,L[ee]))}return j}function __PRIVATE_localTransformResults($,m,L){const j=new Map;for(const ee of $){const re=ee.transform,le=L.data.field(ee.field);j.set(ee.field,__PRIVATE_applyTransformOperationToLocalView(re,le,m))}return j}class __PRIVATE_DeleteMutation extends Mutation{constructor(m,L){super(),this.key=m,this.precondition=L,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class __PRIVATE_VerifyMutation extends Mutation{constructor(m,L){super(),this.key=m,this.precondition=L,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MutationBatch{constructor(m,L,j,ee){this.batchId=m,this.localWriteTime=L,this.baseMutations=j,this.mutations=ee}applyToRemoteDocument(m,L){const j=L.mutationResults;for(let ee=0;ee<this.mutations.length;ee++){const re=this.mutations[ee];re.key.isEqual(m.key)&&__PRIVATE_mutationApplyToRemoteDocument(re,m,j[ee])}}applyToLocalView(m,L){for(const j of this.baseMutations)j.key.isEqual(m.key)&&(L=__PRIVATE_mutationApplyToLocalView(j,m,L,this.localWriteTime));for(const j of this.mutations)j.key.isEqual(m.key)&&(L=__PRIVATE_mutationApplyToLocalView(j,m,L,this.localWriteTime));return L}applyToLocalDocumentSet(m,L){const j=__PRIVATE_newMutationMap();return this.mutations.forEach(ee=>{const re=m.get(ee.key),le=re.overlayedDocument;let ve=this.applyToLocalView(le,re.mutatedFields);ve=L.has(ee.key)?null:ve;const ye=__PRIVATE_calculateOverlayMutation(le,ve);ye!==null&&j.set(ee.key,ye),le.isValidDocument()||le.convertToNoDocument(SnapshotVersion.min())}),j}keys(){return this.mutations.reduce((m,L)=>m.add(L.key),__PRIVATE_documentKeySet())}isEqual(m){return this.batchId===m.batchId&&__PRIVATE_arrayEquals(this.mutations,m.mutations,(L,j)=>__PRIVATE_mutationEquals(L,j))&&__PRIVATE_arrayEquals(this.baseMutations,m.baseMutations,(L,j)=>__PRIVATE_mutationEquals(L,j))}}class MutationBatchResult{constructor(m,L,j,ee){this.batch=m,this.commitVersion=L,this.mutationResults=j,this.docVersions=ee}static from(m,L,j){__PRIVATE_hardAssert(m.mutations.length===j.length);let ee=function(){return oe}();const re=m.mutations;for(let le=0;le<re.length;le++)ee=ee.insert(re[le].key,j[le].version);return new MutationBatchResult(m,L,j,ee)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Overlay{constructor(m,L){this.largestBatchId=m,this.mutation=L}getKey(){return this.mutation.key}isEqual(m){return m!==null&&this.mutation===m.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ExistenceFilter{constructor(m,L){this.count=m,this.unchangedNames=L}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ue,ce;function __PRIVATE_isPermanentError($){switch($){default:return fail();case D.CANCELLED:case D.UNKNOWN:case D.DEADLINE_EXCEEDED:case D.RESOURCE_EXHAUSTED:case D.INTERNAL:case D.UNAVAILABLE:case D.UNAUTHENTICATED:return!1;case D.INVALID_ARGUMENT:case D.NOT_FOUND:case D.ALREADY_EXISTS:case D.PERMISSION_DENIED:case D.FAILED_PRECONDITION:case D.ABORTED:case D.OUT_OF_RANGE:case D.UNIMPLEMENTED:case D.DATA_LOSS:return!0}}function __PRIVATE_mapCodeFromRpcCode($){if($===void 0)return __PRIVATE_logError("GRPC error has no .code"),D.UNKNOWN;switch($){case ue.OK:return D.OK;case ue.CANCELLED:return D.CANCELLED;case ue.UNKNOWN:return D.UNKNOWN;case ue.DEADLINE_EXCEEDED:return D.DEADLINE_EXCEEDED;case ue.RESOURCE_EXHAUSTED:return D.RESOURCE_EXHAUSTED;case ue.INTERNAL:return D.INTERNAL;case ue.UNAVAILABLE:return D.UNAVAILABLE;case ue.UNAUTHENTICATED:return D.UNAUTHENTICATED;case ue.INVALID_ARGUMENT:return D.INVALID_ARGUMENT;case ue.NOT_FOUND:return D.NOT_FOUND;case ue.ALREADY_EXISTS:return D.ALREADY_EXISTS;case ue.PERMISSION_DENIED:return D.PERMISSION_DENIED;case ue.FAILED_PRECONDITION:return D.FAILED_PRECONDITION;case ue.ABORTED:return D.ABORTED;case ue.OUT_OF_RANGE:return D.OUT_OF_RANGE;case ue.UNIMPLEMENTED:return D.UNIMPLEMENTED;case ue.DATA_LOSS:return D.DATA_LOSS;default:return fail()}}(ce=ue||(ue={}))[ce.OK=0]="OK",ce[ce.CANCELLED=1]="CANCELLED",ce[ce.UNKNOWN=2]="UNKNOWN",ce[ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ce[ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ce[ce.NOT_FOUND=5]="NOT_FOUND",ce[ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",ce[ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",ce[ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",ce[ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ce[ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ce[ce.ABORTED=10]="ABORTED",ce[ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",ce[ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",ce[ce.INTERNAL=13]="INTERNAL",ce[ce.UNAVAILABLE=14]="UNAVAILABLE",ce[ce.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_newTextEncoder(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const he=new Integer([4294967295,4294967295],0);function __PRIVATE_getMd5HashValue($){const m=__PRIVATE_newTextEncoder().encode($),L=new Md5;return L.update(m),new Uint8Array(L.digest())}function __PRIVATE_get64BitUints($){const m=new DataView($.buffer),L=m.getUint32(0,!0),j=m.getUint32(4,!0),ee=m.getUint32(8,!0),re=m.getUint32(12,!0);return[new Integer([L,j],0),new Integer([ee,re],0)]}class BloomFilter{constructor(m,L,j){if(this.bitmap=m,this.padding=L,this.hashCount=j,L<0||L>=8)throw new __PRIVATE_BloomFilterError(`Invalid padding: ${L}`);if(j<0)throw new __PRIVATE_BloomFilterError(`Invalid hash count: ${j}`);if(m.length>0&&this.hashCount===0)throw new __PRIVATE_BloomFilterError(`Invalid hash count: ${j}`);if(m.length===0&&L!==0)throw new __PRIVATE_BloomFilterError(`Invalid padding when bitmap length is 0: ${L}`);this.Te=8*m.length-L,this.Ee=Integer.fromNumber(this.Te)}de(m,L,j){let ee=m.add(L.multiply(Integer.fromNumber(j)));return ee.compare(he)===1&&(ee=new Integer([ee.getBits(0),ee.getBits(1)],0)),ee.modulo(this.Ee).toNumber()}Ae(m){return(this.bitmap[Math.floor(m/8)]&1<<m%8)!=0}mightContain(m){if(this.Te===0)return!1;const L=__PRIVATE_getMd5HashValue(m),[j,ee]=__PRIVATE_get64BitUints(L);for(let re=0;re<this.hashCount;re++){const le=this.de(j,ee,re);if(!this.Ae(le))return!1}return!0}static create(m,L,j){const ee=m%8==0?0:8-m%8,re=new Uint8Array(Math.ceil(m/8)),le=new BloomFilter(re,ee,L);return j.forEach(ve=>le.insert(ve)),le}insert(m){if(this.Te===0)return;const L=__PRIVATE_getMd5HashValue(m),[j,ee]=__PRIVATE_get64BitUints(L);for(let re=0;re<this.hashCount;re++){const le=this.de(j,ee,re);this.Re(le)}}Re(m){const L=Math.floor(m/8),j=m%8;this.bitmap[L]|=1<<j}}class __PRIVATE_BloomFilterError extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RemoteEvent{constructor(m,L,j,ee,re){this.snapshotVersion=m,this.targetChanges=L,this.targetMismatches=j,this.documentUpdates=ee,this.resolvedLimboDocuments=re}static createSynthesizedRemoteEventForCurrentChange(m,L,j){const ee=new Map;return ee.set(m,TargetChange.createSynthesizedTargetChangeForCurrentChange(m,L,j)),new RemoteEvent(SnapshotVersion.min(),ee,new SortedMap(__PRIVATE_primitiveComparator),__PRIVATE_mutableDocumentMap(),__PRIVATE_documentKeySet())}}class TargetChange{constructor(m,L,j,ee,re){this.resumeToken=m,this.current=L,this.addedDocuments=j,this.modifiedDocuments=ee,this.removedDocuments=re}static createSynthesizedTargetChangeForCurrentChange(m,L,j){return new TargetChange(j,L,__PRIVATE_documentKeySet(),__PRIVATE_documentKeySet(),__PRIVATE_documentKeySet())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_DocumentWatchChange{constructor(m,L,j,ee){this.Ve=m,this.removedTargetIds=L,this.key=j,this.me=ee}}class __PRIVATE_ExistenceFilterChange{constructor(m,L){this.targetId=m,this.fe=L}}class __PRIVATE_WatchTargetChange{constructor(m,L,j=ByteString.EMPTY_BYTE_STRING,ee=null){this.state=m,this.targetIds=L,this.resumeToken=j,this.cause=ee}}class __PRIVATE_TargetState{constructor(){this.ge=0,this.pe=__PRIVATE_snapshotChangesMap(),this.ye=ByteString.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(m){m.approximateByteSize()>0&&(this.Se=!0,this.ye=m)}ve(){let m=__PRIVATE_documentKeySet(),L=__PRIVATE_documentKeySet(),j=__PRIVATE_documentKeySet();return this.pe.forEach((ee,re)=>{switch(re){case 0:m=m.add(ee);break;case 2:L=L.add(ee);break;case 1:j=j.add(ee);break;default:fail()}}),new TargetChange(this.ye,this.we,m,L,j)}Fe(){this.Se=!1,this.pe=__PRIVATE_snapshotChangesMap()}Me(m,L){this.Se=!0,this.pe=this.pe.insert(m,L)}xe(m){this.Se=!0,this.pe=this.pe.remove(m)}Oe(){this.ge+=1}Ne(){this.ge-=1,__PRIVATE_hardAssert(this.ge>=0)}Le(){this.Se=!0,this.we=!0}}class __PRIVATE_WatchChangeAggregator{constructor(m){this.Be=m,this.ke=new Map,this.qe=__PRIVATE_mutableDocumentMap(),this.Qe=__PRIVATE_documentTargetMap(),this.Ke=new SortedMap(__PRIVATE_primitiveComparator)}$e(m){for(const L of m.Ve)m.me&&m.me.isFoundDocument()?this.Ue(L,m.me):this.We(L,m.key,m.me);for(const L of m.removedTargetIds)this.We(L,m.key,m.me)}Ge(m){this.forEachTarget(m,L=>{const j=this.ze(L);switch(m.state){case 0:this.je(L)&&j.Ce(m.resumeToken);break;case 1:j.Ne(),j.be||j.Fe(),j.Ce(m.resumeToken);break;case 2:j.Ne(),j.be||this.removeTarget(L);break;case 3:this.je(L)&&(j.Le(),j.Ce(m.resumeToken));break;case 4:this.je(L)&&(this.He(L),j.Ce(m.resumeToken));break;default:fail()}})}forEachTarget(m,L){m.targetIds.length>0?m.targetIds.forEach(L):this.ke.forEach((j,ee)=>{this.je(ee)&&L(ee)})}Je(m){const L=m.targetId,j=m.fe.count,ee=this.Ye(L);if(ee){const re=ee.target;if(__PRIVATE_targetIsDocumentTarget(re))if(j===0){const le=new DocumentKey(re.path);this.We(L,le,MutableDocument.newNoDocument(le,SnapshotVersion.min()))}else __PRIVATE_hardAssert(j===1);else{const le=this.Ze(L);if(le!==j){const ve=this.Xe(m),ye=ve?this.et(ve,m,le):1;if(ye!==0){this.He(L);const Ee=ye===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(L,Ee)}}}}}Xe(m){const L=m.fe.unchangedNames;if(!L||!L.bits)return null;const{bits:{bitmap:j="",padding:ee=0},hashCount:re=0}=L;let le,ve;try{le=__PRIVATE_normalizeByteString(j).toUint8Array()}catch(ye){if(ye instanceof __PRIVATE_Base64DecodeError)return __PRIVATE_logWarn("Decoding the base64 bloom filter in existence filter failed ("+ye.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw ye}try{ve=new BloomFilter(le,ee,re)}catch(ye){return __PRIVATE_logWarn(ye instanceof __PRIVATE_BloomFilterError?"BloomFilter error: ":"Applying bloom filter failed: ",ye),null}return ve.Te===0?null:ve}et(m,L,j){return L.fe.count===j-this.rt(m,L.targetId)?0:2}rt(m,L){const j=this.Be.getRemoteKeysForTarget(L);let ee=0;return j.forEach(re=>{const le=this.Be.nt(),ve=`projects/${le.projectId}/databases/${le.database}/documents/${re.path.canonicalString()}`;m.mightContain(ve)||(this.We(L,re,null),ee++)}),ee}it(m){const L=new Map;this.ke.forEach((re,le)=>{const ve=this.Ye(le);if(ve){if(re.current&&__PRIVATE_targetIsDocumentTarget(ve.target)){const ye=new DocumentKey(ve.target.path);this.qe.get(ye)!==null||this.st(le,ye)||this.We(le,ye,MutableDocument.newNoDocument(ye,m))}re.De&&(L.set(le,re.ve()),re.Fe())}});let j=__PRIVATE_documentKeySet();this.Qe.forEach((re,le)=>{let ve=!0;le.forEachWhile(ye=>{const Ee=this.Ye(ye);return!Ee||Ee.purpose==="TargetPurposeLimboResolution"||(ve=!1,!1)}),ve&&(j=j.add(re))}),this.qe.forEach((re,le)=>le.setReadTime(m));const ee=new RemoteEvent(m,L,this.Ke,this.qe,j);return this.qe=__PRIVATE_mutableDocumentMap(),this.Qe=__PRIVATE_documentTargetMap(),this.Ke=new SortedMap(__PRIVATE_primitiveComparator),ee}Ue(m,L){if(!this.je(m))return;const j=this.st(m,L.key)?2:0;this.ze(m).Me(L.key,j),this.qe=this.qe.insert(L.key,L),this.Qe=this.Qe.insert(L.key,this.ot(L.key).add(m))}We(m,L,j){if(!this.je(m))return;const ee=this.ze(m);this.st(m,L)?ee.Me(L,1):ee.xe(L),this.Qe=this.Qe.insert(L,this.ot(L).delete(m)),j&&(this.qe=this.qe.insert(L,j))}removeTarget(m){this.ke.delete(m)}Ze(m){const L=this.ze(m).ve();return this.Be.getRemoteKeysForTarget(m).size+L.addedDocuments.size-L.removedDocuments.size}Oe(m){this.ze(m).Oe()}ze(m){let L=this.ke.get(m);return L||(L=new __PRIVATE_TargetState,this.ke.set(m,L)),L}ot(m){let L=this.Qe.get(m);return L||(L=new SortedSet(__PRIVATE_primitiveComparator),this.Qe=this.Qe.insert(m,L)),L}je(m){const L=this.Ye(m)!==null;return L||__PRIVATE_logDebug("WatchChangeAggregator","Detected inactive target",m),L}Ye(m){const L=this.ke.get(m);return L&&L.be?null:this.Be._t(m)}He(m){this.ke.set(m,new __PRIVATE_TargetState),this.Be.getRemoteKeysForTarget(m).forEach(L=>{this.We(m,L,null)})}st(m,L){return this.Be.getRemoteKeysForTarget(m).has(L)}}function __PRIVATE_documentTargetMap(){return new SortedMap(DocumentKey.comparator)}function __PRIVATE_snapshotChangesMap(){return new SortedMap(DocumentKey.comparator)}const Pe={asc:"ASCENDING",desc:"DESCENDING"},Ie={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Te={and:"AND",or:"OR"};class JsonProtoSerializer{constructor(m,L){this.databaseId=m,this.useProto3Json=L}}function __PRIVATE_toInt32Proto($,m){return $.useProto3Json||__PRIVATE_isNullOrUndefined(m)?m:{value:m}}function toTimestamp($,m){return $.useProto3Json?`${new Date(1e3*m.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+m.nanoseconds).slice(-9)}Z`:{seconds:""+m.seconds,nanos:m.nanoseconds}}function __PRIVATE_toBytes($,m){return $.useProto3Json?m.toBase64():m.toUint8Array()}function __PRIVATE_toVersion($,m){return toTimestamp($,m.toTimestamp())}function __PRIVATE_fromVersion($){return __PRIVATE_hardAssert(!!$),SnapshotVersion.fromTimestamp(function(L){const j=__PRIVATE_normalizeTimestamp(L);return new Timestamp(j.seconds,j.nanos)}($))}function __PRIVATE_toResourceName($,m){return __PRIVATE_toResourcePath($,m).canonicalString()}function __PRIVATE_toResourcePath($,m){const L=function(ee){return new ResourcePath(["projects",ee.projectId,"databases",ee.database])}($).child("documents");return m===void 0?L:L.child(m)}function __PRIVATE_fromResourceName($){const m=ResourcePath.fromString($);return __PRIVATE_hardAssert(__PRIVATE_isValidResourceName(m)),m}function __PRIVATE_toName($,m){return __PRIVATE_toResourceName($.databaseId,m.path)}function fromName($,m){const L=__PRIVATE_fromResourceName(m);if(L.get(1)!==$.databaseId.projectId)throw new FirestoreError(D.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+L.get(1)+" vs "+$.databaseId.projectId);if(L.get(3)!==$.databaseId.database)throw new FirestoreError(D.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+L.get(3)+" vs "+$.databaseId.database);return new DocumentKey(__PRIVATE_extractLocalPathFromResourceName(L))}function __PRIVATE_toQueryPath($,m){return __PRIVATE_toResourceName($.databaseId,m)}function __PRIVATE_fromQueryPath($){const m=__PRIVATE_fromResourceName($);return m.length===4?ResourcePath.emptyPath():__PRIVATE_extractLocalPathFromResourceName(m)}function __PRIVATE_getEncodedDatabaseId($){return new ResourcePath(["projects",$.databaseId.projectId,"databases",$.databaseId.database]).canonicalString()}function __PRIVATE_extractLocalPathFromResourceName($){return __PRIVATE_hardAssert($.length>4&&$.get(4)==="documents"),$.popFirst(5)}function __PRIVATE_toMutationDocument($,m,L){return{name:__PRIVATE_toName($,m),fields:L.value.mapValue.fields}}function __PRIVATE_fromWatchChange($,m){let L;if("targetChange"in m){m.targetChange;const j=function(Ee){return Ee==="NO_CHANGE"?0:Ee==="ADD"?1:Ee==="REMOVE"?2:Ee==="CURRENT"?3:Ee==="RESET"?4:fail()}(m.targetChange.targetChangeType||"NO_CHANGE"),ee=m.targetChange.targetIds||[],re=function(Ee,Me){return Ee.useProto3Json?(__PRIVATE_hardAssert(Me===void 0||typeof Me=="string"),ByteString.fromBase64String(Me||"")):(__PRIVATE_hardAssert(Me===void 0||Me instanceof Buffer||Me instanceof Uint8Array),ByteString.fromUint8Array(Me||new Uint8Array))}($,m.targetChange.resumeToken),le=m.targetChange.cause,ve=le&&function(Ee){const Me=Ee.code===void 0?D.UNKNOWN:__PRIVATE_mapCodeFromRpcCode(Ee.code);return new FirestoreError(Me,Ee.message||"")}(le);L=new __PRIVATE_WatchTargetChange(j,ee,re,ve||null)}else if("documentChange"in m){m.documentChange;const j=m.documentChange;j.document,j.document.name,j.document.updateTime;const ee=fromName($,j.document.name),re=__PRIVATE_fromVersion(j.document.updateTime),le=j.document.createTime?__PRIVATE_fromVersion(j.document.createTime):SnapshotVersion.min(),ve=new ObjectValue({mapValue:{fields:j.document.fields}}),ye=MutableDocument.newFoundDocument(ee,re,le,ve),Ee=j.targetIds||[],Me=j.removedTargetIds||[];L=new __PRIVATE_DocumentWatchChange(Ee,Me,ye.key,ye)}else if("documentDelete"in m){m.documentDelete;const j=m.documentDelete;j.document;const ee=fromName($,j.document),re=j.readTime?__PRIVATE_fromVersion(j.readTime):SnapshotVersion.min(),le=MutableDocument.newNoDocument(ee,re),ve=j.removedTargetIds||[];L=new __PRIVATE_DocumentWatchChange([],ve,le.key,le)}else if("documentRemove"in m){m.documentRemove;const j=m.documentRemove;j.document;const ee=fromName($,j.document),re=j.removedTargetIds||[];L=new __PRIVATE_DocumentWatchChange([],re,ee,null)}else{if(!("filter"in m))return fail();{m.filter;const j=m.filter;j.targetId;const{count:ee=0,unchangedNames:re}=j,le=new ExistenceFilter(ee,re),ve=j.targetId;L=new __PRIVATE_ExistenceFilterChange(ve,le)}}return L}function toMutation($,m){let L;if(m instanceof __PRIVATE_SetMutation)L={update:__PRIVATE_toMutationDocument($,m.key,m.value)};else if(m instanceof __PRIVATE_DeleteMutation)L={delete:__PRIVATE_toName($,m.key)};else if(m instanceof __PRIVATE_PatchMutation)L={update:__PRIVATE_toMutationDocument($,m.key,m.data),updateMask:__PRIVATE_toDocumentMask(m.fieldMask)};else{if(!(m instanceof __PRIVATE_VerifyMutation))return fail();L={verify:__PRIVATE_toName($,m.key)}}return m.fieldTransforms.length>0&&(L.updateTransforms=m.fieldTransforms.map(j=>function(re,le){const ve=le.transform;if(ve instanceof __PRIVATE_ServerTimestampTransform)return{fieldPath:le.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(ve instanceof __PRIVATE_ArrayUnionTransformOperation)return{fieldPath:le.field.canonicalString(),appendMissingElements:{values:ve.elements}};if(ve instanceof __PRIVATE_ArrayRemoveTransformOperation)return{fieldPath:le.field.canonicalString(),removeAllFromArray:{values:ve.elements}};if(ve instanceof __PRIVATE_NumericIncrementTransformOperation)return{fieldPath:le.field.canonicalString(),increment:ve.Ie};throw fail()}(0,j))),m.precondition.isNone||(L.currentDocument=function(ee,re){return re.updateTime!==void 0?{updateTime:__PRIVATE_toVersion(ee,re.updateTime)}:re.exists!==void 0?{exists:re.exists}:fail()}($,m.precondition)),L}function __PRIVATE_fromWriteResults($,m){return $&&$.length>0?(__PRIVATE_hardAssert(m!==void 0),$.map(L=>function(ee,re){let le=ee.updateTime?__PRIVATE_fromVersion(ee.updateTime):__PRIVATE_fromVersion(re);return le.isEqual(SnapshotVersion.min())&&(le=__PRIVATE_fromVersion(re)),new MutationResult(le,ee.transformResults||[])}(L,m))):[]}function __PRIVATE_toDocumentsTarget($,m){return{documents:[__PRIVATE_toQueryPath($,m.path)]}}function __PRIVATE_toQueryTarget($,m){const L={structuredQuery:{}},j=m.path;let ee;m.collectionGroup!==null?(ee=j,L.structuredQuery.from=[{collectionId:m.collectionGroup,allDescendants:!0}]):(ee=j.popLast(),L.structuredQuery.from=[{collectionId:j.lastSegment()}]),L.parent=__PRIVATE_toQueryPath($,ee);const re=function(Ee){if(Ee.length!==0)return __PRIVATE_toFilter(CompositeFilter.create(Ee,"and"))}(m.filters);re&&(L.structuredQuery.where=re);const le=function(Ee){if(Ee.length!==0)return Ee.map(Me=>function(De){return{field:__PRIVATE_toFieldPathReference(De.field),direction:__PRIVATE_toDirection(De.dir)}}(Me))}(m.orderBy);le&&(L.structuredQuery.orderBy=le);const ve=__PRIVATE_toInt32Proto($,m.limit);return ve!==null&&(L.structuredQuery.limit=ve),m.startAt&&(L.structuredQuery.startAt=function(Ee){return{before:Ee.inclusive,values:Ee.position}}(m.startAt)),m.endAt&&(L.structuredQuery.endAt=function(Ee){return{before:!Ee.inclusive,values:Ee.position}}(m.endAt)),{ut:L,parent:ee}}function __PRIVATE_convertQueryTargetToQuery($){let m=__PRIVATE_fromQueryPath($.parent);const L=$.structuredQuery,j=L.from?L.from.length:0;let ee=null;if(j>0){__PRIVATE_hardAssert(j===1);const Me=L.from[0];Me.allDescendants?ee=Me.collectionId:m=m.child(Me.collectionId)}let re=[];L.where&&(re=function(Ce){const De=__PRIVATE_fromFilter(Ce);return De instanceof CompositeFilter&&__PRIVATE_compositeFilterIsFlatConjunction(De)?De.getFilters():[De]}(L.where));let le=[];L.orderBy&&(le=function(Ce){return Ce.map(De=>function(ke){return new OrderBy(__PRIVATE_fromFieldPathReference(ke.field),function(Oe){switch(Oe){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(ke.direction))}(De))}(L.orderBy));let ve=null;L.limit&&(ve=function(Ce){let De;return De=typeof Ce=="object"?Ce.value:Ce,__PRIVATE_isNullOrUndefined(De)?null:De}(L.limit));let ye=null;L.startAt&&(ye=function(Ce){const De=!!Ce.before,Be=Ce.values||[];return new Bound(Be,De)}(L.startAt));let Ee=null;return L.endAt&&(Ee=function(Ce){const De=!Ce.before,Be=Ce.values||[];return new Bound(Be,De)}(L.endAt)),__PRIVATE_newQuery(m,ee,le,re,ve,"F",ye,Ee)}function __PRIVATE_toListenRequestLabels($,m){const L=function(ee){switch(ee){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fail()}}(m.purpose);return L==null?null:{"goog-listen-tags":L}}function __PRIVATE_fromFilter($){return $.unaryFilter!==void 0?function(L){switch(L.unaryFilter.op){case"IS_NAN":const j=__PRIVATE_fromFieldPathReference(L.unaryFilter.field);return FieldFilter.create(j,"==",{doubleValue:NaN});case"IS_NULL":const ee=__PRIVATE_fromFieldPathReference(L.unaryFilter.field);return FieldFilter.create(ee,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const re=__PRIVATE_fromFieldPathReference(L.unaryFilter.field);return FieldFilter.create(re,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const le=__PRIVATE_fromFieldPathReference(L.unaryFilter.field);return FieldFilter.create(le,"!=",{nullValue:"NULL_VALUE"});default:return fail()}}($):$.fieldFilter!==void 0?function(L){return FieldFilter.create(__PRIVATE_fromFieldPathReference(L.fieldFilter.field),function(ee){switch(ee){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return fail()}}(L.fieldFilter.op),L.fieldFilter.value)}($):$.compositeFilter!==void 0?function(L){return CompositeFilter.create(L.compositeFilter.filters.map(j=>__PRIVATE_fromFilter(j)),function(ee){switch(ee){case"AND":return"and";case"OR":return"or";default:return fail()}}(L.compositeFilter.op))}($):fail()}function __PRIVATE_toDirection($){return Pe[$]}function __PRIVATE_toOperatorName($){return Ie[$]}function __PRIVATE_toCompositeOperatorName($){return Te[$]}function __PRIVATE_toFieldPathReference($){return{fieldPath:$.canonicalString()}}function __PRIVATE_fromFieldPathReference($){return FieldPath$1.fromServerFormat($.fieldPath)}function __PRIVATE_toFilter($){return $ instanceof FieldFilter?function(L){if(L.op==="=="){if(__PRIVATE_isNanValue(L.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(L.field),op:"IS_NAN"}};if(__PRIVATE_isNullValue(L.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(L.field),op:"IS_NULL"}}}else if(L.op==="!="){if(__PRIVATE_isNanValue(L.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(L.field),op:"IS_NOT_NAN"}};if(__PRIVATE_isNullValue(L.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(L.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:__PRIVATE_toFieldPathReference(L.field),op:__PRIVATE_toOperatorName(L.op),value:L.value}}}($):$ instanceof CompositeFilter?function(L){const j=L.getFilters().map(ee=>__PRIVATE_toFilter(ee));return j.length===1?j[0]:{compositeFilter:{op:__PRIVATE_toCompositeOperatorName(L.op),filters:j}}}($):fail()}function __PRIVATE_toDocumentMask($){const m=[];return $.fields.forEach(L=>m.push(L.canonicalString())),{fieldPaths:m}}function __PRIVATE_isValidResourceName($){return $.length>=4&&$.get(0)==="projects"&&$.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TargetData{constructor(m,L,j,ee,re=SnapshotVersion.min(),le=SnapshotVersion.min(),ve=ByteString.EMPTY_BYTE_STRING,ye=null){this.target=m,this.targetId=L,this.purpose=j,this.sequenceNumber=ee,this.snapshotVersion=re,this.lastLimboFreeSnapshotVersion=le,this.resumeToken=ve,this.expectedCount=ye}withSequenceNumber(m){return new TargetData(this.target,this.targetId,this.purpose,m,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(m,L){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,L,this.lastLimboFreeSnapshotVersion,m,null)}withExpectedCount(m){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,m)}withLastLimboFreeSnapshotVersion(m){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,m,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_LocalSerializer{constructor(m){this.ct=m}}function __PRIVATE_fromBundledQuery($){const m=__PRIVATE_convertQueryTargetToQuery({parent:$.parent,structuredQuery:$.structuredQuery});return $.limitType==="LAST"?__PRIVATE_queryWithLimit(m,m.limit,"L"):m}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryIndexManager{constructor(){this._n=new __PRIVATE_MemoryCollectionParentIndex}addToCollectionParentIndex(m,L){return this._n.add(L),PersistencePromise.resolve()}getCollectionParents(m,L){return PersistencePromise.resolve(this._n.getEntries(L))}addFieldIndex(m,L){return PersistencePromise.resolve()}deleteFieldIndex(m,L){return PersistencePromise.resolve()}deleteAllFieldIndexes(m){return PersistencePromise.resolve()}createTargetIndexes(m,L){return PersistencePromise.resolve()}getDocumentsMatchingTarget(m,L){return PersistencePromise.resolve(null)}getIndexType(m,L){return PersistencePromise.resolve(0)}getFieldIndexes(m,L){return PersistencePromise.resolve([])}getNextCollectionGroupToUpdate(m){return PersistencePromise.resolve(null)}getMinOffset(m,L){return PersistencePromise.resolve(IndexOffset.min())}getMinOffsetFromCollectionGroup(m,L){return PersistencePromise.resolve(IndexOffset.min())}updateCollectionGroup(m,L,j){return PersistencePromise.resolve()}updateIndexEntries(m,L){return PersistencePromise.resolve()}}class __PRIVATE_MemoryCollectionParentIndex{constructor(){this.index={}}add(m){const L=m.lastSegment(),j=m.popLast(),ee=this.index[L]||new SortedSet(ResourcePath.comparator),re=!ee.has(j);return this.index[L]=ee.add(j),re}has(m){const L=m.lastSegment(),j=m.popLast(),ee=this.index[L];return ee&&ee.has(j)}getEntries(m){return(this.index[m]||new SortedSet(ResourcePath.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_TargetIdGenerator{constructor(m){this.On=m}next(){return this.On+=2,this.On}static Nn(){return new __PRIVATE_TargetIdGenerator(0)}static Ln(){return new __PRIVATE_TargetIdGenerator(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RemoteDocumentChangeBuffer{constructor(){this.changes=new ObjectMap(m=>m.toString(),(m,L)=>m.isEqual(L)),this.changesApplied=!1}addEntry(m){this.assertNotApplied(),this.changes.set(m.key,m)}removeEntry(m,L){this.assertNotApplied(),this.changes.set(m,MutableDocument.newInvalidDocument(m).setReadTime(L))}getEntry(m,L){this.assertNotApplied();const j=this.changes.get(L);return j!==void 0?PersistencePromise.resolve(j):this.getFromCache(m,L)}getEntries(m,L){return this.getAllFromCache(m,L)}apply(m){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(m)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OverlayedDocument{constructor(m,L){this.overlayedDocument=m,this.mutatedFields=L}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LocalDocumentsView{constructor(m,L,j,ee){this.remoteDocumentCache=m,this.mutationQueue=L,this.documentOverlayCache=j,this.indexManager=ee}getDocument(m,L){let j=null;return this.documentOverlayCache.getOverlay(m,L).next(ee=>(j=ee,this.remoteDocumentCache.getEntry(m,L))).next(ee=>(j!==null&&__PRIVATE_mutationApplyToLocalView(j.mutation,ee,FieldMask.empty(),Timestamp.now()),ee))}getDocuments(m,L){return this.remoteDocumentCache.getEntries(m,L).next(j=>this.getLocalViewOfDocuments(m,j,__PRIVATE_documentKeySet()).next(()=>j))}getLocalViewOfDocuments(m,L,j=__PRIVATE_documentKeySet()){const ee=__PRIVATE_newOverlayMap();return this.populateOverlays(m,ee,L).next(()=>this.computeViews(m,L,ee,j).next(re=>{let le=documentMap();return re.forEach((ve,ye)=>{le=le.insert(ve,ye.overlayedDocument)}),le}))}getOverlayedDocuments(m,L){const j=__PRIVATE_newOverlayMap();return this.populateOverlays(m,j,L).next(()=>this.computeViews(m,L,j,__PRIVATE_documentKeySet()))}populateOverlays(m,L,j){const ee=[];return j.forEach(re=>{L.has(re)||ee.push(re)}),this.documentOverlayCache.getOverlays(m,ee).next(re=>{re.forEach((le,ve)=>{L.set(le,ve)})})}computeViews(m,L,j,ee){let re=__PRIVATE_mutableDocumentMap();const le=__PRIVATE_newDocumentKeyMap(),ve=function(){return __PRIVATE_newDocumentKeyMap()}();return L.forEach((ye,Ee)=>{const Me=j.get(Ee.key);ee.has(Ee.key)&&(Me===void 0||Me.mutation instanceof __PRIVATE_PatchMutation)?re=re.insert(Ee.key,Ee):Me!==void 0?(le.set(Ee.key,Me.mutation.getFieldMask()),__PRIVATE_mutationApplyToLocalView(Me.mutation,Ee,Me.mutation.getFieldMask(),Timestamp.now())):le.set(Ee.key,FieldMask.empty())}),this.recalculateAndSaveOverlays(m,re).next(ye=>(ye.forEach((Ee,Me)=>le.set(Ee,Me)),L.forEach((Ee,Me)=>{var Ce;return ve.set(Ee,new OverlayedDocument(Me,(Ce=le.get(Ee))!==null&&Ce!==void 0?Ce:null))}),ve))}recalculateAndSaveOverlays(m,L){const j=__PRIVATE_newDocumentKeyMap();let ee=new SortedMap((le,ve)=>le-ve),re=__PRIVATE_documentKeySet();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(m,L).next(le=>{for(const ve of le)ve.keys().forEach(ye=>{const Ee=L.get(ye);if(Ee===null)return;let Me=j.get(ye)||FieldMask.empty();Me=ve.applyToLocalView(Ee,Me),j.set(ye,Me);const Ce=(ee.get(ve.batchId)||__PRIVATE_documentKeySet()).add(ye);ee=ee.insert(ve.batchId,Ce)})}).next(()=>{const le=[],ve=ee.getReverseIterator();for(;ve.hasNext();){const ye=ve.getNext(),Ee=ye.key,Me=ye.value,Ce=__PRIVATE_newMutationMap();Me.forEach(De=>{if(!re.has(De)){const Be=__PRIVATE_calculateOverlayMutation(L.get(De),j.get(De));Be!==null&&Ce.set(De,Be),re=re.add(De)}}),le.push(this.documentOverlayCache.saveOverlays(m,Ee,Ce))}return PersistencePromise.waitFor(le)}).next(()=>j)}recalculateAndSaveOverlaysForDocumentKeys(m,L){return this.remoteDocumentCache.getEntries(m,L).next(j=>this.recalculateAndSaveOverlays(m,j))}getDocumentsMatchingQuery(m,L,j,ee){return function(le){return DocumentKey.isDocumentKey(le.path)&&le.collectionGroup===null&&le.filters.length===0}(L)?this.getDocumentsMatchingDocumentQuery(m,L.path):__PRIVATE_isCollectionGroupQuery(L)?this.getDocumentsMatchingCollectionGroupQuery(m,L,j,ee):this.getDocumentsMatchingCollectionQuery(m,L,j,ee)}getNextDocuments(m,L,j,ee){return this.remoteDocumentCache.getAllFromCollectionGroup(m,L,j,ee).next(re=>{const le=ee-re.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(m,L,j.largestBatchId,ee-re.size):PersistencePromise.resolve(__PRIVATE_newOverlayMap());let ve=-1,ye=re;return le.next(Ee=>PersistencePromise.forEach(Ee,(Me,Ce)=>(ve<Ce.largestBatchId&&(ve=Ce.largestBatchId),re.get(Me)?PersistencePromise.resolve():this.remoteDocumentCache.getEntry(m,Me).next(De=>{ye=ye.insert(Me,De)}))).next(()=>this.populateOverlays(m,Ee,re)).next(()=>this.computeViews(m,ye,Ee,__PRIVATE_documentKeySet())).next(Me=>({batchId:ve,changes:__PRIVATE_convertOverlayedDocumentMapToDocumentMap(Me)})))})}getDocumentsMatchingDocumentQuery(m,L){return this.getDocument(m,new DocumentKey(L)).next(j=>{let ee=documentMap();return j.isFoundDocument()&&(ee=ee.insert(j.key,j)),ee})}getDocumentsMatchingCollectionGroupQuery(m,L,j,ee){const re=L.collectionGroup;let le=documentMap();return this.indexManager.getCollectionParents(m,re).next(ve=>PersistencePromise.forEach(ve,ye=>{const Ee=function(Ce,De){return new __PRIVATE_QueryImpl(De,null,Ce.explicitOrderBy.slice(),Ce.filters.slice(),Ce.limit,Ce.limitType,Ce.startAt,Ce.endAt)}(L,ye.child(re));return this.getDocumentsMatchingCollectionQuery(m,Ee,j,ee).next(Me=>{Me.forEach((Ce,De)=>{le=le.insert(Ce,De)})})}).next(()=>le))}getDocumentsMatchingCollectionQuery(m,L,j,ee){let re;return this.documentOverlayCache.getOverlaysForCollection(m,L.path,j.largestBatchId).next(le=>(re=le,this.remoteDocumentCache.getDocumentsMatchingQuery(m,L,j,re,ee))).next(le=>{re.forEach((ye,Ee)=>{const Me=Ee.getKey();le.get(Me)===null&&(le=le.insert(Me,MutableDocument.newInvalidDocument(Me)))});let ve=documentMap();return le.forEach((ye,Ee)=>{const Me=re.get(ye);Me!==void 0&&__PRIVATE_mutationApplyToLocalView(Me.mutation,Ee,FieldMask.empty(),Timestamp.now()),__PRIVATE_queryMatches(L,Ee)&&(ve=ve.insert(ye,Ee))}),ve})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryBundleCache{constructor(m){this.serializer=m,this.cr=new Map,this.lr=new Map}getBundleMetadata(m,L){return PersistencePromise.resolve(this.cr.get(L))}saveBundleMetadata(m,L){return this.cr.set(L.id,function(ee){return{id:ee.id,version:ee.version,createTime:__PRIVATE_fromVersion(ee.createTime)}}(L)),PersistencePromise.resolve()}getNamedQuery(m,L){return PersistencePromise.resolve(this.lr.get(L))}saveNamedQuery(m,L){return this.lr.set(L.name,function(ee){return{name:ee.name,query:__PRIVATE_fromBundledQuery(ee.bundledQuery),readTime:__PRIVATE_fromVersion(ee.readTime)}}(L)),PersistencePromise.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryDocumentOverlayCache{constructor(){this.overlays=new SortedMap(DocumentKey.comparator),this.hr=new Map}getOverlay(m,L){return PersistencePromise.resolve(this.overlays.get(L))}getOverlays(m,L){const j=__PRIVATE_newOverlayMap();return PersistencePromise.forEach(L,ee=>this.getOverlay(m,ee).next(re=>{re!==null&&j.set(ee,re)})).next(()=>j)}saveOverlays(m,L,j){return j.forEach((ee,re)=>{this.ht(m,L,re)}),PersistencePromise.resolve()}removeOverlaysForBatchId(m,L,j){const ee=this.hr.get(j);return ee!==void 0&&(ee.forEach(re=>this.overlays=this.overlays.remove(re)),this.hr.delete(j)),PersistencePromise.resolve()}getOverlaysForCollection(m,L,j){const ee=__PRIVATE_newOverlayMap(),re=L.length+1,le=new DocumentKey(L.child("")),ve=this.overlays.getIteratorFrom(le);for(;ve.hasNext();){const ye=ve.getNext().value,Ee=ye.getKey();if(!L.isPrefixOf(Ee.path))break;Ee.path.length===re&&ye.largestBatchId>j&&ee.set(ye.getKey(),ye)}return PersistencePromise.resolve(ee)}getOverlaysForCollectionGroup(m,L,j,ee){let re=new SortedMap((Ee,Me)=>Ee-Me);const le=this.overlays.getIterator();for(;le.hasNext();){const Ee=le.getNext().value;if(Ee.getKey().getCollectionGroup()===L&&Ee.largestBatchId>j){let Me=re.get(Ee.largestBatchId);Me===null&&(Me=__PRIVATE_newOverlayMap(),re=re.insert(Ee.largestBatchId,Me)),Me.set(Ee.getKey(),Ee)}}const ve=__PRIVATE_newOverlayMap(),ye=re.getIterator();for(;ye.hasNext()&&(ye.getNext().value.forEach((Ee,Me)=>ve.set(Ee,Me)),!(ve.size()>=ee)););return PersistencePromise.resolve(ve)}ht(m,L,j){const ee=this.overlays.get(j.key);if(ee!==null){const le=this.hr.get(ee.largestBatchId).delete(j.key);this.hr.set(ee.largestBatchId,le)}this.overlays=this.overlays.insert(j.key,new Overlay(L,j));let re=this.hr.get(L);re===void 0&&(re=__PRIVATE_documentKeySet(),this.hr.set(L,re)),this.hr.set(L,re.add(j.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ReferenceSet{constructor(){this.Pr=new SortedSet(__PRIVATE_DocReference.Ir),this.Tr=new SortedSet(__PRIVATE_DocReference.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(m,L){const j=new __PRIVATE_DocReference(m,L);this.Pr=this.Pr.add(j),this.Tr=this.Tr.add(j)}dr(m,L){m.forEach(j=>this.addReference(j,L))}removeReference(m,L){this.Ar(new __PRIVATE_DocReference(m,L))}Rr(m,L){m.forEach(j=>this.removeReference(j,L))}Vr(m){const L=new DocumentKey(new ResourcePath([])),j=new __PRIVATE_DocReference(L,m),ee=new __PRIVATE_DocReference(L,m+1),re=[];return this.Tr.forEachInRange([j,ee],le=>{this.Ar(le),re.push(le.key)}),re}mr(){this.Pr.forEach(m=>this.Ar(m))}Ar(m){this.Pr=this.Pr.delete(m),this.Tr=this.Tr.delete(m)}gr(m){const L=new DocumentKey(new ResourcePath([])),j=new __PRIVATE_DocReference(L,m),ee=new __PRIVATE_DocReference(L,m+1);let re=__PRIVATE_documentKeySet();return this.Tr.forEachInRange([j,ee],le=>{re=re.add(le.key)}),re}containsKey(m){const L=new __PRIVATE_DocReference(m,0),j=this.Pr.firstAfterOrEqual(L);return j!==null&&m.isEqual(j.key)}}class __PRIVATE_DocReference{constructor(m,L){this.key=m,this.pr=L}static Ir(m,L){return DocumentKey.comparator(m.key,L.key)||__PRIVATE_primitiveComparator(m.pr,L.pr)}static Er(m,L){return __PRIVATE_primitiveComparator(m.pr,L.pr)||DocumentKey.comparator(m.key,L.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryMutationQueue{constructor(m,L){this.indexManager=m,this.referenceDelegate=L,this.mutationQueue=[],this.yr=1,this.wr=new SortedSet(__PRIVATE_DocReference.Ir)}checkEmpty(m){return PersistencePromise.resolve(this.mutationQueue.length===0)}addMutationBatch(m,L,j,ee){const re=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const le=new MutationBatch(re,L,j,ee);this.mutationQueue.push(le);for(const ve of ee)this.wr=this.wr.add(new __PRIVATE_DocReference(ve.key,re)),this.indexManager.addToCollectionParentIndex(m,ve.key.path.popLast());return PersistencePromise.resolve(le)}lookupMutationBatch(m,L){return PersistencePromise.resolve(this.Sr(L))}getNextMutationBatchAfterBatchId(m,L){const j=L+1,ee=this.br(j),re=ee<0?0:ee;return PersistencePromise.resolve(this.mutationQueue.length>re?this.mutationQueue[re]:null)}getHighestUnacknowledgedBatchId(){return PersistencePromise.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(m){return PersistencePromise.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(m,L){const j=new __PRIVATE_DocReference(L,0),ee=new __PRIVATE_DocReference(L,Number.POSITIVE_INFINITY),re=[];return this.wr.forEachInRange([j,ee],le=>{const ve=this.Sr(le.pr);re.push(ve)}),PersistencePromise.resolve(re)}getAllMutationBatchesAffectingDocumentKeys(m,L){let j=new SortedSet(__PRIVATE_primitiveComparator);return L.forEach(ee=>{const re=new __PRIVATE_DocReference(ee,0),le=new __PRIVATE_DocReference(ee,Number.POSITIVE_INFINITY);this.wr.forEachInRange([re,le],ve=>{j=j.add(ve.pr)})}),PersistencePromise.resolve(this.Dr(j))}getAllMutationBatchesAffectingQuery(m,L){const j=L.path,ee=j.length+1;let re=j;DocumentKey.isDocumentKey(re)||(re=re.child(""));const le=new __PRIVATE_DocReference(new DocumentKey(re),0);let ve=new SortedSet(__PRIVATE_primitiveComparator);return this.wr.forEachWhile(ye=>{const Ee=ye.key.path;return!!j.isPrefixOf(Ee)&&(Ee.length===ee&&(ve=ve.add(ye.pr)),!0)},le),PersistencePromise.resolve(this.Dr(ve))}Dr(m){const L=[];return m.forEach(j=>{const ee=this.Sr(j);ee!==null&&L.push(ee)}),L}removeMutationBatch(m,L){__PRIVATE_hardAssert(this.Cr(L.batchId,"removed")===0),this.mutationQueue.shift();let j=this.wr;return PersistencePromise.forEach(L.mutations,ee=>{const re=new __PRIVATE_DocReference(ee.key,L.batchId);return j=j.delete(re),this.referenceDelegate.markPotentiallyOrphaned(m,ee.key)}).next(()=>{this.wr=j})}Mn(m){}containsKey(m,L){const j=new __PRIVATE_DocReference(L,0),ee=this.wr.firstAfterOrEqual(j);return PersistencePromise.resolve(L.isEqual(ee&&ee.key))}performConsistencyCheck(m){return this.mutationQueue.length,PersistencePromise.resolve()}Cr(m,L){return this.br(m)}br(m){return this.mutationQueue.length===0?0:m-this.mutationQueue[0].batchId}Sr(m){const L=this.br(m);return L<0||L>=this.mutationQueue.length?null:this.mutationQueue[L]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryRemoteDocumentCacheImpl{constructor(m){this.vr=m,this.docs=function(){return new SortedMap(DocumentKey.comparator)}(),this.size=0}setIndexManager(m){this.indexManager=m}addEntry(m,L){const j=L.key,ee=this.docs.get(j),re=ee?ee.size:0,le=this.vr(L);return this.docs=this.docs.insert(j,{document:L.mutableCopy(),size:le}),this.size+=le-re,this.indexManager.addToCollectionParentIndex(m,j.path.popLast())}removeEntry(m){const L=this.docs.get(m);L&&(this.docs=this.docs.remove(m),this.size-=L.size)}getEntry(m,L){const j=this.docs.get(L);return PersistencePromise.resolve(j?j.document.mutableCopy():MutableDocument.newInvalidDocument(L))}getEntries(m,L){let j=__PRIVATE_mutableDocumentMap();return L.forEach(ee=>{const re=this.docs.get(ee);j=j.insert(ee,re?re.document.mutableCopy():MutableDocument.newInvalidDocument(ee))}),PersistencePromise.resolve(j)}getDocumentsMatchingQuery(m,L,j,ee){let re=__PRIVATE_mutableDocumentMap();const le=L.path,ve=new DocumentKey(le.child("")),ye=this.docs.getIteratorFrom(ve);for(;ye.hasNext();){const{key:Ee,value:{document:Me}}=ye.getNext();if(!le.isPrefixOf(Ee.path))break;Ee.path.length>le.length+1||__PRIVATE_indexOffsetComparator(__PRIVATE_newIndexOffsetFromDocument(Me),j)<=0||(ee.has(Me.key)||__PRIVATE_queryMatches(L,Me))&&(re=re.insert(Me.key,Me.mutableCopy()))}return PersistencePromise.resolve(re)}getAllFromCollectionGroup(m,L,j,ee){fail()}Fr(m,L){return PersistencePromise.forEach(this.docs,j=>L(j))}newChangeBuffer(m){return new __PRIVATE_MemoryRemoteDocumentChangeBuffer(this)}getSize(m){return PersistencePromise.resolve(this.size)}}class __PRIVATE_MemoryRemoteDocumentChangeBuffer extends RemoteDocumentChangeBuffer{constructor(m){super(),this.ar=m}applyChanges(m){const L=[];return this.changes.forEach((j,ee)=>{ee.isValidDocument()?L.push(this.ar.addEntry(m,ee)):this.ar.removeEntry(j)}),PersistencePromise.waitFor(L)}getFromCache(m,L){return this.ar.getEntry(m,L)}getAllFromCache(m,L){return this.ar.getEntries(m,L)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryTargetCache{constructor(m){this.persistence=m,this.Mr=new ObjectMap(L=>__PRIVATE_canonifyTarget(L),__PRIVATE_targetEquals),this.lastRemoteSnapshotVersion=SnapshotVersion.min(),this.highestTargetId=0,this.Or=0,this.Nr=new __PRIVATE_ReferenceSet,this.targetCount=0,this.Lr=__PRIVATE_TargetIdGenerator.Nn()}forEachTarget(m,L){return this.Mr.forEach((j,ee)=>L(ee)),PersistencePromise.resolve()}getLastRemoteSnapshotVersion(m){return PersistencePromise.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(m){return PersistencePromise.resolve(this.Or)}allocateTargetId(m){return this.highestTargetId=this.Lr.next(),PersistencePromise.resolve(this.highestTargetId)}setTargetsMetadata(m,L,j){return j&&(this.lastRemoteSnapshotVersion=j),L>this.Or&&(this.Or=L),PersistencePromise.resolve()}qn(m){this.Mr.set(m.target,m);const L=m.targetId;L>this.highestTargetId&&(this.Lr=new __PRIVATE_TargetIdGenerator(L),this.highestTargetId=L),m.sequenceNumber>this.Or&&(this.Or=m.sequenceNumber)}addTargetData(m,L){return this.qn(L),this.targetCount+=1,PersistencePromise.resolve()}updateTargetData(m,L){return this.qn(L),PersistencePromise.resolve()}removeTargetData(m,L){return this.Mr.delete(L.target),this.Nr.Vr(L.targetId),this.targetCount-=1,PersistencePromise.resolve()}removeTargets(m,L,j){let ee=0;const re=[];return this.Mr.forEach((le,ve)=>{ve.sequenceNumber<=L&&j.get(ve.targetId)===null&&(this.Mr.delete(le),re.push(this.removeMatchingKeysForTargetId(m,ve.targetId)),ee++)}),PersistencePromise.waitFor(re).next(()=>ee)}getTargetCount(m){return PersistencePromise.resolve(this.targetCount)}getTargetData(m,L){const j=this.Mr.get(L)||null;return PersistencePromise.resolve(j)}addMatchingKeys(m,L,j){return this.Nr.dr(L,j),PersistencePromise.resolve()}removeMatchingKeys(m,L,j){this.Nr.Rr(L,j);const ee=this.persistence.referenceDelegate,re=[];return ee&&L.forEach(le=>{re.push(ee.markPotentiallyOrphaned(m,le))}),PersistencePromise.waitFor(re)}removeMatchingKeysForTargetId(m,L){return this.Nr.Vr(L),PersistencePromise.resolve()}getMatchingKeysForTargetId(m,L){const j=this.Nr.gr(L);return PersistencePromise.resolve(j)}containsKey(m,L){return PersistencePromise.resolve(this.Nr.containsKey(L))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryPersistence{constructor(m,L){this.Br={},this.overlays={},this.kr=new __PRIVATE_ListenSequence(0),this.qr=!1,this.qr=!0,this.referenceDelegate=m(this),this.Qr=new __PRIVATE_MemoryTargetCache(this),this.indexManager=new __PRIVATE_MemoryIndexManager,this.remoteDocumentCache=function(ee){return new __PRIVATE_MemoryRemoteDocumentCacheImpl(ee)}(j=>this.referenceDelegate.Kr(j)),this.serializer=new __PRIVATE_LocalSerializer(L),this.$r=new __PRIVATE_MemoryBundleCache(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(m){return this.indexManager}getDocumentOverlayCache(m){let L=this.overlays[m.toKey()];return L||(L=new __PRIVATE_MemoryDocumentOverlayCache,this.overlays[m.toKey()]=L),L}getMutationQueue(m,L){let j=this.Br[m.toKey()];return j||(j=new __PRIVATE_MemoryMutationQueue(L,this.referenceDelegate),this.Br[m.toKey()]=j),j}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(m,L,j){__PRIVATE_logDebug("MemoryPersistence","Starting transaction:",m);const ee=new __PRIVATE_MemoryTransaction(this.kr.next());return this.referenceDelegate.Ur(),j(ee).next(re=>this.referenceDelegate.Wr(ee).next(()=>re)).toPromise().then(re=>(ee.raiseOnCommittedEvent(),re))}Gr(m,L){return PersistencePromise.or(Object.values(this.Br).map(j=>()=>j.containsKey(m,L)))}}class __PRIVATE_MemoryTransaction extends PersistenceTransaction{constructor(m){super(),this.currentSequenceNumber=m}}class __PRIVATE_MemoryEagerDelegate{constructor(m){this.persistence=m,this.zr=new __PRIVATE_ReferenceSet,this.jr=null}static Hr(m){return new __PRIVATE_MemoryEagerDelegate(m)}get Jr(){if(this.jr)return this.jr;throw fail()}addReference(m,L,j){return this.zr.addReference(j,L),this.Jr.delete(j.toString()),PersistencePromise.resolve()}removeReference(m,L,j){return this.zr.removeReference(j,L),this.Jr.add(j.toString()),PersistencePromise.resolve()}markPotentiallyOrphaned(m,L){return this.Jr.add(L.toString()),PersistencePromise.resolve()}removeTarget(m,L){this.zr.Vr(L.targetId).forEach(ee=>this.Jr.add(ee.toString()));const j=this.persistence.getTargetCache();return j.getMatchingKeysForTargetId(m,L.targetId).next(ee=>{ee.forEach(re=>this.Jr.add(re.toString()))}).next(()=>j.removeTargetData(m,L))}Ur(){this.jr=new Set}Wr(m){const L=this.persistence.getRemoteDocumentCache().newChangeBuffer();return PersistencePromise.forEach(this.Jr,j=>{const ee=DocumentKey.fromPath(j);return this.Yr(m,ee).next(re=>{re||L.removeEntry(ee,SnapshotVersion.min())})}).next(()=>(this.jr=null,L.apply(m)))}updateLimboDocument(m,L){return this.Yr(m,L).next(j=>{j?this.Jr.delete(L.toString()):this.Jr.add(L.toString())})}Kr(m){return 0}Yr(m,L){return PersistencePromise.or([()=>PersistencePromise.resolve(this.zr.containsKey(L)),()=>this.persistence.getTargetCache().containsKey(m,L),()=>this.persistence.Gr(m,L)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_LocalViewChanges{constructor(m,L,j,ee){this.targetId=m,this.fromCache=L,this.qi=j,this.Qi=ee}static Ki(m,L){let j=__PRIVATE_documentKeySet(),ee=__PRIVATE_documentKeySet();for(const re of L.docChanges)switch(re.type){case 0:j=j.add(re.doc.key);break;case 1:ee=ee.add(re.doc.key)}return new __PRIVATE_LocalViewChanges(m,L.fromCache,j,ee)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QueryContext{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(m){this._documentReadCount+=m}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryEngine{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return isSafari()?8:__PRIVATE_SimpleDb.v(getUA())>0?6:4}()}initialize(m,L){this.zi=m,this.indexManager=L,this.$i=!0}getDocumentsMatchingQuery(m,L,j,ee){const re={result:null};return this.ji(m,L).next(le=>{re.result=le}).next(()=>{if(!re.result)return this.Hi(m,L,ee,j).next(le=>{re.result=le})}).next(()=>{if(re.result)return;const le=new QueryContext;return this.Ji(m,L,le).next(ve=>{if(re.result=ve,this.Ui)return this.Yi(m,L,le,ve.size)})}).next(()=>re.result)}Yi(m,L,j,ee){return j.documentReadCount<this.Wi?(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","SDK will not create cache indexes for query:",__PRIVATE_stringifyQuery(L),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),PersistencePromise.resolve()):(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Query:",__PRIVATE_stringifyQuery(L),"scans",j.documentReadCount,"local documents and returns",ee,"documents as results."),j.documentReadCount>this.Gi*ee?(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","The SDK decides to create cache indexes for query:",__PRIVATE_stringifyQuery(L),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(m,__PRIVATE_queryToTarget(L))):PersistencePromise.resolve())}ji(m,L){if(__PRIVATE_queryMatchesAllDocuments(L))return PersistencePromise.resolve(null);let j=__PRIVATE_queryToTarget(L);return this.indexManager.getIndexType(m,j).next(ee=>ee===0?null:(L.limit!==null&&ee===1&&(L=__PRIVATE_queryWithLimit(L,null,"F"),j=__PRIVATE_queryToTarget(L)),this.indexManager.getDocumentsMatchingTarget(m,j).next(re=>{const le=__PRIVATE_documentKeySet(...re);return this.zi.getDocuments(m,le).next(ve=>this.indexManager.getMinOffset(m,j).next(ye=>{const Ee=this.Zi(L,ve);return this.Xi(L,Ee,le,ye.readTime)?this.ji(m,__PRIVATE_queryWithLimit(L,null,"F")):this.es(m,Ee,L,ye)}))})))}Hi(m,L,j,ee){return __PRIVATE_queryMatchesAllDocuments(L)||ee.isEqual(SnapshotVersion.min())?PersistencePromise.resolve(null):this.zi.getDocuments(m,j).next(re=>{const le=this.Zi(L,re);return this.Xi(L,le,j,ee)?PersistencePromise.resolve(null):(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Re-using previous result from %s to execute query: %s",ee.toString(),__PRIVATE_stringifyQuery(L)),this.es(m,le,L,__PRIVATE_newIndexOffsetSuccessorFromReadTime(ee,-1)).next(ve=>ve))})}Zi(m,L){let j=new SortedSet(__PRIVATE_newQueryComparator(m));return L.forEach((ee,re)=>{__PRIVATE_queryMatches(m,re)&&(j=j.add(re))}),j}Xi(m,L,j,ee){if(m.limit===null)return!1;if(j.size!==L.size)return!0;const re=m.limitType==="F"?L.last():L.first();return!!re&&(re.hasPendingWrites||re.version.compareTo(ee)>0)}Ji(m,L,j){return __PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Using full collection scan to execute query:",__PRIVATE_stringifyQuery(L)),this.zi.getDocumentsMatchingQuery(m,L,IndexOffset.min(),j)}es(m,L,j,ee){return this.zi.getDocumentsMatchingQuery(m,j,ee).next(re=>(L.forEach(le=>{re=re.insert(le.key,le)}),re))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_LocalStoreImpl{constructor(m,L,j,ee){this.persistence=m,this.ts=L,this.serializer=ee,this.ns=new SortedMap(__PRIVATE_primitiveComparator),this.rs=new ObjectMap(re=>__PRIVATE_canonifyTarget(re),__PRIVATE_targetEquals),this.ss=new Map,this.os=m.getRemoteDocumentCache(),this.Qr=m.getTargetCache(),this.$r=m.getBundleCache(),this._s(j)}_s(m){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(m),this.indexManager=this.persistence.getIndexManager(m),this.mutationQueue=this.persistence.getMutationQueue(m,this.indexManager),this.localDocuments=new LocalDocumentsView(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(m){return this.persistence.runTransaction("Collect garbage","readwrite-primary",L=>m.collect(L,this.ns))}}function __PRIVATE_newLocalStore($,m,L,j){return new __PRIVATE_LocalStoreImpl($,m,L,j)}async function __PRIVATE_localStoreHandleUserChange($,m){const L=__PRIVATE_debugCast($);return await L.persistence.runTransaction("Handle user change","readonly",j=>{let ee;return L.mutationQueue.getAllMutationBatches(j).next(re=>(ee=re,L._s(m),L.mutationQueue.getAllMutationBatches(j))).next(re=>{const le=[],ve=[];let ye=__PRIVATE_documentKeySet();for(const Ee of ee){le.push(Ee.batchId);for(const Me of Ee.mutations)ye=ye.add(Me.key)}for(const Ee of re){ve.push(Ee.batchId);for(const Me of Ee.mutations)ye=ye.add(Me.key)}return L.localDocuments.getDocuments(j,ye).next(Ee=>({us:Ee,removedBatchIds:le,addedBatchIds:ve}))})})}function __PRIVATE_localStoreAcknowledgeBatch($,m){const L=__PRIVATE_debugCast($);return L.persistence.runTransaction("Acknowledge batch","readwrite-primary",j=>{const ee=m.batch.keys(),re=L.os.newChangeBuffer({trackRemovals:!0});return function(ve,ye,Ee,Me){const Ce=Ee.batch,De=Ce.keys();let Be=PersistencePromise.resolve();return De.forEach(ke=>{Be=Be.next(()=>Me.getEntry(ye,ke)).next(Fe=>{const Oe=Ee.docVersions.get(ke);__PRIVATE_hardAssert(Oe!==null),Fe.version.compareTo(Oe)<0&&(Ce.applyToRemoteDocument(Fe,Ee),Fe.isValidDocument()&&(Fe.setReadTime(Ee.commitVersion),Me.addEntry(Fe)))})}),Be.next(()=>ve.mutationQueue.removeMutationBatch(ye,Ce))}(L,j,m,re).next(()=>re.apply(j)).next(()=>L.mutationQueue.performConsistencyCheck(j)).next(()=>L.documentOverlayCache.removeOverlaysForBatchId(j,ee,m.batch.batchId)).next(()=>L.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(j,function(ve){let ye=__PRIVATE_documentKeySet();for(let Ee=0;Ee<ve.mutationResults.length;++Ee)ve.mutationResults[Ee].transformResults.length>0&&(ye=ye.add(ve.batch.mutations[Ee].key));return ye}(m))).next(()=>L.localDocuments.getDocuments(j,ee))})}function __PRIVATE_localStoreGetLastRemoteSnapshotVersion($){const m=__PRIVATE_debugCast($);return m.persistence.runTransaction("Get last remote snapshot version","readonly",L=>m.Qr.getLastRemoteSnapshotVersion(L))}function __PRIVATE_localStoreApplyRemoteEventToLocalCache($,m){const L=__PRIVATE_debugCast($),j=m.snapshotVersion;let ee=L.ns;return L.persistence.runTransaction("Apply remote event","readwrite-primary",re=>{const le=L.os.newChangeBuffer({trackRemovals:!0});ee=L.ns;const ve=[];m.targetChanges.forEach((Me,Ce)=>{const De=ee.get(Ce);if(!De)return;ve.push(L.Qr.removeMatchingKeys(re,Me.removedDocuments,Ce).next(()=>L.Qr.addMatchingKeys(re,Me.addedDocuments,Ce)));let Be=De.withSequenceNumber(re.currentSequenceNumber);m.targetMismatches.get(Ce)!==null?Be=Be.withResumeToken(ByteString.EMPTY_BYTE_STRING,SnapshotVersion.min()).withLastLimboFreeSnapshotVersion(SnapshotVersion.min()):Me.resumeToken.approximateByteSize()>0&&(Be=Be.withResumeToken(Me.resumeToken,j)),ee=ee.insert(Ce,Be),function(Fe,Oe,Ne){return Fe.resumeToken.approximateByteSize()===0||Oe.snapshotVersion.toMicroseconds()-Fe.snapshotVersion.toMicroseconds()>=3e8?!0:Ne.addedDocuments.size+Ne.modifiedDocuments.size+Ne.removedDocuments.size>0}(De,Be,Me)&&ve.push(L.Qr.updateTargetData(re,Be))});let ye=__PRIVATE_mutableDocumentMap(),Ee=__PRIVATE_documentKeySet();if(m.documentUpdates.forEach(Me=>{m.resolvedLimboDocuments.has(Me)&&ve.push(L.persistence.referenceDelegate.updateLimboDocument(re,Me))}),ve.push(__PRIVATE_populateDocumentChangeBuffer(re,le,m.documentUpdates).next(Me=>{ye=Me.cs,Ee=Me.ls})),!j.isEqual(SnapshotVersion.min())){const Me=L.Qr.getLastRemoteSnapshotVersion(re).next(Ce=>L.Qr.setTargetsMetadata(re,re.currentSequenceNumber,j));ve.push(Me)}return PersistencePromise.waitFor(ve).next(()=>le.apply(re)).next(()=>L.localDocuments.getLocalViewOfDocuments(re,ye,Ee)).next(()=>ye)}).then(re=>(L.ns=ee,re))}function __PRIVATE_populateDocumentChangeBuffer($,m,L){let j=__PRIVATE_documentKeySet(),ee=__PRIVATE_documentKeySet();return L.forEach(re=>j=j.add(re)),m.getEntries($,j).next(re=>{let le=__PRIVATE_mutableDocumentMap();return L.forEach((ve,ye)=>{const Ee=re.get(ve);ye.isFoundDocument()!==Ee.isFoundDocument()&&(ee=ee.add(ve)),ye.isNoDocument()&&ye.version.isEqual(SnapshotVersion.min())?(m.removeEntry(ve,ye.readTime),le=le.insert(ve,ye)):!Ee.isValidDocument()||ye.version.compareTo(Ee.version)>0||ye.version.compareTo(Ee.version)===0&&Ee.hasPendingWrites?(m.addEntry(ye),le=le.insert(ve,ye)):__PRIVATE_logDebug("LocalStore","Ignoring outdated watch update for ",ve,". Current version:",Ee.version," Watch version:",ye.version)}),{cs:le,ls:ee}})}function __PRIVATE_localStoreGetNextMutationBatch($,m){const L=__PRIVATE_debugCast($);return L.persistence.runTransaction("Get next mutation batch","readonly",j=>(m===void 0&&(m=-1),L.mutationQueue.getNextMutationBatchAfterBatchId(j,m)))}function __PRIVATE_localStoreAllocateTarget($,m){const L=__PRIVATE_debugCast($);return L.persistence.runTransaction("Allocate target","readwrite",j=>{let ee;return L.Qr.getTargetData(j,m).next(re=>re?(ee=re,PersistencePromise.resolve(ee)):L.Qr.allocateTargetId(j).next(le=>(ee=new TargetData(m,le,"TargetPurposeListen",j.currentSequenceNumber),L.Qr.addTargetData(j,ee).next(()=>ee))))}).then(j=>{const ee=L.ns.get(j.targetId);return(ee===null||j.snapshotVersion.compareTo(ee.snapshotVersion)>0)&&(L.ns=L.ns.insert(j.targetId,j),L.rs.set(m,j.targetId)),j})}async function __PRIVATE_localStoreReleaseTarget($,m,L){const j=__PRIVATE_debugCast($),ee=j.ns.get(m),re=L?"readwrite":"readwrite-primary";try{L||await j.persistence.runTransaction("Release target",re,le=>j.persistence.referenceDelegate.removeTarget(le,ee))}catch(le){if(!__PRIVATE_isIndexedDbTransactionError(le))throw le;__PRIVATE_logDebug("LocalStore",`Failed to update sequence numbers for target ${m}: ${le}`)}j.ns=j.ns.remove(m),j.rs.delete(ee.target)}function __PRIVATE_localStoreExecuteQuery($,m,L){const j=__PRIVATE_debugCast($);let ee=SnapshotVersion.min(),re=__PRIVATE_documentKeySet();return j.persistence.runTransaction("Execute query","readwrite",le=>function(ye,Ee,Me){const Ce=__PRIVATE_debugCast(ye),De=Ce.rs.get(Me);return De!==void 0?PersistencePromise.resolve(Ce.ns.get(De)):Ce.Qr.getTargetData(Ee,Me)}(j,le,__PRIVATE_queryToTarget(m)).next(ve=>{if(ve)return ee=ve.lastLimboFreeSnapshotVersion,j.Qr.getMatchingKeysForTargetId(le,ve.targetId).next(ye=>{re=ye})}).next(()=>j.ts.getDocumentsMatchingQuery(le,m,L?ee:SnapshotVersion.min(),L?re:__PRIVATE_documentKeySet())).next(ve=>(__PRIVATE_setMaxReadTime(j,__PRIVATE_queryCollectionGroup(m),ve),{documents:ve,hs:re})))}function __PRIVATE_setMaxReadTime($,m,L){let j=$.ss.get(m)||SnapshotVersion.min();L.forEach((ee,re)=>{re.readTime.compareTo(j)>0&&(j=re.readTime)}),$.ss.set(m,j)}class __PRIVATE_LocalClientState{constructor(){this.activeTargetIds=__PRIVATE_targetIdSet()}As(m){this.activeTargetIds=this.activeTargetIds.add(m)}Rs(m){this.activeTargetIds=this.activeTargetIds.delete(m)}ds(){const m={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(m)}}class __PRIVATE_MemorySharedClientState{constructor(){this.no=new __PRIVATE_LocalClientState,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(m){}updateMutationState(m,L,j){}addLocalQueryTarget(m){return this.no.As(m),this.ro[m]||"not-current"}updateQueryState(m,L,j){this.ro[m]=L}removeLocalQueryTarget(m){this.no.Rs(m)}isLocalQueryTarget(m){return this.no.activeTargetIds.has(m)}clearQueryState(m){delete this.ro[m]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(m){return this.no.activeTargetIds.has(m)}start(){return this.no=new __PRIVATE_LocalClientState,Promise.resolve()}handleUserChange(m,L,j){}setOnlineState(m){}shutdown(){}writeSequenceNumber(m){}notifyBundleLoaded(m){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_NoopConnectivityMonitor{io(m){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_BrowserConnectivityMonitor{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(m){this.uo.push(m)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){__PRIVATE_logDebug("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const m of this.uo)m(0)}ao(){__PRIVATE_logDebug("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const m of this.uo)m(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Re=null;function __PRIVATE_generateUniqueDebugId(){return Re===null?Re=function(){return 268435456+Math.round(2147483648*Math.random())}():Re++,"0x"+Re.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ve={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_StreamBridge{constructor(m){this.lo=m.lo,this.ho=m.ho}Po(m){this.Io=m}To(m){this.Eo=m}onMessage(m){this.Ao=m}close(){this.ho()}send(m){this.lo(m)}Ro(){this.Io()}Vo(m){this.Eo(m)}mo(m){this.Ao(m)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const me="WebChannelConnection";class __PRIVATE_WebChannelConnection extends class{constructor(L){this.databaseInfo=L,this.databaseId=L.databaseId;const j=L.ssl?"https":"http",ee=encodeURIComponent(this.databaseId.projectId),re=encodeURIComponent(this.databaseId.database);this.fo=j+"://"+L.host,this.po=`projects/${ee}/databases/${re}`,this.yo=this.databaseId.database==="(default)"?`project_id=${ee}`:`project_id=${ee}&database_id=${re}`}get wo(){return!1}So(L,j,ee,re,le){const ve=__PRIVATE_generateUniqueDebugId(),ye=this.bo(L,j.toUriEncodedString());__PRIVATE_logDebug("RestConnection",`Sending RPC '${L}' ${ve}:`,ye,ee);const Ee={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(Ee,re,le),this.Co(L,ye,Ee,ee).then(Me=>(__PRIVATE_logDebug("RestConnection",`Received RPC '${L}' ${ve}: `,Me),Me),Me=>{throw __PRIVATE_logWarn("RestConnection",`RPC '${L}' ${ve} failed with error: `,Me,"url: ",ye,"request:",ee),Me})}vo(L,j,ee,re,le,ve){return this.So(L,j,ee,re,le)}Do(L,j,ee){L["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+S}(),L["Content-Type"]="text/plain",this.databaseInfo.appId&&(L["X-Firebase-GMPID"]=this.databaseInfo.appId),j&&j.headers.forEach((re,le)=>L[le]=re),ee&&ee.headers.forEach((re,le)=>L[le]=re)}bo(L,j){const ee=Ve[L];return`${this.fo}/v1/${j}:${ee}`}terminate(){}}{constructor(m){super(m),this.forceLongPolling=m.forceLongPolling,this.autoDetectLongPolling=m.autoDetectLongPolling,this.useFetchStreams=m.useFetchStreams,this.longPollingOptions=m.longPollingOptions}Co(m,L,j,ee){const re=__PRIVATE_generateUniqueDebugId();return new Promise((le,ve)=>{const ye=new XhrIo;ye.setWithCredentials(!0),ye.listenOnce(EventType.COMPLETE,()=>{try{switch(ye.getLastErrorCode()){case ErrorCode.NO_ERROR:const Me=ye.getResponseJson();__PRIVATE_logDebug(me,`XHR for RPC '${m}' ${re} received:`,JSON.stringify(Me)),le(Me);break;case ErrorCode.TIMEOUT:__PRIVATE_logDebug(me,`RPC '${m}' ${re} timed out`),ve(new FirestoreError(D.DEADLINE_EXCEEDED,"Request time out"));break;case ErrorCode.HTTP_ERROR:const Ce=ye.getStatus();if(__PRIVATE_logDebug(me,`RPC '${m}' ${re} failed with status:`,Ce,"response text:",ye.getResponseText()),Ce>0){let De=ye.getResponseJson();Array.isArray(De)&&(De=De[0]);const Be=De==null?void 0:De.error;if(Be&&Be.status&&Be.message){const ke=function(Oe){const Ne=Oe.toLowerCase().replace(/_/g,"-");return Object.values(D).indexOf(Ne)>=0?Ne:D.UNKNOWN}(Be.status);ve(new FirestoreError(ke,Be.message))}else ve(new FirestoreError(D.UNKNOWN,"Server responded with status "+ye.getStatus()))}else ve(new FirestoreError(D.UNAVAILABLE,"Connection failed."));break;default:fail()}}finally{__PRIVATE_logDebug(me,`RPC '${m}' ${re} completed.`)}});const Ee=JSON.stringify(ee);__PRIVATE_logDebug(me,`RPC '${m}' ${re} sending request:`,ee),ye.send(L,"POST",Ee,j,15)})}Fo(m,L,j){const ee=__PRIVATE_generateUniqueDebugId(),re=[this.fo,"/","google.firestore.v1.Firestore","/",m,"/channel"],le=createWebChannelTransport(),ve=getStatEventTarget(),ye={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},Ee=this.longPollingOptions.timeoutSeconds;Ee!==void 0&&(ye.longPollingTimeout=Math.round(1e3*Ee)),this.useFetchStreams&&(ye.useFetchStreams=!0),this.Do(ye.initMessageHeaders,L,j),ye.encodeInitMessageHeaders=!0;const Me=re.join("");__PRIVATE_logDebug(me,`Creating RPC '${m}' stream ${ee}: ${Me}`,ye);const Ce=le.createWebChannel(Me,ye);let De=!1,Be=!1;const ke=new __PRIVATE_StreamBridge({lo:Oe=>{Be?__PRIVATE_logDebug(me,`Not sending because RPC '${m}' stream ${ee} is closed:`,Oe):(De||(__PRIVATE_logDebug(me,`Opening RPC '${m}' stream ${ee} transport.`),Ce.open(),De=!0),__PRIVATE_logDebug(me,`RPC '${m}' stream ${ee} sending:`,Oe),Ce.send(Oe))},ho:()=>Ce.close()}),Fe=(Oe,Ne,ze)=>{Oe.listen(Ne,$e=>{try{ze($e)}catch(He){setTimeout(()=>{throw He},0)}})};return Fe(Ce,WebChannel.EventType.OPEN,()=>{Be||__PRIVATE_logDebug(me,`RPC '${m}' stream ${ee} transport opened.`)}),Fe(Ce,WebChannel.EventType.CLOSE,()=>{Be||(Be=!0,__PRIVATE_logDebug(me,`RPC '${m}' stream ${ee} transport closed`),ke.Vo())}),Fe(Ce,WebChannel.EventType.ERROR,Oe=>{Be||(Be=!0,__PRIVATE_logWarn(me,`RPC '${m}' stream ${ee} transport errored:`,Oe),ke.Vo(new FirestoreError(D.UNAVAILABLE,"The operation could not be completed")))}),Fe(Ce,WebChannel.EventType.MESSAGE,Oe=>{var Ne;if(!Be){const ze=Oe.data[0];__PRIVATE_hardAssert(!!ze);const $e=ze,He=$e.error||((Ne=$e[0])===null||Ne===void 0?void 0:Ne.error);if(He){__PRIVATE_logDebug(me,`RPC '${m}' stream ${ee} received error:`,He);const We=He.status;let qe=function(Ke){const rt=ue[Ke];if(rt!==void 0)return __PRIVATE_mapCodeFromRpcCode(rt)}(We),Ye=He.message;qe===void 0&&(qe=D.INTERNAL,Ye="Unknown error status: "+We+" with message "+He.message),Be=!0,ke.Vo(new FirestoreError(qe,Ye)),Ce.close()}else __PRIVATE_logDebug(me,`RPC '${m}' stream ${ee} received:`,ze),ke.mo(ze)}}),Fe(ve,Event$1.STAT_EVENT,Oe=>{Oe.stat===Stat.PROXY?__PRIVATE_logDebug(me,`RPC '${m}' stream ${ee} detected buffering proxy`):Oe.stat===Stat.NOPROXY&&__PRIVATE_logDebug(me,`RPC '${m}' stream ${ee} detected no buffering proxy`)}),setTimeout(()=>{ke.Ro()},0),ke}}function getDocument(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_newSerializer($){return new JsonProtoSerializer($,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ExponentialBackoff{constructor(m,L,j=1e3,ee=1.5,re=6e4){this.oi=m,this.timerId=L,this.Mo=j,this.xo=ee,this.Oo=re,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(m){this.cancel();const L=Math.floor(this.No+this.Qo()),j=Math.max(0,Date.now()-this.Bo),ee=Math.max(0,L-j);ee>0&&__PRIVATE_logDebug("ExponentialBackoff",`Backing off for ${ee} ms (base delay: ${this.No} ms, delay with jitter: ${L} ms, last attempt: ${j} ms ago)`),this.Lo=this.oi.enqueueAfterDelay(this.timerId,ee,()=>(this.Bo=Date.now(),m())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Lo!==null&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){this.Lo!==null&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_PersistentStream{constructor(m,L,j,ee,re,le,ve,ye){this.oi=m,this.$o=j,this.Uo=ee,this.connection=re,this.authCredentialsProvider=le,this.appCheckCredentialsProvider=ve,this.listener=ye,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new __PRIVATE_ExponentialBackoff(m,L)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(m){this.n_(),this.stream.send(m)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(m,L){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,m!==4?this.jo.reset():L&&L.code===D.RESOURCE_EXHAUSTED?(__PRIVATE_logError(L.toString()),__PRIVATE_logError("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):L&&L.code===D.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=m,await this.listener.To(L)}i_(){}auth(){this.state=1;const m=this.s_(this.Wo),L=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([j,ee])=>{this.Wo===L&&this.o_(j,ee)},j=>{m(()=>{const ee=new FirestoreError(D.UNKNOWN,"Fetching auth token failed: "+j.message);return this.__(ee)})})}o_(m,L){const j=this.s_(this.Wo);this.stream=this.a_(m,L),this.stream.Po(()=>{j(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(ee=>{j(()=>this.__(ee))}),this.stream.onMessage(ee=>{j(()=>this.onMessage(ee))})}Yo(){this.state=5,this.jo.qo(async()=>{this.state=0,this.start()})}__(m){return __PRIVATE_logDebug("PersistentStream",`close with error: ${m}`),this.stream=null,this.close(4,m)}s_(m){return L=>{this.oi.enqueueAndForget(()=>this.Wo===m?L():(__PRIVATE_logDebug("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class __PRIVATE_PersistentListenStream extends __PRIVATE_PersistentStream{constructor(m,L,j,ee,re,le){super(m,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",L,j,ee,le),this.serializer=re}a_(m,L){return this.connection.Fo("Listen",m,L)}onMessage(m){this.jo.reset();const L=__PRIVATE_fromWatchChange(this.serializer,m),j=function(re){if(!("targetChange"in re))return SnapshotVersion.min();const le=re.targetChange;return le.targetIds&&le.targetIds.length?SnapshotVersion.min():le.readTime?__PRIVATE_fromVersion(le.readTime):SnapshotVersion.min()}(m);return this.listener.u_(L,j)}c_(m){const L={};L.database=__PRIVATE_getEncodedDatabaseId(this.serializer),L.addTarget=function(re,le){let ve;const ye=le.target;if(ve=__PRIVATE_targetIsDocumentTarget(ye)?{documents:__PRIVATE_toDocumentsTarget(re,ye)}:{query:__PRIVATE_toQueryTarget(re,ye).ut},ve.targetId=le.targetId,le.resumeToken.approximateByteSize()>0){ve.resumeToken=__PRIVATE_toBytes(re,le.resumeToken);const Ee=__PRIVATE_toInt32Proto(re,le.expectedCount);Ee!==null&&(ve.expectedCount=Ee)}else if(le.snapshotVersion.compareTo(SnapshotVersion.min())>0){ve.readTime=toTimestamp(re,le.snapshotVersion.toTimestamp());const Ee=__PRIVATE_toInt32Proto(re,le.expectedCount);Ee!==null&&(ve.expectedCount=Ee)}return ve}(this.serializer,m);const j=__PRIVATE_toListenRequestLabels(this.serializer,m);j&&(L.labels=j),this.t_(L)}l_(m){const L={};L.database=__PRIVATE_getEncodedDatabaseId(this.serializer),L.removeTarget=m,this.t_(L)}}class __PRIVATE_PersistentWriteStream extends __PRIVATE_PersistentStream{constructor(m,L,j,ee,re,le){super(m,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",L,j,ee,le),this.serializer=re,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(m,L){return this.connection.Fo("Write",m,L)}onMessage(m){if(__PRIVATE_hardAssert(!!m.streamToken),this.lastStreamToken=m.streamToken,this.h_){this.jo.reset();const L=__PRIVATE_fromWriteResults(m.writeResults,m.commitTime),j=__PRIVATE_fromVersion(m.commitTime);return this.listener.T_(j,L)}return __PRIVATE_hardAssert(!m.writeResults||m.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){const m={};m.database=__PRIVATE_getEncodedDatabaseId(this.serializer),this.t_(m)}I_(m){const L={streamToken:this.lastStreamToken,writes:m.map(j=>toMutation(this.serializer,j))};this.t_(L)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_DatastoreImpl extends class{}{constructor(m,L,j,ee){super(),this.authCredentials=m,this.appCheckCredentials=L,this.connection=j,this.serializer=ee,this.A_=!1}R_(){if(this.A_)throw new FirestoreError(D.FAILED_PRECONDITION,"The client has already been terminated.")}So(m,L,j,ee){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([re,le])=>this.connection.So(m,__PRIVATE_toResourcePath(L,j),ee,re,le)).catch(re=>{throw re.name==="FirebaseError"?(re.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),re):new FirestoreError(D.UNKNOWN,re.toString())})}vo(m,L,j,ee,re){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([le,ve])=>this.connection.vo(m,__PRIVATE_toResourcePath(L,j),ee,le,ve,re)).catch(le=>{throw le.name==="FirebaseError"?(le.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),le):new FirestoreError(D.UNKNOWN,le.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class __PRIVATE_OnlineStateTracker{constructor(m,L){this.asyncQueue=m,this.onlineStateHandler=L,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(m){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${m.toString()}`),this.y_("Offline")))}set(m){this.b_(),this.m_=0,m==="Online"&&(this.g_=!1),this.y_(m)}y_(m){m!==this.state&&(this.state=m,this.onlineStateHandler(m))}w_(m){const L=`Could not reach Cloud Firestore backend. ${m}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(__PRIVATE_logError(L),this.g_=!1):__PRIVATE_logDebug("OnlineStateTracker",L)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_RemoteStoreImpl{constructor(m,L,j,ee,re){this.localStore=m,this.datastore=L,this.asyncQueue=j,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=re,this.M_.io(le=>{j.enqueueAndForget(async()=>{__PRIVATE_canUseNetwork(this)&&(__PRIVATE_logDebug("RemoteStore","Restarting streams for network reachability change."),await async function(ye){const Ee=__PRIVATE_debugCast(ye);Ee.v_.add(4),await __PRIVATE_disableNetworkInternal(Ee),Ee.x_.set("Unknown"),Ee.v_.delete(4),await __PRIVATE_enableNetworkInternal(Ee)}(this))})}),this.x_=new __PRIVATE_OnlineStateTracker(j,ee)}}async function __PRIVATE_enableNetworkInternal($){if(__PRIVATE_canUseNetwork($))for(const m of $.F_)await m(!0)}async function __PRIVATE_disableNetworkInternal($){for(const m of $.F_)await m(!1)}function __PRIVATE_remoteStoreListen($,m){const L=__PRIVATE_debugCast($);L.C_.has(m.targetId)||(L.C_.set(m.targetId,m),__PRIVATE_shouldStartWatchStream(L)?__PRIVATE_startWatchStream(L):__PRIVATE_ensureWatchStream(L).Jo()&&__PRIVATE_sendWatchRequest(L,m))}function __PRIVATE_remoteStoreUnlisten($,m){const L=__PRIVATE_debugCast($),j=__PRIVATE_ensureWatchStream(L);L.C_.delete(m),j.Jo()&&__PRIVATE_sendUnwatchRequest(L,m),L.C_.size===0&&(j.Jo()?j.Xo():__PRIVATE_canUseNetwork(L)&&L.x_.set("Unknown"))}function __PRIVATE_sendWatchRequest($,m){if($.O_.Oe(m.targetId),m.resumeToken.approximateByteSize()>0||m.snapshotVersion.compareTo(SnapshotVersion.min())>0){const L=$.remoteSyncer.getRemoteKeysForTarget(m.targetId).size;m=m.withExpectedCount(L)}__PRIVATE_ensureWatchStream($).c_(m)}function __PRIVATE_sendUnwatchRequest($,m){$.O_.Oe(m),__PRIVATE_ensureWatchStream($).l_(m)}function __PRIVATE_startWatchStream($){$.O_=new __PRIVATE_WatchChangeAggregator({getRemoteKeysForTarget:m=>$.remoteSyncer.getRemoteKeysForTarget(m),_t:m=>$.C_.get(m)||null,nt:()=>$.datastore.serializer.databaseId}),__PRIVATE_ensureWatchStream($).start(),$.x_.p_()}function __PRIVATE_shouldStartWatchStream($){return __PRIVATE_canUseNetwork($)&&!__PRIVATE_ensureWatchStream($).Ho()&&$.C_.size>0}function __PRIVATE_canUseNetwork($){return __PRIVATE_debugCast($).v_.size===0}function __PRIVATE_cleanUpWatchStreamState($){$.O_=void 0}async function __PRIVATE_onWatchStreamOpen($){$.C_.forEach((m,L)=>{__PRIVATE_sendWatchRequest($,m)})}async function __PRIVATE_onWatchStreamClose($,m){__PRIVATE_cleanUpWatchStreamState($),__PRIVATE_shouldStartWatchStream($)?($.x_.S_(m),__PRIVATE_startWatchStream($)):$.x_.set("Unknown")}async function __PRIVATE_onWatchStreamChange($,m,L){if($.x_.set("Online"),m instanceof __PRIVATE_WatchTargetChange&&m.state===2&&m.cause)try{await async function(ee,re){const le=re.cause;for(const ve of re.targetIds)ee.C_.has(ve)&&(await ee.remoteSyncer.rejectListen(ve,le),ee.C_.delete(ve),ee.O_.removeTarget(ve))}($,m)}catch(j){__PRIVATE_logDebug("RemoteStore","Failed to remove targets %s: %s ",m.targetIds.join(","),j),await __PRIVATE_disableNetworkUntilRecovery($,j)}else if(m instanceof __PRIVATE_DocumentWatchChange?$.O_.$e(m):m instanceof __PRIVATE_ExistenceFilterChange?$.O_.Je(m):$.O_.Ge(m),!L.isEqual(SnapshotVersion.min()))try{const j=await __PRIVATE_localStoreGetLastRemoteSnapshotVersion($.localStore);L.compareTo(j)>=0&&await function(re,le){const ve=re.O_.it(le);return ve.targetChanges.forEach((ye,Ee)=>{if(ye.resumeToken.approximateByteSize()>0){const Me=re.C_.get(Ee);Me&&re.C_.set(Ee,Me.withResumeToken(ye.resumeToken,le))}}),ve.targetMismatches.forEach((ye,Ee)=>{const Me=re.C_.get(ye);if(!Me)return;re.C_.set(ye,Me.withResumeToken(ByteString.EMPTY_BYTE_STRING,Me.snapshotVersion)),__PRIVATE_sendUnwatchRequest(re,ye);const Ce=new TargetData(Me.target,ye,Ee,Me.sequenceNumber);__PRIVATE_sendWatchRequest(re,Ce)}),re.remoteSyncer.applyRemoteEvent(ve)}($,L)}catch(j){__PRIVATE_logDebug("RemoteStore","Failed to raise snapshot:",j),await __PRIVATE_disableNetworkUntilRecovery($,j)}}async function __PRIVATE_disableNetworkUntilRecovery($,m,L){if(!__PRIVATE_isIndexedDbTransactionError(m))throw m;$.v_.add(1),await __PRIVATE_disableNetworkInternal($),$.x_.set("Offline"),L||(L=()=>__PRIVATE_localStoreGetLastRemoteSnapshotVersion($.localStore)),$.asyncQueue.enqueueRetryable(async()=>{__PRIVATE_logDebug("RemoteStore","Retrying IndexedDB access"),await L(),$.v_.delete(1),await __PRIVATE_enableNetworkInternal($)})}function __PRIVATE_executeWithRecovery($,m){return m().catch(L=>__PRIVATE_disableNetworkUntilRecovery($,L,m))}async function __PRIVATE_fillWritePipeline($){const m=__PRIVATE_debugCast($),L=__PRIVATE_ensureWriteStream(m);let j=m.D_.length>0?m.D_[m.D_.length-1].batchId:-1;for(;__PRIVATE_canAddToWritePipeline(m);)try{const ee=await __PRIVATE_localStoreGetNextMutationBatch(m.localStore,j);if(ee===null){m.D_.length===0&&L.Xo();break}j=ee.batchId,__PRIVATE_addToWritePipeline(m,ee)}catch(ee){await __PRIVATE_disableNetworkUntilRecovery(m,ee)}__PRIVATE_shouldStartWriteStream(m)&&__PRIVATE_startWriteStream(m)}function __PRIVATE_canAddToWritePipeline($){return __PRIVATE_canUseNetwork($)&&$.D_.length<10}function __PRIVATE_addToWritePipeline($,m){$.D_.push(m);const L=__PRIVATE_ensureWriteStream($);L.Jo()&&L.P_&&L.I_(m.mutations)}function __PRIVATE_shouldStartWriteStream($){return __PRIVATE_canUseNetwork($)&&!__PRIVATE_ensureWriteStream($).Ho()&&$.D_.length>0}function __PRIVATE_startWriteStream($){__PRIVATE_ensureWriteStream($).start()}async function __PRIVATE_onWriteStreamOpen($){__PRIVATE_ensureWriteStream($).d_()}async function __PRIVATE_onWriteHandshakeComplete($){const m=__PRIVATE_ensureWriteStream($);for(const L of $.D_)m.I_(L.mutations)}async function __PRIVATE_onMutationResult($,m,L){const j=$.D_.shift(),ee=MutationBatchResult.from(j,m,L);await __PRIVATE_executeWithRecovery($,()=>$.remoteSyncer.applySuccessfulWrite(ee)),await __PRIVATE_fillWritePipeline($)}async function __PRIVATE_onWriteStreamClose($,m){m&&__PRIVATE_ensureWriteStream($).P_&&await async function(j,ee){if(function(le){return __PRIVATE_isPermanentError(le)&&le!==D.ABORTED}(ee.code)){const re=j.D_.shift();__PRIVATE_ensureWriteStream(j).Zo(),await __PRIVATE_executeWithRecovery(j,()=>j.remoteSyncer.rejectFailedWrite(re.batchId,ee)),await __PRIVATE_fillWritePipeline(j)}}($,m),__PRIVATE_shouldStartWriteStream($)&&__PRIVATE_startWriteStream($)}async function __PRIVATE_remoteStoreHandleCredentialChange($,m){const L=__PRIVATE_debugCast($);L.asyncQueue.verifyOperationInProgress(),__PRIVATE_logDebug("RemoteStore","RemoteStore received new credentials");const j=__PRIVATE_canUseNetwork(L);L.v_.add(3),await __PRIVATE_disableNetworkInternal(L),j&&L.x_.set("Unknown"),await L.remoteSyncer.handleCredentialChange(m),L.v_.delete(3),await __PRIVATE_enableNetworkInternal(L)}async function __PRIVATE_remoteStoreApplyPrimaryState($,m){const L=__PRIVATE_debugCast($);m?(L.v_.delete(2),await __PRIVATE_enableNetworkInternal(L)):m||(L.v_.add(2),await __PRIVATE_disableNetworkInternal(L),L.x_.set("Unknown"))}function __PRIVATE_ensureWatchStream($){return $.N_||($.N_=function(L,j,ee){const re=__PRIVATE_debugCast(L);return re.R_(),new __PRIVATE_PersistentListenStream(j,re.connection,re.authCredentials,re.appCheckCredentials,re.serializer,ee)}($.datastore,$.asyncQueue,{Po:__PRIVATE_onWatchStreamOpen.bind(null,$),To:__PRIVATE_onWatchStreamClose.bind(null,$),u_:__PRIVATE_onWatchStreamChange.bind(null,$)}),$.F_.push(async m=>{m?($.N_.Zo(),__PRIVATE_shouldStartWatchStream($)?__PRIVATE_startWatchStream($):$.x_.set("Unknown")):(await $.N_.stop(),__PRIVATE_cleanUpWatchStreamState($))})),$.N_}function __PRIVATE_ensureWriteStream($){return $.L_||($.L_=function(L,j,ee){const re=__PRIVATE_debugCast(L);return re.R_(),new __PRIVATE_PersistentWriteStream(j,re.connection,re.authCredentials,re.appCheckCredentials,re.serializer,ee)}($.datastore,$.asyncQueue,{Po:__PRIVATE_onWriteStreamOpen.bind(null,$),To:__PRIVATE_onWriteStreamClose.bind(null,$),E_:__PRIVATE_onWriteHandshakeComplete.bind(null,$),T_:__PRIVATE_onMutationResult.bind(null,$)}),$.F_.push(async m=>{m?($.L_.Zo(),await __PRIVATE_fillWritePipeline($)):(await $.L_.stop(),$.D_.length>0&&(__PRIVATE_logDebug("RemoteStore",`Stopping write stream with ${$.D_.length} pending writes`),$.D_=[]))})),$.L_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DelayedOperation{constructor(m,L,j,ee,re){this.asyncQueue=m,this.timerId=L,this.targetTimeMs=j,this.op=ee,this.removalCallback=re,this.deferred=new __PRIVATE_Deferred,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(le=>{})}get promise(){return this.deferred.promise}static createAndSchedule(m,L,j,ee,re){const le=Date.now()+j,ve=new DelayedOperation(m,L,le,ee,re);return ve.start(j),ve}start(m){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),m)}skipDelay(){return this.handleDelayElapsed()}cancel(m){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new FirestoreError(D.CANCELLED,"Operation cancelled"+(m?": "+m:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(m=>this.deferred.resolve(m))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function __PRIVATE_wrapInUserErrorIfRecoverable($,m){if(__PRIVATE_logError("AsyncQueue",`${m}: ${$}`),__PRIVATE_isIndexedDbTransactionError($))return new FirestoreError(D.UNAVAILABLE,`${m}: ${$}`);throw $}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentSet{constructor(m){this.comparator=m?(L,j)=>m(L,j)||DocumentKey.comparator(L.key,j.key):(L,j)=>DocumentKey.comparator(L.key,j.key),this.keyedMap=documentMap(),this.sortedSet=new SortedMap(this.comparator)}static emptySet(m){return new DocumentSet(m.comparator)}has(m){return this.keyedMap.get(m)!=null}get(m){return this.keyedMap.get(m)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(m){const L=this.keyedMap.get(m);return L?this.sortedSet.indexOf(L):-1}get size(){return this.sortedSet.size}forEach(m){this.sortedSet.inorderTraversal((L,j)=>(m(L),!1))}add(m){const L=this.delete(m.key);return L.copy(L.keyedMap.insert(m.key,m),L.sortedSet.insert(m,null))}delete(m){const L=this.get(m);return L?this.copy(this.keyedMap.remove(m),this.sortedSet.remove(L)):this}isEqual(m){if(!(m instanceof DocumentSet)||this.size!==m.size)return!1;const L=this.sortedSet.getIterator(),j=m.sortedSet.getIterator();for(;L.hasNext();){const ee=L.getNext().key,re=j.getNext().key;if(!ee.isEqual(re))return!1}return!0}toString(){const m=[];return this.forEach(L=>{m.push(L.toString())}),m.length===0?"DocumentSet ()":`DocumentSet (
  `+m.join(`  
`)+`
)`}copy(m,L){const j=new DocumentSet;return j.comparator=this.comparator,j.keyedMap=m,j.sortedSet=L,j}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_DocumentChangeSet{constructor(){this.B_=new SortedMap(DocumentKey.comparator)}track(m){const L=m.doc.key,j=this.B_.get(L);j?m.type!==0&&j.type===3?this.B_=this.B_.insert(L,m):m.type===3&&j.type!==1?this.B_=this.B_.insert(L,{type:j.type,doc:m.doc}):m.type===2&&j.type===2?this.B_=this.B_.insert(L,{type:2,doc:m.doc}):m.type===2&&j.type===0?this.B_=this.B_.insert(L,{type:0,doc:m.doc}):m.type===1&&j.type===0?this.B_=this.B_.remove(L):m.type===1&&j.type===2?this.B_=this.B_.insert(L,{type:1,doc:j.doc}):m.type===0&&j.type===1?this.B_=this.B_.insert(L,{type:2,doc:m.doc}):fail():this.B_=this.B_.insert(L,m)}k_(){const m=[];return this.B_.inorderTraversal((L,j)=>{m.push(j)}),m}}class ViewSnapshot{constructor(m,L,j,ee,re,le,ve,ye,Ee){this.query=m,this.docs=L,this.oldDocs=j,this.docChanges=ee,this.mutatedKeys=re,this.fromCache=le,this.syncStateChanged=ve,this.excludesMetadataChanges=ye,this.hasCachedResults=Ee}static fromInitialDocuments(m,L,j,ee,re){const le=[];return L.forEach(ve=>{le.push({type:0,doc:ve})}),new ViewSnapshot(m,L,DocumentSet.emptySet(L),le,j,ee,!0,!1,re)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(m){if(!(this.fromCache===m.fromCache&&this.hasCachedResults===m.hasCachedResults&&this.syncStateChanged===m.syncStateChanged&&this.mutatedKeys.isEqual(m.mutatedKeys)&&__PRIVATE_queryEquals(this.query,m.query)&&this.docs.isEqual(m.docs)&&this.oldDocs.isEqual(m.oldDocs)))return!1;const L=this.docChanges,j=m.docChanges;if(L.length!==j.length)return!1;for(let ee=0;ee<L.length;ee++)if(L[ee].type!==j[ee].type||!L[ee].doc.isEqual(j[ee].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryListenersInfo{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some(m=>m.U_())}}class __PRIVATE_EventManagerImpl{constructor(){this.queries=new ObjectMap(m=>__PRIVATE_canonifyQuery(m),__PRIVATE_queryEquals),this.onlineState="Unknown",this.W_=new Set}}async function __PRIVATE_eventManagerListen($,m){const L=__PRIVATE_debugCast($);let j=3;const ee=m.query;let re=L.queries.get(ee);re?!re.K_()&&m.U_()&&(j=2):(re=new __PRIVATE_QueryListenersInfo,j=m.U_()?0:1);try{switch(j){case 0:re.q_=await L.onListen(ee,!0);break;case 1:re.q_=await L.onListen(ee,!1);break;case 2:await L.onFirstRemoteStoreListen(ee)}}catch(le){const ve=__PRIVATE_wrapInUserErrorIfRecoverable(le,`Initialization of query '${__PRIVATE_stringifyQuery(m.query)}' failed`);return void m.onError(ve)}L.queries.set(ee,re),re.Q_.push(m),m.G_(L.onlineState),re.q_&&m.z_(re.q_)&&__PRIVATE_raiseSnapshotsInSyncEvent(L)}async function __PRIVATE_eventManagerUnlisten($,m){const L=__PRIVATE_debugCast($),j=m.query;let ee=3;const re=L.queries.get(j);if(re){const le=re.Q_.indexOf(m);le>=0&&(re.Q_.splice(le,1),re.Q_.length===0?ee=m.U_()?0:1:!re.K_()&&m.U_()&&(ee=2))}switch(ee){case 0:return L.queries.delete(j),L.onUnlisten(j,!0);case 1:return L.queries.delete(j),L.onUnlisten(j,!1);case 2:return L.onLastRemoteStoreUnlisten(j);default:return}}function __PRIVATE_eventManagerOnWatchChange($,m){const L=__PRIVATE_debugCast($);let j=!1;for(const ee of m){const re=ee.query,le=L.queries.get(re);if(le){for(const ve of le.Q_)ve.z_(ee)&&(j=!0);le.q_=ee}}j&&__PRIVATE_raiseSnapshotsInSyncEvent(L)}function __PRIVATE_eventManagerOnWatchError($,m,L){const j=__PRIVATE_debugCast($),ee=j.queries.get(m);if(ee)for(const re of ee.Q_)re.onError(L);j.queries.delete(m)}function __PRIVATE_raiseSnapshotsInSyncEvent($){$.W_.forEach(m=>{m.next()})}var fe,ge;(ge=fe||(fe={})).j_="default",ge.Cache="cache";class __PRIVATE_QueryListener{constructor(m,L,j){this.query=m,this.H_=L,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=j||{}}z_(m){if(!this.options.includeMetadataChanges){const j=[];for(const ee of m.docChanges)ee.type!==3&&j.push(ee);m=new ViewSnapshot(m.query,m.docs,m.oldDocs,j,m.mutatedKeys,m.fromCache,m.syncStateChanged,!0,m.hasCachedResults)}let L=!1;return this.J_?this.Z_(m)&&(this.H_.next(m),L=!0):this.X_(m,this.onlineState)&&(this.ea(m),L=!0),this.Y_=m,L}onError(m){this.H_.error(m)}G_(m){this.onlineState=m;let L=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,m)&&(this.ea(this.Y_),L=!0),L}X_(m,L){if(!m.fromCache||!this.U_())return!0;const j=L!=="Offline";return(!this.options.ta||!j)&&(!m.docs.isEmpty()||m.hasCachedResults||L==="Offline")}Z_(m){if(m.docChanges.length>0)return!0;const L=this.Y_&&this.Y_.hasPendingWrites!==m.hasPendingWrites;return!(!m.syncStateChanged&&!L)&&this.options.includeMetadataChanges===!0}ea(m){m=ViewSnapshot.fromInitialDocuments(m.query,m.docs,m.mutatedKeys,m.fromCache,m.hasCachedResults),this.J_=!0,this.H_.next(m)}U_(){return this.options.source!==fe.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AddedLimboDocument{constructor(m){this.key=m}}class __PRIVATE_RemovedLimboDocument{constructor(m){this.key=m}}class __PRIVATE_View{constructor(m,L){this.query=m,this.ua=L,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=__PRIVATE_documentKeySet(),this.mutatedKeys=__PRIVATE_documentKeySet(),this.ha=__PRIVATE_newQueryComparator(m),this.Pa=new DocumentSet(this.ha)}get Ia(){return this.ua}Ta(m,L){const j=L?L.Ea:new __PRIVATE_DocumentChangeSet,ee=L?L.Pa:this.Pa;let re=L?L.mutatedKeys:this.mutatedKeys,le=ee,ve=!1;const ye=this.query.limitType==="F"&&ee.size===this.query.limit?ee.last():null,Ee=this.query.limitType==="L"&&ee.size===this.query.limit?ee.first():null;if(m.inorderTraversal((Me,Ce)=>{const De=ee.get(Me),Be=__PRIVATE_queryMatches(this.query,Ce)?Ce:null,ke=!!De&&this.mutatedKeys.has(De.key),Fe=!!Be&&(Be.hasLocalMutations||this.mutatedKeys.has(Be.key)&&Be.hasCommittedMutations);let Oe=!1;De&&Be?De.data.isEqual(Be.data)?ke!==Fe&&(j.track({type:3,doc:Be}),Oe=!0):this.da(De,Be)||(j.track({type:2,doc:Be}),Oe=!0,(ye&&this.ha(Be,ye)>0||Ee&&this.ha(Be,Ee)<0)&&(ve=!0)):!De&&Be?(j.track({type:0,doc:Be}),Oe=!0):De&&!Be&&(j.track({type:1,doc:De}),Oe=!0,(ye||Ee)&&(ve=!0)),Oe&&(Be?(le=le.add(Be),re=Fe?re.add(Me):re.delete(Me)):(le=le.delete(Me),re=re.delete(Me)))}),this.query.limit!==null)for(;le.size>this.query.limit;){const Me=this.query.limitType==="F"?le.last():le.first();le=le.delete(Me.key),re=re.delete(Me.key),j.track({type:1,doc:Me})}return{Pa:le,Ea:j,Xi:ve,mutatedKeys:re}}da(m,L){return m.hasLocalMutations&&L.hasCommittedMutations&&!L.hasLocalMutations}applyChanges(m,L,j,ee){const re=this.Pa;this.Pa=m.Pa,this.mutatedKeys=m.mutatedKeys;const le=m.Ea.k_();le.sort((Me,Ce)=>function(Be,ke){const Fe=Oe=>{switch(Oe){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fail()}};return Fe(Be)-Fe(ke)}(Me.type,Ce.type)||this.ha(Me.doc,Ce.doc)),this.Aa(j),ee=ee!=null&&ee;const ve=L&&!ee?this.Ra():[],ye=this.la.size===0&&this.current&&!ee?1:0,Ee=ye!==this.ca;return this.ca=ye,le.length!==0||Ee?{snapshot:new ViewSnapshot(this.query,m.Pa,re,le,m.mutatedKeys,ye===0,Ee,!1,!!j&&j.resumeToken.approximateByteSize()>0),Va:ve}:{Va:ve}}G_(m){return this.current&&m==="Offline"?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new __PRIVATE_DocumentChangeSet,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(m){return!this.ua.has(m)&&!!this.Pa.has(m)&&!this.Pa.get(m).hasLocalMutations}Aa(m){m&&(m.addedDocuments.forEach(L=>this.ua=this.ua.add(L)),m.modifiedDocuments.forEach(L=>{}),m.removedDocuments.forEach(L=>this.ua=this.ua.delete(L)),this.current=m.current)}Ra(){if(!this.current)return[];const m=this.la;this.la=__PRIVATE_documentKeySet(),this.Pa.forEach(j=>{this.ma(j.key)&&(this.la=this.la.add(j.key))});const L=[];return m.forEach(j=>{this.la.has(j)||L.push(new __PRIVATE_RemovedLimboDocument(j))}),this.la.forEach(j=>{m.has(j)||L.push(new __PRIVATE_AddedLimboDocument(j))}),L}fa(m){this.ua=m.hs,this.la=__PRIVATE_documentKeySet();const L=this.Ta(m.documents);return this.applyChanges(L,!0)}ga(){return ViewSnapshot.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,this.ca===0,this.hasCachedResults)}}class __PRIVATE_QueryView{constructor(m,L,j){this.query=m,this.targetId=L,this.view=j}}class LimboResolution{constructor(m){this.key=m,this.pa=!1}}class __PRIVATE_SyncEngineImpl{constructor(m,L,j,ee,re,le){this.localStore=m,this.remoteStore=L,this.eventManager=j,this.sharedClientState=ee,this.currentUser=re,this.maxConcurrentLimboResolutions=le,this.ya={},this.wa=new ObjectMap(ve=>__PRIVATE_canonifyQuery(ve),__PRIVATE_queryEquals),this.Sa=new Map,this.ba=new Set,this.Da=new SortedMap(DocumentKey.comparator),this.Ca=new Map,this.va=new __PRIVATE_ReferenceSet,this.Fa={},this.Ma=new Map,this.xa=__PRIVATE_TargetIdGenerator.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return this.Oa===!0}}async function __PRIVATE_syncEngineListen($,m,L=!0){const j=__PRIVATE_ensureWatchCallbacks($);let ee;const re=j.wa.get(m);return re?(j.sharedClientState.addLocalQueryTarget(re.targetId),ee=re.view.ga()):ee=await __PRIVATE_allocateTargetAndMaybeListen(j,m,L,!0),ee}async function __PRIVATE_triggerRemoteStoreListen($,m){const L=__PRIVATE_ensureWatchCallbacks($);await __PRIVATE_allocateTargetAndMaybeListen(L,m,!0,!1)}async function __PRIVATE_allocateTargetAndMaybeListen($,m,L,j){const ee=await __PRIVATE_localStoreAllocateTarget($.localStore,__PRIVATE_queryToTarget(m)),re=ee.targetId,le=L?$.sharedClientState.addLocalQueryTarget(re):"not-current";let ve;return j&&(ve=await __PRIVATE_initializeViewAndComputeSnapshot($,m,re,le==="current",ee.resumeToken)),$.isPrimaryClient&&L&&__PRIVATE_remoteStoreListen($.remoteStore,ee),ve}async function __PRIVATE_initializeViewAndComputeSnapshot($,m,L,j,ee){$.Na=(Ce,De,Be)=>async function(Fe,Oe,Ne,ze){let $e=Oe.view.Ta(Ne);$e.Xi&&($e=await __PRIVATE_localStoreExecuteQuery(Fe.localStore,Oe.query,!1).then(({documents:Ye})=>Oe.view.Ta(Ye,$e)));const He=ze&&ze.targetChanges.get(Oe.targetId),We=ze&&ze.targetMismatches.get(Oe.targetId)!=null,qe=Oe.view.applyChanges($e,Fe.isPrimaryClient,He,We);return __PRIVATE_updateTrackedLimbos(Fe,Oe.targetId,qe.Va),qe.snapshot}($,Ce,De,Be);const re=await __PRIVATE_localStoreExecuteQuery($.localStore,m,!0),le=new __PRIVATE_View(m,re.hs),ve=le.Ta(re.documents),ye=TargetChange.createSynthesizedTargetChangeForCurrentChange(L,j&&$.onlineState!=="Offline",ee),Ee=le.applyChanges(ve,$.isPrimaryClient,ye);__PRIVATE_updateTrackedLimbos($,L,Ee.Va);const Me=new __PRIVATE_QueryView(m,L,le);return $.wa.set(m,Me),$.Sa.has(L)?$.Sa.get(L).push(m):$.Sa.set(L,[m]),Ee.snapshot}async function __PRIVATE_syncEngineUnlisten($,m,L){const j=__PRIVATE_debugCast($),ee=j.wa.get(m),re=j.Sa.get(ee.targetId);if(re.length>1)return j.Sa.set(ee.targetId,re.filter(le=>!__PRIVATE_queryEquals(le,m))),void j.wa.delete(m);j.isPrimaryClient?(j.sharedClientState.removeLocalQueryTarget(ee.targetId),j.sharedClientState.isActiveQueryTarget(ee.targetId)||await __PRIVATE_localStoreReleaseTarget(j.localStore,ee.targetId,!1).then(()=>{j.sharedClientState.clearQueryState(ee.targetId),L&&__PRIVATE_remoteStoreUnlisten(j.remoteStore,ee.targetId),__PRIVATE_removeAndCleanupTarget(j,ee.targetId)}).catch(__PRIVATE_ignoreIfPrimaryLeaseLoss)):(__PRIVATE_removeAndCleanupTarget(j,ee.targetId),await __PRIVATE_localStoreReleaseTarget(j.localStore,ee.targetId,!0))}async function __PRIVATE_triggerRemoteStoreUnlisten($,m){const L=__PRIVATE_debugCast($),j=L.wa.get(m),ee=L.Sa.get(j.targetId);L.isPrimaryClient&&ee.length===1&&(L.sharedClientState.removeLocalQueryTarget(j.targetId),__PRIVATE_remoteStoreUnlisten(L.remoteStore,j.targetId))}async function __PRIVATE_syncEngineWrite($,m,L){const j=__PRIVATE_syncEngineEnsureWriteCallbacks($);try{const ee=await function(le,ve){const ye=__PRIVATE_debugCast(le),Ee=Timestamp.now(),Me=ve.reduce((Be,ke)=>Be.add(ke.key),__PRIVATE_documentKeySet());let Ce,De;return ye.persistence.runTransaction("Locally write mutations","readwrite",Be=>{let ke=__PRIVATE_mutableDocumentMap(),Fe=__PRIVATE_documentKeySet();return ye.os.getEntries(Be,Me).next(Oe=>{ke=Oe,ke.forEach((Ne,ze)=>{ze.isValidDocument()||(Fe=Fe.add(Ne))})}).next(()=>ye.localDocuments.getOverlayedDocuments(Be,ke)).next(Oe=>{Ce=Oe;const Ne=[];for(const ze of ve){const $e=__PRIVATE_mutationExtractBaseValue(ze,Ce.get(ze.key).overlayedDocument);$e!=null&&Ne.push(new __PRIVATE_PatchMutation(ze.key,$e,__PRIVATE_extractFieldMask($e.value.mapValue),Precondition.exists(!0)))}return ye.mutationQueue.addMutationBatch(Be,Ee,Ne,ve)}).next(Oe=>{De=Oe;const Ne=Oe.applyToLocalDocumentSet(Ce,Fe);return ye.documentOverlayCache.saveOverlays(Be,Oe.batchId,Ne)})}).then(()=>({batchId:De.batchId,changes:__PRIVATE_convertOverlayedDocumentMapToDocumentMap(Ce)}))}(j.localStore,m);j.sharedClientState.addPendingMutation(ee.batchId),function(le,ve,ye){let Ee=le.Fa[le.currentUser.toKey()];Ee||(Ee=new SortedMap(__PRIVATE_primitiveComparator)),Ee=Ee.insert(ve,ye),le.Fa[le.currentUser.toKey()]=Ee}(j,ee.batchId,L),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(j,ee.changes),await __PRIVATE_fillWritePipeline(j.remoteStore)}catch(ee){const re=__PRIVATE_wrapInUserErrorIfRecoverable(ee,"Failed to persist write");L.reject(re)}}async function __PRIVATE_syncEngineApplyRemoteEvent($,m){const L=__PRIVATE_debugCast($);try{const j=await __PRIVATE_localStoreApplyRemoteEventToLocalCache(L.localStore,m);m.targetChanges.forEach((ee,re)=>{const le=L.Ca.get(re);le&&(__PRIVATE_hardAssert(ee.addedDocuments.size+ee.modifiedDocuments.size+ee.removedDocuments.size<=1),ee.addedDocuments.size>0?le.pa=!0:ee.modifiedDocuments.size>0?__PRIVATE_hardAssert(le.pa):ee.removedDocuments.size>0&&(__PRIVATE_hardAssert(le.pa),le.pa=!1))}),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(L,j,m)}catch(j){await __PRIVATE_ignoreIfPrimaryLeaseLoss(j)}}function __PRIVATE_syncEngineApplyOnlineStateChange($,m,L){const j=__PRIVATE_debugCast($);if(j.isPrimaryClient&&L===0||!j.isPrimaryClient&&L===1){const ee=[];j.wa.forEach((re,le)=>{const ve=le.view.G_(m);ve.snapshot&&ee.push(ve.snapshot)}),function(le,ve){const ye=__PRIVATE_debugCast(le);ye.onlineState=ve;let Ee=!1;ye.queries.forEach((Me,Ce)=>{for(const De of Ce.Q_)De.G_(ve)&&(Ee=!0)}),Ee&&__PRIVATE_raiseSnapshotsInSyncEvent(ye)}(j.eventManager,m),ee.length&&j.ya.u_(ee),j.onlineState=m,j.isPrimaryClient&&j.sharedClientState.setOnlineState(m)}}async function __PRIVATE_syncEngineRejectListen($,m,L){const j=__PRIVATE_debugCast($);j.sharedClientState.updateQueryState(m,"rejected",L);const ee=j.Ca.get(m),re=ee&&ee.key;if(re){let le=new SortedMap(DocumentKey.comparator);le=le.insert(re,MutableDocument.newNoDocument(re,SnapshotVersion.min()));const ve=__PRIVATE_documentKeySet().add(re),ye=new RemoteEvent(SnapshotVersion.min(),new Map,new SortedMap(__PRIVATE_primitiveComparator),le,ve);await __PRIVATE_syncEngineApplyRemoteEvent(j,ye),j.Da=j.Da.remove(re),j.Ca.delete(m),__PRIVATE_pumpEnqueuedLimboResolutions(j)}else await __PRIVATE_localStoreReleaseTarget(j.localStore,m,!1).then(()=>__PRIVATE_removeAndCleanupTarget(j,m,L)).catch(__PRIVATE_ignoreIfPrimaryLeaseLoss)}async function __PRIVATE_syncEngineApplySuccessfulWrite($,m){const L=__PRIVATE_debugCast($),j=m.batch.batchId;try{const ee=await __PRIVATE_localStoreAcknowledgeBatch(L.localStore,m);__PRIVATE_processUserCallback(L,j,null),__PRIVATE_triggerPendingWritesCallbacks(L,j),L.sharedClientState.updateMutationState(j,"acknowledged"),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(L,ee)}catch(ee){await __PRIVATE_ignoreIfPrimaryLeaseLoss(ee)}}async function __PRIVATE_syncEngineRejectFailedWrite($,m,L){const j=__PRIVATE_debugCast($);try{const ee=await function(le,ve){const ye=__PRIVATE_debugCast(le);return ye.persistence.runTransaction("Reject batch","readwrite-primary",Ee=>{let Me;return ye.mutationQueue.lookupMutationBatch(Ee,ve).next(Ce=>(__PRIVATE_hardAssert(Ce!==null),Me=Ce.keys(),ye.mutationQueue.removeMutationBatch(Ee,Ce))).next(()=>ye.mutationQueue.performConsistencyCheck(Ee)).next(()=>ye.documentOverlayCache.removeOverlaysForBatchId(Ee,Me,ve)).next(()=>ye.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(Ee,Me)).next(()=>ye.localDocuments.getDocuments(Ee,Me))})}(j.localStore,m);__PRIVATE_processUserCallback(j,m,L),__PRIVATE_triggerPendingWritesCallbacks(j,m),j.sharedClientState.updateMutationState(m,"rejected",L),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(j,ee)}catch(ee){await __PRIVATE_ignoreIfPrimaryLeaseLoss(ee)}}function __PRIVATE_triggerPendingWritesCallbacks($,m){($.Ma.get(m)||[]).forEach(L=>{L.resolve()}),$.Ma.delete(m)}function __PRIVATE_processUserCallback($,m,L){const j=__PRIVATE_debugCast($);let ee=j.Fa[j.currentUser.toKey()];if(ee){const re=ee.get(m);re&&(L?re.reject(L):re.resolve(),ee=ee.remove(m)),j.Fa[j.currentUser.toKey()]=ee}}function __PRIVATE_removeAndCleanupTarget($,m,L=null){$.sharedClientState.removeLocalQueryTarget(m);for(const j of $.Sa.get(m))$.wa.delete(j),L&&$.ya.La(j,L);$.Sa.delete(m),$.isPrimaryClient&&$.va.Vr(m).forEach(j=>{$.va.containsKey(j)||__PRIVATE_removeLimboTarget($,j)})}function __PRIVATE_removeLimboTarget($,m){$.ba.delete(m.path.canonicalString());const L=$.Da.get(m);L!==null&&(__PRIVATE_remoteStoreUnlisten($.remoteStore,L),$.Da=$.Da.remove(m),$.Ca.delete(L),__PRIVATE_pumpEnqueuedLimboResolutions($))}function __PRIVATE_updateTrackedLimbos($,m,L){for(const j of L)j instanceof __PRIVATE_AddedLimboDocument?($.va.addReference(j.key,m),__PRIVATE_trackLimboChange($,j)):j instanceof __PRIVATE_RemovedLimboDocument?(__PRIVATE_logDebug("SyncEngine","Document no longer in limbo: "+j.key),$.va.removeReference(j.key,m),$.va.containsKey(j.key)||__PRIVATE_removeLimboTarget($,j.key)):fail()}function __PRIVATE_trackLimboChange($,m){const L=m.key,j=L.path.canonicalString();$.Da.get(L)||$.ba.has(j)||(__PRIVATE_logDebug("SyncEngine","New document in limbo: "+L),$.ba.add(j),__PRIVATE_pumpEnqueuedLimboResolutions($))}function __PRIVATE_pumpEnqueuedLimboResolutions($){for(;$.ba.size>0&&$.Da.size<$.maxConcurrentLimboResolutions;){const m=$.ba.values().next().value;$.ba.delete(m);const L=new DocumentKey(ResourcePath.fromString(m)),j=$.xa.next();$.Ca.set(j,new LimboResolution(L)),$.Da=$.Da.insert(L,j),__PRIVATE_remoteStoreListen($.remoteStore,new TargetData(__PRIVATE_queryToTarget(__PRIVATE_newQueryForPath(L.path)),j,"TargetPurposeLimboResolution",__PRIVATE_ListenSequence._e))}}async function __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore($,m,L){const j=__PRIVATE_debugCast($),ee=[],re=[],le=[];j.wa.isEmpty()||(j.wa.forEach((ve,ye)=>{le.push(j.Na(ye,m,L).then(Ee=>{if((Ee||L)&&j.isPrimaryClient&&j.sharedClientState.updateQueryState(ye.targetId,Ee!=null&&Ee.fromCache?"not-current":"current"),Ee){ee.push(Ee);const Me=__PRIVATE_LocalViewChanges.Ki(ye.targetId,Ee);re.push(Me)}}))}),await Promise.all(le),j.ya.u_(ee),await async function(ye,Ee){const Me=__PRIVATE_debugCast(ye);try{await Me.persistence.runTransaction("notifyLocalViewChanges","readwrite",Ce=>PersistencePromise.forEach(Ee,De=>PersistencePromise.forEach(De.qi,Be=>Me.persistence.referenceDelegate.addReference(Ce,De.targetId,Be)).next(()=>PersistencePromise.forEach(De.Qi,Be=>Me.persistence.referenceDelegate.removeReference(Ce,De.targetId,Be)))))}catch(Ce){if(!__PRIVATE_isIndexedDbTransactionError(Ce))throw Ce;__PRIVATE_logDebug("LocalStore","Failed to update sequence numbers: "+Ce)}for(const Ce of Ee){const De=Ce.targetId;if(!Ce.fromCache){const Be=Me.ns.get(De),ke=Be.snapshotVersion,Fe=Be.withLastLimboFreeSnapshotVersion(ke);Me.ns=Me.ns.insert(De,Fe)}}}(j.localStore,re))}async function __PRIVATE_syncEngineHandleCredentialChange($,m){const L=__PRIVATE_debugCast($);if(!L.currentUser.isEqual(m)){__PRIVATE_logDebug("SyncEngine","User change. New user:",m.toKey());const j=await __PRIVATE_localStoreHandleUserChange(L.localStore,m);L.currentUser=m,function(re,le){re.Ma.forEach(ve=>{ve.forEach(ye=>{ye.reject(new FirestoreError(D.CANCELLED,le))})}),re.Ma.clear()}(L,"'waitForPendingWrites' promise is rejected due to a user change."),L.sharedClientState.handleUserChange(m,j.removedBatchIds,j.addedBatchIds),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(L,j.us)}}function __PRIVATE_syncEngineGetRemoteKeysForTarget($,m){const L=__PRIVATE_debugCast($),j=L.Ca.get(m);if(j&&j.pa)return __PRIVATE_documentKeySet().add(j.key);{let ee=__PRIVATE_documentKeySet();const re=L.Sa.get(m);if(!re)return ee;for(const le of re){const ve=L.wa.get(le);ee=ee.unionWith(ve.view.Ia)}return ee}}function __PRIVATE_ensureWatchCallbacks($){const m=__PRIVATE_debugCast($);return m.remoteStore.remoteSyncer.applyRemoteEvent=__PRIVATE_syncEngineApplyRemoteEvent.bind(null,m),m.remoteStore.remoteSyncer.getRemoteKeysForTarget=__PRIVATE_syncEngineGetRemoteKeysForTarget.bind(null,m),m.remoteStore.remoteSyncer.rejectListen=__PRIVATE_syncEngineRejectListen.bind(null,m),m.ya.u_=__PRIVATE_eventManagerOnWatchChange.bind(null,m.eventManager),m.ya.La=__PRIVATE_eventManagerOnWatchError.bind(null,m.eventManager),m}function __PRIVATE_syncEngineEnsureWriteCallbacks($){const m=__PRIVATE_debugCast($);return m.remoteStore.remoteSyncer.applySuccessfulWrite=__PRIVATE_syncEngineApplySuccessfulWrite.bind(null,m),m.remoteStore.remoteSyncer.rejectFailedWrite=__PRIVATE_syncEngineRejectFailedWrite.bind(null,m),m}class MemoryOfflineComponentProvider{constructor(){this.synchronizeTabs=!1}async initialize(m){this.serializer=__PRIVATE_newSerializer(m.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(m),this.persistence=this.createPersistence(m),await this.persistence.start(),this.localStore=this.createLocalStore(m),this.gcScheduler=this.createGarbageCollectionScheduler(m,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(m,this.localStore)}createGarbageCollectionScheduler(m,L){return null}createIndexBackfillerScheduler(m,L){return null}createLocalStore(m){return __PRIVATE_newLocalStore(this.persistence,new __PRIVATE_QueryEngine,m.initialUser,this.serializer)}createPersistence(m){return new __PRIVATE_MemoryPersistence(__PRIVATE_MemoryEagerDelegate.Hr,this.serializer)}createSharedClientState(m){return new __PRIVATE_MemorySharedClientState}async terminate(){var m,L;(m=this.gcScheduler)===null||m===void 0||m.stop(),(L=this.indexBackfillerScheduler)===null||L===void 0||L.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class OnlineComponentProvider{async initialize(m,L){this.localStore||(this.localStore=m.localStore,this.sharedClientState=m.sharedClientState,this.datastore=this.createDatastore(L),this.remoteStore=this.createRemoteStore(L),this.eventManager=this.createEventManager(L),this.syncEngine=this.createSyncEngine(L,!m.synchronizeTabs),this.sharedClientState.onlineStateHandler=j=>__PRIVATE_syncEngineApplyOnlineStateChange(this.syncEngine,j,1),this.remoteStore.remoteSyncer.handleCredentialChange=__PRIVATE_syncEngineHandleCredentialChange.bind(null,this.syncEngine),await __PRIVATE_remoteStoreApplyPrimaryState(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(m){return function(){return new __PRIVATE_EventManagerImpl}()}createDatastore(m){const L=__PRIVATE_newSerializer(m.databaseInfo.databaseId),j=function(re){return new __PRIVATE_WebChannelConnection(re)}(m.databaseInfo);return function(re,le,ve,ye){return new __PRIVATE_DatastoreImpl(re,le,ve,ye)}(m.authCredentials,m.appCheckCredentials,j,L)}createRemoteStore(m){return function(j,ee,re,le,ve){return new __PRIVATE_RemoteStoreImpl(j,ee,re,le,ve)}(this.localStore,this.datastore,m.asyncQueue,L=>__PRIVATE_syncEngineApplyOnlineStateChange(this.syncEngine,L,0),function(){return __PRIVATE_BrowserConnectivityMonitor.D()?new __PRIVATE_BrowserConnectivityMonitor:new __PRIVATE_NoopConnectivityMonitor}())}createSyncEngine(m,L){return function(ee,re,le,ve,ye,Ee,Me){const Ce=new __PRIVATE_SyncEngineImpl(ee,re,le,ve,ye,Ee);return Me&&(Ce.Oa=!0),Ce}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,m.initialUser,m.maxConcurrentLimboResolutions,L)}async terminate(){var m;await async function(j){const ee=__PRIVATE_debugCast(j);__PRIVATE_logDebug("RemoteStore","RemoteStore shutting down."),ee.v_.add(5),await __PRIVATE_disableNetworkInternal(ee),ee.M_.shutdown(),ee.x_.set("Unknown")}(this.remoteStore),(m=this.datastore)===null||m===void 0||m.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AsyncObserver{constructor(m){this.observer=m,this.muted=!1}next(m){this.observer.next&&this.qa(this.observer.next,m)}error(m){this.observer.error?this.qa(this.observer.error,m):__PRIVATE_logError("Uncaught Error in snapshot listener:",m.toString())}Qa(){this.muted=!0}qa(m,L){this.muted||setTimeout(()=>{this.muted||m(L)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FirestoreClient{constructor(m,L,j,ee){this.authCredentials=m,this.appCheckCredentials=L,this.asyncQueue=j,this.databaseInfo=ee,this.user=User.UNAUTHENTICATED,this.clientId=__PRIVATE_AutoId.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(j,async re=>{__PRIVATE_logDebug("FirestoreClient","Received user=",re.uid),await this.authCredentialListener(re),this.user=re}),this.appCheckCredentials.start(j,re=>(__PRIVATE_logDebug("FirestoreClient","Received new app check token=",re),this.appCheckCredentialListener(re,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(m){this.authCredentialListener=m}setAppCheckTokenChangeListener(m){this.appCheckCredentialListener=m}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new FirestoreError(D.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const m=new __PRIVATE_Deferred;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),m.resolve()}catch(L){const j=__PRIVATE_wrapInUserErrorIfRecoverable(L,"Failed to shutdown persistence");m.reject(j)}}),m.promise}}async function __PRIVATE_setOfflineComponentProvider($,m){$.asyncQueue.verifyOperationInProgress(),__PRIVATE_logDebug("FirestoreClient","Initializing OfflineComponentProvider");const L=$.configuration;await m.initialize(L);let j=L.initialUser;$.setCredentialChangeListener(async ee=>{j.isEqual(ee)||(await __PRIVATE_localStoreHandleUserChange(m.localStore,ee),j=ee)}),m.persistence.setDatabaseDeletedListener(()=>$.terminate()),$._offlineComponents=m}async function __PRIVATE_setOnlineComponentProvider($,m){$.asyncQueue.verifyOperationInProgress();const L=await __PRIVATE_ensureOfflineComponents($);__PRIVATE_logDebug("FirestoreClient","Initializing OnlineComponentProvider"),await m.initialize(L,$.configuration),$.setCredentialChangeListener(j=>__PRIVATE_remoteStoreHandleCredentialChange(m.remoteStore,j)),$.setAppCheckTokenChangeListener((j,ee)=>__PRIVATE_remoteStoreHandleCredentialChange(m.remoteStore,ee)),$._onlineComponents=m}function __PRIVATE_canFallbackFromIndexedDbError($){return $.name==="FirebaseError"?$.code===D.FAILED_PRECONDITION||$.code===D.UNIMPLEMENTED:!(typeof DOMException<"u"&&$ instanceof DOMException)||$.code===22||$.code===20||$.code===11}async function __PRIVATE_ensureOfflineComponents($){if(!$._offlineComponents)if($._uninitializedComponentsProvider){__PRIVATE_logDebug("FirestoreClient","Using user provided OfflineComponentProvider");try{await __PRIVATE_setOfflineComponentProvider($,$._uninitializedComponentsProvider._offline)}catch(m){const L=m;if(!__PRIVATE_canFallbackFromIndexedDbError(L))throw L;__PRIVATE_logWarn("Error using user provided cache. Falling back to memory cache: "+L),await __PRIVATE_setOfflineComponentProvider($,new MemoryOfflineComponentProvider)}}else __PRIVATE_logDebug("FirestoreClient","Using default OfflineComponentProvider"),await __PRIVATE_setOfflineComponentProvider($,new MemoryOfflineComponentProvider);return $._offlineComponents}async function __PRIVATE_ensureOnlineComponents($){return $._onlineComponents||($._uninitializedComponentsProvider?(__PRIVATE_logDebug("FirestoreClient","Using user provided OnlineComponentProvider"),await __PRIVATE_setOnlineComponentProvider($,$._uninitializedComponentsProvider._online)):(__PRIVATE_logDebug("FirestoreClient","Using default OnlineComponentProvider"),await __PRIVATE_setOnlineComponentProvider($,new OnlineComponentProvider))),$._onlineComponents}function __PRIVATE_getSyncEngine($){return __PRIVATE_ensureOnlineComponents($).then(m=>m.syncEngine)}async function __PRIVATE_getEventManager($){const m=await __PRIVATE_ensureOnlineComponents($),L=m.eventManager;return L.onListen=__PRIVATE_syncEngineListen.bind(null,m.syncEngine),L.onUnlisten=__PRIVATE_syncEngineUnlisten.bind(null,m.syncEngine),L.onFirstRemoteStoreListen=__PRIVATE_triggerRemoteStoreListen.bind(null,m.syncEngine),L.onLastRemoteStoreUnlisten=__PRIVATE_triggerRemoteStoreUnlisten.bind(null,m.syncEngine),L}function __PRIVATE_firestoreClientGetDocumentViaSnapshotListener($,m,L={}){const j=new __PRIVATE_Deferred;return $.asyncQueue.enqueueAndForget(async()=>function(re,le,ve,ye,Ee){const Me=new __PRIVATE_AsyncObserver({next:De=>{le.enqueueAndForget(()=>__PRIVATE_eventManagerUnlisten(re,Ce));const Be=De.docs.has(ve);!Be&&De.fromCache?Ee.reject(new FirestoreError(D.UNAVAILABLE,"Failed to get document because the client is offline.")):Be&&De.fromCache&&ye&&ye.source==="server"?Ee.reject(new FirestoreError(D.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):Ee.resolve(De)},error:De=>Ee.reject(De)}),Ce=new __PRIVATE_QueryListener(__PRIVATE_newQueryForPath(ve.path),Me,{includeMetadataChanges:!0,ta:!0});return __PRIVATE_eventManagerListen(re,Ce)}(await __PRIVATE_getEventManager($),$.asyncQueue,m,L,j)),j.promise}function __PRIVATE_firestoreClientGetDocumentsViaSnapshotListener($,m,L={}){const j=new __PRIVATE_Deferred;return $.asyncQueue.enqueueAndForget(async()=>function(re,le,ve,ye,Ee){const Me=new __PRIVATE_AsyncObserver({next:De=>{le.enqueueAndForget(()=>__PRIVATE_eventManagerUnlisten(re,Ce)),De.fromCache&&ye.source==="server"?Ee.reject(new FirestoreError(D.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):Ee.resolve(De)},error:De=>Ee.reject(De)}),Ce=new __PRIVATE_QueryListener(ve,Me,{includeMetadataChanges:!0,ta:!0});return __PRIVATE_eventManagerListen(re,Ce)}(await __PRIVATE_getEventManager($),$.asyncQueue,m,L,j)),j.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_cloneLongPollingOptions($){const m={};return $.timeoutSeconds!==void 0&&(m.timeoutSeconds=$.timeoutSeconds),m}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pe$1=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_validateNonEmptyArgument($,m,L){if(!L)throw new FirestoreError(D.INVALID_ARGUMENT,`Function ${$}() cannot be called with an empty ${m}.`)}function __PRIVATE_validateIsNotUsedTogether($,m,L,j){if(m===!0&&j===!0)throw new FirestoreError(D.INVALID_ARGUMENT,`${$} and ${L} cannot be used together.`)}function __PRIVATE_validateDocumentPath($){if(!DocumentKey.isDocumentKey($))throw new FirestoreError(D.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${$} has ${$.length}.`)}function __PRIVATE_validateCollectionPath($){if(DocumentKey.isDocumentKey($))throw new FirestoreError(D.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${$} has ${$.length}.`)}function __PRIVATE_valueDescription($){if($===void 0)return"undefined";if($===null)return"null";if(typeof $=="string")return $.length>20&&($=`${$.substring(0,20)}...`),JSON.stringify($);if(typeof $=="number"||typeof $=="boolean")return""+$;if(typeof $=="object"){if($ instanceof Array)return"an array";{const m=function(j){return j.constructor?j.constructor.name:null}($);return m?`a custom ${m} object`:"an object"}}return typeof $=="function"?"a function":fail()}function __PRIVATE_cast($,m){if("_delegate"in $&&($=$._delegate),!($ instanceof m)){if(m.name===$.constructor.name)throw new FirestoreError(D.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const L=__PRIVATE_valueDescription($);throw new FirestoreError(D.INVALID_ARGUMENT,`Expected type '${m.name}', but it was: ${L}`)}}return $}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FirestoreSettingsImpl{constructor(m){var L,j;if(m.host===void 0){if(m.ssl!==void 0)throw new FirestoreError(D.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=m.host,this.ssl=(L=m.ssl)===null||L===void 0||L;if(this.credentials=m.credentials,this.ignoreUndefinedProperties=!!m.ignoreUndefinedProperties,this.localCache=m.localCache,m.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(m.cacheSizeBytes!==-1&&m.cacheSizeBytes<1048576)throw new FirestoreError(D.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=m.cacheSizeBytes}__PRIVATE_validateIsNotUsedTogether("experimentalForceLongPolling",m.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",m.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!m.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:m.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!m.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=__PRIVATE_cloneLongPollingOptions((j=m.experimentalLongPollingOptions)!==null&&j!==void 0?j:{}),function(re){if(re.timeoutSeconds!==void 0){if(isNaN(re.timeoutSeconds))throw new FirestoreError(D.INVALID_ARGUMENT,`invalid long polling timeout: ${re.timeoutSeconds} (must not be NaN)`);if(re.timeoutSeconds<5)throw new FirestoreError(D.INVALID_ARGUMENT,`invalid long polling timeout: ${re.timeoutSeconds} (minimum allowed value is 5)`);if(re.timeoutSeconds>30)throw new FirestoreError(D.INVALID_ARGUMENT,`invalid long polling timeout: ${re.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!m.useFetchStreams}isEqual(m){return this.host===m.host&&this.ssl===m.ssl&&this.credentials===m.credentials&&this.cacheSizeBytes===m.cacheSizeBytes&&this.experimentalForceLongPolling===m.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===m.experimentalAutoDetectLongPolling&&function(j,ee){return j.timeoutSeconds===ee.timeoutSeconds}(this.experimentalLongPollingOptions,m.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===m.ignoreUndefinedProperties&&this.useFetchStreams===m.useFetchStreams}}class Firestore$1{constructor(m,L,j,ee){this._authCredentials=m,this._appCheckCredentials=L,this._databaseId=j,this._app=ee,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new FirestoreSettingsImpl({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new FirestoreError(D.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(m){if(this._settingsFrozen)throw new FirestoreError(D.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new FirestoreSettingsImpl(m),m.credentials!==void 0&&(this._authCredentials=function(j){if(!j)return new __PRIVATE_EmptyAuthCredentialsProvider;switch(j.type){case"firstParty":return new __PRIVATE_FirstPartyAuthCredentialsProvider(j.sessionIndex||"0",j.iamToken||null,j.authTokenFactory||null);case"provider":return j.client;default:throw new FirestoreError(D.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(m.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(L){const j=pe$1.get(L);j&&(__PRIVATE_logDebug("ComponentProvider","Removing Datastore"),pe$1.delete(L),j.terminate())}(this),Promise.resolve()}}function connectFirestoreEmulator($,m,L,j={}){var ee;const re=($=__PRIVATE_cast($,Firestore$1))._getSettings(),le=`${m}:${L}`;if(re.host!=="firestore.googleapis.com"&&re.host!==le&&__PRIVATE_logWarn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),$._setSettings(Object.assign(Object.assign({},re),{host:le,ssl:!1})),j.mockUserToken){let ve,ye;if(typeof j.mockUserToken=="string")ve=j.mockUserToken,ye=User.MOCK_USER;else{ve=createMockUserToken(j.mockUserToken,(ee=$._app)===null||ee===void 0?void 0:ee.options.projectId);const Ee=j.mockUserToken.sub||j.mockUserToken.user_id;if(!Ee)throw new FirestoreError(D.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");ye=new User(Ee)}$._authCredentials=new __PRIVATE_EmulatorAuthCredentialsProvider(new __PRIVATE_OAuthToken(ve,ye))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Query{constructor(m,L,j){this.converter=L,this._query=j,this.type="query",this.firestore=m}withConverter(m){return new Query(this.firestore,m,this._query)}}class DocumentReference{constructor(m,L,j){this.converter=L,this._key=j,this.type="document",this.firestore=m}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new CollectionReference(this.firestore,this.converter,this._key.path.popLast())}withConverter(m){return new DocumentReference(this.firestore,m,this._key)}}class CollectionReference extends Query{constructor(m,L,j){super(m,L,__PRIVATE_newQueryForPath(j)),this._path=j,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const m=this._path.popLast();return m.isEmpty()?null:new DocumentReference(this.firestore,null,new DocumentKey(m))}withConverter(m){return new CollectionReference(this.firestore,m,this._path)}}function collection($,m,...L){if($=getModularInstance($),__PRIVATE_validateNonEmptyArgument("collection","path",m),$ instanceof Firestore$1){const j=ResourcePath.fromString(m,...L);return __PRIVATE_validateCollectionPath(j),new CollectionReference($,null,j)}{if(!($ instanceof DocumentReference||$ instanceof CollectionReference))throw new FirestoreError(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const j=$._path.child(ResourcePath.fromString(m,...L));return __PRIVATE_validateCollectionPath(j),new CollectionReference($.firestore,null,j)}}function doc($,m,...L){if($=getModularInstance($),arguments.length===1&&(m=__PRIVATE_AutoId.newId()),__PRIVATE_validateNonEmptyArgument("doc","path",m),$ instanceof Firestore$1){const j=ResourcePath.fromString(m,...L);return __PRIVATE_validateDocumentPath(j),new DocumentReference($,null,new DocumentKey(j))}{if(!($ instanceof DocumentReference||$ instanceof CollectionReference))throw new FirestoreError(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const j=$._path.child(ResourcePath.fromString(m,...L));return __PRIVATE_validateDocumentPath(j),new DocumentReference($.firestore,$ instanceof CollectionReference?$.converter:null,new DocumentKey(j))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AsyncQueueImpl{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new __PRIVATE_ExponentialBackoff(this,"async_queue_retry"),this.cu=()=>{const L=getDocument();L&&__PRIVATE_logDebug("AsyncQueue","Visibility state changed to "+L.visibilityState),this.jo.Ko()};const m=getDocument();m&&typeof m.addEventListener=="function"&&m.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(m){this.enqueue(m)}enqueueAndForgetEvenWhileRestricted(m){this.lu(),this.hu(m)}enterRestrictedMode(m){if(!this.iu){this.iu=!0,this.au=m||!1;const L=getDocument();L&&typeof L.removeEventListener=="function"&&L.removeEventListener("visibilitychange",this.cu)}}enqueue(m){if(this.lu(),this.iu)return new Promise(()=>{});const L=new __PRIVATE_Deferred;return this.hu(()=>this.iu&&this.au?Promise.resolve():(m().then(L.resolve,L.reject),L.promise)).then(()=>L.promise)}enqueueRetryable(m){this.enqueueAndForget(()=>(this.ru.push(m),this.Pu()))}async Pu(){if(this.ru.length!==0){try{await this.ru[0](),this.ru.shift(),this.jo.reset()}catch(m){if(!__PRIVATE_isIndexedDbTransactionError(m))throw m;__PRIVATE_logDebug("AsyncQueue","Operation failed with retryable error: "+m)}this.ru.length>0&&this.jo.qo(()=>this.Pu())}}hu(m){const L=this.nu.then(()=>(this._u=!0,m().catch(j=>{this.ou=j,this._u=!1;const ee=function(le){let ve=le.message||"";return le.stack&&(ve=le.stack.includes(le.message)?le.stack:le.message+`
`+le.stack),ve}(j);throw __PRIVATE_logError("INTERNAL UNHANDLED ERROR: ",ee),j}).then(j=>(this._u=!1,j))));return this.nu=L,L}enqueueAfterDelay(m,L,j){this.lu(),this.uu.indexOf(m)>-1&&(L=0);const ee=DelayedOperation.createAndSchedule(this,m,L,j,re=>this.Iu(re));return this.su.push(ee),ee}lu(){this.ou&&fail()}verifyOperationInProgress(){}async Tu(){let m;do m=this.nu,await m;while(m!==this.nu)}Eu(m){for(const L of this.su)if(L.timerId===m)return!0;return!1}du(m){return this.Tu().then(()=>{this.su.sort((L,j)=>L.targetTimeMs-j.targetTimeMs);for(const L of this.su)if(L.skipDelay(),m!=="all"&&L.timerId===m)break;return this.Tu()})}Au(m){this.uu.push(m)}Iu(m){const L=this.su.indexOf(m);this.su.splice(L,1)}}class Firestore extends Firestore$1{constructor(m,L,j,ee){super(m,L,j,ee),this.type="firestore",this._queue=function(){return new __PRIVATE_AsyncQueueImpl}(),this._persistenceKey=(ee==null?void 0:ee.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||__PRIVATE_configureFirestore(this),this._firestoreClient.terminate()}}function getFirestore($,m){const L=typeof $=="object"?$:getApp(),j=typeof $=="string"?$:m||"(default)",ee=_getProvider(L,"firestore").getImmediate({identifier:j});if(!ee._initialized){const re=getDefaultEmulatorHostnameAndPort("firestore");re&&connectFirestoreEmulator(ee,...re)}return ee}function ensureFirestoreConfigured($){return $._firestoreClient||__PRIVATE_configureFirestore($),$._firestoreClient.verifyNotTerminated(),$._firestoreClient}function __PRIVATE_configureFirestore($){var m,L,j;const ee=$._freezeSettings(),re=function(ve,ye,Ee,Me){return new DatabaseInfo(ve,ye,Ee,Me.host,Me.ssl,Me.experimentalForceLongPolling,Me.experimentalAutoDetectLongPolling,__PRIVATE_cloneLongPollingOptions(Me.experimentalLongPollingOptions),Me.useFetchStreams)}($._databaseId,((m=$._app)===null||m===void 0?void 0:m.options.appId)||"",$._persistenceKey,ee);$._firestoreClient=new FirestoreClient($._authCredentials,$._appCheckCredentials,$._queue,re),!((L=ee.localCache)===null||L===void 0)&&L._offlineComponentProvider&&(!((j=ee.localCache)===null||j===void 0)&&j._onlineComponentProvider)&&($._firestoreClient._uninitializedComponentsProvider={_offlineKind:ee.localCache.kind,_offline:ee.localCache._offlineComponentProvider,_online:ee.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bytes{constructor(m){this._byteString=m}static fromBase64String(m){try{return new Bytes(ByteString.fromBase64String(m))}catch(L){throw new FirestoreError(D.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+L)}}static fromUint8Array(m){return new Bytes(ByteString.fromUint8Array(m))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(m){return this._byteString.isEqual(m._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldPath{constructor(...m){for(let L=0;L<m.length;++L)if(m[L].length===0)throw new FirestoreError(D.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new FieldPath$1(m)}isEqual(m){return this._internalPath.isEqual(m._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldValue{constructor(m){this._methodName=m}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GeoPoint{constructor(m,L){if(!isFinite(m)||m<-90||m>90)throw new FirestoreError(D.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+m);if(!isFinite(L)||L<-180||L>180)throw new FirestoreError(D.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+L);this._lat=m,this._long=L}get latitude(){return this._lat}get longitude(){return this._long}isEqual(m){return this._lat===m._lat&&this._long===m._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(m){return __PRIVATE_primitiveComparator(this._lat,m._lat)||__PRIVATE_primitiveComparator(this._long,m._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const we=/^__.*__$/;class ParsedSetData{constructor(m,L,j){this.data=m,this.fieldMask=L,this.fieldTransforms=j}toMutation(m,L){return this.fieldMask!==null?new __PRIVATE_PatchMutation(m,this.data,this.fieldMask,L,this.fieldTransforms):new __PRIVATE_SetMutation(m,this.data,L,this.fieldTransforms)}}function __PRIVATE_isWrite($){switch($){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fail()}}class __PRIVATE_ParseContextImpl{constructor(m,L,j,ee,re,le){this.settings=m,this.databaseId=L,this.serializer=j,this.ignoreUndefinedProperties=ee,re===void 0&&this.Ru(),this.fieldTransforms=re||[],this.fieldMask=le||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(m){return new __PRIVATE_ParseContextImpl(Object.assign(Object.assign({},this.settings),m),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(m){var L;const j=(L=this.path)===null||L===void 0?void 0:L.child(m),ee=this.mu({path:j,gu:!1});return ee.pu(m),ee}yu(m){var L;const j=(L=this.path)===null||L===void 0?void 0:L.child(m),ee=this.mu({path:j,gu:!1});return ee.Ru(),ee}wu(m){return this.mu({path:void 0,gu:!0})}Su(m){return __PRIVATE_createError(m,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(m){return this.fieldMask.find(L=>m.isPrefixOf(L))!==void 0||this.fieldTransforms.find(L=>m.isPrefixOf(L.field))!==void 0}Ru(){if(this.path)for(let m=0;m<this.path.length;m++)this.pu(this.path.get(m))}pu(m){if(m.length===0)throw this.Su("Document fields must not be empty");if(__PRIVATE_isWrite(this.Vu)&&we.test(m))throw this.Su('Document fields cannot begin and end with "__"')}}class __PRIVATE_UserDataReader{constructor(m,L,j){this.databaseId=m,this.ignoreUndefinedProperties=L,this.serializer=j||__PRIVATE_newSerializer(m)}Cu(m,L,j,ee=!1){return new __PRIVATE_ParseContextImpl({Vu:m,methodName:L,Du:j,path:FieldPath$1.emptyPath(),gu:!1,bu:ee},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function __PRIVATE_newUserDataReader($){const m=$._freezeSettings(),L=__PRIVATE_newSerializer($._databaseId);return new __PRIVATE_UserDataReader($._databaseId,!!m.ignoreUndefinedProperties,L)}function __PRIVATE_parseSetData($,m,L,j,ee,re={}){const le=$.Cu(re.merge||re.mergeFields?2:0,m,L,ee);__PRIVATE_validatePlainObject("Data must be an object, but it was:",le,j);const ve=__PRIVATE_parseObject(j,le);let ye,Ee;if(re.merge)ye=new FieldMask(le.fieldMask),Ee=le.fieldTransforms;else if(re.mergeFields){const Me=[];for(const Ce of re.mergeFields){const De=__PRIVATE_fieldPathFromArgument$1(m,Ce,L);if(!le.contains(De))throw new FirestoreError(D.INVALID_ARGUMENT,`Field '${De}' is specified in your field mask but missing from your input data.`);__PRIVATE_fieldMaskContains(Me,De)||Me.push(De)}ye=new FieldMask(Me),Ee=le.fieldTransforms.filter(Ce=>ye.covers(Ce.field))}else ye=null,Ee=le.fieldTransforms;return new ParsedSetData(new ObjectValue(ve),ye,Ee)}function __PRIVATE_parseQueryValue($,m,L,j=!1){return __PRIVATE_parseData(L,$.Cu(j?4:3,m))}function __PRIVATE_parseData($,m){if(__PRIVATE_looksLikeJsonObject($=getModularInstance($)))return __PRIVATE_validatePlainObject("Unsupported field value:",m,$),__PRIVATE_parseObject($,m);if($ instanceof FieldValue)return function(j,ee){if(!__PRIVATE_isWrite(ee.Vu))throw ee.Su(`${j._methodName}() can only be used with update() and set()`);if(!ee.path)throw ee.Su(`${j._methodName}() is not currently supported inside arrays`);const re=j._toFieldTransform(ee);re&&ee.fieldTransforms.push(re)}($,m),null;if($===void 0&&m.ignoreUndefinedProperties)return null;if(m.path&&m.fieldMask.push(m.path),$ instanceof Array){if(m.settings.gu&&m.Vu!==4)throw m.Su("Nested arrays are not supported");return function(j,ee){const re=[];let le=0;for(const ve of j){let ye=__PRIVATE_parseData(ve,ee.wu(le));ye==null&&(ye={nullValue:"NULL_VALUE"}),re.push(ye),le++}return{arrayValue:{values:re}}}($,m)}return function(j,ee){if((j=getModularInstance(j))===null)return{nullValue:"NULL_VALUE"};if(typeof j=="number")return toNumber(ee.serializer,j);if(typeof j=="boolean")return{booleanValue:j};if(typeof j=="string")return{stringValue:j};if(j instanceof Date){const re=Timestamp.fromDate(j);return{timestampValue:toTimestamp(ee.serializer,re)}}if(j instanceof Timestamp){const re=new Timestamp(j.seconds,1e3*Math.floor(j.nanoseconds/1e3));return{timestampValue:toTimestamp(ee.serializer,re)}}if(j instanceof GeoPoint)return{geoPointValue:{latitude:j.latitude,longitude:j.longitude}};if(j instanceof Bytes)return{bytesValue:__PRIVATE_toBytes(ee.serializer,j._byteString)};if(j instanceof DocumentReference){const re=ee.databaseId,le=j.firestore._databaseId;if(!le.isEqual(re))throw ee.Su(`Document reference is for database ${le.projectId}/${le.database} but should be for database ${re.projectId}/${re.database}`);return{referenceValue:__PRIVATE_toResourceName(j.firestore._databaseId||ee.databaseId,j._key.path)}}throw ee.Su(`Unsupported field value: ${__PRIVATE_valueDescription(j)}`)}($,m)}function __PRIVATE_parseObject($,m){const L={};return isEmpty$1($)?m.path&&m.path.length>0&&m.fieldMask.push(m.path):forEach($,(j,ee)=>{const re=__PRIVATE_parseData(ee,m.fu(j));re!=null&&(L[j]=re)}),{mapValue:{fields:L}}}function __PRIVATE_looksLikeJsonObject($){return!(typeof $!="object"||$===null||$ instanceof Array||$ instanceof Date||$ instanceof Timestamp||$ instanceof GeoPoint||$ instanceof Bytes||$ instanceof DocumentReference||$ instanceof FieldValue)}function __PRIVATE_validatePlainObject($,m,L){if(!__PRIVATE_looksLikeJsonObject(L)||!function(ee){return typeof ee=="object"&&ee!==null&&(Object.getPrototypeOf(ee)===Object.prototype||Object.getPrototypeOf(ee)===null)}(L)){const j=__PRIVATE_valueDescription(L);throw j==="an object"?m.Su($+" a custom object"):m.Su($+" "+j)}}function __PRIVATE_fieldPathFromArgument$1($,m,L){if((m=getModularInstance(m))instanceof FieldPath)return m._internalPath;if(typeof m=="string")return __PRIVATE_fieldPathFromDotSeparatedString($,m);throw __PRIVATE_createError("Field path arguments must be of type string or ",$,!1,void 0,L)}const Se=new RegExp("[~\\*/\\[\\]]");function __PRIVATE_fieldPathFromDotSeparatedString($,m,L){if(m.search(Se)>=0)throw __PRIVATE_createError(`Invalid field path (${m}). Paths must not contain '~', '*', '/', '[', or ']'`,$,!1,void 0,L);try{return new FieldPath(...m.split("."))._internalPath}catch{throw __PRIVATE_createError(`Invalid field path (${m}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,$,!1,void 0,L)}}function __PRIVATE_createError($,m,L,j,ee){const re=j&&!j.isEmpty(),le=ee!==void 0;let ve=`Function ${m}() called with invalid data`;L&&(ve+=" (via `toFirestore()`)"),ve+=". ";let ye="";return(re||le)&&(ye+=" (found",re&&(ye+=` in field ${j}`),le&&(ye+=` in document ${ee}`),ye+=")"),new FirestoreError(D.INVALID_ARGUMENT,ve+$+ye)}function __PRIVATE_fieldMaskContains($,m){return $.some(L=>L.isEqual(m))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentSnapshot$1{constructor(m,L,j,ee,re){this._firestore=m,this._userDataWriter=L,this._key=j,this._document=ee,this._converter=re}get id(){return this._key.path.lastSegment()}get ref(){return new DocumentReference(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const m=new QueryDocumentSnapshot$1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(m)}return this._userDataWriter.convertValue(this._document.data.value)}}get(m){if(this._document){const L=this._document.data.field(__PRIVATE_fieldPathFromArgument("DocumentSnapshot.get",m));if(L!==null)return this._userDataWriter.convertValue(L)}}}class QueryDocumentSnapshot$1 extends DocumentSnapshot$1{data(){return super.data()}}function __PRIVATE_fieldPathFromArgument($,m){return typeof m=="string"?__PRIVATE_fieldPathFromDotSeparatedString($,m):m instanceof FieldPath?m._internalPath:m._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_validateHasExplicitOrderByForLimitToLast($){if($.limitType==="L"&&$.explicitOrderBy.length===0)throw new FirestoreError(D.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class AppliableConstraint{}class QueryConstraint extends AppliableConstraint{}function query($,m,...L){let j=[];m instanceof AppliableConstraint&&j.push(m),j=j.concat(L),function(re){const le=re.filter(ye=>ye instanceof QueryCompositeFilterConstraint).length,ve=re.filter(ye=>ye instanceof QueryFieldFilterConstraint).length;if(le>1||le>0&&ve>0)throw new FirestoreError(D.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(j);for(const ee of j)$=ee._apply($);return $}class QueryFieldFilterConstraint extends QueryConstraint{constructor(m,L,j){super(),this._field=m,this._op=L,this._value=j,this.type="where"}static _create(m,L,j){return new QueryFieldFilterConstraint(m,L,j)}_apply(m){const L=this._parse(m);return __PRIVATE_validateNewFieldFilter(m._query,L),new Query(m.firestore,m.converter,__PRIVATE_queryWithAddedFilter(m._query,L))}_parse(m){const L=__PRIVATE_newUserDataReader(m.firestore);return function(re,le,ve,ye,Ee,Me,Ce){let De;if(Ee.isKeyField()){if(Me==="array-contains"||Me==="array-contains-any")throw new FirestoreError(D.INVALID_ARGUMENT,`Invalid Query. You can't perform '${Me}' queries on documentId().`);if(Me==="in"||Me==="not-in"){__PRIVATE_validateDisjunctiveFilterElements(Ce,Me);const Be=[];for(const ke of Ce)Be.push(__PRIVATE_parseDocumentIdValue(ye,re,ke));De={arrayValue:{values:Be}}}else De=__PRIVATE_parseDocumentIdValue(ye,re,Ce)}else Me!=="in"&&Me!=="not-in"&&Me!=="array-contains-any"||__PRIVATE_validateDisjunctiveFilterElements(Ce,Me),De=__PRIVATE_parseQueryValue(ve,le,Ce,Me==="in"||Me==="not-in");return FieldFilter.create(Ee,Me,De)}(m._query,"where",L,m.firestore._databaseId,this._field,this._op,this._value)}}class QueryCompositeFilterConstraint extends AppliableConstraint{constructor(m,L){super(),this.type=m,this._queryConstraints=L}static _create(m,L){return new QueryCompositeFilterConstraint(m,L)}_parse(m){const L=this._queryConstraints.map(j=>j._parse(m)).filter(j=>j.getFilters().length>0);return L.length===1?L[0]:CompositeFilter.create(L,this._getOperator())}_apply(m){const L=this._parse(m);return L.getFilters().length===0?m:(function(ee,re){let le=ee;const ve=re.getFlattenedFilters();for(const ye of ve)__PRIVATE_validateNewFieldFilter(le,ye),le=__PRIVATE_queryWithAddedFilter(le,ye)}(m._query,L),new Query(m.firestore,m.converter,__PRIVATE_queryWithAddedFilter(m._query,L)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class QueryOrderByConstraint extends QueryConstraint{constructor(m,L){super(),this._field=m,this._direction=L,this.type="orderBy"}static _create(m,L){return new QueryOrderByConstraint(m,L)}_apply(m){const L=function(ee,re,le){if(ee.startAt!==null)throw new FirestoreError(D.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(ee.endAt!==null)throw new FirestoreError(D.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new OrderBy(re,le)}(m._query,this._field,this._direction);return new Query(m.firestore,m.converter,function(ee,re){const le=ee.explicitOrderBy.concat([re]);return new __PRIVATE_QueryImpl(ee.path,ee.collectionGroup,le,ee.filters.slice(),ee.limit,ee.limitType,ee.startAt,ee.endAt)}(m._query,L))}}function orderBy($,m="asc"){const L=m,j=__PRIVATE_fieldPathFromArgument("orderBy",$);return QueryOrderByConstraint._create(j,L)}function __PRIVATE_parseDocumentIdValue($,m,L){if(typeof(L=getModularInstance(L))=="string"){if(L==="")throw new FirestoreError(D.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!__PRIVATE_isCollectionGroupQuery(m)&&L.indexOf("/")!==-1)throw new FirestoreError(D.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${L}' contains a '/' character.`);const j=m.path.child(ResourcePath.fromString(L));if(!DocumentKey.isDocumentKey(j))throw new FirestoreError(D.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${j}' is not because it has an odd number of segments (${j.length}).`);return __PRIVATE_refValue($,new DocumentKey(j))}if(L instanceof DocumentReference)return __PRIVATE_refValue($,L._key);throw new FirestoreError(D.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${__PRIVATE_valueDescription(L)}.`)}function __PRIVATE_validateDisjunctiveFilterElements($,m){if(!Array.isArray($)||$.length===0)throw new FirestoreError(D.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${m.toString()}' filters.`)}function __PRIVATE_validateNewFieldFilter($,m){const L=function(ee,re){for(const le of ee)for(const ve of le.getFlattenedFilters())if(re.indexOf(ve.op)>=0)return ve.op;return null}($.filters,function(ee){switch(ee){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(m.op));if(L!==null)throw L===m.op?new FirestoreError(D.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${m.op.toString()}' filter.`):new FirestoreError(D.INVALID_ARGUMENT,`Invalid query. You cannot use '${m.op.toString()}' filters with '${L.toString()}' filters.`)}class AbstractUserDataWriter{convertValue(m,L="none"){switch(__PRIVATE_typeOrder(m)){case 0:return null;case 1:return m.booleanValue;case 2:return __PRIVATE_normalizeNumber(m.integerValue||m.doubleValue);case 3:return this.convertTimestamp(m.timestampValue);case 4:return this.convertServerTimestamp(m,L);case 5:return m.stringValue;case 6:return this.convertBytes(__PRIVATE_normalizeByteString(m.bytesValue));case 7:return this.convertReference(m.referenceValue);case 8:return this.convertGeoPoint(m.geoPointValue);case 9:return this.convertArray(m.arrayValue,L);case 10:return this.convertObject(m.mapValue,L);default:throw fail()}}convertObject(m,L){return this.convertObjectMap(m.fields,L)}convertObjectMap(m,L="none"){const j={};return forEach(m,(ee,re)=>{j[ee]=this.convertValue(re,L)}),j}convertGeoPoint(m){return new GeoPoint(__PRIVATE_normalizeNumber(m.latitude),__PRIVATE_normalizeNumber(m.longitude))}convertArray(m,L){return(m.values||[]).map(j=>this.convertValue(j,L))}convertServerTimestamp(m,L){switch(L){case"previous":const j=__PRIVATE_getPreviousValue(m);return j==null?null:this.convertValue(j,L);case"estimate":return this.convertTimestamp(__PRIVATE_getLocalWriteTime(m));default:return null}}convertTimestamp(m){const L=__PRIVATE_normalizeTimestamp(m);return new Timestamp(L.seconds,L.nanos)}convertDocumentKey(m,L){const j=ResourcePath.fromString(m);__PRIVATE_hardAssert(__PRIVATE_isValidResourceName(j));const ee=new DatabaseId(j.get(1),j.get(3)),re=new DocumentKey(j.popFirst(5));return ee.isEqual(L)||__PRIVATE_logError(`Document ${re} contains a document reference within a different database (${ee.projectId}/${ee.database}) which is not supported. It will be treated as a reference in the current database (${L.projectId}/${L.database}) instead.`),re}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_applyFirestoreDataConverter($,m,L){let j;return j=$?L&&(L.merge||L.mergeFields)?$.toFirestore(m,L):$.toFirestore(m):m,j}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SnapshotMetadata{constructor(m,L){this.hasPendingWrites=m,this.fromCache=L}isEqual(m){return this.hasPendingWrites===m.hasPendingWrites&&this.fromCache===m.fromCache}}class DocumentSnapshot extends DocumentSnapshot$1{constructor(m,L,j,ee,re,le){super(m,L,j,ee,le),this._firestore=m,this._firestoreImpl=m,this.metadata=re}exists(){return super.exists()}data(m={}){if(this._document){if(this._converter){const L=new QueryDocumentSnapshot(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(L,m)}return this._userDataWriter.convertValue(this._document.data.value,m.serverTimestamps)}}get(m,L={}){if(this._document){const j=this._document.data.field(__PRIVATE_fieldPathFromArgument("DocumentSnapshot.get",m));if(j!==null)return this._userDataWriter.convertValue(j,L.serverTimestamps)}}}class QueryDocumentSnapshot extends DocumentSnapshot{data(m={}){return super.data(m)}}class QuerySnapshot{constructor(m,L,j,ee){this._firestore=m,this._userDataWriter=L,this._snapshot=ee,this.metadata=new SnapshotMetadata(ee.hasPendingWrites,ee.fromCache),this.query=j}get docs(){const m=[];return this.forEach(L=>m.push(L)),m}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(m,L){this._snapshot.docs.forEach(j=>{m.call(L,new QueryDocumentSnapshot(this._firestore,this._userDataWriter,j.key,j,new SnapshotMetadata(this._snapshot.mutatedKeys.has(j.key),this._snapshot.fromCache),this.query.converter))})}docChanges(m={}){const L=!!m.includeMetadataChanges;if(L&&this._snapshot.excludesMetadataChanges)throw new FirestoreError(D.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===L||(this._cachedChanges=function(ee,re){if(ee._snapshot.oldDocs.isEmpty()){let le=0;return ee._snapshot.docChanges.map(ve=>{const ye=new QueryDocumentSnapshot(ee._firestore,ee._userDataWriter,ve.doc.key,ve.doc,new SnapshotMetadata(ee._snapshot.mutatedKeys.has(ve.doc.key),ee._snapshot.fromCache),ee.query.converter);return ve.doc,{type:"added",doc:ye,oldIndex:-1,newIndex:le++}})}{let le=ee._snapshot.oldDocs;return ee._snapshot.docChanges.filter(ve=>re||ve.type!==3).map(ve=>{const ye=new QueryDocumentSnapshot(ee._firestore,ee._userDataWriter,ve.doc.key,ve.doc,new SnapshotMetadata(ee._snapshot.mutatedKeys.has(ve.doc.key),ee._snapshot.fromCache),ee.query.converter);let Ee=-1,Me=-1;return ve.type!==0&&(Ee=le.indexOf(ve.doc.key),le=le.delete(ve.doc.key)),ve.type!==1&&(le=le.add(ve.doc),Me=le.indexOf(ve.doc.key)),{type:__PRIVATE_resultChangeType(ve.type),doc:ye,oldIndex:Ee,newIndex:Me}})}}(this,L),this._cachedChangesIncludeMetadataChanges=L),this._cachedChanges}}function __PRIVATE_resultChangeType($){switch($){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fail()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getDoc($){$=__PRIVATE_cast($,DocumentReference);const m=__PRIVATE_cast($.firestore,Firestore);return __PRIVATE_firestoreClientGetDocumentViaSnapshotListener(ensureFirestoreConfigured(m),$._key).then(L=>__PRIVATE_convertToDocSnapshot(m,$,L))}class __PRIVATE_ExpUserDataWriter extends AbstractUserDataWriter{constructor(m){super(),this.firestore=m}convertBytes(m){return new Bytes(m)}convertReference(m){const L=this.convertDocumentKey(m,this.firestore._databaseId);return new DocumentReference(this.firestore,null,L)}}function getDocs($){$=__PRIVATE_cast($,Query);const m=__PRIVATE_cast($.firestore,Firestore),L=ensureFirestoreConfigured(m),j=new __PRIVATE_ExpUserDataWriter(m);return __PRIVATE_validateHasExplicitOrderByForLimitToLast($._query),__PRIVATE_firestoreClientGetDocumentsViaSnapshotListener(L,$._query).then(ee=>new QuerySnapshot(m,j,$,ee))}function setDoc($,m,L){$=__PRIVATE_cast($,DocumentReference);const j=__PRIVATE_cast($.firestore,Firestore),ee=__PRIVATE_applyFirestoreDataConverter($.converter,m,L);return executeWrite(j,[__PRIVATE_parseSetData(__PRIVATE_newUserDataReader(j),"setDoc",$._key,ee,$.converter!==null,L).toMutation($._key,Precondition.none())])}function deleteDoc($){return executeWrite(__PRIVATE_cast($.firestore,Firestore),[new __PRIVATE_DeleteMutation($._key,Precondition.none())])}function executeWrite($,m){return function(j,ee){const re=new __PRIVATE_Deferred;return j.asyncQueue.enqueueAndForget(async()=>__PRIVATE_syncEngineWrite(await __PRIVATE_getSyncEngine(j),ee,re)),re.promise}(ensureFirestoreConfigured($),m)}function __PRIVATE_convertToDocSnapshot($,m,L){const j=L.docs.get(m._key),ee=new __PRIVATE_ExpUserDataWriter($);return new DocumentSnapshot($,ee,m._key,j,new SnapshotMetadata(L.hasPendingWrites,L.fromCache),m.converter)}(function(m,L=!0){(function(ee){S=ee})(SDK_VERSION),_registerComponent(new Component("firestore",(j,{instanceIdentifier:ee,options:re})=>{const le=j.getProvider("app").getImmediate(),ve=new Firestore(new __PRIVATE_FirebaseAuthCredentialsProvider(j.getProvider("auth-internal")),new __PRIVATE_FirebaseAppCheckTokenProvider(j.getProvider("app-check-internal")),function(Ee,Me){if(!Object.prototype.hasOwnProperty.apply(Ee.options,["projectId"]))throw new FirestoreError(D.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new DatabaseId(Ee.options.projectId,Me)}(le,ee),le);return re=Object.assign({useFetchStreams:L},re),ve._setSettings(re),ve},"PUBLIC").setMultipleInstances(!0)),registerVersion(w,"4.6.0",m),registerVersion(w,"4.6.0","esm2017")})();var signals={exports:{}};(function($){/** @license
 * JS Signals <http://millermedeiros.github.com/js-signals/>
 * Released under the MIT license
 * Author: Miller Medeiros
 * Version: 1.0.0 - Build: 268 (2012/11/29 05:48 PM)
 */(function(m){function L(le,ve,ye,Ee,Me){this._listener=ve,this._isOnce=ye,this.context=Ee,this._signal=le,this._priority=Me||0}L.prototype={active:!0,params:null,execute:function(le){var ve,ye;return this.active&&this._listener&&(ye=this.params?this.params.concat(le):le,ve=this._listener.apply(this.context,ye),this._isOnce&&this.detach()),ve},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}};function j(le,ve){if(typeof le!="function")throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",ve))}function ee(){this._bindings=[],this._prevParams=null;var le=this;this.dispatch=function(){ee.prototype.dispatch.apply(le,arguments)}}ee.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(le,ve,ye,Ee){var Me=this._indexOfListener(le,ye),Ce;if(Me!==-1){if(Ce=this._bindings[Me],Ce.isOnce()!==ve)throw new Error("You cannot add"+(ve?"":"Once")+"() then add"+(ve?"Once":"")+"() the same listener without removing the relationship first.")}else Ce=new L(this,le,ve,ye,Ee),this._addBinding(Ce);return this.memorize&&this._prevParams&&Ce.execute(this._prevParams),Ce},_addBinding:function(le){var ve=this._bindings.length;do--ve;while(this._bindings[ve]&&le._priority<=this._bindings[ve]._priority);this._bindings.splice(ve+1,0,le)},_indexOfListener:function(le,ve){for(var ye=this._bindings.length,Ee;ye--;)if(Ee=this._bindings[ye],Ee._listener===le&&Ee.context===ve)return ye;return-1},has:function(le,ve){return this._indexOfListener(le,ve)!==-1},add:function(le,ve,ye){return j(le,"add"),this._registerListener(le,!1,ve,ye)},addOnce:function(le,ve,ye){return j(le,"addOnce"),this._registerListener(le,!0,ve,ye)},remove:function(le,ve){j(le,"remove");var ye=this._indexOfListener(le,ve);return ye!==-1&&(this._bindings[ye]._destroy(),this._bindings.splice(ye,1)),le},removeAll:function(){for(var le=this._bindings.length;le--;)this._bindings[le]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(le){if(this.active){var ve=Array.prototype.slice.call(arguments),ye=this._bindings.length,Ee;if(this.memorize&&(this._prevParams=ve),!!ye){Ee=this._bindings.slice(),this._shouldPropagate=!0;do ye--;while(Ee[ye]&&this._shouldPropagate&&Ee[ye].execute(ve)!==!1)}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};var re=ee;re.Signal=ee,$.exports?$.exports=re:m.signals=re})(commonjsGlobal$1)})(signals);var signalsExports=signals.exports;const Signal=getDefaultExportFromCjs(signalsExports),FIREBASE_CONFIG={apiKey:"AIzaSyBjIFQ2hB97v6UFADJXK6vgErwoSJnQmVs",authDomain:"config-versioning.firebaseapp.com",projectId:"config-versioning",storageBucket:"config-versioning.appspot.com",messagingSenderId:"561418707082",appId:"1:561418707082:web:974f04106bafd650594d73"},CONFIGS_SETTINGS={"proto-config-versioning":{file:"./proto/config-versioning/assets/config.js"},"proto-transmission-material":{file:"./proto/transmission-material/assets/config.js"},home:{file:"./assets/configs/home.js"},about:{file:"./assets/configs/about.js"},contact:{file:"./assets/configs/contact.js"}},GITHUB_SETTINGS={accessToken:"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",repoPath:"immersive-garden/immersive-garden-2023",workflowName:"update_config"},UPDATE_SCRIPT_PATH="./tools/config-versioning/server/update.js",CONFIGS_COLLECTION="hatom",VERSIONS_COLLECTION="versions",DEFAULT_VERSION="default",TMP_VERSION="__tmp",ERROR_INVALID_CONFIG_NAME="invalid_configName",ERROR_INVALID_NAME="invalid_name",ERROR_EMPTY_DOC="empty_doc",ERROR_NAME_ALREADY_USED="name_already_used",ERROR_FAILED_TO_DELETE="failed_to_delete";class ConfigVersioningError extends Error{constructor(L,j=null,ee=null,re=null){super(`{ code: '${L}'${j?`, arg: '${j}'`:""} }${ee?` ${ee}`:""}`,re);Rn(this,"name","ConfigVersioningError");Rn(this,"code");this.code=L}}const isPlainObject=$=>$.constructor===Object&&Object.getPrototypeOf($)===Object.prototype;function applyConfigRecursive($,m,L=null){if(Array.isArray($))return $.forEach((j,ee)=>{$[ee]=applyConfigRecursive($[ee],m&&m[ee],L&&L[ee])}),$;if($!=null&&typeof $=="object"){if(!isPlainObject($))return null;$&&$.resource&&typeof $.resource=="object"&&($.resource.rawData=null,delete $.resource.data,delete $.resource.file);for(const j in $)$[j]=applyConfigRecursive($[j],m&&m[j],L&&L[j]);return $}else return m??L??$}function parseConfigRecursive($,m=!1,L=null){if($===null)return console.warn('"null" object encountered when parsing the config'),$;if(Array.isArray($))return $.forEach((j,ee)=>{$[ee]=parseConfigRecursive($[ee],m,L)}),$;if(typeof $=="object"){if($.resource&&typeof $.resource=="object"){if(L){const{name:j,path:ee,rawData:re}=$.resource,le=L.find(ve=>ve.name===j);le?le.rawData=re:L.push({name:j,path:ee,rawData:re})}delete $.resource.data,delete $.resource.file,m?delete $.resource.path:delete $.resource.rawData}else for(const j in $)$[j]=parseConfigRecursive($[j],m,L);return $}else return $}function cleanConfig($,m=!1){let L=$;return L=JSON.parse(JSON.stringify(L),function(j,ee){return typeof ee=="number"?Number(ee.toFixed(12)):ee}),L=parseConfigRecursive(L,m),L}function getConfigOutput($,m=!1){const L=cleanConfig($,m);let j=JSON.stringify(L,null,"	");return j=`export default ${j}`,j}const log$2=console.log.bind(console,"%c - ConfigVersioning - ","background-color: lightgreen; color: black"),ACTIONS={new:"New",save:"Save",delete:"Delete",share:"Share",publish:"Publish"},DEV_ACTIONS={copyUpdate:"Copy update cmd"},pr=class pr{constructor(){Rn(this,"CONFIG_LOADED");Rn(this,"_initialised");Rn(this,"_db");Rn(this,"_configName");Rn(this,"_config");Rn(this,"_configOriginal");Rn(this,"_panelFolder");Rn(this,"_versions");Rn(this,"_currentVersion");Rn(this,"_versionListBlade");Rn(this,"_buttonsBlade");Rn(this,"_devButtonsBlade")}static init(m,L){pr.instances[m]||(pr.instances[m]=new pr(m)),pr.instances[m]._init(m,L)}_init(m,L){if(CONFIGS_SETTINGS[m]==null)throw new ConfigVersioningError(ERROR_INVALID_CONFIG_NAME);this._initialised&&this._destroy(),this.CONFIG_LOADED=new Signal,this._initialised=!0,this._configName=m,this._config=L,this._currentVersion=DEFAULT_VERSION,log$2("init",this._configName),typeof window<"u"&&window.versioningConfigOriginal&&window.versioningConfigOriginal[m]?this._configOriginal=window.versioningConfigOriginal[m]:(this._configOriginal=JSON.parse(JSON.stringify(L)),typeof window<"u"&&!window.versioningConfigOriginal&&(window.versioningConfigOriginal={}),typeof window<"u"&&(window.versioningConfigOriginal[m]=this._configOriginal)),this._initFirebase(FIREBASE_CONFIG)}static initInterface(m,L=null){if(!pr.instances[L])return;pr.instances[L]._initInterface(m,L)}async _initInterface(m,L=null){if(this._initialised&&!(L!=null&&this._configName!==L)&&(this._panelFolder=m.addFolder({title:`Versioning [ ${this._configName} ]`,expanded:!1,parent:null,index:0}),this._panelFolder.element.classList.toggle("config",!0),this._versions=await this.getVersions(),this._initPanel(),typeof window<"u")){const j=new URLSearchParams(window.location.search).get("config")||null;j&&this._versions[j]&&await this._onSelectAction(j)}}static destroy(m){if(!pr.instances[m])return;pr.instances[m]._destroy(m)}_destroy(m=null){m!=null&&this._configName!==m||(this._removePanel(),this.CONFIG_LOADED.removeAll(),this._initialised=!1)}_initPanel(){this._initVersionListBlade(),this._initButtonsBlade(),this._initDevButtonsBlade()}_removePanel(){var m;(m=this._panelFolder)==null||m.dispose()}_updatePanel(){this._updateButtonsBladeState(),this._updateDevButtonsBladeState(),this._resetVersionListBlade()}_initVersionListBlade(){const m={default:DEFAULT_VERSION};Object.keys(this._versions).forEach(L=>{const j=this._versions[L];m[`${L} | ${j.dateUpdated.toUTCString()}`]=L}),this._versionListBlade=this._panelFolder.addBlade({index:0,view:"list",value:this._currentVersion,options:m}),this._versionListBlade.on("change",L=>{this._onSelectAction(L.value)})}_resetVersionListBlade(){setTimeout(()=>{this._panelFolder.remove(this._versionListBlade),this._initVersionListBlade()})}_initButtonsBlade(){const m=Object.keys(ACTIONS).map(j=>ACTIONS[j]);this._panelFolder.addSeparator();const L=3;this._buttonsBlade=this._panelFolder.addBlade({view:"buttongrid",size:[L,Math.ceil(m.length/L)],cells:(j,ee)=>({title:[m.slice(L*0,L*0+L),m.slice(L*1,L*1+L),m.slice(L*2,L*2+L)][ee][j]})}),this._buttonsBlade.on("click",j=>{switch(j.cell.title){case ACTIONS.new:this._onPanelNewAction();break;case ACTIONS.save:this._onPanelSaveAction();break;case ACTIONS.delete:this._onPanelDeleteAction();break;case ACTIONS.share:this._onPanelShareAction();break;case ACTIONS.publish:this._onPanelPublishAction();break}}),this._updateButtonsBladeState()}_updateButtonsBladeState(){this._buttonsBlade.cellToApiMap_.forEach((L,j)=>{L.disabled=L.title===""||this._currentVersion===DEFAULT_VERSION&&L.title!==ACTIONS.new})}_initDevButtonsBlade(){const m=Object.keys(DEV_ACTIONS).map(j=>DEV_ACTIONS[j]);this._panelFolder.addSeparator();const L=2;this._devButtonsBlade=this._panelFolder.addBlade({view:"buttongrid",size:[L,Math.ceil(m.length/L)],cells:(j,ee)=>({title:[m.slice(L*0,L*0+L),m.slice(L*1,L*1+L),m.slice(L*2,L*2+L)][ee][j]})}),this._devButtonsBlade.on("click",j=>{switch(j.cell.title){case DEV_ACTIONS.copyUpdate:this._onPanelCopyUpdateAction();break}}),this._updateDevButtonsBladeState()}_updateDevButtonsBladeState(){this._devButtonsBlade.cellToApiMap_.forEach((L,j)=>{L.disabled=L.title===""})}async _onSelectAction(m){let L;m!==DEFAULT_VERSION?(this._versions[m]=await this.getVersion(m),L=this._versions[m].config):L=this._configOriginal,this._currentVersion=m,this._applyConfig(L),this._updatePanel();const j=[];parseConfigRecursive(L,!1,j),this.CONFIG_LOADED.dispatch(L,j)}async _onPanelNewAction(){if(typeof window>"u")return;const m=window.prompt("New version's name :");if(!m||m.replace(/ /g,"")==="")return;const L=cleanConfig(this._config,!0);this._versions[m]=await this.createVersion(m,L),this._currentVersion=m,this._updatePanel()}async _onPanelDeleteAction(){typeof window>"u"||!window.confirm(`Are you sure you want to delete version '${this._currentVersion}' ?`)||(await this.deleteVersion(this._currentVersion),delete this._versions[this._currentVersion],this._currentVersion=DEFAULT_VERSION,this._applyConfig(this._configOriginal),this._updatePanel())}async _onPanelSaveAction(){const m=cleanConfig(this._config,!0);this._versions[this._currentVersion]=await this.updateVersion(this._currentVersion,m),this._resetVersionListBlade()}_onPanelShareAction(){if(this._currentVersion===DEFAULT_VERSION)return;const{search:m,pathname:L,origin:j}=window.location,ee=new URLSearchParams(m);ee.set("config",this._currentVersion);const re=j+L+"?"+ee.toString();navigator.clipboard.writeText(re),setTimeout(()=>{window.alert("Share url has been copied to your clipboard !")},200)}_onPanelCopyAction(){const m=getConfigOutput(this._config,!1);navigator.clipboard.writeText(m),setTimeout(()=>{window.alert("The config has been copied to your clipboard !")},200)}async _onPanelCopyUpdateAction(){const m=cleanConfig(this._config,!0),L=this._currentVersion===DEFAULT_VERSION?TMP_VERSION:this._currentVersion;await this.updateVersion(L,m,!0);const j=`node ${UPDATE_SCRIPT_PATH} ${this._configName} ${L}`;navigator.clipboard.writeText(j),setTimeout(()=>{window.alert("The update command has been copied to your clipboard !")},200)}async _onPanelPublishAction(){const{repoPath:m,accessToken:L,workflowName:j}=GITHUB_SETTINGS,ee=this._configName.includes("proto-")?"proto":"master",re=this._configName,le=this._currentVersion,ve=`https://api.github.com/repos/${m}/actions/workflows/${j}.yml/dispatches`;try{await axios$1.request({url:ve,method:"post",headers:{Authorization:`Bearer ${L}`},data:JSON.stringify({ref:ee,inputs:{configName:re,versionName:le}})}),setTimeout(()=>{window.alert(`Congrats, the '${re}' config has been updated to '${le}' version`)},200)}catch(ye){setTimeout(()=>{window.alert(`An error occured during publish action : '${ye.message}'`)},200)}}_applyConfig(m){this._config=applyConfigRecursive(this._config,m,this._configOriginal)}_initFirebase(m){const L=initializeApp(m);this._db=getFirestore(L)}get _versionsCollection(){return collection(this._db,CONFIGS_COLLECTION,this._configName,VERSIONS_COLLECTION)}async getVersions(){if(!this._initialised)return;const m=query(this._versionsCollection,orderBy("dateUpdated","desc")),L=await getDocs(m),j={};return L.forEach(ee=>{ee.id!==TMP_VERSION&&(j[ee.id]=this._parseVersion(ee.data()))}),j}async getVersion(m){if(!this._initialised)return;const L=doc(this._versionsCollection,m),j=await getDoc(L);if(!j.exists())throw new ConfigVersioningError(ERROR_INVALID_NAME,m);const ee=j.data();if(!ee)throw new ConfigVersioningError(ERROR_EMPTY_DOC,m);return this._parseVersion(ee)}async createVersion(m,L){if(!this._initialised)return;let j;try{j=await this.getVersion(m)}catch(le){if(le.code!==ERROR_INVALID_NAME)throw le}if(j)throw new ConfigVersioningError(ERROR_NAME_ALREADY_USED,m);const ee=doc(this._versionsCollection,m);await setDoc(ee,{name:m,dateCreated:new Date,dateUpdated:new Date,config:L});const re=await getDoc(ee);return this._parseVersion(re.data())}async updateVersion(m,L,j=!1){if(!this._initialised)return;let ee;try{ee=await this.getVersion(m)}catch(ve){if(!j&&(ve.code===ERROR_INVALID_NAME||ve.code===ERROR_EMPTY_DOC))throw ve}if(!ee&&j)return await this.createVersion(m,L);const re=doc(this._versionsCollection,m);await setDoc(re,{...ee,dateUpdated:new Date,config:L});const le=await getDoc(re);return this._parseVersion(le.data())}async deleteVersion(m){if(!this._initialised)return;const L=doc(this._versionsCollection,m);await deleteDoc(L);let j;try{j=await this.getVersion(m)}catch{}if(j)throw new ConfigVersioningError(ERROR_FAILED_TO_DELETE,m)}_parseVersion(m){const L={};return L.name=m.name,L.config=m.config,L.dateCreated=new Date(m.dateCreated.seconds*1e3),L.dateUpdated=new Date(m.dateUpdated.seconds*1e3),L}};Rn(pr,"instances",{});let ConfigVersioning=pr;function isResourceObject($){return typeof $=="object"&&"resource"in $}function addInput($,m,L,j=null,ee={}){ee.label==null&&typeof L=="string"&&(ee.label=L.replace(/([A-Z])/g," $1").toLowerCase().replace(/^./,le=>le.toUpperCase()));const re=$.addInput(m,L,ee);return j&&re.on("change",j),ee.className&&re.element.classList.toggle(ee.className,!0),re}function addInputs($,m,L=null,j={},ee={}){for(const re in m){if(re.startsWith("__"))continue;let le=j&&j[re]||{};j&&j[re]===!1||(le={...le,...ee},!isResourceObject(m[re])&&addInput($,m,re,L,le))}return $}function addFileInput($,m,L=null,j={}){const ee="file";m[ee]="";const re=addInput($,m,ee,ve,{view:"file-input",...j}),le=new FileReader;le.addEventListener("load",()=>L(le.result));function ve({value:Ee}){le.abort(),Ee&&Ee instanceof Blob?le.readAsText(Ee):L()}function ye(Ee=null,Me="default",Ce="plain/text"){var Fe,Oe;const De=Ee&&new Blob([Ee],{type:Ce}),Be=De?new File([De],Me):null,ke=(Oe=(Fe=re.controller_)==null?void 0:Fe.valueController)==null?void 0:Oe.value;ke&&ke.setRawValue(Be)}return{input:re,changeFile:ye}}function addLutFileInput($,m,L=null,j={},ee=null){var Ce;const re=new LUT3dlLoader;let le;const ve=(De=null)=>{const Be=De?re.parse(De):null;m.resource.data=Be,m.resource.rawData=De,L&&L()},{changeFile:ye}=addFileInput($,m.resource,ve,{filetypes:[".3DL",".3dl"],...j}),Ee=(De,Be=[])=>{const ke=Be.find(Fe=>{var Oe;return Fe.name===((Oe=m.resource)==null?void 0:Oe.name)});ke&&ye(ke.rawData||le,ke.name)};(Ce=ConfigVersioning.instances[ee])==null||Ce.CONFIG_LOADED.add(Ee);const Me=De=>{le=De,ye(le,m.resource.name)};getFileRawData(m.resource.path).then(Me)}async function getFileRawData($){return await(await(await fetch($)).blob()).text()}const DebuggerUtils={addInput,addInputs,addFileInput,addLutFileInput};class Visibility extends EventDispatcher$1{constructor(){super(),this._bindHandlers(),this._setupEventListeners()}destroy(){this._removeEventListeners()}_bindHandlers(){this._visibilityChangeHandler=this._visibilityChangeHandler.bind(this)}_setupEventListeners(){typeof document>"u"||document.addEventListener(this._getChangeEvent(),this._visibilityChangeHandler,!1)}_removeEventListeners(){typeof document>"u"||document.removeEventListener(this._getChangeEvent(),this._visibilityChangeHandler,!1)}_getChangeEvent(){if(typeof document.hidden<"u")return"visibilitychange";if(typeof document.msHidden<"u")return"msvisibilitychange";if(typeof document.webkitHidden<"u")return"webkitvisibilitychange"}_getHiddenEvent(){if(typeof document.hidden<"u")return"hidden";if(typeof document.msHidden<"u")return"msHidden";if(typeof document.webkitHidden<"u")return"webkitHidden"}_visibilityChangeHandler(){this.dispatchEvent("change",{isHidden:document[this._getHiddenEvent()]})}}const Visibility$1=new Visibility,DEBOUNCE_RATE=250;class WindowResizeObserver extends EventDispatcher$1{constructor(){super(),this._innerWidth=null,this._innerHeight=null,this._fullWidth=null,this._fullHeight=null,this._dpr=1,this._maxDpr=1,this._innerGhostElement=this._createGhostElement(),this._bindHandlers(),this._setupEventListeners(),this._updateValues(),DeviceHelper.checkGpu().then(()=>{this._maxDpr=DeviceHelper.gpu.tier<=1?1:1.4,this._updateValues()})}get dimensions(){return{innerWidth:this._innerWidth,innerHeight:this._innerHeight,fullWidth:this._fullWidth,fullHeight:this._fullHeight,dpr:this._dpr}}get innerWidth(){return this._innerWidth}get innerHeight(){return this._innerHeight}get fullWidth(){return this._fullWidth}get fullHeight(){return this._fullHeight}get dpr(){return this._dpr}triggerResize(){this._updateValues(),this._dispatchResizeEvent()}_bindHandlers(){this._windowResizeHandler=this._windowResizeHandler.bind(this)}_setupEventListeners(){window.addEventListener(this._getResizeEvent(),this._windowResizeHandler)}_getResizeEvent(){return"resize"}_createGhostElement(){if(typeof document>"u")return;const m=document.createElement("div");return m.style.width="100%",m.style.height="100vh",m.style.position="absolute",m.style.top=0,m.style.left=0,m.style.pointerEvents="none",m}_updateInnerDimensions(){typeof document>"u"||(document.body.appendChild(this._innerGhostElement),this._fullWidth=this._innerGhostElement.offsetWidth,this._fullHeight=this._innerGhostElement.offsetHeight,document.body.removeChild(this._innerGhostElement))}_updateFullDimensions(){this._innerWidth=window.innerWidth,this._innerHeight=window.innerHeight}_updateDPR(){this._dpr=Math.min(window.devicePixelRatio,this._maxDpr)}_dispatchResizeEvent(){this.dispatchEvent("resize",{innerWidth:this._innerWidth,innerHeight:this._innerHeight,fullWidth:this._fullWidth,fullHeight:this._fullHeight,dpr:this._dpr})}_debounce(){this._debounceTimeout&&clearTimeout(this._debounceTimeout),this._debounceTimeout=setTimeout(()=>{this._updateValues(),this._dispatchResizeEvent()},DEBOUNCE_RATE)}_updateValues(){this._updateInnerDimensions(),this._updateFullDimensions(),this._updateDPR()}_windowResizeHandler(){this._debounce()}}const WindowResizeObserver$1=new WindowResizeObserver;function isObject$1($){return $&&typeof $=="object"&&!Array.isArray($)}function mergeDeep($,...m){if(!m.length)return $;const L=m.shift();if(isObject$1($)&&isObject$1(L))for(const j in L)isObject$1(L[j])?($[j]||Object.assign($,{[j]:{}}),mergeDeep($[j],L[j])):Object.assign($,{[j]:L[j]});return mergeDeep($,...m)}const DEFAULT_SETTINGS={clearColor:"#030303"};class Renderer{constructor(m){this._canvas=m.canvas,this._renderScale=WindowResizeObserver$1.dpr,this._width=null,this._height=null,this._debug=this._createDebug(),this._instance=this._createRenderer(),this._debugStats=this._createDebugStats()}destroy(){this._instance.dispose(),this._removeDebug()}get instance(){return this._instance}get width(){return this._width}get height(){return this._height}set renderScale(m){this._renderScale=m,WebglApp$1._resize()}get renderScale(){return this._renderScale}updateStats(){DeviceHelper.gpu.tier>TIER.BAD&&DeviceHelper.device.desktop&&(Debugger$1==null||Debugger$1.pane.refresh()),this._instance.info.reset()}updateSettings(m){const L=JSON.parse(JSON.stringify(DEFAULT_SETTINGS));m=mergeDeep(L,m),this._instance.setClearColor(m.clearColor,0)}_createRenderer(){const m=new WebGLRenderer({canvas:this._canvas,antialias:!1,powerPreference:"high-performance",premultipliedAlpha:!1,alpha:!0}),L=new Color(0),j=0;if(m.setClearColor(L,j),m.toneMapping=LinearToneMapping,m.shadowMap.enabled=!0,m.shadowMap.type=VSMShadowMap,m.info.autoReset=!1,this._debug){const ee={clearColor:L.getStyle()},re={NoToneMapping,LinearToneMapping,ReinhardToneMapping,CineonToneMapping,ACESFilmicToneMapping};this._debug.addInput(ee,"clearColor").on("change",()=>{m.setClearColor(L.setStyle(ee.clearColor),j)}),this._debug.addInput(m,"toneMapping",{options:re}),this._debug.addInput(m,"toneMappingExposure",{min:0,max:10})}return m}render(m=null,L=null,j=null){m&&this._instance.render(m.scene,m.camera),L&&!L.disabled&&(this._instance.autoClear=!1,this._instance.clearDepth(),this._instance.render(L.scene,L.camera),this._instance.autoClear=!0),j&&!j.disabled&&(this._instance.autoClear=!1,this._instance.clearDepth(),this._instance.render(j.scene,j.camera),this._instance.autoClear=!0)}resize(m){this._updateDimensions(m),this._resizeRenderer(m)}_updateDimensions({innerWidth:m,innerHeight:L}){this._width=m*this._renderScale,this._height=L*this._renderScale}_resizeRenderer({innerWidth:m,innerHeight:L}){this._instance.setSize(this._width,this._height,!1),this._instance.domElement.style.width=m+"px",this._instance.domElement.style.height=L+"px"}_createDebug(){if(!Debugger$1)return;const m=Debugger$1.addFolder({title:"Renderer",index:1});return m.addInput(this,"_renderScale",{label:"renderScale",min:.01,max:2}).on("change",()=>{WebglApp$1._resize()}),m}_createDebugStats(){if(!this._debug)return;const m=this._debug.addFolder({title:"Stats"}),L=m.addFolder({title:"Memory"});L.addMonitor(this._instance.info.memory,"geometries",{format:ee=>ee.toLocaleString()}),L.addMonitor(this._instance.info.memory,"textures",{format:ee=>ee.toLocaleString()});const j=m.addFolder({title:"Render"});return j.addMonitor(this._instance.info.render,"calls",{format:ee=>ee.toLocaleString()}),j.addMonitor(this._instance.info.render,"triangles",{format:ee=>ee.toLocaleString()}),j.addMonitor(this._instance.info.render,"points",{format:ee=>ee.toLocaleString()}),j.addMonitor(this._instance.info.render,"lines",{format:ee=>ee.toLocaleString()}),j.addMonitor(this._instance.info.programs,"length",{label:"programs",format:ee=>ee.toLocaleString()}),m}_removeDebug(){this._debug&&this._debug.dispose()}}class ViewManager extends Object3D{constructor({viewsConfig:m}){super(),this._active1=null,this._active2=null,this._active3=null,this._views=[],this._viewsConfig=m}setup(){this._views=this._createViews(),this._prepareViews()}destroy(){this._destroyViews(),this._removeDebugLayers()}_prepareViews(){this._views.forEach(m=>m.instance.prepare&&m.instance.prepare(!0))}get active(){var m;return(m=this._active1)==null?void 0:m.instance}get overlay(){var m;return(m=this._active2)==null?void 0:m.instance}get views(){return this._views}get(m){return this._getViewByName(m)}showView1(m){const L=m&&this._getViewByName(m);return L?(WebglApp$1.renderer.updateSettings(L.config.renderer||L.config.config.renderer),Debugger$1==null||Debugger$1.gotoTab(L.name),this._active1=L,WebglApp$1.mainScene.view1=L.instance,L.instance.show()):(this._active1=null,WebglApp$1.mainScene.view1=null,gsapWithCSS.timeline())}hideView1(m){var ee;const L=m?this._getViewByName(m):null;if(!L)return gsapWithCSS.timeline();const j=L.instance;return typeof j.hide=="function"?(WebglApp$1.mainScene.prevView1=j,j.hide(()=>{var re;((re=this._active1)==null?void 0:re.instance)===j&&(this._active1=null),WebglApp$1.mainScene.prevView1=null})):(((ee=this._active1)==null?void 0:ee.instance)===j&&(this._active1=null,WebglApp$1.mainScene.prevView1=null),gsapWithCSS.timeline())}showView2(m){const L=m?this._getViewByName(m):null;return L?(this._active2=L,WebglApp$1.mainScene.view2=L.instance,L.instance.show()):(this._active2=null,WebglApp$1.mainScene.view2=null,gsapWithCSS.timeline())}hideView2(m){var ee;const L=m?this._getViewByName(m):null;if(!L)return gsapWithCSS.timeline();const j=L.instance;return typeof j.hide=="function"?(WebglApp$1.mainScene.prevView2=j,j.hide(()=>{var re;((re=this._active2)==null?void 0:re.instance)===j&&(this._active2=null),WebglApp$1.mainScene.prevView2=null})):(((ee=this._active2)==null?void 0:ee.instance)===j&&(this._active2=null,WebglApp$1.mainScene.view2=null),gsapWithCSS.timeline())}showView3(m){const L=m?this._getViewByName(m):null;return L?(this._active3=L,WebglApp$1.mainScene.view3=L.instance,L.instance.show()):(this._active3=null,WebglApp$1.mainScene.view3=null,gsapWithCSS.timeline())}hideView3(m){var ee;const L=m?this._getViewByName(m):null;if(!L)return gsapWithCSS.timeline();const j=L.instance;return typeof j.hide=="function"?(WebglApp$1.mainScene.prevView3=j,j.hide(()=>{var re;((re=this._active3)==null?void 0:re.instance)===j&&(this._active3=null),WebglApp$1.mainScene.prevView3=null})):(((ee=this._active3)==null?void 0:ee.instance)===j&&(this._active3=null,WebglApp$1.mainScene.view3=null),gsapWithCSS.timeline())}_createViews(){const m=[];let L;return Debugger$1&&this._viewsConfig.forEach(j=>Debugger$1.addTab(j.name)),this._viewsConfig.forEach(j=>{L=new j.class({config:j}),m.push({name:j.name,instance:L,config:j})}),m}_getViewByName(m){for(const L of this._views)if(L.config.name.toLowerCase()===m.toLowerCase())return L;return null}_destroyViews(){for(const m of this._views)typeof m.instance.destroy=="function"&&m.instance.destroy()}_removeDebugLayers(){Debugger$1==null||Debugger$1.removeTabs()}}class DebugTexture extends Object3D{constructor(L){super();Rn(this,"mesh");Rn(this,"uniforms");Rn(this,"_material");const{texture:j}=L;this.uniforms={uTexture:{value:j}},this._material=this._createMaterial(),this.mesh=this._createMesh()}_createMaterial(){const L=`
			varying vec2 vUv;

			void main() {
				#ifdef IS_FOCUS
					gl_Position = vec4(position, 1.0);
				#else
					gl_Position = modelMatrix * vec4(position, 1.0);
				#endif

				vUv = uv;
			}
		`,j=`
			uniform sampler2D uTexture;

			varying vec2 vUv;

			void main() {
				vec2 uv = vec2(vUv.x, vUv.y);
				vec4 color = texture2D(uTexture, uv);
				color.a = 1.;
				gl_FragColor = color;
			}
		`;return new ShaderMaterial({uniforms:this.uniforms,vertexShader:L,fragmentShader:j,defines:{IS_FOCUS:!1},transparent:!1,depthTest:!1,depthWrite:!1})}_createMesh(){const L=new PlaneGeometry(2,2,1,1),j=new Mesh(L,this._material);return j.renderOrder=1200,this.add(j),j}setFocus(L){this._material.defines.IS_FOCUS=L,this._material.needsUpdate=!0}setVisible(L){this.mesh.visible=L}}const Di=class Di extends Scene{constructor(L={}){super();Rn(this,"_config");Rn(this,"_debug");Rn(this,"_camera");Rn(this,"_focusIndex");Rn(this,"baseWidth");Rn(this,"baseHeight");autoBind(this),Di.instance=this,this._config=L.config,this.visible=GLOBAL.params.debugTexture.enabled,this._focusIndex=GLOBAL.params.debugTexture.index,this._camera=new Camera,this._debug=this._createDebug(),Di.textures.length>0&&Di.textures.forEach(j=>{this.addTexture(j)}),this.updateFocus(),this._bind(!0)}static addTexture(L,j=null){var ee;L&&(Di.textures.length>=this.MAX||(j!=null&&Di.textures[j]?Di.textures[j]=L:Di.textures.push(L),(ee=Di.instance)==null||ee.addTexture(L,j)))}static reset(){var L;(L=Di.instance)==null||L.reset(),Di.textures=[]}static get scale(){return Di.instance?Di.instance.scale.x:1}static set scale(L){Di.instance&&(Di.instance.scale.x=L,Di.instance.scale.y=L)}get camera(){return this._camera}_bind(L){WebglApp$1[L?"addEventListener":"removeEventListener"]("resize",this.onWindowResize)}destroy(){var L;this._bind(!1),(L=this._debug)==null||L.dispose(),Di.reset()}addTexture(L,j=null){if(!L||this.children.length>=Di.MAX)return;if(j!=null&&this.children[j]){this.children[j].uniforms.uTexture.value=L;return}const ee=new DebugTexture({texture:L});this.add(ee),this.onWindowResize(),this.updateFocus()}updateFocus(){const L=this._focusIndex>=0&&this._focusIndex<this.children.length;this.children.forEach((j,ee)=>{const re=this._focusIndex===ee;j.setFocus(L&&re),j.setVisible(L&&re||!L)})}reset(){this.children.forEach(L=>{var j;(j=L.uniforms.uTexture.value)==null||j.dispose(),this.remove(L)})}_createDebug(){if(!Debugger$1)return;const L=Debugger$1.addFolder({title:"Debug textures",expanded:!1});return L.addInput(this,"visible",{label:"Visible"}),L.addInput(this,"_focusIndex",{label:"Focus Index",step:1,min:-1,max:Di.MAX}).on("change",this.updateFocus),L}onWindowResize(){const{width:L,height:j}={width:2,height:2};this.baseWidth=L,this.baseHeight=j*.5;const ee=this.children.length,re=Math.ceil(Math.sqrt(ee)*2),le=Math.ceil(ee/re)*2;this.children.forEach((ve,ye)=>{const Ee=this.baseWidth/re,Me=this.baseHeight/le,Ce=Math.floor(ye/re),De=ye%re;ve.mesh.scale.set(Ee/2,Me/2,1),ve.mesh.position.x=De*Ee+Ee*.5,ve.mesh.position.y=Ce*Me+Me*.5}),this.position.x=-L*.5,this.position.y=-j*.5}};Rn(Di,"MAX",12),Rn(Di,"instance"),Rn(Di,"textures",[]);let DebugTexturesComponent=Di;class Triangle extends BufferGeometry{constructor(){super(),this.setAttribute("position",new BufferAttribute(new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),3)),this.setAttribute("uv",new BufferAttribute(new Float32Array([0,0,2,0,0,2]),2))}}const MainMeshVert=`#define GLSLIFY 1
attribute vec2 uv;attribute vec3 position;varying vec2 vUv;void main(){vUv=uv;gl_Position=vec4(position,1);}`,MainMeshFrag=`precision highp float;
#define GLSLIFY 1
varying vec2 vUv;uniform vec2 uResolution;uniform vec3 uBaseColor;uniform sampler2D tLayer1;uniform float tLayer1Alpha;uniform sampler2D tLayer2;uniform float tLayer2Alpha;uniform sampler2D tLayer3;uniform float tLayer3Alpha;uniform sampler2D tLayer4;uniform float tLayer4Alpha;uniform sampler2D tLayer5;uniform float tLayer5Alpha;uniform sampler2D tLayer6;uniform float tLayer6Alpha;void main(){vec2 uvScreen=gl_FragCoord.xy/uResolution;float aspect=uResolution.x/uResolution.y;vec4 color=vec4(uBaseColor,1.);vec4 nextColor;float opacity;vec2 uv=vUv;
#ifdef LAYER_1
nextColor=texture2D(tLayer1,uv);color.rgb=mix(color.rgb,nextColor.rgb,nextColor.a*tLayer1Alpha);
#endif
#ifdef LAYER_2
nextColor=texture2D(tLayer2,uv);color.rgb=mix(color.rgb,nextColor.rgb,nextColor.a*tLayer2Alpha);
#endif
#ifdef LAYER_3
nextColor=texture2D(tLayer3,uv);color.rgb=mix(color.rgb,nextColor.rgb,nextColor.a*tLayer3Alpha);
#endif
#ifdef LAYER_4
nextColor=texture2D(tLayer4,uv);color.rgb=mix(color.rgb,nextColor.rgb,nextColor.a*tLayer4Alpha);
#endif
#ifdef LAYER_5
nextColor=texture2D(tLayer5,uv);color.rgb=mix(color.rgb,nextColor.rgb,nextColor.a*tLayer5Alpha);
#endif
#ifdef LAYER_6
nextColor=texture2D(tLayer6,uv);color.rgb=mix(color.rgb,nextColor.rgb,nextColor.a*tLayer6Alpha);
#endif
gl_FragColor=color;}`,BG_COLORS={black:new Color(0),white:new Color(16777215),grey:new Color(15263976)},log$1=(...$)=>{};class MainScene extends Object3D{constructor(L={}){super();Rn(this,"_scene");Rn(this,"_camera");Rn(this,"_meshes");Rn(this,"_uniforms");Rn(this,"_meshesConfig");Rn(this,"_layers");Rn(this,"_layersAlpha");Rn(this,"_layersToRender");Rn(this,"_configId");Rn(this,"_prevView1");Rn(this,"_prevView2");Rn(this,"_prevView3");Rn(this,"_view1");Rn(this,"_view2");Rn(this,"_view3");Rn(this,"_preCompiled",!1);Rn(this,"_onlyOneRenderAtOnce",!1);Rn(this,"_bgColorTween");autoBind(this),this._prevView1=null,this._view1=null,this._view2=null,this._uniforms={uResolution:{value:new Vector2(1,1)},uBaseColor:{value:BG_COLORS.white},tLayer1:{value:null},tLayer2:{value:null},tLayer3:{value:null},tLayer4:{value:null},tLayer5:{value:null},tLayer6:{value:null},tLayer1Alpha:{value:1},tLayer2Alpha:{value:1},tLayer3Alpha:{value:1},tLayer4Alpha:{value:1},tLayer5Alpha:{value:1},tLayer6Alpha:{value:1}},this._layers=[this._uniforms.tLayer1,this._uniforms.tLayer2,this._uniforms.tLayer3,this._uniforms.tLayer4,this._uniforms.tLayer5,this._uniforms.tLayer6],this._layersAlpha=[this._uniforms.tLayer1Alpha,this._uniforms.tLayer2Alpha,this._uniforms.tLayer3Alpha,this._uniforms.tLayer4Alpha,this._uniforms.tLayer5Alpha,this._uniforms.tLayer6Alpha],this._meshesConfig=[];for(let j=0;j<this._layers.length;j++)this._meshesConfig[j]={id:`${j+1}_layers`,defines:{LAYER_1:j+1>=1,LAYER_2:j+1>=2,LAYER_3:j+1>=3,LAYER_4:j+1>=4,LAYER_5:j+1>=5,LAYER_6:j+1>=6}};this._bgColorTween={alpha:1},this._createScene(),this._createMeshes(),DeviceHelper.checkGpu().then(()=>{this._onlyOneRenderAtOnce=DeviceHelper.gpu.tier<=TIER.BAD||!DeviceHelper.device.desktop}),this._bind(!0)}destroy(){this._bind(!1)}_bind(L=!0){const j=L?"addEventListener":"removeEventListener";WebglApp$1[j]("resize",this.onWindowResize),WebglApp$1[j]("update",this.onUpdate)}compile(){this._preCompiled||(this._preCompiled=!0,this.scene&&WebglApp$1.renderer.instance.compile(this.scene,this.camera))}onAssetsLoaded(){}get scene(){return this._scene}get camera(){return this._camera}get prevView1(){return this._prevView1}set prevView1(L){this._prevView1=L,this._prevView1&&(this._prevView1.renderIndex=0)}get prevView2(){return this._prevView2}set prevView2(L){this._prevView2=L,this._prevView2&&(this._prevView2.renderIndex=1)}get prevView3(){return this._prevView3}set prevView3(L){this._prevView3=L,this._prevView3&&(this._prevView3.renderIndex=3)}get view1(){return this._view1}set view1(L){this._view1=L,this._view1&&(this._view1.renderIndex=10)}get view2(){return this._view2}set view2(L){this._view2=L,this._view2&&(this._view2.renderIndex=11)}get view3(){return this._view3}set view3(L){this._view3=L,this._view3&&(this._view3.renderIndex=12)}onUpdate({time:L,delta:j}){let ee=0;const re=[];[this._view1,this._view2,this._view3].forEach(Me=>{re.includes(Me)||re.push(Me)}),[this._prevView1,this._prevView2,this._prevView3].forEach(Me=>{re.includes(Me)||re.push(Me)}),re.forEach(Me=>{Me&&(Me.visible?(!this._onlyOneRenderAtOnce||ee===0)&&(Me.update({time:L,delta:j}),ee++):Me.renderAlpha=0)}),this._layers.forEach(Me=>{Me.value=null}),this._layersAlpha.forEach(Me=>{Me.value=0});const ye=re.filter(Me=>!!Me&&Me.visible).sort((Me,Ce)=>Me.renderIndex-Ce.renderIndex);ye.forEach((Me,Ce)=>{this._layers[Ce].value=Me.renderTargetTexture,this._layersAlpha[Ce].value=Me.renderAlpha||0});const Ee=ye.map(Me=>Me.viewName).join("-");if(this._layersToRender!==Ee){this._layersToRender=Ee;const Me=`${Math.max(1,ye.length)}_layers`;log$1("onUpdate",Me,this._layersToRender),this._switchMesh(Me)}}syncAboutViewUniforms(L){}onWindowResize({renderWidth:L,renderHeight:j}){this._uniforms.uResolution.value.set(L,j)}_createScene(){this._scene=new Scene,this._camera=new Camera}_createMeshes(){this._meshes=this._meshesConfig.map((L,j)=>{const ee=this._createMesh(L.defines);return ee.visible=!1,ee.name=L.id,this._scene.add(ee),ee}),this._switchMesh("1_layers")}_createMesh(L={}){return new Mesh(new Triangle,new RawShaderMaterial({vertexShader:MainMeshVert,fragmentShader:MainMeshFrag,uniforms:this._uniforms,defines:L,depthWrite:!1,depthTest:!0,transparent:!0}))}_switchMesh(L){if(!this._meshesConfig.find(ee=>ee.id===L)){console.warn("MainScene._switchMesh",`Mesh with id ${L} not found`);return}if(this._configId===L)return;if(this._configId){const ee=this._meshes.find(re=>re.name===this._configId);ee.visible=!1}this._configId=L;const j=this._meshes.find(ee=>ee.name===this._configId);j.visible=!0}}class EventDispatcher{addEventListener(m,L){this._listeners===void 0&&(this._listeners={});const j=this._listeners;j[m]===void 0&&(j[m]=[]),j[m].includes(L)||j[m].push(L)}removeEventListener(m,L){if(this._listeners===void 0)return;const ee=this._listeners[m];if(ee!==void 0){const re=ee.indexOf(L);re!==-1&&ee.splice(re,1)}}dispatchEvent(m,L){if(this._listeners===void 0)return;const ee=this._listeners[m];if(ee!==void 0){const re=ee.slice(0);for(let le=0,ve=re.length;le<ve;le++)re[le].call(this,L)}}}function bindAll$1(...$){if($.length<2||typeof $[0]!="object")throw new Error("Function expects object, method, method etc.");const m=$.shift(),L=$;for(let j=0,ee=L.length;j<ee;j++){const re=L[j];m[re]=m[re].bind(m)}}function isAbsolutePath($){return new RegExp("^(?:[a-z]+:)?//","i").test($)}const ai=class ai extends EventDispatcher{constructor(){super(),this._progress=0,this._resourcesToPreload=[],this._preloadedResources=0,this._bindAll()}add({resources:m,namespace:L,preload:j},ee=ai.triggerWarns){for(let re=0;re<m.length;re++){const le=Object.assign({},m[re]);if(L&&(le.namespace&&ee&&console.warn(`Resource Loader: resource namespace "${le.namespace}" will override the original name space for resource "${le.name}"`),le.namespace=L),j!==void 0&&le.preload===void 0&&(le.preload=j),le.preload===void 0&&(le.preload=ai.preloadByDefault),ai.isResourceAdded(le)){ee&&console.warn(`Resource loader : Resource with same name or path has already been added for "${le.name}". It will not be added.`);continue}else ai.resources.push(le)}return ai.resources}preload(){const m=[],L=ai.resources.filter(j=>j.preload);this._preloadStartHandler(L);for(let j=0,ee=L.length;j<ee;j++){const re=ai.loadResource(L[j]);m.push(re),re.then(this._preloadProgressHandler)}return Promise.all(m).then(this._preloadCompleteHandler,this._preloadErrorHandler)}destroy(){ai.cache=[],ai.loaders={},ai.resources=[],this._progress=null,this._resourcesToPreload=null,this._preloadedResources=null}static clearResources(){ai.cache=[],ai.resources=[]}static load(m){return this.loadResourceByName(m.name,m.path)}static get(m){const L=this.getResourceByName(m);return L==null?void 0:L.data}static isLoaded(m){const L=this.getResourceByName(m);return!!(L!=null&&L.data)}static isAdded(m){return!!this.getResourceByName(m)}static dispose(m){let L=ai.resources.findIndex(({name:j})=>j===m);if(L!==-1){const j=ai.resources[L];j.data&&j.data.dispose&&j.data.dispose(),j.data=null,ai.resources.splice(L,1)}if(L=ai.cache.findIndex(({name:j})=>j===m),L!==-1){const j=ai.cache[L];j.data&&j.data.dispose&&j.data.dispose(),j.data=null,ai.cache.splice(L,1)}}static registerLoader(m,L,j={}){this.loaders[L]=new m({type:L,...j})}static getLoader(m){if(!this.loaders[m])throw new Error(`Resource Loader: No loader is available for type "${m}"`);return this.loaders[m]}static registerWorker(m){this.worker=m}static loadResourceByName(m,L){return new Promise((j,ee)=>{for(let le=0,ve=ai.cache.length;le<ve;le++)if(ai.cache[le].path===L){j(ai.cache[le].data);return}let re=null;for(let le=0;le<this.resources.length;le++)this.resources[le].name===m&&(re=this.resources[le]);re||ee(new Error(`Resource Loader: Resource with name '${m}' was not found`)),this.loadResource(re).then(()=>{j(re.data)},()=>{ee(new Error(`Resource Loader : failing to get the resource "${m}"`))})})}static getResourceByName(m,L=ai.triggerErrors){for(let j=0,ee=ai.cache.length;j<ee;j++)if(ai.cache[j].name===m)return ai.cache[j];if(L)throw new Error(`Resource Loader: Resource with name '${m}' was not found`)}static loadResource(m){if(!m.name)throw new Error("Resource name should be defined");const L=this.loaders[m.type];if(!L)throw new Error(`Resource Loader: No loader is available for type "${m.type}"`);if(!m.path)throw new Error(`Resource Loader: Could not find resource path for "${m.name}"`);const j=this.resolvePath(m.path),ee=L.load({path:j,name:m.name,type:m.type,basePath:this.basePath,options:m.options});return ee.then(re=>{m.data=re;for(let le=0,ve=ai.cache.length;le<ve;le++)if(ai.cache[le].name===m.name)return;ai.cache.push(m)}),ee}static resolvePath(m){return isAbsolutePath(m)?m:`${this.basePath}${m}`}_bindAll(){bindAll$1(this,"_preloadCompleteHandler","_preloadProgressHandler","_preloadErrorHandler")}_preloadStartHandler(m){this._resourcesToPreload=m,this.dispatchEvent("start",this._resourcesToPreload)}_preloadProgressHandler(m){this._preloadedResources++,this._progress=this._preloadedResources/this._resourcesToPreload.length,this.dispatchEvent("progress",this._progress)}_preloadCompleteHandler(m){this.dispatchEvent("complete",m)}_preloadErrorHandler(){console.error("Resource Loader : Something went wrong while preloading resources")}static isResourceAdded(m){for(let L=0;L<ai.resources.length;L++)if(ai.resources[L].type===m.type&&(ai.resources[L].name===m.name||ai.resources[L].path===m.path))return!0}};Rn(ai,"resources",[]),Rn(ai,"cache",[]),Rn(ai,"basePath",""),Rn(ai,"loaders",{}),Rn(ai,"worker",null),Rn(ai,"preloadByDefault",!1),Rn(ai,"triggerWarns",!1),Rn(ai,"triggerErrors",!1);let ResourceLoader=ai;class Loader{constructor(m={}){this.type=m.type}get worker(){return ResourceLoader.worker}load(m){return new Promise}}const _taskCache$1=new WeakMap;class DRACOLoader extends Loader$1{constructor(m){super(m),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(m){return this.decoderPath=m,this}setDecoderConfig(m){return this.decoderConfig=m,this}setWorkerLimit(m){return this.workerLimit=m,this}load(m,L,j,ee){const re=new FileLoader(this.manager);re.setPath(this.path),re.setResponseType("arraybuffer"),re.setRequestHeader(this.requestHeader),re.setWithCredentials(this.withCredentials),re.load(m,le=>{this.parse(le,L,ee)},j,ee)}parse(m,L,j=()=>{}){this.decodeDracoFile(m,L,null,null,SRGBColorSpace,j).catch(j)}decodeDracoFile(m,L,j,ee,re=LinearSRGBColorSpace,le=()=>{}){const ve={attributeIDs:j||this.defaultAttributeIDs,attributeTypes:ee||this.defaultAttributeTypes,useUniqueIDs:!!j,vertexColorSpace:re};return this.decodeGeometry(m,ve).then(L).catch(le)}decodeGeometry(m,L){const j=JSON.stringify(L);if(_taskCache$1.has(m)){const ye=_taskCache$1.get(m);if(ye.key===j)return ye.promise;if(m.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let ee;const re=this.workerNextTaskID++,le=m.byteLength,ve=this._getWorker(re,le).then(ye=>(ee=ye,new Promise((Ee,Me)=>{ee._callbacks[re]={resolve:Ee,reject:Me},ee.postMessage({type:"decode",id:re,taskConfig:L,buffer:m},[m])}))).then(ye=>this._createGeometry(ye.geometry));return ve.catch(()=>!0).then(()=>{ee&&re&&this._releaseTask(ee,re)}),_taskCache$1.set(m,{key:j,promise:ve}),ve}_createGeometry(m){const L=new BufferGeometry;m.index&&L.setIndex(new BufferAttribute(m.index.array,1));for(let j=0;j<m.attributes.length;j++){const ee=m.attributes[j],re=ee.name,le=ee.array,ve=ee.itemSize,ye=new BufferAttribute(le,ve);re==="color"&&(this._assignVertexColorSpace(ye,ee.vertexColorSpace),ye.normalized=!(le instanceof Float32Array)),L.setAttribute(re,ye)}return L}_assignVertexColorSpace(m,L){if(L!==SRGBColorSpace)return;const j=new Color;for(let ee=0,re=m.count;ee<re;ee++)j.fromBufferAttribute(m,ee).convertSRGBToLinear(),m.setXYZ(ee,j.r,j.g,j.b)}_loadLibrary(m,L){const j=new FileLoader(this.manager);return j.setPath(this.decoderPath),j.setResponseType(L),j.setWithCredentials(this.withCredentials),new Promise((ee,re)=>{j.load(m,ee,void 0,re)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const m=typeof WebAssembly!="object"||this.decoderConfig.type==="js",L=[];return m?L.push(this._loadLibrary("draco_decoder.js","text")):(L.push(this._loadLibrary("draco_wasm_wrapper.js","text")),L.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(L).then(j=>{const ee=j[0];m||(this.decoderConfig.wasmBinary=j[1]);const re=DRACOWorker.toString(),le=["/* draco decoder */",ee,"","/* worker */",re.substring(re.indexOf("{")+1,re.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([le]))}),this.decoderPending}_getWorker(m,L){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const ee=new Worker(this.workerSourceURL);ee._callbacks={},ee._taskCosts={},ee._taskLoad=0,ee.postMessage({type:"init",decoderConfig:this.decoderConfig}),ee.onmessage=function(re){const le=re.data;switch(le.type){case"decode":ee._callbacks[le.id].resolve(le);break;case"error":ee._callbacks[le.id].reject(le);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+le.type+'"')}},this.workerPool.push(ee)}else this.workerPool.sort(function(ee,re){return ee._taskLoad>re._taskLoad?-1:1});const j=this.workerPool[this.workerPool.length-1];return j._taskCosts[m]=L,j._taskLoad+=L,j})}_releaseTask(m,L){m._taskLoad-=m._taskCosts[L],delete m._callbacks[L],delete m._taskCosts[L]}debug(){console.log("Task load: ",this.workerPool.map(m=>m._taskLoad))}dispose(){for(let m=0;m<this.workerPool.length;++m)this.workerPool[m].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}}function DRACOWorker(){let $,m;onmessage=function(le){const ve=le.data;switch(ve.type){case"init":$=ve.decoderConfig,m=new Promise(function(Me){$.onModuleLoaded=function(Ce){Me({draco:Ce})},DracoDecoderModule($)});break;case"decode":const ye=ve.buffer,Ee=ve.taskConfig;m.then(Me=>{const Ce=Me.draco,De=new Ce.Decoder;try{const Be=L(Ce,De,new Int8Array(ye),Ee),ke=Be.attributes.map(Fe=>Fe.array.buffer);Be.index&&ke.push(Be.index.array.buffer),self.postMessage({type:"decode",id:ve.id,geometry:Be},ke)}catch(Be){console.error(Be),self.postMessage({type:"error",id:ve.id,error:Be.message})}finally{Ce.destroy(De)}});break}};function L(le,ve,ye,Ee){const Me=Ee.attributeIDs,Ce=Ee.attributeTypes;let De,Be;const ke=ve.GetEncodedGeometryType(ye);if(ke===le.TRIANGULAR_MESH)De=new le.Mesh,Be=ve.DecodeArrayToMesh(ye,ye.byteLength,De);else if(ke===le.POINT_CLOUD)De=new le.PointCloud,Be=ve.DecodeArrayToPointCloud(ye,ye.byteLength,De);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!Be.ok()||De.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+Be.error_msg());const Fe={index:null,attributes:[]};for(const Oe in Me){const Ne=self[Ce[Oe]];let ze,$e;if(Ee.useUniqueIDs)$e=Me[Oe],ze=ve.GetAttributeByUniqueId(De,$e);else{if($e=ve.GetAttributeId(De,le[Me[Oe]]),$e===-1)continue;ze=ve.GetAttribute(De,$e)}const He=ee(le,ve,De,Oe,Ne,ze);Oe==="color"&&(He.vertexColorSpace=Ee.vertexColorSpace),Fe.attributes.push(He)}return ke===le.TRIANGULAR_MESH&&(Fe.index=j(le,ve,De)),le.destroy(De),Fe}function j(le,ve,ye){const Me=ye.num_faces()*3,Ce=Me*4,De=le._malloc(Ce);ve.GetTrianglesUInt32Array(ye,Ce,De);const Be=new Uint32Array(le.HEAPF32.buffer,De,Me).slice();return le._free(De),{array:Be,itemSize:1}}function ee(le,ve,ye,Ee,Me,Ce){const De=Ce.num_components(),ke=ye.num_points()*De,Fe=ke*Me.BYTES_PER_ELEMENT,Oe=re(le,Me),Ne=le._malloc(Fe);ve.GetAttributeDataArrayForAllPoints(ye,Ce,Oe,Fe,Ne);const ze=new Me(le.HEAPF32.buffer,Ne,ke).slice();return le._free(Ne),{name:Ee,array:ze,itemSize:De}}function re(le,ve){switch(ve){case Float32Array:return le.DT_FLOAT32;case Int8Array:return le.DT_INT8;case Int16Array:return le.DT_INT16;case Int32Array:return le.DT_INT32;case Uint8Array:return le.DT_UINT8;case Uint16Array:return le.DT_UINT16;case Uint32Array:return le.DT_UINT32}}}function toTrianglesDrawMode($,m){if(m===TrianglesDrawMode)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),$;if(m===TriangleFanDrawMode||m===TriangleStripDrawMode){let L=$.getIndex();if(L===null){const le=[],ve=$.getAttribute("position");if(ve!==void 0){for(let ye=0;ye<ve.count;ye++)le.push(ye);$.setIndex(le),L=$.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),$}const j=L.count-2,ee=[];if(m===TriangleFanDrawMode)for(let le=1;le<=j;le++)ee.push(L.getX(0)),ee.push(L.getX(le)),ee.push(L.getX(le+1));else for(let le=0;le<j;le++)le%2===0?(ee.push(L.getX(le)),ee.push(L.getX(le+1)),ee.push(L.getX(le+2))):(ee.push(L.getX(le+2)),ee.push(L.getX(le+1)),ee.push(L.getX(le)));ee.length/3!==j&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const re=$.clone();return re.setIndex(ee),re.clearGroups(),re}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",m),$}class GLTFLoader extends Loader$1{constructor(m){super(m),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(L){return new GLTFMaterialsClearcoatExtension(L)}),this.register(function(L){return new GLTFMaterialsDispersionExtension(L)}),this.register(function(L){return new GLTFTextureBasisUExtension(L)}),this.register(function(L){return new GLTFTextureWebPExtension(L)}),this.register(function(L){return new GLTFTextureAVIFExtension(L)}),this.register(function(L){return new GLTFMaterialsSheenExtension(L)}),this.register(function(L){return new GLTFMaterialsTransmissionExtension(L)}),this.register(function(L){return new GLTFMaterialsVolumeExtension(L)}),this.register(function(L){return new GLTFMaterialsIorExtension(L)}),this.register(function(L){return new GLTFMaterialsEmissiveStrengthExtension(L)}),this.register(function(L){return new GLTFMaterialsSpecularExtension(L)}),this.register(function(L){return new GLTFMaterialsIridescenceExtension(L)}),this.register(function(L){return new GLTFMaterialsAnisotropyExtension(L)}),this.register(function(L){return new GLTFMaterialsBumpExtension(L)}),this.register(function(L){return new GLTFLightsExtension(L)}),this.register(function(L){return new GLTFMeshoptCompression(L)}),this.register(function(L){return new GLTFMeshGpuInstancing(L)})}load(m,L,j,ee){const re=this;let le;if(this.resourcePath!=="")le=this.resourcePath;else if(this.path!==""){const Ee=LoaderUtils.extractUrlBase(m);le=LoaderUtils.resolveURL(Ee,this.path)}else le=LoaderUtils.extractUrlBase(m);this.manager.itemStart(m);const ve=function(Ee){ee?ee(Ee):console.error(Ee),re.manager.itemError(m),re.manager.itemEnd(m)},ye=new FileLoader(this.manager);ye.setPath(this.path),ye.setResponseType("arraybuffer"),ye.setRequestHeader(this.requestHeader),ye.setWithCredentials(this.withCredentials),ye.load(m,function(Ee){try{re.parse(Ee,le,function(Me){L(Me),re.manager.itemEnd(m)},ve)}catch(Me){ve(Me)}},j,ve)}setDRACOLoader(m){return this.dracoLoader=m,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(m){return this.ktx2Loader=m,this}setMeshoptDecoder(m){return this.meshoptDecoder=m,this}register(m){return this.pluginCallbacks.indexOf(m)===-1&&this.pluginCallbacks.push(m),this}unregister(m){return this.pluginCallbacks.indexOf(m)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(m),1),this}parse(m,L,j,ee){let re;const le={},ve={},ye=new TextDecoder;if(typeof m=="string")re=JSON.parse(m);else if(m instanceof ArrayBuffer)if(ye.decode(new Uint8Array(m,0,4))===BINARY_EXTENSION_HEADER_MAGIC){try{le[EXTENSIONS.KHR_BINARY_GLTF]=new GLTFBinaryExtension(m)}catch(Ce){ee&&ee(Ce);return}re=JSON.parse(le[EXTENSIONS.KHR_BINARY_GLTF].content)}else re=JSON.parse(ye.decode(m));else re=m;if(re.asset===void 0||re.asset.version[0]<2){ee&&ee(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const Ee=new GLTFParser(re,{path:L||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});Ee.fileLoader.setRequestHeader(this.requestHeader);for(let Me=0;Me<this.pluginCallbacks.length;Me++){const Ce=this.pluginCallbacks[Me](Ee);Ce.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),ve[Ce.name]=Ce,le[Ce.name]=!0}if(re.extensionsUsed)for(let Me=0;Me<re.extensionsUsed.length;++Me){const Ce=re.extensionsUsed[Me],De=re.extensionsRequired||[];switch(Ce){case EXTENSIONS.KHR_MATERIALS_UNLIT:le[Ce]=new GLTFMaterialsUnlitExtension;break;case EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:le[Ce]=new GLTFDracoMeshCompressionExtension(re,this.dracoLoader);break;case EXTENSIONS.KHR_TEXTURE_TRANSFORM:le[Ce]=new GLTFTextureTransformExtension;break;case EXTENSIONS.KHR_MESH_QUANTIZATION:le[Ce]=new GLTFMeshQuantizationExtension;break;default:De.indexOf(Ce)>=0&&ve[Ce]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+Ce+'".')}}Ee.setExtensions(le),Ee.setPlugins(ve),Ee.parse(j,ee)}parseAsync(m,L){const j=this;return new Promise(function(ee,re){j.parse(m,L,ee,re)})}}function GLTFRegistry(){let $={};return{get:function(m){return $[m]},add:function(m,L){$[m]=L},remove:function(m){delete $[m]},removeAll:function(){$={}}}}const EXTENSIONS={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class GLTFLightsExtension{constructor(m){this.parser=m,this.name=EXTENSIONS.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const m=this.parser,L=this.parser.json.nodes||[];for(let j=0,ee=L.length;j<ee;j++){const re=L[j];re.extensions&&re.extensions[this.name]&&re.extensions[this.name].light!==void 0&&m._addNodeRef(this.cache,re.extensions[this.name].light)}}_loadLight(m){const L=this.parser,j="light:"+m;let ee=L.cache.get(j);if(ee)return ee;const re=L.json,ye=((re.extensions&&re.extensions[this.name]||{}).lights||[])[m];let Ee;const Me=new Color(16777215);ye.color!==void 0&&Me.setRGB(ye.color[0],ye.color[1],ye.color[2],LinearSRGBColorSpace);const Ce=ye.range!==void 0?ye.range:0;switch(ye.type){case"directional":Ee=new DirectionalLight(Me),Ee.target.position.set(0,0,-1),Ee.add(Ee.target);break;case"point":Ee=new PointLight(Me),Ee.distance=Ce;break;case"spot":Ee=new SpotLight(Me),Ee.distance=Ce,ye.spot=ye.spot||{},ye.spot.innerConeAngle=ye.spot.innerConeAngle!==void 0?ye.spot.innerConeAngle:0,ye.spot.outerConeAngle=ye.spot.outerConeAngle!==void 0?ye.spot.outerConeAngle:Math.PI/4,Ee.angle=ye.spot.outerConeAngle,Ee.penumbra=1-ye.spot.innerConeAngle/ye.spot.outerConeAngle,Ee.target.position.set(0,0,-1),Ee.add(Ee.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+ye.type)}return Ee.position.set(0,0,0),Ee.decay=2,assignExtrasToUserData(Ee,ye),ye.intensity!==void 0&&(Ee.intensity=ye.intensity),Ee.name=L.createUniqueName(ye.name||"light_"+m),ee=Promise.resolve(Ee),L.cache.add(j,ee),ee}getDependency(m,L){if(m==="light")return this._loadLight(L)}createNodeAttachment(m){const L=this,j=this.parser,re=j.json.nodes[m],ve=(re.extensions&&re.extensions[this.name]||{}).light;return ve===void 0?null:this._loadLight(ve).then(function(ye){return j._getNodeRef(L.cache,ve,ye)})}}class GLTFMaterialsUnlitExtension{constructor(){this.name=EXTENSIONS.KHR_MATERIALS_UNLIT}getMaterialType(){return MeshBasicMaterial}extendParams(m,L,j){const ee=[];m.color=new Color(1,1,1),m.opacity=1;const re=L.pbrMetallicRoughness;if(re){if(Array.isArray(re.baseColorFactor)){const le=re.baseColorFactor;m.color.setRGB(le[0],le[1],le[2],LinearSRGBColorSpace),m.opacity=le[3]}re.baseColorTexture!==void 0&&ee.push(j.assignTexture(m,"map",re.baseColorTexture,SRGBColorSpace))}return Promise.all(ee)}}class GLTFMaterialsEmissiveStrengthExtension{constructor(m){this.parser=m,this.name=EXTENSIONS.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(m,L){const ee=this.parser.json.materials[m];if(!ee.extensions||!ee.extensions[this.name])return Promise.resolve();const re=ee.extensions[this.name].emissiveStrength;return re!==void 0&&(L.emissiveIntensity=re),Promise.resolve()}}class GLTFMaterialsClearcoatExtension{constructor(m){this.parser=m,this.name=EXTENSIONS.KHR_MATERIALS_CLEARCOAT}getMaterialType(m){const j=this.parser.json.materials[m];return!j.extensions||!j.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(m,L){const j=this.parser,ee=j.json.materials[m];if(!ee.extensions||!ee.extensions[this.name])return Promise.resolve();const re=[],le=ee.extensions[this.name];if(le.clearcoatFactor!==void 0&&(L.clearcoat=le.clearcoatFactor),le.clearcoatTexture!==void 0&&re.push(j.assignTexture(L,"clearcoatMap",le.clearcoatTexture)),le.clearcoatRoughnessFactor!==void 0&&(L.clearcoatRoughness=le.clearcoatRoughnessFactor),le.clearcoatRoughnessTexture!==void 0&&re.push(j.assignTexture(L,"clearcoatRoughnessMap",le.clearcoatRoughnessTexture)),le.clearcoatNormalTexture!==void 0&&(re.push(j.assignTexture(L,"clearcoatNormalMap",le.clearcoatNormalTexture)),le.clearcoatNormalTexture.scale!==void 0)){const ve=le.clearcoatNormalTexture.scale;L.clearcoatNormalScale=new Vector2(ve,ve)}return Promise.all(re)}}class GLTFMaterialsDispersionExtension{constructor(m){this.parser=m,this.name=EXTENSIONS.KHR_MATERIALS_DISPERSION}getMaterialType(m){const j=this.parser.json.materials[m];return!j.extensions||!j.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(m,L){const ee=this.parser.json.materials[m];if(!ee.extensions||!ee.extensions[this.name])return Promise.resolve();const re=ee.extensions[this.name];return L.dispersion=re.dispersion!==void 0?re.dispersion:0,Promise.resolve()}}class GLTFMaterialsIridescenceExtension{constructor(m){this.parser=m,this.name=EXTENSIONS.KHR_MATERIALS_IRIDESCENCE}getMaterialType(m){const j=this.parser.json.materials[m];return!j.extensions||!j.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(m,L){const j=this.parser,ee=j.json.materials[m];if(!ee.extensions||!ee.extensions[this.name])return Promise.resolve();const re=[],le=ee.extensions[this.name];return le.iridescenceFactor!==void 0&&(L.iridescence=le.iridescenceFactor),le.iridescenceTexture!==void 0&&re.push(j.assignTexture(L,"iridescenceMap",le.iridescenceTexture)),le.iridescenceIor!==void 0&&(L.iridescenceIOR=le.iridescenceIor),L.iridescenceThicknessRange===void 0&&(L.iridescenceThicknessRange=[100,400]),le.iridescenceThicknessMinimum!==void 0&&(L.iridescenceThicknessRange[0]=le.iridescenceThicknessMinimum),le.iridescenceThicknessMaximum!==void 0&&(L.iridescenceThicknessRange[1]=le.iridescenceThicknessMaximum),le.iridescenceThicknessTexture!==void 0&&re.push(j.assignTexture(L,"iridescenceThicknessMap",le.iridescenceThicknessTexture)),Promise.all(re)}}class GLTFMaterialsSheenExtension{constructor(m){this.parser=m,this.name=EXTENSIONS.KHR_MATERIALS_SHEEN}getMaterialType(m){const j=this.parser.json.materials[m];return!j.extensions||!j.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(m,L){const j=this.parser,ee=j.json.materials[m];if(!ee.extensions||!ee.extensions[this.name])return Promise.resolve();const re=[];L.sheenColor=new Color(0,0,0),L.sheenRoughness=0,L.sheen=1;const le=ee.extensions[this.name];if(le.sheenColorFactor!==void 0){const ve=le.sheenColorFactor;L.sheenColor.setRGB(ve[0],ve[1],ve[2],LinearSRGBColorSpace)}return le.sheenRoughnessFactor!==void 0&&(L.sheenRoughness=le.sheenRoughnessFactor),le.sheenColorTexture!==void 0&&re.push(j.assignTexture(L,"sheenColorMap",le.sheenColorTexture,SRGBColorSpace)),le.sheenRoughnessTexture!==void 0&&re.push(j.assignTexture(L,"sheenRoughnessMap",le.sheenRoughnessTexture)),Promise.all(re)}}class GLTFMaterialsTransmissionExtension{constructor(m){this.parser=m,this.name=EXTENSIONS.KHR_MATERIALS_TRANSMISSION}getMaterialType(m){const j=this.parser.json.materials[m];return!j.extensions||!j.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(m,L){const j=this.parser,ee=j.json.materials[m];if(!ee.extensions||!ee.extensions[this.name])return Promise.resolve();const re=[],le=ee.extensions[this.name];return le.transmissionFactor!==void 0&&(L.transmission=le.transmissionFactor),le.transmissionTexture!==void 0&&re.push(j.assignTexture(L,"transmissionMap",le.transmissionTexture)),Promise.all(re)}}class GLTFMaterialsVolumeExtension{constructor(m){this.parser=m,this.name=EXTENSIONS.KHR_MATERIALS_VOLUME}getMaterialType(m){const j=this.parser.json.materials[m];return!j.extensions||!j.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(m,L){const j=this.parser,ee=j.json.materials[m];if(!ee.extensions||!ee.extensions[this.name])return Promise.resolve();const re=[],le=ee.extensions[this.name];L.thickness=le.thicknessFactor!==void 0?le.thicknessFactor:0,le.thicknessTexture!==void 0&&re.push(j.assignTexture(L,"thicknessMap",le.thicknessTexture)),L.attenuationDistance=le.attenuationDistance||1/0;const ve=le.attenuationColor||[1,1,1];return L.attenuationColor=new Color().setRGB(ve[0],ve[1],ve[2],LinearSRGBColorSpace),Promise.all(re)}}class GLTFMaterialsIorExtension{constructor(m){this.parser=m,this.name=EXTENSIONS.KHR_MATERIALS_IOR}getMaterialType(m){const j=this.parser.json.materials[m];return!j.extensions||!j.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(m,L){const ee=this.parser.json.materials[m];if(!ee.extensions||!ee.extensions[this.name])return Promise.resolve();const re=ee.extensions[this.name];return L.ior=re.ior!==void 0?re.ior:1.5,Promise.resolve()}}class GLTFMaterialsSpecularExtension{constructor(m){this.parser=m,this.name=EXTENSIONS.KHR_MATERIALS_SPECULAR}getMaterialType(m){const j=this.parser.json.materials[m];return!j.extensions||!j.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(m,L){const j=this.parser,ee=j.json.materials[m];if(!ee.extensions||!ee.extensions[this.name])return Promise.resolve();const re=[],le=ee.extensions[this.name];L.specularIntensity=le.specularFactor!==void 0?le.specularFactor:1,le.specularTexture!==void 0&&re.push(j.assignTexture(L,"specularIntensityMap",le.specularTexture));const ve=le.specularColorFactor||[1,1,1];return L.specularColor=new Color().setRGB(ve[0],ve[1],ve[2],LinearSRGBColorSpace),le.specularColorTexture!==void 0&&re.push(j.assignTexture(L,"specularColorMap",le.specularColorTexture,SRGBColorSpace)),Promise.all(re)}}class GLTFMaterialsBumpExtension{constructor(m){this.parser=m,this.name=EXTENSIONS.EXT_MATERIALS_BUMP}getMaterialType(m){const j=this.parser.json.materials[m];return!j.extensions||!j.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(m,L){const j=this.parser,ee=j.json.materials[m];if(!ee.extensions||!ee.extensions[this.name])return Promise.resolve();const re=[],le=ee.extensions[this.name];return L.bumpScale=le.bumpFactor!==void 0?le.bumpFactor:1,le.bumpTexture!==void 0&&re.push(j.assignTexture(L,"bumpMap",le.bumpTexture)),Promise.all(re)}}class GLTFMaterialsAnisotropyExtension{constructor(m){this.parser=m,this.name=EXTENSIONS.KHR_MATERIALS_ANISOTROPY}getMaterialType(m){const j=this.parser.json.materials[m];return!j.extensions||!j.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(m,L){const j=this.parser,ee=j.json.materials[m];if(!ee.extensions||!ee.extensions[this.name])return Promise.resolve();const re=[],le=ee.extensions[this.name];return le.anisotropyStrength!==void 0&&(L.anisotropy=le.anisotropyStrength),le.anisotropyRotation!==void 0&&(L.anisotropyRotation=le.anisotropyRotation),le.anisotropyTexture!==void 0&&re.push(j.assignTexture(L,"anisotropyMap",le.anisotropyTexture)),Promise.all(re)}}class GLTFTextureBasisUExtension{constructor(m){this.parser=m,this.name=EXTENSIONS.KHR_TEXTURE_BASISU}loadTexture(m){const L=this.parser,j=L.json,ee=j.textures[m];if(!ee.extensions||!ee.extensions[this.name])return null;const re=ee.extensions[this.name],le=L.options.ktx2Loader;if(!le){if(j.extensionsRequired&&j.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return L.loadTextureImage(m,re.source,le)}}class GLTFTextureWebPExtension{constructor(m){this.parser=m,this.name=EXTENSIONS.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(m){const L=this.name,j=this.parser,ee=j.json,re=ee.textures[m];if(!re.extensions||!re.extensions[L])return null;const le=re.extensions[L],ve=ee.images[le.source];let ye=j.textureLoader;if(ve.uri){const Ee=j.options.manager.getHandler(ve.uri);Ee!==null&&(ye=Ee)}return this.detectSupport().then(function(Ee){if(Ee)return j.loadTextureImage(m,le.source,ye);if(ee.extensionsRequired&&ee.extensionsRequired.indexOf(L)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return j.loadTexture(m)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(m){const L=new Image;L.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",L.onload=L.onerror=function(){m(L.height===1)}})),this.isSupported}}class GLTFTextureAVIFExtension{constructor(m){this.parser=m,this.name=EXTENSIONS.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(m){const L=this.name,j=this.parser,ee=j.json,re=ee.textures[m];if(!re.extensions||!re.extensions[L])return null;const le=re.extensions[L],ve=ee.images[le.source];let ye=j.textureLoader;if(ve.uri){const Ee=j.options.manager.getHandler(ve.uri);Ee!==null&&(ye=Ee)}return this.detectSupport().then(function(Ee){if(Ee)return j.loadTextureImage(m,le.source,ye);if(ee.extensionsRequired&&ee.extensionsRequired.indexOf(L)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return j.loadTexture(m)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(m){const L=new Image;L.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",L.onload=L.onerror=function(){m(L.height===1)}})),this.isSupported}}class GLTFMeshoptCompression{constructor(m){this.name=EXTENSIONS.EXT_MESHOPT_COMPRESSION,this.parser=m}loadBufferView(m){const L=this.parser.json,j=L.bufferViews[m];if(j.extensions&&j.extensions[this.name]){const ee=j.extensions[this.name],re=this.parser.getDependency("buffer",ee.buffer),le=this.parser.options.meshoptDecoder;if(!le||!le.supported){if(L.extensionsRequired&&L.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return re.then(function(ve){const ye=ee.byteOffset||0,Ee=ee.byteLength||0,Me=ee.count,Ce=ee.byteStride,De=new Uint8Array(ve,ye,Ee);return le.decodeGltfBufferAsync?le.decodeGltfBufferAsync(Me,Ce,De,ee.mode,ee.filter).then(function(Be){return Be.buffer}):le.ready.then(function(){const Be=new ArrayBuffer(Me*Ce);return le.decodeGltfBuffer(new Uint8Array(Be),Me,Ce,De,ee.mode,ee.filter),Be})})}else return null}}class GLTFMeshGpuInstancing{constructor(m){this.name=EXTENSIONS.EXT_MESH_GPU_INSTANCING,this.parser=m}createNodeMesh(m){const L=this.parser.json,j=L.nodes[m];if(!j.extensions||!j.extensions[this.name]||j.mesh===void 0)return null;const ee=L.meshes[j.mesh];for(const Ee of ee.primitives)if(Ee.mode!==WEBGL_CONSTANTS.TRIANGLES&&Ee.mode!==WEBGL_CONSTANTS.TRIANGLE_STRIP&&Ee.mode!==WEBGL_CONSTANTS.TRIANGLE_FAN&&Ee.mode!==void 0)return null;const le=j.extensions[this.name].attributes,ve=[],ye={};for(const Ee in le)ve.push(this.parser.getDependency("accessor",le[Ee]).then(Me=>(ye[Ee]=Me,ye[Ee])));return ve.length<1?null:(ve.push(this.parser.createNodeMesh(m)),Promise.all(ve).then(Ee=>{const Me=Ee.pop(),Ce=Me.isGroup?Me.children:[Me],De=Ee[0].count,Be=[];for(const ke of Ce){const Fe=new Matrix4,Oe=new Vector3,Ne=new Quaternion,ze=new Vector3(1,1,1),$e=new InstancedMesh(ke.geometry,ke.material,De);for(let He=0;He<De;He++)ye.TRANSLATION&&Oe.fromBufferAttribute(ye.TRANSLATION,He),ye.ROTATION&&Ne.fromBufferAttribute(ye.ROTATION,He),ye.SCALE&&ze.fromBufferAttribute(ye.SCALE,He),$e.setMatrixAt(He,Fe.compose(Oe,Ne,ze));for(const He in ye)if(He==="_COLOR_0"){const We=ye[He];$e.instanceColor=new InstancedBufferAttribute(We.array,We.itemSize,We.normalized)}else He!=="TRANSLATION"&&He!=="ROTATION"&&He!=="SCALE"&&ke.geometry.setAttribute(He,ye[He]);Object3D.prototype.copy.call($e,ke),this.parser.assignFinalMaterial($e),Be.push($e)}return Me.isGroup?(Me.clear(),Me.add(...Be),Me):Be[0]}))}}const BINARY_EXTENSION_HEADER_MAGIC="glTF",BINARY_EXTENSION_HEADER_LENGTH=12,BINARY_EXTENSION_CHUNK_TYPES={JSON:1313821514,BIN:5130562};class GLTFBinaryExtension{constructor(m){this.name=EXTENSIONS.KHR_BINARY_GLTF,this.content=null,this.body=null;const L=new DataView(m,0,BINARY_EXTENSION_HEADER_LENGTH),j=new TextDecoder;if(this.header={magic:j.decode(new Uint8Array(m.slice(0,4))),version:L.getUint32(4,!0),length:L.getUint32(8,!0)},this.header.magic!==BINARY_EXTENSION_HEADER_MAGIC)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const ee=this.header.length-BINARY_EXTENSION_HEADER_LENGTH,re=new DataView(m,BINARY_EXTENSION_HEADER_LENGTH);let le=0;for(;le<ee;){const ve=re.getUint32(le,!0);le+=4;const ye=re.getUint32(le,!0);if(le+=4,ye===BINARY_EXTENSION_CHUNK_TYPES.JSON){const Ee=new Uint8Array(m,BINARY_EXTENSION_HEADER_LENGTH+le,ve);this.content=j.decode(Ee)}else if(ye===BINARY_EXTENSION_CHUNK_TYPES.BIN){const Ee=BINARY_EXTENSION_HEADER_LENGTH+le;this.body=m.slice(Ee,Ee+ve)}le+=ve}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class GLTFDracoMeshCompressionExtension{constructor(m,L){if(!L)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=EXTENSIONS.KHR_DRACO_MESH_COMPRESSION,this.json=m,this.dracoLoader=L,this.dracoLoader.preload()}decodePrimitive(m,L){const j=this.json,ee=this.dracoLoader,re=m.extensions[this.name].bufferView,le=m.extensions[this.name].attributes,ve={},ye={},Ee={};for(const Me in le){const Ce=ATTRIBUTES[Me]||Me.toLowerCase();ve[Ce]=le[Me]}for(const Me in m.attributes){const Ce=ATTRIBUTES[Me]||Me.toLowerCase();if(le[Me]!==void 0){const De=j.accessors[m.attributes[Me]],Be=WEBGL_COMPONENT_TYPES[De.componentType];Ee[Ce]=Be.name,ye[Ce]=De.normalized===!0}}return L.getDependency("bufferView",re).then(function(Me){return new Promise(function(Ce,De){ee.decodeDracoFile(Me,function(Be){for(const ke in Be.attributes){const Fe=Be.attributes[ke],Oe=ye[ke];Oe!==void 0&&(Fe.normalized=Oe)}Ce(Be)},ve,Ee,LinearSRGBColorSpace,De)})})}}class GLTFTextureTransformExtension{constructor(){this.name=EXTENSIONS.KHR_TEXTURE_TRANSFORM}extendTexture(m,L){return(L.texCoord===void 0||L.texCoord===m.channel)&&L.offset===void 0&&L.rotation===void 0&&L.scale===void 0||(m=m.clone(),L.texCoord!==void 0&&(m.channel=L.texCoord),L.offset!==void 0&&m.offset.fromArray(L.offset),L.rotation!==void 0&&(m.rotation=L.rotation),L.scale!==void 0&&m.repeat.fromArray(L.scale),m.needsUpdate=!0),m}}class GLTFMeshQuantizationExtension{constructor(){this.name=EXTENSIONS.KHR_MESH_QUANTIZATION}}class GLTFCubicSplineInterpolant extends Interpolant{constructor(m,L,j,ee){super(m,L,j,ee)}copySampleValue_(m){const L=this.resultBuffer,j=this.sampleValues,ee=this.valueSize,re=m*ee*3+ee;for(let le=0;le!==ee;le++)L[le]=j[re+le];return L}interpolate_(m,L,j,ee){const re=this.resultBuffer,le=this.sampleValues,ve=this.valueSize,ye=ve*2,Ee=ve*3,Me=ee-L,Ce=(j-L)/Me,De=Ce*Ce,Be=De*Ce,ke=m*Ee,Fe=ke-Ee,Oe=-2*Be+3*De,Ne=Be-De,ze=1-Oe,$e=Ne-De+Ce;for(let He=0;He!==ve;He++){const We=le[Fe+He+ve],qe=le[Fe+He+ye]*Me,Ye=le[ke+He+ve],Ze=le[ke+He]*Me;re[He]=ze*We+$e*qe+Oe*Ye+Ne*Ze}return re}}const _q=new Quaternion;class GLTFCubicSplineQuaternionInterpolant extends GLTFCubicSplineInterpolant{interpolate_(m,L,j,ee){const re=super.interpolate_(m,L,j,ee);return _q.fromArray(re).normalize().toArray(re),re}}const WEBGL_CONSTANTS={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},WEBGL_COMPONENT_TYPES={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},WEBGL_FILTERS={9728:NearestFilter,9729:LinearFilter,9984:NearestMipmapNearestFilter,9985:LinearMipmapNearestFilter,9986:NearestMipmapLinearFilter,9987:LinearMipmapLinearFilter},WEBGL_WRAPPINGS={33071:ClampToEdgeWrapping,33648:MirroredRepeatWrapping,10497:RepeatWrapping},WEBGL_TYPE_SIZES={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ATTRIBUTES={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},PATH_PROPERTIES={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},INTERPOLATION={CUBICSPLINE:void 0,LINEAR:InterpolateLinear,STEP:InterpolateDiscrete},ALPHA_MODES={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function createDefaultMaterial($){return $.DefaultMaterial===void 0&&($.DefaultMaterial=new MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:FrontSide})),$.DefaultMaterial}function addUnknownExtensionsToUserData($,m,L){for(const j in L.extensions)$[j]===void 0&&(m.userData.gltfExtensions=m.userData.gltfExtensions||{},m.userData.gltfExtensions[j]=L.extensions[j])}function assignExtrasToUserData($,m){m.extras!==void 0&&(typeof m.extras=="object"?Object.assign($.userData,m.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+m.extras))}function addMorphTargets($,m,L){let j=!1,ee=!1,re=!1;for(let Ee=0,Me=m.length;Ee<Me;Ee++){const Ce=m[Ee];if(Ce.POSITION!==void 0&&(j=!0),Ce.NORMAL!==void 0&&(ee=!0),Ce.COLOR_0!==void 0&&(re=!0),j&&ee&&re)break}if(!j&&!ee&&!re)return Promise.resolve($);const le=[],ve=[],ye=[];for(let Ee=0,Me=m.length;Ee<Me;Ee++){const Ce=m[Ee];if(j){const De=Ce.POSITION!==void 0?L.getDependency("accessor",Ce.POSITION):$.attributes.position;le.push(De)}if(ee){const De=Ce.NORMAL!==void 0?L.getDependency("accessor",Ce.NORMAL):$.attributes.normal;ve.push(De)}if(re){const De=Ce.COLOR_0!==void 0?L.getDependency("accessor",Ce.COLOR_0):$.attributes.color;ye.push(De)}}return Promise.all([Promise.all(le),Promise.all(ve),Promise.all(ye)]).then(function(Ee){const Me=Ee[0],Ce=Ee[1],De=Ee[2];return j&&($.morphAttributes.position=Me),ee&&($.morphAttributes.normal=Ce),re&&($.morphAttributes.color=De),$.morphTargetsRelative=!0,$})}function updateMorphTargets($,m){if($.updateMorphTargets(),m.weights!==void 0)for(let L=0,j=m.weights.length;L<j;L++)$.morphTargetInfluences[L]=m.weights[L];if(m.extras&&Array.isArray(m.extras.targetNames)){const L=m.extras.targetNames;if($.morphTargetInfluences.length===L.length){$.morphTargetDictionary={};for(let j=0,ee=L.length;j<ee;j++)$.morphTargetDictionary[L[j]]=j}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function createPrimitiveKey($){let m;const L=$.extensions&&$.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION];if(L?m="draco:"+L.bufferView+":"+L.indices+":"+createAttributesKey(L.attributes):m=$.indices+":"+createAttributesKey($.attributes)+":"+$.mode,$.targets!==void 0)for(let j=0,ee=$.targets.length;j<ee;j++)m+=":"+createAttributesKey($.targets[j]);return m}function createAttributesKey($){let m="";const L=Object.keys($).sort();for(let j=0,ee=L.length;j<ee;j++)m+=L[j]+":"+$[L[j]]+";";return m}function getNormalizedComponentScale($){switch($){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function getImageURIMimeType($){return $.search(/\.jpe?g($|\?)/i)>0||$.search(/^data\:image\/jpeg/)===0?"image/jpeg":$.search(/\.webp($|\?)/i)>0||$.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const _identityMatrix=new Matrix4;class GLTFParser{constructor(m={},L={}){this.json=m,this.extensions={},this.plugins={},this.options=L,this.cache=new GLTFRegistry,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let j=!1,ee=!1,re=-1;typeof navigator<"u"&&(j=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,ee=navigator.userAgent.indexOf("Firefox")>-1,re=ee?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||j||ee&&re<98?this.textureLoader=new TextureLoader(this.options.manager):this.textureLoader=new ImageBitmapLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(m){this.extensions=m}setPlugins(m){this.plugins=m}parse(m,L){const j=this,ee=this.json,re=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(le){return le._markDefs&&le._markDefs()}),Promise.all(this._invokeAll(function(le){return le.beforeRoot&&le.beforeRoot()})).then(function(){return Promise.all([j.getDependencies("scene"),j.getDependencies("animation"),j.getDependencies("camera")])}).then(function(le){const ve={scene:le[0][ee.scene||0],scenes:le[0],animations:le[1],cameras:le[2],asset:ee.asset,parser:j,userData:{}};return addUnknownExtensionsToUserData(re,ve,ee),assignExtrasToUserData(ve,ee),Promise.all(j._invokeAll(function(ye){return ye.afterRoot&&ye.afterRoot(ve)})).then(function(){for(const ye of ve.scenes)ye.updateMatrixWorld();m(ve)})}).catch(L)}_markDefs(){const m=this.json.nodes||[],L=this.json.skins||[],j=this.json.meshes||[];for(let ee=0,re=L.length;ee<re;ee++){const le=L[ee].joints;for(let ve=0,ye=le.length;ve<ye;ve++)m[le[ve]].isBone=!0}for(let ee=0,re=m.length;ee<re;ee++){const le=m[ee];le.mesh!==void 0&&(this._addNodeRef(this.meshCache,le.mesh),le.skin!==void 0&&(j[le.mesh].isSkinnedMesh=!0)),le.camera!==void 0&&this._addNodeRef(this.cameraCache,le.camera)}}_addNodeRef(m,L){L!==void 0&&(m.refs[L]===void 0&&(m.refs[L]=m.uses[L]=0),m.refs[L]++)}_getNodeRef(m,L,j){if(m.refs[L]<=1)return j;const ee=j.clone(),re=(le,ve)=>{const ye=this.associations.get(le);ye!=null&&this.associations.set(ve,ye);for(const[Ee,Me]of le.children.entries())re(Me,ve.children[Ee])};return re(j,ee),ee.name+="_instance_"+m.uses[L]++,ee}_invokeOne(m){const L=Object.values(this.plugins);L.push(this);for(let j=0;j<L.length;j++){const ee=m(L[j]);if(ee)return ee}return null}_invokeAll(m){const L=Object.values(this.plugins);L.unshift(this);const j=[];for(let ee=0;ee<L.length;ee++){const re=m(L[ee]);re&&j.push(re)}return j}getDependency(m,L){const j=m+":"+L;let ee=this.cache.get(j);if(!ee){switch(m){case"scene":ee=this.loadScene(L);break;case"node":ee=this._invokeOne(function(re){return re.loadNode&&re.loadNode(L)});break;case"mesh":ee=this._invokeOne(function(re){return re.loadMesh&&re.loadMesh(L)});break;case"accessor":ee=this.loadAccessor(L);break;case"bufferView":ee=this._invokeOne(function(re){return re.loadBufferView&&re.loadBufferView(L)});break;case"buffer":ee=this.loadBuffer(L);break;case"material":ee=this._invokeOne(function(re){return re.loadMaterial&&re.loadMaterial(L)});break;case"texture":ee=this._invokeOne(function(re){return re.loadTexture&&re.loadTexture(L)});break;case"skin":ee=this.loadSkin(L);break;case"animation":ee=this._invokeOne(function(re){return re.loadAnimation&&re.loadAnimation(L)});break;case"camera":ee=this.loadCamera(L);break;default:if(ee=this._invokeOne(function(re){return re!=this&&re.getDependency&&re.getDependency(m,L)}),!ee)throw new Error("Unknown type: "+m);break}this.cache.add(j,ee)}return ee}getDependencies(m){let L=this.cache.get(m);if(!L){const j=this,ee=this.json[m+(m==="mesh"?"es":"s")]||[];L=Promise.all(ee.map(function(re,le){return j.getDependency(m,le)})),this.cache.add(m,L)}return L}loadBuffer(m){const L=this.json.buffers[m],j=this.fileLoader;if(L.type&&L.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+L.type+" buffer type is not supported.");if(L.uri===void 0&&m===0)return Promise.resolve(this.extensions[EXTENSIONS.KHR_BINARY_GLTF].body);const ee=this.options;return new Promise(function(re,le){j.load(LoaderUtils.resolveURL(L.uri,ee.path),re,void 0,function(){le(new Error('THREE.GLTFLoader: Failed to load buffer "'+L.uri+'".'))})})}loadBufferView(m){const L=this.json.bufferViews[m];return this.getDependency("buffer",L.buffer).then(function(j){const ee=L.byteLength||0,re=L.byteOffset||0;return j.slice(re,re+ee)})}loadAccessor(m){const L=this,j=this.json,ee=this.json.accessors[m];if(ee.bufferView===void 0&&ee.sparse===void 0){const le=WEBGL_TYPE_SIZES[ee.type],ve=WEBGL_COMPONENT_TYPES[ee.componentType],ye=ee.normalized===!0,Ee=new ve(ee.count*le);return Promise.resolve(new BufferAttribute(Ee,le,ye))}const re=[];return ee.bufferView!==void 0?re.push(this.getDependency("bufferView",ee.bufferView)):re.push(null),ee.sparse!==void 0&&(re.push(this.getDependency("bufferView",ee.sparse.indices.bufferView)),re.push(this.getDependency("bufferView",ee.sparse.values.bufferView))),Promise.all(re).then(function(le){const ve=le[0],ye=WEBGL_TYPE_SIZES[ee.type],Ee=WEBGL_COMPONENT_TYPES[ee.componentType],Me=Ee.BYTES_PER_ELEMENT,Ce=Me*ye,De=ee.byteOffset||0,Be=ee.bufferView!==void 0?j.bufferViews[ee.bufferView].byteStride:void 0,ke=ee.normalized===!0;let Fe,Oe;if(Be&&Be!==Ce){const Ne=Math.floor(De/Be),ze="InterleavedBuffer:"+ee.bufferView+":"+ee.componentType+":"+Ne+":"+ee.count;let $e=L.cache.get(ze);$e||(Fe=new Ee(ve,Ne*Be,ee.count*Be/Me),$e=new InterleavedBuffer(Fe,Be/Me),L.cache.add(ze,$e)),Oe=new InterleavedBufferAttribute($e,ye,De%Be/Me,ke)}else ve===null?Fe=new Ee(ee.count*ye):Fe=new Ee(ve,De,ee.count*ye),Oe=new BufferAttribute(Fe,ye,ke);if(ee.sparse!==void 0){const Ne=WEBGL_TYPE_SIZES.SCALAR,ze=WEBGL_COMPONENT_TYPES[ee.sparse.indices.componentType],$e=ee.sparse.indices.byteOffset||0,He=ee.sparse.values.byteOffset||0,We=new ze(le[1],$e,ee.sparse.count*Ne),qe=new Ee(le[2],He,ee.sparse.count*ye);ve!==null&&(Oe=new BufferAttribute(Oe.array.slice(),Oe.itemSize,Oe.normalized));for(let Ye=0,Ze=We.length;Ye<Ze;Ye++){const Ke=We[Ye];if(Oe.setX(Ke,qe[Ye*ye]),ye>=2&&Oe.setY(Ke,qe[Ye*ye+1]),ye>=3&&Oe.setZ(Ke,qe[Ye*ye+2]),ye>=4&&Oe.setW(Ke,qe[Ye*ye+3]),ye>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return Oe})}loadTexture(m){const L=this.json,j=this.options,re=L.textures[m].source,le=L.images[re];let ve=this.textureLoader;if(le.uri){const ye=j.manager.getHandler(le.uri);ye!==null&&(ve=ye)}return this.loadTextureImage(m,re,ve)}loadTextureImage(m,L,j){const ee=this,re=this.json,le=re.textures[m],ve=re.images[L],ye=(ve.uri||ve.bufferView)+":"+le.sampler;if(this.textureCache[ye])return this.textureCache[ye];const Ee=this.loadImageSource(L,j).then(function(Me){Me.flipY=!1,Me.name=le.name||ve.name||"",Me.name===""&&typeof ve.uri=="string"&&ve.uri.startsWith("data:image/")===!1&&(Me.name=ve.uri);const De=(re.samplers||{})[le.sampler]||{};return Me.magFilter=WEBGL_FILTERS[De.magFilter]||LinearFilter,Me.minFilter=WEBGL_FILTERS[De.minFilter]||LinearMipmapLinearFilter,Me.wrapS=WEBGL_WRAPPINGS[De.wrapS]||RepeatWrapping,Me.wrapT=WEBGL_WRAPPINGS[De.wrapT]||RepeatWrapping,ee.associations.set(Me,{textures:m}),Me}).catch(function(){return null});return this.textureCache[ye]=Ee,Ee}loadImageSource(m,L){const j=this,ee=this.json,re=this.options;if(this.sourceCache[m]!==void 0)return this.sourceCache[m].then(Ce=>Ce.clone());const le=ee.images[m],ve=self.URL||self.webkitURL;let ye=le.uri||"",Ee=!1;if(le.bufferView!==void 0)ye=j.getDependency("bufferView",le.bufferView).then(function(Ce){Ee=!0;const De=new Blob([Ce],{type:le.mimeType});return ye=ve.createObjectURL(De),ye});else if(le.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+m+" is missing URI and bufferView");const Me=Promise.resolve(ye).then(function(Ce){return new Promise(function(De,Be){let ke=De;L.isImageBitmapLoader===!0&&(ke=function(Fe){const Oe=new Texture(Fe);Oe.needsUpdate=!0,De(Oe)}),L.load(LoaderUtils.resolveURL(Ce,re.path),ke,void 0,Be)})}).then(function(Ce){return Ee===!0&&ve.revokeObjectURL(ye),assignExtrasToUserData(Ce,le),Ce.userData.mimeType=le.mimeType||getImageURIMimeType(le.uri),Ce}).catch(function(Ce){throw console.error("THREE.GLTFLoader: Couldn't load texture",ye),Ce});return this.sourceCache[m]=Me,Me}assignTexture(m,L,j,ee){const re=this;return this.getDependency("texture",j.index).then(function(le){if(!le)return null;if(j.texCoord!==void 0&&j.texCoord>0&&(le=le.clone(),le.channel=j.texCoord),re.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM]){const ve=j.extensions!==void 0?j.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM]:void 0;if(ve){const ye=re.associations.get(le);le=re.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM].extendTexture(le,ve),re.associations.set(le,ye)}}return ee!==void 0&&(le.colorSpace=ee),m[L]=le,le})}assignFinalMaterial(m){const L=m.geometry;let j=m.material;const ee=L.attributes.tangent===void 0,re=L.attributes.color!==void 0,le=L.attributes.normal===void 0;if(m.isPoints){const ve="PointsMaterial:"+j.uuid;let ye=this.cache.get(ve);ye||(ye=new PointsMaterial,Material.prototype.copy.call(ye,j),ye.color.copy(j.color),ye.map=j.map,ye.sizeAttenuation=!1,this.cache.add(ve,ye)),j=ye}else if(m.isLine){const ve="LineBasicMaterial:"+j.uuid;let ye=this.cache.get(ve);ye||(ye=new LineBasicMaterial,Material.prototype.copy.call(ye,j),ye.color.copy(j.color),ye.map=j.map,this.cache.add(ve,ye)),j=ye}if(ee||re||le){let ve="ClonedMaterial:"+j.uuid+":";ee&&(ve+="derivative-tangents:"),re&&(ve+="vertex-colors:"),le&&(ve+="flat-shading:");let ye=this.cache.get(ve);ye||(ye=j.clone(),re&&(ye.vertexColors=!0),le&&(ye.flatShading=!0),ee&&(ye.normalScale&&(ye.normalScale.y*=-1),ye.clearcoatNormalScale&&(ye.clearcoatNormalScale.y*=-1)),this.cache.add(ve,ye),this.associations.set(ye,this.associations.get(j))),j=ye}m.material=j}getMaterialType(){return MeshStandardMaterial}loadMaterial(m){const L=this,j=this.json,ee=this.extensions,re=j.materials[m];let le;const ve={},ye=re.extensions||{},Ee=[];if(ye[EXTENSIONS.KHR_MATERIALS_UNLIT]){const Ce=ee[EXTENSIONS.KHR_MATERIALS_UNLIT];le=Ce.getMaterialType(),Ee.push(Ce.extendParams(ve,re,L))}else{const Ce=re.pbrMetallicRoughness||{};if(ve.color=new Color(1,1,1),ve.opacity=1,Array.isArray(Ce.baseColorFactor)){const De=Ce.baseColorFactor;ve.color.setRGB(De[0],De[1],De[2],LinearSRGBColorSpace),ve.opacity=De[3]}Ce.baseColorTexture!==void 0&&Ee.push(L.assignTexture(ve,"map",Ce.baseColorTexture,SRGBColorSpace)),ve.metalness=Ce.metallicFactor!==void 0?Ce.metallicFactor:1,ve.roughness=Ce.roughnessFactor!==void 0?Ce.roughnessFactor:1,Ce.metallicRoughnessTexture!==void 0&&(Ee.push(L.assignTexture(ve,"metalnessMap",Ce.metallicRoughnessTexture)),Ee.push(L.assignTexture(ve,"roughnessMap",Ce.metallicRoughnessTexture))),le=this._invokeOne(function(De){return De.getMaterialType&&De.getMaterialType(m)}),Ee.push(Promise.all(this._invokeAll(function(De){return De.extendMaterialParams&&De.extendMaterialParams(m,ve)})))}re.doubleSided===!0&&(ve.side=DoubleSide);const Me=re.alphaMode||ALPHA_MODES.OPAQUE;if(Me===ALPHA_MODES.BLEND?(ve.transparent=!0,ve.depthWrite=!1):(ve.transparent=!1,Me===ALPHA_MODES.MASK&&(ve.alphaTest=re.alphaCutoff!==void 0?re.alphaCutoff:.5)),re.normalTexture!==void 0&&le!==MeshBasicMaterial&&(Ee.push(L.assignTexture(ve,"normalMap",re.normalTexture)),ve.normalScale=new Vector2(1,1),re.normalTexture.scale!==void 0)){const Ce=re.normalTexture.scale;ve.normalScale.set(Ce,Ce)}if(re.occlusionTexture!==void 0&&le!==MeshBasicMaterial&&(Ee.push(L.assignTexture(ve,"aoMap",re.occlusionTexture)),re.occlusionTexture.strength!==void 0&&(ve.aoMapIntensity=re.occlusionTexture.strength)),re.emissiveFactor!==void 0&&le!==MeshBasicMaterial){const Ce=re.emissiveFactor;ve.emissive=new Color().setRGB(Ce[0],Ce[1],Ce[2],LinearSRGBColorSpace)}return re.emissiveTexture!==void 0&&le!==MeshBasicMaterial&&Ee.push(L.assignTexture(ve,"emissiveMap",re.emissiveTexture,SRGBColorSpace)),Promise.all(Ee).then(function(){const Ce=new le(ve);return re.name&&(Ce.name=re.name),assignExtrasToUserData(Ce,re),L.associations.set(Ce,{materials:m}),re.extensions&&addUnknownExtensionsToUserData(ee,Ce,re),Ce})}createUniqueName(m){const L=PropertyBinding.sanitizeNodeName(m||"");return L in this.nodeNamesUsed?L+"_"+ ++this.nodeNamesUsed[L]:(this.nodeNamesUsed[L]=0,L)}loadGeometries(m){const L=this,j=this.extensions,ee=this.primitiveCache;function re(ve){return j[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(ve,L).then(function(ye){return addPrimitiveAttributes(ye,ve,L)})}const le=[];for(let ve=0,ye=m.length;ve<ye;ve++){const Ee=m[ve],Me=createPrimitiveKey(Ee),Ce=ee[Me];if(Ce)le.push(Ce.promise);else{let De;Ee.extensions&&Ee.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION]?De=re(Ee):De=addPrimitiveAttributes(new BufferGeometry,Ee,L),ee[Me]={primitive:Ee,promise:De},le.push(De)}}return Promise.all(le)}loadMesh(m){const L=this,j=this.json,ee=this.extensions,re=j.meshes[m],le=re.primitives,ve=[];for(let ye=0,Ee=le.length;ye<Ee;ye++){const Me=le[ye].material===void 0?createDefaultMaterial(this.cache):this.getDependency("material",le[ye].material);ve.push(Me)}return ve.push(L.loadGeometries(le)),Promise.all(ve).then(function(ye){const Ee=ye.slice(0,ye.length-1),Me=ye[ye.length-1],Ce=[];for(let Be=0,ke=Me.length;Be<ke;Be++){const Fe=Me[Be],Oe=le[Be];let Ne;const ze=Ee[Be];if(Oe.mode===WEBGL_CONSTANTS.TRIANGLES||Oe.mode===WEBGL_CONSTANTS.TRIANGLE_STRIP||Oe.mode===WEBGL_CONSTANTS.TRIANGLE_FAN||Oe.mode===void 0)Ne=re.isSkinnedMesh===!0?new SkinnedMesh(Fe,ze):new Mesh(Fe,ze),Ne.isSkinnedMesh===!0&&Ne.normalizeSkinWeights(),Oe.mode===WEBGL_CONSTANTS.TRIANGLE_STRIP?Ne.geometry=toTrianglesDrawMode(Ne.geometry,TriangleStripDrawMode):Oe.mode===WEBGL_CONSTANTS.TRIANGLE_FAN&&(Ne.geometry=toTrianglesDrawMode(Ne.geometry,TriangleFanDrawMode));else if(Oe.mode===WEBGL_CONSTANTS.LINES)Ne=new LineSegments(Fe,ze);else if(Oe.mode===WEBGL_CONSTANTS.LINE_STRIP)Ne=new Line(Fe,ze);else if(Oe.mode===WEBGL_CONSTANTS.LINE_LOOP)Ne=new LineLoop(Fe,ze);else if(Oe.mode===WEBGL_CONSTANTS.POINTS)Ne=new Points(Fe,ze);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+Oe.mode);Object.keys(Ne.geometry.morphAttributes).length>0&&updateMorphTargets(Ne,re),Ne.name=L.createUniqueName(re.name||"mesh_"+m),assignExtrasToUserData(Ne,re),Oe.extensions&&addUnknownExtensionsToUserData(ee,Ne,Oe),L.assignFinalMaterial(Ne),Ce.push(Ne)}for(let Be=0,ke=Ce.length;Be<ke;Be++)L.associations.set(Ce[Be],{meshes:m,primitives:Be});if(Ce.length===1)return re.extensions&&addUnknownExtensionsToUserData(ee,Ce[0],re),Ce[0];const De=new Group;re.extensions&&addUnknownExtensionsToUserData(ee,De,re),L.associations.set(De,{meshes:m});for(let Be=0,ke=Ce.length;Be<ke;Be++)De.add(Ce[Be]);return De})}loadCamera(m){let L;const j=this.json.cameras[m],ee=j[j.type];if(!ee){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return j.type==="perspective"?L=new PerspectiveCamera(MathUtils.radToDeg(ee.yfov),ee.aspectRatio||1,ee.znear||1,ee.zfar||2e6):j.type==="orthographic"&&(L=new OrthographicCamera(-ee.xmag,ee.xmag,ee.ymag,-ee.ymag,ee.znear,ee.zfar)),j.name&&(L.name=this.createUniqueName(j.name)),assignExtrasToUserData(L,j),Promise.resolve(L)}loadSkin(m){const L=this.json.skins[m],j=[];for(let ee=0,re=L.joints.length;ee<re;ee++)j.push(this._loadNodeShallow(L.joints[ee]));return L.inverseBindMatrices!==void 0?j.push(this.getDependency("accessor",L.inverseBindMatrices)):j.push(null),Promise.all(j).then(function(ee){const re=ee.pop(),le=ee,ve=[],ye=[];for(let Ee=0,Me=le.length;Ee<Me;Ee++){const Ce=le[Ee];if(Ce){ve.push(Ce);const De=new Matrix4;re!==null&&De.fromArray(re.array,Ee*16),ye.push(De)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',L.joints[Ee])}return new Skeleton(ve,ye)})}loadAnimation(m){const L=this.json,j=this,ee=L.animations[m],re=ee.name?ee.name:"animation_"+m,le=[],ve=[],ye=[],Ee=[],Me=[];for(let Ce=0,De=ee.channels.length;Ce<De;Ce++){const Be=ee.channels[Ce],ke=ee.samplers[Be.sampler],Fe=Be.target,Oe=Fe.node,Ne=ee.parameters!==void 0?ee.parameters[ke.input]:ke.input,ze=ee.parameters!==void 0?ee.parameters[ke.output]:ke.output;Fe.node!==void 0&&(le.push(this.getDependency("node",Oe)),ve.push(this.getDependency("accessor",Ne)),ye.push(this.getDependency("accessor",ze)),Ee.push(ke),Me.push(Fe))}return Promise.all([Promise.all(le),Promise.all(ve),Promise.all(ye),Promise.all(Ee),Promise.all(Me)]).then(function(Ce){const De=Ce[0],Be=Ce[1],ke=Ce[2],Fe=Ce[3],Oe=Ce[4],Ne=[];for(let ze=0,$e=De.length;ze<$e;ze++){const He=De[ze],We=Be[ze],qe=ke[ze],Ye=Fe[ze],Ze=Oe[ze];if(He===void 0)continue;He.updateMatrix&&He.updateMatrix();const Ke=j._createAnimationTracks(He,We,qe,Ye,Ze);if(Ke)for(let rt=0;rt<Ke.length;rt++)Ne.push(Ke[rt])}return new AnimationClip(re,void 0,Ne)})}createNodeMesh(m){const L=this.json,j=this,ee=L.nodes[m];return ee.mesh===void 0?null:j.getDependency("mesh",ee.mesh).then(function(re){const le=j._getNodeRef(j.meshCache,ee.mesh,re);return ee.weights!==void 0&&le.traverse(function(ve){if(ve.isMesh)for(let ye=0,Ee=ee.weights.length;ye<Ee;ye++)ve.morphTargetInfluences[ye]=ee.weights[ye]}),le})}loadNode(m){const L=this.json,j=this,ee=L.nodes[m],re=j._loadNodeShallow(m),le=[],ve=ee.children||[];for(let Ee=0,Me=ve.length;Ee<Me;Ee++)le.push(j.getDependency("node",ve[Ee]));const ye=ee.skin===void 0?Promise.resolve(null):j.getDependency("skin",ee.skin);return Promise.all([re,Promise.all(le),ye]).then(function(Ee){const Me=Ee[0],Ce=Ee[1],De=Ee[2];De!==null&&Me.traverse(function(Be){Be.isSkinnedMesh&&Be.bind(De,_identityMatrix)});for(let Be=0,ke=Ce.length;Be<ke;Be++)Me.add(Ce[Be]);return Me})}_loadNodeShallow(m){const L=this.json,j=this.extensions,ee=this;if(this.nodeCache[m]!==void 0)return this.nodeCache[m];const re=L.nodes[m],le=re.name?ee.createUniqueName(re.name):"",ve=[],ye=ee._invokeOne(function(Ee){return Ee.createNodeMesh&&Ee.createNodeMesh(m)});return ye&&ve.push(ye),re.camera!==void 0&&ve.push(ee.getDependency("camera",re.camera).then(function(Ee){return ee._getNodeRef(ee.cameraCache,re.camera,Ee)})),ee._invokeAll(function(Ee){return Ee.createNodeAttachment&&Ee.createNodeAttachment(m)}).forEach(function(Ee){ve.push(Ee)}),this.nodeCache[m]=Promise.all(ve).then(function(Ee){let Me;if(re.isBone===!0?Me=new Bone:Ee.length>1?Me=new Group:Ee.length===1?Me=Ee[0]:Me=new Object3D,Me!==Ee[0])for(let Ce=0,De=Ee.length;Ce<De;Ce++)Me.add(Ee[Ce]);if(re.name&&(Me.userData.name=re.name,Me.name=le),assignExtrasToUserData(Me,re),re.extensions&&addUnknownExtensionsToUserData(j,Me,re),re.matrix!==void 0){const Ce=new Matrix4;Ce.fromArray(re.matrix),Me.applyMatrix4(Ce)}else re.translation!==void 0&&Me.position.fromArray(re.translation),re.rotation!==void 0&&Me.quaternion.fromArray(re.rotation),re.scale!==void 0&&Me.scale.fromArray(re.scale);return ee.associations.has(Me)||ee.associations.set(Me,{}),ee.associations.get(Me).nodes=m,Me}),this.nodeCache[m]}loadScene(m){const L=this.extensions,j=this.json.scenes[m],ee=this,re=new Group;j.name&&(re.name=ee.createUniqueName(j.name)),assignExtrasToUserData(re,j),j.extensions&&addUnknownExtensionsToUserData(L,re,j);const le=j.nodes||[],ve=[];for(let ye=0,Ee=le.length;ye<Ee;ye++)ve.push(ee.getDependency("node",le[ye]));return Promise.all(ve).then(function(ye){for(let Me=0,Ce=ye.length;Me<Ce;Me++)re.add(ye[Me]);const Ee=Me=>{const Ce=new Map;for(const[De,Be]of ee.associations)(De instanceof Material||De instanceof Texture)&&Ce.set(De,Be);return Me.traverse(De=>{const Be=ee.associations.get(De);Be!=null&&Ce.set(De,Be)}),Ce};return ee.associations=Ee(re),re})}_createAnimationTracks(m,L,j,ee,re){const le=[],ve=m.name?m.name:m.uuid,ye=[];PATH_PROPERTIES[re.path]===PATH_PROPERTIES.weights?m.traverse(function(De){De.morphTargetInfluences&&ye.push(De.name?De.name:De.uuid)}):ye.push(ve);let Ee;switch(PATH_PROPERTIES[re.path]){case PATH_PROPERTIES.weights:Ee=NumberKeyframeTrack;break;case PATH_PROPERTIES.rotation:Ee=QuaternionKeyframeTrack;break;case PATH_PROPERTIES.position:case PATH_PROPERTIES.scale:Ee=VectorKeyframeTrack;break;default:switch(j.itemSize){case 1:Ee=NumberKeyframeTrack;break;case 2:case 3:default:Ee=VectorKeyframeTrack;break}break}const Me=ee.interpolation!==void 0?INTERPOLATION[ee.interpolation]:InterpolateLinear,Ce=this._getArrayFromAccessor(j);for(let De=0,Be=ye.length;De<Be;De++){const ke=new Ee(ye[De]+"."+PATH_PROPERTIES[re.path],L.array,Ce,Me);ee.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(ke),le.push(ke)}return le}_getArrayFromAccessor(m){let L=m.array;if(m.normalized){const j=getNormalizedComponentScale(L.constructor),ee=new Float32Array(L.length);for(let re=0,le=L.length;re<le;re++)ee[re]=L[re]*j;L=ee}return L}_createCubicSplineTrackInterpolant(m){m.createInterpolant=function(j){const ee=this instanceof QuaternionKeyframeTrack?GLTFCubicSplineQuaternionInterpolant:GLTFCubicSplineInterpolant;return new ee(this.times,this.values,this.getValueSize()/3,j)},m.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function computeBounds($,m,L){const j=m.attributes,ee=new Box3;if(j.POSITION!==void 0){const ve=L.json.accessors[j.POSITION],ye=ve.min,Ee=ve.max;if(ye!==void 0&&Ee!==void 0){if(ee.set(new Vector3(ye[0],ye[1],ye[2]),new Vector3(Ee[0],Ee[1],Ee[2])),ve.normalized){const Me=getNormalizedComponentScale(WEBGL_COMPONENT_TYPES[ve.componentType]);ee.min.multiplyScalar(Me),ee.max.multiplyScalar(Me)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const re=m.targets;if(re!==void 0){const ve=new Vector3,ye=new Vector3;for(let Ee=0,Me=re.length;Ee<Me;Ee++){const Ce=re[Ee];if(Ce.POSITION!==void 0){const De=L.json.accessors[Ce.POSITION],Be=De.min,ke=De.max;if(Be!==void 0&&ke!==void 0){if(ye.setX(Math.max(Math.abs(Be[0]),Math.abs(ke[0]))),ye.setY(Math.max(Math.abs(Be[1]),Math.abs(ke[1]))),ye.setZ(Math.max(Math.abs(Be[2]),Math.abs(ke[2]))),De.normalized){const Fe=getNormalizedComponentScale(WEBGL_COMPONENT_TYPES[De.componentType]);ye.multiplyScalar(Fe)}ve.max(ye)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}ee.expandByVector(ve)}$.boundingBox=ee;const le=new Sphere;ee.getCenter(le.center),le.radius=ee.min.distanceTo(ee.max)/2,$.boundingSphere=le}function addPrimitiveAttributes($,m,L){const j=m.attributes,ee=[];function re(le,ve){return L.getDependency("accessor",le).then(function(ye){$.setAttribute(ve,ye)})}for(const le in j){const ve=ATTRIBUTES[le]||le.toLowerCase();ve in $.attributes||ee.push(re(j[le],ve))}if(m.indices!==void 0&&!$.index){const le=L.getDependency("accessor",m.indices).then(function(ve){$.setIndex(ve)});ee.push(le)}return ColorManagement.workingColorSpace!==LinearSRGBColorSpace&&"COLOR_0"in j&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${ColorManagement.workingColorSpace}" not supported.`),assignExtrasToUserData($,m),computeBounds($,m,L),Promise.all(ee).then(function(){return m.targets!==void 0?addMorphTargets($,m.targets,L):$})}const _resourcesFileSize={"/webgl/global/noises/rgb-noise.jpg":113222,"/webgl/home/textures/T_Random_45.jpg":67876,"/webgl/home/textures/T_Random_46.jpg":97359,"/webgl/home/textures/paint-swirl.jpg":121465,"/webgl/home/textures/T_Random_53.jpg":43987,"/webgl/home/textures/flowmap.jpg":5252,"/webgl/home/textures/clouds-shadow.jpg":112477,"/webgl/home/textures/water-normal.jpg":334428,"/webgl/home/textures/T_Random_48.jpg":55320,"/webgl/home/textures/crystal-env-map.jpg":35046,"/webgl/home/textures/env-map.jpg":18508,"/webgl/home/textures/egg/normal_low.png":615256,"/webgl/home/textures/egg/ao.png":238525,"/webgl/home/textures/glow.png":21664,"/webgl/home/textures/embryo_albedo.jpg":103484,"/webgl/home/textures/caustics.jpg":56133,"/webgl/home/textures/voronoi-clouds.png":56828,"/webgl/home/textures/SKY_XP.png":31748,"/webgl/home/textures/planets/planet_01.jpg":135076,"/webgl/home/textures/planets/planet_02.jpg":151593,"/webgl/home/textures/planets/planet_03.jpg":134256,"/webgl/home/textures/planets/planet_04.jpg":120322,"/webgl/home/textures/dust-particle.jpg":12595,"/webgl/msdf/OCMikolaDemo-Regular.json":24183,"/webgl/msdf/OCMikolaDemo-Regular.png":44795,"/webgl/home/gltf/master-scene-compressed.glb":8991464,"/webgl/proto/transmission-material/embryo.glb":76544,"/webgl/home/gltf/eggExplosion.glb":179188,"/webgl/home/lut/menu.3DL":7026,"/webgl/home/lut/scene_1.3DL":4747,"/webgl/home/lut/scene_2.3DL":4809,"/webgl/home/lut/scene_3.3DL":4946,"/webgl/home/lut/paint_1.3DL":4749,"/webgl/home/lut/paint_2.3DL":7026,"/webgl/home/lut/paint_3.3DL":5174,"/webgl/home/lut/paint_4.3DL":4834,"/webgl/home/lut/paint_5.3DL":4946};class ThreeGLTFDracoLoader extends Loader{constructor(m={}){super(m),this._dracoDecoderPath=m.dracoDecoderPath,this.progresses={},this._gltfLoader=new GLTFLoader,this._dracoDecoderPath&&(this._dracoLoader=new DRACOLoader,this._dracoLoader.setDecoderPath(this._dracoDecoderPath),this._gltfLoader.setDRACOLoader(this._dracoLoader))}load({path:m}){return this.progresses[m]=0,new Promise((j,ee)=>{this._gltfLoader.load(m,j,re=>{this.progresses[m]=re.loaded/_resourcesFileSize[m]},ee)})}}const _object_pattern=/^[og]\s*(.+)?/,_material_library_pattern=/^mtllib /,_material_use_pattern=/^usemtl /,_map_use_pattern=/^usemap /,_face_vertex_data_separator_pattern=/\s+/,_vA=new Vector3,_vB=new Vector3,_vC=new Vector3,_ab=new Vector3,_cb=new Vector3,_color=new Color;function ParserState(){const $={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(m,L){if(this.object&&this.object.fromDeclaration===!1){this.object.name=m,this.object.fromDeclaration=L!==!1;return}const j=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:m||"",fromDeclaration:L!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(ee,re){const le=this._finalize(!1);le&&(le.inherited||le.groupCount<=0)&&this.materials.splice(le.index,1);const ve={index:this.materials.length,name:ee||"",mtllib:Array.isArray(re)&&re.length>0?re[re.length-1]:"",smooth:le!==void 0?le.smooth:this.smooth,groupStart:le!==void 0?le.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(ye){const Ee={index:typeof ye=="number"?ye:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return Ee.clone=this.clone.bind(Ee),Ee}};return this.materials.push(ve),ve},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(ee){const re=this.currentMaterial();if(re&&re.groupEnd===-1&&(re.groupEnd=this.geometry.vertices.length/3,re.groupCount=re.groupEnd-re.groupStart,re.inherited=!1),ee&&this.materials.length>1)for(let le=this.materials.length-1;le>=0;le--)this.materials[le].groupCount<=0&&this.materials.splice(le,1);return ee&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),re}},j&&j.name&&typeof j.clone=="function"){const ee=j.clone(0);ee.inherited=!0,this.object.materials.push(ee)}this.objects.push(this.object)},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(m,L){const j=parseInt(m,10);return(j>=0?j-1:j+L/3)*3},parseNormalIndex:function(m,L){const j=parseInt(m,10);return(j>=0?j-1:j+L/3)*3},parseUVIndex:function(m,L){const j=parseInt(m,10);return(j>=0?j-1:j+L/2)*2},addVertex:function(m,L,j){const ee=this.vertices,re=this.object.geometry.vertices;re.push(ee[m+0],ee[m+1],ee[m+2]),re.push(ee[L+0],ee[L+1],ee[L+2]),re.push(ee[j+0],ee[j+1],ee[j+2])},addVertexPoint:function(m){const L=this.vertices;this.object.geometry.vertices.push(L[m+0],L[m+1],L[m+2])},addVertexLine:function(m){const L=this.vertices;this.object.geometry.vertices.push(L[m+0],L[m+1],L[m+2])},addNormal:function(m,L,j){const ee=this.normals,re=this.object.geometry.normals;re.push(ee[m+0],ee[m+1],ee[m+2]),re.push(ee[L+0],ee[L+1],ee[L+2]),re.push(ee[j+0],ee[j+1],ee[j+2])},addFaceNormal:function(m,L,j){const ee=this.vertices,re=this.object.geometry.normals;_vA.fromArray(ee,m),_vB.fromArray(ee,L),_vC.fromArray(ee,j),_cb.subVectors(_vC,_vB),_ab.subVectors(_vA,_vB),_cb.cross(_ab),_cb.normalize(),re.push(_cb.x,_cb.y,_cb.z),re.push(_cb.x,_cb.y,_cb.z),re.push(_cb.x,_cb.y,_cb.z)},addColor:function(m,L,j){const ee=this.colors,re=this.object.geometry.colors;ee[m]!==void 0&&re.push(ee[m+0],ee[m+1],ee[m+2]),ee[L]!==void 0&&re.push(ee[L+0],ee[L+1],ee[L+2]),ee[j]!==void 0&&re.push(ee[j+0],ee[j+1],ee[j+2])},addUV:function(m,L,j){const ee=this.uvs,re=this.object.geometry.uvs;re.push(ee[m+0],ee[m+1]),re.push(ee[L+0],ee[L+1]),re.push(ee[j+0],ee[j+1])},addDefaultUV:function(){const m=this.object.geometry.uvs;m.push(0,0),m.push(0,0),m.push(0,0)},addUVLine:function(m){const L=this.uvs;this.object.geometry.uvs.push(L[m+0],L[m+1])},addFace:function(m,L,j,ee,re,le,ve,ye,Ee){const Me=this.vertices.length;let Ce=this.parseVertexIndex(m,Me),De=this.parseVertexIndex(L,Me),Be=this.parseVertexIndex(j,Me);if(this.addVertex(Ce,De,Be),this.addColor(Ce,De,Be),ve!==void 0&&ve!==""){const ke=this.normals.length;Ce=this.parseNormalIndex(ve,ke),De=this.parseNormalIndex(ye,ke),Be=this.parseNormalIndex(Ee,ke),this.addNormal(Ce,De,Be)}else this.addFaceNormal(Ce,De,Be);if(ee!==void 0&&ee!==""){const ke=this.uvs.length;Ce=this.parseUVIndex(ee,ke),De=this.parseUVIndex(re,ke),Be=this.parseUVIndex(le,ke),this.addUV(Ce,De,Be),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(m){this.object.geometry.type="Points";const L=this.vertices.length;for(let j=0,ee=m.length;j<ee;j++){const re=this.parseVertexIndex(m[j],L);this.addVertexPoint(re),this.addColor(re)}},addLineGeometry:function(m,L){this.object.geometry.type="Line";const j=this.vertices.length,ee=this.uvs.length;for(let re=0,le=m.length;re<le;re++)this.addVertexLine(this.parseVertexIndex(m[re],j));for(let re=0,le=L.length;re<le;re++)this.addUVLine(this.parseUVIndex(L[re],ee))}};return $.startObject("",!1),$}class OBJLoader extends Loader$1{constructor(m){super(m),this.materials=null}load(m,L,j,ee){const re=this,le=new FileLoader(this.manager);le.setPath(this.path),le.setRequestHeader(this.requestHeader),le.setWithCredentials(this.withCredentials),le.load(m,function(ve){try{L(re.parse(ve))}catch(ye){ee?ee(ye):console.error(ye),re.manager.itemError(m)}},j,ee)}setMaterials(m){return this.materials=m,this}parse(m){const L=new ParserState;m.indexOf(`\r
`)!==-1&&(m=m.replace(/\r\n/g,`
`)),m.indexOf(`\\
`)!==-1&&(m=m.replace(/\\\n/g,""));const j=m.split(`
`);let ee=[];for(let ve=0,ye=j.length;ve<ye;ve++){const Ee=j[ve].trimStart();if(Ee.length===0)continue;const Me=Ee.charAt(0);if(Me!=="#")if(Me==="v"){const Ce=Ee.split(_face_vertex_data_separator_pattern);switch(Ce[0]){case"v":L.vertices.push(parseFloat(Ce[1]),parseFloat(Ce[2]),parseFloat(Ce[3])),Ce.length>=7?(_color.setRGB(parseFloat(Ce[4]),parseFloat(Ce[5]),parseFloat(Ce[6])).convertSRGBToLinear(),L.colors.push(_color.r,_color.g,_color.b)):L.colors.push(void 0,void 0,void 0);break;case"vn":L.normals.push(parseFloat(Ce[1]),parseFloat(Ce[2]),parseFloat(Ce[3]));break;case"vt":L.uvs.push(parseFloat(Ce[1]),parseFloat(Ce[2]));break}}else if(Me==="f"){const De=Ee.slice(1).trim().split(_face_vertex_data_separator_pattern),Be=[];for(let Fe=0,Oe=De.length;Fe<Oe;Fe++){const Ne=De[Fe];if(Ne.length>0){const ze=Ne.split("/");Be.push(ze)}}const ke=Be[0];for(let Fe=1,Oe=Be.length-1;Fe<Oe;Fe++){const Ne=Be[Fe],ze=Be[Fe+1];L.addFace(ke[0],Ne[0],ze[0],ke[1],Ne[1],ze[1],ke[2],Ne[2],ze[2])}}else if(Me==="l"){const Ce=Ee.substring(1).trim().split(" ");let De=[];const Be=[];if(Ee.indexOf("/")===-1)De=Ce;else for(let ke=0,Fe=Ce.length;ke<Fe;ke++){const Oe=Ce[ke].split("/");Oe[0]!==""&&De.push(Oe[0]),Oe[1]!==""&&Be.push(Oe[1])}L.addLineGeometry(De,Be)}else if(Me==="p"){const De=Ee.slice(1).trim().split(" ");L.addPointGeometry(De)}else if((ee=_object_pattern.exec(Ee))!==null){const Ce=(" "+ee[0].slice(1).trim()).slice(1);L.startObject(Ce)}else if(_material_use_pattern.test(Ee))L.object.startMaterial(Ee.substring(7).trim(),L.materialLibraries);else if(_material_library_pattern.test(Ee))L.materialLibraries.push(Ee.substring(7).trim());else if(_map_use_pattern.test(Ee))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if(Me==="s"){if(ee=Ee.split(" "),ee.length>1){const De=ee[1].trim().toLowerCase();L.object.smooth=De!=="0"&&De!=="off"}else L.object.smooth=!0;const Ce=L.object.currentMaterial();Ce&&(Ce.smooth=L.object.smooth)}else{if(Ee==="\0")continue;console.warn('THREE.OBJLoader: Unexpected line: "'+Ee+'"')}}L.finalize();const re=new Group;if(re.materialLibraries=[].concat(L.materialLibraries),!(L.objects.length===1&&L.objects[0].geometry.vertices.length===0)===!0)for(let ve=0,ye=L.objects.length;ve<ye;ve++){const Ee=L.objects[ve],Me=Ee.geometry,Ce=Ee.materials,De=Me.type==="Line",Be=Me.type==="Points";let ke=!1;if(Me.vertices.length===0)continue;const Fe=new BufferGeometry;Fe.setAttribute("position",new Float32BufferAttribute(Me.vertices,3)),Me.normals.length>0&&Fe.setAttribute("normal",new Float32BufferAttribute(Me.normals,3)),Me.colors.length>0&&(ke=!0,Fe.setAttribute("color",new Float32BufferAttribute(Me.colors,3))),Me.hasUVIndices===!0&&Fe.setAttribute("uv",new Float32BufferAttribute(Me.uvs,2));const Oe=[];for(let ze=0,$e=Ce.length;ze<$e;ze++){const He=Ce[ze],We=He.name+"_"+He.smooth+"_"+ke;let qe=L.materials[We];if(this.materials!==null){if(qe=this.materials.create(He.name),De&&qe&&!(qe instanceof LineBasicMaterial)){const Ye=new LineBasicMaterial;Material.prototype.copy.call(Ye,qe),Ye.color.copy(qe.color),qe=Ye}else if(Be&&qe&&!(qe instanceof PointsMaterial)){const Ye=new PointsMaterial({size:10,sizeAttenuation:!1});Material.prototype.copy.call(Ye,qe),Ye.color.copy(qe.color),Ye.map=qe.map,qe=Ye}}qe===void 0&&(De?qe=new LineBasicMaterial:Be?qe=new PointsMaterial({size:1,sizeAttenuation:!1}):qe=new MeshPhongMaterial,qe.name=He.name,qe.flatShading=!He.smooth,qe.vertexColors=ke,L.materials[We]=qe),Oe.push(qe)}let Ne;if(Oe.length>1){for(let ze=0,$e=Ce.length;ze<$e;ze++){const He=Ce[ze];Fe.addGroup(He.groupStart,He.groupCount,ze)}De?Ne=new LineSegments(Fe,Oe):Be?Ne=new Points(Fe,Oe):Ne=new Mesh(Fe,Oe)}else De?Ne=new LineSegments(Fe,Oe[0]):Be?Ne=new Points(Fe,Oe[0]):Ne=new Mesh(Fe,Oe[0]);Ne.name=Ee.name,re.add(Ne)}else if(L.vertices.length>0){const ve=new PointsMaterial({size:1,sizeAttenuation:!1}),ye=new BufferGeometry;ye.setAttribute("position",new Float32BufferAttribute(L.vertices,3)),L.colors.length>0&&L.colors[0]!==void 0&&(ye.setAttribute("color",new Float32BufferAttribute(L.colors,3)),ve.vertexColors=!0);const Ee=new Points(ye,ve);re.add(Ee)}return re}}function r$4($,m){for(var L=0;L<m.length;L++){var j=m[L];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty($,j.key,j)}}function n$6($){return(n$6=Object.setPrototypeOf?Object.getPrototypeOf:function(m){return m.__proto__||Object.getPrototypeOf(m)})($)}function o$5($,m){return(o$5=Object.setPrototypeOf||function(L,j){return L.__proto__=j,L})($,m)}function u$5($,m){return!m||typeof m!="object"&&typeof m!="function"?function(L){if(L===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return L}($):m}function c$5($){var m=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var L,j=n$6($);if(m){var ee=n$6(this).constructor;L=Reflect.construct(j,arguments,ee)}else L=j.apply(this,arguments);return u$5(this,L)}}var i$6=function($){(function(re,le){if(typeof le!="function"&&le!==null)throw new TypeError("Super expression must either be null or a function");re.prototype=Object.create(le&&le.prototype,{constructor:{value:re,writable:!0,configurable:!0}}),le&&o$5(re,le)})(ee,Loader);var m,L,j=c$5(ee);function ee(re){var le;return function(ve,ye){if(!(ve instanceof ye))throw new TypeError("Cannot call a class as a function")}(this,ee),(le=j.call(this,re))._loader=new OBJLoader,le}return m=ee,(L=[{key:"load",value:function(re){var le=this,ve=re.path;return new Promise(function(ye,Ee){le._loader.load(ve,ye,null,Ee)})}}])&&r$4(m.prototype,L),ee}();function r$3($,m){for(var L=0;L<m.length;L++){var j=m[L];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty($,j.key,j)}}function n$5($){return(n$5=Object.setPrototypeOf?Object.getPrototypeOf:function(m){return m.__proto__||Object.getPrototypeOf(m)})($)}function o$4($,m){return(o$4=Object.setPrototypeOf||function(L,j){return L.__proto__=j,L})($,m)}function u$4($,m){return!m||typeof m!="object"&&typeof m!="function"?function(L){if(L===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return L}($):m}function c$4($){var m=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var L,j=n$5($);if(m){var ee=n$5(this).constructor;L=Reflect.construct(j,arguments,ee)}else L=j.apply(this,arguments);return u$4(this,L)}}var i$5=function($){(function(re,le){if(typeof le!="function"&&le!==null)throw new TypeError("Super expression must either be null or a function");re.prototype=Object.create(le&&le.prototype,{constructor:{value:re,writable:!0,configurable:!0}}),le&&o$4(re,le)})(ee,Loader);var m,L,j=c$4(ee);function ee(re){var le;return function(ve,ye){if(!(ve instanceof ye))throw new TypeError("Cannot call a class as a function")}(this,ee),(le=j.call(this,re))._loader=new TextureLoader,le}return m=ee,(L=[{key:"load",value:function(re){var le=this,ve=re.path;return new Promise(function(ye,Ee){le._loader.load(ve,ye,null,Ee)})}}])&&r$3(m.prototype,L),ee}();function t$3($,m){if(!($ instanceof m))throw new TypeError("Cannot call a class as a function")}function r$2($,m){for(var L=0;L<m.length;L++){var j=m[L];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty($,j.key,j)}}function n$4($){return(n$4=Object.setPrototypeOf?Object.getPrototypeOf:function(m){return m.__proto__||Object.getPrototypeOf(m)})($)}function o$3($,m){return(o$3=Object.setPrototypeOf||function(L,j){return L.__proto__=j,L})($,m)}function c$3($,m){return!m||typeof m!="object"&&typeof m!="function"?function(L){if(L===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return L}($):m}function u$3($){var m=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var L,j=n$4($);if(m){var ee=n$4(this).constructor;L=Reflect.construct(j,arguments,ee)}else L=j.apply(this,arguments);return c$3(this,L)}}var i$4=function($){(function(re,le){if(typeof le!="function"&&le!==null)throw new TypeError("Super expression must either be null or a function");re.prototype=Object.create(le&&le.prototype,{constructor:{value:re,writable:!0,configurable:!0}}),le&&o$3(re,le)})(ee,Loader);var m,L,j=u$3(ee);function ee(){return t$3(this,ee),j.apply(this,arguments)}return m=ee,(L=[{key:"load",value:function(re){var le=re.path,ve=re.name,ye=new Image,Ee=new Promise(function(Me,Ce){ye.addEventListener("load",function(){Me(ye)}),ye.addEventListener("error",function(De){Ce(new Error('ImageLoader : Error while loading resource "'.concat(ve,'"')))})});return ye.src=le,Ee}}])&&r$2(m.prototype,L),ee}();/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.8.2
*/var u8=Uint8Array,u16=Uint16Array,i32=Int32Array,fleb=new u8([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fdeb=new u8([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),clim=new u8([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),freb=function($,m){for(var L=new u16(31),j=0;j<31;++j)L[j]=m+=1<<$[j-1];for(var ee=new i32(L[30]),j=1;j<30;++j)for(var re=L[j];re<L[j+1];++re)ee[re]=re-L[j]<<5|j;return{b:L,r:ee}},_a=freb(fleb,2),fl=_a.b,revfl=_a.r;fl[28]=258,revfl[258]=28;var _b=freb(fdeb,0),fd=_b.b,rev=new u16(32768);for(var i$3=0;i$3<32768;++i$3){var x$1=(i$3&43690)>>1|(i$3&21845)<<1;x$1=(x$1&52428)>>2|(x$1&13107)<<2,x$1=(x$1&61680)>>4|(x$1&3855)<<4,rev[i$3]=((x$1&65280)>>8|(x$1&255)<<8)>>1}var hMap=function($,m,L){for(var j=$.length,ee=0,re=new u16(m);ee<j;++ee)$[ee]&&++re[$[ee]-1];var le=new u16(m);for(ee=1;ee<m;++ee)le[ee]=le[ee-1]+re[ee-1]<<1;var ve;if(L){ve=new u16(1<<m);var ye=15-m;for(ee=0;ee<j;++ee)if($[ee])for(var Ee=ee<<4|$[ee],Me=m-$[ee],Ce=le[$[ee]-1]++<<Me,De=Ce|(1<<Me)-1;Ce<=De;++Ce)ve[rev[Ce]>>ye]=Ee}else for(ve=new u16(j),ee=0;ee<j;++ee)$[ee]&&(ve[ee]=rev[le[$[ee]-1]++]>>15-$[ee]);return ve},flt=new u8(288);for(var i$3=0;i$3<144;++i$3)flt[i$3]=8;for(var i$3=144;i$3<256;++i$3)flt[i$3]=9;for(var i$3=256;i$3<280;++i$3)flt[i$3]=7;for(var i$3=280;i$3<288;++i$3)flt[i$3]=8;var fdt=new u8(32);for(var i$3=0;i$3<32;++i$3)fdt[i$3]=5;var flrm=hMap(flt,9,1),fdrm=hMap(fdt,5,1),max$1=function($){for(var m=$[0],L=1;L<$.length;++L)$[L]>m&&(m=$[L]);return m},bits=function($,m,L){var j=m/8|0;return($[j]|$[j+1]<<8)>>(m&7)&L},bits16=function($,m){var L=m/8|0;return($[L]|$[L+1]<<8|$[L+2]<<16)>>(m&7)},shft=function($){return($+7)/8|0},slc=function($,m,L){return(m==null||m<0)&&(m=0),(L==null||L>$.length)&&(L=$.length),new u8($.subarray(m,L))},ec=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],err=function($,m,L){var j=new Error(m||ec[$]);if(j.code=$,Error.captureStackTrace&&Error.captureStackTrace(j,err),!L)throw j;return j},inflt=function($,m,L,j){var ee=$.length,re=j?j.length:0;if(!ee||m.f&&!m.l)return L||new u8(0);var le=!L,ve=le||m.i!=2,ye=m.i;le&&(L=new u8(ee*3));var Ee=function(kt){var Mn=L.length;if(kt>Mn){var wt=new u8(Math.max(Mn*2,kt));wt.set(L),L=wt}},Me=m.f||0,Ce=m.p||0,De=m.b||0,Be=m.l,ke=m.d,Fe=m.m,Oe=m.n,Ne=ee*8;do{if(!Be){Me=bits($,Ce,1);var ze=bits($,Ce+1,3);if(Ce+=3,ze)if(ze==1)Be=flrm,ke=fdrm,Fe=9,Oe=5;else if(ze==2){var qe=bits($,Ce,31)+257,Ye=bits($,Ce+10,15)+4,Ze=qe+bits($,Ce+5,31)+1;Ce+=14;for(var Ke=new u8(Ze),rt=new u8(19),ft=0;ft<Ye;++ft)rt[clim[ft]]=bits($,Ce+ft*3,7);Ce+=Ye*3;for(var mt=max$1(rt),Et=(1<<mt)-1,bt=hMap(rt,mt,1),ft=0;ft<Ze;){var Ct=bt[bits($,Ce,Et)];Ce+=Ct&15;var $e=Ct>>4;if($e<16)Ke[ft++]=$e;else{var st=0,at=0;for($e==16?(at=3+bits($,Ce,3),Ce+=2,st=Ke[ft-1]):$e==17?(at=3+bits($,Ce,7),Ce+=3):$e==18&&(at=11+bits($,Ce,127),Ce+=7);at--;)Ke[ft++]=st}}var Xe=Ke.subarray(0,qe),ht=Ke.subarray(qe);Fe=max$1(Xe),Oe=max$1(ht),Be=hMap(Xe,Fe,1),ke=hMap(ht,Oe,1)}else err(1);else{var $e=shft(Ce)+4,He=$[$e-4]|$[$e-3]<<8,We=$e+He;if(We>ee){ye&&err(0);break}ve&&Ee(De+He),L.set($.subarray($e,We),De),m.b=De+=He,m.p=Ce=We*8,m.f=Me;continue}if(Ce>Ne){ye&&err(0);break}}ve&&Ee(De+131072);for(var Bt=(1<<Fe)-1,Dt=(1<<Oe)-1,Jt=Ce;;Jt=Ce){var st=Be[bits16($,Ce)&Bt],tn=st>>4;if(Ce+=st&15,Ce>Ne){ye&&err(0);break}if(st||err(2),tn<256)L[De++]=tn;else if(tn==256){Jt=Ce,Be=null;break}else{var zt=tn-254;if(tn>264){var ft=tn-257,Vt=fleb[ft];zt=bits($,Ce,(1<<Vt)-1)+fl[ft],Ce+=Vt}var Mt=ke[bits16($,Ce)&Dt],Tt=Mt>>4;Mt||err(3),Ce+=Mt&15;var ht=fd[Tt];if(Tt>3){var Vt=fdeb[Tt];ht+=bits16($,Ce)&(1<<Vt)-1,Ce+=Vt}if(Ce>Ne){ye&&err(0);break}ve&&Ee(De+131072);var qt=De+zt;if(De<ht){var on=re-ht,pn=Math.min(ht,qt);for(on+De<0&&err(3);De<pn;++De)L[De]=j[on+De]}for(;De<qt;++De)L[De]=L[De-ht]}}m.l=Be,m.p=Jt,m.b=De,m.f=Me,Be&&(Me=1,m.m=Fe,m.d=ke,m.n=Oe)}while(!Me);return De!=L.length&&le?slc(L,0,De):L.subarray(0,De)},et=new u8(0),zls=function($,m){return(($[0]&15)!=8||$[0]>>4>7||($[0]<<8|$[1])%31)&&err(6,"invalid zlib data"),($[1]>>5&1)==+!m&&err(6,"invalid zlib data: "+($[1]&32?"need":"unexpected")+" dictionary"),($[1]>>3&4)+2};function unzlibSync($,m){return inflt($.subarray(zls($,m&&m.dictionary),-4),{i:2},m&&m.out,m&&m.dictionary)}var td=typeof TextDecoder<"u"&&new TextDecoder,tds=0;try{td.decode(et,{stream:!0}),tds=1}catch{}class EXRLoader extends DataTextureLoader{constructor(m){super(m),this.type=HalfFloatType}parse(m){const Ke=Math.pow(2.7182818,2.2);function rt(it,lt){let xt=0;for(let Qt=0;Qt<65536;++Qt)(Qt==0||it[Qt>>3]&1<<(Qt&7))&&(lt[xt++]=Qt);const Nt=xt-1;for(;xt<65536;)lt[xt++]=0;return Nt}function ft(it){for(let lt=0;lt<16384;lt++)it[lt]={},it[lt].len=0,it[lt].lit=0,it[lt].p=null}const mt={l:0,c:0,lc:0};function Et(it,lt,xt,Nt,Qt){for(;xt<it;)lt=lt<<8|Yn(Nt,Qt),xt+=8;xt-=it,mt.l=lt>>xt&(1<<it)-1,mt.c=lt,mt.lc=xt}const bt=new Array(59);function Ct(it){for(let xt=0;xt<=58;++xt)bt[xt]=0;for(let xt=0;xt<65537;++xt)bt[it[xt]]+=1;let lt=0;for(let xt=58;xt>0;--xt){const Nt=lt+bt[xt]>>1;bt[xt]=lt,lt=Nt}for(let xt=0;xt<65537;++xt){const Nt=it[xt];Nt>0&&(it[xt]=Nt|bt[Nt]++<<6)}}function st(it,lt,xt,Nt,Qt,Ht){const dn=lt;let en=0,hn=0;for(;Nt<=Qt;Nt++){if(dn.value-lt.value>xt)return!1;Et(6,en,hn,it,dn);const _n=mt.l;if(en=mt.c,hn=mt.lc,Ht[Nt]=_n,_n==63){if(dn.value-lt.value>xt)throw new Error("Something wrong with hufUnpackEncTable");Et(8,en,hn,it,dn);let fn=mt.l+6;if(en=mt.c,hn=mt.lc,Nt+fn>Qt+1)throw new Error("Something wrong with hufUnpackEncTable");for(;fn--;)Ht[Nt++]=0;Nt--}else if(_n>=59){let fn=_n-59+2;if(Nt+fn>Qt+1)throw new Error("Something wrong with hufUnpackEncTable");for(;fn--;)Ht[Nt++]=0;Nt--}}Ct(Ht)}function at(it){return it&63}function Xe(it){return it>>6}function ht(it,lt,xt,Nt){for(;lt<=xt;lt++){const Qt=Xe(it[lt]),Ht=at(it[lt]);if(Qt>>Ht)throw new Error("Invalid table entry");if(Ht>14){const dn=Nt[Qt>>Ht-14];if(dn.len)throw new Error("Invalid table entry");if(dn.lit++,dn.p){const en=dn.p;dn.p=new Array(dn.lit);for(let hn=0;hn<dn.lit-1;++hn)dn.p[hn]=en[hn]}else dn.p=new Array(1);dn.p[dn.lit-1]=lt}else if(Ht){let dn=0;for(let en=1<<14-Ht;en>0;en--){const hn=Nt[(Qt<<14-Ht)+dn];if(hn.len||hn.p)throw new Error("Invalid table entry");hn.len=Ht,hn.lit=lt,dn++}}}return!0}const Bt={c:0,lc:0};function Dt(it,lt,xt,Nt){it=it<<8|Yn(xt,Nt),lt+=8,Bt.c=it,Bt.lc=lt}const Jt={c:0,lc:0};function tn(it,lt,xt,Nt,Qt,Ht,dn,en,hn){if(it==lt){Nt<8&&(Dt(xt,Nt,Qt,Ht),xt=Bt.c,Nt=Bt.lc),Nt-=8;let _n=xt>>Nt;if(_n=new Uint8Array([_n])[0],en.value+_n>hn)return!1;const fn=dn[en.value-1];for(;_n-- >0;)dn[en.value++]=fn}else if(en.value<hn)dn[en.value++]=it;else return!1;Jt.c=xt,Jt.lc=Nt}function zt(it){return it&65535}function Vt(it){const lt=zt(it);return lt>32767?lt-65536:lt}const Mt={a:0,b:0};function Tt(it,lt){const xt=Vt(it),Qt=Vt(lt),Ht=xt+(Qt&1)+(Qt>>1),dn=Ht,en=Ht-Qt;Mt.a=dn,Mt.b=en}function qt(it,lt){const xt=zt(it),Nt=zt(lt),Qt=xt-(Nt>>1)&65535,Ht=Nt+Qt-32768&65535;Mt.a=Ht,Mt.b=Qt}function on(it,lt,xt,Nt,Qt,Ht,dn){const en=dn<16384,hn=xt>Qt?Qt:xt;let _n=1,fn,Tn;for(;_n<=hn;)_n<<=1;for(_n>>=1,fn=_n,_n>>=1;_n>=1;){Tn=0;const Ln=Tn+Ht*(Qt-fn),Pn=Ht*_n,wn=Ht*fn,Nn=Nt*_n,Dn=Nt*fn;let jn,si,oi,Ai;for(;Tn<=Ln;Tn+=wn){let ei=Tn;const ni=Tn+Nt*(xt-fn);for(;ei<=ni;ei+=Dn){const wi=ei+Nn,gi=ei+Pn,di=gi+Nn;en?(Tt(it[ei+lt],it[gi+lt]),jn=Mt.a,oi=Mt.b,Tt(it[wi+lt],it[di+lt]),si=Mt.a,Ai=Mt.b,Tt(jn,si),it[ei+lt]=Mt.a,it[wi+lt]=Mt.b,Tt(oi,Ai),it[gi+lt]=Mt.a,it[di+lt]=Mt.b):(qt(it[ei+lt],it[gi+lt]),jn=Mt.a,oi=Mt.b,qt(it[wi+lt],it[di+lt]),si=Mt.a,Ai=Mt.b,qt(jn,si),it[ei+lt]=Mt.a,it[wi+lt]=Mt.b,qt(oi,Ai),it[gi+lt]=Mt.a,it[di+lt]=Mt.b)}if(xt&_n){const wi=ei+Pn;en?Tt(it[ei+lt],it[wi+lt]):qt(it[ei+lt],it[wi+lt]),jn=Mt.a,it[wi+lt]=Mt.b,it[ei+lt]=jn}}if(Qt&_n){let ei=Tn;const ni=Tn+Nt*(xt-fn);for(;ei<=ni;ei+=Dn){const wi=ei+Nn;en?Tt(it[ei+lt],it[wi+lt]):qt(it[ei+lt],it[wi+lt]),jn=Mt.a,it[wi+lt]=Mt.b,it[ei+lt]=jn}}fn=_n,_n>>=1}return Tn}function pn(it,lt,xt,Nt,Qt,Ht,dn,en,hn){let _n=0,fn=0;const Tn=dn,Ln=Math.trunc(Nt.value+(Qt+7)/8);for(;Nt.value<Ln;)for(Dt(_n,fn,xt,Nt),_n=Bt.c,fn=Bt.lc;fn>=14;){const wn=_n>>fn-14&16383,Nn=lt[wn];if(Nn.len)fn-=Nn.len,tn(Nn.lit,Ht,_n,fn,xt,Nt,en,hn,Tn),_n=Jt.c,fn=Jt.lc;else{if(!Nn.p)throw new Error("hufDecode issues");let Dn;for(Dn=0;Dn<Nn.lit;Dn++){const jn=at(it[Nn.p[Dn]]);for(;fn<jn&&Nt.value<Ln;)Dt(_n,fn,xt,Nt),_n=Bt.c,fn=Bt.lc;if(fn>=jn&&Xe(it[Nn.p[Dn]])==(_n>>fn-jn&(1<<jn)-1)){fn-=jn,tn(Nn.p[Dn],Ht,_n,fn,xt,Nt,en,hn,Tn),_n=Jt.c,fn=Jt.lc;break}}if(Dn==Nn.lit)throw new Error("hufDecode issues")}}const Pn=8-Qt&7;for(_n>>=Pn,fn-=Pn;fn>0;){const wn=lt[_n<<14-fn&16383];if(wn.len)fn-=wn.len,tn(wn.lit,Ht,_n,fn,xt,Nt,en,hn,Tn),_n=Jt.c,fn=Jt.lc;else throw new Error("hufDecode issues")}return!0}function kt(it,lt,xt,Nt,Qt,Ht){const dn={value:0},en=xt.value,hn=Bn(lt,xt),_n=Bn(lt,xt);xt.value+=4;const fn=Bn(lt,xt);if(xt.value+=4,hn<0||hn>=65537||_n<0||_n>=65537)throw new Error("Something wrong with HUF_ENCSIZE");const Tn=new Array(65537),Ln=new Array(16384);ft(Ln);const Pn=Nt-(xt.value-en);if(st(it,xt,Pn,hn,_n,Tn),fn>8*(Nt-(xt.value-en)))throw new Error("Something wrong with hufUncompress");ht(Tn,hn,_n,Ln),pn(Tn,Ln,it,xt,fn,_n,Ht,Qt,dn)}function Mn(it,lt,xt){for(let Nt=0;Nt<xt;++Nt)lt[Nt]=it[lt[Nt]]}function wt(it){for(let lt=1;lt<it.length;lt++){const xt=it[lt-1]+it[lt]-128;it[lt]=xt}}function It(it,lt){let xt=0,Nt=Math.floor((it.length+1)/2),Qt=0;const Ht=it.length-1;for(;!(Qt>Ht||(lt[Qt++]=it[xt++],Qt>Ht));)lt[Qt++]=it[Nt++]}function Kt(it){let lt=it.byteLength;const xt=new Array;let Nt=0;const Qt=new DataView(it);for(;lt>0;){const Ht=Qt.getInt8(Nt++);if(Ht<0){const dn=-Ht;lt-=dn+1;for(let en=0;en<dn;en++)xt.push(Qt.getUint8(Nt++))}else{const dn=Ht;lt-=2;const en=Qt.getUint8(Nt++);for(let hn=0;hn<dn+1;hn++)xt.push(en)}}return xt}function ln(it,lt,xt,Nt,Qt,Ht){let dn=new DataView(Ht.buffer);const en=xt[it.idx[0]].width,hn=xt[it.idx[0]].height,_n=3,fn=Math.floor(en/8),Tn=Math.ceil(en/8),Ln=Math.ceil(hn/8),Pn=en-(Tn-1)*8,wn=hn-(Ln-1)*8,Nn={value:0},Dn=new Array(_n),jn=new Array(_n),si=new Array(_n),oi=new Array(_n),Ai=new Array(_n);for(let ni=0;ni<_n;++ni)Ai[ni]=lt[it.idx[ni]],Dn[ni]=ni<1?0:Dn[ni-1]+Tn*Ln,jn[ni]=new Float32Array(64),si[ni]=new Uint16Array(64),oi[ni]=new Uint16Array(Tn*64);for(let ni=0;ni<Ln;++ni){let wi=8;ni==Ln-1&&(wi=wn);let gi=8;for(let Xn=0;Xn<Tn;++Xn){Xn==Tn-1&&(gi=Pn);for(let fi=0;fi<_n;++fi)si[fi].fill(0),si[fi][0]=Qt[Dn[fi]++],nn(Nn,Nt,si[fi]),gn(si[fi],jn[fi]),xn(jn[fi]);St(jn);for(let fi=0;fi<_n;++fi)At(jn[fi],oi[fi],Xn*64)}let di=0;for(let Xn=0;Xn<_n;++Xn){const fi=xt[it.idx[Xn]].type;for(let Vi=8*ni;Vi<8*ni+wi;++Vi){di=Ai[Xn][Vi];for(let Bi=0;Bi<fn;++Bi){const Hi=Bi*64+(Vi&7)*8;dn.setUint16(di+0*2*fi,oi[Xn][Hi+0],!0),dn.setUint16(di+1*2*fi,oi[Xn][Hi+1],!0),dn.setUint16(di+2*2*fi,oi[Xn][Hi+2],!0),dn.setUint16(di+3*2*fi,oi[Xn][Hi+3],!0),dn.setUint16(di+4*2*fi,oi[Xn][Hi+4],!0),dn.setUint16(di+5*2*fi,oi[Xn][Hi+5],!0),dn.setUint16(di+6*2*fi,oi[Xn][Hi+6],!0),dn.setUint16(di+7*2*fi,oi[Xn][Hi+7],!0),di+=8*2*fi}}if(fn!=Tn)for(let Vi=8*ni;Vi<8*ni+wi;++Vi){const Bi=Ai[Xn][Vi]+8*fn*2*fi,Hi=fn*64+(Vi&7)*8;for(let Yi=0;Yi<gi;++Yi)dn.setUint16(Bi+Yi*2*fi,oi[Xn][Hi+Yi],!0)}}}const ei=new Uint16Array(en);dn=new DataView(Ht.buffer);for(let ni=0;ni<_n;++ni){xt[it.idx[ni]].decoded=!0;const wi=xt[it.idx[ni]].type;if(xt[ni].type==2)for(let gi=0;gi<hn;++gi){const di=Ai[ni][gi];for(let Xn=0;Xn<en;++Xn)ei[Xn]=dn.getUint16(di+Xn*2*wi,!0);for(let Xn=0;Xn<en;++Xn)dn.setFloat32(di+Xn*2*wi,Xt(ei[Xn]),!0)}}}function nn(it,lt,xt){let Nt,Qt=1;for(;Qt<64;)Nt=lt[it.value],Nt==65280?Qt=64:Nt>>8==255?Qt+=Nt&255:(xt[Qt]=Nt,Qt++),it.value++}function gn(it,lt){lt[0]=Xt(it[0]),lt[1]=Xt(it[1]),lt[2]=Xt(it[5]),lt[3]=Xt(it[6]),lt[4]=Xt(it[14]),lt[5]=Xt(it[15]),lt[6]=Xt(it[27]),lt[7]=Xt(it[28]),lt[8]=Xt(it[2]),lt[9]=Xt(it[4]),lt[10]=Xt(it[7]),lt[11]=Xt(it[13]),lt[12]=Xt(it[16]),lt[13]=Xt(it[26]),lt[14]=Xt(it[29]),lt[15]=Xt(it[42]),lt[16]=Xt(it[3]),lt[17]=Xt(it[8]),lt[18]=Xt(it[12]),lt[19]=Xt(it[17]),lt[20]=Xt(it[25]),lt[21]=Xt(it[30]),lt[22]=Xt(it[41]),lt[23]=Xt(it[43]),lt[24]=Xt(it[9]),lt[25]=Xt(it[11]),lt[26]=Xt(it[18]),lt[27]=Xt(it[24]),lt[28]=Xt(it[31]),lt[29]=Xt(it[40]),lt[30]=Xt(it[44]),lt[31]=Xt(it[53]),lt[32]=Xt(it[10]),lt[33]=Xt(it[19]),lt[34]=Xt(it[23]),lt[35]=Xt(it[32]),lt[36]=Xt(it[39]),lt[37]=Xt(it[45]),lt[38]=Xt(it[52]),lt[39]=Xt(it[54]),lt[40]=Xt(it[20]),lt[41]=Xt(it[22]),lt[42]=Xt(it[33]),lt[43]=Xt(it[38]),lt[44]=Xt(it[46]),lt[45]=Xt(it[51]),lt[46]=Xt(it[55]),lt[47]=Xt(it[60]),lt[48]=Xt(it[21]),lt[49]=Xt(it[34]),lt[50]=Xt(it[37]),lt[51]=Xt(it[47]),lt[52]=Xt(it[50]),lt[53]=Xt(it[56]),lt[54]=Xt(it[59]),lt[55]=Xt(it[61]),lt[56]=Xt(it[35]),lt[57]=Xt(it[36]),lt[58]=Xt(it[48]),lt[59]=Xt(it[49]),lt[60]=Xt(it[57]),lt[61]=Xt(it[58]),lt[62]=Xt(it[62]),lt[63]=Xt(it[63])}function xn(it){const lt=.5*Math.cos(.7853975),xt=.5*Math.cos(3.14159/16),Nt=.5*Math.cos(3.14159/8),Qt=.5*Math.cos(3*3.14159/16),Ht=.5*Math.cos(5*3.14159/16),dn=.5*Math.cos(3*3.14159/8),en=.5*Math.cos(7*3.14159/16),hn=new Array(4),_n=new Array(4),fn=new Array(4),Tn=new Array(4);for(let Ln=0;Ln<8;++Ln){const Pn=Ln*8;hn[0]=Nt*it[Pn+2],hn[1]=dn*it[Pn+2],hn[2]=Nt*it[Pn+6],hn[3]=dn*it[Pn+6],_n[0]=xt*it[Pn+1]+Qt*it[Pn+3]+Ht*it[Pn+5]+en*it[Pn+7],_n[1]=Qt*it[Pn+1]-en*it[Pn+3]-xt*it[Pn+5]-Ht*it[Pn+7],_n[2]=Ht*it[Pn+1]-xt*it[Pn+3]+en*it[Pn+5]+Qt*it[Pn+7],_n[3]=en*it[Pn+1]-Ht*it[Pn+3]+Qt*it[Pn+5]-xt*it[Pn+7],fn[0]=lt*(it[Pn+0]+it[Pn+4]),fn[3]=lt*(it[Pn+0]-it[Pn+4]),fn[1]=hn[0]+hn[3],fn[2]=hn[1]-hn[2],Tn[0]=fn[0]+fn[1],Tn[1]=fn[3]+fn[2],Tn[2]=fn[3]-fn[2],Tn[3]=fn[0]-fn[1],it[Pn+0]=Tn[0]+_n[0],it[Pn+1]=Tn[1]+_n[1],it[Pn+2]=Tn[2]+_n[2],it[Pn+3]=Tn[3]+_n[3],it[Pn+4]=Tn[3]-_n[3],it[Pn+5]=Tn[2]-_n[2],it[Pn+6]=Tn[1]-_n[1],it[Pn+7]=Tn[0]-_n[0]}for(let Ln=0;Ln<8;++Ln)hn[0]=Nt*it[16+Ln],hn[1]=dn*it[16+Ln],hn[2]=Nt*it[48+Ln],hn[3]=dn*it[48+Ln],_n[0]=xt*it[8+Ln]+Qt*it[24+Ln]+Ht*it[40+Ln]+en*it[56+Ln],_n[1]=Qt*it[8+Ln]-en*it[24+Ln]-xt*it[40+Ln]-Ht*it[56+Ln],_n[2]=Ht*it[8+Ln]-xt*it[24+Ln]+en*it[40+Ln]+Qt*it[56+Ln],_n[3]=en*it[8+Ln]-Ht*it[24+Ln]+Qt*it[40+Ln]-xt*it[56+Ln],fn[0]=lt*(it[Ln]+it[32+Ln]),fn[3]=lt*(it[Ln]-it[32+Ln]),fn[1]=hn[0]+hn[3],fn[2]=hn[1]-hn[2],Tn[0]=fn[0]+fn[1],Tn[1]=fn[3]+fn[2],Tn[2]=fn[3]-fn[2],Tn[3]=fn[0]-fn[1],it[0+Ln]=Tn[0]+_n[0],it[8+Ln]=Tn[1]+_n[1],it[16+Ln]=Tn[2]+_n[2],it[24+Ln]=Tn[3]+_n[3],it[32+Ln]=Tn[3]-_n[3],it[40+Ln]=Tn[2]-_n[2],it[48+Ln]=Tn[1]-_n[1],it[56+Ln]=Tn[0]-_n[0]}function St(it){for(let lt=0;lt<64;++lt){const xt=it[0][lt],Nt=it[1][lt],Qt=it[2][lt];it[0][lt]=xt+1.5747*Qt,it[1][lt]=xt-.1873*Nt-.4682*Qt,it[2][lt]=xt+1.8556*Nt}}function At(it,lt,xt){for(let Nt=0;Nt<64;++Nt)lt[xt+Nt]=DataUtils.toHalfFloat(Ut(it[Nt]))}function Ut(it){return it<=1?Math.sign(it)*Math.pow(Math.abs(it),2.2):Math.sign(it)*Math.pow(Ke,Math.abs(it)-1)}function Zt(it){return new DataView(it.array.buffer,it.offset.value,it.size)}function cn(it){const lt=it.viewer.buffer.slice(it.offset.value,it.offset.value+it.size),xt=new Uint8Array(Kt(lt)),Nt=new Uint8Array(xt.length);return wt(xt),It(xt,Nt),new DataView(Nt.buffer)}function sn(it){const lt=it.array.slice(it.offset.value,it.offset.value+it.size),xt=unzlibSync(lt),Nt=new Uint8Array(xt.length);return wt(xt),It(xt,Nt),new DataView(Nt.buffer)}function bn(it){const lt=it.viewer,xt={value:it.offset.value},Nt=new Uint16Array(it.columns*it.lines*(it.inputChannels.length*it.type)),Qt=new Uint8Array(8192);let Ht=0;const dn=new Array(it.inputChannels.length);for(let wn=0,Nn=it.inputChannels.length;wn<Nn;wn++)dn[wn]={},dn[wn].start=Ht,dn[wn].end=dn[wn].start,dn[wn].nx=it.columns,dn[wn].ny=it.lines,dn[wn].size=it.type,Ht+=dn[wn].nx*dn[wn].ny*dn[wn].size;const en=En(lt,xt),hn=En(lt,xt);if(hn>=8192)throw new Error("Something is wrong with PIZ_COMPRESSION BITMAP_SIZE");if(en<=hn)for(let wn=0;wn<hn-en+1;wn++)Qt[wn+en]=Qn(lt,xt);const _n=new Uint16Array(65536),fn=rt(Qt,_n),Tn=Bn(lt,xt);kt(it.array,lt,xt,Tn,Nt,Ht);for(let wn=0;wn<it.inputChannels.length;++wn){const Nn=dn[wn];for(let Dn=0;Dn<dn[wn].size;++Dn)on(Nt,Nn.start+Dn,Nn.nx,Nn.size,Nn.ny,Nn.nx*Nn.size,fn)}Mn(_n,Nt,Ht);let Ln=0;const Pn=new Uint8Array(Nt.buffer.byteLength);for(let wn=0;wn<it.lines;wn++)for(let Nn=0;Nn<it.inputChannels.length;Nn++){const Dn=dn[Nn],jn=Dn.nx*Dn.size,si=new Uint8Array(Nt.buffer,Dn.end*2,jn*2);Pn.set(si,Ln),Ln+=jn*2,Dn.end+=jn}return new DataView(Pn.buffer)}function vn(it){const lt=it.array.slice(it.offset.value,it.offset.value+it.size),xt=unzlibSync(lt),Nt=it.inputChannels.length*it.lines*it.columns*it.totalBytes,Qt=new ArrayBuffer(Nt),Ht=new DataView(Qt);let dn=0,en=0;const hn=new Array(4);for(let _n=0;_n<it.lines;_n++)for(let fn=0;fn<it.inputChannels.length;fn++){let Tn=0;switch(it.inputChannels[fn].pixelType){case 1:hn[0]=dn,hn[1]=hn[0]+it.columns,dn=hn[1]+it.columns;for(let Pn=0;Pn<it.columns;++Pn){const wn=xt[hn[0]++]<<8|xt[hn[1]++];Tn+=wn,Ht.setUint16(en,Tn,!0),en+=2}break;case 2:hn[0]=dn,hn[1]=hn[0]+it.columns,hn[2]=hn[1]+it.columns,dn=hn[2]+it.columns;for(let Pn=0;Pn<it.columns;++Pn){const wn=xt[hn[0]++]<<24|xt[hn[1]++]<<16|xt[hn[2]++]<<8;Tn+=wn,Ht.setUint32(en,Tn,!0),en+=4}break}}return Ht}function Cn(it){const lt=it.viewer,xt={value:it.offset.value},Nt=new Uint8Array(it.columns*it.lines*(it.inputChannels.length*it.type*2)),Qt={version:Kn(lt,xt),unknownUncompressedSize:Kn(lt,xt),unknownCompressedSize:Kn(lt,xt),acCompressedSize:Kn(lt,xt),dcCompressedSize:Kn(lt,xt),rleCompressedSize:Kn(lt,xt),rleUncompressedSize:Kn(lt,xt),rleRawSize:Kn(lt,xt),totalAcUncompressedCount:Kn(lt,xt),totalDcUncompressedCount:Kn(lt,xt),acCompression:Kn(lt,xt)};if(Qt.version<2)throw new Error("EXRLoader.parse: "+Yt.compression+" version "+Qt.version+" is unsupported");const Ht=new Array;let dn=En(lt,xt)-2;for(;dn>0;){const Nn=Un(lt.buffer,xt),Dn=Qn(lt,xt),jn=Dn>>2&3,si=(Dn>>4)-1,oi=new Int8Array([si])[0],Ai=Qn(lt,xt);Ht.push({name:Nn,index:oi,type:Ai,compression:jn}),dn-=Nn.length+3}const en=Yt.channels,hn=new Array(it.inputChannels.length);for(let Nn=0;Nn<it.inputChannels.length;++Nn){const Dn=hn[Nn]={},jn=en[Nn];Dn.name=jn.name,Dn.compression=0,Dn.decoded=!1,Dn.type=jn.pixelType,Dn.pLinear=jn.pLinear,Dn.width=it.columns,Dn.height=it.lines}const _n={idx:new Array(3)};for(let Nn=0;Nn<it.inputChannels.length;++Nn){const Dn=hn[Nn];for(let jn=0;jn<Ht.length;++jn){const si=Ht[jn];Dn.name==si.name&&(Dn.compression=si.compression,si.index>=0&&(_n.idx[si.index]=Nn),Dn.offset=Nn)}}let fn,Tn,Ln;if(Qt.acCompressedSize>0)switch(Qt.acCompression){case 0:fn=new Uint16Array(Qt.totalAcUncompressedCount),kt(it.array,lt,xt,Qt.acCompressedSize,fn,Qt.totalAcUncompressedCount);break;case 1:const Nn=it.array.slice(xt.value,xt.value+Qt.totalAcUncompressedCount),Dn=unzlibSync(Nn);fn=new Uint16Array(Dn.buffer),xt.value+=Qt.totalAcUncompressedCount;break}if(Qt.dcCompressedSize>0){const Nn={array:it.array,offset:xt,size:Qt.dcCompressedSize};Tn=new Uint16Array(sn(Nn).buffer),xt.value+=Qt.dcCompressedSize}if(Qt.rleRawSize>0){const Nn=it.array.slice(xt.value,xt.value+Qt.rleCompressedSize),Dn=unzlibSync(Nn);Ln=Kt(Dn.buffer),xt.value+=Qt.rleCompressedSize}let Pn=0;const wn=new Array(hn.length);for(let Nn=0;Nn<wn.length;++Nn)wn[Nn]=new Array;for(let Nn=0;Nn<it.lines;++Nn)for(let Dn=0;Dn<hn.length;++Dn)wn[Dn].push(Pn),Pn+=hn[Dn].width*it.type*2;ln(_n,wn,hn,fn,Tn,Nt);for(let Nn=0;Nn<hn.length;++Nn){const Dn=hn[Nn];if(!Dn.decoded)switch(Dn.compression){case 2:let jn=0,si=0;for(let oi=0;oi<it.lines;++oi){let Ai=wn[Nn][jn];for(let ei=0;ei<Dn.width;++ei){for(let ni=0;ni<2*Dn.type;++ni)Nt[Ai++]=Ln[si+ni*Dn.width*Dn.height];si++}jn++}break;case 1:default:throw new Error("EXRLoader.parse: unsupported channel compression")}}return new DataView(Nt.buffer)}function Un(it,lt){const xt=new Uint8Array(it);let Nt=0;for(;xt[lt.value+Nt]!=0;)Nt+=1;const Qt=new TextDecoder().decode(xt.slice(lt.value,lt.value+Nt));return lt.value=lt.value+Nt+1,Qt}function yn(it,lt,xt){const Nt=new TextDecoder().decode(new Uint8Array(it).slice(lt.value,lt.value+xt));return lt.value=lt.value+xt,Nt}function $n(it,lt){const xt=Hn(it,lt),Nt=Bn(it,lt);return[xt,Nt]}function Jn(it,lt){const xt=Bn(it,lt),Nt=Bn(it,lt);return[xt,Nt]}function Hn(it,lt){const xt=it.getInt32(lt.value,!0);return lt.value=lt.value+4,xt}function Bn(it,lt){const xt=it.getUint32(lt.value,!0);return lt.value=lt.value+4,xt}function Yn(it,lt){const xt=it[lt.value];return lt.value=lt.value+1,xt}function Qn(it,lt){const xt=it.getUint8(lt.value);return lt.value=lt.value+1,xt}const Kn=function(it,lt){let xt;return"getBigInt64"in DataView.prototype?xt=Number(it.getBigInt64(lt.value,!0)):xt=it.getUint32(lt.value+4,!0)+Number(it.getUint32(lt.value,!0)<<32),lt.value+=8,xt};function Wt(it,lt){const xt=it.getFloat32(lt.value,!0);return lt.value+=4,xt}function zn(it,lt){return DataUtils.toHalfFloat(Wt(it,lt))}function Xt(it){const lt=(it&31744)>>10,xt=it&1023;return(it>>15?-1:1)*(lt?lt===31?xt?NaN:1/0:Math.pow(2,lt-15)*(1+xt/1024):6103515625e-14*(xt/1024))}function En(it,lt){const xt=it.getUint16(lt.value,!0);return lt.value+=2,xt}function Fn(it,lt){return Xt(En(it,lt))}function Zn(it,lt,xt,Nt){const Qt=xt.value,Ht=[];for(;xt.value<Qt+Nt-1;){const dn=Un(lt,xt),en=Hn(it,xt),hn=Qn(it,xt);xt.value+=3;const _n=Hn(it,xt),fn=Hn(it,xt);Ht.push({name:dn,pixelType:en,pLinear:hn,xSampling:_n,ySampling:fn})}return xt.value+=1,Ht}function hi(it,lt){const xt=Wt(it,lt),Nt=Wt(it,lt),Qt=Wt(it,lt),Ht=Wt(it,lt),dn=Wt(it,lt),en=Wt(it,lt),hn=Wt(it,lt),_n=Wt(it,lt);return{redX:xt,redY:Nt,greenX:Qt,greenY:Ht,blueX:dn,blueY:en,whiteX:hn,whiteY:_n}}function bi(it,lt){const xt=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],Nt=Qn(it,lt);return xt[Nt]}function _i(it,lt){const xt=Hn(it,lt),Nt=Hn(it,lt),Qt=Hn(it,lt),Ht=Hn(it,lt);return{xMin:xt,yMin:Nt,xMax:Qt,yMax:Ht}}function ci(it,lt){const xt=["INCREASING_Y","DECREASING_Y","RANDOM_Y"],Nt=Qn(it,lt);return xt[Nt]}function ui(it,lt){const xt=["ENVMAP_LATLONG","ENVMAP_CUBE"],Nt=Qn(it,lt);return xt[Nt]}function Fi(it,lt){const xt=["ONE_LEVEL","MIPMAP_LEVELS","RIPMAP_LEVELS"],Nt=["ROUND_DOWN","ROUND_UP"],Qt=Bn(it,lt),Ht=Bn(it,lt),dn=Qn(it,lt);return{xSize:Qt,ySize:Ht,levelMode:xt[dn&15],roundingMode:Nt[dn>>4]}}function pi(it,lt){const xt=Wt(it,lt),Nt=Wt(it,lt);return[xt,Nt]}function ir(it,lt){const xt=Wt(it,lt),Nt=Wt(it,lt),Qt=Wt(it,lt);return[xt,Nt,Qt]}function Ki(it,lt,xt,Nt,Qt){if(Nt==="string"||Nt==="stringvector"||Nt==="iccProfile")return yn(lt,xt,Qt);if(Nt==="chlist")return Zn(it,lt,xt,Qt);if(Nt==="chromaticities")return hi(it,xt);if(Nt==="compression")return bi(it,xt);if(Nt==="box2i")return _i(it,xt);if(Nt==="envmap")return ui(it,xt);if(Nt==="tiledesc")return Fi(it,xt);if(Nt==="lineOrder")return ci(it,xt);if(Nt==="float")return Wt(it,xt);if(Nt==="v2f")return pi(it,xt);if(Nt==="v3f")return ir(it,xt);if(Nt==="int")return Hn(it,xt);if(Nt==="rational")return $n(it,xt);if(Nt==="timecode")return Jn(it,xt);if(Nt==="preview")return xt.value+=Qt,"skipped";xt.value+=Qt}function rr(it,lt){const xt=Math.log2(it);return lt=="ROUND_DOWN"?Math.floor(xt):Math.ceil(xt)}function ki(it,lt,xt){let Nt=0;switch(it.levelMode){case"ONE_LEVEL":Nt=1;break;case"MIPMAP_LEVELS":Nt=rr(Math.max(lt,xt),it.roundingMode)+1;break;case"RIPMAP_LEVELS":throw new Error("THREE.EXRLoader: RIPMAP_LEVELS tiles currently unsupported.")}return Nt}function Gi(it,lt,xt,Nt){const Qt=new Array(it);for(let Ht=0;Ht<it;Ht++){const dn=1<<Ht;let en=lt/dn|0;Nt=="ROUND_UP"&&en*dn<lt&&(en+=1);const hn=Math.max(en,1);Qt[Ht]=(hn+xt-1)/xt|0}return Qt}function Qi(){const it=this,lt=it.offset,xt={value:0};for(let Nt=0;Nt<it.tileCount;Nt++){const Qt=Hn(it.viewer,lt),Ht=Hn(it.viewer,lt);lt.value+=8,it.size=Bn(it.viewer,lt);const dn=Qt*it.blockWidth,en=Ht*it.blockHeight;it.columns=dn+it.blockWidth>it.width?it.width-dn:it.blockWidth,it.lines=en+it.blockHeight>it.height?it.height-en:it.blockHeight;const hn=it.columns*it.totalBytes,fn=it.size<it.lines*hn?it.uncompress(it):Zt(it);lt.value+=it.size;for(let Tn=0;Tn<it.lines;Tn++){const Ln=Tn*it.columns*it.totalBytes;for(let Pn=0;Pn<it.inputChannels.length;Pn++){const wn=Yt.channels[Pn].name,Nn=it.channelByteOffsets[wn]*it.columns,Dn=it.decodeChannels[wn];if(Dn===void 0)continue;xt.value=Ln+Nn;const jn=(it.height-(1+en+Tn))*it.outLineWidth;for(let si=0;si<it.columns;si++){const oi=jn+(si+dn)*it.outputChannels+Dn;it.byteArray[oi]=it.getter(fn,xt)}}}}}function mr(){const it=this,lt=it.offset,xt={value:0};for(let Nt=0;Nt<it.height/it.blockHeight;Nt++){const Qt=Hn(it.viewer,lt)-Yt.dataWindow.yMin;it.size=Bn(it.viewer,lt),it.lines=Qt+it.blockHeight>it.height?it.height-Qt:it.blockHeight;const Ht=it.columns*it.totalBytes,en=it.size<it.lines*Ht?it.uncompress(it):Zt(it);lt.value+=it.size;for(let hn=0;hn<it.blockHeight;hn++){const _n=Nt*it.blockHeight,fn=hn+it.scanOrder(_n);if(fn>=it.height)continue;const Tn=hn*Ht,Ln=(it.height-1-fn)*it.outLineWidth;for(let Pn=0;Pn<it.inputChannels.length;Pn++){const wn=Yt.channels[Pn].name,Nn=it.channelByteOffsets[wn]*it.columns,Dn=it.decodeChannels[wn];if(Dn!==void 0){xt.value=Tn+Nn;for(let jn=0;jn<it.columns;jn++){const si=Ln+jn*it.outputChannels+Dn;it.byteArray[si]=it.getter(en,xt)}}}}}}function gr(it,lt,xt){const Nt={};if(it.getUint32(0,!0)!=20000630)throw new Error("THREE.EXRLoader: Provided file doesn't appear to be in OpenEXR format.");Nt.version=it.getUint8(4);const Qt=it.getUint8(5);Nt.spec={singleTile:!!(Qt&2),longName:!!(Qt&4),deepFormat:!!(Qt&8),multiPart:!!(Qt&16)},xt.value=8;let Ht=!0;for(;Ht;){const dn=Un(lt,xt);if(dn==0)Ht=!1;else{const en=Un(lt,xt),hn=Bn(it,xt),_n=Ki(it,lt,xt,en,hn);_n===void 0?console.warn(`THREE.EXRLoader: Skipped unknown header attribute type '${en}'.`):Nt[dn]=_n}}if(Qt&-7)throw console.error("THREE.EXRHeader:",Nt),new Error("THREE.EXRLoader: Provided file is currently unsupported.");return Nt}function br(it,lt,xt,Nt,Qt){const Ht={size:0,viewer:lt,array:xt,offset:Nt,width:it.dataWindow.xMax-it.dataWindow.xMin+1,height:it.dataWindow.yMax-it.dataWindow.yMin+1,inputChannels:it.channels,channelByteOffsets:{},scanOrder:null,totalBytes:null,columns:null,lines:null,type:null,uncompress:null,getter:null,format:null,colorSpace:LinearSRGBColorSpace};switch(it.compression){case"NO_COMPRESSION":Ht.blockHeight=1,Ht.uncompress=Zt;break;case"RLE_COMPRESSION":Ht.blockHeight=1,Ht.uncompress=cn;break;case"ZIPS_COMPRESSION":Ht.blockHeight=1,Ht.uncompress=sn;break;case"ZIP_COMPRESSION":Ht.blockHeight=16,Ht.uncompress=sn;break;case"PIZ_COMPRESSION":Ht.blockHeight=32,Ht.uncompress=bn;break;case"PXR24_COMPRESSION":Ht.blockHeight=16,Ht.uncompress=vn;break;case"DWAA_COMPRESSION":Ht.blockHeight=32,Ht.uncompress=Cn;break;case"DWAB_COMPRESSION":Ht.blockHeight=256,Ht.uncompress=Cn;break;default:throw new Error("EXRLoader.parse: "+it.compression+" is unsupported")}const dn={};for(const fn of it.channels)switch(fn.name){case"Y":case"R":case"G":case"B":case"A":dn[fn.name]=!0,Ht.type=fn.pixelType}let en=!1;if(dn.R&&dn.G&&dn.B)en=!dn.A,Ht.outputChannels=4,Ht.decodeChannels={R:0,G:1,B:2,A:3};else if(dn.Y)Ht.outputChannels=1,Ht.decodeChannels={Y:0};else throw new Error("EXRLoader.parse: file contains unsupported data channels.");if(Ht.type==1)switch(Qt){case FloatType:Ht.getter=Fn;break;case HalfFloatType:Ht.getter=En;break}else if(Ht.type==2)switch(Qt){case FloatType:Ht.getter=Wt;break;case HalfFloatType:Ht.getter=zn}else throw new Error("EXRLoader.parse: unsupported pixelType "+Ht.type+" for "+it.compression+".");Ht.columns=Ht.width;const hn=Ht.width*Ht.height*Ht.outputChannels;switch(Qt){case FloatType:Ht.byteArray=new Float32Array(hn),en&&Ht.byteArray.fill(1,0,hn);break;case HalfFloatType:Ht.byteArray=new Uint16Array(hn),en&&Ht.byteArray.fill(15360,0,hn);break;default:console.error("THREE.EXRLoader: unsupported type: ",Qt);break}let _n=0;for(const fn of it.channels)Ht.decodeChannels[fn.name]!==void 0&&(Ht.channelByteOffsets[fn.name]=_n),_n+=fn.pixelType*2;if(Ht.totalBytes=_n,Ht.outLineWidth=Ht.width*Ht.outputChannels,it.lineOrder==="INCREASING_Y"?Ht.scanOrder=fn=>fn:Ht.scanOrder=fn=>Ht.height-1-fn,Ht.outputChannels==4?(Ht.format=RGBAFormat,Ht.colorSpace=LinearSRGBColorSpace):(Ht.format=RedFormat,Ht.colorSpace=NoColorSpace),it.spec.singleTile){Ht.blockHeight=it.tiles.ySize,Ht.blockWidth=it.tiles.xSize;const fn=ki(it.tiles,Ht.width,Ht.height),Tn=Gi(fn,Ht.width,it.tiles.xSize,it.tiles.roundingMode),Ln=Gi(fn,Ht.height,it.tiles.ySize,it.tiles.roundingMode);Ht.tileCount=Tn[0]*Ln[0];for(let Pn=0;Pn<fn;Pn++)for(let wn=0;wn<Ln[Pn];wn++)for(let Nn=0;Nn<Tn[Pn];Nn++)Kn(lt,Nt);Ht.decode=Qi.bind(Ht)}else{Ht.blockWidth=Ht.width;const fn=Math.ceil(Ht.height/Ht.blockHeight);for(let Tn=0;Tn<fn;Tn++)Kn(lt,Nt);Ht.decode=mr.bind(Ht)}return Ht}const hr={value:0},er=new DataView(m),Pt=new Uint8Array(m),Yt=gr(er,m,hr),un=br(Yt,er,Pt,hr,this.type);return un.decode(),{header:Yt,width:un.width,height:un.height,data:un.byteArray,format:un.format,colorSpace:un.colorSpace,type:this.type}}setDataType(m){return this.type=m,this}load(m,L,j,ee){function re(le,ve){le.colorSpace=ve.colorSpace,le.minFilter=LinearFilter,le.magFilter=LinearFilter,le.generateMipmaps=!1,le.flipY=!1,L&&L(le,ve)}return super.load(m,re,j,ee)}}function r$1($,m){for(var L=0;L<m.length;L++){var j=m[L];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty($,(ee=j.key,re=void 0,typeof(re=function(le,ve){if(typeof le!="object"||le===null)return le;var ye=le[Symbol.toPrimitive];if(ye!==void 0){var Ee=ye.call(le,ve||"default");if(typeof Ee!="object")return Ee;throw new TypeError("@@toPrimitive must return a primitive value.")}return(ve==="string"?String:Number)(le)}(ee,"string"))=="symbol"?re:String(re)),j)}var ee,re}function n$3($){return n$3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(m){return m.__proto__||Object.getPrototypeOf(m)},n$3($)}function o$2($,m){return o$2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(L,j){return L.__proto__=j,L},o$2($,m)}function i$2($,m){if(m&&(typeof m=="object"||typeof m=="function"))return m;if(m!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(L){if(L===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return L}($)}function u$2($){var m=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var L,j=n$3($);if(m){var ee=n$3(this).constructor;L=Reflect.construct(j,arguments,ee)}else L=j.apply(this,arguments);return i$2(this,L)}}var c$2=function($){(function(re,le){if(typeof le!="function"&&le!==null)throw new TypeError("Super expression must either be null or a function");re.prototype=Object.create(le&&le.prototype,{constructor:{value:re,writable:!0,configurable:!0}}),Object.defineProperty(re,"prototype",{writable:!1}),le&&o$2(re,le)})(ee,Loader);var m,L,j=u$2(ee);function ee(re){var le;return function(ve,ye){if(!(ve instanceof ye))throw new TypeError("Cannot call a class as a function")}(this,ee),(le=j.call(this,re))._loader=new EXRLoader,le}return m=ee,(L=[{key:"load",value:function(re){var le=this,ve=re.path;return new Promise(function(ye,Ee){le._loader.load(ve,ye,null,Ee)})}}])&&r$1(m.prototype,L),Object.defineProperty(m,"prototype",{writable:!1}),ee}();function t$2($,m){if(!($ instanceof m))throw new TypeError("Cannot call a class as a function")}function r($,m){for(var L=0;L<m.length;L++){var j=m[L];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty($,j.key,j)}}function n$2($){return(n$2=Object.setPrototypeOf?Object.getPrototypeOf:function(m){return m.__proto__||Object.getPrototypeOf(m)})($)}function o$1($,m){return(o$1=Object.setPrototypeOf||function(L,j){return L.__proto__=j,L})($,m)}function u$1($,m){return!m||typeof m!="object"&&typeof m!="function"?function(L){if(L===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return L}($):m}function c$1($){var m=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var L,j=n$2($);if(m){var ee=n$2(this).constructor;L=Reflect.construct(j,arguments,ee)}else L=j.apply(this,arguments);return u$1(this,L)}}var i$1=function($){(function(re,le){if(typeof le!="function"&&le!==null)throw new TypeError("Super expression must either be null or a function");re.prototype=Object.create(le&&le.prototype,{constructor:{value:re,writable:!0,configurable:!0}}),le&&o$1(re,le)})(ee,Loader);var m,L,j=c$1(ee);function ee(){return t$2(this,ee),j.apply(this,arguments)}return m=ee,(L=[{key:"load",value:function(re){var le=re.path,ve=re.name;return new Promise(function(ye,Ee){var Me=new XMLHttpRequest;Me.addEventListener("load",function(){var Ce=JSON.parse(Me.response);ye(Ce)}),Me.addEventListener("error",function(){Ee(new Error('ImageLoader : Error while loading resource "'.concat(ve,'"')))}),Me.open("GET",le),Me.send()})}}])&&r(m.prototype,L),ee}();class WorkerPool{constructor(m=4){this.pool=m,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(m){if(!this.workers[m]){const L=this.workerCreator();L.addEventListener("message",this._onMessage.bind(this,m)),this.workers[m]=L}}_getIdleWorker(){for(let m=0;m<this.pool;m++)if(!(this.workerStatus&1<<m))return m;return-1}_onMessage(m,L){const j=this.workersResolve[m];if(j&&j(L),this.queue.length){const{resolve:ee,msg:re,transfer:le}=this.queue.shift();this.workersResolve[m]=ee,this.workers[m].postMessage(re,le)}else this.workerStatus^=1<<m}setWorkerCreator(m){this.workerCreator=m}setWorkerLimit(m){this.pool=m}postMessage(m,L){return new Promise(j=>{const ee=this._getIdleWorker();ee!==-1?(this._initWorker(ee),this.workerStatus|=1<<ee,this.workersResolve[ee]=j,this.workers[ee].postMessage(m,L)):this.queue.push({resolve:j,msg:m,transfer:L})})}dispose(){this.workers.forEach(m=>m.terminate()),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}const t$1=0,n$1=2,p=1,x=2,E=0,F=1,X=10,nt=0,ct=9,gt=15,yt=16,dt=22,Ot=37,Ft=43,$t=76,se=83,pe=97,xe=100,de=103,Ae=109,Sn=165,In=166;class Si{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class Ii{constructor(m,L,j,ee){this._dataView=new DataView(m.buffer,m.byteOffset+L,j),this._littleEndian=ee,this._offset=0}_nextUint8(){const m=this._dataView.getUint8(this._offset);return this._offset+=1,m}_nextUint16(){const m=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,m}_nextUint32(){const m=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,m}_nextUint64(){const m=this._dataView.getUint32(this._offset,this._littleEndian)+4294967296*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,m}_nextInt32(){const m=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,m}_skip(m){return this._offset+=m,this}_scan(m,L=0){const j=this._offset;let ee=0;for(;this._dataView.getUint8(this._offset)!==L&&ee<m;)ee++,this._offset++;return ee<m&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+j,ee)}}const Ti=[171,75,84,88,32,50,48,187,13,10,26,10];function Ei($){return typeof TextDecoder<"u"?new TextDecoder().decode($):Buffer.from($).toString("utf8")}function Pi($){const m=new Uint8Array($.buffer,$.byteOffset,Ti.length);if(m[0]!==Ti[0]||m[1]!==Ti[1]||m[2]!==Ti[2]||m[3]!==Ti[3]||m[4]!==Ti[4]||m[5]!==Ti[5]||m[6]!==Ti[6]||m[7]!==Ti[7]||m[8]!==Ti[8]||m[9]!==Ti[9]||m[10]!==Ti[10]||m[11]!==Ti[11])throw new Error("Missing KTX 2.0 identifier.");const L=new Si,j=17*Uint32Array.BYTES_PER_ELEMENT,ee=new Ii($,Ti.length,j,!0);L.vkFormat=ee._nextUint32(),L.typeSize=ee._nextUint32(),L.pixelWidth=ee._nextUint32(),L.pixelHeight=ee._nextUint32(),L.pixelDepth=ee._nextUint32(),L.layerCount=ee._nextUint32(),L.faceCount=ee._nextUint32();const re=ee._nextUint32();L.supercompressionScheme=ee._nextUint32();const le=ee._nextUint32(),ve=ee._nextUint32(),ye=ee._nextUint32(),Ee=ee._nextUint32(),Me=ee._nextUint64(),Ce=ee._nextUint64(),De=new Ii($,Ti.length+j,3*re*8,!0);for(let at=0;at<re;at++)L.levels.push({levelData:new Uint8Array($.buffer,$.byteOffset+De._nextUint64(),De._nextUint64()),uncompressedByteLength:De._nextUint64()});const Be=new Ii($,le,ve,!0),ke={vendorId:Be._skip(4)._nextUint16(),descriptorType:Be._nextUint16(),versionNumber:Be._nextUint16(),descriptorBlockSize:Be._nextUint16(),colorModel:Be._nextUint8(),colorPrimaries:Be._nextUint8(),transferFunction:Be._nextUint8(),flags:Be._nextUint8(),texelBlockDimension:[Be._nextUint8(),Be._nextUint8(),Be._nextUint8(),Be._nextUint8()],bytesPlane:[Be._nextUint8(),Be._nextUint8(),Be._nextUint8(),Be._nextUint8(),Be._nextUint8(),Be._nextUint8(),Be._nextUint8(),Be._nextUint8()],samples:[]},Fe=(ke.descriptorBlockSize/4-6)/4;for(let at=0;at<Fe;at++){const Xe={bitOffset:Be._nextUint16(),bitLength:Be._nextUint8(),channelType:Be._nextUint8(),samplePosition:[Be._nextUint8(),Be._nextUint8(),Be._nextUint8(),Be._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};64&Xe.channelType?(Xe.sampleLower=Be._nextInt32(),Xe.sampleUpper=Be._nextInt32()):(Xe.sampleLower=Be._nextUint32(),Xe.sampleUpper=Be._nextUint32()),ke.samples[at]=Xe}L.dataFormatDescriptor.length=0,L.dataFormatDescriptor.push(ke);const Oe=new Ii($,ye,Ee,!0);for(;Oe._offset<Ee;){const at=Oe._nextUint32(),Xe=Oe._scan(at),ht=Ei(Xe),Bt=Oe._scan(at-Xe.byteLength);L.keyValue[ht]=ht.match(/^ktx/i)?Ei(Bt):Bt,Oe._offset%4&&Oe._skip(4-Oe._offset%4)}if(Ce<=0)return L;const Ne=new Ii($,Me,Ce,!0),ze=Ne._nextUint16(),$e=Ne._nextUint16(),He=Ne._nextUint32(),We=Ne._nextUint32(),qe=Ne._nextUint32(),Ye=Ne._nextUint32(),Ze=[];for(let at=0;at<re;at++)Ze.push({imageFlags:Ne._nextUint32(),rgbSliceByteOffset:Ne._nextUint32(),rgbSliceByteLength:Ne._nextUint32(),alphaSliceByteOffset:Ne._nextUint32(),alphaSliceByteLength:Ne._nextUint32()});const Ke=Me+Ne._offset,rt=Ke+He,ft=rt+We,mt=ft+qe,Et=new Uint8Array($.buffer,$.byteOffset+Ke,He),bt=new Uint8Array($.buffer,$.byteOffset+rt,We),Ct=new Uint8Array($.buffer,$.byteOffset+ft,qe),st=new Uint8Array($.buffer,$.byteOffset+mt,Ye);return L.globalData={endpointCount:ze,selectorCount:$e,imageDescs:Ze,endpointsData:Et,selectorsData:bt,tablesData:Ct,extendedData:st},L}let A,I,B;const g={env:{emscripten_notify_memory_growth:function($){B=new Uint8Array(I.exports.memory.buffer)}}};class Q{init(){return A||(A=typeof fetch<"u"?fetch("data:application/wasm;base64,"+C).then(m=>m.arrayBuffer()).then(m=>WebAssembly.instantiate(m,g)).then(this._init):WebAssembly.instantiate(Buffer.from(C,"base64"),g).then(this._init),A)}_init(m){I=m.instance,g.env.emscripten_notify_memory_growth(0)}decode(m,L=0){if(!I)throw new Error("ZSTDDecoder: Await .init() before decoding.");const j=m.byteLength,ee=I.exports.malloc(j);B.set(m,ee),L=L||Number(I.exports.ZSTD_findDecompressedSize(ee,j));const re=I.exports.malloc(L),le=I.exports.ZSTD_decompress(re,L,ee,j),ve=B.slice(re,re+le);return I.exports.free(ee),I.exports.free(re),ve}}const C="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ",_taskCache=new WeakMap;let _activeLoaders=0,_zstd;class KTX2Loader extends Loader$1{constructor(m){super(m),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new WorkerPool,this.workerSourceURL="",this.workerConfig=null,typeof MSC_TRANSCODER<"u"&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(m){return this.transcoderPath=m,this}setWorkerLimit(m){return this.workerPool.setWorkerLimit(m),this}async detectSupportAsync(m){return this.workerConfig={astcSupported:await m.hasFeatureAsync("texture-compression-astc"),etc1Supported:await m.hasFeatureAsync("texture-compression-etc1"),etc2Supported:await m.hasFeatureAsync("texture-compression-etc2"),dxtSupported:await m.hasFeatureAsync("texture-compression-bc"),bptcSupported:await m.hasFeatureAsync("texture-compression-bptc"),pvrtcSupported:await m.hasFeatureAsync("texture-compression-pvrtc")},this}detectSupport(m){return m.isWebGPURenderer===!0?this.workerConfig={astcSupported:m.hasFeature("texture-compression-astc"),etc1Supported:m.hasFeature("texture-compression-etc1"),etc2Supported:m.hasFeature("texture-compression-etc2"),dxtSupported:m.hasFeature("texture-compression-bc"),bptcSupported:m.hasFeature("texture-compression-bptc"),pvrtcSupported:m.hasFeature("texture-compression-pvrtc")}:this.workerConfig={astcSupported:m.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:m.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:m.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:m.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:m.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:m.extensions.has("WEBGL_compressed_texture_pvrtc")||m.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},this}init(){if(!this.transcoderPending){const m=new FileLoader(this.manager);m.setPath(this.transcoderPath),m.setWithCredentials(this.withCredentials);const L=m.loadAsync("basis_transcoder.js"),j=new FileLoader(this.manager);j.setPath(this.transcoderPath),j.setResponseType("arraybuffer"),j.setWithCredentials(this.withCredentials);const ee=j.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([L,ee]).then(([re,le])=>{const ve=KTX2Loader.BasisWorker.toString(),ye=["/* constants */","let _EngineFormat = "+JSON.stringify(KTX2Loader.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(KTX2Loader.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(KTX2Loader.BasisFormat),"/* basis_transcoder.js */",re,"/* worker */",ve.substring(ve.indexOf("{")+1,ve.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([ye])),this.transcoderBinary=le,this.workerPool.setWorkerCreator(()=>{const Ee=new Worker(this.workerSourceURL),Me=this.transcoderBinary.slice(0);return Ee.postMessage({type:"init",config:this.workerConfig,transcoderBinary:Me},[Me]),Ee})}),_activeLoaders>0&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),_activeLoaders++}return this.transcoderPending}load(m,L,j,ee){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");const re=new FileLoader(this.manager);re.setResponseType("arraybuffer"),re.setWithCredentials(this.withCredentials),re.load(m,le=>{if(_taskCache.has(le))return _taskCache.get(le).promise.then(L).catch(ee);this._createTexture(le).then(ve=>L?L(ve):null).catch(ee)},j,ee)}_createTextureFrom(m,L){const{faces:j,width:ee,height:re,format:le,type:ve,error:ye,dfdFlags:Ee}=m;if(ve==="error")return Promise.reject(ye);let Me;if(L.faceCount===6)Me=new CompressedCubeTexture(j,le,UnsignedByteType);else{const Ce=j[0].mipmaps;Me=L.layerCount>1?new CompressedArrayTexture(Ce,ee,re,L.layerCount,le,UnsignedByteType):new CompressedTexture(Ce,ee,re,le,UnsignedByteType)}return Me.minFilter=j[0].mipmaps.length===1?LinearFilter:LinearMipmapLinearFilter,Me.magFilter=LinearFilter,Me.generateMipmaps=!1,Me.needsUpdate=!0,Me.colorSpace=parseColorSpace(L),Me.premultiplyAlpha=!!(Ee&p),Me}async _createTexture(m,L={}){const j=Pi(new Uint8Array(m));if(j.vkFormat!==nt)return createRawTexture(j);const ee=L,re=this.init().then(()=>this.workerPool.postMessage({type:"transcode",buffer:m,taskConfig:ee},[m])).then(le=>this._createTextureFrom(le.data,j));return _taskCache.set(m,{promise:re}),re}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),_activeLoaders--,this}}KTX2Loader.BasisFormat={ETC1S:0,UASTC_4x4:1};KTX2Loader.TranscoderFormat={ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16};KTX2Loader.EngineFormat={RGBAFormat,RGBA_ASTC_4x4_Format,RGBA_BPTC_Format,RGBA_ETC2_EAC_Format,RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT5_Format,RGB_ETC1_Format,RGB_ETC2_Format,RGB_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT1_Format};KTX2Loader.BasisWorker=function(){let $,m,L;const j=_EngineFormat,ee=_TranscoderFormat,re=_BasisFormat;self.addEventListener("message",function(ke){const Fe=ke.data;switch(Fe.type){case"init":$=Fe.config,le(Fe.transcoderBinary);break;case"transcode":m.then(()=>{try{const{faces:Oe,buffers:Ne,width:ze,height:$e,hasAlpha:He,format:We,dfdFlags:qe}=ve(Fe.buffer);self.postMessage({type:"transcode",id:Fe.id,faces:Oe,width:ze,height:$e,hasAlpha:He,format:We,dfdFlags:qe},Ne)}catch(Oe){console.error(Oe),self.postMessage({type:"error",id:Fe.id,error:Oe.message})}});break}});function le(ke){m=new Promise(Fe=>{L={wasmBinary:ke,onRuntimeInitialized:Fe},BASIS(L)}).then(()=>{L.initializeBasis(),L.KTX2File===void 0&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")})}function ve(ke){const Fe=new L.KTX2File(new Uint8Array(ke));function Oe(){Fe.close(),Fe.delete()}if(!Fe.isValid())throw Oe(),new Error("THREE.KTX2Loader:	Invalid or unsupported .ktx2 file");const Ne=Fe.isUASTC()?re.UASTC_4x4:re.ETC1S,ze=Fe.getWidth(),$e=Fe.getHeight(),He=Fe.getLayers()||1,We=Fe.getLevels(),qe=Fe.getFaces(),Ye=Fe.getHasAlpha(),Ze=Fe.getDFDFlags(),{transcoderFormat:Ke,engineFormat:rt}=Ce(Ne,ze,$e,Ye);if(!ze||!$e||!We)throw Oe(),new Error("THREE.KTX2Loader:	Invalid texture");if(!Fe.startTranscoding())throw Oe(),new Error("THREE.KTX2Loader: .startTranscoding failed");const ft=[],mt=[];for(let Et=0;Et<qe;Et++){const bt=[];for(let Ct=0;Ct<We;Ct++){const st=[];let at,Xe;for(let Bt=0;Bt<He;Bt++){const Dt=Fe.getImageLevelInfo(Ct,Bt,Et);Et===0&&Ct===0&&Bt===0&&(Dt.origWidth%4!==0||Dt.origHeight%4!==0)&&console.warn("THREE.KTX2Loader: ETC1S and UASTC textures should use multiple-of-four dimensions."),We>1?(at=Dt.origWidth,Xe=Dt.origHeight):(at=Dt.width,Xe=Dt.height);const Jt=new Uint8Array(Fe.getImageTranscodedSizeInBytes(Ct,Bt,0,Ke));if(!Fe.transcodeImage(Jt,Ct,Bt,Et,Ke,0,-1,-1))throw Oe(),new Error("THREE.KTX2Loader: .transcodeImage failed.");st.push(Jt)}const ht=Be(st);bt.push({data:ht,width:at,height:Xe}),mt.push(ht.buffer)}ft.push({mipmaps:bt,width:ze,height:$e,format:rt})}return Oe(),{faces:ft,buffers:mt,width:ze,height:$e,hasAlpha:Ye,format:rt,dfdFlags:Ze}}const ye=[{if:"astcSupported",basisFormat:[re.UASTC_4x4],transcoderFormat:[ee.ASTC_4x4,ee.ASTC_4x4],engineFormat:[j.RGBA_ASTC_4x4_Format,j.RGBA_ASTC_4x4_Format],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[re.ETC1S,re.UASTC_4x4],transcoderFormat:[ee.BC7_M5,ee.BC7_M5],engineFormat:[j.RGBA_BPTC_Format,j.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[re.ETC1S,re.UASTC_4x4],transcoderFormat:[ee.BC1,ee.BC3],engineFormat:[j.RGBA_S3TC_DXT1_Format,j.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[re.ETC1S,re.UASTC_4x4],transcoderFormat:[ee.ETC1,ee.ETC2],engineFormat:[j.RGB_ETC2_Format,j.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[re.ETC1S,re.UASTC_4x4],transcoderFormat:[ee.ETC1],engineFormat:[j.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[re.ETC1S,re.UASTC_4x4],transcoderFormat:[ee.PVRTC1_4_RGB,ee.PVRTC1_4_RGBA],engineFormat:[j.RGB_PVRTC_4BPPV1_Format,j.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}],Ee=ye.sort(function(ke,Fe){return ke.priorityETC1S-Fe.priorityETC1S}),Me=ye.sort(function(ke,Fe){return ke.priorityUASTC-Fe.priorityUASTC});function Ce(ke,Fe,Oe,Ne){let ze,$e;const He=ke===re.ETC1S?Ee:Me;for(let We=0;We<He.length;We++){const qe=He[We];if($[qe.if]&&qe.basisFormat.includes(ke)&&!(Ne&&qe.transcoderFormat.length<2)&&!(qe.needsPowerOfTwo&&!(De(Fe)&&De(Oe))))return ze=qe.transcoderFormat[Ne?1:0],$e=qe.engineFormat[Ne?1:0],{transcoderFormat:ze,engineFormat:$e}}return console.warn("THREE.KTX2Loader: No suitable compressed texture format found. Decoding to RGBA32."),ze=ee.RGBA32,$e=j.RGBAFormat,{transcoderFormat:ze,engineFormat:$e}}function De(ke){return ke<=2?!0:(ke&ke-1)===0&&ke!==0}function Be(ke){if(ke.length===1)return ke[0];let Fe=0;for(let ze=0;ze<ke.length;ze++){const $e=ke[ze];Fe+=$e.byteLength}const Oe=new Uint8Array(Fe);let Ne=0;for(let ze=0;ze<ke.length;ze++){const $e=ke[ze];Oe.set($e,Ne),Ne+=$e.byteLength}return Oe}};const UNCOMPRESSED_FORMATS=new Set([RGBAFormat,RGFormat,RedFormat]),FORMAT_MAP={[Ae]:RGBAFormat,[pe]:RGBAFormat,[Ot]:RGBAFormat,[Ft]:RGBAFormat,[de]:RGFormat,[se]:RGFormat,[yt]:RGFormat,[dt]:RGFormat,[xe]:RedFormat,[$t]:RedFormat,[gt]:RedFormat,[ct]:RedFormat,[In]:RGBA_ASTC_6x6_Format,[Sn]:RGBA_ASTC_6x6_Format},TYPE_MAP={[Ae]:FloatType,[pe]:HalfFloatType,[Ot]:UnsignedByteType,[Ft]:UnsignedByteType,[de]:FloatType,[se]:HalfFloatType,[yt]:UnsignedByteType,[dt]:UnsignedByteType,[xe]:FloatType,[$t]:HalfFloatType,[gt]:UnsignedByteType,[ct]:UnsignedByteType,[In]:UnsignedByteType,[Sn]:UnsignedByteType};async function createRawTexture($){const{vkFormat:m}=$;if(FORMAT_MAP[m]===void 0)throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");let L;$.supercompressionScheme===n$1&&(_zstd||(_zstd=new Promise(async re=>{const le=new Q;await le.init(),re(le)})),L=await _zstd);const j=[];for(let re=0;re<$.levels.length;re++){const le=Math.max(1,$.pixelWidth>>re),ve=Math.max(1,$.pixelHeight>>re),ye=$.pixelDepth?Math.max(1,$.pixelDepth>>re):0,Ee=$.levels[re];let Me;if($.supercompressionScheme===t$1)Me=Ee.levelData;else if($.supercompressionScheme===n$1)Me=L.decode(Ee.levelData,Ee.uncompressedByteLength);else throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");let Ce;TYPE_MAP[m]===FloatType?Ce=new Float32Array(Me.buffer,Me.byteOffset,Me.byteLength/Float32Array.BYTES_PER_ELEMENT):TYPE_MAP[m]===HalfFloatType?Ce=new Uint16Array(Me.buffer,Me.byteOffset,Me.byteLength/Uint16Array.BYTES_PER_ELEMENT):Ce=Me,j.push({data:Ce,width:le,height:ve,depth:ye})}let ee;if(UNCOMPRESSED_FORMATS.has(FORMAT_MAP[m]))ee=$.pixelDepth===0?new DataTexture(j[0].data,$.pixelWidth,$.pixelHeight):new Data3DTexture(j[0].data,$.pixelWidth,$.pixelHeight,$.pixelDepth);else{if($.pixelDepth>0)throw new Error("THREE.KTX2Loader: Unsupported pixelDepth.");ee=new CompressedTexture(j,$.pixelWidth,$.pixelHeight)}return ee.mipmaps=j,ee.type=TYPE_MAP[m],ee.format=FORMAT_MAP[m],ee.colorSpace=parseColorSpace($),ee.needsUpdate=!0,Promise.resolve(ee)}function parseColorSpace($){const m=$.dataFormatDescriptor[0];return m.colorPrimaries===F?m.transferFunction===x?SRGBColorSpace:LinearSRGBColorSpace:m.colorPrimaries===X?m.transferFunction===x?DisplayP3ColorSpace:LinearDisplayP3ColorSpace:(m.colorPrimaries===E||console.warn(`THREE.KTX2Loader: Unsupported color primaries, "${m.colorPrimaries}"`),NoColorSpace)}function t($,m){if(!($ instanceof m))throw new TypeError("Cannot call a class as a function")}function n($,m){for(var L=0;L<m.length;L++){var j=m[L];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty($,j.key,j)}}function o($){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(m){return m.__proto__||Object.getPrototypeOf(m)})($)}function a($,m){return(a=Object.setPrototypeOf||function(L,j){return L.__proto__=j,L})($,m)}function c($,m){return!m||typeof m!="object"&&typeof m!="function"?function(L){if(L===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return L}($):m}function u($){var m=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var L,j=o($);if(m){var ee=o(this).constructor;L=Reflect.construct(j,arguments,ee)}else L=j.apply(this,arguments);return c(this,L)}}var i=function($){(function(re,le){if(typeof le!="function"&&le!==null)throw new TypeError("Super expression must either be null or a function");re.prototype=Object.create(le&&le.prototype,{constructor:{value:re,writable:!0,configurable:!0}}),le&&a(re,le)})(ee,Loader);var m,L,j=u(ee);function ee(){var re,le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(t(this,ee),(re=j.call(this,le))._loader=new KTX2Loader,re._transcoderPath=le.transcoderPath,re._renderer=le.renderer,!re._transcoderPath)throw new Error("ThreeKTX2TextureLoader: transcoderPath is not defined");if(!re._renderer)throw new Error("ThreeKTX2TextureLoader: renderer is not defined");return re._loader.setTranscoderPath(re._transcoderPath),re._loader.detectSupport(re._renderer),re}return m=ee,(L=[{key:"load",value:function(re){var le=this,ve=re.path;return new Promise(function(ye,Ee){le._loader.load(ve,ye,null,Ee)})}}])&&n(m.prototype,L),ee}();class ThreeLUT3dlLoader extends Loader{constructor(m){super(m),this._loader=new LUT3dlLoader}load({path:m}){return new Promise((L,j)=>{this._loader.load(m,L,null,j)})}}class RGBELoader extends DataTextureLoader{constructor(m){super(m),this.type=HalfFloatType}parse(m){const le=function(Ze,Ke){switch(Ze){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(Ke||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(Ke||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(Ke||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(Ke||""))}},Me=`
`,Ce=function(Ze,Ke,rt){Ke=Ke||1024;let mt=Ze.pos,Et=-1,bt=0,Ct="",st=String.fromCharCode.apply(null,new Uint16Array(Ze.subarray(mt,mt+128)));for(;0>(Et=st.indexOf(Me))&&bt<Ke&&mt<Ze.byteLength;)Ct+=st,bt+=st.length,mt+=128,st+=String.fromCharCode.apply(null,new Uint16Array(Ze.subarray(mt,mt+128)));return-1<Et?(rt!==!1&&(Ze.pos+=bt+Et+1),Ct+st.slice(0,Et)):!1},De=function(Ze){const Ke=/^#\?(\S+)/,rt=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,ft=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,mt=/^\s*FORMAT=(\S+)\s*$/,Et=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,bt={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let Ct,st;for((Ze.pos>=Ze.byteLength||!(Ct=Ce(Ze)))&&le(1,"no header found"),(st=Ct.match(Ke))||le(3,"bad initial token"),bt.valid|=1,bt.programtype=st[1],bt.string+=Ct+`
`;Ct=Ce(Ze),Ct!==!1;){if(bt.string+=Ct+`
`,Ct.charAt(0)==="#"){bt.comments+=Ct+`
`;continue}if((st=Ct.match(rt))&&(bt.gamma=parseFloat(st[1])),(st=Ct.match(ft))&&(bt.exposure=parseFloat(st[1])),(st=Ct.match(mt))&&(bt.valid|=2,bt.format=st[1]),(st=Ct.match(Et))&&(bt.valid|=4,bt.height=parseInt(st[1],10),bt.width=parseInt(st[2],10)),bt.valid&2&&bt.valid&4)break}return bt.valid&2||le(3,"missing format specifier"),bt.valid&4||le(3,"missing image size specifier"),bt},Be=function(Ze,Ke,rt){const ft=Ke;if(ft<8||ft>32767||Ze[0]!==2||Ze[1]!==2||Ze[2]&128)return new Uint8Array(Ze);ft!==(Ze[2]<<8|Ze[3])&&le(3,"wrong scanline width");const mt=new Uint8Array(4*Ke*rt);mt.length||le(4,"unable to allocate buffer space");let Et=0,bt=0;const Ct=4*ft,st=new Uint8Array(4),at=new Uint8Array(Ct);let Xe=rt;for(;Xe>0&&bt<Ze.byteLength;){bt+4>Ze.byteLength&&le(1),st[0]=Ze[bt++],st[1]=Ze[bt++],st[2]=Ze[bt++],st[3]=Ze[bt++],(st[0]!=2||st[1]!=2||(st[2]<<8|st[3])!=ft)&&le(3,"bad rgbe scanline format");let ht=0,Bt;for(;ht<Ct&&bt<Ze.byteLength;){Bt=Ze[bt++];const Jt=Bt>128;if(Jt&&(Bt-=128),(Bt===0||ht+Bt>Ct)&&le(3,"bad scanline data"),Jt){const tn=Ze[bt++];for(let zt=0;zt<Bt;zt++)at[ht++]=tn}else at.set(Ze.subarray(bt,bt+Bt),ht),ht+=Bt,bt+=Bt}const Dt=ft;for(let Jt=0;Jt<Dt;Jt++){let tn=0;mt[Et]=at[Jt+tn],tn+=ft,mt[Et+1]=at[Jt+tn],tn+=ft,mt[Et+2]=at[Jt+tn],tn+=ft,mt[Et+3]=at[Jt+tn],Et+=4}Xe--}return mt},ke=function(Ze,Ke,rt,ft){const mt=Ze[Ke+3],Et=Math.pow(2,mt-128)/255;rt[ft+0]=Ze[Ke+0]*Et,rt[ft+1]=Ze[Ke+1]*Et,rt[ft+2]=Ze[Ke+2]*Et,rt[ft+3]=1},Fe=function(Ze,Ke,rt,ft){const mt=Ze[Ke+3],Et=Math.pow(2,mt-128)/255;rt[ft+0]=DataUtils.toHalfFloat(Math.min(Ze[Ke+0]*Et,65504)),rt[ft+1]=DataUtils.toHalfFloat(Math.min(Ze[Ke+1]*Et,65504)),rt[ft+2]=DataUtils.toHalfFloat(Math.min(Ze[Ke+2]*Et,65504)),rt[ft+3]=DataUtils.toHalfFloat(1)},Oe=new Uint8Array(m);Oe.pos=0;const Ne=De(Oe),ze=Ne.width,$e=Ne.height,He=Be(Oe.subarray(Oe.pos),ze,$e);let We,qe,Ye;switch(this.type){case FloatType:Ye=He.length/4;const Ze=new Float32Array(Ye*4);for(let rt=0;rt<Ye;rt++)ke(He,rt*4,Ze,rt*4);We=Ze,qe=FloatType;break;case HalfFloatType:Ye=He.length/4;const Ke=new Uint16Array(Ye*4);for(let rt=0;rt<Ye;rt++)Fe(He,rt*4,Ke,rt*4);We=Ke,qe=HalfFloatType;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:ze,height:$e,data:We,header:Ne.string,gamma:Ne.gamma,exposure:Ne.exposure,type:qe}}setDataType(m){return this.type=m,this}load(m,L,j,ee){function re(le,ve){switch(le.type){case FloatType:case HalfFloatType:le.colorSpace=LinearSRGBColorSpace,le.minFilter=LinearFilter,le.magFilter=LinearFilter,le.generateMipmaps=!1,le.flipY=!0;break}L&&L(le,ve)}return super.load(m,re,j,ee)}}class ThreeRBGELoader extends Loader{constructor(m){super(m),this._loader=new RGBELoader}load({path:m}){return new Promise((j,ee)=>{this._loader.load(m,j,null,ee)})}}class Parser{constructor(){Rn(this,"seperator",",")}timestampToSeconds(m){const[L,j]=m.split(","),ee=parseInt(j),[re,le,ve]=L.split(":").map(Ee=>parseInt(Ee)),ye=ee*.001+ve+60*le+3600*re;return Math.round(ye*1e3)/1e3}correctFormat(m){let L=m.replace(".",",");var j=null,ee=null,re=null,le=null,[ve,ye]=L.split(",");le=this.fixed_str_digit(3,ye);var[Ee,Me,Ce]=ve.split(":");return j=this.fixed_str_digit(2,Ee,!1),ee=this.fixed_str_digit(2,Me,!1),re=this.fixed_str_digit(2,Ce,!1),`${j}:${ee}:${re},${le}`}fixed_str_digit(m,L,j=!0){if(L.length==m)return L;if(L.length>m)return L.slice(0,m);if(L.length<m)return j?L.padEnd(m,"0"):L.padStart(m,"0")}tryComma(m){m=m.replace(/\r/g,"");var L=/(\d+)\n(\d{1,2}:\d{2}:\d{2},\d{1,3}) --> (\d{1,2}:\d{2}:\d{2},\d{1,3})/g;let j=m.split(L);return j.shift(),j}tryDot(m){m=m.replace(/\r/g,"");var L=/(\d+)\n(\d{1,2}:\d{2}:\d{2}\.\d{1,3}) --> (\d{1,2}:\d{2}:\d{2}\.\d{1,3})/g;let j=m.split(L);return j.shift(),this.seperator=".",j}fromSrt(m){var L=m,j=this.tryComma(L);j.length==0&&(j=this.tryDot(L));for(var ee=[],re=0;re<j.length;re+=4){const ve=this.correctFormat(j[re+1].trim()),ye=this.correctFormat(j[re+2].trim());var le={id:j[re].trim(),startTime:ve,startSeconds:this.timestampToSeconds(ve),endTime:ye,endSeconds:this.timestampToSeconds(ye),text:j[re+3].trim()};ee.push(le)}return ee}toSrt(m){var L="";const j=`\r
`;for(var ee=0;ee<m.length;ee++){var re=m[ee];L+=re.id+j,L+=re.startTime+" --> "+re.endTime+j,L+=re.text.replace(`
`,j)+j+j}return L}}class SRTLoader extends Loader{load({path:m,name:L}){return new Promise((j,ee)=>{const re=new XMLHttpRequest;re.addEventListener("load",()=>{j(this.parse(re.response))}),re.addEventListener("error",()=>{ee(new Error(`SRTLoader : Error while loading resource "${L}"`))}),re.open("GET",m),re.send()})}parse(m){return new Parser().fromSrt(m)}}const config={renderer:{clearColor:"#000000"},composer:{enabled:!0,bloom:{enabled:!0,strength:1.3,radius:.5,threshold:.15,smoothWidth:.29},final:{menuLut:{resource:{type:"3dl",path:"/webgl/home/lut/menu.3DL",name:"lut/menu"}},sceneLuts:[{resource:{type:"3dl",path:"/webgl/home/lut/scene_1.3DL",name:"lut/scene-1"}},{resource:{type:"3dl",path:"/webgl/home/lut/scene_2.3DL",name:"lut/scene-2"}},{resource:{type:"3dl",path:"/webgl/home/lut/scene_3.3DL",name:"lut/scene-3"}}],paintSectionLuts:[{resource:{type:"3dl",path:"/webgl/home/lut/paint_1.3DL",name:"lut/paint-section-1"}},{resource:{type:"3dl",path:"/webgl/home/lut/paint_2.3DL",name:"lut/paint-section-2"}},{resource:{type:"3dl",path:"/webgl/home/lut/paint_3.3DL",name:"lut/paint-section-3"}},{resource:{type:"3dl",path:"/webgl/home/lut/paint_4.3DL",name:"lut/paint-section-4"}},{resource:{type:"3dl",path:"/webgl/home/lut/paint_5.3DL",name:"lut/paint-section-5"}}]}},scroll:{},renderOrders:{griffin:-1,planetsAura:-2,planets:-3,planetsLink:[-4,-9],sky:-10,clouds:-1},components:{egg:{seed:9,roughness:.65,specular:10,diffuseColor:"#b5fafa",normal:{scale:{x:5,y:3.17},offset:{x:1.76,y:1.2},strength:2},transmission:{thickness:1,blur:3,ior:1.04,attenuationColor:"#ffc78a",attenuationDistance:1.7},fresnel:{color:"#94b9eb",power:.91,intensity:3.21,noise:{size:1.3,speed:1}},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},displacement:{intensity:.07,noise:{speed:2.21,size:5}},glow:{color:"#ffc06f",color2:"#4444ff",colorMix:3,intensity:1.5,size:2,offset:-.023,noise:{speed:1.2,scale:3,intensity:.6,range:{min:-2,max:3}}},backGlow:{size:{x:.33,y:.219,z:.106},scale:1.13,offset:.026,falloff:.5,color:"#418aff2c",falloffPower:20,shrink:-.02},embryo:{color:"#4100ff",size:.47},explosion:{insideColor:"#dea370",noiseScale:1,flareColor1:"#00f4ff",flareColor2:"#3700ff"},bloom:{transmissionIntensity:.32,fresnelIntensity:.58,lumaClamping:{min:.18,max:.47}}},griffin:{roughness:.2,specular:1,diffuseColor:"#c1c1c1",normal:{scale:10,strength:.6},transmission:{thickness:1,blur:4,ior:1.2,attenuationColor:"#ffffff",attenuationDistance:1},fresnel:{color:"#dbc8fe",power:2,intensity:2},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},glow:{color:"#bfbbf8",intensity:.53,size:7,position:{x:0,y:-.026,z:.3},grading:{contrast:1.5,brightness:1,saturation:1,lightBoost:3},displacement:{strength:.26,noise:{speed:.01,size:{x:1,y:1}}},fade:{range:{max:.5,min:.3},noise:{size:3,speed:.1,strength:.3}},caustics:{speed:.1,size:1.5}},spotlight:{geometry:{radius:{x:.68,y:1.71},height:4.33,offset:.3,segments:16},dithering:.1,color1:"#332daa",color2:"#e900ff",opacity:.75,fresnel:.15,horizontalFade:{range:{min:.5,max:.81},power:.2},planets:{dithering:.02,color1:"#764bc7",color2:"#9bace7",opacity:1,fresnel:.2,highlights:[{color1:"#6e7e49",color2:"#b4a288"},{color1:"#2ea8af",color2:"#9fdfba"},{color1:"#8051ff",color2:"#b09bee"},{color1:"#b40f0f",color2:"#f19d28"},{color1:"#4839c7",color2:"#58b7ca"}]}},bloom:{transmission:{intensity:0,lumaClamping:{min:.55,max:.66}},environment:{intensity:1,lumaClamping:{min:.53,max:1}},fresnel:{intensity:.5}}},stela:{emissive:"#feffe7",emissiveStrength:2,bloom:"#ffe2bf",bloomStrength:3,highlights:[{emissive:"#feffe7",emissiveStrength:8,bloom:"#ffe2bf",bloomStrength:16},{emissive:"#bff5c4",emissiveStrength:8,bloom:"#9bf79b",bloomStrength:16},{emissive:"#e1cef3",emissiveStrength:8,bloom:"#ee53f5",bloomStrength:16},{emissive:"#e3d6bd",emissiveStrength:8,bloom:"#de9320",bloomStrength:16},{emissive:"#35e1e1",emissiveStrength:8,bloom:"#5676a6",bloomStrength:16}]},planets:{light:{color:"#fffaef",startDirection:{x:-.707106781187,y:0,z:0,w:.707106781187},endDirection:{x:-.99168010461,y:0,z:0,w:.142023132342},blend:.85},list:[{texture:"planet-01",highlightIndex:3,hueShift:0,groundAtmosphere:{color1:"#524666",color2:"#9f7d7d",range:{min:.8,max:1.001},opacity:.8},atmosphere:{range:{min:.113,max:.565},color:"#e0e0f5",dispersion:.25},highlightAtmosphere:{range:{min:0,max:.96},color:"#ffb6b6",dispersion:-.32},aura:{color:{color:"#ffffff",white:1,magenta:.10333,cyan:.20333,opacity:.4,power:2.01},highlightColor:{color:"#ffe4da",white:1,magenta:.10333,cyan:.20333,opacity:.7,power:2.01},geometry:{radius:{min:.68,max:1.4},height:0,quality:8},noise:{speed:{x:.027,y:.013},size:{x:1,y:1},offset:{x:0,y:0}},gradient:{center:.2,ease:{x:.24,y:.2},intensity:2},mask:{uvSpeed:0,noiseSpeed:0,noiseSize:{x:.15,y:.04},noiseOffset:{x:-.02,y:.02},boostStrength:2}}},{texture:"planet-03",highlightIndex:2,hueShift:0,groundAtmosphere:{color1:"#524666",color2:"#9f7d7d",range:{min:.8,max:1.001},opacity:.8},atmosphere:{range:{min:0,max:.597},color:"#e0e0f5",dispersion:.25},highlightAtmosphere:{range:{min:.129,max:.645},color:"#c099ff",dispersion:.2},aura:{color:{color:"#ffffff",white:.76,magenta:.07333,cyan:.14333,opacity:3,power:3.5},highlightColor:{color:"#dddbf4",white:1.05,magenta:.20333,cyan:.06333,opacity:8,power:5},geometry:{radius:{min:.81,max:1.4},height:0,quality:8},noise:{speed:{x:-.03,y:.01},size:{x:1,y:.47},offset:{x:0,y:.03}},gradient:{center:.23,ease:{x:.25,y:.45},intensity:1.15},mask:{uvSpeed:0,noiseSpeed:0,noiseSize:{x:-.05,y:.05},noiseOffset:{x:-5.2,y:1.94},boostStrength:.79}}},{texture:"planet-02",highlightIndex:0,hueShift:0,groundAtmosphere:{color1:"#7375bc",color2:"#ca9ca9",range:{min:.8,max:1},opacity:.8},atmosphere:{range:{min:.2,max:.6},color:"#e0e0f5",dispersion:.25},highlightAtmosphere:{range:{min:.2,max:.6},color:"#fff4e4",dispersion:0},aura:{color:{color:"#ffffff",white:.98,magenta:.14333,cyan:.15333,opacity:.44,power:6.01},highlightColor:{color:"#fdfff3",white:1,magenta:.10333,cyan:.10333,opacity:.5,power:8},geometry:{radius:{min:.6,max:1.4},height:0,quality:8},noise:{speed:{x:-.026,y:.01},size:{x:-1,y:.57},offset:{x:0,y:0}},gradient:{center:.39,ease:{x:.05,y:.1},intensity:2},mask:{uvSpeed:-.3,noiseSpeed:0,noiseSize:{x:.02,y:.02},noiseOffset:{x:.04,y:.11},boostStrength:1}}},{texture:"planet-04",highlightIndex:1,hueShift:0,groundAtmosphere:{color1:"#b5fdab",color2:"#69fbff",range:{min:.823,max:1.008},opacity:.9},atmosphere:{range:{min:.129,max:.565},color:"#e0e0f5",dispersion:.2},highlightAtmosphere:{range:{min:0,max:.621},color:"#81c699",dispersion:.2},aura:{color:{color:"#ffffff",white:1,magenta:.10333,cyan:.20333,opacity:1.2,power:5.01},highlightColor:{color:"#8bedde",white:1,magenta:.12333,cyan:.36333,opacity:1.27,power:3},geometry:{radius:{min:.5,max:1.47},height:0,quality:8},noise:{speed:{x:.027,y:-.01},size:{x:1,y:0},offset:{x:1,y:-.2}},gradient:{center:.48,ease:{x:.54,y:.62},intensity:.83},mask:{uvSpeed:.1,noiseSpeed:0,noiseSize:{x:.01,y:0},noiseOffset:{x:.01,y:0},boostStrength:1}}}],links:[{enabled:!1,geometry:{scale1:1,scale2:1},fade:{planet1:{min:-40,max:40},planet2:{min:-40,max:40}},color:{white:1,magenta:.10333,cyan:.20333,opacity:.4,power:2.01},noise:{speed:{x:.027,y:.013},size:{x:1,y:1},offset:{x:0,y:0}},gradient:{mirror:!0,center:.2,ease:{x:.24,y:.2},intensity:2},mask:{mirror:!0,uvSpeed:0,noiseSpeed:0,noiseSize:{x:.15,y:.04},noiseOffset:{x:-.02,y:.02},boostStrength:2}},{enabled:!1,geometry:{scale1:1,scale2:1},fade:{planet1:{min:-40,max:40},planet2:{min:-40,max:40}},color:{white:1,magenta:.10333,cyan:.20333,opacity:.4,power:2.01},noise:{speed:{x:.027,y:.013},size:{x:1,y:1},offset:{x:0,y:0}},gradient:{mirror:!0,center:.2,ease:{x:.24,y:.2},intensity:2},mask:{mirror:!0,uvSpeed:0,noiseSpeed:0,noiseSize:{x:.15,y:.04},noiseOffset:{x:-.02,y:.02},boostStrength:2}},{enabled:!0,geometry:{scale1:1,scale2:1},fade:{planet1:{min:-12,max:-12},planet2:{min:-108,max:-108}},color:{white:1,magenta:.10333,cyan:.20333,opacity:.1,power:4},noise:{speed:{x:.054,y:.026},size:{x:1,y:1},offset:{x:0,y:0}},gradient:{mirror:!1,center:.57,ease:{x:.49,y:.93},intensity:3},mask:{mirror:!0,uvSpeed:0,noiseSpeed:0,noiseSize:{x:.06,y:.12},noiseOffset:{x:1.07,y:0},boostStrength:2}},{enabled:!0,geometry:{scale1:1,scale2:.78},fade:{planet1:{min:-6,max:13},planet2:{min:-13,max:0}},color:{white:1,magenta:.15333,cyan:.30333,opacity:.1,power:3},noise:{speed:{x:.054,y:.026},size:{x:1,y:1},offset:{x:0,y:0}},gradient:{mirror:!1,center:.42,ease:{x:.71,y:.16},intensity:2},mask:{mirror:!0,uvSpeed:0,noiseSpeed:0,noiseSize:{x:.12,y:0},noiseOffset:{x:1.61,y:.02},boostStrength:2}},{enabled:!0,geometry:{scale1:1.49,scale2:1.5},fade:{planet1:{min:-20,max:-15},planet2:{min:-12,max:-10}},color:{white:.5,magenta:.10333,cyan:.20333,opacity:.1,power:2},noise:{speed:{x:.06,y:.002},size:{x:-.74,y:.39},offset:{x:10.22,y:10.49}},gradient:{mirror:!1,center:.5,ease:{x:.72,y:.18},intensity:2},mask:{mirror:!1,uvSpeed:0,noiseSpeed:0,noiseSize:{x:.44,y:.69},noiseOffset:{x:1.35,y:1.89},boostStrength:4}},{enabled:!0,geometry:{scale1:1,scale2:1.01},fade:{planet1:{min:-13,max:13},planet2:{min:-1,max:4}},color:{white:1.2,magenta:.20333,cyan:.30333,opacity:.15,power:3},noise:{speed:{x:-.02,y:0},size:{x:.15,y:1.09},offset:{x:0,y:0}},gradient:{mirror:!1,center:.5,ease:{x:.6,y:.4},intensity:1},mask:{mirror:!1,uvSpeed:0,noiseSpeed:.6,noiseSize:{x:.21,y:-.31},noiseOffset:{x:-.18,y:-1.48},boostStrength:1.5}}]},buildingLights:{opacity:.52,intensity:2.5,size:2.5},buildingFog:{color:"#4e4165",range1:{min:1.81,max:6.84},range2:{min:0,max:.37}},globalBuilding:{intensity:1,bloomIntensity:1},billboards:{0:{color1:"#727894",color2:"#8a86a1",lcdScale:{x:60,y:54}},1:{color1:"#727894",color2:"#8a86a1",lcdScale:{x:60,y:54}},2:{color1:"#727894",color2:"#676383",lcdScale:{x:60,y:54}},3:{color1:"#dee2f9",color2:"#6666a0",lcdScale:{x:90,y:90}},4:{color1:"#646d97",color2:"#b3b5bd",lcdScale:{x:90,y:90}},5:{color1:"#eac9c9",color2:"#617ed6",lcdScale:{x:70,y:70}},6:{color1:"#adbadd",color2:"#8d94b3",lcdScale:{x:160,y:100}},7:{color1:"#727894",color2:"#676383",lcdScale:{x:60,y:80}},8:{color1:"#646d97",color2:"#b3b5bd",lcdScale:{x:60,y:60}},9:{color1:"#adbadd",color2:"#8d94b3",lcdScale:{x:50,y:50}},10:{color1:"#adbadd",color2:"#8d94b3",lcdScale:{x:90,y:90}},11:{color1:"#adbadd",color2:"#8d94b3",lcdScale:{x:100,y:100}},12:{color1:"#a8afd1",color2:"#7b7991",lcdScale:{x:60,y:60}},13:{color1:"#646d97",color2:"#b3b5bd",lcdScale:{x:90,y:90}},14:{color1:"#adbadd",color2:"#b3b5bd",lcdScale:{x:100,y:100}},15:{color1:"#adbadd",color2:"#7e86ad",lcdScale:{x:100,y:100}},16:{color1:"#cacbee",color2:"#8d94b3",lcdScale:{x:100,y:100}},17:{color1:"#959292",color2:"#8d94b3",lcdScale:{x:100,y:100}},18:{color1:"#adbadd",color2:"#8d94b3",lcdScale:{x:100,y:100}}},buildings:{10:{roughness:.2,specular:.1,diffuseColor:"#ab75da",interior:{objectSpace:!1,size:1,blur:.3,repeat:{x:60,y:25},offset:{x:-.66,y:0}},transmission:{thickness:15,blur:0,ior:1.04,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.1},gradient:{color:"#f4aaff",range:{min:.08064516129,max:.693548387097},opacity:.608695652174},bloom:{diffuse:-.1,gradient:.2,transmission:{intensity:1,lumaClamping:{min:.27,max:.56}},env:{intensity:.3,lumaClamping:{min:.55,max:.68}}}},11:{roughness:.2,specular:.2,diffuseColor:"#da75ca",interior:{objectSpace:!1,size:1,blur:.3,repeat:{x:10,y:26},offset:{x:0,y:.08}},transmission:{thickness:15,blur:0,ior:1.04,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.06},gradient:{color:"#63196f",range:{min:-.306451612903,max:.758064516129},opacity:.608695652174},bloom:{diffuse:-.1,gradient:3,transmission:{intensity:1,lumaClamping:{min:.27,max:.56}},env:{intensity:.3,lumaClamping:{min:.55,max:.68}}}},12:{roughness:0,specular:1,diffuseColor:"#7f87cb",interior:{objectSpace:!1,size:.79,blur:0,repeat:{x:22,y:65},offset:{x:-.76,y:-3.51}},transmission:{thickness:15,blur:0,ior:1,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.06},gradient:{color:"#f4aaff",range:{min:-.145161290323,max:.435483870968},opacity:.608695652174},bloom:{diffuse:0,gradient:-.5,transmission:{intensity:1,lumaClamping:{min:0,max:.26}},env:{intensity:1,lumaClamping:{min:.24,max:1}}}},13:{roughness:.2,specular:.1,diffuseColor:"#ab75da",interior:{objectSpace:!1,size:1,blur:.3,repeat:{x:50,y:25},offset:{x:0,y:.5}},transmission:{thickness:15,blur:0,ior:1.04,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.1},gradient:{color:"#f4aaff",range:{min:.08064516129,max:.693548387097},opacity:.608695652174},bloom:{diffuse:-.1,gradient:.2,transmission:{intensity:1,lumaClamping:{min:.27,max:.56}},env:{intensity:.3,lumaClamping:{min:.55,max:.68}}}},14:{roughness:.1,specular:.1,diffuseColor:"#ab75da",interior:{objectSpace:!1,size:1,blur:.38,repeat:{x:20,y:60},offset:{x:-1.63,y:.26}},transmission:{thickness:15,blur:0,ior:1,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:1.3},ambientOcclusion:{size:1,intensity:.05},gradient:{color:"#f4aaff",range:{min:.08064516129,max:.693548387097},opacity:.608695652174},bloom:{diffuse:.17,gradient:-.64,transmission:{intensity:.6,lumaClamping:{min:0,max:.29}},env:{intensity:.5,lumaClamping:{min:.61,max:1}}}},15:{roughness:.2,specular:.1,diffuseColor:"#ab75da",interior:{objectSpace:!1,size:1,blur:.3,repeat:{x:80,y:40},offset:{x:1.91,y:.15}},transmission:{thickness:15,blur:0,ior:1.07,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:1},ambientOcclusion:{size:1,intensity:.1},gradient:{color:"#54388c",range:{min:-.177419354839,max:.435483870968},opacity:1},bloom:{diffuse:-.1,gradient:.2,transmission:{intensity:.8,lumaClamping:{min:.14,max:.26}},env:{intensity:7,lumaClamping:{min:.25,max:.59}}}},16:{roughness:.2,specular:.11,diffuseColor:"#4d2d6a",interior:{objectSpace:!1,size:1,blur:.3,repeat:{x:80,y:40},offset:{x:0,y:0}},transmission:{thickness:15,blur:0,ior:1.04,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:1.1},ambientOcclusion:{size:1,intensity:.02},gradient:{color:"#f4aaff",range:{min:.08064516129,max:.693548387097},opacity:.608695652174},bloom:{diffuse:-.1,gradient:.2,transmission:{intensity:.4,lumaClamping:{min:0,max:.29}},env:{intensity:2,lumaClamping:{min:.26,max:.53}}}},17:{roughness:.2,specular:.1,diffuseColor:"#d572d2",interior:{objectSpace:!1,size:1,blur:.3,repeat:{x:20,y:40},offset:{x:-.02,y:.5}},transmission:{thickness:15,blur:0,ior:1.04,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.1},gradient:{color:"#9547a0",range:{min:.08064516129,max:.693548387097},opacity:.608695652174},bloom:{diffuse:-.1,gradient:.2,transmission:{intensity:1,lumaClamping:{min:.27,max:.56}},env:{intensity:.3,lumaClamping:{min:.55,max:.68}}}},18:{roughness:.2,specular:.1,diffuseColor:"#ab75da",interior:{objectSpace:!1,size:1,blur:.29,repeat:{x:30,y:30},offset:{x:0,y:0}},transmission:{thickness:15,blur:0,ior:1.04,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.1},gradient:{color:"#f4aaff",range:{min:-.306451612904,max:.306451612903},opacity:.608695652174},bloom:{diffuse:-.1,gradient:.3,transmission:{intensity:1,lumaClamping:{min:.27,max:.56}},env:{intensity:.3,lumaClamping:{min:.55,max:.68}}}},19:{roughness:.2,specular:.1,diffuseColor:"#ab75da",interior:{objectSpace:!1,size:1,blur:.3,repeat:{x:22,y:45},offset:{x:-.39,y:.08}},transmission:{thickness:15,blur:0,ior:1.04,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.1},gradient:{color:"#f4aaff",range:{min:-.048387096775,max:.564516129032},opacity:.608695652174},bloom:{diffuse:0,gradient:.3,transmission:{intensity:1,lumaClamping:{min:.04,max:.13}},env:{intensity:.3,lumaClamping:{min:.55,max:.68}}}},20:{roughness:.2,specular:.1,diffuseColor:"#ab75da",interior:{objectSpace:!1,size:1,blur:.2,repeat:{x:20,y:50},offset:{x:.1,y:0}},transmission:{thickness:15,blur:0,ior:1,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.043},gradient:{color:"#180819",range:{min:-.5,max:.112903225807},opacity:.6},bloom:{diffuse:0,gradient:0,transmission:{intensity:1,lumaClamping:{min:.27,max:.56}},env:{intensity:.3,lumaClamping:{min:.32,max:.45}}}},21:{roughness:.2,specular:.1,diffuseColor:"#ab75da",interior:{objectSpace:!1,size:1,blur:.3,repeat:{x:60,y:30},offset:{x:0,y:0}},transmission:{thickness:15,blur:0,ior:1.04,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.1},gradient:{color:"#f4aaff",range:{min:.08064516129,max:.693548387097},opacity:.608695652174},bloom:{diffuse:-.1,gradient:.2,transmission:{intensity:1,lumaClamping:{min:.27,max:.56}},env:{intensity:.3,lumaClamping:{min:.55,max:.68}}}},22:{roughness:.2,specular:.1,diffuseColor:"#ab75da",interior:{objectSpace:!1,size:1,blur:.6,repeat:{x:100,y:50},offset:{x:0,y:.5}},transmission:{thickness:15,blur:0,ior:1.04,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.2},gradient:{color:"#a54bb2",range:{min:.08064516129,max:.467741935484},opacity:.608695652174},bloom:{diffuse:.1,gradient:1,transmission:{intensity:1,lumaClamping:{min:.27,max:.56}},env:{intensity:.3,lumaClamping:{min:.55,max:.68}}}},23:{roughness:.1,specular:.2,diffuseColor:"#ab75da",interior:{objectSpace:!1,size:1,blur:.1,repeat:{x:50,y:15},offset:{x:0,y:1.2}},transmission:{thickness:15,blur:0,ior:1.04,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.06},gradient:{color:"#f4aaff",range:{min:-.112903225807,max:.5},opacity:.608695652174},bloom:{diffuse:-.1,gradient:.2,transmission:{intensity:1,lumaClamping:{min:.19,max:.53}},env:{intensity:.3,lumaClamping:{min:.55,max:.68}}}},24:{roughness:.2,specular:.1,diffuseColor:"#ab75da",interior:{objectSpace:!1,size:1,blur:.3,repeat:{x:10,y:50},offset:{x:-.39,y:.08}},transmission:{thickness:15,blur:0,ior:1.04,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.1},gradient:{color:"#f4aaff",range:{min:.08064516129,max:.693548387097},opacity:.608695652174},bloom:{diffuse:-.1,gradient:.2,transmission:{intensity:1,lumaClamping:{min:.27,max:.56}},env:{intensity:1,lumaClamping:{min:.55,max:.68}}}},25:{roughness:.2,specular:.1,diffuseColor:"#ab75da",interior:{objectSpace:!1,size:1,blur:0,repeat:{x:30,y:30},offset:{x:0,y:0}},transmission:{thickness:15,blur:0,ior:1,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.1},gradient:{color:"#c6aaff",range:{min:-.274193548387,max:.33870967742},opacity:.608695652174},bloom:{diffuse:.1,gradient:.7,transmission:{intensity:1,lumaClamping:{min:.06,max:.35}},env:{intensity:.3,lumaClamping:{min:.55,max:.68}}}},26:{roughness:.2,specular:.1,diffuseColor:"#ab75da",interior:{objectSpace:!1,size:1,blur:.28,repeat:{x:20,y:60},offset:{x:-.43,y:.5}},transmission:{thickness:15,blur:0,ior:1.04,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.1},gradient:{color:"#bf92c2",range:{min:-.145161290323,max:.596774193549},opacity:.608695652174},bloom:{diffuse:1,gradient:1,transmission:{intensity:1,lumaClamping:{min:.03,max:.32}},env:{intensity:1,lumaClamping:{min:.41,max:1}}}},27:{roughness:.6,specular:.1,diffuseColor:"#d6a1e5",interior:{objectSpace:!1,size:1,blur:.15,repeat:{x:18.15,y:65},offset:{x:1.05,y:1.05}},transmission:{thickness:15,blur:0,ior:1,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:1},ambientOcclusion:{size:1,intensity:.1},gradient:{color:"#ca76ea",range:{min:.887096774193,max:1.5},opacity:.608695652174},bloom:{diffuse:1,gradient:.2,transmission:{intensity:1,lumaClamping:{min:.18,max:.31}},env:{intensity:.5,lumaClamping:{min:.21,max:.52}}}},28:{roughness:.2,specular:.1,diffuseColor:"#eebff1",interior:{objectSpace:!1,size:1,blur:.2,repeat:{x:60,y:15},offset:{x:0,y:.3}},transmission:{thickness:15,blur:0,ior:1.04,attenuationColor:"#f0dffa",attenuationDistance:20},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.08},gradient:{color:"#341f37",range:{min:.887096774193,max:1.5},opacity:.608695652174},bloom:{diffuse:1,gradient:.2,transmission:{intensity:3,lumaClamping:{min:.01,max:.3}},env:{intensity:.3,lumaClamping:{min:.55,max:.68}}}},29:{roughness:.2,specular:.1,diffuseColor:"#ab75da",interior:{objectSpace:!1,size:1,blur:.3,repeat:{x:60,y:10},offset:{x:0,y:0}},transmission:{thickness:15,blur:0,ior:1.04,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.06},gradient:{color:"#7d5982",range:{min:.08064516129,max:.693548387097},opacity:.608695652174},bloom:{diffuse:-.1,gradient:.2,transmission:{intensity:1,lumaClamping:{min:.21,max:.5}},env:{intensity:.3,lumaClamping:{min:.55,max:.68}}}},30:{roughness:.2,specular:.1,diffuseColor:"#fff3f3",interior:{objectSpace:!1,size:1,blur:.3,repeat:{x:10,y:30},offset:{x:.51,y:.32}},transmission:{thickness:15,blur:0,ior:1.04,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.1},gradient:{color:"#3d0f5a",range:{min:-.5,max:.112903225807},opacity:.608695652174},bloom:{diffuse:-.1,gradient:.2,transmission:{intensity:1,lumaClamping:{min:.27,max:.56}},env:{intensity:.3,lumaClamping:{min:.55,max:.68}}}},31:{roughness:.2,specular:.1,diffuseColor:"#8d4ccb",interior:{objectSpace:!1,size:1,blur:.3,repeat:{x:50,y:20},offset:{x:0,y:0}},transmission:{thickness:15,blur:0,ior:1.04,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:1},ambientOcclusion:{size:1,intensity:.01},gradient:{color:"#f4aaff",range:{min:-.209677419355,max:.403225806452},opacity:.608695652174},bloom:{diffuse:-.1,gradient:.2,transmission:{intensity:1,lumaClamping:{min:0,max:.29}},env:{intensity:1,lumaClamping:{min:.42,max:.76}}}},32:{roughness:.2,specular:.1,diffuseColor:"#b890d9",interior:{objectSpace:!1,size:1,blur:.3,repeat:{x:20,y:52},offset:{x:0,y:.5}},transmission:{thickness:15,blur:20,ior:1.04,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.07},gradient:{color:"#f4aaff",range:{min:-.145161290323,max:.467741935484},opacity:.608695652174},bloom:{diffuse:-.1,gradient:.2,transmission:{intensity:2,lumaClamping:{min:.17,max:.46}},env:{intensity:.3,lumaClamping:{min:.55,max:.68}}}},33:{roughness:.2,specular:.1,diffuseColor:"#461f65",interior:{objectSpace:!1,size:1,blur:0,repeat:{x:40,y:15},offset:{x:0,y:0}},transmission:{thickness:15,blur:0,ior:1,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.06},gradient:{color:"#b575bf",range:{min:-.048387096775,max:.564516129032},opacity:.608695652174},bloom:{diffuse:0,gradient:.2,transmission:{intensity:.9,lumaClamping:{min:0,max:.15}},env:{intensity:.5,lumaClamping:{min:.27,max:.62}}}},34:{roughness:.2,specular:.1,diffuseColor:"#ab75da",interior:{objectSpace:!1,size:1,blur:.3,repeat:{x:60,y:20},offset:{x:-.39,y:.08}},transmission:{thickness:15,blur:0,ior:1.04,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.1},gradient:{color:"#f4aaff",range:{min:.08064516129,max:.693548387097},opacity:.608695652174},bloom:{diffuse:-.1,gradient:.2,transmission:{intensity:1,lumaClamping:{min:.27,max:.56}},env:{intensity:.3,lumaClamping:{min:.55,max:.68}}}},35:{roughness:.2,specular:.1,diffuseColor:"#ffffff",interior:{objectSpace:!1,size:1,blur:.4,repeat:{x:10,y:50},offset:{x:0,y:0}},transmission:{thickness:15,blur:0,ior:1.04,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.1},gradient:{color:"#efacfc",range:{min:.016129032258,max:.274193548387},opacity:.608695652174},bloom:{diffuse:.5,gradient:.2,transmission:{intensity:.9,lumaClamping:{min:0,max:.29}},env:{intensity:.3,lumaClamping:{min:.55,max:.68}}}},36:{roughness:.2,specular:.1,diffuseColor:"#ab75da",interior:{objectSpace:!1,size:1,blur:.3,repeat:{x:60,y:25},offset:{x:-.66,y:0}},transmission:{thickness:15,blur:0,ior:1.04,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.1},gradient:{color:"#f4aaff",range:{min:.08064516129,max:.693548387097},opacity:.608695652174},bloom:{diffuse:-.1,gradient:.2,transmission:{intensity:1,lumaClamping:{min:.27,max:.56}},env:{intensity:.3,lumaClamping:{min:.55,max:.68}}}},37:{roughness:.2,specular:.2,diffuseColor:"#da75ca",interior:{objectSpace:!1,size:1,blur:.3,repeat:{x:10,y:26},offset:{x:0,y:.08}},transmission:{thickness:15,blur:0,ior:1.04,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.06},gradient:{color:"#63196f",range:{min:-.306451612903,max:.758064516129},opacity:.608695652174},bloom:{diffuse:-.1,gradient:3,transmission:{intensity:1,lumaClamping:{min:.27,max:.56}},env:{intensity:.3,lumaClamping:{min:.55,max:.68}}}},38:{roughness:0,specular:1,diffuseColor:"#c67fcb",interior:{objectSpace:!1,size:1,blur:.2,repeat:{x:22,y:65},offset:{x:-.76,y:-3.51}},transmission:{thickness:15,blur:0,ior:1.04,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:1},ambientOcclusion:{size:1,intensity:.06},gradient:{color:"#f4aaff",range:{min:-.145161290323,max:.435483870968},opacity:.608695652174},bloom:{diffuse:0,gradient:.2,transmission:{intensity:.6,lumaClamping:{min:.08,max:.32}},env:{intensity:1,lumaClamping:{min:.01,max:.51}}}},39:{roughness:.2,specular:.1,diffuseColor:"#ab75da",interior:{objectSpace:!1,size:1,blur:.3,repeat:{x:50,y:25},offset:{x:0,y:.5}},transmission:{thickness:15,blur:0,ior:1.04,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.1},gradient:{color:"#f4aaff",range:{min:.08064516129,max:.693548387097},opacity:.608695652174},bloom:{diffuse:-.1,gradient:.2,transmission:{intensity:1,lumaClamping:{min:.27,max:.56}},env:{intensity:.3,lumaClamping:{min:.55,max:.68}}}},40:{roughness:.1,specular:.1,diffuseColor:"#ab75da",interior:{objectSpace:!1,size:1,blur:.4,repeat:{x:20,y:60},offset:{x:-1.63,y:.26}},transmission:{thickness:15,blur:0,ior:1.04,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:1},ambientOcclusion:{size:1,intensity:.05},gradient:{color:"#f4aaff",range:{min:.08064516129,max:.693548387097},opacity:.608695652174},bloom:{diffuse:-.1,gradient:.2,transmission:{intensity:.9,lumaClamping:{min:0,max:.18}},env:{intensity:1,lumaClamping:{min:.41,max:.96}}}},41:{roughness:.2,specular:.1,diffuseColor:"#c970ee",interior:{objectSpace:!1,size:1,blur:.3,repeat:{x:80,y:40},offset:{x:1.91,y:.15}},transmission:{thickness:15,blur:0,ior:1,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:1},ambientOcclusion:{size:1,intensity:.1},gradient:{color:"#bccfe2",range:{min:.370967741935,max:.693548387097},opacity:1},bloom:{diffuse:0,gradient:.1,transmission:{intensity:1,lumaClamping:{min:0,max:.12}},env:{intensity:1,lumaClamping:{min:0,max:.34}}}},42:{roughness:.1,specular:0,diffuseColor:"#f29ff3",interior:{objectSpace:!1,size:1,blur:0,repeat:{x:95,y:20},offset:{x:-.97,y:.02}},transmission:{thickness:15,blur:0,ior:1,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:1},ambientOcclusion:{size:1,intensity:.07},gradient:{color:"#713387",range:{min:.048387096774,max:.661290322581},opacity:1},bloom:{diffuse:.1,gradient:.2,transmission:{intensity:2,lumaClamping:{min:0,max:.29}},env:{intensity:.6,lumaClamping:{min:.34,max:.61}}}},43:{roughness:.2,specular:.1,diffuseColor:"#d572d2",interior:{objectSpace:!1,size:1,blur:.3,repeat:{x:20,y:40},offset:{x:-.02,y:.5}},transmission:{thickness:15,blur:0,ior:1.04,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.1},gradient:{color:"#9547a0",range:{min:.08064516129,max:.693548387097},opacity:.608695652174},bloom:{diffuse:-.1,gradient:.2,transmission:{intensity:1,lumaClamping:{min:.27,max:.56}},env:{intensity:.3,lumaClamping:{min:.55,max:.68}}}},44:{roughness:.2,specular:.1,diffuseColor:"#ab75da",interior:{objectSpace:!1,size:1,blur:.29,repeat:{x:30,y:30},offset:{x:0,y:0}},transmission:{thickness:15,blur:0,ior:1,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.1},gradient:{color:"#f4aaff",range:{min:-.306451612904,max:.306451612903},opacity:.608695652174},bloom:{diffuse:-.1,gradient:.3,transmission:{intensity:.7,lumaClamping:{min:0,max:.29}},env:{intensity:.3,lumaClamping:{min:.55,max:.68}}}},45:{roughness:.2,specular:.1,diffuseColor:"#ab75da",interior:{objectSpace:!1,size:1,blur:.3,repeat:{x:22,y:45},offset:{x:-.39,y:.08}},transmission:{thickness:15,blur:0,ior:1.04,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.1},gradient:{color:"#f4aaff",range:{min:-.048387096775,max:.564516129032},opacity:.608695652174},bloom:{diffuse:0,gradient:.3,transmission:{intensity:1,lumaClamping:{min:.04,max:.13}},env:{intensity:.3,lumaClamping:{min:.55,max:.68}}}},46:{roughness:.2,specular:.1,diffuseColor:"#ab75da",interior:{objectSpace:!1,size:1,blur:.2,repeat:{x:20,y:50},offset:{x:.1,y:0}},transmission:{thickness:15,blur:0,ior:1,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.043},gradient:{color:"#180819",range:{min:-.5,max:.112903225807},opacity:.6},bloom:{diffuse:0,gradient:0,transmission:{intensity:1,lumaClamping:{min:.27,max:.56}},env:{intensity:.3,lumaClamping:{min:.32,max:.45}}}},47:{roughness:.2,specular:.1,diffuseColor:"#ab75da",interior:{objectSpace:!1,size:1,blur:.3,repeat:{x:60,y:30},offset:{x:0,y:0}},transmission:{thickness:15,blur:0,ior:1.04,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.1},gradient:{color:"#f4aaff",range:{min:.08064516129,max:.693548387097},opacity:.608695652174},bloom:{diffuse:-.1,gradient:.2,transmission:{intensity:1,lumaClamping:{min:.27,max:.56}},env:{intensity:.3,lumaClamping:{min:.55,max:.68}}}},48:{roughness:.2,specular:.1,diffuseColor:"#ab75da",interior:{objectSpace:!1,size:1,blur:.6,repeat:{x:100,y:50},offset:{x:0,y:.5}},transmission:{thickness:15,blur:0,ior:1.04,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.2},gradient:{color:"#a54bb2",range:{min:.08064516129,max:.467741935484},opacity:.608695652174},bloom:{diffuse:.1,gradient:1,transmission:{intensity:1,lumaClamping:{min:.27,max:.56}},env:{intensity:.3,lumaClamping:{min:.55,max:.68}}}},49:{roughness:.2,specular:.1,diffuseColor:"#ab75da",interior:{objectSpace:!1,size:1,blur:0,repeat:{x:45,y:18},offset:{x:0,y:1.2}},transmission:{thickness:15,blur:0,ior:1,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.07},gradient:{color:"#f4aaff",range:{min:.08064516129,max:.693548387097},opacity:.608695652174},bloom:{diffuse:-.1,gradient:.2,transmission:{intensity:.5,lumaClamping:{min:0,max:.13}},env:{intensity:.3,lumaClamping:{min:.55,max:.68}}}},50:{roughness:.2,specular:.1,diffuseColor:"#ab75da",interior:{objectSpace:!1,size:1,blur:.3,repeat:{x:10,y:50},offset:{x:-.39,y:.08}},transmission:{thickness:15,blur:0,ior:1.04,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.1},gradient:{color:"#f4aaff",range:{min:.08064516129,max:.693548387097},opacity:.608695652174},bloom:{diffuse:-.1,gradient:.2,transmission:{intensity:1,lumaClamping:{min:.27,max:.56}},env:{intensity:1,lumaClamping:{min:.55,max:.68}}}},51:{roughness:.2,specular:.1,diffuseColor:"#ab75da",interior:{objectSpace:!1,size:1,blur:.3,repeat:{x:30,y:30},offset:{x:0,y:0}},transmission:{thickness:15,blur:0,ior:1.04,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.1},gradient:{color:"#c6aaff",range:{min:-.274193548387,max:.33870967742},opacity:.608695652174},bloom:{diffuse:.1,gradient:.7,transmission:{intensity:3,lumaClamping:{min:.22,max:.51}},env:{intensity:.3,lumaClamping:{min:.55,max:.68}}}},52:{roughness:.2,specular:.1,diffuseColor:"#ab75da",interior:{objectSpace:!1,size:1,blur:.28,repeat:{x:20,y:60},offset:{x:-.43,y:.5}},transmission:{thickness:15,blur:0,ior:1.04,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.1},gradient:{color:"#bf92c2",range:{min:-.145161290323,max:.596774193549},opacity:.608695652174},bloom:{diffuse:1,gradient:1,transmission:{intensity:1,lumaClamping:{min:.03,max:.32}},env:{intensity:1,lumaClamping:{min:.41,max:1}}}},53:{roughness:.2,specular:.1,diffuseColor:"#ab75da",interior:{objectSpace:!1,size:1,blur:.3,repeat:{x:68,y:20},offset:{x:0,y:1.05}},transmission:{thickness:15,blur:0,ior:1.04,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:3},ambientOcclusion:{size:1,intensity:.1},gradient:{color:"#f4aaff",range:{min:.338709677419,max:.951612903226},opacity:.608695652174},bloom:{diffuse:-.1,gradient:.2,transmission:{intensity:3,lumaClamping:{min:.19,max:.52}},env:{intensity:.3,lumaClamping:{min:.55,max:.68}}}},54:{roughness:.4,specular:.1,diffuseColor:"#ab75da",interior:{objectSpace:!1,size:1,blur:.1,repeat:{x:14,y:40},offset:{x:.61,y:.5}},transmission:{thickness:15,blur:0,ior:1.04,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.05},gradient:{color:"#7b4282",range:{min:.048387096774,max:.532258064516},opacity:.608695652174},bloom:{diffuse:-.1,gradient:.2,transmission:{intensity:.6,lumaClamping:{min:.2,max:.35}},env:{intensity:1,lumaClamping:{min:0,max:.11}}}},55:{roughness:0,specular:1,diffuseColor:"#ab75da",interior:{objectSpace:!1,size:1,blur:.3,repeat:{x:40,y:40},offset:{x:0,y:.56}},transmission:{thickness:15,blur:0,ior:1,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2.3},ambientOcclusion:{size:1,intensity:.1},gradient:{color:"#2a0f2e",range:{min:-.016129032259,max:.596774193548},opacity:.608695652174},bloom:{diffuse:-.1,gradient:.2,transmission:{intensity:3,lumaClamping:{min:.25,max:.55}},env:{intensity:1,lumaClamping:{min:.31,max:.87}}}},56:{roughness:.2,specular:.1,diffuseColor:"#fff3f3",interior:{objectSpace:!1,size:1,blur:.3,repeat:{x:10,y:30},offset:{x:.51,y:.32}},transmission:{thickness:15,blur:0,ior:1.04,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.1},gradient:{color:"#3d0f5a",range:{min:-.5,max:.112903225807},opacity:.608695652174},bloom:{diffuse:-.1,gradient:.2,transmission:{intensity:1,lumaClamping:{min:.27,max:.56}},env:{intensity:.3,lumaClamping:{min:.55,max:.68}}}},57:{roughness:.2,specular:.1,diffuseColor:"#ab75da",interior:{objectSpace:!1,size:1,blur:.3,repeat:{x:50,y:25},offset:{x:0,y:.5}},transmission:{thickness:15,blur:0,ior:1.04,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.1},gradient:{color:"#f4aaff",range:{min:.08064516129,max:.693548387097},opacity:.608695652174},bloom:{diffuse:-.1,gradient:.2,transmission:{intensity:1,lumaClamping:{min:.27,max:.56}},env:{intensity:.3,lumaClamping:{min:.55,max:.68}}}},58:{roughness:.2,specular:.1,diffuseColor:"#ab75da",interior:{objectSpace:!1,size:1,blur:.3,repeat:{x:50,y:15},offset:{x:0,y:1.11}},transmission:{thickness:15,blur:0,ior:1.04,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.1},gradient:{color:"#f4aaff",range:{min:.08064516129,max:.693548387097},opacity:.608695652174},bloom:{diffuse:-.1,gradient:.2,transmission:{intensity:1,lumaClamping:{min:.19,max:.37}},env:{intensity:.3,lumaClamping:{min:.55,max:.68}}}},59:{roughness:.2,specular:.1,diffuseColor:"#472869",interior:{objectSpace:!1,size:1,blur:.09,repeat:{x:40,y:30},offset:{x:0,y:0}},transmission:{thickness:15,blur:0,ior:1.04,attenuationColor:"#ffffff",attenuationDistance:10},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.2},gradient:{color:"#6c2988",range:{min:-.016129032258,max:.596774193549},opacity:.608695652174},bloom:{diffuse:-.1,gradient:.2,transmission:{intensity:1.2,lumaClamping:{min:0,max:0}},env:{intensity:.3,lumaClamping:{min:.55,max:.68}}}},60:{roughness:.2,specular:.1,diffuseColor:"#ab75da",interior:{objectSpace:!1,size:1,blur:.3,repeat:{x:60,y:20},offset:{x:-.39,y:.08}},transmission:{thickness:15,blur:0,ior:1.04,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.1},gradient:{color:"#f4aaff",range:{min:.08064516129,max:.693548387097},opacity:.608695652174},bloom:{diffuse:-.1,gradient:.2,transmission:{intensity:1,lumaClamping:{min:.27,max:.56}},env:{intensity:.3,lumaClamping:{min:.55,max:.68}}}},61:{roughness:.2,specular:.1,diffuseColor:"#ffffff",interior:{objectSpace:!1,size:1,blur:.41,repeat:{x:10,y:50},offset:{x:0,y:0}},transmission:{thickness:15,blur:0,ior:1,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.1},gradient:{color:"#efacfc",range:{min:.016129032258,max:.274193548387},opacity:.608695652174},bloom:{diffuse:.5,gradient:.2,transmission:{intensity:.8,lumaClamping:{min:.3,max:.59}},env:{intensity:.3,lumaClamping:{min:.55,max:.68}}}},62:{roughness:.2,specular:.1,diffuseColor:"#522982",interior:{objectSpace:!1,size:1,blur:0,repeat:{x:30.05,y:15},offset:{x:-.66,y:0}},transmission:{thickness:15,blur:0,ior:1,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.054},gradient:{color:"#f4aaff",range:{min:-.209677419355,max:.403225806452},opacity:.369565217391},bloom:{diffuse:-.1,gradient:.2,transmission:{intensity:1,lumaClamping:{min:.1,max:.37}},env:{intensity:.3,lumaClamping:{min:.55,max:.68}}}},63:{roughness:.2,specular:.1,diffuseColor:"#a775da",interior:{objectSpace:!1,size:1,blur:.3,repeat:{x:10,y:26},offset:{x:-.14,y:.08}},transmission:{thickness:15,blur:0,ior:1.04,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.152},gradient:{color:"#ffaacf",range:{min:-.274193548387,max:.33870967742},opacity:.608695652174},bloom:{diffuse:-.1,gradient:.2,transmission:{intensity:2,lumaClamping:{min:.31,max:.5}},env:{intensity:.3,lumaClamping:{min:.55,max:.68}}}},64:{roughness:.2,specular:.1,diffuseColor:"#885ab1",interior:{objectSpace:!1,size:1,blur:.17,repeat:{x:18.15,y:65},offset:{x:-.15,y:.5}},transmission:{thickness:15,blur:0,ior:1,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.1},gradient:{color:"#f4aaff",range:{min:.145161290322,max:.435483870967},opacity:.608695652174},bloom:{diffuse:-.3,gradient:.2,transmission:{intensity:.5,lumaClamping:{min:0,max:.29}},env:{intensity:.5,lumaClamping:{min:.58,max:1}}}},65:{roughness:.2,specular:.1,diffuseColor:"#ab75da",interior:{objectSpace:!1,size:1,blur:.3,repeat:{x:50,y:25},offset:{x:0,y:.5}},transmission:{thickness:15,blur:0,ior:1.04,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.1},gradient:{color:"#f4aaff",range:{min:.08064516129,max:.693548387097},opacity:.608695652174},bloom:{diffuse:-.1,gradient:.2,transmission:{intensity:1,lumaClamping:{min:.27,max:.56}},env:{intensity:.3,lumaClamping:{min:.55,max:.68}}}},66:{roughness:.1,specular:1,diffuseColor:"#8275da",interior:{objectSpace:!1,size:1,blur:0,repeat:{x:70,y:25},offset:{x:-.71,y:.26}},transmission:{thickness:15,blur:0,ior:1,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:1},ambientOcclusion:{size:1,intensity:.065},gradient:{color:"#f4aaff",range:{min:-.177419354839,max:.435483870968},opacity:.608695652174},bloom:{diffuse:-.1,gradient:.2,transmission:{intensity:.53,lumaClamping:{min:.16,max:.35}},env:{intensity:.2,lumaClamping:{min:.55,max:.68}}}},67:{roughness:.2,specular:.1,diffuseColor:"#7e43bb",interior:{objectSpace:!1,size:1,blur:.3,repeat:{x:80,y:40},offset:{x:1.91,y:.15}},transmission:{thickness:15,blur:0,ior:1.04,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.1},gradient:{color:"#e2aaff",range:{min:.016129032258,max:.629032258065},opacity:.608695652174},bloom:{diffuse:-.1,gradient:.2,transmission:{intensity:.5,lumaClamping:{min:.06,max:.5}},env:{intensity:.3,lumaClamping:{min:.55,max:.68}}}},68:{roughness:.1,specular:1,diffuseColor:"#c98cd6",interior:{objectSpace:!1,size:1,blur:0,repeat:{x:50,y:100},offset:{x:0,y:.5}},transmission:{thickness:15,blur:0,ior:1.03,attenuationColor:"#f8e2ff",attenuationDistance:30},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:1.5},ambientOcclusion:{size:1,intensity:.05},gradient:{color:"#8958a4",range:{min:.016129032258,max:.629032258065},opacity:1},bloom:{diffuse:-.1,gradient:0,transmission:{intensity:.7,lumaClamping:{min:.15,max:.3}},env:{intensity:.8,lumaClamping:{min:.39,max:1}}}},69:{roughness:.2,specular:.1,diffuseColor:"#ecb1ed",interior:{objectSpace:!1,size:1,blur:.3,repeat:{x:40,y:50},offset:{x:0,y:.5}},transmission:{thickness:15,blur:0,ior:1.04,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.06},gradient:{color:"#2e1931",range:{min:.08064516129,max:.693548387097},opacity:.608695652174},bloom:{diffuse:.2,gradient:0,transmission:{intensity:.7,lumaClamping:{min:0,max:.1}},env:{intensity:2,lumaClamping:{min:.55,max:.68}}}},70:{roughness:.2,specular:.1,diffuseColor:"#ab75da",interior:{objectSpace:!1,size:1,blur:.3,repeat:{x:50,y:25},offset:{x:0,y:.5}},transmission:{thickness:15,blur:0,ior:1.04,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.1},gradient:{color:"#f4aaff",range:{min:.08064516129,max:.693548387097},opacity:.608695652174},bloom:{diffuse:-.1,gradient:.2,transmission:{intensity:1,lumaClamping:{min:.27,max:.56}},env:{intensity:.3,lumaClamping:{min:.55,max:.68}}}},71:{roughness:.2,specular:1,diffuseColor:"#758cda",interior:{objectSpace:!1,size:1,blur:0,repeat:{x:10,y:30},offset:{x:-.39,y:.08}},transmission:{thickness:15,blur:0,ior:1.04,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.1},gradient:{color:"#792bd4",range:{min:-.467741935484,max:.145161290323},opacity:.608695652174},bloom:{diffuse:-.1,gradient:.2,transmission:{intensity:1,lumaClamping:{min:.27,max:.56}},env:{intensity:1,lumaClamping:{min:0,max:.44}}}},72:{roughness:.2,specular:.1,diffuseColor:"#ab75da",interior:{objectSpace:!1,size:1,blur:.3,repeat:{x:50,y:25},offset:{x:0,y:.5}},transmission:{thickness:15,blur:0,ior:1.04,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.1},gradient:{color:"#f4aaff",range:{min:.08064516129,max:.693548387097},opacity:.608695652174},bloom:{diffuse:-.1,gradient:.2,transmission:{intensity:1,lumaClamping:{min:.27,max:.56}},env:{intensity:.3,lumaClamping:{min:.55,max:.68}}}},73:{roughness:.2,specular:.1,diffuseColor:"#ab75da",interior:{objectSpace:!1,size:1,blur:.3,repeat:{x:50,y:25},offset:{x:0,y:.5}},transmission:{thickness:15,blur:0,ior:1.04,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.1},gradient:{color:"#f4aaff",range:{min:.08064516129,max:.693548387097},opacity:.608695652174},bloom:{diffuse:-.1,gradient:.2,transmission:{intensity:1,lumaClamping:{min:.27,max:.56}},env:{intensity:.3,lumaClamping:{min:.55,max:.68}}}},74:{roughness:.2,specular:.1,diffuseColor:"#ffffff",interior:{objectSpace:!1,size:1,blur:.3,repeat:{x:20,y:40},offset:{x:.95,y:1.68}},transmission:{thickness:15,blur:0,ior:1.04,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.1},gradient:{color:"#e2b4ff",range:{min:-.5,max:.112903225807},opacity:.608695652174},bloom:{diffuse:-.1,gradient:.2,transmission:{intensity:1,lumaClamping:{min:.27,max:.56}},env:{intensity:.3,lumaClamping:{min:.55,max:.68}}}},75:{roughness:.2,specular:0,diffuseColor:"#ffc0f5",interior:{objectSpace:!1,size:1,blur:.3,repeat:{x:45,y:15},offset:{x:.84,y:1.2}},transmission:{thickness:15,blur:2,ior:1.1,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:1.5},ambientOcclusion:{size:1,intensity:.1},gradient:{color:"#ce85fb",range:{min:-.145161290323,max:.306451612903},opacity:.608695652174},bloom:{diffuse:-.1,gradient:.2,transmission:{intensity:1,lumaClamping:{min:0,max:.32}},env:{intensity:.7,lumaClamping:{min:.2,max:.33}}}},76:{roughness:.1,specular:1,diffuseColor:"#f294e6",interior:{objectSpace:!1,size:1,blur:.3,repeat:{x:20,y:40},offset:{x:-.39,y:.08}},transmission:{thickness:15,blur:0,ior:1.04,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:1.3},ambientOcclusion:{size:1,intensity:.1},gradient:{color:"#f4aaff",range:{min:.209677419355,max:.822580645162},opacity:.608695652174},bloom:{diffuse:-.1,gradient:.2,transmission:{intensity:1,lumaClamping:{min:.27,max:.56}},env:{intensity:3,lumaClamping:{min:.53,max:.76}}}},77:{roughness:.2,specular:.1,diffuseColor:"#ab75da",interior:{objectSpace:!1,size:1,blur:.3,repeat:{x:50,y:25},offset:{x:0,y:.5}},transmission:{thickness:15,blur:0,ior:1.04,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.1},gradient:{color:"#f4aaff",range:{min:.08064516129,max:.693548387097},opacity:.608695652174},bloom:{diffuse:-.1,gradient:.2,transmission:{intensity:1,lumaClamping:{min:.27,max:.56}},env:{intensity:.3,lumaClamping:{min:.55,max:.68}}}},78:{roughness:.2,specular:.1,diffuseColor:"#ab75da",interior:{objectSpace:!1,size:1,blur:.3,repeat:{x:30,y:60},offset:{x:-.43,y:.5}},transmission:{thickness:15,blur:0,ior:1.04,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.1},gradient:{color:"#f4aaff",range:{min:.08064516129,max:.693548387097},opacity:.608695652174},bloom:{diffuse:-.1,gradient:.2,transmission:{intensity:1,lumaClamping:{min:.27,max:.56}},env:{intensity:.3,lumaClamping:{min:.55,max:.68}}}},"01":{roughness:.6,specular:.1,diffuseColor:"#63447d",interior:{objectSpace:!1,size:.89,blur:.15,repeat:{x:18.15,y:65},offset:{x:1.05,y:1.05}},transmission:{thickness:15,blur:0,ior:1,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:1},ambientOcclusion:{size:1,intensity:.1},gradient:{color:"#6f578f",range:{min:-.5,max:.112903225807},opacity:.608695652174},bloom:{diffuse:.1,gradient:.2,transmission:{intensity:1.3,lumaClamping:{min:.16,max:.29}},env:{intensity:.5,lumaClamping:{min:.21,max:.52}}}},"02":{roughness:.2,specular:.1,diffuseColor:"#ab75da",interior:{objectSpace:!1,size:1,blur:0,repeat:{x:60,y:15},offset:{x:0,y:.3}},transmission:{thickness:15,blur:0,ior:1.04,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.1},gradient:{color:"#f4aaff",range:{min:-.145161290323,max:.467741935484},opacity:.608695652174},bloom:{diffuse:-.1,gradient:.2,transmission:{intensity:.7,lumaClamping:{min:0,max:.13}},env:{intensity:.3,lumaClamping:{min:.55,max:.68}}}},"03":{roughness:.2,specular:.1,diffuseColor:"#ab75da",interior:{objectSpace:!1,size:1,blur:0,repeat:{x:60,y:10},offset:{x:0,y:0}},transmission:{thickness:15,blur:0,ior:1.04,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.12},gradient:{color:"#7d5982",range:{min:.08064516129,max:.693548387097},opacity:.608695652174},bloom:{diffuse:-.1,gradient:.2,transmission:{intensity:1,lumaClamping:{min:.21,max:.5}},env:{intensity:.3,lumaClamping:{min:.55,max:.68}}}},"04":{roughness:.2,specular:.1,diffuseColor:"#fff3f3",interior:{objectSpace:!1,size:1,blur:.3,repeat:{x:10,y:30},offset:{x:.51,y:.32}},transmission:{thickness:15,blur:0,ior:1.04,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.1},gradient:{color:"#3d0f5a",range:{min:-.5,max:.112903225807},opacity:.608695652174},bloom:{diffuse:-.1,gradient:.2,transmission:{intensity:1,lumaClamping:{min:.27,max:.56}},env:{intensity:.3,lumaClamping:{min:.55,max:.68}}}},"05":{roughness:.2,specular:.1,diffuseColor:"#8d4ccb",interior:{objectSpace:!1,size:1,blur:.3,repeat:{x:50,y:20},offset:{x:0,y:0}},transmission:{thickness:15,blur:0,ior:1.04,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.01},gradient:{color:"#f4aaff",range:{min:-.209677419355,max:.403225806452},opacity:.608695652174},bloom:{diffuse:-.1,gradient:.2,transmission:{intensity:1,lumaClamping:{min:.27,max:.56}},env:{intensity:1,lumaClamping:{min:.42,max:.76}}}},"06":{roughness:.2,specular:.1,diffuseColor:"#4c2968",interior:{objectSpace:!1,size:1,blur:.2,repeat:{x:20,y:52},offset:{x:0,y:.5}},transmission:{thickness:15,blur:0,ior:1.04,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.1},gradient:{color:"#f4aaff",range:{min:.241935483871,max:.854838709678},opacity:.608695652174},bloom:{diffuse:-.1,gradient:.2,transmission:{intensity:1,lumaClamping:{min:0,max:.29}},env:{intensity:1,lumaClamping:{min:.24,max:.37}}}},"07":{roughness:.2,specular:.1,diffuseColor:"#461f65",interior:{objectSpace:!1,size:.91,blur:.66,repeat:{x:40,y:15},offset:{x:0,y:0}},transmission:{thickness:15,blur:0,ior:1,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.06},gradient:{color:"#b575bf",range:{min:-.048387096775,max:.564516129032},opacity:.608695652174},bloom:{diffuse:0,gradient:.2,transmission:{intensity:.9,lumaClamping:{min:0,max:.13}},env:{intensity:.5,lumaClamping:{min:.55,max:.68}}}},"08":{roughness:.2,specular:.1,diffuseColor:"#ab75da",interior:{objectSpace:!1,size:1,blur:.3,repeat:{x:60,y:20},offset:{x:-.39,y:.08}},transmission:{thickness:15,blur:0,ior:1.04,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:2},ambientOcclusion:{size:1,intensity:.1},gradient:{color:"#f4aaff",range:{min:.08064516129,max:.693548387097},opacity:.608695652174},bloom:{diffuse:-.1,gradient:.2,transmission:{intensity:1,lumaClamping:{min:.27,max:.56}},env:{intensity:.3,lumaClamping:{min:.55,max:.68}}}},"09":{roughness:.2,specular:.1,diffuseColor:"#ffffff",interior:{objectSpace:!1,size:1,blur:0,repeat:{x:20,y:30},offset:{x:.18,y:0}},transmission:{thickness:15,blur:0,ior:1,attenuationColor:"#ffffff",attenuationDistance:1},environment:{rotation:{x:0,y:-1.570796326795,z:0},intensity:1},ambientOcclusion:{size:1,intensity:.03},gradient:{color:"#aa68b3",range:{min:-.306451612903,max:.306451612904},opacity:.608695652174},bloom:{diffuse:.01,gradient:.2,transmission:{intensity:2,lumaClamping:{min:.24,max:.4}},env:{intensity:.3,lumaClamping:{min:.55,max:.68}}}}}}},_globalRessources=[{type:"texture",name:"noise",path:"/webgl/global/noises/rgb-noise.jpg"},{type:"texture",name:"postNoise",path:"/webgl/home/textures/T_Random_45.jpg"},{type:"texture",name:"postNoise2",path:"/webgl/home/textures/T_Random_46.jpg"},{type:"texture",name:"paintSwirl",path:"/webgl/home/textures/paint-swirl.jpg"},{type:"texture",name:"demoNoise",path:"/webgl/home/textures/T_Random_53.jpg"},{type:"texture",name:"demoFlowmap",path:"/webgl/home/textures/flowmap.jpg"},{type:"texture",name:"demoClouds",path:"/webgl/home/textures/clouds-shadow.jpg"},{type:"texture",name:"demoWaterNormal",path:"/webgl/home/textures/water-normal.jpg"},{type:"texture",name:"demoWaterNoise",path:"/webgl/home/textures/T_Random_48.jpg"},{type:"texture",name:"demoCrystalEnvMap",path:"/webgl/home/textures/crystal-env-map.jpg"},{type:"texture",name:"transmission-material/envmap",path:"/webgl/home/textures/env-map.jpg"},{type:"texture",name:"egg/normal",path:"/webgl/home/textures/egg/normal_low.png"},{type:"texture",name:"egg/ao",path:"/webgl/home/textures/egg/ao.png"},{type:"texture",name:"glow-sprite",path:"/webgl/home/textures/glow.png"},{type:"texture",name:"embryo-albedo",path:"/webgl/home/textures/embryo_albedo.jpg"},{type:"texture",name:"caustics",path:"/webgl/home/textures/caustics.jpg"},{type:"texture",name:"voronoi-clouds",path:"/webgl/home/textures/voronoi-clouds.png"},{type:"texture",name:"sky",path:"/webgl/home/textures/SKY_XP.png"},{type:"texture",name:"planet-01",path:"/webgl/home/textures/planets/planet_01.jpg"},{type:"texture",name:"planet-02",path:"/webgl/home/textures/planets/planet_02.jpg"},{type:"texture",name:"planet-03",path:"/webgl/home/textures/planets/planet_03.jpg"},{type:"texture",name:"planet-04",path:"/webgl/home/textures/planets/planet_04.jpg"},{type:"texture",name:"dust-particle",path:"/webgl/home/textures/dust-particle.jpg"},{type:"json",path:"/webgl/msdf/OCMikolaDemo-Regular.json",name:"font-regular/json"},{type:"texture",path:"/webgl/msdf/OCMikolaDemo-Regular.png",name:"font-regular/atlas"},{type:"gltf",path:"/webgl/home/gltf/master-scene-compressed.glb",name:"master-scene"},{type:"gltf",name:"proto/transmission-material/embryo",path:"/webgl/proto/transmission-material/embryo.glb"},{type:"gltf",name:"egg-explosion",path:"/webgl/home/gltf/eggExplosion.glb"},config.composer.final.menuLut.resource,...config.composer.final.sceneLuts.map($=>$.resource),...config.composer.final.paintSectionLuts.map($=>$.resource)];class Preloader extends EventDispatcher$1{constructor(){super(),this._gltfWorkerLimit=2,this._ktxWorkerLimit=2,this._register(),this._resourcesLoaded=0,this._firstView=null,this._fallbacks=null,this._bindHandlers()}get fallbacks(){return this._fallbacks}destroy(){var m,L;(m=this._resourceLoader)==null||m.removeEventListener("progress",this._loadingProgressHandler),(L=this._resourceLoader)==null||L.removeEventListener("complete",this._loadingCompleteHandler),this.resetLoaders()}start({globalRessources:m,viewsConfig:L}){this._resourceLoader=this._createResourceLoader(),this._viewsConfig=L,this._initialLoading=!0,this._fallbacks={edge:DeviceHelper.browser.edge,mobile:!DeviceHelper.device.desktop,lowTier:DeviceHelper.gpu.tier<=TIER.LOW,mobile_or_lowTier:!DeviceHelper.device.desktop||DeviceHelper.gpu.tier<=TIER.LOW},this._setupEventListeners(),this._addViewsAssets(L),this._resourceLoader.add({resources:m||[],preload:!0}),this._loadPromises=this._resourceLoader.preload(),GLOBAL.isProduction||console.log("Preloader.start",this._resourceLoader._resourcesToPreload.length)}addViewAssetsToPreload(m){if(!this._initialLoading)return;const L=this._viewsConfig.find(le=>le.name===m);if(!L)return;this._firstView=m;const j=ResourceLoader.resources.filter(le=>le.namespace===L.name).map(le=>(le.preload=!0,le));this._resourceLoader._resourcesToPreload=ResourceLoader.resources.filter(le=>le.preload);const ee=[];for(let le=0,ve=j.length;le<ve;le++){const ye=ResourceLoader.loadResource(j[le]);ee.push(ye),ye.then(this._resourceLoader._preloadProgressHandler)}const re=Promise.all(ee).then(this._resourceLoader._preloadCompleteHandler,this._resourceLoader._preloadErrorHandler);return GLOBAL.isProduction||console.log("Preloader.addViewAssetsToPreload",m,"+",j.length,">",this._resourceLoader._resourcesToPreload.length),Promise.all([this._loadPromises,re])}setRenderer(m){this._registerWithRenderer(m)}_register(){var m,L;Object.keys(ResourceLoader.loaders).length>0||(ResourceLoader.registerLoader(ThreeGLTFDracoLoader,"gltf",{dracoDecoderPath:"/webgl/libs/draco/"}),(L=(m=ResourceLoader.getLoader("gltf"))==null?void 0:m._dracoLoader)==null||L.setWorkerLimit(this._gltfWorkerLimit),ResourceLoader.registerLoader(i$6,"obj"),ResourceLoader.registerLoader(i$5,"texture"),ResourceLoader.registerLoader(i$4,"image"),ResourceLoader.registerLoader(c$2,"exr"),ResourceLoader.registerLoader(ThreeLUT3dlLoader,"3dl"),ResourceLoader.registerLoader(ThreeRBGELoader,"hdr"),ResourceLoader.registerLoader(i$1,"json"),ResourceLoader.registerLoader(SRTLoader,"srt"))}_registerWithRenderer(m){var L,j;try{ResourceLoader.getLoader("ktx2")}catch{ResourceLoader.registerLoader(i,"ktx2",{transcoderPath:"/webgl/libs/basis/",renderer:m})}(j=(L=ResourceLoader.getLoader("ktx2"))==null?void 0:L._loader)==null||j.setWorkerLimit(this._ktxWorkerLimit);try{ResourceLoader.getLoader("gltf")&&!ResourceLoader.getLoader("gltf")._gltfLoader.ktx2Loader&&ResourceLoader.getLoader("gltf")._gltfLoader.setKTX2Loader(ResourceLoader.getLoader("ktx2")._loader)}catch{}}resetLoaders(){var m,L;for(const j in ResourceLoader.loaders){const ee=ResourceLoader.loaders[j];ee instanceof i?this._resetKTX2Loader(ee):ee instanceof ThreeGLTFDracoLoader?this._resetDracoLoader(ee):(m=ee._loader)!=null&&m.dispose&&((L=ee._loader)==null||L.dispose())}}_resetKTX2Loader(m){const L=m==null?void 0:m._loader;L&&L.workerPool.dispose()}_resetDracoLoader(m){const L=m==null?void 0:m._dracoLoader;if(L){for(let j=0;j<L.workerPool.length;++j)L.workerPool[j].terminate();L.workerPool.length=0}}_createResourceLoader(){return new ResourceLoader}_addViewsAssets(m=[],L=this._resourceLoader){m.forEach(j=>{this.addViewAssets(j,L)})}addViewAssets(m,L=this._resourceLoader){const j=m.resources.preload,ee=GLOBAL.isProduction&&(typeof j.production=="function"?j.production():j.production),re=GLOBAL.isDevelopment&&(typeof j.development=="function"?j.development():j.development),le=ee||re||m.name===this._firstView;m.resources.items=this._updateFallbacks(m.resources.items),m.resources.commonItems&&L.add({resources:m.resources.commonItems,preload:le}),L.add({resources:m.resources.items,namespace:m.name,preload:le})}_updateFallbacks(m){const L=[],j=[];return m.forEach(ee=>{if(ee.fallback){const re=Object.keys(ee.fallback);for(let le=0;le<re.length;le++){const ve=re[le];if(this._fallbacks[ve]===!0){j.push(ee),L.push(ee.fallback[ve]);break}}}}),m=m.filter(ee=>!j.includes(ee)),m.push(...L),m}_setupEventListeners(){this._resourceLoader.addEventListener("progress",this._loadingProgressHandler),this._resourceLoader.addEventListener("complete",this._loadingCompleteHandler)}_bindHandlers(){this._loadingProgressHandler=this._loadingProgressHandler.bind(this),this._loadingCompleteHandler=this._loadingCompleteHandler.bind(this)}_loadingProgressHandler(m){this.dispatchEvent("progress",m)}_loadingCompleteHandler(m){this._resourcesLoaded+=m.length,!(this._resourcesLoaded<this._resourceLoader._resourcesToPreload.length)&&(this.resetLoaders(),this.dispatchEvent("complete"),this._initialLoading=!1)}}const Preloader$1=new Preloader;class WebglApp extends EventDispatcher$1{init(m){this._canvas=m.canvas,this._isDevelopment=m.isDevelopment,this._viewsConfig=m.viewsConfig||[],this._frameCount=0,this._isActive=!0,this._isViewRenderingEnabled=!0,this._isStatsGpuQueryStarted=!1,this._createDebug(),this._createDebugTextureComponent(),this._createClock(),this._createRenderer(),this._createViewManager(),this._createUniforms(),this._createMainScene(),Preloader$1.setRenderer(this._renderer.instance),(this._isDevelopment||GLOBAL.params.stats)&&this._createStats(),this._bindHandlers(),this._setupEventListeners(),this._resize(),this.events=new EventDispatcher$1}destroy(){var m,L,j,ee,re,le,ve;(m=this._debug)==null||m.dispose(),(L=this._debugTextureComponent)==null||L.destroy(),this._removeStats(),this._removeEventListeners(),(j=this._viewManager)==null||j.destroy(),(ee=this._overlayManager)==null||ee.destroy(),(re=this._overlayRenderer)==null||re.destroy(),(le=this._renderer)==null||le.destroy(),(ve=this._mainScene)==null||ve.destroy()}get fpsTier(){var m;return(m=this._fpsTester)==null?void 0:m.fpsTier}get frameCount(){return this._frameCount}get drs(){return this._drs}get scene(){return this._scene}get camera(){return this._camera}get mainScene(){return this._mainScene}get renderer(){return this._renderer}get viewManager(){return this._viewManager}get uniforms(){return this._uniforms}start(){globalConfig.device=globalConfig.deviceConfig(),this._mainScene.onAssetsLoaded(),this._viewManager.setup(),this._drs&&(this._drs.maxRenderScale=WindowResizeObserver$1.dpr)}enableViewRendering(){this._isViewRenderingEnabled=!0}disableViewRendering(){this._isViewRenderingEnabled=!1}_bindHandlers(){this._resizeHandler=this._resizeHandler.bind(this),this._tickHandler=this._tickHandler.bind(this),this._visibilityChangeHandler=this._visibilityChangeHandler.bind(this)}_setupEventListeners(){WindowResizeObserver$1.addEventListener("resize",this._resizeHandler),gsapWithCSS.ticker.add(this._tickHandler),Visibility$1.addEventListener("change",this._visibilityChangeHandler)}_removeEventListeners(){WindowResizeObserver$1.removeEventListener("resize",this._resizeHandler),gsapWithCSS.ticker.remove(this._tickHandler),Visibility$1.removeEventListener("change",this._visibilityChangeHandler)}_createStats(){this._statsGL=new Stats({minimal:!0}),document.body.appendChild(this._statsGL.container),this._statsGL.init(this._renderer.instance.domElement)}_removeStats(){this._statsGL&&document.body.removeChild(this._statsGL.container),this._statsGL=null,this._stats&&document.body.removeChild(this._stats.dom),this._stats=null}_createDebugTextureComponent(){(this._isDevelopment||GLOBAL.params.debugTexture.enabled)&&(this._debugTextureComponent=new DebugTexturesComponent({config:{}}))}_createClock(){this._clock=new Clock}_createMainScene(){this._mainScene=new MainScene,this._mainScene.compile()}_createRenderer(){this._renderer=new Renderer({canvas:this._canvas})}_createViewManager(){this._viewManager=new ViewManager({viewsConfig:this._viewsConfig})}_createUniforms(){this._uniforms={uTime:{value:0},uMouse:{value:new Vector2},uResolution:{value:new Vector2(300,100)},uDpr:{value:1}}}_tick(){var m,L,j,ee,re,le,ve,ye;this._isActive&&((m=this._fpsTester)==null||m.begin(),(L=this._drs)==null||L.begin(),(j=this._statsGL)==null||j.begin(),(ee=this._stats)==null||ee.begin(),this._update(),this._render(),(re=this._fpsTester)==null||re.end(),(le=this._drs)==null||le.end(),(ve=this._statsGL)==null||ve.end(),(ye=this._stats)==null||ye.end(),this._renderer&&this._renderer.instance.info.reset())}_update(){const m=this._clock.getDelta(),L=this._clock.getElapsedTime();this._frameCount++,this._uniforms.uTime.value+=m,this.dispatchEvent("update",{delta:m,time:L,frameCount:this._frameCount},!0)}_render(){if(this._isViewRenderingEnabled,this._isDevelopment&&this._renderer.updateStats(),this._debugTextureComponent&&this._debugTextureComponent.visible){const m=this._renderer.instance.autoClear;this._renderer.instance.autoClear=!1;const L=this._renderer.instance.getRenderTarget();this._renderer.instance.setRenderTarget(null),this._renderer.instance.render(this._debugTextureComponent,this._debugTextureComponent.camera),this._renderer.instance.autoClear=m,this._renderer.instance.setRenderTarget(L)}}_resize(){const m=WindowResizeObserver$1.dimensions;this._renderer.resize(m),m.renderWidth=this._renderer.width,m.renderHeight=this._renderer.height,m.renderScale=this._renderer.renderScale,this._uniforms.uResolution.value.set(m.renderWidth,m.renderHeight),this._uniforms.uDpr.value=m.renderScale,this.dispatchEvent("resize",{...m},!0)}_resizeHandler(m){this._resize(m)}_tickHandler(){this._tick()}_visibilityChangeHandler({isHidden:m}){m?(this._clock.stop(),this._isActive=!1):(this._clock.start(),this._isActive=!0)}_createDebug(){}}const WebglApp$1=new WebglApp,webglApp_K1BCxGBiK1=defineNuxtPlugin(()=>({provide:{webglApp:WebglApp$1}})),plugins=[revive_payload_client_4sVQNw7RlN,unhead_KgADcZ0jPj,plugin$1,_0_siteConfig_MwZUzHrRNP,payload_client_yVLowv6hDl,check_outdated_build_client_8vK7RkfGxZ,plugin,components_plugin_KR1HBZs4kY,prefetch_client_5tzzN0oIVL,chunk_reload_client_UciE0i6zes,gtag_RbOvmu12fv,webglApp_K1BCxGBiK1],RouteProvider=defineComponent({props:{vnode:{type:Object,required:!0},route:{type:Object,required:!0},vnodeRef:Object,renderKey:String,trackRootNodes:Boolean},setup($){const m=$.renderKey,L=$.route,j={};for(const ee in $.route)Object.defineProperty(j,ee,{get:()=>m===$.renderKey?$.route[ee]:L[ee]});return provide(PageRouteSymbol,shallowReactive(j)),()=>h($.vnode,{ref:$.vnodeRef})}}),__nuxt_component_0=defineComponent({name:"NuxtPage",inheritAttrs:!1,props:{name:{type:String},transition:{type:[Boolean,Object],default:void 0},keepalive:{type:[Boolean,Object],default:void 0},route:{type:Object},pageKey:{type:[Function,String],default:null}},setup($,{attrs:m,expose:L}){const j=useNuxtApp(),ee=ref(),re=inject(PageRouteSymbol,null);let le;L({pageRef:ee});const ve=inject(LayoutMetaSymbol,null);let ye;const Ee=j.deferHydration();if(j.isHydrating){const Me=j.hooks.hookOnce("app:error",Ee);useRouter().beforeEach(Me)}return $.pageKey&&watch(()=>$.pageKey,(Me,Ce)=>{Me!==Ce&&j.callHook("page:loading:start")}),()=>h(RouterView,{name:$.name,route:$.route,...m},{default:Me=>{const Ce=haveParentRoutesRendered(re,Me.route,Me.Component),De=re&&re.matched.length===Me.route.matched.length;if(!Me.Component){if(ye&&!De)return ye;Ee();return}if(ye&&ve&&!ve.isCurrent(Me.route))return ye;if(Ce&&re&&(!ve||ve!=null&&ve.isCurrent(re)))return De?ye:null;const Be=generateRouteKey$1(Me,$.pageKey);!j.isHydrating&&!hasChildrenRoutes(re,Me.route,Me.Component)&&le===Be&&j.callHook("page:loading:end"),le=Be;const ke=!!($.transition??Me.route.meta.pageTransition??appPageTransition),Fe=ke&&_mergeTransitionProps([$.transition,Me.route.meta.pageTransition,appPageTransition,{onAfterLeave:()=>{j.callHook("page:transition:finish",Me.Component)}}].filter(Boolean)),Oe=$.keepalive??Me.route.meta.keepalive??appKeepalive;return ye=_wrapIf(Transition,ke&&Fe,wrapInKeepAlive(Oe,h(Suspense,{suspensible:!0,onPending:()=>j.callHook("page:start",Me.Component),onResolve:()=>{nextTick(()=>j.callHook("page:finish",Me.Component).then(()=>j.callHook("page:loading:end")).finally(Ee))}},{default:()=>{const Ne=h(RouteProvider,{key:Be||void 0,vnode:Me.Component,route:Me.route,renderKey:Be||void 0,trackRootNodes:ke,vnodeRef:ee});return Oe&&(Ne.type.name=Me.Component.type.name||Me.Component.type.__name||"RouteProvider"),Ne}}))).default(),ye}})}});function _mergeTransitionProps($){const m=$.map(L=>({...L,onAfterLeave:L.onAfterLeave?toArray$3(L.onAfterLeave):void 0}));return defu(...m)}function haveParentRoutesRendered($,m,L){if(!$)return!1;const j=m.matched.findIndex(ee=>{var re;return((re=ee.components)==null?void 0:re.default)===(L==null?void 0:L.type)});return!j||j===-1?!1:m.matched.slice(0,j).some((ee,re)=>{var le,ve,ye;return((le=ee.components)==null?void 0:le.default)!==((ye=(ve=$.matched[re])==null?void 0:ve.components)==null?void 0:ye.default)})||L&&generateRouteKey$1({route:m,Component:L})!==generateRouteKey$1({route:$,Component:L})}function hasChildrenRoutes($,m,L){return $?m.matched.findIndex(ee=>{var re;return((re=ee.components)==null?void 0:re.default)===(L==null?void 0:L.type)})<m.matched.length-1:!1}const LayoutLoader=defineComponent({name:"LayoutLoader",inheritAttrs:!1,props:{name:String,layoutProps:Object},async setup($,m){const L=await layouts[$.name]().then(j=>j.default||j);return()=>h(L,$.layoutProps,m.slots)}}),__nuxt_component_1=defineComponent({name:"NuxtLayout",inheritAttrs:!1,props:{name:{type:[String,Boolean,Object],default:null},fallback:{type:[String,Object],default:null}},setup($,m){const L=useNuxtApp(),j=inject(PageRouteSymbol),ee=j===useRoute$1()?useRoute():j,re=computed(()=>{let ye=unref($.name)??ee.meta.layout??"default";return ye&&!(ye in layouts)&&$.fallback&&(ye=unref($.fallback)),ye}),le=ref();m.expose({layoutRef:le});const ve=L.deferHydration();if(L.isHydrating){const ye=L.hooks.hookOnce("app:error",ve);useRouter().beforeEach(ye)}return()=>{const ye=re.value&&re.value in layouts,Ee=ee.meta.layoutTransition??appLayoutTransition;return _wrapIf(Transition,ye&&Ee,{default:()=>h(Suspense,{suspensible:!0,onResolve:()=>{nextTick(ve)}},{default:()=>h(LayoutProvider,{layoutProps:mergeProps(m.attrs,{ref:le}),key:re.value||void 0,name:re.value,shouldProvide:!$.name,hasTransition:!!Ee},m.slots)})}).default()}}}),LayoutProvider=defineComponent({name:"NuxtLayoutProvider",inheritAttrs:!1,props:{name:{type:[String,Boolean]},layoutProps:{type:Object},hasTransition:{type:Boolean},shouldProvide:{type:Boolean}},setup($,m){const L=$.name;return $.shouldProvide&&provide(LayoutMetaSymbol,{isCurrent:j=>L===(j.meta.layout??"default")}),()=>{var j,ee;return!L||typeof L=="string"&&!(L in layouts)?(ee=(j=m.slots).default)==null?void 0:ee.call(j):h(LayoutLoader,{key:L,layoutProps:$.layoutProps,name:L},m.slots)}}});/*!
 * paths 3.12.5
 * https://gsap.com
 *
 * Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var _svgPathExp=/[achlmqstvz]|(-?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/ig,_scientific=/[\+\-]?\d*\.?\d+e[\+\-]?\d+/ig,_DEG2RAD=Math.PI/180,_sin=Math.sin,_cos=Math.cos,_abs=Math.abs,_sqrt=Math.sqrt,_isNumber=function(m){return typeof m=="number"},_roundingNum=1e5,_round$1=function(m){return Math.round(m*_roundingNum)/_roundingNum||0};function transformRawPath($,m,L,j,ee,re,le){for(var ve=$.length,ye,Ee,Me,Ce,De;--ve>-1;)for(ye=$[ve],Ee=ye.length,Me=0;Me<Ee;Me+=2)Ce=ye[Me],De=ye[Me+1],ye[Me]=Ce*m+De*j+re,ye[Me+1]=Ce*L+De*ee+le;return $._dirty=1,$}function arcToSegment($,m,L,j,ee,re,le,ve,ye){if(!($===ve&&m===ye)){L=_abs(L),j=_abs(j);var Ee=ee%360*_DEG2RAD,Me=_cos(Ee),Ce=_sin(Ee),De=Math.PI,Be=De*2,ke=($-ve)/2,Fe=(m-ye)/2,Oe=Me*ke+Ce*Fe,Ne=-Ce*ke+Me*Fe,ze=Oe*Oe,$e=Ne*Ne,He=ze/(L*L)+$e/(j*j);He>1&&(L=_sqrt(He)*L,j=_sqrt(He)*j);var We=L*L,qe=j*j,Ye=(We*qe-We*$e-qe*ze)/(We*$e+qe*ze);Ye<0&&(Ye=0);var Ze=(re===le?-1:1)*_sqrt(Ye),Ke=Ze*(L*Ne/j),rt=Ze*-(j*Oe/L),ft=($+ve)/2,mt=(m+ye)/2,Et=ft+(Me*Ke-Ce*rt),bt=mt+(Ce*Ke+Me*rt),Ct=(Oe-Ke)/L,st=(Ne-rt)/j,at=(-Oe-Ke)/L,Xe=(-Ne-rt)/j,ht=Ct*Ct+st*st,Bt=(st<0?-1:1)*Math.acos(Ct/_sqrt(ht)),Dt=(Ct*Xe-st*at<0?-1:1)*Math.acos((Ct*at+st*Xe)/_sqrt(ht*(at*at+Xe*Xe)));isNaN(Dt)&&(Dt=De),!le&&Dt>0?Dt-=Be:le&&Dt<0&&(Dt+=Be),Bt%=Be,Dt%=Be;var Jt=Math.ceil(_abs(Dt)/(Be/4)),tn=[],zt=Dt/Jt,Vt=4/3*_sin(zt/2)/(1+_cos(zt/2)),Mt=Me*L,Tt=Ce*L,qt=Ce*-j,on=Me*j,pn;for(pn=0;pn<Jt;pn++)ee=Bt+pn*zt,Oe=_cos(ee),Ne=_sin(ee),Ct=_cos(ee+=zt),st=_sin(ee),tn.push(Oe-Vt*Ne,Ne+Vt*Oe,Ct+Vt*st,st-Vt*Ct,Ct,st);for(pn=0;pn<tn.length;pn+=2)Oe=tn[pn],Ne=tn[pn+1],tn[pn]=Oe*Mt+Ne*qt+Et,tn[pn+1]=Oe*Tt+Ne*on+bt;return tn[pn-2]=ve,tn[pn-1]=ye,tn}}function stringToRawPath($){var m=($+"").replace(_scientific,function(Ke){var rt=+Ke;return rt<1e-4&&rt>-1e-4?0:rt}).match(_svgPathExp)||[],L=[],j=0,ee=0,re=2/3,le=m.length,ve=0,ye="ERROR: malformed path: "+$,Ee,Me,Ce,De,Be,ke,Fe,Oe,Ne,ze,$e,He,We,qe,Ye,Ze=function(rt,ft,mt,Et){ze=(mt-rt)/3,$e=(Et-ft)/3,Fe.push(rt+ze,ft+$e,mt-ze,Et-$e,mt,Et)};if(!$||!isNaN(m[0])||isNaN(m[1]))return console.log(ye),L;for(Ee=0;Ee<le;Ee++)if(We=Be,isNaN(m[Ee])?(Be=m[Ee].toUpperCase(),ke=Be!==m[Ee]):Ee--,Ce=+m[Ee+1],De=+m[Ee+2],ke&&(Ce+=j,De+=ee),Ee||(Oe=Ce,Ne=De),Be==="M")Fe&&(Fe.length<8?L.length-=1:ve+=Fe.length),j=Oe=Ce,ee=Ne=De,Fe=[Ce,De],L.push(Fe),Ee+=2,Be="L";else if(Be==="C")Fe||(Fe=[0,0]),ke||(j=ee=0),Fe.push(Ce,De,j+m[Ee+3]*1,ee+m[Ee+4]*1,j+=m[Ee+5]*1,ee+=m[Ee+6]*1),Ee+=6;else if(Be==="S")ze=j,$e=ee,(We==="C"||We==="S")&&(ze+=j-Fe[Fe.length-4],$e+=ee-Fe[Fe.length-3]),ke||(j=ee=0),Fe.push(ze,$e,Ce,De,j+=m[Ee+3]*1,ee+=m[Ee+4]*1),Ee+=4;else if(Be==="Q")ze=j+(Ce-j)*re,$e=ee+(De-ee)*re,ke||(j=ee=0),j+=m[Ee+3]*1,ee+=m[Ee+4]*1,Fe.push(ze,$e,j+(Ce-j)*re,ee+(De-ee)*re,j,ee),Ee+=4;else if(Be==="T")ze=j-Fe[Fe.length-4],$e=ee-Fe[Fe.length-3],Fe.push(j+ze,ee+$e,Ce+(j+ze*1.5-Ce)*re,De+(ee+$e*1.5-De)*re,j=Ce,ee=De),Ee+=2;else if(Be==="H")Ze(j,ee,j=Ce,ee),Ee+=1;else if(Be==="V")Ze(j,ee,j,ee=Ce+(ke?ee-j:0)),Ee+=1;else if(Be==="L"||Be==="Z")Be==="Z"&&(Ce=Oe,De=Ne,Fe.closed=!0),(Be==="L"||_abs(j-Ce)>.5||_abs(ee-De)>.5)&&(Ze(j,ee,Ce,De),Be==="L"&&(Ee+=2)),j=Ce,ee=De;else if(Be==="A"){if(qe=m[Ee+4],Ye=m[Ee+5],ze=m[Ee+6],$e=m[Ee+7],Me=7,qe.length>1&&(qe.length<3?($e=ze,ze=Ye,Me--):($e=Ye,ze=qe.substr(2),Me-=2),Ye=qe.charAt(1),qe=qe.charAt(0)),He=arcToSegment(j,ee,+m[Ee+1],+m[Ee+2],+m[Ee+3],+qe,+Ye,(ke?j:0)+ze*1,(ke?ee:0)+$e*1),Ee+=Me,He)for(Me=0;Me<He.length;Me++)Fe.push(He[Me]);j=Fe[Fe.length-2],ee=Fe[Fe.length-1]}else console.log(ye);return Ee=Fe.length,Ee<6?(L.pop(),Ee=0):Fe[0]===Fe[Ee-2]&&Fe[1]===Fe[Ee-1]&&(Fe.closed=!0),L.totalPoints=ve+Ee,L}function rawPathToString($){_isNumber($[0])&&($=[$]);var m="",L=$.length,j,ee,re,le;for(ee=0;ee<L;ee++){for(le=$[ee],m+="M"+_round$1(le[0])+","+_round$1(le[1])+" C",j=le.length,re=2;re<j;re++)m+=_round$1(le[re++])+","+_round$1(le[re++])+" "+_round$1(le[re++])+","+_round$1(le[re++])+" "+_round$1(le[re++])+","+_round$1(le[re])+" ";le.closed&&(m+="z")}return m}/*!
 * CustomEase 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var gsap,_coreInitted$1,_getGSAP=function(){return gsap||typeof window<"u"&&(gsap=window.gsap)&&gsap.registerPlugin&&gsap},_initCore$1=function(){gsap=_getGSAP(),gsap?(gsap.registerEase("_CE",CustomEase.create),_coreInitted$1=1):console.warn("Please gsap.registerPlugin(CustomEase)")},_bigNum=1e20,_round=function(m){return~~(m*1e3+(m<0?-.5:.5))/1e3},_numExp=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/gi,_needsParsingExp=/[cLlsSaAhHvVtTqQ]/g,_findMinimum=function(m){var L=m.length,j=_bigNum,ee;for(ee=1;ee<L;ee+=6)+m[ee]<j&&(j=+m[ee]);return j},_normalize=function(m,L,j){!j&&j!==0&&(j=Math.max(+m[m.length-1],+m[1]));var ee=+m[0]*-1,re=-j,le=m.length,ve=1/(+m[le-2]+ee),ye=-L||(Math.abs(+m[le-1]-+m[1])<.01*(+m[le-2]-+m[0])?_findMinimum(m)+re:+m[le-1]+re),Ee;for(ye?ye=1/ye:ye=-ve,Ee=0;Ee<le;Ee+=2)m[Ee]=(+m[Ee]+ee)*ve,m[Ee+1]=(+m[Ee+1]+re)*ye},_bezierToPoints=function $(m,L,j,ee,re,le,ve,ye,Ee,Me,Ce){var De=(m+j)/2,Be=(L+ee)/2,ke=(j+re)/2,Fe=(ee+le)/2,Oe=(re+ve)/2,Ne=(le+ye)/2,ze=(De+ke)/2,$e=(Be+Fe)/2,He=(ke+Oe)/2,We=(Fe+Ne)/2,qe=(ze+He)/2,Ye=($e+We)/2,Ze=ve-m,Ke=ye-L,rt=Math.abs((j-ve)*Ke-(ee-ye)*Ze),ft=Math.abs((re-ve)*Ke-(le-ye)*Ze),mt;return Me||(Me=[{x:m,y:L},{x:ve,y:ye}],Ce=1),Me.splice(Ce||Me.length-1,0,{x:qe,y:Ye}),(rt+ft)*(rt+ft)>Ee*(Ze*Ze+Ke*Ke)&&(mt=Me.length,$(m,L,De,Be,ze,$e,qe,Ye,Ee,Me,Ce),$(qe,Ye,He,We,Oe,Ne,ve,ye,Ee,Me,Ce+1+(Me.length-mt))),Me},CustomEase=function(){function $(L,j,ee){_coreInitted$1||_initCore$1(),this.id=L,this.setData(j,ee)}var m=$.prototype;return m.setData=function(j,ee){ee=ee||{},j=j||"0,0,1,1";var re=j.match(_numExp),le=1,ve=[],ye=[],Ee=ee.precision||1,Me=Ee<=1,Ce,De,Be,ke,Fe,Oe,Ne,ze,$e;if(this.data=j,(_needsParsingExp.test(j)||~j.indexOf("M")&&j.indexOf("C")<0)&&(re=stringToRawPath(j)[0]),Ce=re.length,Ce===4)re.unshift(0,0),re.push(1,1),Ce=8;else if((Ce-2)%6)throw"Invalid CustomEase";for((+re[0]!=0||+re[Ce-2]!=1)&&_normalize(re,ee.height,ee.originY),this.segment=re,ke=2;ke<Ce;ke+=6)De={x:+re[ke-2],y:+re[ke-1]},Be={x:+re[ke+4],y:+re[ke+5]},ve.push(De,Be),_bezierToPoints(De.x,De.y,+re[ke],+re[ke+1],+re[ke+2],+re[ke+3],Be.x,Be.y,1/(Ee*2e5),ve,ve.length-1);for(Ce=ve.length,ke=0;ke<Ce;ke++)Ne=ve[ke],ze=ve[ke-1]||Ne,(Ne.x>ze.x||ze.y!==Ne.y&&ze.x===Ne.x||Ne===ze)&&Ne.x<=1?(ze.cx=Ne.x-ze.x,ze.cy=Ne.y-ze.y,ze.n=Ne,ze.nx=Ne.x,Me&&ke>1&&Math.abs(ze.cy/ze.cx-ve[ke-2].cy/ve[ke-2].cx)>2&&(Me=0),ze.cx<le&&(ze.cx?le=ze.cx:(ze.cx=.001,ke===Ce-1&&(ze.x-=.001,le=Math.min(le,.001),Me=0)))):(ve.splice(ke--,1),Ce--);if(Ce=1/le+1|0,Fe=1/Ce,Oe=0,Ne=ve[0],Me){for(ke=0;ke<Ce;ke++)$e=ke*Fe,Ne.nx<$e&&(Ne=ve[++Oe]),De=Ne.y+($e-Ne.x)/Ne.cx*Ne.cy,ye[ke]={x:$e,cx:Fe,y:De,cy:0,nx:9},ke&&(ye[ke-1].cy=De-ye[ke-1].y);ye[Ce-1].cy=ve[ve.length-1].y-De}else{for(ke=0;ke<Ce;ke++)Ne.nx<ke*Fe&&(Ne=ve[++Oe]),ye[ke]=Ne;Oe<ve.length-1&&(ye[ke-1]=ve[ve.length-2])}return this.ease=function(He){var We=ye[He*Ce|0]||ye[Ce-1];return We.nx<He&&(We=We.n),We.y+(He-We.x)/We.cx*We.cy},this.ease.custom=this,this.id&&gsap&&gsap.registerEase(this.id,this.ease),this},m.getSVGData=function(j){return $.getSVGData(this,j)},$.create=function(j,ee,re){return new $(j,ee,re).ease},$.register=function(j){gsap=j,_initCore$1()},$.get=function(j){return gsap.parseEase(j)},$.getSVGData=function(j,ee){ee=ee||{};var re=ee.width||100,le=ee.height||100,ve=ee.x||0,ye=(ee.y||0)+le,Ee=gsap.utils.toArray(ee.path)[0],Me,Ce,De,Be,ke,Fe,Oe,Ne,ze,$e;if(ee.invert&&(le=-le,ye=0),typeof j=="string"&&(j=gsap.parseEase(j)),j.custom&&(j=j.custom),j instanceof $)Me=rawPathToString(transformRawPath([j.segment],re,0,0,-le,ve,ye));else{for(Me=[ve,ye],Oe=Math.max(5,(ee.precision||1)*200),Be=1/Oe,Oe+=2,Ne=5/Oe,ze=_round(ve+Be*re),$e=_round(ye+j(Be)*-le),Ce=($e-ye)/(ze-ve),De=2;De<Oe;De++)ke=_round(ve+De*Be*re),Fe=_round(ye+j(De*Be)*-le),(Math.abs((Fe-$e)/(ke-ze)-Ce)>Ne||De===Oe-1)&&(Me.push(ze,$e),Ce=(Fe-$e)/(ke-ze)),ze=ke,$e=Fe;Me="M"+Me.join(",")}return Ee&&Ee.setAttribute("d",Me),Me},$}();_getGSAP()&&gsap.registerPlugin(CustomEase);CustomEase.version="3.12.5";const memoizedWindow={cache:new Map,init(){gsapWithCSS.ticker.add(tickRefresh)},refresh(){this.cache.clear()},get($){let m=this.cache.get($);return typeof m>"u"&&(m=window[$],this.cache.set($,m)),m}},tickRefresh=function(){memoizedWindow.refresh()};var VERSION="1.13.6",root=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},ArrayProto=Array.prototype,ObjProto=Object.prototype,SymbolProto=typeof Symbol<"u"?Symbol.prototype:null,push=ArrayProto.push,slice=ArrayProto.slice,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty,supportsArrayBuffer=typeof ArrayBuffer<"u",supportsDataView=typeof DataView<"u",nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeCreate=Object.create,nativeIsView=supportsArrayBuffer&&ArrayBuffer.isView,_isNaN=isNaN,_isFinite=isFinite,hasEnumBug=!{toString:null}.propertyIsEnumerable("toString"),nonEnumerableProps=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],MAX_ARRAY_INDEX=Math.pow(2,53)-1;function restArguments($,m){return m=m==null?$.length-1:+m,function(){for(var L=Math.max(arguments.length-m,0),j=Array(L),ee=0;ee<L;ee++)j[ee]=arguments[ee+m];switch(m){case 0:return $.call(this,j);case 1:return $.call(this,arguments[0],j);case 2:return $.call(this,arguments[0],arguments[1],j)}var re=Array(m+1);for(ee=0;ee<m;ee++)re[ee]=arguments[ee];return re[m]=j,$.apply(this,re)}}function isObject($){var m=typeof $;return m==="function"||m==="object"&&!!$}function isNull($){return $===null}function isUndefined($){return $===void 0}function isBoolean($){return $===!0||$===!1||toString.call($)==="[object Boolean]"}function isElement($){return!!($&&$.nodeType===1)}function tagTester($){var m="[object "+$+"]";return function(L){return toString.call(L)===m}}const isString=tagTester("String"),isNumber=tagTester("Number"),isDate=tagTester("Date"),isRegExp=tagTester("RegExp"),isError=tagTester("Error"),isSymbol=tagTester("Symbol"),isArrayBuffer=tagTester("ArrayBuffer");var isFunction=tagTester("Function"),nodelist=root.document&&root.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof nodelist!="function"&&(isFunction=function($){return typeof $=="function"||!1});const isFunction$1=isFunction,hasObjectTag=tagTester("Object");var hasStringTagBug=supportsDataView&&hasObjectTag(new DataView(new ArrayBuffer(8))),isIE11=typeof Map<"u"&&hasObjectTag(new Map),isDataView=tagTester("DataView");function ie10IsDataView($){return $!=null&&isFunction$1($.getInt8)&&isArrayBuffer($.buffer)}const isDataView$1=hasStringTagBug?ie10IsDataView:isDataView,isArray=nativeIsArray||tagTester("Array");function has$1($,m){return $!=null&&hasOwnProperty.call($,m)}var isArguments=tagTester("Arguments");(function(){isArguments(arguments)||(isArguments=function($){return has$1($,"callee")})})();const isArguments$1=isArguments;function isFinite$1($){return!isSymbol($)&&_isFinite($)&&!isNaN(parseFloat($))}function isNaN$1($){return isNumber($)&&_isNaN($)}function constant($){return function(){return $}}function createSizePropertyCheck($){return function(m){var L=$(m);return typeof L=="number"&&L>=0&&L<=MAX_ARRAY_INDEX}}function shallowProperty($){return function(m){return m==null?void 0:m[$]}}const getByteLength=shallowProperty("byteLength"),isBufferLike=createSizePropertyCheck(getByteLength);var typedArrayPattern=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function isTypedArray($){return nativeIsView?nativeIsView($)&&!isDataView$1($):isBufferLike($)&&typedArrayPattern.test(toString.call($))}const isTypedArray$1=supportsArrayBuffer?isTypedArray:constant(!1),getLength=shallowProperty("length");function emulatedSet($){for(var m={},L=$.length,j=0;j<L;++j)m[$[j]]=!0;return{contains:function(ee){return m[ee]===!0},push:function(ee){return m[ee]=!0,$.push(ee)}}}function collectNonEnumProps($,m){m=emulatedSet(m);var L=nonEnumerableProps.length,j=$.constructor,ee=isFunction$1(j)&&j.prototype||ObjProto,re="constructor";for(has$1($,re)&&!m.contains(re)&&m.push(re);L--;)re=nonEnumerableProps[L],re in $&&$[re]!==ee[re]&&!m.contains(re)&&m.push(re)}function keys($){if(!isObject($))return[];if(nativeKeys)return nativeKeys($);var m=[];for(var L in $)has$1($,L)&&m.push(L);return hasEnumBug&&collectNonEnumProps($,m),m}function isEmpty($){if($==null)return!0;var m=getLength($);return typeof m=="number"&&(isArray($)||isString($)||isArguments$1($))?m===0:getLength(keys($))===0}function isMatch($,m){var L=keys(m),j=L.length;if($==null)return!j;for(var ee=Object($),re=0;re<j;re++){var le=L[re];if(m[le]!==ee[le]||!(le in ee))return!1}return!0}function _$1($){if($ instanceof _$1)return $;if(!(this instanceof _$1))return new _$1($);this._wrapped=$}_$1.VERSION=VERSION;_$1.prototype.value=function(){return this._wrapped};_$1.prototype.valueOf=_$1.prototype.toJSON=_$1.prototype.value;_$1.prototype.toString=function(){return String(this._wrapped)};function toBufferView($){return new Uint8Array($.buffer||$,$.byteOffset||0,getByteLength($))}var tagDataView="[object DataView]";function eq($,m,L,j){if($===m)return $!==0||1/$===1/m;if($==null||m==null)return!1;if($!==$)return m!==m;var ee=typeof $;return ee!=="function"&&ee!=="object"&&typeof m!="object"?!1:deepEq($,m,L,j)}function deepEq($,m,L,j){$ instanceof _$1&&($=$._wrapped),m instanceof _$1&&(m=m._wrapped);var ee=toString.call($);if(ee!==toString.call(m))return!1;if(hasStringTagBug&&ee=="[object Object]"&&isDataView$1($)){if(!isDataView$1(m))return!1;ee=tagDataView}switch(ee){case"[object RegExp]":case"[object String]":return""+$==""+m;case"[object Number]":return+$!=+$?+m!=+m:+$==0?1/+$===1/m:+$==+m;case"[object Date]":case"[object Boolean]":return+$==+m;case"[object Symbol]":return SymbolProto.valueOf.call($)===SymbolProto.valueOf.call(m);case"[object ArrayBuffer]":case tagDataView:return deepEq(toBufferView($),toBufferView(m),L,j)}var re=ee==="[object Array]";if(!re&&isTypedArray$1($)){var le=getByteLength($);if(le!==getByteLength(m))return!1;if($.buffer===m.buffer&&$.byteOffset===m.byteOffset)return!0;re=!0}if(!re){if(typeof $!="object"||typeof m!="object")return!1;var ve=$.constructor,ye=m.constructor;if(ve!==ye&&!(isFunction$1(ve)&&ve instanceof ve&&isFunction$1(ye)&&ye instanceof ye)&&"constructor"in $&&"constructor"in m)return!1}L=L||[],j=j||[];for(var Ee=L.length;Ee--;)if(L[Ee]===$)return j[Ee]===m;if(L.push($),j.push(m),re){if(Ee=$.length,Ee!==m.length)return!1;for(;Ee--;)if(!eq($[Ee],m[Ee],L,j))return!1}else{var Me=keys($),Ce;if(Ee=Me.length,keys(m).length!==Ee)return!1;for(;Ee--;)if(Ce=Me[Ee],!(has$1(m,Ce)&&eq($[Ce],m[Ce],L,j)))return!1}return L.pop(),j.pop(),!0}function isEqual($,m){return eq($,m)}function allKeys($){if(!isObject($))return[];var m=[];for(var L in $)m.push(L);return hasEnumBug&&collectNonEnumProps($,m),m}function ie11fingerprint($){var m=getLength($);return function(L){if(L==null)return!1;var j=allKeys(L);if(getLength(j))return!1;for(var ee=0;ee<m;ee++)if(!isFunction$1(L[$[ee]]))return!1;return $!==weakMapMethods||!isFunction$1(L[forEachName])}}var forEachName="forEach",hasName="has",commonInit=["clear","delete"],mapTail=["get",hasName,"set"],mapMethods=commonInit.concat(forEachName,mapTail),weakMapMethods=commonInit.concat(mapTail),setMethods=["add"].concat(commonInit,forEachName,hasName);const isMap=isIE11?ie11fingerprint(mapMethods):tagTester("Map"),isWeakMap=isIE11?ie11fingerprint(weakMapMethods):tagTester("WeakMap"),isSet=isIE11?ie11fingerprint(setMethods):tagTester("Set"),isWeakSet=tagTester("WeakSet");function values($){for(var m=keys($),L=m.length,j=Array(L),ee=0;ee<L;ee++)j[ee]=$[m[ee]];return j}function pairs($){for(var m=keys($),L=m.length,j=Array(L),ee=0;ee<L;ee++)j[ee]=[m[ee],$[m[ee]]];return j}function invert($){for(var m={},L=keys($),j=0,ee=L.length;j<ee;j++)m[$[L[j]]]=L[j];return m}function functions($){var m=[];for(var L in $)isFunction$1($[L])&&m.push(L);return m.sort()}function createAssigner($,m){return function(L){var j=arguments.length;if(m&&(L=Object(L)),j<2||L==null)return L;for(var ee=1;ee<j;ee++)for(var re=arguments[ee],le=$(re),ve=le.length,ye=0;ye<ve;ye++){var Ee=le[ye];(!m||L[Ee]===void 0)&&(L[Ee]=re[Ee])}return L}}const extend=createAssigner(allKeys),extendOwn=createAssigner(keys),defaults=createAssigner(allKeys,!0);function ctor(){return function(){}}function baseCreate($){if(!isObject($))return{};if(nativeCreate)return nativeCreate($);var m=ctor();m.prototype=$;var L=new m;return m.prototype=null,L}function create($,m){var L=baseCreate($);return m&&extendOwn(L,m),L}function clone($){return isObject($)?isArray($)?$.slice():extend({},$):$}function tap($,m){return m($),$}function toPath$1($){return isArray($)?$:[$]}_$1.toPath=toPath$1;function toPath($){return _$1.toPath($)}function deepGet($,m){for(var L=m.length,j=0;j<L;j++){if($==null)return;$=$[m[j]]}return L?$:void 0}function get($,m,L){var j=deepGet($,toPath(m));return isUndefined(j)?L:j}function has($,m){m=toPath(m);for(var L=m.length,j=0;j<L;j++){var ee=m[j];if(!has$1($,ee))return!1;$=$[ee]}return!!L}function identity($){return $}function matcher($){return $=extendOwn({},$),function(m){return isMatch(m,$)}}function property($){return $=toPath($),function(m){return deepGet(m,$)}}function optimizeCb($,m,L){if(m===void 0)return $;switch(L??3){case 1:return function(j){return $.call(m,j)};case 3:return function(j,ee,re){return $.call(m,j,ee,re)};case 4:return function(j,ee,re,le){return $.call(m,j,ee,re,le)}}return function(){return $.apply(m,arguments)}}function baseIteratee($,m,L){return $==null?identity:isFunction$1($)?optimizeCb($,m,L):isObject($)&&!isArray($)?matcher($):property($)}function iteratee($,m){return baseIteratee($,m,1/0)}_$1.iteratee=iteratee;function cb($,m,L){return _$1.iteratee!==iteratee?_$1.iteratee($,m):baseIteratee($,m,L)}function mapObject($,m,L){m=cb(m,L);for(var j=keys($),ee=j.length,re={},le=0;le<ee;le++){var ve=j[le];re[ve]=m($[ve],ve,$)}return re}function noop(){}function propertyOf($){return $==null?noop:function(m){return get($,m)}}function times($,m,L){var j=Array(Math.max(0,$));m=optimizeCb(m,L,1);for(var ee=0;ee<$;ee++)j[ee]=m(ee);return j}function random($,m){return m==null&&(m=$,$=0),$+Math.floor(Math.random()*(m-$+1))}const now=Date.now||function(){return new Date().getTime()};function createEscaper($){var m=function(re){return $[re]},L="(?:"+keys($).join("|")+")",j=RegExp(L),ee=RegExp(L,"g");return function(re){return re=re==null?"":""+re,j.test(re)?re.replace(ee,m):re}}const escapeMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},escape$1=createEscaper(escapeMap),unescapeMap=invert(escapeMap),unescape$1=createEscaper(unescapeMap),templateSettings=_$1.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var noMatch=/(.)^/,escapes={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},escapeRegExp=/\\|'|\r|\n|\u2028|\u2029/g;function escapeChar($){return"\\"+escapes[$]}var bareIdentifier=/^\s*(\w|\$)+\s*$/;function template($,m,L){!m&&L&&(m=L),m=defaults({},m,_$1.templateSettings);var j=RegExp([(m.escape||noMatch).source,(m.interpolate||noMatch).source,(m.evaluate||noMatch).source].join("|")+"|$","g"),ee=0,re="__p+='";$.replace(j,function(Ee,Me,Ce,De,Be){return re+=$.slice(ee,Be).replace(escapeRegExp,escapeChar),ee=Be+Ee.length,Me?re+=`'+
((__t=(`+Me+`))==null?'':_.escape(__t))+
'`:Ce?re+=`'+
((__t=(`+Ce+`))==null?'':__t)+
'`:De&&(re+=`';
`+De+`
__p+='`),Ee}),re+=`';
`;var le=m.variable;if(le){if(!bareIdentifier.test(le))throw new Error("variable is not a bare identifier: "+le)}else re=`with(obj||{}){
`+re+`}
`,le="obj";re=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+re+`return __p;
`;var ve;try{ve=new Function(le,"_",re)}catch(Ee){throw Ee.source=re,Ee}var ye=function(Ee){return ve.call(this,Ee,_$1)};return ye.source="function("+le+`){
`+re+"}",ye}function result($,m,L){m=toPath(m);var j=m.length;if(!j)return isFunction$1(L)?L.call($):L;for(var ee=0;ee<j;ee++){var re=$==null?void 0:$[m[ee]];re===void 0&&(re=L,ee=j),$=isFunction$1(re)?re.call($):re}return $}var idCounter=0;function uniqueId($){var m=++idCounter+"";return $?$+m:m}function chain($){var m=_$1($);return m._chain=!0,m}function executeBound($,m,L,j,ee){if(!(j instanceof m))return $.apply(L,ee);var re=baseCreate($.prototype),le=$.apply(re,ee);return isObject(le)?le:re}var partial=restArguments(function($,m){var L=partial.placeholder,j=function(){for(var ee=0,re=m.length,le=Array(re),ve=0;ve<re;ve++)le[ve]=m[ve]===L?arguments[ee++]:m[ve];for(;ee<arguments.length;)le.push(arguments[ee++]);return executeBound($,j,this,this,le)};return j});partial.placeholder=_$1;const bind=restArguments(function($,m,L){if(!isFunction$1($))throw new TypeError("Bind must be called on a function");var j=restArguments(function(ee){return executeBound($,j,m,this,L.concat(ee))});return j}),isArrayLike=createSizePropertyCheck(getLength);function flatten$1($,m,L,j){if(j=j||[],!m&&m!==0)m=1/0;else if(m<=0)return j.concat($);for(var ee=j.length,re=0,le=getLength($);re<le;re++){var ve=$[re];if(isArrayLike(ve)&&(isArray(ve)||isArguments$1(ve)))if(m>1)flatten$1(ve,m-1,L,j),ee=j.length;else for(var ye=0,Ee=ve.length;ye<Ee;)j[ee++]=ve[ye++];else L||(j[ee++]=ve)}return j}const bindAll=restArguments(function($,m){m=flatten$1(m,!1,!1);var L=m.length;if(L<1)throw new Error("bindAll must be passed function names");for(;L--;){var j=m[L];$[j]=bind($[j],$)}return $});function memoize($,m){var L=function(j){var ee=L.cache,re=""+(m?m.apply(this,arguments):j);return has$1(ee,re)||(ee[re]=$.apply(this,arguments)),ee[re]};return L.cache={},L}const delay=restArguments(function($,m,L){return setTimeout(function(){return $.apply(null,L)},m)}),defer=partial(delay,_$1,1);function throttle($,m,L){var j,ee,re,le,ve=0;L||(L={});var ye=function(){ve=L.leading===!1?0:now(),j=null,le=$.apply(ee,re),j||(ee=re=null)},Ee=function(){var Me=now();!ve&&L.leading===!1&&(ve=Me);var Ce=m-(Me-ve);return ee=this,re=arguments,Ce<=0||Ce>m?(j&&(clearTimeout(j),j=null),ve=Me,le=$.apply(ee,re),j||(ee=re=null)):!j&&L.trailing!==!1&&(j=setTimeout(ye,Ce)),le};return Ee.cancel=function(){clearTimeout(j),ve=0,j=ee=re=null},Ee}function debounce$1($,m,L){var j,ee,re,le,ve,ye=function(){var Me=now()-ee;m>Me?j=setTimeout(ye,m-Me):(j=null,L||(le=$.apply(ve,re)),j||(re=ve=null))},Ee=restArguments(function(Me){return ve=this,re=Me,ee=now(),j||(j=setTimeout(ye,m),L&&(le=$.apply(ve,re))),le});return Ee.cancel=function(){clearTimeout(j),j=re=ve=null},Ee}function wrap($,m){return partial(m,$)}function negate($){return function(){return!$.apply(this,arguments)}}function compose(){var $=arguments,m=$.length-1;return function(){for(var L=m,j=$[m].apply(this,arguments);L--;)j=$[L].call(this,j);return j}}function after($,m){return function(){if(--$<1)return m.apply(this,arguments)}}function before($,m){var L;return function(){return--$>0&&(L=m.apply(this,arguments)),$<=1&&(m=null),L}}const once=partial(before,2);function findKey($,m,L){m=cb(m,L);for(var j=keys($),ee,re=0,le=j.length;re<le;re++)if(ee=j[re],m($[ee],ee,$))return ee}function createPredicateIndexFinder($){return function(m,L,j){L=cb(L,j);for(var ee=getLength(m),re=$>0?0:ee-1;re>=0&&re<ee;re+=$)if(L(m[re],re,m))return re;return-1}}const findIndex=createPredicateIndexFinder(1),findLastIndex=createPredicateIndexFinder(-1);function sortedIndex($,m,L,j){L=cb(L,j,1);for(var ee=L(m),re=0,le=getLength($);re<le;){var ve=Math.floor((re+le)/2);L($[ve])<ee?re=ve+1:le=ve}return re}function createIndexFinder($,m,L){return function(j,ee,re){var le=0,ve=getLength(j);if(typeof re=="number")$>0?le=re>=0?re:Math.max(re+ve,le):ve=re>=0?Math.min(re+1,ve):re+ve+1;else if(L&&re&&ve)return re=L(j,ee),j[re]===ee?re:-1;if(ee!==ee)return re=m(slice.call(j,le,ve),isNaN$1),re>=0?re+le:-1;for(re=$>0?le:ve-1;re>=0&&re<ve;re+=$)if(j[re]===ee)return re;return-1}}const indexOf=createIndexFinder(1,findIndex,sortedIndex),lastIndexOf=createIndexFinder(-1,findLastIndex);function find($,m,L){var j=isArrayLike($)?findIndex:findKey,ee=j($,m,L);if(ee!==void 0&&ee!==-1)return $[ee]}function findWhere($,m){return find($,matcher(m))}function each($,m,L){m=optimizeCb(m,L);var j,ee;if(isArrayLike($))for(j=0,ee=$.length;j<ee;j++)m($[j],j,$);else{var re=keys($);for(j=0,ee=re.length;j<ee;j++)m($[re[j]],re[j],$)}return $}function map($,m,L){m=cb(m,L);for(var j=!isArrayLike($)&&keys($),ee=(j||$).length,re=Array(ee),le=0;le<ee;le++){var ve=j?j[le]:le;re[le]=m($[ve],ve,$)}return re}function createReduce($){var m=function(L,j,ee,re){var le=!isArrayLike(L)&&keys(L),ve=(le||L).length,ye=$>0?0:ve-1;for(re||(ee=L[le?le[ye]:ye],ye+=$);ye>=0&&ye<ve;ye+=$){var Ee=le?le[ye]:ye;ee=j(ee,L[Ee],Ee,L)}return ee};return function(L,j,ee,re){var le=arguments.length>=3;return m(L,optimizeCb(j,re,4),ee,le)}}const reduce=createReduce(1),reduceRight=createReduce(-1);function filter($,m,L){var j=[];return m=cb(m,L),each($,function(ee,re,le){m(ee,re,le)&&j.push(ee)}),j}function reject($,m,L){return filter($,negate(cb(m)),L)}function every($,m,L){m=cb(m,L);for(var j=!isArrayLike($)&&keys($),ee=(j||$).length,re=0;re<ee;re++){var le=j?j[re]:re;if(!m($[le],le,$))return!1}return!0}function some($,m,L){m=cb(m,L);for(var j=!isArrayLike($)&&keys($),ee=(j||$).length,re=0;re<ee;re++){var le=j?j[re]:re;if(m($[le],le,$))return!0}return!1}function contains($,m,L,j){return isArrayLike($)||($=values($)),(typeof L!="number"||j)&&(L=0),indexOf($,m,L)>=0}const invoke=restArguments(function($,m,L){var j,ee;return isFunction$1(m)?ee=m:(m=toPath(m),j=m.slice(0,-1),m=m[m.length-1]),map($,function(re){var le=ee;if(!le){if(j&&j.length&&(re=deepGet(re,j)),re==null)return;le=re[m]}return le==null?le:le.apply(re,L)})});function pluck($,m){return map($,property(m))}function where($,m){return filter($,matcher(m))}function max($,m,L){var j=-1/0,ee=-1/0,re,le;if(m==null||typeof m=="number"&&typeof $[0]!="object"&&$!=null){$=isArrayLike($)?$:values($);for(var ve=0,ye=$.length;ve<ye;ve++)re=$[ve],re!=null&&re>j&&(j=re)}else m=cb(m,L),each($,function(Ee,Me,Ce){le=m(Ee,Me,Ce),(le>ee||le===-1/0&&j===-1/0)&&(j=Ee,ee=le)});return j}function min($,m,L){var j=1/0,ee=1/0,re,le;if(m==null||typeof m=="number"&&typeof $[0]!="object"&&$!=null){$=isArrayLike($)?$:values($);for(var ve=0,ye=$.length;ve<ye;ve++)re=$[ve],re!=null&&re<j&&(j=re)}else m=cb(m,L),each($,function(Ee,Me,Ce){le=m(Ee,Me,Ce),(le<ee||le===1/0&&j===1/0)&&(j=Ee,ee=le)});return j}var reStrSymbol=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function toArray($){return $?isArray($)?slice.call($):isString($)?$.match(reStrSymbol):isArrayLike($)?map($,identity):values($):[]}function sample($,m,L){if(m==null||L)return isArrayLike($)||($=values($)),$[random($.length-1)];var j=toArray($),ee=getLength(j);m=Math.max(Math.min(m,ee),0);for(var re=ee-1,le=0;le<m;le++){var ve=random(le,re),ye=j[le];j[le]=j[ve],j[ve]=ye}return j.slice(0,m)}function shuffle($){return sample($,1/0)}function sortBy($,m,L){var j=0;return m=cb(m,L),pluck(map($,function(ee,re,le){return{value:ee,index:j++,criteria:m(ee,re,le)}}).sort(function(ee,re){var le=ee.criteria,ve=re.criteria;if(le!==ve){if(le>ve||le===void 0)return 1;if(le<ve||ve===void 0)return-1}return ee.index-re.index}),"value")}function group($,m){return function(L,j,ee){var re=m?[[],[]]:{};return j=cb(j,ee),each(L,function(le,ve){var ye=j(le,ve,L);$(re,le,ye)}),re}}const groupBy=group(function($,m,L){has$1($,L)?$[L].push(m):$[L]=[m]}),indexBy=group(function($,m,L){$[L]=m}),countBy=group(function($,m,L){has$1($,L)?$[L]++:$[L]=1}),partition=group(function($,m,L){$[L?0:1].push(m)},!0);function size($){return $==null?0:isArrayLike($)?$.length:keys($).length}function keyInObj($,m,L){return m in L}const pick=restArguments(function($,m){var L={},j=m[0];if($==null)return L;isFunction$1(j)?(m.length>1&&(j=optimizeCb(j,m[1])),m=allKeys($)):(j=keyInObj,m=flatten$1(m,!1,!1),$=Object($));for(var ee=0,re=m.length;ee<re;ee++){var le=m[ee],ve=$[le];j(ve,le,$)&&(L[le]=ve)}return L}),omit=restArguments(function($,m){var L=m[0],j;return isFunction$1(L)?(L=negate(L),m.length>1&&(j=m[1])):(m=map(flatten$1(m,!1,!1),String),L=function(ee,re){return!contains(m,re)}),pick($,L,j)});function initial($,m,L){return slice.call($,0,Math.max(0,$.length-(m==null||L?1:m)))}function first($,m,L){return $==null||$.length<1?m==null||L?void 0:[]:m==null||L?$[0]:initial($,$.length-m)}function rest($,m,L){return slice.call($,m==null||L?1:m)}function last($,m,L){return $==null||$.length<1?m==null||L?void 0:[]:m==null||L?$[$.length-1]:rest($,Math.max(0,$.length-m))}function compact($){return filter($,Boolean)}function flatten($,m){return flatten$1($,m,!1)}const difference=restArguments(function($,m){return m=flatten$1(m,!0,!0),filter($,function(L){return!contains(m,L)})}),without=restArguments(function($,m){return difference($,m)});function uniq($,m,L,j){isBoolean(m)||(j=L,L=m,m=!1),L!=null&&(L=cb(L,j));for(var ee=[],re=[],le=0,ve=getLength($);le<ve;le++){var ye=$[le],Ee=L?L(ye,le,$):ye;m&&!L?((!le||re!==Ee)&&ee.push(ye),re=Ee):L?contains(re,Ee)||(re.push(Ee),ee.push(ye)):contains(ee,ye)||ee.push(ye)}return ee}const union=restArguments(function($){return uniq(flatten$1($,!0,!0))});function intersection($){for(var m=[],L=arguments.length,j=0,ee=getLength($);j<ee;j++){var re=$[j];if(!contains(m,re)){var le;for(le=1;le<L&&contains(arguments[le],re);le++);le===L&&m.push(re)}}return m}function unzip($){for(var m=$&&max($,getLength).length||0,L=Array(m),j=0;j<m;j++)L[j]=pluck($,j);return L}const zip=restArguments(unzip);function object($,m){for(var L={},j=0,ee=getLength($);j<ee;j++)m?L[$[j]]=m[j]:L[$[j][0]]=$[j][1];return L}function range($,m,L){m==null&&(m=$||0,$=0),L||(L=m<$?-1:1);for(var j=Math.max(Math.ceil((m-$)/L),0),ee=Array(j),re=0;re<j;re++,$+=L)ee[re]=$;return ee}function chunk($,m){if(m==null||m<1)return[];for(var L=[],j=0,ee=$.length;j<ee;)L.push(slice.call($,j,j+=m));return L}function chainResult($,m){return $._chain?_$1(m).chain():m}function mixin($){return each(functions($),function(m){var L=_$1[m]=$[m];_$1.prototype[m]=function(){var j=[this._wrapped];return push.apply(j,arguments),chainResult(this,L.apply(_$1,j))}}),_$1}each(["pop","push","reverse","shift","sort","splice","unshift"],function($){var m=ArrayProto[$];_$1.prototype[$]=function(){var L=this._wrapped;return L!=null&&(m.apply(L,arguments),($==="shift"||$==="splice")&&L.length===0&&delete L[0]),chainResult(this,L)}});each(["concat","join","slice"],function($){var m=ArrayProto[$];_$1.prototype[$]=function(){var L=this._wrapped;return L!=null&&(L=m.apply(L,arguments)),chainResult(this,L)}});const allExports=Object.freeze(Object.defineProperty({__proto__:null,VERSION,after,all:every,allKeys,any:some,assign:extendOwn,before,bind,bindAll,chain,chunk,clone,collect:map,compact,compose,constant,contains,countBy,create,debounce:debounce$1,default:_$1,defaults,defer,delay,detect:find,difference,drop:rest,each,escape:escape$1,every,extend,extendOwn,filter,find,findIndex,findKey,findLastIndex,findWhere,first,flatten,foldl:reduce,foldr:reduceRight,forEach:each,functions,get,groupBy,has,head:first,identity,include:contains,includes:contains,indexBy,indexOf,initial,inject:reduce,intersection,invert,invoke,isArguments:isArguments$1,isArray,isArrayBuffer,isBoolean,isDataView:isDataView$1,isDate,isElement,isEmpty,isEqual,isError,isFinite:isFinite$1,isFunction:isFunction$1,isMap,isMatch,isNaN:isNaN$1,isNull,isNumber,isObject,isRegExp,isSet,isString,isSymbol,isTypedArray:isTypedArray$1,isUndefined,isWeakMap,isWeakSet,iteratee,keys,last,lastIndexOf,map,mapObject,matcher,matches:matcher,max,memoize,methods:functions,min,mixin,negate,noop,now,object,omit,once,pairs,partial,partition,pick,pluck,property,propertyOf,random,range,reduce,reduceRight,reject,rest,restArguments,result,sample,select:filter,shuffle,size,some,sortBy,sortedIndex,tail:rest,take:first,tap,template,templateSettings,throttle,times,toArray,toPath:toPath$1,transpose:unzip,unescape:unescape$1,union,uniq,unique:uniq,uniqueId,unzip,values,where,without,wrap,zip},Symbol.toStringTag,{value:"Module"}));var _=mixin(allExports);_._=_;let initialized$1=!1;class RafHelper{constructor(){this.datas=[],this.tick=this.tick.bind(this),typeof process>"u",this.init()}init(){initialized$1=!0,this.datas=[],requestAnimationFrame(this.tick)}tick(){const m=new Date().getTime();let L=this.datas.length-1;for(;L>=0;){const j=this.datas.length;if(j===0||L>j-1){L--;continue}const ee=this.datas[L];if(ee.classic){L--;continue}if(ee.fps!==60){const re=m-ee.lastTime,le=1e3/ee.fps;if(re<=le){L--;continue}ee.lastTime=m-re%le}if(ee.delay>0&&ee.delayCount<ee.delay){ee.delayCount++,L--;continue}ee.cb.apply(null,ee.args),ee.once&&this.remove(ee.cb,ee.delay),L--}if(this.datas.length===0){initialized$1=!1;return}requestAnimationFrame(this.tick)}tickClassic(){this.cb.apply(null,this.args),this.rafID=requestAnimationFrame(this.tickFunc)}add(m,L=0,j=60,ee=!1,re=[]){if(initialized$1||this.init(),typeof m!="function")return!1;const ve={classic:j===60&&!ee&&L===0,cb:m,fps:j,once:ee,delayCount:0,delay:L,lastTime:new Date().getTime(),args:re};return this.datas.push(ve),ve.classic&&(ve.tickFunc=this.tickClassic.bind(ve),ve.rafID=requestAnimationFrame(ve.tickFunc)),ve}addOnce(m,L=0,j=60,ee=[]){return this.add(m,L,j,!0,ee)}delayCall(m=0,L){const j=[];return Array.prototype.push.apply(j,arguments),j.shift(),j.shift(),this.addOnce(L,m,60,j)}remove(m,L=null){for(let j=0;j<this.datas.length;j++){const ee=this.datas[j];if(ee.cb===m&&(L==null||ee.delay===L)){ee.classic&&cancelAnimationFrame(ee.rafID),this.datas.splice(j,1);break}}}}const RafHelper$1=new RafHelper;let initialized=!1;class WindowHelper{constructor(){this.width=0,this.height=0,this.ratio=0,this._datas=[],this._resize=this._resize.bind(this),this._resizeDebounced_small_=debounce$1(this._resizeDebounced_small.bind(this),20,!1),this._resizeDebounced_medium_=debounce$1(this._resizeDebounced_medium.bind(this),150,!1),this._resizeDebounced_high_=debounce$1(this._resizeDebounced_high.bind(this),300,!1),this._resizeCompute()}init(){initialized||this._init()}resizeOnce(m,L=0){RafHelper$1.addOnce(m,L)}resize(m){if(initialized||this._init(),typeof m!="function")return!1;this._datas.push({callback:m,debounce:!1,delay:null})}resizeDebounce(m,L="small"){if(initialized||this._init(),typeof m!="function")return!1;["small","medium","high"].includes(L)||(L="small"),this._datas.push({callback:m,debounce:!0,delay:L})}remove(m){initialized||this._init();for(let L=0;L<this._datas.length;L++)if(this._datas[L].callback===m){this._datas.splice(L,1),RafHelper$1.remove(m);break}this._datas.length==0&&initialized&&(initialized=!1,this._bind(!1))}_init(){typeof window>"u"||(initialized=!0,this._datas=[],this._bind(!0),this._resizeCompute())}_bind(m=!0){const L=m?"addEventListener":"removeEventListener";window[L]("resize",this._resize),window[L]("resize",this._resizeDebounced_small_),window[L]("resize",this._resizeDebounced_medium_),window[L]("resize",this._resizeDebounced_high_)}_resize(m){this._resizeCompute(),this._datas.forEach(L=>{L.debounce||L.callback.call(null,m)})}_resizeCompute(){typeof window>"u"||(this.width=window.innerWidth,this.height=window.innerHeight,this.ratio=this.width/this.height)}_resizeDebounced_small(m){this._datas.forEach(L=>{L.debounce&&L.delay=="small"&&L.callback.call(null,m)})}_resizeDebounced_medium(m){this._datas.forEach(L=>{L.debounce&&L.delay=="medium"&&L.callback.call(null,m)})}_resizeDebounced_high(m){this._datas.forEach(L=>{L.debounce&&L.delay=="high"&&L.callback.call(null,m)})}}const WindowHelper$1=new WindowHelper,useUiStore=defineStore("ui",{state:()=>({currentRoute:null,previousRoute:null,mainLoader:{visible:!0,loaded:!1,progressComplete:!1,hidding:!1,hideOnComplete:null},page:{isWhiteDelayed:null},bg:{isHiding:!1,isHidden:!1,isShowing:!1,isShown:!0},menu:{isOpen:!1,isOpenDelayed:null,linkData:[],selectedLink:null},valuePopup:{isOpen:!1},home:{progress:0,section:0,sectionLimits:[0,.2,.4,.6,.8],sectionEndLimits:[.1,.2,.3,.4,.5,.6,.7,.8],isAutoplaySection:!1,isBetweenSections:!1,autoplaySectionLimits:[.1,.2,.3,.4,.5,.6,.7,.8],isHold:!1,isZoom:!1,fluidStrength:0,holdProgress:0,eggOverlayFade:0,planetsOverlayFade:0,eggExplosion:0,planets:0,highlightedPlanet:-1,armour:0,interactionController:null},windowSize:{width:0,height:0},debugParams:{debugDom:GLOBAL.params.debugDom},popin:{id:null,data:null},audio:{isMuted:!1},cursor:{isOver:!1,text:"",isDark:!1}}),getters:{windowWidth(){return this.windowSize.width},windowHeight(){return this.windowSize.height},debugDom(){return this.debugParams.debugDom},isMuted(){return this.audio.isMuted},navItems(){return useDatasStore().nav},isUiBgDark(){return!this.isWhitePage||this.menu.isOpen||this.menu.isOpenDelayed},isFixedScene(){return this.isWhitePageDelayed||this.menu.isOpenDelayed},isWhitePage(){return this.currentRouteType!=="home"},isWhitePageDelayed(){return this.page.isWhiteDelayed!=null?this.page.isWhiteDelayed:this.isWhitePage},currentRouteType(){var re,le;const $=useDatasStore(),m=useRoute$1(),L=((re=this.currentRoute)==null?void 0:re.path)||(m==null?void 0:m.path)||"";return(L.match("/preview")?m.query.draftId&&m.query.type:null)||((le=$.getPageByPath(L))==null?void 0:le.type)||"home"},previousRouteType(){var m;const $=useDatasStore();return this.previousRoute&&((m=$.getPageByPath(this.previousRoute.path))==null?void 0:m.type)},sectionsInBetween(){const $=this.home.sectionEndLimits.slice(0,4),m=this.home.sectionLimits.slice(1,5),L=new Array($.length+m.length);for(let j=0;j<L.length;j++){const ee=j%2===0?$:m;L[j]=ee[Math.floor(j/2)]}return L}},actions:{setRoute($,m){this.currentRoute=$,this.previousRoute=m},toggleMainLoader($=null){this.mainLoader.visible=$??this.mainLoader.visible},updateMainLoader({loaded:$=null,progressComplete:m=null,hidding:L=null,visible:j=null,hideOnComplete:ee=null}={}){L!=null&&(this.mainLoader.hidding=L),j!=null&&(this.mainLoader.visible=j),$!=null&&(this.mainLoader.loaded=$),m!=null&&(this.mainLoader.progressComplete=m),ee!=null&&(this.mainLoader.hideOnComplete=ee)},setBgShowState({isHiding:$=null,isHidden:m=null,isShowing:L=null,isShown:j=null}){$!=null&&(this.bg.isHiding=$),m!=null&&(this.bg.isHidden=m),L!=null&&(this.bg.isShowing=L,L&&(this.page.isWhiteDelayed=this.isWhitePage,this.menu.isOpenDelayed=this.menu.isOpen)),j!=null&&(this.bg.isShown=j)},setIsMuted($){this.audio.isMuted=$},setIsHover($){this.cursor.isOver=$}}});var howler={};/*!
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function($){(function(){var m=function(){this.init()};m.prototype={init:function(){var Ce=this||L;return Ce._counter=1e3,Ce._html5AudioPool=[],Ce.html5PoolSize=10,Ce._codecs={},Ce._howls=[],Ce._muted=!1,Ce._volume=1,Ce._canPlayEvent="canplaythrough",Ce._navigator=typeof window<"u"&&window.navigator?window.navigator:null,Ce.masterGain=null,Ce.noAudio=!1,Ce.usingWebAudio=!0,Ce.autoSuspend=!0,Ce.ctx=null,Ce.autoUnlock=!0,Ce._setup(),Ce},volume:function(Ce){var De=this||L;if(Ce=parseFloat(Ce),De.ctx||Me(),typeof Ce<"u"&&Ce>=0&&Ce<=1){if(De._volume=Ce,De._muted)return De;De.usingWebAudio&&De.masterGain.gain.setValueAtTime(Ce,L.ctx.currentTime);for(var Be=0;Be<De._howls.length;Be++)if(!De._howls[Be]._webAudio)for(var ke=De._howls[Be]._getSoundIds(),Fe=0;Fe<ke.length;Fe++){var Oe=De._howls[Be]._soundById(ke[Fe]);Oe&&Oe._node&&(Oe._node.volume=Oe._volume*Ce)}return De}return De._volume},mute:function(Ce){var De=this||L;De.ctx||Me(),De._muted=Ce,De.usingWebAudio&&De.masterGain.gain.setValueAtTime(Ce?0:De._volume,L.ctx.currentTime);for(var Be=0;Be<De._howls.length;Be++)if(!De._howls[Be]._webAudio)for(var ke=De._howls[Be]._getSoundIds(),Fe=0;Fe<ke.length;Fe++){var Oe=De._howls[Be]._soundById(ke[Fe]);Oe&&Oe._node&&(Oe._node.muted=Ce?!0:Oe._muted)}return De},stop:function(){for(var Ce=this||L,De=0;De<Ce._howls.length;De++)Ce._howls[De].stop();return Ce},unload:function(){for(var Ce=this||L,De=Ce._howls.length-1;De>=0;De--)Ce._howls[De].unload();return Ce.usingWebAudio&&Ce.ctx&&typeof Ce.ctx.close<"u"&&(Ce.ctx.close(),Ce.ctx=null,Me()),Ce},codecs:function(Ce){return(this||L)._codecs[Ce.replace(/^x-/,"")]},_setup:function(){var Ce=this||L;if(Ce.state=Ce.ctx&&Ce.ctx.state||"suspended",Ce._autoSuspend(),!Ce.usingWebAudio)if(typeof Audio<"u")try{var De=new Audio;typeof De.oncanplaythrough>"u"&&(Ce._canPlayEvent="canplay")}catch{Ce.noAudio=!0}else Ce.noAudio=!0;try{var De=new Audio;De.muted&&(Ce.noAudio=!0)}catch{}return Ce.noAudio||Ce._setupCodecs(),Ce},_setupCodecs:function(){var Ce=this||L,De=null;try{De=typeof Audio<"u"?new Audio:null}catch{return Ce}if(!De||typeof De.canPlayType!="function")return Ce;var Be=De.canPlayType("audio/mpeg;").replace(/^no$/,""),ke=Ce._navigator?Ce._navigator.userAgent:"",Fe=ke.match(/OPR\/(\d+)/g),Oe=Fe&&parseInt(Fe[0].split("/")[1],10)<33,Ne=ke.indexOf("Safari")!==-1&&ke.indexOf("Chrome")===-1,ze=ke.match(/Version\/(.*?) /),$e=Ne&&ze&&parseInt(ze[1],10)<15;return Ce._codecs={mp3:!!(!Oe&&(Be||De.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!Be,opus:!!De.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!De.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!De.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(De.canPlayType('audio/wav; codecs="1"')||De.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!De.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!De.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(De.canPlayType("audio/x-m4a;")||De.canPlayType("audio/m4a;")||De.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(De.canPlayType("audio/x-m4b;")||De.canPlayType("audio/m4b;")||De.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(De.canPlayType("audio/x-mp4;")||De.canPlayType("audio/mp4;")||De.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!$e&&De.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!$e&&De.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!De.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(De.canPlayType("audio/x-flac;")||De.canPlayType("audio/flac;")).replace(/^no$/,"")},Ce},_unlockAudio:function(){var Ce=this||L;if(!(Ce._audioUnlocked||!Ce.ctx)){Ce._audioUnlocked=!1,Ce.autoUnlock=!1,!Ce._mobileUnloaded&&Ce.ctx.sampleRate!==44100&&(Ce._mobileUnloaded=!0,Ce.unload()),Ce._scratchBuffer=Ce.ctx.createBuffer(1,1,22050);var De=function(Be){for(;Ce._html5AudioPool.length<Ce.html5PoolSize;)try{var ke=new Audio;ke._unlocked=!0,Ce._releaseHtml5Audio(ke)}catch{Ce.noAudio=!0;break}for(var Fe=0;Fe<Ce._howls.length;Fe++)if(!Ce._howls[Fe]._webAudio)for(var Oe=Ce._howls[Fe]._getSoundIds(),Ne=0;Ne<Oe.length;Ne++){var ze=Ce._howls[Fe]._soundById(Oe[Ne]);ze&&ze._node&&!ze._node._unlocked&&(ze._node._unlocked=!0,ze._node.load())}Ce._autoResume();var $e=Ce.ctx.createBufferSource();$e.buffer=Ce._scratchBuffer,$e.connect(Ce.ctx.destination),typeof $e.start>"u"?$e.noteOn(0):$e.start(0),typeof Ce.ctx.resume=="function"&&Ce.ctx.resume(),$e.onended=function(){$e.disconnect(0),Ce._audioUnlocked=!0,document.removeEventListener("touchstart",De,!0),document.removeEventListener("touchend",De,!0),document.removeEventListener("click",De,!0),document.removeEventListener("keydown",De,!0);for(var He=0;He<Ce._howls.length;He++)Ce._howls[He]._emit("unlock")}};return document.addEventListener("touchstart",De,!0),document.addEventListener("touchend",De,!0),document.addEventListener("click",De,!0),document.addEventListener("keydown",De,!0),Ce}},_obtainHtml5Audio:function(){var Ce=this||L;if(Ce._html5AudioPool.length)return Ce._html5AudioPool.pop();var De=new Audio().play();return De&&typeof Promise<"u"&&(De instanceof Promise||typeof De.then=="function")&&De.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(Ce){var De=this||L;return Ce._unlocked&&De._html5AudioPool.push(Ce),De},_autoSuspend:function(){var Ce=this;if(!(!Ce.autoSuspend||!Ce.ctx||typeof Ce.ctx.suspend>"u"||!L.usingWebAudio)){for(var De=0;De<Ce._howls.length;De++)if(Ce._howls[De]._webAudio){for(var Be=0;Be<Ce._howls[De]._sounds.length;Be++)if(!Ce._howls[De]._sounds[Be]._paused)return Ce}return Ce._suspendTimer&&clearTimeout(Ce._suspendTimer),Ce._suspendTimer=setTimeout(function(){if(Ce.autoSuspend){Ce._suspendTimer=null,Ce.state="suspending";var ke=function(){Ce.state="suspended",Ce._resumeAfterSuspend&&(delete Ce._resumeAfterSuspend,Ce._autoResume())};Ce.ctx.suspend().then(ke,ke)}},3e4),Ce}},_autoResume:function(){var Ce=this;if(!(!Ce.ctx||typeof Ce.ctx.resume>"u"||!L.usingWebAudio))return Ce.state==="running"&&Ce.ctx.state!=="interrupted"&&Ce._suspendTimer?(clearTimeout(Ce._suspendTimer),Ce._suspendTimer=null):Ce.state==="suspended"||Ce.state==="running"&&Ce.ctx.state==="interrupted"?(Ce.ctx.resume().then(function(){Ce.state="running";for(var De=0;De<Ce._howls.length;De++)Ce._howls[De]._emit("resume")}),Ce._suspendTimer&&(clearTimeout(Ce._suspendTimer),Ce._suspendTimer=null)):Ce.state==="suspending"&&(Ce._resumeAfterSuspend=!0),Ce}};var L=new m,j=function(Ce){var De=this;if(!Ce.src||Ce.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}De.init(Ce)};j.prototype={init:function(Ce){var De=this;return L.ctx||Me(),De._autoplay=Ce.autoplay||!1,De._format=typeof Ce.format!="string"?Ce.format:[Ce.format],De._html5=Ce.html5||!1,De._muted=Ce.mute||!1,De._loop=Ce.loop||!1,De._pool=Ce.pool||5,De._preload=typeof Ce.preload=="boolean"||Ce.preload==="metadata"?Ce.preload:!0,De._rate=Ce.rate||1,De._sprite=Ce.sprite||{},De._src=typeof Ce.src!="string"?Ce.src:[Ce.src],De._volume=Ce.volume!==void 0?Ce.volume:1,De._xhr={method:Ce.xhr&&Ce.xhr.method?Ce.xhr.method:"GET",headers:Ce.xhr&&Ce.xhr.headers?Ce.xhr.headers:null,withCredentials:Ce.xhr&&Ce.xhr.withCredentials?Ce.xhr.withCredentials:!1},De._duration=0,De._state="unloaded",De._sounds=[],De._endTimers={},De._queue=[],De._playLock=!1,De._onend=Ce.onend?[{fn:Ce.onend}]:[],De._onfade=Ce.onfade?[{fn:Ce.onfade}]:[],De._onload=Ce.onload?[{fn:Ce.onload}]:[],De._onloaderror=Ce.onloaderror?[{fn:Ce.onloaderror}]:[],De._onplayerror=Ce.onplayerror?[{fn:Ce.onplayerror}]:[],De._onpause=Ce.onpause?[{fn:Ce.onpause}]:[],De._onplay=Ce.onplay?[{fn:Ce.onplay}]:[],De._onstop=Ce.onstop?[{fn:Ce.onstop}]:[],De._onmute=Ce.onmute?[{fn:Ce.onmute}]:[],De._onvolume=Ce.onvolume?[{fn:Ce.onvolume}]:[],De._onrate=Ce.onrate?[{fn:Ce.onrate}]:[],De._onseek=Ce.onseek?[{fn:Ce.onseek}]:[],De._onunlock=Ce.onunlock?[{fn:Ce.onunlock}]:[],De._onresume=[],De._webAudio=L.usingWebAudio&&!De._html5,typeof L.ctx<"u"&&L.ctx&&L.autoUnlock&&L._unlockAudio(),L._howls.push(De),De._autoplay&&De._queue.push({event:"play",action:function(){De.play()}}),De._preload&&De._preload!=="none"&&De.load(),De},load:function(){var Ce=this,De=null;if(L.noAudio){Ce._emit("loaderror",null,"No audio support.");return}typeof Ce._src=="string"&&(Ce._src=[Ce._src]);for(var Be=0;Be<Ce._src.length;Be++){var ke,Fe;if(Ce._format&&Ce._format[Be])ke=Ce._format[Be];else{if(Fe=Ce._src[Be],typeof Fe!="string"){Ce._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}ke=/^data:audio\/([^;,]+);/i.exec(Fe),ke||(ke=/\.([^.]+)$/.exec(Fe.split("?",1)[0])),ke&&(ke=ke[1].toLowerCase())}if(ke||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),ke&&L.codecs(ke)){De=Ce._src[Be];break}}if(!De){Ce._emit("loaderror",null,"No codec support for selected audio sources.");return}return Ce._src=De,Ce._state="loading",window.location.protocol==="https:"&&De.slice(0,5)==="http:"&&(Ce._html5=!0,Ce._webAudio=!1),new ee(Ce),Ce._webAudio&&le(Ce),Ce},play:function(Ce,De){var Be=this,ke=null;if(typeof Ce=="number")ke=Ce,Ce=null;else{if(typeof Ce=="string"&&Be._state==="loaded"&&!Be._sprite[Ce])return null;if(typeof Ce>"u"&&(Ce="__default",!Be._playLock)){for(var Fe=0,Oe=0;Oe<Be._sounds.length;Oe++)Be._sounds[Oe]._paused&&!Be._sounds[Oe]._ended&&(Fe++,ke=Be._sounds[Oe]._id);Fe===1?Ce=null:ke=null}}var Ne=ke?Be._soundById(ke):Be._inactiveSound();if(!Ne)return null;if(ke&&!Ce&&(Ce=Ne._sprite||"__default"),Be._state!=="loaded"){Ne._sprite=Ce,Ne._ended=!1;var ze=Ne._id;return Be._queue.push({event:"play",action:function(){Be.play(ze)}}),ze}if(ke&&!Ne._paused)return De||Be._loadQueue("play"),Ne._id;Be._webAudio&&L._autoResume();var $e=Math.max(0,Ne._seek>0?Ne._seek:Be._sprite[Ce][0]/1e3),He=Math.max(0,(Be._sprite[Ce][0]+Be._sprite[Ce][1])/1e3-$e),We=He*1e3/Math.abs(Ne._rate),qe=Be._sprite[Ce][0]/1e3,Ye=(Be._sprite[Ce][0]+Be._sprite[Ce][1])/1e3;Ne._sprite=Ce,Ne._ended=!1;var Ze=function(){Ne._paused=!1,Ne._seek=$e,Ne._start=qe,Ne._stop=Ye,Ne._loop=!!(Ne._loop||Be._sprite[Ce][2])};if($e>=Ye){Be._ended(Ne);return}var Ke=Ne._node;if(Be._webAudio){var rt=function(){Be._playLock=!1,Ze(),Be._refreshBuffer(Ne);var bt=Ne._muted||Be._muted?0:Ne._volume;Ke.gain.setValueAtTime(bt,L.ctx.currentTime),Ne._playStart=L.ctx.currentTime,typeof Ke.bufferSource.start>"u"?Ne._loop?Ke.bufferSource.noteGrainOn(0,$e,86400):Ke.bufferSource.noteGrainOn(0,$e,He):Ne._loop?Ke.bufferSource.start(0,$e,86400):Ke.bufferSource.start(0,$e,He),We!==1/0&&(Be._endTimers[Ne._id]=setTimeout(Be._ended.bind(Be,Ne),We)),De||setTimeout(function(){Be._emit("play",Ne._id),Be._loadQueue()},0)};L.state==="running"&&L.ctx.state!=="interrupted"?rt():(Be._playLock=!0,Be.once("resume",rt),Be._clearTimer(Ne._id))}else{var ft=function(){Ke.currentTime=$e,Ke.muted=Ne._muted||Be._muted||L._muted||Ke.muted,Ke.volume=Ne._volume*L.volume(),Ke.playbackRate=Ne._rate;try{var bt=Ke.play();if(bt&&typeof Promise<"u"&&(bt instanceof Promise||typeof bt.then=="function")?(Be._playLock=!0,Ze(),bt.then(function(){Be._playLock=!1,Ke._unlocked=!0,De?Be._loadQueue():Be._emit("play",Ne._id)}).catch(function(){Be._playLock=!1,Be._emit("playerror",Ne._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),Ne._ended=!0,Ne._paused=!0})):De||(Be._playLock=!1,Ze(),Be._emit("play",Ne._id)),Ke.playbackRate=Ne._rate,Ke.paused){Be._emit("playerror",Ne._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}Ce!=="__default"||Ne._loop?Be._endTimers[Ne._id]=setTimeout(Be._ended.bind(Be,Ne),We):(Be._endTimers[Ne._id]=function(){Be._ended(Ne),Ke.removeEventListener("ended",Be._endTimers[Ne._id],!1)},Ke.addEventListener("ended",Be._endTimers[Ne._id],!1))}catch(Ct){Be._emit("playerror",Ne._id,Ct)}};Ke.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(Ke.src=Be._src,Ke.load());var mt=window&&window.ejecta||!Ke.readyState&&L._navigator.isCocoonJS;if(Ke.readyState>=3||mt)ft();else{Be._playLock=!0,Be._state="loading";var Et=function(){Be._state="loaded",ft(),Ke.removeEventListener(L._canPlayEvent,Et,!1)};Ke.addEventListener(L._canPlayEvent,Et,!1),Be._clearTimer(Ne._id)}}return Ne._id},pause:function(Ce){var De=this;if(De._state!=="loaded"||De._playLock)return De._queue.push({event:"pause",action:function(){De.pause(Ce)}}),De;for(var Be=De._getSoundIds(Ce),ke=0;ke<Be.length;ke++){De._clearTimer(Be[ke]);var Fe=De._soundById(Be[ke]);if(Fe&&!Fe._paused&&(Fe._seek=De.seek(Be[ke]),Fe._rateSeek=0,Fe._paused=!0,De._stopFade(Be[ke]),Fe._node))if(De._webAudio){if(!Fe._node.bufferSource)continue;typeof Fe._node.bufferSource.stop>"u"?Fe._node.bufferSource.noteOff(0):Fe._node.bufferSource.stop(0),De._cleanBuffer(Fe._node)}else(!isNaN(Fe._node.duration)||Fe._node.duration===1/0)&&Fe._node.pause();arguments[1]||De._emit("pause",Fe?Fe._id:null)}return De},stop:function(Ce,De){var Be=this;if(Be._state!=="loaded"||Be._playLock)return Be._queue.push({event:"stop",action:function(){Be.stop(Ce)}}),Be;for(var ke=Be._getSoundIds(Ce),Fe=0;Fe<ke.length;Fe++){Be._clearTimer(ke[Fe]);var Oe=Be._soundById(ke[Fe]);Oe&&(Oe._seek=Oe._start||0,Oe._rateSeek=0,Oe._paused=!0,Oe._ended=!0,Be._stopFade(ke[Fe]),Oe._node&&(Be._webAudio?Oe._node.bufferSource&&(typeof Oe._node.bufferSource.stop>"u"?Oe._node.bufferSource.noteOff(0):Oe._node.bufferSource.stop(0),Be._cleanBuffer(Oe._node)):(!isNaN(Oe._node.duration)||Oe._node.duration===1/0)&&(Oe._node.currentTime=Oe._start||0,Oe._node.pause(),Oe._node.duration===1/0&&Be._clearSound(Oe._node))),De||Be._emit("stop",Oe._id))}return Be},mute:function(Ce,De){var Be=this;if(Be._state!=="loaded"||Be._playLock)return Be._queue.push({event:"mute",action:function(){Be.mute(Ce,De)}}),Be;if(typeof De>"u")if(typeof Ce=="boolean")Be._muted=Ce;else return Be._muted;for(var ke=Be._getSoundIds(De),Fe=0;Fe<ke.length;Fe++){var Oe=Be._soundById(ke[Fe]);Oe&&(Oe._muted=Ce,Oe._interval&&Be._stopFade(Oe._id),Be._webAudio&&Oe._node?Oe._node.gain.setValueAtTime(Ce?0:Oe._volume,L.ctx.currentTime):Oe._node&&(Oe._node.muted=L._muted?!0:Ce),Be._emit("mute",Oe._id))}return Be},volume:function(){var Ce=this,De=arguments,Be,ke;if(De.length===0)return Ce._volume;if(De.length===1||De.length===2&&typeof De[1]>"u"){var Fe=Ce._getSoundIds(),Oe=Fe.indexOf(De[0]);Oe>=0?ke=parseInt(De[0],10):Be=parseFloat(De[0])}else De.length>=2&&(Be=parseFloat(De[0]),ke=parseInt(De[1],10));var Ne;if(typeof Be<"u"&&Be>=0&&Be<=1){if(Ce._state!=="loaded"||Ce._playLock)return Ce._queue.push({event:"volume",action:function(){Ce.volume.apply(Ce,De)}}),Ce;typeof ke>"u"&&(Ce._volume=Be),ke=Ce._getSoundIds(ke);for(var ze=0;ze<ke.length;ze++)Ne=Ce._soundById(ke[ze]),Ne&&(Ne._volume=Be,De[2]||Ce._stopFade(ke[ze]),Ce._webAudio&&Ne._node&&!Ne._muted?Ne._node.gain.setValueAtTime(Be,L.ctx.currentTime):Ne._node&&!Ne._muted&&(Ne._node.volume=Be*L.volume()),Ce._emit("volume",Ne._id))}else return Ne=ke?Ce._soundById(ke):Ce._sounds[0],Ne?Ne._volume:0;return Ce},fade:function(Ce,De,Be,ke){var Fe=this;if(Fe._state!=="loaded"||Fe._playLock)return Fe._queue.push({event:"fade",action:function(){Fe.fade(Ce,De,Be,ke)}}),Fe;Ce=Math.min(Math.max(0,parseFloat(Ce)),1),De=Math.min(Math.max(0,parseFloat(De)),1),Be=parseFloat(Be),Fe.volume(Ce,ke);for(var Oe=Fe._getSoundIds(ke),Ne=0;Ne<Oe.length;Ne++){var ze=Fe._soundById(Oe[Ne]);if(ze){if(ke||Fe._stopFade(Oe[Ne]),Fe._webAudio&&!ze._muted){var $e=L.ctx.currentTime,He=$e+Be/1e3;ze._volume=Ce,ze._node.gain.setValueAtTime(Ce,$e),ze._node.gain.linearRampToValueAtTime(De,He)}Fe._startFadeInterval(ze,Ce,De,Be,Oe[Ne],typeof ke>"u")}}return Fe},_startFadeInterval:function(Ce,De,Be,ke,Fe,Oe){var Ne=this,ze=De,$e=Be-De,He=Math.abs($e/.01),We=Math.max(4,He>0?ke/He:ke),qe=Date.now();Ce._fadeTo=Be,Ce._interval=setInterval(function(){var Ye=(Date.now()-qe)/ke;qe=Date.now(),ze+=$e*Ye,ze=Math.round(ze*100)/100,$e<0?ze=Math.max(Be,ze):ze=Math.min(Be,ze),Ne._webAudio?Ce._volume=ze:Ne.volume(ze,Ce._id,!0),Oe&&(Ne._volume=ze),(Be<De&&ze<=Be||Be>De&&ze>=Be)&&(clearInterval(Ce._interval),Ce._interval=null,Ce._fadeTo=null,Ne.volume(Be,Ce._id),Ne._emit("fade",Ce._id))},We)},_stopFade:function(Ce){var De=this,Be=De._soundById(Ce);return Be&&Be._interval&&(De._webAudio&&Be._node.gain.cancelScheduledValues(L.ctx.currentTime),clearInterval(Be._interval),Be._interval=null,De.volume(Be._fadeTo,Ce),Be._fadeTo=null,De._emit("fade",Ce)),De},loop:function(){var Ce=this,De=arguments,Be,ke,Fe;if(De.length===0)return Ce._loop;if(De.length===1)if(typeof De[0]=="boolean")Be=De[0],Ce._loop=Be;else return Fe=Ce._soundById(parseInt(De[0],10)),Fe?Fe._loop:!1;else De.length===2&&(Be=De[0],ke=parseInt(De[1],10));for(var Oe=Ce._getSoundIds(ke),Ne=0;Ne<Oe.length;Ne++)Fe=Ce._soundById(Oe[Ne]),Fe&&(Fe._loop=Be,Ce._webAudio&&Fe._node&&Fe._node.bufferSource&&(Fe._node.bufferSource.loop=Be,Be&&(Fe._node.bufferSource.loopStart=Fe._start||0,Fe._node.bufferSource.loopEnd=Fe._stop,Ce.playing(Oe[Ne])&&(Ce.pause(Oe[Ne],!0),Ce.play(Oe[Ne],!0)))));return Ce},rate:function(){var Ce=this,De=arguments,Be,ke;if(De.length===0)ke=Ce._sounds[0]._id;else if(De.length===1){var Fe=Ce._getSoundIds(),Oe=Fe.indexOf(De[0]);Oe>=0?ke=parseInt(De[0],10):Be=parseFloat(De[0])}else De.length===2&&(Be=parseFloat(De[0]),ke=parseInt(De[1],10));var Ne;if(typeof Be=="number"){if(Ce._state!=="loaded"||Ce._playLock)return Ce._queue.push({event:"rate",action:function(){Ce.rate.apply(Ce,De)}}),Ce;typeof ke>"u"&&(Ce._rate=Be),ke=Ce._getSoundIds(ke);for(var ze=0;ze<ke.length;ze++)if(Ne=Ce._soundById(ke[ze]),Ne){Ce.playing(ke[ze])&&(Ne._rateSeek=Ce.seek(ke[ze]),Ne._playStart=Ce._webAudio?L.ctx.currentTime:Ne._playStart),Ne._rate=Be,Ce._webAudio&&Ne._node&&Ne._node.bufferSource?Ne._node.bufferSource.playbackRate.setValueAtTime(Be,L.ctx.currentTime):Ne._node&&(Ne._node.playbackRate=Be);var $e=Ce.seek(ke[ze]),He=(Ce._sprite[Ne._sprite][0]+Ce._sprite[Ne._sprite][1])/1e3-$e,We=He*1e3/Math.abs(Ne._rate);(Ce._endTimers[ke[ze]]||!Ne._paused)&&(Ce._clearTimer(ke[ze]),Ce._endTimers[ke[ze]]=setTimeout(Ce._ended.bind(Ce,Ne),We)),Ce._emit("rate",Ne._id)}}else return Ne=Ce._soundById(ke),Ne?Ne._rate:Ce._rate;return Ce},seek:function(){var Ce=this,De=arguments,Be,ke;if(De.length===0)Ce._sounds.length&&(ke=Ce._sounds[0]._id);else if(De.length===1){var Fe=Ce._getSoundIds(),Oe=Fe.indexOf(De[0]);Oe>=0?ke=parseInt(De[0],10):Ce._sounds.length&&(ke=Ce._sounds[0]._id,Be=parseFloat(De[0]))}else De.length===2&&(Be=parseFloat(De[0]),ke=parseInt(De[1],10));if(typeof ke>"u")return 0;if(typeof Be=="number"&&(Ce._state!=="loaded"||Ce._playLock))return Ce._queue.push({event:"seek",action:function(){Ce.seek.apply(Ce,De)}}),Ce;var Ne=Ce._soundById(ke);if(Ne)if(typeof Be=="number"&&Be>=0){var ze=Ce.playing(ke);ze&&Ce.pause(ke,!0),Ne._seek=Be,Ne._ended=!1,Ce._clearTimer(ke),!Ce._webAudio&&Ne._node&&!isNaN(Ne._node.duration)&&(Ne._node.currentTime=Be);var $e=function(){ze&&Ce.play(ke,!0),Ce._emit("seek",ke)};if(ze&&!Ce._webAudio){var He=function(){Ce._playLock?setTimeout(He,0):$e()};setTimeout(He,0)}else $e()}else if(Ce._webAudio){var We=Ce.playing(ke)?L.ctx.currentTime-Ne._playStart:0,qe=Ne._rateSeek?Ne._rateSeek-Ne._seek:0;return Ne._seek+(qe+We*Math.abs(Ne._rate))}else return Ne._node.currentTime;return Ce},playing:function(Ce){var De=this;if(typeof Ce=="number"){var Be=De._soundById(Ce);return Be?!Be._paused:!1}for(var ke=0;ke<De._sounds.length;ke++)if(!De._sounds[ke]._paused)return!0;return!1},duration:function(Ce){var De=this,Be=De._duration,ke=De._soundById(Ce);return ke&&(Be=De._sprite[ke._sprite][1]/1e3),Be},state:function(){return this._state},unload:function(){for(var Ce=this,De=Ce._sounds,Be=0;Be<De.length;Be++)De[Be]._paused||Ce.stop(De[Be]._id),Ce._webAudio||(Ce._clearSound(De[Be]._node),De[Be]._node.removeEventListener("error",De[Be]._errorFn,!1),De[Be]._node.removeEventListener(L._canPlayEvent,De[Be]._loadFn,!1),De[Be]._node.removeEventListener("ended",De[Be]._endFn,!1),L._releaseHtml5Audio(De[Be]._node)),delete De[Be]._node,Ce._clearTimer(De[Be]._id);var ke=L._howls.indexOf(Ce);ke>=0&&L._howls.splice(ke,1);var Fe=!0;for(Be=0;Be<L._howls.length;Be++)if(L._howls[Be]._src===Ce._src||Ce._src.indexOf(L._howls[Be]._src)>=0){Fe=!1;break}return re&&Fe&&delete re[Ce._src],L.noAudio=!1,Ce._state="unloaded",Ce._sounds=[],Ce=null,null},on:function(Ce,De,Be,ke){var Fe=this,Oe=Fe["_on"+Ce];return typeof De=="function"&&Oe.push(ke?{id:Be,fn:De,once:ke}:{id:Be,fn:De}),Fe},off:function(Ce,De,Be){var ke=this,Fe=ke["_on"+Ce],Oe=0;if(typeof De=="number"&&(Be=De,De=null),De||Be)for(Oe=0;Oe<Fe.length;Oe++){var Ne=Be===Fe[Oe].id;if(De===Fe[Oe].fn&&Ne||!De&&Ne){Fe.splice(Oe,1);break}}else if(Ce)ke["_on"+Ce]=[];else{var ze=Object.keys(ke);for(Oe=0;Oe<ze.length;Oe++)ze[Oe].indexOf("_on")===0&&Array.isArray(ke[ze[Oe]])&&(ke[ze[Oe]]=[])}return ke},once:function(Ce,De,Be){var ke=this;return ke.on(Ce,De,Be,1),ke},_emit:function(Ce,De,Be){for(var ke=this,Fe=ke["_on"+Ce],Oe=Fe.length-1;Oe>=0;Oe--)(!Fe[Oe].id||Fe[Oe].id===De||Ce==="load")&&(setTimeout((function(Ne){Ne.call(this,De,Be)}).bind(ke,Fe[Oe].fn),0),Fe[Oe].once&&ke.off(Ce,Fe[Oe].fn,Fe[Oe].id));return ke._loadQueue(Ce),ke},_loadQueue:function(Ce){var De=this;if(De._queue.length>0){var Be=De._queue[0];Be.event===Ce&&(De._queue.shift(),De._loadQueue()),Ce||Be.action()}return De},_ended:function(Ce){var De=this,Be=Ce._sprite;if(!De._webAudio&&Ce._node&&!Ce._node.paused&&!Ce._node.ended&&Ce._node.currentTime<Ce._stop)return setTimeout(De._ended.bind(De,Ce),100),De;var ke=!!(Ce._loop||De._sprite[Be][2]);if(De._emit("end",Ce._id),!De._webAudio&&ke&&De.stop(Ce._id,!0).play(Ce._id),De._webAudio&&ke){De._emit("play",Ce._id),Ce._seek=Ce._start||0,Ce._rateSeek=0,Ce._playStart=L.ctx.currentTime;var Fe=(Ce._stop-Ce._start)*1e3/Math.abs(Ce._rate);De._endTimers[Ce._id]=setTimeout(De._ended.bind(De,Ce),Fe)}return De._webAudio&&!ke&&(Ce._paused=!0,Ce._ended=!0,Ce._seek=Ce._start||0,Ce._rateSeek=0,De._clearTimer(Ce._id),De._cleanBuffer(Ce._node),L._autoSuspend()),!De._webAudio&&!ke&&De.stop(Ce._id,!0),De},_clearTimer:function(Ce){var De=this;if(De._endTimers[Ce]){if(typeof De._endTimers[Ce]!="function")clearTimeout(De._endTimers[Ce]);else{var Be=De._soundById(Ce);Be&&Be._node&&Be._node.removeEventListener("ended",De._endTimers[Ce],!1)}delete De._endTimers[Ce]}return De},_soundById:function(Ce){for(var De=this,Be=0;Be<De._sounds.length;Be++)if(Ce===De._sounds[Be]._id)return De._sounds[Be];return null},_inactiveSound:function(){var Ce=this;Ce._drain();for(var De=0;De<Ce._sounds.length;De++)if(Ce._sounds[De]._ended)return Ce._sounds[De].reset();return new ee(Ce)},_drain:function(){var Ce=this,De=Ce._pool,Be=0,ke=0;if(!(Ce._sounds.length<De)){for(ke=0;ke<Ce._sounds.length;ke++)Ce._sounds[ke]._ended&&Be++;for(ke=Ce._sounds.length-1;ke>=0;ke--){if(Be<=De)return;Ce._sounds[ke]._ended&&(Ce._webAudio&&Ce._sounds[ke]._node&&Ce._sounds[ke]._node.disconnect(0),Ce._sounds.splice(ke,1),Be--)}}},_getSoundIds:function(Ce){var De=this;if(typeof Ce>"u"){for(var Be=[],ke=0;ke<De._sounds.length;ke++)Be.push(De._sounds[ke]._id);return Be}else return[Ce]},_refreshBuffer:function(Ce){var De=this;return Ce._node.bufferSource=L.ctx.createBufferSource(),Ce._node.bufferSource.buffer=re[De._src],Ce._panner?Ce._node.bufferSource.connect(Ce._panner):Ce._node.bufferSource.connect(Ce._node),Ce._node.bufferSource.loop=Ce._loop,Ce._loop&&(Ce._node.bufferSource.loopStart=Ce._start||0,Ce._node.bufferSource.loopEnd=Ce._stop||0),Ce._node.bufferSource.playbackRate.setValueAtTime(Ce._rate,L.ctx.currentTime),De},_cleanBuffer:function(Ce){var De=this,Be=L._navigator&&L._navigator.vendor.indexOf("Apple")>=0;if(!Ce.bufferSource)return De;if(L._scratchBuffer&&Ce.bufferSource&&(Ce.bufferSource.onended=null,Ce.bufferSource.disconnect(0),Be))try{Ce.bufferSource.buffer=L._scratchBuffer}catch{}return Ce.bufferSource=null,De},_clearSound:function(Ce){var De=/MSIE |Trident\//.test(L._navigator&&L._navigator.userAgent);De||(Ce.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var ee=function(Ce){this._parent=Ce,this.init()};ee.prototype={init:function(){var Ce=this,De=Ce._parent;return Ce._muted=De._muted,Ce._loop=De._loop,Ce._volume=De._volume,Ce._rate=De._rate,Ce._seek=0,Ce._paused=!0,Ce._ended=!0,Ce._sprite="__default",Ce._id=++L._counter,De._sounds.push(Ce),Ce.create(),Ce},create:function(){var Ce=this,De=Ce._parent,Be=L._muted||Ce._muted||Ce._parent._muted?0:Ce._volume;return De._webAudio?(Ce._node=typeof L.ctx.createGain>"u"?L.ctx.createGainNode():L.ctx.createGain(),Ce._node.gain.setValueAtTime(Be,L.ctx.currentTime),Ce._node.paused=!0,Ce._node.connect(L.masterGain)):L.noAudio||(Ce._node=L._obtainHtml5Audio(),Ce._errorFn=Ce._errorListener.bind(Ce),Ce._node.addEventListener("error",Ce._errorFn,!1),Ce._loadFn=Ce._loadListener.bind(Ce),Ce._node.addEventListener(L._canPlayEvent,Ce._loadFn,!1),Ce._endFn=Ce._endListener.bind(Ce),Ce._node.addEventListener("ended",Ce._endFn,!1),Ce._node.src=De._src,Ce._node.preload=De._preload===!0?"auto":De._preload,Ce._node.volume=Be*L.volume(),Ce._node.load()),Ce},reset:function(){var Ce=this,De=Ce._parent;return Ce._muted=De._muted,Ce._loop=De._loop,Ce._volume=De._volume,Ce._rate=De._rate,Ce._seek=0,Ce._rateSeek=0,Ce._paused=!0,Ce._ended=!0,Ce._sprite="__default",Ce._id=++L._counter,Ce},_errorListener:function(){var Ce=this;Ce._parent._emit("loaderror",Ce._id,Ce._node.error?Ce._node.error.code:0),Ce._node.removeEventListener("error",Ce._errorFn,!1)},_loadListener:function(){var Ce=this,De=Ce._parent;De._duration=Math.ceil(Ce._node.duration*10)/10,Object.keys(De._sprite).length===0&&(De._sprite={__default:[0,De._duration*1e3]}),De._state!=="loaded"&&(De._state="loaded",De._emit("load"),De._loadQueue()),Ce._node.removeEventListener(L._canPlayEvent,Ce._loadFn,!1)},_endListener:function(){var Ce=this,De=Ce._parent;De._duration===1/0&&(De._duration=Math.ceil(Ce._node.duration*10)/10,De._sprite.__default[1]===1/0&&(De._sprite.__default[1]=De._duration*1e3),De._ended(Ce)),Ce._node.removeEventListener("ended",Ce._endFn,!1)}};var re={},le=function(Ce){var De=Ce._src;if(re[De]){Ce._duration=re[De].duration,Ee(Ce);return}if(/^data:[^;]+;base64,/.test(De)){for(var Be=atob(De.split(",")[1]),ke=new Uint8Array(Be.length),Fe=0;Fe<Be.length;++Fe)ke[Fe]=Be.charCodeAt(Fe);ye(ke.buffer,Ce)}else{var Oe=new XMLHttpRequest;Oe.open(Ce._xhr.method,De,!0),Oe.withCredentials=Ce._xhr.withCredentials,Oe.responseType="arraybuffer",Ce._xhr.headers&&Object.keys(Ce._xhr.headers).forEach(function(Ne){Oe.setRequestHeader(Ne,Ce._xhr.headers[Ne])}),Oe.onload=function(){var Ne=(Oe.status+"")[0];if(Ne!=="0"&&Ne!=="2"&&Ne!=="3"){Ce._emit("loaderror",null,"Failed loading audio file with status: "+Oe.status+".");return}ye(Oe.response,Ce)},Oe.onerror=function(){Ce._webAudio&&(Ce._html5=!0,Ce._webAudio=!1,Ce._sounds=[],delete re[De],Ce.load())},ve(Oe)}},ve=function(Ce){try{Ce.send()}catch{Ce.onerror()}},ye=function(Ce,De){var Be=function(){De._emit("loaderror",null,"Decoding audio data failed.")},ke=function(Fe){Fe&&De._sounds.length>0?(re[De._src]=Fe,Ee(De,Fe)):Be()};typeof Promise<"u"&&L.ctx.decodeAudioData.length===1?L.ctx.decodeAudioData(Ce).then(ke).catch(Be):L.ctx.decodeAudioData(Ce,ke,Be)},Ee=function(Ce,De){De&&!Ce._duration&&(Ce._duration=De.duration),Object.keys(Ce._sprite).length===0&&(Ce._sprite={__default:[0,Ce._duration*1e3]}),Ce._state!=="loaded"&&(Ce._state="loaded",Ce._emit("load"),Ce._loadQueue())},Me=function(){if(L.usingWebAudio){try{typeof AudioContext<"u"?L.ctx=new AudioContext:typeof webkitAudioContext<"u"?L.ctx=new webkitAudioContext:L.usingWebAudio=!1}catch{L.usingWebAudio=!1}L.ctx||(L.usingWebAudio=!1);var Ce=/iP(hone|od|ad)/.test(L._navigator&&L._navigator.platform),De=L._navigator&&L._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),Be=De?parseInt(De[1],10):null;if(Ce&&Be&&Be<9){var ke=/safari/.test(L._navigator&&L._navigator.userAgent.toLowerCase());L._navigator&&!ke&&(L.usingWebAudio=!1)}L.usingWebAudio&&(L.masterGain=typeof L.ctx.createGain>"u"?L.ctx.createGainNode():L.ctx.createGain(),L.masterGain.gain.setValueAtTime(L._muted?0:L._volume,L.ctx.currentTime),L.masterGain.connect(L.ctx.destination)),L._setup()}};$.Howler=L,$.Howl=j,typeof commonjsGlobal$1<"u"?(commonjsGlobal$1.HowlerGlobal=m,commonjsGlobal$1.Howler=L,commonjsGlobal$1.Howl=j,commonjsGlobal$1.Sound=ee):typeof window<"u"&&(window.HowlerGlobal=m,window.Howler=L,window.Howl=j,window.Sound=ee)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(L){var j=this;if(!j.ctx||!j.ctx.listener)return j;for(var ee=j._howls.length-1;ee>=0;ee--)j._howls[ee].stereo(L);return j},HowlerGlobal.prototype.pos=function(L,j,ee){var re=this;if(!re.ctx||!re.ctx.listener)return re;if(j=typeof j!="number"?re._pos[1]:j,ee=typeof ee!="number"?re._pos[2]:ee,typeof L=="number")re._pos=[L,j,ee],typeof re.ctx.listener.positionX<"u"?(re.ctx.listener.positionX.setTargetAtTime(re._pos[0],Howler.ctx.currentTime,.1),re.ctx.listener.positionY.setTargetAtTime(re._pos[1],Howler.ctx.currentTime,.1),re.ctx.listener.positionZ.setTargetAtTime(re._pos[2],Howler.ctx.currentTime,.1)):re.ctx.listener.setPosition(re._pos[0],re._pos[1],re._pos[2]);else return re._pos;return re},HowlerGlobal.prototype.orientation=function(L,j,ee,re,le,ve){var ye=this;if(!ye.ctx||!ye.ctx.listener)return ye;var Ee=ye._orientation;if(j=typeof j!="number"?Ee[1]:j,ee=typeof ee!="number"?Ee[2]:ee,re=typeof re!="number"?Ee[3]:re,le=typeof le!="number"?Ee[4]:le,ve=typeof ve!="number"?Ee[5]:ve,typeof L=="number")ye._orientation=[L,j,ee,re,le,ve],typeof ye.ctx.listener.forwardX<"u"?(ye.ctx.listener.forwardX.setTargetAtTime(L,Howler.ctx.currentTime,.1),ye.ctx.listener.forwardY.setTargetAtTime(j,Howler.ctx.currentTime,.1),ye.ctx.listener.forwardZ.setTargetAtTime(ee,Howler.ctx.currentTime,.1),ye.ctx.listener.upX.setTargetAtTime(re,Howler.ctx.currentTime,.1),ye.ctx.listener.upY.setTargetAtTime(le,Howler.ctx.currentTime,.1),ye.ctx.listener.upZ.setTargetAtTime(ve,Howler.ctx.currentTime,.1)):ye.ctx.listener.setOrientation(L,j,ee,re,le,ve);else return Ee;return ye},Howl.prototype.init=function(L){return function(j){var ee=this;return ee._orientation=j.orientation||[1,0,0],ee._stereo=j.stereo||null,ee._pos=j.pos||null,ee._pannerAttr={coneInnerAngle:typeof j.coneInnerAngle<"u"?j.coneInnerAngle:360,coneOuterAngle:typeof j.coneOuterAngle<"u"?j.coneOuterAngle:360,coneOuterGain:typeof j.coneOuterGain<"u"?j.coneOuterGain:0,distanceModel:typeof j.distanceModel<"u"?j.distanceModel:"inverse",maxDistance:typeof j.maxDistance<"u"?j.maxDistance:1e4,panningModel:typeof j.panningModel<"u"?j.panningModel:"HRTF",refDistance:typeof j.refDistance<"u"?j.refDistance:1,rolloffFactor:typeof j.rolloffFactor<"u"?j.rolloffFactor:1},ee._onstereo=j.onstereo?[{fn:j.onstereo}]:[],ee._onpos=j.onpos?[{fn:j.onpos}]:[],ee._onorientation=j.onorientation?[{fn:j.onorientation}]:[],L.call(this,j)}}(Howl.prototype.init),Howl.prototype.stereo=function(L,j){var ee=this;if(!ee._webAudio)return ee;if(ee._state!=="loaded")return ee._queue.push({event:"stereo",action:function(){ee.stereo(L,j)}}),ee;var re=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof j>"u")if(typeof L=="number")ee._stereo=L,ee._pos=[L,0,0];else return ee._stereo;for(var le=ee._getSoundIds(j),ve=0;ve<le.length;ve++){var ye=ee._soundById(le[ve]);if(ye)if(typeof L=="number")ye._stereo=L,ye._pos=[L,0,0],ye._node&&(ye._pannerAttr.panningModel="equalpower",(!ye._panner||!ye._panner.pan)&&m(ye,re),re==="spatial"?typeof ye._panner.positionX<"u"?(ye._panner.positionX.setValueAtTime(L,Howler.ctx.currentTime),ye._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),ye._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):ye._panner.setPosition(L,0,0):ye._panner.pan.setValueAtTime(L,Howler.ctx.currentTime)),ee._emit("stereo",ye._id);else return ye._stereo}return ee},Howl.prototype.pos=function(L,j,ee,re){var le=this;if(!le._webAudio)return le;if(le._state!=="loaded")return le._queue.push({event:"pos",action:function(){le.pos(L,j,ee,re)}}),le;if(j=typeof j!="number"?0:j,ee=typeof ee!="number"?-.5:ee,typeof re>"u")if(typeof L=="number")le._pos=[L,j,ee];else return le._pos;for(var ve=le._getSoundIds(re),ye=0;ye<ve.length;ye++){var Ee=le._soundById(ve[ye]);if(Ee)if(typeof L=="number")Ee._pos=[L,j,ee],Ee._node&&((!Ee._panner||Ee._panner.pan)&&m(Ee,"spatial"),typeof Ee._panner.positionX<"u"?(Ee._panner.positionX.setValueAtTime(L,Howler.ctx.currentTime),Ee._panner.positionY.setValueAtTime(j,Howler.ctx.currentTime),Ee._panner.positionZ.setValueAtTime(ee,Howler.ctx.currentTime)):Ee._panner.setPosition(L,j,ee)),le._emit("pos",Ee._id);else return Ee._pos}return le},Howl.prototype.orientation=function(L,j,ee,re){var le=this;if(!le._webAudio)return le;if(le._state!=="loaded")return le._queue.push({event:"orientation",action:function(){le.orientation(L,j,ee,re)}}),le;if(j=typeof j!="number"?le._orientation[1]:j,ee=typeof ee!="number"?le._orientation[2]:ee,typeof re>"u")if(typeof L=="number")le._orientation=[L,j,ee];else return le._orientation;for(var ve=le._getSoundIds(re),ye=0;ye<ve.length;ye++){var Ee=le._soundById(ve[ye]);if(Ee)if(typeof L=="number")Ee._orientation=[L,j,ee],Ee._node&&(Ee._panner||(Ee._pos||(Ee._pos=le._pos||[0,0,-.5]),m(Ee,"spatial")),typeof Ee._panner.orientationX<"u"?(Ee._panner.orientationX.setValueAtTime(L,Howler.ctx.currentTime),Ee._panner.orientationY.setValueAtTime(j,Howler.ctx.currentTime),Ee._panner.orientationZ.setValueAtTime(ee,Howler.ctx.currentTime)):Ee._panner.setOrientation(L,j,ee)),le._emit("orientation",Ee._id);else return Ee._orientation}return le},Howl.prototype.pannerAttr=function(){var L=this,j=arguments,ee,re,le;if(!L._webAudio)return L;if(j.length===0)return L._pannerAttr;if(j.length===1)if(typeof j[0]=="object")ee=j[0],typeof re>"u"&&(ee.pannerAttr||(ee.pannerAttr={coneInnerAngle:ee.coneInnerAngle,coneOuterAngle:ee.coneOuterAngle,coneOuterGain:ee.coneOuterGain,distanceModel:ee.distanceModel,maxDistance:ee.maxDistance,refDistance:ee.refDistance,rolloffFactor:ee.rolloffFactor,panningModel:ee.panningModel}),L._pannerAttr={coneInnerAngle:typeof ee.pannerAttr.coneInnerAngle<"u"?ee.pannerAttr.coneInnerAngle:L._coneInnerAngle,coneOuterAngle:typeof ee.pannerAttr.coneOuterAngle<"u"?ee.pannerAttr.coneOuterAngle:L._coneOuterAngle,coneOuterGain:typeof ee.pannerAttr.coneOuterGain<"u"?ee.pannerAttr.coneOuterGain:L._coneOuterGain,distanceModel:typeof ee.pannerAttr.distanceModel<"u"?ee.pannerAttr.distanceModel:L._distanceModel,maxDistance:typeof ee.pannerAttr.maxDistance<"u"?ee.pannerAttr.maxDistance:L._maxDistance,refDistance:typeof ee.pannerAttr.refDistance<"u"?ee.pannerAttr.refDistance:L._refDistance,rolloffFactor:typeof ee.pannerAttr.rolloffFactor<"u"?ee.pannerAttr.rolloffFactor:L._rolloffFactor,panningModel:typeof ee.pannerAttr.panningModel<"u"?ee.pannerAttr.panningModel:L._panningModel});else return le=L._soundById(parseInt(j[0],10)),le?le._pannerAttr:L._pannerAttr;else j.length===2&&(ee=j[0],re=parseInt(j[1],10));for(var ve=L._getSoundIds(re),ye=0;ye<ve.length;ye++)if(le=L._soundById(ve[ye]),le){var Ee=le._pannerAttr;Ee={coneInnerAngle:typeof ee.coneInnerAngle<"u"?ee.coneInnerAngle:Ee.coneInnerAngle,coneOuterAngle:typeof ee.coneOuterAngle<"u"?ee.coneOuterAngle:Ee.coneOuterAngle,coneOuterGain:typeof ee.coneOuterGain<"u"?ee.coneOuterGain:Ee.coneOuterGain,distanceModel:typeof ee.distanceModel<"u"?ee.distanceModel:Ee.distanceModel,maxDistance:typeof ee.maxDistance<"u"?ee.maxDistance:Ee.maxDistance,refDistance:typeof ee.refDistance<"u"?ee.refDistance:Ee.refDistance,rolloffFactor:typeof ee.rolloffFactor<"u"?ee.rolloffFactor:Ee.rolloffFactor,panningModel:typeof ee.panningModel<"u"?ee.panningModel:Ee.panningModel};var Me=le._panner;Me||(le._pos||(le._pos=L._pos||[0,0,-.5]),m(le,"spatial"),Me=le._panner),Me.coneInnerAngle=Ee.coneInnerAngle,Me.coneOuterAngle=Ee.coneOuterAngle,Me.coneOuterGain=Ee.coneOuterGain,Me.distanceModel=Ee.distanceModel,Me.maxDistance=Ee.maxDistance,Me.refDistance=Ee.refDistance,Me.rolloffFactor=Ee.rolloffFactor,Me.panningModel=Ee.panningModel}return L},Sound.prototype.init=function(L){return function(){var j=this,ee=j._parent;j._orientation=ee._orientation,j._stereo=ee._stereo,j._pos=ee._pos,j._pannerAttr=ee._pannerAttr,L.call(this),j._stereo?ee.stereo(j._stereo):j._pos&&ee.pos(j._pos[0],j._pos[1],j._pos[2],j._id)}}(Sound.prototype.init),Sound.prototype.reset=function(L){return function(){var j=this,ee=j._parent;return j._orientation=ee._orientation,j._stereo=ee._stereo,j._pos=ee._pos,j._pannerAttr=ee._pannerAttr,j._stereo?ee.stereo(j._stereo):j._pos?ee.pos(j._pos[0],j._pos[1],j._pos[2],j._id):j._panner&&(j._panner.disconnect(0),j._panner=void 0,ee._refreshBuffer(j)),L.call(this)}}(Sound.prototype.reset);var m=function(L,j){j=j||"spatial",j==="spatial"?(L._panner=Howler.ctx.createPanner(),L._panner.coneInnerAngle=L._pannerAttr.coneInnerAngle,L._panner.coneOuterAngle=L._pannerAttr.coneOuterAngle,L._panner.coneOuterGain=L._pannerAttr.coneOuterGain,L._panner.distanceModel=L._pannerAttr.distanceModel,L._panner.maxDistance=L._pannerAttr.maxDistance,L._panner.refDistance=L._pannerAttr.refDistance,L._panner.rolloffFactor=L._pannerAttr.rolloffFactor,L._panner.panningModel=L._pannerAttr.panningModel,typeof L._panner.positionX<"u"?(L._panner.positionX.setValueAtTime(L._pos[0],Howler.ctx.currentTime),L._panner.positionY.setValueAtTime(L._pos[1],Howler.ctx.currentTime),L._panner.positionZ.setValueAtTime(L._pos[2],Howler.ctx.currentTime)):L._panner.setPosition(L._pos[0],L._pos[1],L._pos[2]),typeof L._panner.orientationX<"u"?(L._panner.orientationX.setValueAtTime(L._orientation[0],Howler.ctx.currentTime),L._panner.orientationY.setValueAtTime(L._orientation[1],Howler.ctx.currentTime),L._panner.orientationZ.setValueAtTime(L._orientation[2],Howler.ctx.currentTime)):L._panner.setOrientation(L._orientation[0],L._orientation[1],L._orientation[2])):(L._panner=Howler.ctx.createStereoPanner(),L._panner.pan.setValueAtTime(L._stereo,Howler.ctx.currentTime)),L._panner.connect(L._node),L._paused||L._parent.pause(L._id,!0).play(L._id,!0)}})()})(howler);const fileRegex=/[^\/]+(?=\.[^\/.]*$)/;function HowlWrapper({src:$,sprite:m,...L}){if(Array.isArray($)||console.error("Audio src is not an array",$),m){const j=new howler.Howl({src:$,sprite:m,...L}),ee=[];for(const re in m){const le=new HowlSpriteWrapper(j,re);le.key=re,ee.push([re,le])}return ee}else{const j=fileRegex.exec($[0])[0],ee=new howler.Howl({src:$,...L});return ee.key=j,[[j,ee]]}}class HowlSpriteWrapper{constructor(m,L){["play","pause","stop","mute","volume","fade","rate","seek","loop","playing","duration","on","once","off"].forEach(j=>{this[j]=(...ee)=>m[j](...ee,L)})}}const src$1=["/audio/global/rollovers.mp3"],volume=1,sprite$1={egg_rollover_1:[0,1781.2925170068029],egg_rollover_2:[3e3,1433.718820861678],egg_rollover_3:[6e3,1955.0793650793655],egg_rollover_4:[9e3,1959.5918367346935],egg_rollover_5:[12e3,2146.0997732426304]},ROLLOVERS={src:src$1,volume,sprite:sprite$1},src=["/audio/global/sfx.mp3"],sprite={ClickUI:[0,1016.6666666666666],Close_Window:[3e3,316.3492063492064],DecodingUI:[5e3,599.9999999999997],ExpSFX_In:[7e3,4353.333333333334],HoverCTA_In:[13e3,895.9863945578235],HoverCTA_Out:[15e3,895.9863945578235],HoverUI_In:[17e3,66.50793650793574],HoverUI_Out:[19e3,66.50793650793574],MenuSFX_In:[21e3,1791.2925170068022],MenuSFX_Out:[24e3,2233.3333333333344],Quick_Buildup:[28e3,516.6666666666657],Release:[3e4,2503.832199546487]},SFX={src,sprite},CONFIG=[SFX,ROLLOVERS,{src:["/audio/global/griffin_armor_transition.mp3"],volume:1},{src:["/audio/global/slow_buildup.mp3"],volume:1},{src:["/audio/global/planet_reveal.mp3"],volume:1},{src:["/audio/global/egg_to_griffin_transition.mp3"],volume:1},{src:["/audio/global/theme_2.mp3"],volume:1,loop:!0,preload:!1},{src:["/audio/global/theme_1.mp3"],volume:2,loop:!0,preload:!1}],FADE_DURATION=1500,SFX_SOUNDS=["ClickUI","Close_Window","DecodingUI","ExpSFX_In","HoverCTA_In","HoverCTA_Out","HoverUI_In","HoverUI_Out","MenuSFX_In","MenuSFX_Out"],debugSounds={hover:"",click:""};class AudioClass{constructor(){autoBind(this),this.isInit=!1,this.isMuted=!1,this.isBlurMuted=!1,this.uiStore=null,this.sounds={},this.eggTheme=null,this.muteEase={value:1},this.onVisibilityChange=this.onVisibilityChange.bind(this)}get currentTheme(){return this.uiStore.home.eggExplosion<=.1?this.eggTheme:this.griffinTheme}init(){if(this.isInit)return;this.isInit=!0,this.uiStore=useUiStore(),this.uiStore.setIsMuted(this.isMuted);const m=[];CONFIG.forEach(L=>{m.push(...HowlWrapper(L))}),this.sounds=Object.fromEntries(m),Visibility$1.addEventListener("change",this.onVisibilityChange),GLOBAL.isDevelopment&&!GLOBAL.params.audio&&this.mute(!0),this.createDebug()}getSound(m){if(!this.isInit)return;const L=this.sounds[m];return(!m||!L)&&console.error(`${m} key not found in loaded sounds`,this.sounds),L}play(m){if(!this.isInit)return;const L=this.getSound(m);return L.play(),L}playClick(m=SFX_SOUNDS){let L=m;return debugSounds.click&&(L=[debugSounds.click]),this.playRandomInSprite(L)}playHover(m=SFX_SOUNDS){let L=m;return debugSounds.hover&&(L=[debugSounds.hover]),this.playRandomInSprite(L)}playRandomInSprite(m){const L=Math.floor(m.length*Math.random()),j=m[L];return{name:j,audio:this.play(j)}}playThemes(){this.isInit&&(this.griffinTheme=this._createGriffinTheme(),this.eggTheme=this._createEggTheme(),watch(()=>this.uiStore.home.eggExplosion<=.1,m=>{m?(this.griffinTheme.fade(this.griffinTheme.volume(),0,FADE_DURATION),this.eggTheme.fade(0,this.eggTheme._baseVolume,FADE_DURATION)):(this.griffinTheme.fade(0,this.griffinTheme._baseVolume,FADE_DURATION),this.eggTheme.fade(this.eggTheme.volume(),0,FADE_DURATION))}))}_createGriffinTheme(){const m=this.getSound("theme_2"),L=m.volume();let j=!1;const ee=new howler.Howl({src:m._src,loop:!0,html5:!0,autoplay:!0,volume:0,onplay:()=>{j=!1,!(this.uiStore.home.eggExplosion<=.1)&&ee.fade(0,L,FADE_DURATION)}}),re=this.uiStore;return ee._sounds[0]._node.addEventListener("timeupdate",function(){const le=FADE_DURATION/1e3;if(this.currentTime>this.duration-le&&!j){j=!0;const ve=this.duration-this.currentTime;if(re.home.eggExplosion<=.1)return;ee.fade(ee.volume(),0,ve*1e3)}}),ee._baseVolume=L,ee.play(),ee}_createEggTheme(){const m=this.getSound("theme_1"),L=m.volume();let j=!1;const ee=new howler.Howl({src:m._src,loop:!0,html5:!0,autoplay:!0,volume:0,onplay:()=>{j=!1,!(this.uiStore.home.eggExplosion>.1)&&ee.fade(0,L,FADE_DURATION)}}),re=this.uiStore;return ee._sounds[0]._node.addEventListener("timeupdate",function(){const le=FADE_DURATION/1e3;if(this.currentTime>this.duration-le&&!j){j=!0;const ve=this.duration-this.currentTime;if(re.home.eggExplosion>.1)return;ee.fade(ee.volume(),0,ve*1e3)}}),ee._baseVolume=L,ee.play(),ee}mute(m=!this.isMuted){this.isInit&&(this.isMuted=m,howler.Howler.mute(this.isMuted),this.uiStore&&this.uiStore.setIsMuted(this.isMuted))}volume(m){if(this.isInit)return howler.Howler.volume(m)}onVisibilityChange({isHidden:m}){if(this.isInit)if(m){if(this.isMuted)return;this.isBlurMuted=!0,this.mute(!0)}else this.isBlurMuted&&(this.mute(!1),this.isBlurMuted=!1)}load(m){if(this.isInit)return HowlWrapper(m)[0][1]}createDebug(){if(!Debugger$1)return;const m=Object.fromEntries(Object.keys(this.sounds).map(ee=>[ee,ee])),L=Debugger$1.addFolder({title:"Audio Player"}),j={selectedAudio:Object.keys(this.sounds)[0],soundObject:null};j.soundObject=this.getSound(j.selectedAudio),L.addInput(j,"selectedAudio",{label:"Selected",options:m}).on("change",()=>{j.soundObject=this.getSound(j.selectedAudio)}),L.addButton({title:"Play"}).on("click",()=>{this.play(j.selectedAudio)}),L.addInput(debugSounds,"click",{label:"Override Click",options:{none:"",ClickUI:"ClickUI",Close_Window:"Close_Window",DecodingUI:"DecodingUI",ExpSFX_In:"ExpSFX_In",HoverCTA_In:"HoverCTA_In",HoverCTA_Out:"HoverCTA_Out",HoverUI_In:"HoverUI_In",HoverUI_Out:"HoverUI_Out",MenuSFX_In:"MenuSFX_In",MenuSFX_Out:"MenuSFX_Out"}}),L.addInput(debugSounds,"hover",{label:"Override Hover",options:{none:"",ClickUI:"ClickUI",Close_Window:"Close_Window",DecodingUI:"DecodingUI",ExpSFX_In:"ExpSFX_In",HoverCTA_In:"HoverCTA_In",HoverCTA_Out:"HoverCTA_Out",HoverUI_In:"HoverUI_In",HoverUI_Out:"HoverUI_Out",MenuSFX_In:"MenuSFX_In",MenuSFX_Out:"MenuSFX_Out"}})}}const AudioPlayer=new AudioClass;var define_process_env_default={};const _sfc_main$i={__name:"LinkBtn",props:{url:{type:String,default:null},disabled:{type:Boolean,default:!1},external:{type:Boolean,default:!1},target:{type:String,default:"_blank"}},setup($){const m=$,L=ref(null),j=computed(()=>m.url?typeof window>"u"?m.url:m.url.replace(window.location.origin,""):null),ee=computed(()=>j.value&&(m.external||!!j.value.match(/^http/)||!!j.value.match(/^mailto:/))),re=computed(()=>{if(!j.value)return"button";const ye=typeof process<"u"&&(define_process_env_default==null?void 0:define_process_env_default.STORYBOOK);return m.disabled||ee.value||ye?"a":__nuxt_component_0$1}),le=computed(()=>j.value?m.disabled||ee.value?{href:j.value,target:ee.value?m.target:""}:{to:j.value}:{});function ve(ye){m.disabled&&ye.preventDefault()}return(ye,Ee)=>(openBlock(),createBlock(resolveDynamicComponent(re.value),mergeProps(le.value,{ref_key:"el",ref:L,onClick:ve,onMouseup:ve}),{default:withCtx(()=>[renderSlot(ye.$slots,"default")]),_:3},16))}},LinkBtn=_sfc_main$i,_hoisted_1$c={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$8=createBaseVNode("path",{d:"M8.24517 8.23369C8.47474 8.37235 8.69007 8.52259 8.89191 8.68313C8.17198 9.6289 7.65356 10.7112 7.28793 11.7664C7.13643 12.2036 7.0071 12.6474 6.89826 13.0906C6.12992 11.8805 4.95606 10.6798 3.07365 9.68365C-2.99313 6.47303 1.68127 0.673195 2.32773 0C1.39071 4.18189 2.89583 5.07004 6.80739 7.37818C7.25514 7.64239 7.73442 7.9252 8.24517 8.23369Z",fill:"#000"},null,-1),_hoisted_3$5=createBaseVNode("path",{d:"M11.2384 18.2328C11.0881 18.6699 10.9067 18.9965 10.6285 19.1702C9.43362 19.9166 8.0402 18.6187 8.00682 17.169C7.97151 15.6349 8.24753 13.5552 8.99944 11.7204C9.27306 11.0527 9.6097 10.4174 10.0173 9.85266C10.4876 9.20108 11.0523 8.64337 11.7236 8.23801C12.2347 7.92936 12.7144 7.6464 13.1625 7.38205C17.0772 5.0727 18.5836 4.18408 17.6458 0C18.2928 0.673548 22.9709 6.47643 16.8993 9.68873C13.0161 11.7432 12.1457 14.6665 11.6322 16.7509C11.6322 16.7509 11.6322 16.7509 11.6322 16.7509C11.6066 16.855 11.5818 16.957 11.5576 17.0566C11.5509 17.0844 11.5442 17.112 11.5375 17.1394C11.4377 17.5502 11.346 17.9198 11.2384 18.2328Z",fill:"#000"},null,-1),_hoisted_4$4=[_hoisted_2$8,_hoisted_3$5];function render($,m){return openBlock(),createElementBlock("svg",_hoisted_1$c,[..._hoisted_4$4])}const LogoSvg={render},_export_sfc$1=($,m)=>{const L=$.__vccOpts||$;for(const[j,ee]of m)L[j]=ee;return L},_sfc_main$h={__name:"LogoElt",props:{url:{type:String,default:null},isWhite:{type:Boolean,default:!1}},setup($){const m=useUiStore(),L=()=>{DeviceHelper.isTouch||AudioPlayer.play("HoverUI_In"),m.setIsHover(!0)},j=()=>{m.setIsHover(!1)},ee=re=>{AudioPlayer.play("ClickUI"),m.menu.isOpen=!1};return(re,le)=>(openBlock(),createBlock(LinkBtn,{class:normalizeClass(["homeButton",{isWhite:$.isWhite}]),url:$.url,onClick:le[0]||(le[0]=ve=>ee($.url)),onMouseenter:L,onMouseleave:j},{default:withCtx(()=>[createVNode(unref(LogoSvg),{class:"homeButton--svg"})]),_:1},8,["url","class"]))}},LogoElt=_export_sfc$1(_sfc_main$h,[["__scopeId","data-v-c883019b"]]);function clamp($,m,L){return Math.max($,Math.min(m,L))}function lerp($,m,L){return(1-L)*$+L*m}function damp($,m,L,j){return lerp($,m,1-Math.exp(-L*j))}function modulo($,m){return($%m+m)%m}class Animate{advance(m){var j;if(!this.isRunning)return;let L=!1;if(this.lerp)this.value=damp(this.value,this.to,this.lerp*60,m),Math.round(this.value)===this.to&&(this.value=this.to,L=!0);else{this.currentTime+=m;const ee=clamp(0,this.currentTime/this.duration,1);L=ee>=1;const re=L?1:this.easing(ee);this.value=this.from+(this.to-this.from)*re}(j=this.onUpdate)==null||j.call(this,this.value,L),L&&this.stop()}stop(){this.isRunning=!1}fromTo(m,L,{lerp:j=.1,duration:ee=1,easing:re=ye=>ye,onStart:le,onUpdate:ve}){this.from=this.value=m,this.to=L,this.lerp=j,this.duration=ee,this.easing=re,this.currentTime=0,this.isRunning=!0,le==null||le(),this.onUpdate=ve}}function debounce($,m){let L;return function(){const j=arguments,ee=this;clearTimeout(L),L=setTimeout(function(){$.apply(ee,j)},m)}}class Dimensions{constructor({wrapper:m,content:L,autoResize:j=!0,debounce:ee=250}={}){Rn(this,"resize",()=>{this.onWrapperResize(),this.onContentResize()});Rn(this,"onWrapperResize",()=>{this.wrapper===window?(this.width=window.innerWidth,this.height=window.innerHeight):(this.width=this.wrapper.clientWidth,this.height=this.wrapper.clientHeight)});Rn(this,"onContentResize",()=>{this.wrapper===window?(this.scrollHeight=this.content.scrollHeight,this.scrollWidth=this.content.scrollWidth):(this.scrollHeight=this.wrapper.scrollHeight,this.scrollWidth=this.wrapper.scrollWidth)});this.wrapper=m,this.content=L,j&&(this.debouncedResize=debounce(this.resize,ee),this.wrapper===window?window.addEventListener("resize",this.debouncedResize,!1):(this.wrapperResizeObserver=new ResizeObserver(this.debouncedResize),this.wrapperResizeObserver.observe(this.wrapper)),this.contentResizeObserver=new ResizeObserver(this.debouncedResize),this.contentResizeObserver.observe(this.content)),this.resize()}destroy(){var m,L;(m=this.wrapperResizeObserver)==null||m.disconnect(),(L=this.contentResizeObserver)==null||L.disconnect(),window.removeEventListener("resize",this.debouncedResize,!1)}get limit(){return{x:this.scrollWidth-this.width,y:this.scrollHeight-this.height}}}class Emitter{constructor(){this.events={}}emit(m,...L){const j=this.events[m]||[];for(let ee=0,re=j.length;ee<re;ee++)j[ee](...L)}on(m,L){var j;return(j=this.events[m])!=null&&j.push(L)||(this.events[m]=[L]),()=>{var ee;this.events[m]=(ee=this.events[m])==null?void 0:ee.filter(re=>L!==re)}}off(m,L){var j;this.events[m]=(j=this.events[m])==null?void 0:j.filter(ee=>L!==ee)}destroy(){this.events={}}}const LINE_HEIGHT=100/6;class VirtualScroll{constructor(m,{wheelMultiplier:L=1,touchMultiplier:j=1}){Rn(this,"onTouchStart",m=>{const{clientX:L,clientY:j}=m.targetTouches?m.targetTouches[0]:m;this.touchStart.x=L,this.touchStart.y=j,this.lastDelta={x:0,y:0},this.emitter.emit("scroll",{deltaX:0,deltaY:0,event:m})});Rn(this,"onMouseDown",m=>{this.onTouchStart(m),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("mouseup",this.onMouseUp,{passive:!1})});Rn(this,"onMouseMove",m=>{this.onTouchMove(m)});Rn(this,"onMouseUp",m=>{this.onTouchEnd(m),window.removeEventListener("mousemove",this.onMouseMove,{passive:!1}),window.removeEventListener("mouseup",this.onMouseUp,{passive:!1})});Rn(this,"onTouchMove",m=>{const{clientX:L,clientY:j}=m.targetTouches?m.targetTouches[0]:m,ee=-(L-this.touchStart.x)*this.touchMultiplier,re=-(j-this.touchStart.y)*this.touchMultiplier;this.touchStart.x=L,this.touchStart.y=j,this.lastDelta={x:ee,y:re},this.emitter.emit("scroll",{deltaX:ee,deltaY:re,event:m})});Rn(this,"onTouchEnd",m=>{this.emitter.emit("scroll",{deltaX:this.lastDelta.x,deltaY:this.lastDelta.y,event:m})});Rn(this,"onWheel",m=>{let{deltaX:L,deltaY:j,deltaMode:ee}=m;const re=ee===1?LINE_HEIGHT:ee===2?this.windowWidth:1,le=ee===1?LINE_HEIGHT:ee===2?this.windowHeight:1;L*=re,j*=le,L*=this.wheelMultiplier,j*=this.wheelMultiplier,this.emitter.emit("scroll",{deltaX:L,deltaY:j,event:m})});Rn(this,"onWindowResize",()=>{this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight});this.element=m,this.wheelMultiplier=L,this.touchMultiplier=j,this.touchStart={x:null,y:null},this.emitter=new Emitter,window.addEventListener("resize",this.onWindowResize,!1),this.onWindowResize(),this.element.addEventListener("wheel",this.onWheel,{passive:!1}),this.element.addEventListener("touchstart",this.onTouchStart,{passive:!1}),this.element.addEventListener("touchmove",this.onTouchMove,{passive:!1}),this.element.addEventListener("touchend",this.onTouchEnd,{passive:!1}),this.element.addEventListener("mousedown",this.onMouseDown,{passive:!1})}on(m,L){return this.emitter.on(m,L)}destroy(){this.emitter.destroy(),window.removeEventListener("resize",this.onWindowResize,!1),this.element.removeEventListener("wheel",this.onWheel,{passive:!1}),this.element.removeEventListener("touchstart",this.onTouchStart,{passive:!1}),this.element.removeEventListener("touchmove",this.onTouchMove,{passive:!1}),this.element.removeEventListener("touchend",this.onTouchEnd,{passive:!1}),this.element.removeEventListener("mousedown",this.onMouseDown,{passive:!1}),window.removeEventListener("mousemove",this.onMouseMove,{passive:!1}),window.removeEventListener("pointerup",this.onMouseUp,{passive:!1})}}class Lenis{constructor({wrapper:m=window,content:L=document.documentElement,wheelEventsTarget:j=m,eventsTarget:ee=j,smoothWheel:re=!0,syncTouch:le=!1,syncTouchInertiaLerp:ve=.075,syncTouchLerp:ye=.075,touchInertiaMultiplier:Ee=35,duration:Me,easing:Ce=He=>Math.min(1,1.001-Math.pow(2,-10*He)),lerp:De=!Me&&.1,infinite:Be=!1,orientation:ke="vertical",gestureOrientation:Fe="vertical",touchMultiplier:Oe=1,wheelMultiplier:Ne=1,autoResize:ze=!0,__experimentalNaiveDimensions:$e=!1}={}){Rn(this,"onVirtualScroll",({deltaX:m,deltaY:L,event:j})=>{if(j.ctrlKey)return;const ee=j.type.includes("touch")||j.type.includes("mouse"),re=j.type.includes("wheel");if(this.options.syncTouch&&ee&&(j.type==="touchstart"||j.type==="mousedown")&&!this.isStopped&&!this.isLocked){this.reset();return}const ve=m===0&&L===0,ye=this.options.gestureOrientation==="vertical"&&L===0||this.options.gestureOrientation==="horizontal"&&m===0;if(ve||ye)return;let Ee=j.composedPath();if(Ee=Ee.slice(0,Ee.indexOf(this.rootElement)),Ee.find(ke=>{var Fe,Oe,Ne,ze,$e;return((Fe=ke.hasAttribute)==null?void 0:Fe.call(ke,"data-lenis-prevent"))||ee&&((Oe=ke.hasAttribute)==null?void 0:Oe.call(ke,"data-lenis-prevent-touch"))||re&&((Ne=ke.hasAttribute)==null?void 0:Ne.call(ke,"data-lenis-prevent-wheel"))||((ze=ke.classList)==null?void 0:ze.contains("lenis"))&&!(($e=ke.classList)!=null&&$e.contains("lenis-stopped"))}))return;if(this.isStopped||this.isLocked){j.preventDefault();return}if(this.isSmooth=this.options.syncTouch&&ee||this.options.smoothWheel&&re,!this.isSmooth){this.isScrolling=!1,this.animate.stop();return}j.preventDefault();let Me=L;this.options.gestureOrientation==="both"?Me=Math.abs(L)>Math.abs(m)?L:m:this.options.gestureOrientation==="horizontal"&&(Me=m);const Ce=ee&&this.options.syncTouch,Be=ee&&(j.type==="touchend"||j.type==="mouseup")&&Math.abs(Me)>5;Be&&(Me=this.velocity*this.options.touchInertiaMultiplier),this.scrollTo(this.targetScroll+Me,{programmatic:!1,...Ce?{lerp:Be?this.options.syncTouchInertiaLerp:this.options.syncTouchLerp}:{lerp:this.options.lerp,duration:this.options.duration,easing:this.options.easing}})});Rn(this,"onNativeScroll",()=>{if(!this.__preventNextScrollEvent&&!this.isScrolling){const m=this.animatedScroll;this.animatedScroll=this.targetScroll=this.actualScroll,this.velocity=0,this.direction=Math.sign(this.animatedScroll-m),this.emit()}});this.__isSmooth=!1,this.__isScrolling=!1,this.__isStopped=!1,this.__isLocked=!1,(m===document.documentElement||m===document.body)&&(m=window),this.options={wrapper:m,content:L,wheelEventsTarget:j,eventsTarget:ee,smoothWheel:re,syncTouch:le,syncTouchInertiaLerp:ve,syncTouchLerp:ye,touchInertiaMultiplier:Ee,duration:Me,easing:Ce,lerp:De,infinite:Be,gestureOrientation:Fe,orientation:ke,touchMultiplier:Oe,wheelMultiplier:Ne,autoResize:ze,__experimentalNaiveDimensions:$e},this.animate=new Animate,this.emitter=new Emitter,this.dimensions=new Dimensions({wrapper:m,content:L,autoResize:ze}),this.toggleClassName("lenis",!0),this.velocity=0,this.isLocked=!1,this.isStopped=!1,this.isSmooth=le||re,this.isScrolling=!1,this.targetScroll=this.animatedScroll=this.actualScroll,this.options.wrapper.addEventListener("scroll",this.onNativeScroll,!1),this.virtualScroll=new VirtualScroll(ee,{touchMultiplier:Oe,wheelMultiplier:Ne}),this.virtualScroll.on("scroll",this.onVirtualScroll)}destroy(){this.emitter.destroy(),this.options.wrapper.removeEventListener("scroll",this.onNativeScroll,!1),this.virtualScroll.destroy(),this.dimensions.destroy(),this.toggleClassName("lenis",!1),this.toggleClassName("lenis-smooth",!1),this.toggleClassName("lenis-scrolling",!1),this.toggleClassName("lenis-stopped",!1),this.toggleClassName("lenis-locked",!1)}on(m,L){return this.emitter.on(m,L)}off(m,L){return this.emitter.off(m,L)}setScroll(m){this.isHorizontal?this.rootElement.scrollLeft=m:this.rootElement.scrollTop=m}resize(){this.dimensions.resize()}emit(){this.emitter.emit("scroll",this)}reset(){this.isLocked=!1,this.isScrolling=!1,this.animatedScroll=this.targetScroll=this.actualScroll,this.velocity=0,this.animate.stop()}start(){this.isStopped&&(this.isStopped=!1,this.reset())}stop(){this.isStopped||(this.isStopped=!0,this.animate.stop(),this.reset())}raf(m){const L=m-(this.time||m);this.time=m,this.animate.advance(L*.001)}scrollTo(m,{offset:L=0,immediate:j=!1,lock:ee=!1,duration:re=this.options.duration,easing:le=this.options.easing,lerp:ve=!re&&this.options.lerp,onComplete:ye,force:Ee=!1,programmatic:Me=!0}={}){if(!((this.isStopped||this.isLocked)&&!Ee)){if(["top","left","start"].includes(m))m=0;else if(["bottom","right","end"].includes(m))m=this.limit;else{let Ce;if(typeof m=="string"?Ce=document.querySelector(m):m!=null&&m.nodeType&&(Ce=m),Ce){if(this.options.wrapper!==window){const Be=this.options.wrapper.getBoundingClientRect();L-=this.isHorizontal?Be.left:Be.top}const De=Ce.getBoundingClientRect();m=(this.isHorizontal?De.left:De.top)+this.animatedScroll}}if(typeof m=="number"){if(m+=L,m=Math.round(m),this.options.infinite?Me&&(this.targetScroll=this.animatedScroll=this.scroll):m=clamp(0,m,this.limit),j){this.animatedScroll=this.targetScroll=m,this.setScroll(this.scroll),this.reset(),ye==null||ye(this);return}if(!Me){if(m===this.targetScroll)return;this.targetScroll=m}this.animate.fromTo(this.animatedScroll,m,{duration:re,easing:le,lerp:ve,onStart:()=>{ee&&(this.isLocked=!0),this.isScrolling=!0},onUpdate:(Ce,De)=>{this.isScrolling=!0,this.velocity=Ce-this.animatedScroll,this.direction=Math.sign(this.velocity),this.animatedScroll=Ce,this.setScroll(this.scroll),Me&&(this.targetScroll=Ce),De||this.emit(),De&&(this.reset(),this.emit(),ye==null||ye(this),this.__preventNextScrollEvent=!0,requestAnimationFrame(()=>{delete this.__preventNextScrollEvent}))}})}}}get rootElement(){return this.options.wrapper===window?document.documentElement:this.options.wrapper}get limit(){return this.options.__experimentalNaiveDimensions?this.isHorizontal?this.rootElement.scrollWidth-this.rootElement.clientWidth:this.rootElement.scrollHeight-this.rootElement.clientHeight:this.dimensions.limit[this.isHorizontal?"x":"y"]}get isHorizontal(){return this.options.orientation==="horizontal"}get actualScroll(){return this.isHorizontal?this.rootElement.scrollLeft:this.rootElement.scrollTop}get scroll(){return this.options.infinite?modulo(this.animatedScroll,this.limit):this.animatedScroll}get progress(){return this.limit===0?1:this.scroll/this.limit}get isSmooth(){return this.__isSmooth}set isSmooth(m){this.__isSmooth!==m&&(this.__isSmooth=m,this.toggleClassName("lenis-smooth",m))}get isScrolling(){return this.__isScrolling}set isScrolling(m){this.__isScrolling!==m&&(this.__isScrolling=m,this.toggleClassName("lenis-scrolling",m))}get isStopped(){return this.__isStopped}set isStopped(m){this.__isStopped!==m&&(this.__isStopped=m,this.toggleClassName("lenis-stopped",m))}get isLocked(){return this.__isLocked}set isLocked(m){this.__isLocked!==m&&(this.__isLocked=m,this.toggleClassName("lenis-locked",m))}get className(){let m="lenis";return this.isStopped&&(m+=" lenis-stopped"),this.isLocked&&(m+=" lenis-locked"),this.isScrolling&&(m+=" lenis-scrolling"),this.isSmooth&&(m+=" lenis-smooth"),m}toggleClassName(m,L){this.rootElement.classList.toggle(m,L),this.emitter.emit("className change",this)}}const defaultConfig={deltaMultiplier:.1,touchMultiplier:1,speedMultiplier:.1,smoothAmount:.035,deltaClamp:0},log=console.log.bind(console,"%c - ScrollManager - ","background-color: lightblue; color: black");class ScrollManager extends EventDispatcher$1{constructor(){super();Rn(this,"_root");Rn(this,"_config");Rn(this,"_started");Rn(this,"_rafId");Rn(this,"_deltaCoeffTarget");Rn(this,"_deltaCoeff");Rn(this,"_deltaY");Rn(this,"_scrollY");Rn(this,"_targetScrollY");Rn(this,"_firstScrollY");Rn(this,"_speed");Rn(this,"_scrollSize");Rn(this,"_domTarget");Rn(this,"_viewPath");Rn(this,"_viewsHistory");Rn(this,"_debugDom");Rn(this,"_debug");Rn(this,"_state");Rn(this,"_startTime");Rn(this,"_lenis");Rn(this,"_disableScroll");Rn(this,"_enabledScrollSmooth");autoBind(this),this._started=!1,this._deltaY=0,this._scrollY=0,this._targetScrollY=0,this._firstScrollY=0,this._scrollSize=0,this._deltaCoeffTarget=1,this._deltaCoeff=1,this._speed=0,this._domTarget=null,this._disableScroll=!1,this._enabledScrollSmooth=0,this._viewsHistory=[],this._state={debugDom:GLOBAL.params.debugDom,remindScrollY:GLOBAL.params.remindScrollY},this._config={...defaultConfig}}get lenisInstance(){return this._lenis}get viewPath(){return this._viewPath}get deltaY(){return this._deltaY}get scrollY(){return this._scrollY}get targetScrollY(){return this._targetScrollY}get speed(){return this._speed}get scrollPct(){return this._scrollSize?Math.round(Math.abs(this._scrollY/this._scrollSize)*1e6)/1e6:0}get scrollPctTarget(){return this._scrollSize?Math.round(Math.abs(this._targetScrollY/this._scrollSize)*1e6)/1e6:0}get dampedScrollY(){return 1-Math.exp(-this._config.smoothAmount*this._deltaCoeff)}get debugDom(){return this._state.debugDom}get remindScrollY(){return this._state.remindScrollY}get scrollSize(){return this._scrollSize}set scrollSize(L){this._scrollSize=L}get deltaMultiplier(){return this._config.deltaMultiplier}get touchMultiplier(){return this._config.touchMultiplier}get speedMultiplier(){return this._config.speedMultiplier}get deltaCoeff(){return this._deltaCoeff}get disableScroll(){return this._disableScroll}set disableScroll(L){var j;this._disableScroll!==L&&(this._disableScroll=L,!L&&(this._state.debugDom||this._state.remindScrollY)&&((j=this._lenis)==null||j.scrollTo(-this._scrollY,{immediate:!0})),this._disableScroll?this._lenis.stop():this._lenis.start())}get domTarget(){return this._domTarget}start(L=null){this._config={...defaultConfig,...L||{}},this._started=!0,this._root=document.querySelector("#__nuxt"),this._bind(!0)}getPrevViewHistory(L=this._viewPath,j=1){const ee=this._viewsHistory.concat().reverse(),re=ee.findIndex(Ce=>Ce.viewPath===L);if(re>j)return null;const le=ee[re];if(!le)return null;let ve=le.scrollY;const{scrollSize:ye}=le,{innerHeight:Ee}=WindowResizeObserver$1;le.scrollSize+ve<2*Ee&&(ve=0),ve>-2*Ee&&(ve=0);const Me=Math.abs(ve/le.scrollSize);return{scrollY:ve,scrollPct:Me,scrollSize:ye}}setDomTarget(L,j=""){var re,le,ve;if(this._domTarget&&(this._viewsHistory.push({viewPath:this._viewPath,scrollY:this._targetScrollY,scrollSize:this._scrollSize}),this._domTarget._gsap=null),this._domTarget=L,this._viewPath=j,this.onWindowResize(),this._firstScrollY=(re=this.getPrevViewHistory(this._viewPath))==null?void 0:re.scrollY,this._state.debugDom||this._state.remindScrollY){const ye=fetchLocalItem();ye!=null&&(this._firstScrollY=ye.scrollY)}(le=this._lenis)==null||le.destroy(),this._lenis=this._createLenis();const ee=this._firstScrollY?this._firstScrollY:0;(ve=this._lenis)==null||ve.scrollTo(-ee,{immediate:!0}),this._lenis&&(this._scrollY=-this._lenis.animatedScroll),this._firstScrollY=null,setTimeout(()=>{this.manualEventTrigger()})}initInterface(L){this._createDebug(L)}reset(){log("reset"),this._scrollY=0,this._targetScrollY=0,this._speed=0,this._domTarget=null,this._config={...defaultConfig};const L=this._viewPath;this.dispatchEvent("scrollReset",{viewPath:L}),this.dispatchEvent("scroll",{viewPath:L})}updateConfig(L){const j={...this._config};for(const ee in L){const re=ee;j[re]=ee==="reset"?defaultConfig[re]:L[re]}this._config=j,this._onSettingsUpdated()}manualEventTrigger(){const{scrollY:L,scrollPct:j,speed:ee,viewPath:re}=this,le={scrollY:L,speed:ee,scrollPct:j,viewPath:re};this.dispatchEvent("scrollSmooth",le)}scrollTo(L,j,ee=null){this._lenis&&this._lenis.scrollTo(-L,{duration:j,onComplete:()=>{ee&&ee()}})}destroy(){var L;this._started=!1,(L=this._lenis)==null||L.destroy(),this._bind(!1),this._destroyDebug()}_createDebug(L){this._debug=L.addFolder({title:"Scroll Manager",expanded:!1,parent:null,index:0}),DebuggerUtils.addInputs(this._debug,this._state,()=>{setDebugUrlParams(this._state),this._onSettingsUpdated()})}_onSettingsUpdated(){this.dispatchEvent("settingsUpdated",this._state)}_destroyDebug(){var L;(L=this._debug)==null||L.dispose()}_bind(L){const j=L?"addEventListener":"removeEventListener";WebglApp$1[j]("resize",this.onWindowResize),WebglApp$1[j]("update",this.onUpdate)}_createLenis(){var j;if(!this._domTarget)return null;const L=new Lenis({wrapper:this._domTarget,content:(j=this._domTarget)==null?void 0:j.children[0],lerp:.05,wheelMultiplier:1,touchMultiplier:this.touchMultiplier});return this._startTime=Date.now(),L.on("scroll",this._onLenisScrollAction),L}_onLenisScrollAction(){const{speedMultiplier:L}=this._config;this._speed=Math.abs(this._lenis.velocity/1e3),this._speed*=L,this._targetScrollY=-this._lenis.targetScroll;const j=-this._lenis.velocity,ee=this._viewPath,re=this.scrollPctTarget,le={deltaY:j,scrollY,scrollPct:re,viewPath:ee};this.dispatchEvent("scroll",le)}onWindowResize(){const{innerWidth:L,innerHeight:j}=WindowResizeObserver$1;this._domTarget&&this._domTarget.children.length>0&&(this._scrollSize=Math.max(0,this._domTarget.children[0].offsetHeight-j))}onUpdate({delta:L,time:j}){var le;if(!this._started)return;this._deltaCoeffTarget=L*60,(le=this._lenis)==null||le.raf(Date.now()-this._startTime),this._deltaCoeff+=(this._deltaCoeffTarget-this._deltaCoeff)/10,this._deltaCoeff=Math.round(this._deltaCoeff*10)/10;let ee=0,re=0;if(this._lenis&&(ee=-this._lenis.animatedScroll,re=this._speed),this._scrollY!==ee||this._speed!==re){this._scrollY=ee,this._speed=re;const{scrollPct:ve}=this,ye=this._viewPath,Ee={scrollY:ee,speed:re,scrollPct:ve,viewPath:ye};this.dispatchEvent("scrollSmooth",Ee),(this._state.debugDom||this._state.remindScrollY)&&this._domTarget&&saveLocalItem({scrollY:ee})}}}function saveLocalItem($,m="scrollManager"){try{localStorage.setItem(m,JSON.stringify($))}catch{}}function fetchLocalItem($="scrollManager"){try{return JSON.parse(localStorage.getItem($))}catch{}}const ScrollManager$1=new ScrollManager,useWebglStore=defineStore("webgl",{state:()=>({loaded:!1,ready:!1,previousView:{id:null,data:null},currentView:{id:null,data:null},previousOverlayView:{id:null,data:null},currentOverlayView:{id:null,data:null},hoveringCanvasLink:!1,hoveredElement:null}),getters:{},actions:{setAsLoaded($=!0){GLOBAL.isProduction||console.log("webglStore.setAsLoaded",$),this.loaded=$},setAsReady($=!0){GLOBAL.isProduction||console.log("webglStore.setAsReady",$),this.ready=$},setCurrentView($=null,m=null){this.currentView.id=$,this.currentView.data=m},setCurrentOverlayView($=null,m=null){this.currentOverlayView.id=$,this.currentOverlayView.data=m},resetViews(){var $,m,L,j;this.previousView.id=($=this.currentView)==null?void 0:$.id,this.previousView.data=(m=this.currentView)==null?void 0:m.data,this.currentView.id=null,this.currentView.data=null,this.previousOverlayView.id=(L=this.currentOverlayView)==null?void 0:L.id,this.previousOverlayView.data=(j=this.currentOverlayView)==null?void 0:j.data,this.currentOverlayView.id=null,this.currentOverlayView.data=null},setHoveringCanvasLink($){this.hoveringCanvasLink=$},setHoveredElement($){this.hoveredElement=$}}}),_sfc_main$g={__name:"app",async setup($){let m,L;gsapWithCSS.registerPlugin(CustomEase);const j=useRouter(),ee=useUiStore(),re=useWebglStore(),le=useDatasStore(),ve=useTransitionStore(),ye=ref(null),Ee=ref(),Me=computed(()=>re.ready&&!ee.mainLoader.visible),Ce=computed(()=>{const ke=j.currentRoute.value;if(!ke)return"";let Fe=ke.path;return Fe.substring(Fe.length-1)!=="/"&&(Fe+="/"),Fe});le.parseRoute(),[m,L]=withAsyncContext(()=>DeviceHelper.checkGpu()),await m,L(),[m,L]=withAsyncContext(()=>le.getBase()),await m,L(),watch(j.currentRoute,(ke,Fe)=>{ee.menu.isOpen=!1,ee.toggleMainLoader(!1),ee.setRoute(ke,Fe)}),watch(Me,ke=>{ke&&(Be(),le.fetchTvl())}),onBeforeMount(()=>{ScrollManager$1.start(),Debugger$1&&ScrollManager$1.initInterface(Debugger$1.pane),WindowHelper$1.init(),memoizedWindow.init(),ee.setRoute(j.currentRoute.value),window.addEventListener("resize",De),De()}),onMounted(()=>{AudioPlayer.init(),GLOBAL.params.menu&&watch(()=>ee.mainLoader.visible,ke=>{setTimeout(()=>{ke||(ee.menu.isOpen=!0)},1e3)}),watch(()=>ee.mainLoader.hidding,ke=>{ke&&setTimeout(()=>{AudioPlayer.playThemes()},100)},{immediate:!0})}),onBeforeUnmount(()=>{ScrollManager$1.destroy()});function De(){const ke=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${ke}px`)}function Be(){const ke=ve.allPageTransitions[0];ke&&ke.enter(Ee.value.$el);const Fe=ve.allLayoutTransitions[0];Fe&&Fe.enter(Ee.value.$el)}return(ke,Fe)=>{const Oe=__nuxt_component_0,Ne=__nuxt_component_1;return openBlock(),createElementBlock("div",{ref_key:"el",ref:ye,class:normalizeClass({app:!0,[unref(le).lang]:!0})},[createVNode(Ne,null,{default:withCtx(()=>[createVNode(Oe,{ref_key:"page",ref:Ee,"page-key":Ce.value},null,8,["page-key"])]),_:1})],2)}}},AppComponent=_export_sfc$1(_sfc_main$g,[["__scopeId","data-v-0e05980b"]]),_hoisted_1$b={class:"menuText_wrapper"},_hoisted_2$7={class:"menuIcon_wrapper"},_hoisted_3$4={class:"menuButton_svg menuButton_svg-line",width:"28",height:"8",viewBox:"0 0 28 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_4$3={class:"menuButton_svg menuButton_svg-top",width:"8",height:"5",viewBox:"0 0 8 5",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_5$3={class:"menuButton_svg menuButton_svg-bottom",width:"8",height:"5",viewBox:"0 0 8 5",fill:"none",xmlns:"http://www.w3.org/2000/svg"},defaultDuration$4=.35,_sfc_main$f={__name:"MenuBtn",props:{isWhite:{type:Boolean,default:!1}},setup($,{expose:m}){const L=useUiStore(),j=useDatasStore(),ee=$,re=ref(),le=ref(),ve=ref(),ye=ref(),Ee=ref(),Me=ref();onMounted(()=>{Be()});const Ce=()=>{const ke=gsapWithCSS.timeline({paused:!0});ke.call(()=>{ee.isWhite===!0&&re.value.classList.remove("isWhite"),re.value.classList.add("isYellow")},null,0),ke.call(()=>{ee.isWhite===!0&&re.value.classList.add("isWhite"),re.value.classList.remove("isYellow")},null,defaultDuration$4*.5),L.menu.isOpen?(AudioPlayer.play("ClickUI"),AudioPlayer.play("MenuSFX_In"),ke.fromTo(le.value,{opacity:1,y:0},{opacity:0,y:"50%",duration:defaultDuration$4*.3,ease:"power1.out"},0),ke.fromTo(ve.value,{opacity:0,y:"-50%"},{opacity:1,y:0,duration:defaultDuration$4*.3,ease:"power1.out"},0)):(AudioPlayer.play("ClickUI"),AudioPlayer.play("MenuSFX_Out"),AudioPlayer.play("Close_Window"),ke.fromTo(le.value,{opacity:0,y:"-50%"},{opacity:1,y:0,duration:defaultDuration$4*.3,ease:"power1.out"},0),ke.fromTo(ve.value,{opacity:1,y:0},{opacity:0,y:"50%",duration:defaultDuration$4*.3,ease:"power1.out"},0)),DeviceHelper.isTouch&&(L.menu.isOpen?(ke.to(Ee.value,{yPercent:200,duration:defaultDuration$4,ease:"power1.inOut"},0),ke.to(Me.value,{yPercent:0,duration:defaultDuration$4,ease:"power1.inOut"},0)):(ke.to(Ee.value,{yPercent:0,duration:defaultDuration$4,ease:"power1.inOut"},0),ke.to(Me.value,{yPercent:-200,duration:defaultDuration$4,ease:"power1.inOut"},0))),ke.restart(),ke.timeScale(1.5)};watch(()=>L.menu.isOpen,()=>{Ce()});const De=()=>{DeviceHelper.isTouch||AudioPlayer.play("HoverUI_In"),L.setIsHover(!0);const ke=gsapWithCSS.timeline();ke.to(ye.value,{scaleX:.5,duration:defaultDuration$4,ease:"power1.inOut"},0),L.menu.isOpen?(ke.to(Ee.value,{yPercent:300,duration:defaultDuration$4,ease:"power1.inOut"},0),ke.to(Me.value,{yPercent:-300,duration:defaultDuration$4,ease:"power1.inOut"},0)):(ke.to(Ee.value,{yPercent:300,duration:defaultDuration$4,ease:"power1.inOut"},0),ke.to(Me.value,{yPercent:-300,duration:defaultDuration$4,ease:"power1.inOut"},0)),ke.timeScale(1.5)},Be=()=>{DeviceHelper.isTouch||AudioPlayer.play("HoverUI_Out"),L.setIsHover(!1);const ke=gsapWithCSS.timeline();ke.to(ye.value,{scaleX:1,duration:defaultDuration$4,ease:"power1.out"},0),L.menu.isOpen?(ke.to(Ee.value,{yPercent:300,duration:defaultDuration$4,ease:"power1.out"},0),ke.to(Me.value,{yPercent:0,duration:defaultDuration$4,ease:"power1.out"},0)):(ke.to(Ee.value,{yPercent:0,duration:defaultDuration$4,ease:"power1.out"},0),ke.to(Me.value,{yPercent:-300,duration:defaultDuration$4,ease:"power1.out"},0)),ke.timeScale(1.5)};return m({handleClick:Ce,handleMouseEnter:De,handleMouseLeave:Be}),(ke,Fe)=>(openBlock(),createElementBlock("button",{ref_key:"buttonRef",ref:re,class:normalizeClass(["menuButton",{isWhite:$.isWhite}])},[createBaseVNode("div",_hoisted_1$b,[createBaseVNode("p",{ref_key:"textDefaultRef",ref:le,class:"menuButton_text menuButton_text-default"},toDisplayString(unref(j).globalTexts.ctaMenu),513),createBaseVNode("p",{ref_key:"textCloseRef",ref:ve,class:"menuButton_text menuButton_text-close"},toDisplayString(unref(j).globalTexts.ctaClose),513)]),createBaseVNode("div",_hoisted_2$7,[(openBlock(),createElementBlock("svg",_hoisted_3$4,[createBaseVNode("rect",{ref_key:"lineRef",ref:ye,y:"4",width:"28",height:"1"},null,512)])),(openBlock(),createElementBlock("svg",_hoisted_4$3,[createBaseVNode("path",{ref_key:"crossTopRef",ref:Ee,d:"M1 4.5L2 3.5L4 1.5L6 3.5L7 4.5"},null,512)])),(openBlock(),createElementBlock("svg",_hoisted_5$3,[createBaseVNode("path",{ref_key:"crossBottomRef",ref:Me,d:"M7 1L6 2L4 4L2 2L1 0.999999"},null,512)]))])],2))}},MenuBtn=_export_sfc$1(_sfc_main$f,[["__scopeId","data-v-83f32d2a"]]),_hoisted_1$a={class:"soundButton_text"},_hoisted_2$6=createStaticVNode('<div class="wrapper" data-v-97648808><svg class="soundButton_svg" width="13" height="18" viewBox="0 0 13 18" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-97648808><path class="soundButton_egg soundButton_egg-inner" d="M9.45438 10.2646L9.45438 10.2646L9.45421 10.266C9.34909 11.1026 9.10645 11.7409 8.70533 12.2925C8.61051 12.4219 8.32934 12.7227 8.20406 12.8282C7.88956 13.0917 7.46499 13.3133 7.08618 13.4131L7.08542 13.4133C6.77172 13.4964 6.34402 13.5312 6.02874 13.4989L6.02812 13.4988C4.75223 13.3697 3.71554 12.4522 3.32038 10.994L3.32028 10.9936C3.13402 10.3086 3.1021 9.4286 3.24597 8.5663L3.24601 8.56601C3.42023 7.51755 3.83495 6.50225 4.40022 5.71769C4.57984 5.47001 4.93181 5.09959 5.12446 4.95179L5.12558 4.95092C5.47649 4.67994 5.82119 4.53705 6.15806 4.49997C6.30291 4.48456 6.35274 4.48441 6.50425 4.5013C6.81581 4.53761 7.16996 4.68642 7.51908 4.95599C7.67546 5.07927 8.0333 5.44454 8.16981 5.6245C8.83395 6.50041 9.2794 7.64234 9.44665 8.94695C9.45955 9.04981 9.46976 9.31933 9.4715 9.61535C9.47325 9.91435 9.46589 10.1752 9.45438 10.2646Z" stroke="white" stroke-width="0.90219" data-v-97648808></path><path class="soundButton_egg soundButton_egg-inner2" d="M9.45438 10.2646L9.45438 10.2646L9.45421 10.266C9.34909 11.1026 9.10645 11.7409 8.70533 12.2925C8.61051 12.4219 8.32934 12.7227 8.20406 12.8282C7.88956 13.0917 7.46499 13.3133 7.08618 13.4131L7.08542 13.4133C6.77172 13.4964 6.34402 13.5312 6.02874 13.4989L6.02812 13.4988C4.75223 13.3697 3.71554 12.4522 3.32038 10.994L3.32028 10.9936C3.13402 10.3086 3.1021 9.4286 3.24597 8.5663L3.24601 8.56601C3.42023 7.51755 3.83495 6.50225 4.40022 5.71769C4.57984 5.47001 4.93181 5.09959 5.12446 4.95179L5.12558 4.95092C5.47649 4.67994 5.82119 4.53705 6.15806 4.49997C6.30291 4.48456 6.35274 4.48441 6.50425 4.5013C6.81581 4.53761 7.16996 4.68642 7.51908 4.95599C7.67546 5.07927 8.0333 5.44454 8.16981 5.6245C8.83395 6.50041 9.2794 7.64234 9.44665 8.94695C9.45955 9.04981 9.46976 9.31933 9.4715 9.61535C9.47325 9.91435 9.46589 10.1752 9.45438 10.2646Z" stroke="white" stroke-width="0.90219" data-v-97648808></path><path class="soundButton_line" d="M4 17L9 1" stroke="white" data-v-97648808></path></svg></div>',1),_sfc_main$e={__name:"SoundBtn",props:{isWhite:{type:Boolean,default:!1}},setup($){const m=useUiStore(),L=useDatasStore(),{event:j}=useGtag(),ee=()=>{AudioPlayer.play("ClickUI"),AudioPlayer.mute(),j("audio",{type:AudioPlayer.isMuted?"off":"on"})},re=()=>{DeviceHelper.isTouch||AudioPlayer.play("HoverUI_In"),m.setIsHover(!0)},le=()=>{DeviceHelper.isTouch||AudioPlayer.play("HoverUI_Out"),m.setIsHover(!1)};return(ve,ye)=>(openBlock(),createElementBlock("button",{class:normalizeClass(["soundButton",{isWhite:$.isWhite,isMuted:unref(m).audio.isMuted}]),onClick:ee,onMouseenter:re,onMouseleave:le},[createBaseVNode("p",_hoisted_1$a,toDisplayString(unref(L).globalTexts.ctaSound),1),_hoisted_2$6],34))}},SoundBtn=_export_sfc$1(_sfc_main$e,[["__scopeId","data-v-97648808"]]),_withScopeId$2=$=>(pushScopeId("data-v-dff33024"),$=$(),popScopeId(),$),_hoisted_1$9={class:"default_item item"},_hoisted_2$5={class:"dropDownWrapper"},_hoisted_3$3=["onClick","onMouseenter","onMouseleave"],_hoisted_4$2=_withScopeId$2(()=>createBaseVNode("path",{d:"M0.830264 4.16913L4.99976 8.33862L9.16925 4.16913","stroke-width":"0.7"},null,-1)),_hoisted_5$2=_withScopeId$2(()=>createBaseVNode("path",{d:"M6.8244 6.51458L5.00024 4.69043L3.17609 6.51458","stroke-width":"0.7"},null,-1)),_hoisted_6$2=[_hoisted_4$2,_hoisted_5$2],defaultDuration$3=.35,_sfc_main$d={__name:"LanguageElt",props:{isWhite:{type:Boolean,default:!1},isDropTop:{type:Boolean,default:!1}},setup($){const m=useUiStore();let L=!1;const j=$,ee=ref(),re=ref(),le=ref(),ve=ref(),ye=useDatasStore(),Ee=computed(()=>ye.lang),Me=computed(()=>ye.langs.filter(Ke=>Ee.value!==Ke));let Ce,De,Be,ke;const Fe=()=>{const Ke=gsapWithCSS.timeline({paused:!0});return Ke.to(re.value,{pointerEvents:"all",duration:0},0),Ke.to(le.value,{duration:defaultDuration$3,stagger:"0.04",ease:"power1.out"},0),Ke.to(le.value,{opacity:1,duration:0,stagger:"0.04",ease:"power1.inOut"},0),Ke.to(le.value,{color:"#C1FF12",duration:0},0),j.isWhite===!0?Ke.to(le.value,{color:"#ffffff",duration:defaultDuration$3,stagger:"0.04",ease:"power1.inOut"},0):Ke.to(le.value,{color:"#000000",duration:defaultDuration$3,stagger:"0.04",ease:"power1.inOut"},0),Ke.to(ee.value,{rotation:180,duration:defaultDuration$3,ease:"power1.inOut"},0),Ke.timeScale(2),Ke},Oe=()=>{const Ke=gsapWithCSS.timeline({paused:!0});return Ke.to(le.value,{opacity:0,duration:defaultDuration$3,ease:"power1.out"},0),j.isWhite===!0?Ke.to(le.value,{color:"#ffffff",duration:defaultDuration$3,ease:"power1.out"},0):Ke.to(le.value,{color:"#000000",duration:defaultDuration$3,ease:"power1.out"},0),Ke.to(ee.value,{rotation:0,duration:defaultDuration$3,ease:"power1.out"},0),Ke.to(re.value,{pointerEvents:"none",duration:0}),Ke.to(le.value,{duration:0,ease:"power1.out"}),Ke.timeScale(2),Ke},Ne=Ke=>{const rt=gsapWithCSS.timeline({paused:!0});for(const ft in ve.value)Number(ft)===Ke?rt.to(ve.value[Ke],{opacity:1,duration:defaultDuration$3,ease:"power1.inOut"},0):rt.to(ve.value[Number(ft)],{opacity:.4,duration:defaultDuration$3,ease:"power1.inOut"},0);return rt.timeScale(2),rt},ze=Ke=>{const rt=gsapWithCSS.timeline({paused:!0});for(const ft in ve.value)Number(ft)!==Ke&&rt.to(ve.value[Ke],{opacity:1,duration:defaultDuration$3,ease:"power1.inOut"},0);return rt.timeScale(2),rt};onUnmounted(()=>{Ce==null||Ce.kill(),De==null||De.kill(),Be==null||Be.kill(),ke==null||ke.kill()});const $e=()=>{AudioPlayer.play("HoverUI_In"),m.setIsHover(!0),L=!0,Ce=Fe(),De==null||De.kill(),Ce.restart()},He=()=>{AudioPlayer.play("HoverUI_Out"),m.setIsHover(!1),L=!1,De=Oe(),Ce==null||Ce.kill(),De.restart()},We=()=>{L=!L,DeviceHelper.isTouch&&(L=!0),L?$e():He()},qe=Ke=>{if(L){AudioPlayer.play("ClickUI");const rt=Ke.toLowerCase(),ft=rt===DEFAULT_LANG?"/":"/"+rt+"/";window.location.href=window.location.origin+ft}},Ye=Ke=>{L&&(AudioPlayer.play("HoverUI_In"),Be=Ne(Ke),Be.play())},Ze=Ke=>{L||(AudioPlayer.play("HoverUI_Out"),ke=ze(Ke),ke.play())};return(Ke,rt)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["langSelector",{isWhite:$.isWhite,isDropTop:$.isDropTop}]),onMouseenter:$e,onMouseleave:He,onClick:We},[createBaseVNode("ul",{ref_key:"langContainerRef",ref:re,class:"langSelector_container"},[createBaseVNode("div",{class:"langSelector_lang langSelector_lang-default",onMouseenter:rt[0]||(rt[0]=ft=>Ye(0)),onMouseleave:rt[1]||(rt[1]=ft=>Ze(0))},[createBaseVNode("li",_hoisted_1$9,toDisplayString(unref(Ee)),1)],32),createBaseVNode("div",_hoisted_2$5,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(Me),(ft,mt)=>(openBlock(),createElementBlock("div",{ref_for:!0,ref_key:"langWrapperRef",ref:le,key:mt,class:"langSelector_lang langSelector_lang-dropDown",onClick:Et=>qe(ft),onMouseenter:Et=>Ye(mt),onMouseleave:Et=>Ze(mt)},[createBaseVNode("li",{ref_for:!0,ref_key:"langRef",ref:ve,class:"dropDown_item item"},toDisplayString(ft),513)],40,_hoisted_3$3))),128))])],512),(openBlock(),createElementBlock("svg",{ref_key:"arrowRef",ref:ee,class:"langSelector_arrow",width:"10",height:"9",viewBox:"0 0 10 9",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_6$2,512))],34))}},LanguageElt=_export_sfc$1(_sfc_main$d,[["__scopeId","data-v-dff33024"]]);function useDisposableRef($,m=!1){let L=!1,j=!1;onScopeDispose(()=>j=!0);const ee=customRef((le,ve)=>({get(){return le(),$},set(ye){ye==null&&!L||(L=!1,$=ye,ve())}}));return[ee,()=>{m&&!j||(L=!0,ee.value=null)}]}var lottie={exports:{}};(function(module,exports){typeof navigator<"u"&&function($,m){module.exports=m()}(commonjsGlobal$1,function(){var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(m){_useWebWorker=!!m},getWebWorker=function(){return _useWebWorker},setLocationHref=function(m){locationHref=m},getLocationHref=function(){return locationHref};function createTag($){return document.createElement($)}function extendPrototype($,m){var L,j=$.length,ee;for(L=0;L<j;L+=1){ee=$[L].prototype;for(var re in ee)Object.prototype.hasOwnProperty.call(ee,re)&&(m.prototype[re]=ee[re])}}function getDescriptor($,m){return Object.getOwnPropertyDescriptor($,m)}function createProxyFunction($){function m(){}return m.prototype=$,m}var audioControllerFactory=function(){function $(m){this.audios=[],this.audioFactory=m,this._volume=1,this._isMuted=!1}return $.prototype={addAudio:function(L){this.audios.push(L)},pause:function(){var L,j=this.audios.length;for(L=0;L<j;L+=1)this.audios[L].pause()},resume:function(){var L,j=this.audios.length;for(L=0;L<j;L+=1)this.audios[L].resume()},setRate:function(L){var j,ee=this.audios.length;for(j=0;j<ee;j+=1)this.audios[j].setRate(L)},createAudio:function(L){return this.audioFactory?this.audioFactory(L):window.Howl?new window.Howl({src:[L]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(L){this.audioFactory=L},setVolume:function(L){this._volume=L,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var L,j=this.audios.length;for(L=0;L<j;L+=1)this.audios[L].volume(this._volume*(this._isMuted?0:1))}},function(){return new $}}(),createTypedArray=function(){function $(L,j){var ee=0,re=[],le;switch(L){case"int16":case"uint8c":le=1;break;default:le=1.1;break}for(ee=0;ee<j;ee+=1)re.push(le);return re}function m(L,j){return L==="float32"?new Float32Array(j):L==="int16"?new Int16Array(j):L==="uint8c"?new Uint8ClampedArray(j):$(L,j)}return typeof Uint8ClampedArray=="function"&&typeof Float32Array=="function"?m:$}();function createSizedArray($){return Array.apply(null,{length:$})}function _typeof$6($){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$6=function(L){return typeof L}:_typeof$6=function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},_typeof$6($)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};(function(){var $=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],m,L=$.length;for(m=0;m<L;m+=1)BMMath[$[m]]=Math[$[m]]})(),BMMath.random=Math.random,BMMath.abs=function($){var m=_typeof$6($);if(m==="object"&&$.length){var L=createSizedArray($.length),j,ee=$.length;for(j=0;j<ee;j+=1)L[j]=Math.abs($[j]);return L}return Math.abs($)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function styleDiv($){$.style.position="absolute",$.style.top=0,$.style.left=0,$.style.display="block",$.style.transformOrigin="0 0",$.style.webkitTransformOrigin="0 0",$.style.backfaceVisibility="visible",$.style.webkitBackfaceVisibility="visible",$.style.transformStyle="preserve-3d",$.style.webkitTransformStyle="preserve-3d",$.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent($,m,L,j){this.type=$,this.currentTime=m,this.totalTime=L,this.direction=j<0?-1:1}function BMCompleteEvent($,m){this.type=$,this.direction=m<0?-1:1}function BMCompleteLoopEvent($,m,L,j){this.type=$,this.currentLoop=L,this.totalLoops=m,this.direction=j<0?-1:1}function BMSegmentStartEvent($,m,L){this.type=$,this.firstFrame=m,this.totalFrames=L}function BMDestroyEvent($,m){this.type=$,this.target=m}function BMRenderFrameErrorEvent($,m){this.type="renderFrameError",this.nativeError=$,this.currentTime=m}function BMConfigErrorEvent($){this.type="configError",this.nativeError=$}var createElementID=function(){var $=0;return function(){return $+=1,idPrefix$1+"__lottie_element_"+$}}();function HSVtoRGB($,m,L){var j,ee,re,le,ve,ye,Ee,Me;switch(le=Math.floor($*6),ve=$*6-le,ye=L*(1-m),Ee=L*(1-ve*m),Me=L*(1-(1-ve)*m),le%6){case 0:j=L,ee=Me,re=ye;break;case 1:j=Ee,ee=L,re=ye;break;case 2:j=ye,ee=L,re=Me;break;case 3:j=ye,ee=Ee,re=L;break;case 4:j=Me,ee=ye,re=L;break;case 5:j=L,ee=ye,re=Ee;break}return[j,ee,re]}function RGBtoHSV($,m,L){var j=Math.max($,m,L),ee=Math.min($,m,L),re=j-ee,le,ve=j===0?0:re/j,ye=j/255;switch(j){case ee:le=0;break;case $:le=m-L+re*(m<L?6:0),le/=6*re;break;case m:le=L-$+re*2,le/=6*re;break;case L:le=$-m+re*4,le/=6*re;break}return[le,ve,ye]}function addSaturationToRGB($,m){var L=RGBtoHSV($[0]*255,$[1]*255,$[2]*255);return L[1]+=m,L[1]>1?L[1]=1:L[1]<=0&&(L[1]=0),HSVtoRGB(L[0],L[1],L[2])}function addBrightnessToRGB($,m){var L=RGBtoHSV($[0]*255,$[1]*255,$[2]*255);return L[2]+=m,L[2]>1?L[2]=1:L[2]<0&&(L[2]=0),HSVtoRGB(L[0],L[1],L[2])}function addHueToRGB($,m){var L=RGBtoHSV($[0]*255,$[1]*255,$[2]*255);return L[0]+=m/360,L[0]>1?L[0]-=1:L[0]<0&&(L[0]+=1),HSVtoRGB(L[0],L[1],L[2])}var rgbToHex=function(){var $=[],m,L;for(m=0;m<256;m+=1)L=m.toString(16),$[m]=L.length===1?"0"+L:L;return function(j,ee,re){return j<0&&(j=0),ee<0&&(ee=0),re<0&&(re=0),"#"+$[j]+$[ee]+$[re]}}(),setSubframeEnabled=function(m){subframeEnabled=!!m},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(m){expressionsPlugin=m},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(m){expressionsInterfaces=m},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(m){defaultCurveSegments=m},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(m){idPrefix$1=m};function createNS($){return document.createElementNS(svgNS,$)}function _typeof$5($){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$5=function(L){return typeof L}:_typeof$5=function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},_typeof$5($)}var dataManager=function(){var $=1,m=[],L,j,ee={onmessage:function(){},postMessage:function(Be){L({data:Be})}},re={postMessage:function(Be){ee.onmessage({data:Be})}};function le(De){if(window.Worker&&window.Blob&&getWebWorker()){var Be=new Blob(["var _workerSelf = self; self.onmessage = ",De.toString()],{type:"text/javascript"}),ke=URL.createObjectURL(Be);return new Worker(ke)}return L=De,ee}function ve(){j||(j=le(function(Be){function ke(){function Oe(Ct,st){var at,Xe,ht=Ct.length,Bt,Dt,Jt,tn;for(Xe=0;Xe<ht;Xe+=1)if(at=Ct[Xe],"ks"in at&&!at.completed){if(at.completed=!0,at.hasMask){var zt=at.masksProperties;for(Dt=zt.length,Bt=0;Bt<Dt;Bt+=1)if(zt[Bt].pt.k.i)We(zt[Bt].pt.k);else for(tn=zt[Bt].pt.k.length,Jt=0;Jt<tn;Jt+=1)zt[Bt].pt.k[Jt].s&&We(zt[Bt].pt.k[Jt].s[0]),zt[Bt].pt.k[Jt].e&&We(zt[Bt].pt.k[Jt].e[0])}at.ty===0?(at.layers=$e(at.refId,st),Oe(at.layers,st)):at.ty===4?He(at.shapes):at.ty===5&&Et(at)}}function Ne(Ct,st){if(Ct){var at=0,Xe=Ct.length;for(at=0;at<Xe;at+=1)Ct[at].t===1&&(Ct[at].data.layers=$e(Ct[at].data.refId,st),Oe(Ct[at].data.layers,st))}}function ze(Ct,st){for(var at=0,Xe=st.length;at<Xe;){if(st[at].id===Ct)return st[at];at+=1}return null}function $e(Ct,st){var at=ze(Ct,st);return at?at.layers.__used?JSON.parse(JSON.stringify(at.layers)):(at.layers.__used=!0,at.layers):null}function He(Ct){var st,at=Ct.length,Xe,ht;for(st=at-1;st>=0;st-=1)if(Ct[st].ty==="sh")if(Ct[st].ks.k.i)We(Ct[st].ks.k);else for(ht=Ct[st].ks.k.length,Xe=0;Xe<ht;Xe+=1)Ct[st].ks.k[Xe].s&&We(Ct[st].ks.k[Xe].s[0]),Ct[st].ks.k[Xe].e&&We(Ct[st].ks.k[Xe].e[0]);else Ct[st].ty==="gr"&&He(Ct[st].it)}function We(Ct){var st,at=Ct.i.length;for(st=0;st<at;st+=1)Ct.i[st][0]+=Ct.v[st][0],Ct.i[st][1]+=Ct.v[st][1],Ct.o[st][0]+=Ct.v[st][0],Ct.o[st][1]+=Ct.v[st][1]}function qe(Ct,st){var at=st?st.split("."):[100,100,100];return Ct[0]>at[0]?!0:at[0]>Ct[0]?!1:Ct[1]>at[1]?!0:at[1]>Ct[1]?!1:Ct[2]>at[2]?!0:at[2]>Ct[2]?!1:null}var Ye=function(){var Ct=[4,4,14];function st(Xe){var ht=Xe.t.d;Xe.t.d={k:[{s:ht,t:0}]}}function at(Xe){var ht,Bt=Xe.length;for(ht=0;ht<Bt;ht+=1)Xe[ht].ty===5&&st(Xe[ht])}return function(Xe){if(qe(Ct,Xe.v)&&(at(Xe.layers),Xe.assets)){var ht,Bt=Xe.assets.length;for(ht=0;ht<Bt;ht+=1)Xe.assets[ht].layers&&at(Xe.assets[ht].layers)}}}(),Ze=function(){var Ct=[4,7,99];return function(st){if(st.chars&&!qe(Ct,st.v)){var at,Xe=st.chars.length;for(at=0;at<Xe;at+=1){var ht=st.chars[at];ht.data&&ht.data.shapes&&(He(ht.data.shapes),ht.data.ip=0,ht.data.op=99999,ht.data.st=0,ht.data.sr=1,ht.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},st.chars[at].t||(ht.data.shapes.push({ty:"no"}),ht.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}}(),Ke=function(){var Ct=[5,7,15];function st(Xe){var ht=Xe.t.p;typeof ht.a=="number"&&(ht.a={a:0,k:ht.a}),typeof ht.p=="number"&&(ht.p={a:0,k:ht.p}),typeof ht.r=="number"&&(ht.r={a:0,k:ht.r})}function at(Xe){var ht,Bt=Xe.length;for(ht=0;ht<Bt;ht+=1)Xe[ht].ty===5&&st(Xe[ht])}return function(Xe){if(qe(Ct,Xe.v)&&(at(Xe.layers),Xe.assets)){var ht,Bt=Xe.assets.length;for(ht=0;ht<Bt;ht+=1)Xe.assets[ht].layers&&at(Xe.assets[ht].layers)}}}(),rt=function(){var Ct=[4,1,9];function st(Xe){var ht,Bt=Xe.length,Dt,Jt;for(ht=0;ht<Bt;ht+=1)if(Xe[ht].ty==="gr")st(Xe[ht].it);else if(Xe[ht].ty==="fl"||Xe[ht].ty==="st")if(Xe[ht].c.k&&Xe[ht].c.k[0].i)for(Jt=Xe[ht].c.k.length,Dt=0;Dt<Jt;Dt+=1)Xe[ht].c.k[Dt].s&&(Xe[ht].c.k[Dt].s[0]/=255,Xe[ht].c.k[Dt].s[1]/=255,Xe[ht].c.k[Dt].s[2]/=255,Xe[ht].c.k[Dt].s[3]/=255),Xe[ht].c.k[Dt].e&&(Xe[ht].c.k[Dt].e[0]/=255,Xe[ht].c.k[Dt].e[1]/=255,Xe[ht].c.k[Dt].e[2]/=255,Xe[ht].c.k[Dt].e[3]/=255);else Xe[ht].c.k[0]/=255,Xe[ht].c.k[1]/=255,Xe[ht].c.k[2]/=255,Xe[ht].c.k[3]/=255}function at(Xe){var ht,Bt=Xe.length;for(ht=0;ht<Bt;ht+=1)Xe[ht].ty===4&&st(Xe[ht].shapes)}return function(Xe){if(qe(Ct,Xe.v)&&(at(Xe.layers),Xe.assets)){var ht,Bt=Xe.assets.length;for(ht=0;ht<Bt;ht+=1)Xe.assets[ht].layers&&at(Xe.assets[ht].layers)}}}(),ft=function(){var Ct=[4,4,18];function st(Xe){var ht,Bt=Xe.length,Dt,Jt;for(ht=Bt-1;ht>=0;ht-=1)if(Xe[ht].ty==="sh")if(Xe[ht].ks.k.i)Xe[ht].ks.k.c=Xe[ht].closed;else for(Jt=Xe[ht].ks.k.length,Dt=0;Dt<Jt;Dt+=1)Xe[ht].ks.k[Dt].s&&(Xe[ht].ks.k[Dt].s[0].c=Xe[ht].closed),Xe[ht].ks.k[Dt].e&&(Xe[ht].ks.k[Dt].e[0].c=Xe[ht].closed);else Xe[ht].ty==="gr"&&st(Xe[ht].it)}function at(Xe){var ht,Bt,Dt=Xe.length,Jt,tn,zt,Vt;for(Bt=0;Bt<Dt;Bt+=1){if(ht=Xe[Bt],ht.hasMask){var Mt=ht.masksProperties;for(tn=Mt.length,Jt=0;Jt<tn;Jt+=1)if(Mt[Jt].pt.k.i)Mt[Jt].pt.k.c=Mt[Jt].cl;else for(Vt=Mt[Jt].pt.k.length,zt=0;zt<Vt;zt+=1)Mt[Jt].pt.k[zt].s&&(Mt[Jt].pt.k[zt].s[0].c=Mt[Jt].cl),Mt[Jt].pt.k[zt].e&&(Mt[Jt].pt.k[zt].e[0].c=Mt[Jt].cl)}ht.ty===4&&st(ht.shapes)}}return function(Xe){if(qe(Ct,Xe.v)&&(at(Xe.layers),Xe.assets)){var ht,Bt=Xe.assets.length;for(ht=0;ht<Bt;ht+=1)Xe.assets[ht].layers&&at(Xe.assets[ht].layers)}}}();function mt(Ct){Ct.__complete||(rt(Ct),Ye(Ct),Ze(Ct),Ke(Ct),ft(Ct),Oe(Ct.layers,Ct.assets),Ne(Ct.chars,Ct.assets),Ct.__complete=!0)}function Et(Ct){Ct.t.a.length===0&&"m"in Ct.t.p}var bt={};return bt.completeData=mt,bt.checkColors=rt,bt.checkChars=Ze,bt.checkPathProperties=Ke,bt.checkShapes=ft,bt.completeLayers=Oe,bt}if(re.dataManager||(re.dataManager=ke()),re.assetLoader||(re.assetLoader=function(){function Oe(ze){var $e=ze.getResponseHeader("content-type");return $e&&ze.responseType==="json"&&$e.indexOf("json")!==-1||ze.response&&_typeof$5(ze.response)==="object"?ze.response:ze.response&&typeof ze.response=="string"?JSON.parse(ze.response):ze.responseText?JSON.parse(ze.responseText):null}function Ne(ze,$e,He,We){var qe,Ye=new XMLHttpRequest;try{Ye.responseType="json"}catch{}Ye.onreadystatechange=function(){if(Ye.readyState===4)if(Ye.status===200)qe=Oe(Ye),He(qe);else try{qe=Oe(Ye),He(qe)}catch(Ze){We&&We(Ze)}};try{Ye.open(["G","E","T"].join(""),ze,!0)}catch{Ye.open(["G","E","T"].join(""),$e+"/"+ze,!0)}Ye.send()}return{load:Ne}}()),Be.data.type==="loadAnimation")re.assetLoader.load(Be.data.path,Be.data.fullPath,function(Oe){re.dataManager.completeData(Oe),re.postMessage({id:Be.data.id,payload:Oe,status:"success"})},function(){re.postMessage({id:Be.data.id,status:"error"})});else if(Be.data.type==="complete"){var Fe=Be.data.animation;re.dataManager.completeData(Fe),re.postMessage({id:Be.data.id,payload:Fe,status:"success"})}else Be.data.type==="loadData"&&re.assetLoader.load(Be.data.path,Be.data.fullPath,function(Oe){re.postMessage({id:Be.data.id,payload:Oe,status:"success"})},function(){re.postMessage({id:Be.data.id,status:"error"})})}),j.onmessage=function(De){var Be=De.data,ke=Be.id,Fe=m[ke];m[ke]=null,Be.status==="success"?Fe.onComplete(Be.payload):Fe.onError&&Fe.onError()})}function ye(De,Be){$+=1;var ke="processId_"+$;return m[ke]={onComplete:De,onError:Be},ke}function Ee(De,Be,ke){ve();var Fe=ye(Be,ke);j.postMessage({type:"loadAnimation",path:De,fullPath:window.location.origin+window.location.pathname,id:Fe})}function Me(De,Be,ke){ve();var Fe=ye(Be,ke);j.postMessage({type:"loadData",path:De,fullPath:window.location.origin+window.location.pathname,id:Fe})}function Ce(De,Be,ke){ve();var Fe=ye(Be,ke);j.postMessage({type:"complete",animation:De,id:Fe})}return{loadAnimation:Ee,loadData:Me,completeAnimation:Ce}}(),ImagePreloader=function(){var $=function(){var Ne=createTag("canvas");Ne.width=1,Ne.height=1;var ze=Ne.getContext("2d");return ze.fillStyle="rgba(0,0,0,0)",ze.fillRect(0,0,1,1),Ne}();function m(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function L(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function j(Ne,ze,$e){var He="";if(Ne.e)He=Ne.p;else if(ze){var We=Ne.p;We.indexOf("images/")!==-1&&(We=We.split("/")[1]),He=ze+We}else He=$e,He+=Ne.u?Ne.u:"",He+=Ne.p;return He}function ee(Ne){var ze=0,$e=setInterval((function(){var He=Ne.getBBox();(He.width||ze>500)&&(this._imageLoaded(),clearInterval($e)),ze+=1}).bind(this),50)}function re(Ne){var ze=j(Ne,this.assetsPath,this.path),$e=createNS("image");isSafari?this.testImageLoaded($e):$e.addEventListener("load",this._imageLoaded,!1),$e.addEventListener("error",(function(){He.img=$,this._imageLoaded()}).bind(this),!1),$e.setAttributeNS("http://www.w3.org/1999/xlink","href",ze),this._elementHelper.append?this._elementHelper.append($e):this._elementHelper.appendChild($e);var He={img:$e,assetData:Ne};return He}function le(Ne){var ze=j(Ne,this.assetsPath,this.path),$e=createTag("img");$e.crossOrigin="anonymous",$e.addEventListener("load",this._imageLoaded,!1),$e.addEventListener("error",(function(){He.img=$,this._imageLoaded()}).bind(this),!1),$e.src=ze;var He={img:$e,assetData:Ne};return He}function ve(Ne){var ze={assetData:Ne},$e=j(Ne,this.assetsPath,this.path);return dataManager.loadData($e,(function(He){ze.img=He,this._footageLoaded()}).bind(this),(function(){ze.img={},this._footageLoaded()}).bind(this)),ze}function ye(Ne,ze){this.imagesLoadedCb=ze;var $e,He=Ne.length;for($e=0;$e<He;$e+=1)Ne[$e].layers||(!Ne[$e].t||Ne[$e].t==="seq"?(this.totalImages+=1,this.images.push(this._createImageData(Ne[$e]))):Ne[$e].t===3&&(this.totalFootages+=1,this.images.push(this.createFootageData(Ne[$e]))))}function Ee(Ne){this.path=Ne||""}function Me(Ne){this.assetsPath=Ne||""}function Ce(Ne){for(var ze=0,$e=this.images.length;ze<$e;){if(this.images[ze].assetData===Ne)return this.images[ze].img;ze+=1}return null}function De(){this.imagesLoadedCb=null,this.images.length=0}function Be(){return this.totalImages===this.loadedAssets}function ke(){return this.totalFootages===this.loadedFootagesCount}function Fe(Ne,ze){Ne==="svg"?(this._elementHelper=ze,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}function Oe(){this._imageLoaded=m.bind(this),this._footageLoaded=L.bind(this),this.testImageLoaded=ee.bind(this),this.createFootageData=ve.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return Oe.prototype={loadAssets:ye,setAssetsPath:Me,setPath:Ee,loadedImages:Be,loadedFootages:ke,destroy:De,getAsset:Ce,createImgData:le,createImageData:re,imageLoaded:m,footageLoaded:L,setCacheType:Fe},Oe}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(m,L){if(this._cbs[m])for(var j=this._cbs[m],ee=0;ee<j.length;ee+=1)j[ee](L)},addEventListener:function(m,L){return this._cbs[m]||(this._cbs[m]=[]),this._cbs[m].push(L),(function(){this.removeEventListener(m,L)}).bind(this)},removeEventListener:function(m,L){if(!L)this._cbs[m]=null;else if(this._cbs[m]){for(var j=0,ee=this._cbs[m].length;j<ee;)this._cbs[m][j]===L&&(this._cbs[m].splice(j,1),j-=1,ee-=1),j+=1;this._cbs[m].length||(this._cbs[m]=null)}}};var markerParser=function(){function $(m){for(var L=m.split(`\r
`),j={},ee,re=0,le=0;le<L.length;le+=1)ee=L[le].split(":"),ee.length===2&&(j[ee[0]]=ee[1].trim(),re+=1);if(re===0)throw new Error;return j}return function(m){for(var L=[],j=0;j<m.length;j+=1){var ee=m[j],re={time:ee.tm,duration:ee.dr};try{re.payload=JSON.parse(m[j].cm)}catch{try{re.payload=$(m[j].cm)}catch{re.payload={name:m[j].cm}}}L.push(re)}return L}}(),ProjectInterface=function(){function $(m){this.compositions.push(m)}return function(){function m(L){for(var j=0,ee=this.compositions.length;j<ee;){if(this.compositions[j].data&&this.compositions[j].data.nm===L)return this.compositions[j].prepareFrame&&this.compositions[j].data.xt&&this.compositions[j].prepareFrame(this.currentFrame),this.compositions[j].compInterface;j+=1}return null}return m.compositions=[],m.currentFrame=0,m.registerComposition=$,m}}(),renderers={},registerRenderer=function(m,L){renderers[m]=L};function getRenderer($){return renderers[$]}function getRegisteredRenderer(){if(renderers.canvas)return"canvas";for(var $ in renderers)if(renderers[$])return $;return""}function _typeof$4($){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$4=function(L){return typeof L}:_typeof$4=function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},_typeof$4($)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0),this.expressionsPlugin=getExpressionsPlugin()};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function($){($.wrapper||$.container)&&(this.wrapper=$.wrapper||$.container);var m="svg";$.animType?m=$.animType:$.renderer&&(m=$.renderer);var L=getRenderer(m);this.renderer=new L(this,$.rendererSettings),this.imagePreloader.setCacheType(m,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=m,$.loop===""||$.loop===null||$.loop===void 0||$.loop===!0?this.loop=!0:$.loop===!1?this.loop=!1:this.loop=parseInt($.loop,10),this.autoplay="autoplay"in $?$.autoplay:!0,this.name=$.name?$.name:"",this.autoloadSegments=Object.prototype.hasOwnProperty.call($,"autoloadSegments")?$.autoloadSegments:!0,this.assetsPath=$.assetsPath,this.initialSegment=$.initialSegment,$.audioFactory&&this.audioController.setAudioFactory($.audioFactory),$.animationData?this.setupAnimation($.animationData):$.path&&($.path.lastIndexOf("\\")!==-1?this.path=$.path.substr(0,$.path.lastIndexOf("\\")+1):this.path=$.path.substr(0,$.path.lastIndexOf("/")+1),this.fileName=$.path.substr($.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation($.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function($){dataManager.completeAnimation($,this.configAnimation)},AnimationItem.prototype.setData=function($,m){m&&_typeof$4(m)!=="object"&&(m=JSON.parse(m));var L={wrapper:$,animationData:m},j=$.attributes;L.path=j.getNamedItem("data-animation-path")?j.getNamedItem("data-animation-path").value:j.getNamedItem("data-bm-path")?j.getNamedItem("data-bm-path").value:j.getNamedItem("bm-path")?j.getNamedItem("bm-path").value:"",L.animType=j.getNamedItem("data-anim-type")?j.getNamedItem("data-anim-type").value:j.getNamedItem("data-bm-type")?j.getNamedItem("data-bm-type").value:j.getNamedItem("bm-type")?j.getNamedItem("bm-type").value:j.getNamedItem("data-bm-renderer")?j.getNamedItem("data-bm-renderer").value:j.getNamedItem("bm-renderer")?j.getNamedItem("bm-renderer").value:getRegisteredRenderer()||"canvas";var ee=j.getNamedItem("data-anim-loop")?j.getNamedItem("data-anim-loop").value:j.getNamedItem("data-bm-loop")?j.getNamedItem("data-bm-loop").value:j.getNamedItem("bm-loop")?j.getNamedItem("bm-loop").value:"";ee==="false"?L.loop=!1:ee==="true"?L.loop=!0:ee!==""&&(L.loop=parseInt(ee,10));var re=j.getNamedItem("data-anim-autoplay")?j.getNamedItem("data-anim-autoplay").value:j.getNamedItem("data-bm-autoplay")?j.getNamedItem("data-bm-autoplay").value:j.getNamedItem("bm-autoplay")?j.getNamedItem("bm-autoplay").value:!0;L.autoplay=re!=="false",L.name=j.getNamedItem("data-name")?j.getNamedItem("data-name").value:j.getNamedItem("data-bm-name")?j.getNamedItem("data-bm-name").value:j.getNamedItem("bm-name")?j.getNamedItem("bm-name").value:"";var le=j.getNamedItem("data-anim-prerender")?j.getNamedItem("data-anim-prerender").value:j.getNamedItem("data-bm-prerender")?j.getNamedItem("data-bm-prerender").value:j.getNamedItem("bm-prerender")?j.getNamedItem("bm-prerender").value:"";le==="false"&&(L.prerender=!1),L.path?this.setParams(L):this.trigger("destroy")},AnimationItem.prototype.includeLayers=function($){$.op>this.animationData.op&&(this.animationData.op=$.op,this.totalFrames=Math.floor($.op-this.animationData.ip));var m=this.animationData.layers,L,j=m.length,ee=$.layers,re,le=ee.length;for(re=0;re<le;re+=1)for(L=0;L<j;){if(m[L].id===ee[re].id){m[L]=ee[re];break}L+=1}if(($.chars||$.fonts)&&(this.renderer.globalData.fontManager.addChars($.chars),this.renderer.globalData.fontManager.addFonts($.fonts,this.renderer.globalData.defs)),$.assets)for(j=$.assets.length,L=0;L<j;L+=1)this.animationData.assets.push($.assets[L]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function($){this.animationData=$;var m=getExpressionsPlugin();m&&m.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var $=this.animationData.segments;if(!$||$.length===0||!this.autoloadSegments){this.trigger("data_ready"),this.timeCompleted=this.totalFrames;return}var m=$.shift();this.timeCompleted=m.time*this.frameRate;var L=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(L,this.includeLayers.bind(this),(function(){this.trigger("data_failed")}).bind(this))},AnimationItem.prototype.loadSegments=function(){var $=this.animationData.segments;$||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function($){if(this.renderer)try{this.animationData=$,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation($),$.assets||($.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions($.assets),this.markers=markerParser($.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(m){this.triggerConfigError(m)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||this.renderer.rendererType!=="canvas")&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var $=getExpressionsPlugin();$&&$.initExpressions(this),this.renderer.initItems(),setTimeout((function(){this.trigger("DOMLoaded")}).bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function($,m){var L=typeof $=="number"?$:void 0,j=typeof m=="number"?m:void 0;this.renderer.updateContainerSize(L,j)},AnimationItem.prototype.setSubframe=function($){this.isSubframeEnabled=!!$},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(!(this.isLoaded===!1||!this.renderer))try{this.expressionsPlugin&&this.expressionsPlugin.resetFrame(),this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch($){this.triggerRenderFrameError($)}},AnimationItem.prototype.play=function($){$&&this.name!==$||this.isPaused===!0&&(this.isPaused=!1,this.trigger("_play"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function($){$&&this.name!==$||this.isPaused===!1&&(this.isPaused=!0,this.trigger("_pause"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function($){$&&this.name!==$||(this.isPaused===!0?this.play():this.pause())},AnimationItem.prototype.stop=function($){$&&this.name!==$||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function($){for(var m,L=0;L<this.markers.length;L+=1)if(m=this.markers[L],m.payload&&m.payload.name===$)return m;return null},AnimationItem.prototype.goToAndStop=function($,m,L){if(!(L&&this.name!==L)){var j=Number($);if(isNaN(j)){var ee=this.getMarkerData($);ee&&this.goToAndStop(ee.time,!0)}else m?this.setCurrentRawFrameValue($):this.setCurrentRawFrameValue($*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function($,m,L){if(!(L&&this.name!==L)){var j=Number($);if(isNaN(j)){var ee=this.getMarkerData($);ee&&(ee.duration?this.playSegments([ee.time,ee.time+ee.duration],!0):this.goToAndStop(ee.time,!0))}else this.goToAndStop(j,m,L);this.play()}},AnimationItem.prototype.advanceTime=function($){if(!(this.isPaused===!0||this.isLoaded===!1)){var m=this.currentRawFrame+$*this.frameModifier,L=!1;m>=this.totalFrames-1&&this.frameModifier>0?!this.loop||this.playCount===this.loop?this.checkSegments(m>this.totalFrames?m%this.totalFrames:0)||(L=!0,m=this.totalFrames-1):m>=this.totalFrames?(this.playCount+=1,this.checkSegments(m%this.totalFrames)||(this.setCurrentRawFrameValue(m%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(m):m<0?this.checkSegments(m%this.totalFrames)||(this.loop&&!(this.playCount--<=0&&this.loop!==!0)?(this.setCurrentRawFrameValue(this.totalFrames+m%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0):(L=!0,m=0)):this.setCurrentRawFrameValue(m),L&&(this.setCurrentRawFrameValue(m),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function($,m){this.playCount=0,$[1]<$[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=$[0]-$[1],this.timeCompleted=this.totalFrames,this.firstFrame=$[1],this.setCurrentRawFrameValue(this.totalFrames-.001-m)):$[1]>$[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=$[1]-$[0],this.timeCompleted=this.totalFrames,this.firstFrame=$[0],this.setCurrentRawFrameValue(.001+m)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function($,m){var L=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<$?L=$:this.currentRawFrame+this.firstFrame>m&&(L=m-$)),this.firstFrame=$,this.totalFrames=m-$,this.timeCompleted=this.totalFrames,L!==-1&&this.goToAndStop(L,!0)},AnimationItem.prototype.playSegments=function($,m){if(m&&(this.segments.length=0),_typeof$4($[0])==="object"){var L,j=$.length;for(L=0;L<j;L+=1)this.segments.push($[L])}else this.segments.push($);this.segments.length&&m&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function($){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),$&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function($){return this.segments.length?(this.adjustSegment(this.segments.shift(),$),!0):!1},AnimationItem.prototype.destroy=function($){$&&this.name!==$||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.expressionsPlugin=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function($){this.currentRawFrame=$,this.gotoFrame()},AnimationItem.prototype.setSpeed=function($){this.playSpeed=$,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function($){this.playDirection=$<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setLoop=function($){this.loop=$},AnimationItem.prototype.setVolume=function($,m){m&&this.name!==m||this.audioController.setVolume($)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function($){$&&this.name!==$||this.audioController.mute()},AnimationItem.prototype.unmute=function($){$&&this.name!==$||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function($){var m="";if($.e)m=$.p;else if(this.assetsPath){var L=$.p;L.indexOf("images/")!==-1&&(L=L.split("/")[1]),m=this.assetsPath+L}else m=this.path,m+=$.u?$.u:"",m+=$.p;return m},AnimationItem.prototype.getAssetData=function($){for(var m=0,L=this.assets.length;m<L;){if($===this.assets[m].id)return this.assets[m];m+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function($){return $?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function($,m,L){try{var j=this.renderer.getElementByPath($);j.updateDocumentData(m,L)}catch{}},AnimationItem.prototype.trigger=function($){if(this._cbs&&this._cbs[$])switch($){case"enterFrame":this.triggerEvent($,new BMEnterFrameEvent($,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent($,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent($,new BMCompleteLoopEvent($,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent($,new BMCompleteEvent($,this.frameMult));break;case"segmentStart":this.triggerEvent($,new BMSegmentStartEvent($,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent($,new BMDestroyEvent($,this));break;default:this.triggerEvent($)}$==="enterFrame"&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent($,this.currentFrame,this.totalFrames,this.frameMult)),$==="loopComplete"&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent($,this.loop,this.playCount,this.frameMult)),$==="complete"&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent($,this.frameMult)),$==="segmentStart"&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent($,this.firstFrame,this.totalFrames)),$==="destroy"&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent($,this))},AnimationItem.prototype.triggerRenderFrameError=function($){var m=new BMRenderFrameErrorEvent($,this.currentFrame);this.triggerEvent("error",m),this.onError&&this.onError.call(this,m)},AnimationItem.prototype.triggerConfigError=function($){var m=new BMConfigErrorEvent($,this.currentFrame);this.triggerEvent("error",m),this.onError&&this.onError.call(this,m)};var animationManager=function(){var $={},m=[],L=0,j=0,ee=0,re=!0,le=!1;function ve(st){for(var at=0,Xe=st.target;at<j;)m[at].animation===Xe&&(m.splice(at,1),at-=1,j-=1,Xe.isPaused||Ce()),at+=1}function ye(st,at){if(!st)return null;for(var Xe=0;Xe<j;){if(m[Xe].elem===st&&m[Xe].elem!==null)return m[Xe].animation;Xe+=1}var ht=new AnimationItem;return De(ht,st),ht.setData(st,at),ht}function Ee(){var st,at=m.length,Xe=[];for(st=0;st<at;st+=1)Xe.push(m[st].animation);return Xe}function Me(){ee+=1,rt()}function Ce(){ee-=1}function De(st,at){st.addEventListener("destroy",ve),st.addEventListener("_active",Me),st.addEventListener("_idle",Ce),m.push({elem:at,animation:st}),j+=1}function Be(st){var at=new AnimationItem;return De(at,null),at.setParams(st),at}function ke(st,at){var Xe;for(Xe=0;Xe<j;Xe+=1)m[Xe].animation.setSpeed(st,at)}function Fe(st,at){var Xe;for(Xe=0;Xe<j;Xe+=1)m[Xe].animation.setDirection(st,at)}function Oe(st){var at;for(at=0;at<j;at+=1)m[at].animation.play(st)}function Ne(st){var at=st-L,Xe;for(Xe=0;Xe<j;Xe+=1)m[Xe].animation.advanceTime(at);L=st,ee&&!le?window.requestAnimationFrame(Ne):re=!0}function ze(st){L=st,window.requestAnimationFrame(Ne)}function $e(st){var at;for(at=0;at<j;at+=1)m[at].animation.pause(st)}function He(st,at,Xe){var ht;for(ht=0;ht<j;ht+=1)m[ht].animation.goToAndStop(st,at,Xe)}function We(st){var at;for(at=0;at<j;at+=1)m[at].animation.stop(st)}function qe(st){var at;for(at=0;at<j;at+=1)m[at].animation.togglePause(st)}function Ye(st){var at;for(at=j-1;at>=0;at-=1)m[at].animation.destroy(st)}function Ze(st,at,Xe){var ht=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),Bt,Dt=ht.length;for(Bt=0;Bt<Dt;Bt+=1)Xe&&ht[Bt].setAttribute("data-bm-type",Xe),ye(ht[Bt],st);if(at&&Dt===0){Xe||(Xe="svg");var Jt=document.getElementsByTagName("body")[0];Jt.innerText="";var tn=createTag("div");tn.style.width="100%",tn.style.height="100%",tn.setAttribute("data-bm-type",Xe),Jt.appendChild(tn),ye(tn,st)}}function Ke(){var st;for(st=0;st<j;st+=1)m[st].animation.resize()}function rt(){!le&&ee&&re&&(window.requestAnimationFrame(ze),re=!1)}function ft(){le=!0}function mt(){le=!1,rt()}function Et(st,at){var Xe;for(Xe=0;Xe<j;Xe+=1)m[Xe].animation.setVolume(st,at)}function bt(st){var at;for(at=0;at<j;at+=1)m[at].animation.mute(st)}function Ct(st){var at;for(at=0;at<j;at+=1)m[at].animation.unmute(st)}return $.registerAnimation=ye,$.loadAnimation=Be,$.setSpeed=ke,$.setDirection=Fe,$.play=Oe,$.pause=$e,$.stop=We,$.togglePause=qe,$.searchAnimations=Ze,$.resize=Ke,$.goToAndStop=He,$.destroy=Ye,$.freeze=ft,$.unfreeze=mt,$.setVolume=Et,$.mute=bt,$.unmute=Ct,$.getRegisteredAnimations=Ee,$}(),BezierFactory=function(){var $={};$.getBezierEasing=L;var m={};function L(ze,$e,He,We,qe){var Ye=qe||("bez_"+ze+"_"+$e+"_"+He+"_"+We).replace(/\./g,"p");if(m[Ye])return m[Ye];var Ze=new Ne([ze,$e,He,We]);return m[Ye]=Ze,Ze}var j=4,ee=.001,re=1e-7,le=10,ve=11,ye=1/(ve-1),Ee=typeof Float32Array=="function";function Me(ze,$e){return 1-3*$e+3*ze}function Ce(ze,$e){return 3*$e-6*ze}function De(ze){return 3*ze}function Be(ze,$e,He){return((Me($e,He)*ze+Ce($e,He))*ze+De($e))*ze}function ke(ze,$e,He){return 3*Me($e,He)*ze*ze+2*Ce($e,He)*ze+De($e)}function Fe(ze,$e,He,We,qe){var Ye,Ze,Ke=0;do Ze=$e+(He-$e)/2,Ye=Be(Ze,We,qe)-ze,Ye>0?He=Ze:$e=Ze;while(Math.abs(Ye)>re&&++Ke<le);return Ze}function Oe(ze,$e,He,We){for(var qe=0;qe<j;++qe){var Ye=ke($e,He,We);if(Ye===0)return $e;var Ze=Be($e,He,We)-ze;$e-=Ze/Ye}return $e}function Ne(ze){this._p=ze,this._mSampleValues=Ee?new Float32Array(ve):new Array(ve),this._precomputed=!1,this.get=this.get.bind(this)}return Ne.prototype={get:function($e){var He=this._p[0],We=this._p[1],qe=this._p[2],Ye=this._p[3];return this._precomputed||this._precompute(),He===We&&qe===Ye?$e:$e===0?0:$e===1?1:Be(this._getTForX($e),We,Ye)},_precompute:function(){var $e=this._p[0],He=this._p[1],We=this._p[2],qe=this._p[3];this._precomputed=!0,($e!==He||We!==qe)&&this._calcSampleValues()},_calcSampleValues:function(){for(var $e=this._p[0],He=this._p[2],We=0;We<ve;++We)this._mSampleValues[We]=Be(We*ye,$e,He)},_getTForX:function($e){for(var He=this._p[0],We=this._p[2],qe=this._mSampleValues,Ye=0,Ze=1,Ke=ve-1;Ze!==Ke&&qe[Ze]<=$e;++Ze)Ye+=ye;--Ze;var rt=($e-qe[Ze])/(qe[Ze+1]-qe[Ze]),ft=Ye+rt*ye,mt=ke(ft,He,We);return mt>=ee?Oe($e,ft,He,We):mt===0?ft:Fe($e,Ye,Ye+ye,He,We)}},$}(),pooling=function(){function $(m){return m.concat(createSizedArray(m.length))}return{double:$}}(),poolFactory=function(){return function($,m,L){var j=0,ee=$,re=createSizedArray(ee),le={newElement:ve,release:ye};function ve(){var Ee;return j?(j-=1,Ee=re[j]):Ee=m(),Ee}function ye(Ee){j===ee&&(re=pooling.double(re),ee*=2),L&&L(Ee),re[j]=Ee,j+=1}return le}}(),bezierLengthPool=function(){function $(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}}return poolFactory(8,$)}(),segmentsLengthPool=function(){function $(){return{lengths:[],totalLength:0}}function m(L){var j,ee=L.lengths.length;for(j=0;j<ee;j+=1)bezierLengthPool.release(L.lengths[j]);L.lengths.length=0}return poolFactory(8,$,m)}();function bezFunction(){var $=Math;function m(De,Be,ke,Fe,Oe,Ne){var ze=De*Fe+Be*Oe+ke*Ne-Oe*Fe-Ne*De-ke*Be;return ze>-.001&&ze<.001}function L(De,Be,ke,Fe,Oe,Ne,ze,$e,He){if(ke===0&&Ne===0&&He===0)return m(De,Be,Fe,Oe,ze,$e);var We=$.sqrt($.pow(Fe-De,2)+$.pow(Oe-Be,2)+$.pow(Ne-ke,2)),qe=$.sqrt($.pow(ze-De,2)+$.pow($e-Be,2)+$.pow(He-ke,2)),Ye=$.sqrt($.pow(ze-Fe,2)+$.pow($e-Oe,2)+$.pow(He-Ne,2)),Ze;return We>qe?We>Ye?Ze=We-qe-Ye:Ze=Ye-qe-We:Ye>qe?Ze=Ye-qe-We:Ze=qe-We-Ye,Ze>-1e-4&&Ze<1e-4}var j=function(){return function(De,Be,ke,Fe){var Oe=getDefaultCurveSegments(),Ne,ze,$e,He,We,qe=0,Ye,Ze=[],Ke=[],rt=bezierLengthPool.newElement();for($e=ke.length,Ne=0;Ne<Oe;Ne+=1){for(We=Ne/(Oe-1),Ye=0,ze=0;ze<$e;ze+=1)He=bmPow(1-We,3)*De[ze]+3*bmPow(1-We,2)*We*ke[ze]+3*(1-We)*bmPow(We,2)*Fe[ze]+bmPow(We,3)*Be[ze],Ze[ze]=He,Ke[ze]!==null&&(Ye+=bmPow(Ze[ze]-Ke[ze],2)),Ke[ze]=Ze[ze];Ye&&(Ye=bmSqrt(Ye),qe+=Ye),rt.percents[Ne]=We,rt.lengths[Ne]=qe}return rt.addedLength=qe,rt}}();function ee(De){var Be=segmentsLengthPool.newElement(),ke=De.c,Fe=De.v,Oe=De.o,Ne=De.i,ze,$e=De._length,He=Be.lengths,We=0;for(ze=0;ze<$e-1;ze+=1)He[ze]=j(Fe[ze],Fe[ze+1],Oe[ze],Ne[ze+1]),We+=He[ze].addedLength;return ke&&$e&&(He[ze]=j(Fe[ze],Fe[0],Oe[ze],Ne[0]),We+=He[ze].addedLength),Be.totalLength=We,Be}function re(De){this.segmentLength=0,this.points=new Array(De)}function le(De,Be){this.partialLength=De,this.point=Be}var ve=function(){var De={};return function(Be,ke,Fe,Oe){var Ne=(Be[0]+"_"+Be[1]+"_"+ke[0]+"_"+ke[1]+"_"+Fe[0]+"_"+Fe[1]+"_"+Oe[0]+"_"+Oe[1]).replace(/\./g,"p");if(!De[Ne]){var ze=getDefaultCurveSegments(),$e,He,We,qe,Ye,Ze=0,Ke,rt,ft=null;Be.length===2&&(Be[0]!==ke[0]||Be[1]!==ke[1])&&m(Be[0],Be[1],ke[0],ke[1],Be[0]+Fe[0],Be[1]+Fe[1])&&m(Be[0],Be[1],ke[0],ke[1],ke[0]+Oe[0],ke[1]+Oe[1])&&(ze=2);var mt=new re(ze);for(We=Fe.length,$e=0;$e<ze;$e+=1){for(rt=createSizedArray(We),Ye=$e/(ze-1),Ke=0,He=0;He<We;He+=1)qe=bmPow(1-Ye,3)*Be[He]+3*bmPow(1-Ye,2)*Ye*(Be[He]+Fe[He])+3*(1-Ye)*bmPow(Ye,2)*(ke[He]+Oe[He])+bmPow(Ye,3)*ke[He],rt[He]=qe,ft!==null&&(Ke+=bmPow(rt[He]-ft[He],2));Ke=bmSqrt(Ke),Ze+=Ke,mt.points[$e]=new le(Ke,rt),ft=rt}mt.segmentLength=Ze,De[Ne]=mt}return De[Ne]}}();function ye(De,Be){var ke=Be.percents,Fe=Be.lengths,Oe=ke.length,Ne=bmFloor((Oe-1)*De),ze=De*Be.addedLength,$e=0;if(Ne===Oe-1||Ne===0||ze===Fe[Ne])return ke[Ne];for(var He=Fe[Ne]>ze?-1:1,We=!0;We;)if(Fe[Ne]<=ze&&Fe[Ne+1]>ze?($e=(ze-Fe[Ne])/(Fe[Ne+1]-Fe[Ne]),We=!1):Ne+=He,Ne<0||Ne>=Oe-1){if(Ne===Oe-1)return ke[Ne];We=!1}return ke[Ne]+(ke[Ne+1]-ke[Ne])*$e}function Ee(De,Be,ke,Fe,Oe,Ne){var ze=ye(Oe,Ne),$e=1-ze,He=$.round(($e*$e*$e*De[0]+(ze*$e*$e+$e*ze*$e+$e*$e*ze)*ke[0]+(ze*ze*$e+$e*ze*ze+ze*$e*ze)*Fe[0]+ze*ze*ze*Be[0])*1e3)/1e3,We=$.round(($e*$e*$e*De[1]+(ze*$e*$e+$e*ze*$e+$e*$e*ze)*ke[1]+(ze*ze*$e+$e*ze*ze+ze*$e*ze)*Fe[1]+ze*ze*ze*Be[1])*1e3)/1e3;return[He,We]}var Me=createTypedArray("float32",8);function Ce(De,Be,ke,Fe,Oe,Ne,ze){Oe<0?Oe=0:Oe>1&&(Oe=1);var $e=ye(Oe,ze);Ne=Ne>1?1:Ne;var He=ye(Ne,ze),We,qe=De.length,Ye=1-$e,Ze=1-He,Ke=Ye*Ye*Ye,rt=$e*Ye*Ye*3,ft=$e*$e*Ye*3,mt=$e*$e*$e,Et=Ye*Ye*Ze,bt=$e*Ye*Ze+Ye*$e*Ze+Ye*Ye*He,Ct=$e*$e*Ze+Ye*$e*He+$e*Ye*He,st=$e*$e*He,at=Ye*Ze*Ze,Xe=$e*Ze*Ze+Ye*He*Ze+Ye*Ze*He,ht=$e*He*Ze+Ye*He*He+$e*Ze*He,Bt=$e*He*He,Dt=Ze*Ze*Ze,Jt=He*Ze*Ze+Ze*He*Ze+Ze*Ze*He,tn=He*He*Ze+Ze*He*He+He*Ze*He,zt=He*He*He;for(We=0;We<qe;We+=1)Me[We*4]=$.round((Ke*De[We]+rt*ke[We]+ft*Fe[We]+mt*Be[We])*1e3)/1e3,Me[We*4+1]=$.round((Et*De[We]+bt*ke[We]+Ct*Fe[We]+st*Be[We])*1e3)/1e3,Me[We*4+2]=$.round((at*De[We]+Xe*ke[We]+ht*Fe[We]+Bt*Be[We])*1e3)/1e3,Me[We*4+3]=$.round((Dt*De[We]+Jt*ke[We]+tn*Fe[We]+zt*Be[We])*1e3)/1e3;return Me}return{getSegmentsLength:ee,getNewSegment:Ce,getPointInSegment:Ee,buildBezierData:ve,pointOnLine2D:m,pointOnLine3D:L}}var bez=bezFunction(),initFrame=initialDefaultFrame,mathAbs=Math.abs;function interpolateValue($,m){var L=this.offsetTime,j;this.propType==="multidimensional"&&(j=createTypedArray("float32",this.pv.length));for(var ee=m.lastIndex,re=ee,le=this.keyframes.length-1,ve=!0,ye,Ee,Me;ve;){if(ye=this.keyframes[re],Ee=this.keyframes[re+1],re===le-1&&$>=Ee.t-L){ye.h&&(ye=Ee),ee=0;break}if(Ee.t-L>$){ee=re;break}re<le-1?re+=1:(ee=0,ve=!1)}Me=this.keyframesMetadata[re]||{};var Ce,De,Be,ke,Fe,Oe,Ne=Ee.t-L,ze=ye.t-L,$e;if(ye.to){Me.bezierData||(Me.bezierData=bez.buildBezierData(ye.s,Ee.s||ye.e,ye.to,ye.ti));var He=Me.bezierData;if($>=Ne||$<ze){var We=$>=Ne?He.points.length-1:0;for(De=He.points[We].point.length,Ce=0;Ce<De;Ce+=1)j[Ce]=He.points[We].point[Ce]}else{Me.__fnct?Oe=Me.__fnct:(Oe=BezierFactory.getBezierEasing(ye.o.x,ye.o.y,ye.i.x,ye.i.y,ye.n).get,Me.__fnct=Oe),Be=Oe(($-ze)/(Ne-ze));var qe=He.segmentLength*Be,Ye,Ze=m.lastFrame<$&&m._lastKeyframeIndex===re?m._lastAddedLength:0;for(Fe=m.lastFrame<$&&m._lastKeyframeIndex===re?m._lastPoint:0,ve=!0,ke=He.points.length;ve;){if(Ze+=He.points[Fe].partialLength,qe===0||Be===0||Fe===He.points.length-1){for(De=He.points[Fe].point.length,Ce=0;Ce<De;Ce+=1)j[Ce]=He.points[Fe].point[Ce];break}else if(qe>=Ze&&qe<Ze+He.points[Fe+1].partialLength){for(Ye=(qe-Ze)/He.points[Fe+1].partialLength,De=He.points[Fe].point.length,Ce=0;Ce<De;Ce+=1)j[Ce]=He.points[Fe].point[Ce]+(He.points[Fe+1].point[Ce]-He.points[Fe].point[Ce])*Ye;break}Fe<ke-1?Fe+=1:ve=!1}m._lastPoint=Fe,m._lastAddedLength=Ze-He.points[Fe].partialLength,m._lastKeyframeIndex=re}}else{var Ke,rt,ft,mt,Et;if(le=ye.s.length,$e=Ee.s||ye.e,this.sh&&ye.h!==1)if($>=Ne)j[0]=$e[0],j[1]=$e[1],j[2]=$e[2];else if($<=ze)j[0]=ye.s[0],j[1]=ye.s[1],j[2]=ye.s[2];else{var bt=createQuaternion(ye.s),Ct=createQuaternion($e),st=($-ze)/(Ne-ze);quaternionToEuler(j,slerp(bt,Ct,st))}else for(re=0;re<le;re+=1)ye.h!==1&&($>=Ne?Be=1:$<ze?Be=0:(ye.o.x.constructor===Array?(Me.__fnct||(Me.__fnct=[]),Me.__fnct[re]?Oe=Me.__fnct[re]:(Ke=ye.o.x[re]===void 0?ye.o.x[0]:ye.o.x[re],rt=ye.o.y[re]===void 0?ye.o.y[0]:ye.o.y[re],ft=ye.i.x[re]===void 0?ye.i.x[0]:ye.i.x[re],mt=ye.i.y[re]===void 0?ye.i.y[0]:ye.i.y[re],Oe=BezierFactory.getBezierEasing(Ke,rt,ft,mt).get,Me.__fnct[re]=Oe)):Me.__fnct?Oe=Me.__fnct:(Ke=ye.o.x,rt=ye.o.y,ft=ye.i.x,mt=ye.i.y,Oe=BezierFactory.getBezierEasing(Ke,rt,ft,mt).get,ye.keyframeMetadata=Oe),Be=Oe(($-ze)/(Ne-ze)))),$e=Ee.s||ye.e,Et=ye.h===1?ye.s[re]:ye.s[re]+($e[re]-ye.s[re])*Be,this.propType==="multidimensional"?j[re]=Et:j=Et}return m.lastIndex=ee,j}function slerp($,m,L){var j=[],ee=$[0],re=$[1],le=$[2],ve=$[3],ye=m[0],Ee=m[1],Me=m[2],Ce=m[3],De,Be,ke,Fe,Oe;return Be=ee*ye+re*Ee+le*Me+ve*Ce,Be<0&&(Be=-Be,ye=-ye,Ee=-Ee,Me=-Me,Ce=-Ce),1-Be>1e-6?(De=Math.acos(Be),ke=Math.sin(De),Fe=Math.sin((1-L)*De)/ke,Oe=Math.sin(L*De)/ke):(Fe=1-L,Oe=L),j[0]=Fe*ee+Oe*ye,j[1]=Fe*re+Oe*Ee,j[2]=Fe*le+Oe*Me,j[3]=Fe*ve+Oe*Ce,j}function quaternionToEuler($,m){var L=m[0],j=m[1],ee=m[2],re=m[3],le=Math.atan2(2*j*re-2*L*ee,1-2*j*j-2*ee*ee),ve=Math.asin(2*L*j+2*ee*re),ye=Math.atan2(2*L*re-2*j*ee,1-2*L*L-2*ee*ee);$[0]=le/degToRads,$[1]=ve/degToRads,$[2]=ye/degToRads}function createQuaternion($){var m=$[0]*degToRads,L=$[1]*degToRads,j=$[2]*degToRads,ee=Math.cos(m/2),re=Math.cos(L/2),le=Math.cos(j/2),ve=Math.sin(m/2),ye=Math.sin(L/2),Ee=Math.sin(j/2),Me=ee*re*le-ve*ye*Ee,Ce=ve*ye*le+ee*re*Ee,De=ve*re*le+ee*ye*Ee,Be=ee*ye*le-ve*re*Ee;return[Ce,De,Be,Me]}function getValueAtCurrentTime(){var $=this.comp.renderedFrame-this.offsetTime,m=this.keyframes[0].t-this.offsetTime,L=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!($===this._caching.lastFrame||this._caching.lastFrame!==initFrame&&(this._caching.lastFrame>=L&&$>=L||this._caching.lastFrame<m&&$<m))){this._caching.lastFrame>=$&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var j=this.interpolateValue($,this._caching);this.pv=j}return this._caching.lastFrame=$,this.pv}function setVValue($){var m;if(this.propType==="unidimensional")m=$*this.mult,mathAbs(this.v-m)>1e-5&&(this.v=m,this._mdf=!0);else for(var L=0,j=this.v.length;L<j;)m=$[L]*this.mult,mathAbs(this.v[L]-m)>1e-5&&(this.v[L]=m,this._mdf=!0),L+=1}function processEffectsSequence(){if(!(this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)){if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=this._isFirstFrame;var $,m=this.effectsSequence.length,L=this.kf?this.pv:this.data.k;for($=0;$<m;$+=1)L=this.effectsSequence[$](L);this.setVValue(L),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function addEffect($){this.effectsSequence.push($),this.container.addDynamicProperty(this)}function ValueProperty($,m,L,j){this.propType="unidimensional",this.mult=L||1,this.data=m,this.v=L?m.k*L:m.k,this.pv=m.k,this._mdf=!1,this.elem=$,this.container=j,this.comp=$.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function MultiDimensionalProperty($,m,L,j){this.propType="multidimensional",this.mult=L||1,this.data=m,this._mdf=!1,this.elem=$,this.container=j,this.comp=$.comp,this.k=!1,this.kf=!1,this.frameId=-1;var ee,re=m.k.length;for(this.v=createTypedArray("float32",re),this.pv=createTypedArray("float32",re),this.vel=createTypedArray("float32",re),ee=0;ee<re;ee+=1)this.v[ee]=m.k[ee]*this.mult,this.pv[ee]=m.k[ee];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function KeyframedValueProperty($,m,L,j){this.propType="unidimensional",this.keyframes=m.k,this.keyframesMetadata=[],this.offsetTime=$.data.st,this.frameId=-1,this._caching={lastFrame:initFrame,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=m,this.mult=L||1,this.elem=$,this.container=j,this.comp=$.comp,this.v=initFrame,this.pv=initFrame,this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.addEffect=addEffect}function KeyframedMultidimensionalProperty($,m,L,j){this.propType="multidimensional";var ee,re=m.k.length,le,ve,ye,Ee;for(ee=0;ee<re-1;ee+=1)m.k[ee].to&&m.k[ee].s&&m.k[ee+1]&&m.k[ee+1].s&&(le=m.k[ee].s,ve=m.k[ee+1].s,ye=m.k[ee].to,Ee=m.k[ee].ti,(le.length===2&&!(le[0]===ve[0]&&le[1]===ve[1])&&bez.pointOnLine2D(le[0],le[1],ve[0],ve[1],le[0]+ye[0],le[1]+ye[1])&&bez.pointOnLine2D(le[0],le[1],ve[0],ve[1],ve[0]+Ee[0],ve[1]+Ee[1])||le.length===3&&!(le[0]===ve[0]&&le[1]===ve[1]&&le[2]===ve[2])&&bez.pointOnLine3D(le[0],le[1],le[2],ve[0],ve[1],ve[2],le[0]+ye[0],le[1]+ye[1],le[2]+ye[2])&&bez.pointOnLine3D(le[0],le[1],le[2],ve[0],ve[1],ve[2],ve[0]+Ee[0],ve[1]+Ee[1],ve[2]+Ee[2]))&&(m.k[ee].to=null,m.k[ee].ti=null),le[0]===ve[0]&&le[1]===ve[1]&&ye[0]===0&&ye[1]===0&&Ee[0]===0&&Ee[1]===0&&(le.length===2||le[2]===ve[2]&&ye[2]===0&&Ee[2]===0)&&(m.k[ee].to=null,m.k[ee].ti=null));this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.data=m,this.keyframes=m.k,this.keyframesMetadata=[],this.offsetTime=$.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=L||1,this.elem=$,this.container=j,this.comp=$.comp,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.frameId=-1;var Me=m.k[0].s.length;for(this.v=createTypedArray("float32",Me),this.pv=createTypedArray("float32",Me),ee=0;ee<Me;ee+=1)this.v[ee]=initFrame,this.pv[ee]=initFrame;this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray("float32",Me)},this.addEffect=addEffect}var PropertyFactory=function(){function $(L,j,ee,re,le){j.sid&&(j=L.globalData.slotManager.getProp(j));var ve;if(!j.k.length)ve=new ValueProperty(L,j,re,le);else if(typeof j.k[0]=="number")ve=new MultiDimensionalProperty(L,j,re,le);else switch(ee){case 0:ve=new KeyframedValueProperty(L,j,re,le);break;case 1:ve=new KeyframedMultidimensionalProperty(L,j,re,le);break}return ve.effectsSequence.length&&le.addDynamicProperty(ve),ve}var m={getProp:$};return m}();function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(m){this.dynamicProperties.indexOf(m)===-1&&(this.dynamicProperties.push(m),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){this._mdf=!1;var m,L=this.dynamicProperties.length;for(m=0;m<L;m+=1)this.dynamicProperties[m].getValue(),this.dynamicProperties[m]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(m){this.container=m,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=function(){function $(){return createTypedArray("float32",2)}return poolFactory(8,$)}();function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function($,m){this.c=$,this.setLength(m);for(var L=0;L<m;)this.v[L]=pointPool.newElement(),this.o[L]=pointPool.newElement(),this.i[L]=pointPool.newElement(),L+=1},ShapePath.prototype.setLength=function($){for(;this._maxLength<$;)this.doubleArrayLength();this._length=$},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function($,m,L,j,ee){var re;switch(this._length=Math.max(this._length,j+1),this._length>=this._maxLength&&this.doubleArrayLength(),L){case"v":re=this.v;break;case"i":re=this.i;break;case"o":re=this.o;break;default:re=[];break}(!re[j]||re[j]&&!ee)&&(re[j]=pointPool.newElement()),re[j][0]=$,re[j][1]=m},ShapePath.prototype.setTripleAt=function($,m,L,j,ee,re,le,ve){this.setXYAt($,m,"v",le,ve),this.setXYAt(L,j,"o",le,ve),this.setXYAt(ee,re,"i",le,ve)},ShapePath.prototype.reverse=function(){var $=new ShapePath;$.setPathData(this.c,this._length);var m=this.v,L=this.o,j=this.i,ee=0;this.c&&($.setTripleAt(m[0][0],m[0][1],j[0][0],j[0][1],L[0][0],L[0][1],0,!1),ee=1);var re=this._length-1,le=this._length,ve;for(ve=ee;ve<le;ve+=1)$.setTripleAt(m[re][0],m[re][1],j[re][0],j[re][1],L[re][0],L[re][1],ve,!1),re-=1;return $},ShapePath.prototype.length=function(){return this._length};var shapePool=function(){function $(){return new ShapePath}function m(ee){var re=ee._length,le;for(le=0;le<re;le+=1)pointPool.release(ee.v[le]),pointPool.release(ee.i[le]),pointPool.release(ee.o[le]),ee.v[le]=null,ee.i[le]=null,ee.o[le]=null;ee._length=0,ee.c=!1}function L(ee){var re=j.newElement(),le,ve=ee._length===void 0?ee.v.length:ee._length;for(re.setLength(ve),re.c=ee.c,le=0;le<ve;le+=1)re.setTripleAt(ee.v[le][0],ee.v[le][1],ee.o[le][0],ee.o[le][1],ee.i[le][0],ee.i[le][1],le);return re}var j=poolFactory(4,$,m);return j.clone=L,j}();function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function($){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=$,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var $;for($=0;$<this._length;$+=1)shapePool.release(this.shapes[$]);this._length=0};var shapeCollectionPool=function(){var $={newShapeCollection:ee,release:re},m=0,L=4,j=createSizedArray(L);function ee(){var le;return m?(m-=1,le=j[m]):le=new ShapeCollection,le}function re(le){var ve,ye=le._length;for(ve=0;ve<ye;ve+=1)shapePool.release(le.shapes[ve]);le._length=0,m===L&&(j=pooling.double(j),L*=2),j[m]=le,m+=1}return $}(),ShapePropertyFactory=function(){var $=-999999;function m(Ne,ze,$e){var He=$e.lastIndex,We,qe,Ye,Ze,Ke,rt,ft,mt,Et,bt=this.keyframes;if(Ne<bt[0].t-this.offsetTime)We=bt[0].s[0],Ye=!0,He=0;else if(Ne>=bt[bt.length-1].t-this.offsetTime)We=bt[bt.length-1].s?bt[bt.length-1].s[0]:bt[bt.length-2].e[0],Ye=!0;else{for(var Ct=He,st=bt.length-1,at=!0,Xe,ht,Bt;at&&(Xe=bt[Ct],ht=bt[Ct+1],!(ht.t-this.offsetTime>Ne));)Ct<st-1?Ct+=1:at=!1;if(Bt=this.keyframesMetadata[Ct]||{},Ye=Xe.h===1,He=Ct,!Ye){if(Ne>=ht.t-this.offsetTime)mt=1;else if(Ne<Xe.t-this.offsetTime)mt=0;else{var Dt;Bt.__fnct?Dt=Bt.__fnct:(Dt=BezierFactory.getBezierEasing(Xe.o.x,Xe.o.y,Xe.i.x,Xe.i.y).get,Bt.__fnct=Dt),mt=Dt((Ne-(Xe.t-this.offsetTime))/(ht.t-this.offsetTime-(Xe.t-this.offsetTime)))}qe=ht.s?ht.s[0]:Xe.e[0]}We=Xe.s[0]}for(rt=ze._length,ft=We.i[0].length,$e.lastIndex=He,Ze=0;Ze<rt;Ze+=1)for(Ke=0;Ke<ft;Ke+=1)Et=Ye?We.i[Ze][Ke]:We.i[Ze][Ke]+(qe.i[Ze][Ke]-We.i[Ze][Ke])*mt,ze.i[Ze][Ke]=Et,Et=Ye?We.o[Ze][Ke]:We.o[Ze][Ke]+(qe.o[Ze][Ke]-We.o[Ze][Ke])*mt,ze.o[Ze][Ke]=Et,Et=Ye?We.v[Ze][Ke]:We.v[Ze][Ke]+(qe.v[Ze][Ke]-We.v[Ze][Ke])*mt,ze.v[Ze][Ke]=Et}function L(){var Ne=this.comp.renderedFrame-this.offsetTime,ze=this.keyframes[0].t-this.offsetTime,$e=this.keyframes[this.keyframes.length-1].t-this.offsetTime,He=this._caching.lastFrame;return He!==$&&(He<ze&&Ne<ze||He>$e&&Ne>$e)||(this._caching.lastIndex=He<Ne?this._caching.lastIndex:0,this.interpolateShape(Ne,this.pv,this._caching)),this._caching.lastFrame=Ne,this.pv}function j(){this.paths=this.localShapeCollection}function ee(Ne,ze){if(Ne._length!==ze._length||Ne.c!==ze.c)return!1;var $e,He=Ne._length;for($e=0;$e<He;$e+=1)if(Ne.v[$e][0]!==ze.v[$e][0]||Ne.v[$e][1]!==ze.v[$e][1]||Ne.o[$e][0]!==ze.o[$e][0]||Ne.o[$e][1]!==ze.o[$e][1]||Ne.i[$e][0]!==ze.i[$e][0]||Ne.i[$e][1]!==ze.i[$e][1])return!1;return!0}function re(Ne){ee(this.v,Ne)||(this.v=shapePool.clone(Ne),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function le(){if(this.elem.globalData.frameId!==this.frameId){if(!this.effectsSequence.length){this._mdf=!1;return}if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=!1;var Ne;this.kf?Ne=this.pv:this.data.ks?Ne=this.data.ks.k:Ne=this.data.pt.k;var ze,$e=this.effectsSequence.length;for(ze=0;ze<$e;ze+=1)Ne=this.effectsSequence[ze](Ne);this.setVValue(Ne),this.lock=!1,this.frameId=this.elem.globalData.frameId}}function ve(Ne,ze,$e){this.propType="shape",this.comp=Ne.comp,this.container=Ne,this.elem=Ne,this.data=ze,this.k=!1,this.kf=!1,this._mdf=!1;var He=$e===3?ze.pt.k:ze.ks.k;this.v=shapePool.clone(He),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=j,this.effectsSequence=[]}function ye(Ne){this.effectsSequence.push(Ne),this.container.addDynamicProperty(this)}ve.prototype.interpolateShape=m,ve.prototype.getValue=le,ve.prototype.setVValue=re,ve.prototype.addEffect=ye;function Ee(Ne,ze,$e){this.propType="shape",this.comp=Ne.comp,this.elem=Ne,this.container=Ne,this.offsetTime=Ne.data.st,this.keyframes=$e===3?ze.pt.k:ze.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var He=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,He),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=$,this.reset=j,this._caching={lastFrame:$,lastIndex:0},this.effectsSequence=[L.bind(this)]}Ee.prototype.getValue=le,Ee.prototype.interpolateShape=m,Ee.prototype.setVValue=re,Ee.prototype.addEffect=ye;var Me=function(){var Ne=roundCorner;function ze($e,He){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=He.d,this.elem=$e,this.comp=$e.comp,this.frameId=-1,this.initDynamicPropertyContainer($e),this.p=PropertyFactory.getProp($e,He.p,1,0,this),this.s=PropertyFactory.getProp($e,He.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return ze.prototype={reset:j,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var He=this.p.v[0],We=this.p.v[1],qe=this.s.v[0]/2,Ye=this.s.v[1]/2,Ze=this.d!==3,Ke=this.v;Ke.v[0][0]=He,Ke.v[0][1]=We-Ye,Ke.v[1][0]=Ze?He+qe:He-qe,Ke.v[1][1]=We,Ke.v[2][0]=He,Ke.v[2][1]=We+Ye,Ke.v[3][0]=Ze?He-qe:He+qe,Ke.v[3][1]=We,Ke.i[0][0]=Ze?He-qe*Ne:He+qe*Ne,Ke.i[0][1]=We-Ye,Ke.i[1][0]=Ze?He+qe:He-qe,Ke.i[1][1]=We-Ye*Ne,Ke.i[2][0]=Ze?He+qe*Ne:He-qe*Ne,Ke.i[2][1]=We+Ye,Ke.i[3][0]=Ze?He-qe:He+qe,Ke.i[3][1]=We+Ye*Ne,Ke.o[0][0]=Ze?He+qe*Ne:He-qe*Ne,Ke.o[0][1]=We-Ye,Ke.o[1][0]=Ze?He+qe:He-qe,Ke.o[1][1]=We+Ye*Ne,Ke.o[2][0]=Ze?He-qe*Ne:He+qe*Ne,Ke.o[2][1]=We+Ye,Ke.o[3][0]=Ze?He-qe:He+qe,Ke.o[3][1]=We-Ye*Ne}},extendPrototype([DynamicPropertyContainer],ze),ze}(),Ce=function(){function Ne(ze,$e){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=ze,this.comp=ze.comp,this.data=$e,this.frameId=-1,this.d=$e.d,this.initDynamicPropertyContainer(ze),$e.sy===1?(this.ir=PropertyFactory.getProp(ze,$e.ir,0,0,this),this.is=PropertyFactory.getProp(ze,$e.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(ze,$e.pt,0,0,this),this.p=PropertyFactory.getProp(ze,$e.p,1,0,this),this.r=PropertyFactory.getProp(ze,$e.r,0,degToRads,this),this.or=PropertyFactory.getProp(ze,$e.or,0,0,this),this.os=PropertyFactory.getProp(ze,$e.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return Ne.prototype={reset:j,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var $e=Math.floor(this.pt.v)*2,He=Math.PI*2/$e,We=!0,qe=this.or.v,Ye=this.ir.v,Ze=this.os.v,Ke=this.is.v,rt=2*Math.PI*qe/($e*2),ft=2*Math.PI*Ye/($e*2),mt,Et,bt,Ct,st=-Math.PI/2;st+=this.r.v;var at=this.data.d===3?-1:1;for(this.v._length=0,mt=0;mt<$e;mt+=1){Et=We?qe:Ye,bt=We?Ze:Ke,Ct=We?rt:ft;var Xe=Et*Math.cos(st),ht=Et*Math.sin(st),Bt=Xe===0&&ht===0?0:ht/Math.sqrt(Xe*Xe+ht*ht),Dt=Xe===0&&ht===0?0:-Xe/Math.sqrt(Xe*Xe+ht*ht);Xe+=+this.p.v[0],ht+=+this.p.v[1],this.v.setTripleAt(Xe,ht,Xe-Bt*Ct*bt*at,ht-Dt*Ct*bt*at,Xe+Bt*Ct*bt*at,ht+Dt*Ct*bt*at,mt,!0),We=!We,st+=He*at}},convertPolygonToPath:function(){var $e=Math.floor(this.pt.v),He=Math.PI*2/$e,We=this.or.v,qe=this.os.v,Ye=2*Math.PI*We/($e*4),Ze,Ke=-Math.PI*.5,rt=this.data.d===3?-1:1;for(Ke+=this.r.v,this.v._length=0,Ze=0;Ze<$e;Ze+=1){var ft=We*Math.cos(Ke),mt=We*Math.sin(Ke),Et=ft===0&&mt===0?0:mt/Math.sqrt(ft*ft+mt*mt),bt=ft===0&&mt===0?0:-ft/Math.sqrt(ft*ft+mt*mt);ft+=+this.p.v[0],mt+=+this.p.v[1],this.v.setTripleAt(ft,mt,ft-Et*Ye*qe*rt,mt-bt*Ye*qe*rt,ft+Et*Ye*qe*rt,mt+bt*Ye*qe*rt,Ze,!0),Ke+=He*rt}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],Ne),Ne}(),De=function(){function Ne(ze,$e){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=ze,this.comp=ze.comp,this.frameId=-1,this.d=$e.d,this.initDynamicPropertyContainer(ze),this.p=PropertyFactory.getProp(ze,$e.p,1,0,this),this.s=PropertyFactory.getProp(ze,$e.s,1,0,this),this.r=PropertyFactory.getProp(ze,$e.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return Ne.prototype={convertRectToPath:function(){var $e=this.p.v[0],He=this.p.v[1],We=this.s.v[0]/2,qe=this.s.v[1]/2,Ye=bmMin(We,qe,this.r.v),Ze=Ye*(1-roundCorner);this.v._length=0,this.d===2||this.d===1?(this.v.setTripleAt($e+We,He-qe+Ye,$e+We,He-qe+Ye,$e+We,He-qe+Ze,0,!0),this.v.setTripleAt($e+We,He+qe-Ye,$e+We,He+qe-Ze,$e+We,He+qe-Ye,1,!0),Ye!==0?(this.v.setTripleAt($e+We-Ye,He+qe,$e+We-Ye,He+qe,$e+We-Ze,He+qe,2,!0),this.v.setTripleAt($e-We+Ye,He+qe,$e-We+Ze,He+qe,$e-We+Ye,He+qe,3,!0),this.v.setTripleAt($e-We,He+qe-Ye,$e-We,He+qe-Ye,$e-We,He+qe-Ze,4,!0),this.v.setTripleAt($e-We,He-qe+Ye,$e-We,He-qe+Ze,$e-We,He-qe+Ye,5,!0),this.v.setTripleAt($e-We+Ye,He-qe,$e-We+Ye,He-qe,$e-We+Ze,He-qe,6,!0),this.v.setTripleAt($e+We-Ye,He-qe,$e+We-Ze,He-qe,$e+We-Ye,He-qe,7,!0)):(this.v.setTripleAt($e-We,He+qe,$e-We+Ze,He+qe,$e-We,He+qe,2),this.v.setTripleAt($e-We,He-qe,$e-We,He-qe+Ze,$e-We,He-qe,3))):(this.v.setTripleAt($e+We,He-qe+Ye,$e+We,He-qe+Ze,$e+We,He-qe+Ye,0,!0),Ye!==0?(this.v.setTripleAt($e+We-Ye,He-qe,$e+We-Ye,He-qe,$e+We-Ze,He-qe,1,!0),this.v.setTripleAt($e-We+Ye,He-qe,$e-We+Ze,He-qe,$e-We+Ye,He-qe,2,!0),this.v.setTripleAt($e-We,He-qe+Ye,$e-We,He-qe+Ye,$e-We,He-qe+Ze,3,!0),this.v.setTripleAt($e-We,He+qe-Ye,$e-We,He+qe-Ze,$e-We,He+qe-Ye,4,!0),this.v.setTripleAt($e-We+Ye,He+qe,$e-We+Ye,He+qe,$e-We+Ze,He+qe,5,!0),this.v.setTripleAt($e+We-Ye,He+qe,$e+We-Ze,He+qe,$e+We-Ye,He+qe,6,!0),this.v.setTripleAt($e+We,He+qe-Ye,$e+We,He+qe-Ye,$e+We,He+qe-Ze,7,!0)):(this.v.setTripleAt($e-We,He-qe,$e-We+Ze,He-qe,$e-We,He-qe,1,!0),this.v.setTripleAt($e-We,He+qe,$e-We,He+qe-Ze,$e-We,He+qe,2,!0),this.v.setTripleAt($e+We,He+qe,$e+We-Ze,He+qe,$e+We,He+qe,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:j},extendPrototype([DynamicPropertyContainer],Ne),Ne}();function Be(Ne,ze,$e){var He;if($e===3||$e===4){var We=$e===3?ze.pt:ze.ks,qe=We.k;qe.length?He=new Ee(Ne,ze,$e):He=new ve(Ne,ze,$e)}else $e===5?He=new De(Ne,ze):$e===6?He=new Me(Ne,ze):$e===7&&(He=new Ce(Ne,ze));return He.k&&Ne.addDynamicProperty(He),He}function ke(){return ve}function Fe(){return Ee}var Oe={};return Oe.getShapeProp=Be,Oe.getConstructorFunction=ke,Oe.getKeyframedConstructorFunction=Fe,Oe}();/*!
 Transformation Matrix v2.0
 (c) Epistemex 2014-2015
 www.epistemex.com
 By Ken Fyrstenberg
 Contributions by leeoniya.
 License: MIT, header required.
 */var Matrix=function(){var $=Math.cos,m=Math.sin,L=Math.tan,j=Math.round;function ee(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function re(Xe){if(Xe===0)return this;var ht=$(Xe),Bt=m(Xe);return this._t(ht,-Bt,0,0,Bt,ht,0,0,0,0,1,0,0,0,0,1)}function le(Xe){if(Xe===0)return this;var ht=$(Xe),Bt=m(Xe);return this._t(1,0,0,0,0,ht,-Bt,0,0,Bt,ht,0,0,0,0,1)}function ve(Xe){if(Xe===0)return this;var ht=$(Xe),Bt=m(Xe);return this._t(ht,0,Bt,0,0,1,0,0,-Bt,0,ht,0,0,0,0,1)}function ye(Xe){if(Xe===0)return this;var ht=$(Xe),Bt=m(Xe);return this._t(ht,-Bt,0,0,Bt,ht,0,0,0,0,1,0,0,0,0,1)}function Ee(Xe,ht){return this._t(1,ht,Xe,1,0,0)}function Me(Xe,ht){return this.shear(L(Xe),L(ht))}function Ce(Xe,ht){var Bt=$(ht),Dt=m(ht);return this._t(Bt,Dt,0,0,-Dt,Bt,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,L(Xe),1,0,0,0,0,1,0,0,0,0,1)._t(Bt,-Dt,0,0,Dt,Bt,0,0,0,0,1,0,0,0,0,1)}function De(Xe,ht,Bt){return!Bt&&Bt!==0&&(Bt=1),Xe===1&&ht===1&&Bt===1?this:this._t(Xe,0,0,0,0,ht,0,0,0,0,Bt,0,0,0,0,1)}function Be(Xe,ht,Bt,Dt,Jt,tn,zt,Vt,Mt,Tt,qt,on,pn,kt,Mn,wt){return this.props[0]=Xe,this.props[1]=ht,this.props[2]=Bt,this.props[3]=Dt,this.props[4]=Jt,this.props[5]=tn,this.props[6]=zt,this.props[7]=Vt,this.props[8]=Mt,this.props[9]=Tt,this.props[10]=qt,this.props[11]=on,this.props[12]=pn,this.props[13]=kt,this.props[14]=Mn,this.props[15]=wt,this}function ke(Xe,ht,Bt){return Bt=Bt||0,Xe!==0||ht!==0||Bt!==0?this._t(1,0,0,0,0,1,0,0,0,0,1,0,Xe,ht,Bt,1):this}function Fe(Xe,ht,Bt,Dt,Jt,tn,zt,Vt,Mt,Tt,qt,on,pn,kt,Mn,wt){var It=this.props;if(Xe===1&&ht===0&&Bt===0&&Dt===0&&Jt===0&&tn===1&&zt===0&&Vt===0&&Mt===0&&Tt===0&&qt===1&&on===0)return It[12]=It[12]*Xe+It[15]*pn,It[13]=It[13]*tn+It[15]*kt,It[14]=It[14]*qt+It[15]*Mn,It[15]*=wt,this._identityCalculated=!1,this;var Kt=It[0],ln=It[1],nn=It[2],gn=It[3],xn=It[4],St=It[5],At=It[6],Ut=It[7],Zt=It[8],cn=It[9],sn=It[10],bn=It[11],vn=It[12],Cn=It[13],Un=It[14],yn=It[15];return It[0]=Kt*Xe+ln*Jt+nn*Mt+gn*pn,It[1]=Kt*ht+ln*tn+nn*Tt+gn*kt,It[2]=Kt*Bt+ln*zt+nn*qt+gn*Mn,It[3]=Kt*Dt+ln*Vt+nn*on+gn*wt,It[4]=xn*Xe+St*Jt+At*Mt+Ut*pn,It[5]=xn*ht+St*tn+At*Tt+Ut*kt,It[6]=xn*Bt+St*zt+At*qt+Ut*Mn,It[7]=xn*Dt+St*Vt+At*on+Ut*wt,It[8]=Zt*Xe+cn*Jt+sn*Mt+bn*pn,It[9]=Zt*ht+cn*tn+sn*Tt+bn*kt,It[10]=Zt*Bt+cn*zt+sn*qt+bn*Mn,It[11]=Zt*Dt+cn*Vt+sn*on+bn*wt,It[12]=vn*Xe+Cn*Jt+Un*Mt+yn*pn,It[13]=vn*ht+Cn*tn+Un*Tt+yn*kt,It[14]=vn*Bt+Cn*zt+Un*qt+yn*Mn,It[15]=vn*Dt+Cn*Vt+Un*on+yn*wt,this._identityCalculated=!1,this}function Oe(Xe){var ht=Xe.props;return this.transform(ht[0],ht[1],ht[2],ht[3],ht[4],ht[5],ht[6],ht[7],ht[8],ht[9],ht[10],ht[11],ht[12],ht[13],ht[14],ht[15])}function Ne(){return this._identityCalculated||(this._identity=!(this.props[0]!==1||this.props[1]!==0||this.props[2]!==0||this.props[3]!==0||this.props[4]!==0||this.props[5]!==1||this.props[6]!==0||this.props[7]!==0||this.props[8]!==0||this.props[9]!==0||this.props[10]!==1||this.props[11]!==0||this.props[12]!==0||this.props[13]!==0||this.props[14]!==0||this.props[15]!==1),this._identityCalculated=!0),this._identity}function ze(Xe){for(var ht=0;ht<16;){if(Xe.props[ht]!==this.props[ht])return!1;ht+=1}return!0}function $e(Xe){var ht;for(ht=0;ht<16;ht+=1)Xe.props[ht]=this.props[ht];return Xe}function He(Xe){var ht;for(ht=0;ht<16;ht+=1)this.props[ht]=Xe[ht]}function We(Xe,ht,Bt){return{x:Xe*this.props[0]+ht*this.props[4]+Bt*this.props[8]+this.props[12],y:Xe*this.props[1]+ht*this.props[5]+Bt*this.props[9]+this.props[13],z:Xe*this.props[2]+ht*this.props[6]+Bt*this.props[10]+this.props[14]}}function qe(Xe,ht,Bt){return Xe*this.props[0]+ht*this.props[4]+Bt*this.props[8]+this.props[12]}function Ye(Xe,ht,Bt){return Xe*this.props[1]+ht*this.props[5]+Bt*this.props[9]+this.props[13]}function Ze(Xe,ht,Bt){return Xe*this.props[2]+ht*this.props[6]+Bt*this.props[10]+this.props[14]}function Ke(){var Xe=this.props[0]*this.props[5]-this.props[1]*this.props[4],ht=this.props[5]/Xe,Bt=-this.props[1]/Xe,Dt=-this.props[4]/Xe,Jt=this.props[0]/Xe,tn=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/Xe,zt=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/Xe,Vt=new Matrix;return Vt.props[0]=ht,Vt.props[1]=Bt,Vt.props[4]=Dt,Vt.props[5]=Jt,Vt.props[12]=tn,Vt.props[13]=zt,Vt}function rt(Xe){var ht=this.getInverseMatrix();return ht.applyToPointArray(Xe[0],Xe[1],Xe[2]||0)}function ft(Xe){var ht,Bt=Xe.length,Dt=[];for(ht=0;ht<Bt;ht+=1)Dt[ht]=rt(Xe[ht]);return Dt}function mt(Xe,ht,Bt){var Dt=createTypedArray("float32",6);if(this.isIdentity())Dt[0]=Xe[0],Dt[1]=Xe[1],Dt[2]=ht[0],Dt[3]=ht[1],Dt[4]=Bt[0],Dt[5]=Bt[1];else{var Jt=this.props[0],tn=this.props[1],zt=this.props[4],Vt=this.props[5],Mt=this.props[12],Tt=this.props[13];Dt[0]=Xe[0]*Jt+Xe[1]*zt+Mt,Dt[1]=Xe[0]*tn+Xe[1]*Vt+Tt,Dt[2]=ht[0]*Jt+ht[1]*zt+Mt,Dt[3]=ht[0]*tn+ht[1]*Vt+Tt,Dt[4]=Bt[0]*Jt+Bt[1]*zt+Mt,Dt[5]=Bt[0]*tn+Bt[1]*Vt+Tt}return Dt}function Et(Xe,ht,Bt){var Dt;return this.isIdentity()?Dt=[Xe,ht,Bt]:Dt=[Xe*this.props[0]+ht*this.props[4]+Bt*this.props[8]+this.props[12],Xe*this.props[1]+ht*this.props[5]+Bt*this.props[9]+this.props[13],Xe*this.props[2]+ht*this.props[6]+Bt*this.props[10]+this.props[14]],Dt}function bt(Xe,ht){if(this.isIdentity())return Xe+","+ht;var Bt=this.props;return Math.round((Xe*Bt[0]+ht*Bt[4]+Bt[12])*100)/100+","+Math.round((Xe*Bt[1]+ht*Bt[5]+Bt[13])*100)/100}function Ct(){for(var Xe=0,ht=this.props,Bt="matrix3d(",Dt=1e4;Xe<16;)Bt+=j(ht[Xe]*Dt)/Dt,Bt+=Xe===15?")":",",Xe+=1;return Bt}function st(Xe){var ht=1e4;return Xe<1e-6&&Xe>0||Xe>-1e-6&&Xe<0?j(Xe*ht)/ht:Xe}function at(){var Xe=this.props,ht=st(Xe[0]),Bt=st(Xe[1]),Dt=st(Xe[4]),Jt=st(Xe[5]),tn=st(Xe[12]),zt=st(Xe[13]);return"matrix("+ht+","+Bt+","+Dt+","+Jt+","+tn+","+zt+")"}return function(){this.reset=ee,this.rotate=re,this.rotateX=le,this.rotateY=ve,this.rotateZ=ye,this.skew=Me,this.skewFromAxis=Ce,this.shear=Ee,this.scale=De,this.setTransform=Be,this.translate=ke,this.transform=Fe,this.multiply=Oe,this.applyToPoint=We,this.applyToX=qe,this.applyToY=Ye,this.applyToZ=Ze,this.applyToPointArray=Et,this.applyToTriplePoints=mt,this.applyToPointStringified=bt,this.toCSS=Ct,this.to2dCSS=at,this.clone=$e,this.cloneFromProps=He,this.equals=ze,this.inversePoints=ft,this.inversePoint=rt,this.getInverseMatrix=Ke,this._t=this.transform,this.isIdentity=Ne,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3($){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$3=function(L){return typeof L}:_typeof$3=function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},_typeof$3($)}var lottie={};function setLocation($){setLocationHref($)}function searchAnimations(){animationManager.searchAnimations()}function setSubframeRendering($){setSubframeEnabled($)}function setPrefix($){setIdPrefix($)}function loadAnimation($){return animationManager.loadAnimation($)}function setQuality($){if(typeof $=="string")switch($){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10);break}else!isNaN($)&&$>1&&setDefaultCurveSegments($)}function inBrowser(){return typeof navigator<"u"}function installPlugin($,m){$==="expressions"&&setExpressionsPlugin(m)}function getFactory($){switch($){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.12.2";function checkReady(){document.readyState==="complete"&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable($){for(var m=queryString.split("&"),L=0;L<m.length;L+=1){var j=m[L].split("=");if(decodeURIComponent(j[0])==$)return decodeURIComponent(j[1])}return null}var queryString="";{var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{_typeof$3(exports)!=="object"&&(window.bodymovin=lottie)}catch($){}var ShapeModifiers=function(){var $={},m={};$.registerModifier=L,$.getModifier=j;function L(ee,re){m[ee]||(m[ee]=re)}function j(ee,re,le){return new m[ee](re,le)}return $}();function ShapeModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function($){if(!this.closed){$.sh.container.addDynamicProperty($.sh);var m={shape:$.sh,data:$,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(m),this.addShapeToModifier(m),this._isAnimated&&$.setAsAnimated()}},ShapeModifier.prototype.init=function($,m){this.shapes=[],this.elem=$,this.initDynamicPropertyContainer($),this.initModifierProperties($,m),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier);function TrimModifier(){}extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function($,m){this.s=PropertyFactory.getProp($,m.s,0,.01,this),this.e=PropertyFactory.getProp($,m.e,0,.01,this),this.o=PropertyFactory.getProp($,m.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=m.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function($){$.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function($,m,L,j,ee){var re=[];m<=1?re.push({s:$,e:m}):$>=1?re.push({s:$-1,e:m-1}):(re.push({s:$,e:1}),re.push({s:0,e:m-1}));var le=[],ve,ye=re.length,Ee;for(ve=0;ve<ye;ve+=1)if(Ee=re[ve],!(Ee.e*ee<j||Ee.s*ee>j+L)){var Me,Ce;Ee.s*ee<=j?Me=0:Me=(Ee.s*ee-j)/L,Ee.e*ee>=j+L?Ce=1:Ce=(Ee.e*ee-j)/L,le.push([Me,Ce])}return le.length||le.push([0,0]),le},TrimModifier.prototype.releasePathsData=function($){var m,L=$.length;for(m=0;m<L;m+=1)segmentsLengthPool.release($[m]);return $.length=0,$},TrimModifier.prototype.processShapes=function($){var m,L;if(this._mdf||$){var j=this.o.v%360/360;if(j<0&&(j+=1),this.s.v>1?m=1+j:this.s.v<0?m=0+j:m=this.s.v+j,this.e.v>1?L=1+j:this.e.v<0?L=0+j:L=this.e.v+j,m>L){var ee=m;m=L,L=ee}m=Math.round(m*1e4)*1e-4,L=Math.round(L*1e4)*1e-4,this.sValue=m,this.eValue=L}else m=this.sValue,L=this.eValue;var re,le,ve=this.shapes.length,ye,Ee,Me,Ce,De,Be=0;if(L===m)for(le=0;le<ve;le+=1)this.shapes[le].localShapeCollection.releaseShapes(),this.shapes[le].shape._mdf=!0,this.shapes[le].shape.paths=this.shapes[le].localShapeCollection,this._mdf&&(this.shapes[le].pathsData.length=0);else if(L===1&&m===0||L===0&&m===1){if(this._mdf)for(le=0;le<ve;le+=1)this.shapes[le].pathsData.length=0,this.shapes[le].shape._mdf=!0}else{var ke=[],Fe,Oe;for(le=0;le<ve;le+=1)if(Fe=this.shapes[le],!Fe.shape._mdf&&!this._mdf&&!$&&this.m!==2)Fe.shape.paths=Fe.localShapeCollection;else{if(re=Fe.shape.paths,Ee=re._length,De=0,!Fe.shape._mdf&&Fe.pathsData.length)De=Fe.totalShapeLength;else{for(Me=this.releasePathsData(Fe.pathsData),ye=0;ye<Ee;ye+=1)Ce=bez.getSegmentsLength(re.shapes[ye]),Me.push(Ce),De+=Ce.totalLength;Fe.totalShapeLength=De,Fe.pathsData=Me}Be+=De,Fe.shape._mdf=!0}var Ne=m,ze=L,$e=0,He;for(le=ve-1;le>=0;le-=1)if(Fe=this.shapes[le],Fe.shape._mdf){for(Oe=Fe.localShapeCollection,Oe.releaseShapes(),this.m===2&&ve>1?(He=this.calculateShapeEdges(m,L,Fe.totalShapeLength,$e,Be),$e+=Fe.totalShapeLength):He=[[Ne,ze]],Ee=He.length,ye=0;ye<Ee;ye+=1){Ne=He[ye][0],ze=He[ye][1],ke.length=0,ze<=1?ke.push({s:Fe.totalShapeLength*Ne,e:Fe.totalShapeLength*ze}):Ne>=1?ke.push({s:Fe.totalShapeLength*(Ne-1),e:Fe.totalShapeLength*(ze-1)}):(ke.push({s:Fe.totalShapeLength*Ne,e:Fe.totalShapeLength}),ke.push({s:0,e:Fe.totalShapeLength*(ze-1)}));var We=this.addShapes(Fe,ke[0]);if(ke[0].s!==ke[0].e){if(ke.length>1){var qe=Fe.shape.paths.shapes[Fe.shape.paths._length-1];if(qe.c){var Ye=We.pop();this.addPaths(We,Oe),We=this.addShapes(Fe,ke[1],Ye)}else this.addPaths(We,Oe),We=this.addShapes(Fe,ke[1])}this.addPaths(We,Oe)}}Fe.shape.paths=Oe}}},TrimModifier.prototype.addPaths=function($,m){var L,j=$.length;for(L=0;L<j;L+=1)m.addShape($[L])},TrimModifier.prototype.addSegment=function($,m,L,j,ee,re,le){ee.setXYAt(m[0],m[1],"o",re),ee.setXYAt(L[0],L[1],"i",re+1),le&&ee.setXYAt($[0],$[1],"v",re),ee.setXYAt(j[0],j[1],"v",re+1)},TrimModifier.prototype.addSegmentFromArray=function($,m,L,j){m.setXYAt($[1],$[5],"o",L),m.setXYAt($[2],$[6],"i",L+1),j&&m.setXYAt($[0],$[4],"v",L),m.setXYAt($[3],$[7],"v",L+1)},TrimModifier.prototype.addShapes=function($,m,L){var j=$.pathsData,ee=$.shape.paths.shapes,re,le=$.shape.paths._length,ve,ye,Ee=0,Me,Ce,De,Be,ke=[],Fe,Oe=!0;for(L?(Ce=L._length,Fe=L._length):(L=shapePool.newElement(),Ce=0,Fe=0),ke.push(L),re=0;re<le;re+=1){for(De=j[re].lengths,L.c=ee[re].c,ye=ee[re].c?De.length:De.length+1,ve=1;ve<ye;ve+=1)if(Me=De[ve-1],Ee+Me.addedLength<m.s)Ee+=Me.addedLength,L.c=!1;else if(Ee>m.e){L.c=!1;break}else m.s<=Ee&&m.e>=Ee+Me.addedLength?(this.addSegment(ee[re].v[ve-1],ee[re].o[ve-1],ee[re].i[ve],ee[re].v[ve],L,Ce,Oe),Oe=!1):(Be=bez.getNewSegment(ee[re].v[ve-1],ee[re].v[ve],ee[re].o[ve-1],ee[re].i[ve],(m.s-Ee)/Me.addedLength,(m.e-Ee)/Me.addedLength,De[ve-1]),this.addSegmentFromArray(Be,L,Ce,Oe),Oe=!1,L.c=!1),Ee+=Me.addedLength,Ce+=1;if(ee[re].c&&De.length){if(Me=De[ve-1],Ee<=m.e){var Ne=De[ve-1].addedLength;m.s<=Ee&&m.e>=Ee+Ne?(this.addSegment(ee[re].v[ve-1],ee[re].o[ve-1],ee[re].i[0],ee[re].v[0],L,Ce,Oe),Oe=!1):(Be=bez.getNewSegment(ee[re].v[ve-1],ee[re].v[0],ee[re].o[ve-1],ee[re].i[0],(m.s-Ee)/Ne,(m.e-Ee)/Ne,De[ve-1]),this.addSegmentFromArray(Be,L,Ce,Oe),Oe=!1,L.c=!1)}else L.c=!1;Ee+=Me.addedLength,Ce+=1}if(L._length&&(L.setXYAt(L.v[Fe][0],L.v[Fe][1],"i",Fe),L.setXYAt(L.v[L._length-1][0],L.v[L._length-1][1],"o",L._length-1)),Ee>m.e)break;re<le-1&&(L=shapePool.newElement(),Oe=!0,ke.push(L),Ce=0)}return ke};function PuckerAndBloatModifier(){}extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function($,m){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp($,m.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function($,m){var L=m/100,j=[0,0],ee=$._length,re=0;for(re=0;re<ee;re+=1)j[0]+=$.v[re][0],j[1]+=$.v[re][1];j[0]/=ee,j[1]/=ee;var le=shapePool.newElement();le.c=$.c;var ve,ye,Ee,Me,Ce,De;for(re=0;re<ee;re+=1)ve=$.v[re][0]+(j[0]-$.v[re][0])*L,ye=$.v[re][1]+(j[1]-$.v[re][1])*L,Ee=$.o[re][0]+(j[0]-$.o[re][0])*-L,Me=$.o[re][1]+(j[1]-$.o[re][1])*-L,Ce=$.i[re][0]+(j[0]-$.i[re][0])*-L,De=$.i[re][1]+(j[1]-$.i[re][1])*-L,le.setTripleAt(ve,ye,Ee,Me,Ce,De,re);return le},PuckerAndBloatModifier.prototype.processShapes=function($){var m,L,j=this.shapes.length,ee,re,le=this.amount.v;if(le!==0){var ve,ye;for(L=0;L<j;L+=1){if(ve=this.shapes[L],ye=ve.localShapeCollection,!(!ve.shape._mdf&&!this._mdf&&!$))for(ye.releaseShapes(),ve.shape._mdf=!0,m=ve.shape.paths.shapes,re=ve.shape.paths._length,ee=0;ee<re;ee+=1)ye.addShape(this.processPath(m[ee],le));ve.shape.paths=ve.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var $=[0,0];function m(ye){var Ee=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||Ee,this.a&&ye.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&ye.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&ye.skewFromAxis(-this.sk.v,this.sa.v),this.r?ye.rotate(-this.r.v):ye.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?ye.translate(this.px.v,this.py.v,-this.pz.v):ye.translate(this.px.v,this.py.v,0):ye.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}function L(ye){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||ye){var Ee;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var Me,Ce;if(Ee=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(Me=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/Ee,0),Ce=this.p.getValueAtTime(this.p.keyframes[0].t/Ee,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(Me=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/Ee,0),Ce=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/Ee,0)):(Me=this.p.pv,Ce=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/Ee,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){Me=[],Ce=[];var De=this.px,Be=this.py;De._caching.lastFrame+De.offsetTime<=De.keyframes[0].t?(Me[0]=De.getValueAtTime((De.keyframes[0].t+.01)/Ee,0),Me[1]=Be.getValueAtTime((Be.keyframes[0].t+.01)/Ee,0),Ce[0]=De.getValueAtTime(De.keyframes[0].t/Ee,0),Ce[1]=Be.getValueAtTime(Be.keyframes[0].t/Ee,0)):De._caching.lastFrame+De.offsetTime>=De.keyframes[De.keyframes.length-1].t?(Me[0]=De.getValueAtTime(De.keyframes[De.keyframes.length-1].t/Ee,0),Me[1]=Be.getValueAtTime(Be.keyframes[Be.keyframes.length-1].t/Ee,0),Ce[0]=De.getValueAtTime((De.keyframes[De.keyframes.length-1].t-.01)/Ee,0),Ce[1]=Be.getValueAtTime((Be.keyframes[Be.keyframes.length-1].t-.01)/Ee,0)):(Me=[De.pv,Be.pv],Ce[0]=De.getValueAtTime((De._caching.lastFrame+De.offsetTime-.01)/Ee,De.offsetTime),Ce[1]=Be.getValueAtTime((Be._caching.lastFrame+Be.offsetTime-.01)/Ee,Be.offsetTime))}else Ce=$,Me=Ce;this.v.rotate(-Math.atan2(Me[1]-Ce[1],Me[0]-Ce[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}}function j(){if(this.appliedTransformations=0,this.pre.reset(),!this.a.effectsSequence.length)this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1;else return;if(!this.s.effectsSequence.length)this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2;else return;if(this.sk)if(!this.sk.effectsSequence.length&&!this.sa.effectsSequence.length)this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3;else return;this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):!this.rz.effectsSequence.length&&!this.ry.effectsSequence.length&&!this.rx.effectsSequence.length&&!this.or.effectsSequence.length&&(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}function ee(){}function re(ye){this._addDynamicProperty(ye),this.elem.addDynamicProperty(ye),this._isDirty=!0}function le(ye,Ee,Me){if(this.elem=ye,this.frameId=-1,this.propType="transform",this.data=Ee,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(Me||ye),Ee.p&&Ee.p.s?(this.px=PropertyFactory.getProp(ye,Ee.p.x,0,0,this),this.py=PropertyFactory.getProp(ye,Ee.p.y,0,0,this),Ee.p.z&&(this.pz=PropertyFactory.getProp(ye,Ee.p.z,0,0,this))):this.p=PropertyFactory.getProp(ye,Ee.p||{k:[0,0,0]},1,0,this),Ee.rx){if(this.rx=PropertyFactory.getProp(ye,Ee.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(ye,Ee.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(ye,Ee.rz,0,degToRads,this),Ee.or.k[0].ti){var Ce,De=Ee.or.k.length;for(Ce=0;Ce<De;Ce+=1)Ee.or.k[Ce].to=null,Ee.or.k[Ce].ti=null}this.or=PropertyFactory.getProp(ye,Ee.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(ye,Ee.r||{k:0},0,degToRads,this);Ee.sk&&(this.sk=PropertyFactory.getProp(ye,Ee.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(ye,Ee.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(ye,Ee.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(ye,Ee.s||{k:[100,100,100]},1,.01,this),Ee.o?this.o=PropertyFactory.getProp(ye,Ee.o,0,.01,ye):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}le.prototype={applyToMatrix:m,getValue:L,precalculateMatrix:j,autoOrient:ee},extendPrototype([DynamicPropertyContainer],le),le.prototype.addDynamicProperty=re,le.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty;function ve(ye,Ee,Me){return new le(ye,Ee,Me)}return{getTransformProperty:ve}}();function RepeaterModifier(){}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function($,m){this.getValue=this.processKeys,this.c=PropertyFactory.getProp($,m.c,0,null,this),this.o=PropertyFactory.getProp($,m.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty($,m.tr,this),this.so=PropertyFactory.getProp($,m.tr.so,0,.01,this),this.eo=PropertyFactory.getProp($,m.tr.eo,0,.01,this),this.data=m,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function($,m,L,j,ee,re){var le=re?-1:1,ve=j.s.v[0]+(1-j.s.v[0])*(1-ee),ye=j.s.v[1]+(1-j.s.v[1])*(1-ee);$.translate(j.p.v[0]*le*ee,j.p.v[1]*le*ee,j.p.v[2]),m.translate(-j.a.v[0],-j.a.v[1],j.a.v[2]),m.rotate(-j.r.v*le*ee),m.translate(j.a.v[0],j.a.v[1],j.a.v[2]),L.translate(-j.a.v[0],-j.a.v[1],j.a.v[2]),L.scale(re?1/ve:ve,re?1/ye:ye),L.translate(j.a.v[0],j.a.v[1],j.a.v[2])},RepeaterModifier.prototype.init=function($,m,L,j){for(this.elem=$,this.arr=m,this.pos=L,this.elemsData=j,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer($),this.initModifierProperties($,m[L]);L>0;)L-=1,this._elements.unshift(m[L]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function($){var m,L=$.length;for(m=0;m<L;m+=1)$[m]._processed=!1,$[m].ty==="gr"&&this.resetElements($[m].it)},RepeaterModifier.prototype.cloneElements=function($){var m=JSON.parse(JSON.stringify($));return this.resetElements(m),m},RepeaterModifier.prototype.changeGroupRender=function($,m){var L,j=$.length;for(L=0;L<j;L+=1)$[L]._render=m,$[L].ty==="gr"&&this.changeGroupRender($[L].it,m)},RepeaterModifier.prototype.processShapes=function($){var m,L,j,ee,re,le=!1;if(this._mdf||$){var ve=Math.ceil(this.c.v);if(this._groups.length<ve){for(;this._groups.length<ve;){var ye={it:this.cloneElements(this._elements),ty:"gr"};ye.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,ye),this._groups.splice(0,0,ye),this._currentCopies+=1}this.elem.reloadShapes(),le=!0}re=0;var Ee;for(j=0;j<=this._groups.length-1;j+=1){if(Ee=re<ve,this._groups[j]._render=Ee,this.changeGroupRender(this._groups[j].it,Ee),!Ee){var Me=this.elemsData[j].it,Ce=Me[Me.length-1];Ce.transform.op.v!==0?(Ce.transform.op._mdf=!0,Ce.transform.op.v=0):Ce.transform.op._mdf=!1}re+=1}this._currentCopies=ve;var De=this.o.v,Be=De%1,ke=De>0?Math.floor(De):Math.ceil(De),Fe=this.pMatrix.props,Oe=this.rMatrix.props,Ne=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var ze=0;if(De>0){for(;ze<ke;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),ze+=1;Be&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,Be,!1),ze+=Be)}else if(De<0){for(;ze>ke;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),ze-=1;Be&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-Be,!0),ze-=Be)}j=this.data.m===1?0:this._currentCopies-1,ee=this.data.m===1?1:-1,re=this._currentCopies;for(var $e,He;re;){if(m=this.elemsData[j].it,L=m[m.length-1].transform.mProps.v.props,He=L.length,m[m.length-1].transform.mProps._mdf=!0,m[m.length-1].transform.op._mdf=!0,m[m.length-1].transform.op.v=this._currentCopies===1?this.so.v:this.so.v+(this.eo.v-this.so.v)*(j/(this._currentCopies-1)),ze!==0){for((j!==0&&ee===1||j!==this._currentCopies-1&&ee===-1)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(Oe[0],Oe[1],Oe[2],Oe[3],Oe[4],Oe[5],Oe[6],Oe[7],Oe[8],Oe[9],Oe[10],Oe[11],Oe[12],Oe[13],Oe[14],Oe[15]),this.matrix.transform(Ne[0],Ne[1],Ne[2],Ne[3],Ne[4],Ne[5],Ne[6],Ne[7],Ne[8],Ne[9],Ne[10],Ne[11],Ne[12],Ne[13],Ne[14],Ne[15]),this.matrix.transform(Fe[0],Fe[1],Fe[2],Fe[3],Fe[4],Fe[5],Fe[6],Fe[7],Fe[8],Fe[9],Fe[10],Fe[11],Fe[12],Fe[13],Fe[14],Fe[15]),$e=0;$e<He;$e+=1)L[$e]=this.matrix.props[$e];this.matrix.reset()}else for(this.matrix.reset(),$e=0;$e<He;$e+=1)L[$e]=this.matrix.props[$e];ze+=1,re-=1,j+=ee}}else for(re=this._currentCopies,j=0,ee=1;re;)m=this.elemsData[j].it,L=m[m.length-1].transform.mProps.v.props,m[m.length-1].transform.mProps._mdf=!1,m[m.length-1].transform.op._mdf=!1,re-=1,j+=ee;return le},RepeaterModifier.prototype.addShape=function(){};function RoundCornersModifier(){}extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function($,m){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp($,m.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function($,m){var L=shapePool.newElement();L.c=$.c;var j,ee=$._length,re,le,ve,ye,Ee,Me,Ce=0,De,Be,ke,Fe,Oe,Ne;for(j=0;j<ee;j+=1)re=$.v[j],ve=$.o[j],le=$.i[j],re[0]===ve[0]&&re[1]===ve[1]&&re[0]===le[0]&&re[1]===le[1]?(j===0||j===ee-1)&&!$.c?(L.setTripleAt(re[0],re[1],ve[0],ve[1],le[0],le[1],Ce),Ce+=1):(j===0?ye=$.v[ee-1]:ye=$.v[j-1],Ee=Math.sqrt(Math.pow(re[0]-ye[0],2)+Math.pow(re[1]-ye[1],2)),Me=Ee?Math.min(Ee/2,m)/Ee:0,Oe=re[0]+(ye[0]-re[0])*Me,De=Oe,Ne=re[1]-(re[1]-ye[1])*Me,Be=Ne,ke=De-(De-re[0])*roundCorner,Fe=Be-(Be-re[1])*roundCorner,L.setTripleAt(De,Be,ke,Fe,Oe,Ne,Ce),Ce+=1,j===ee-1?ye=$.v[0]:ye=$.v[j+1],Ee=Math.sqrt(Math.pow(re[0]-ye[0],2)+Math.pow(re[1]-ye[1],2)),Me=Ee?Math.min(Ee/2,m)/Ee:0,ke=re[0]+(ye[0]-re[0])*Me,De=ke,Fe=re[1]+(ye[1]-re[1])*Me,Be=Fe,Oe=De-(De-re[0])*roundCorner,Ne=Be-(Be-re[1])*roundCorner,L.setTripleAt(De,Be,ke,Fe,Oe,Ne,Ce),Ce+=1):(L.setTripleAt($.v[j][0],$.v[j][1],$.o[j][0],$.o[j][1],$.i[j][0],$.i[j][1],Ce),Ce+=1);return L},RoundCornersModifier.prototype.processShapes=function($){var m,L,j=this.shapes.length,ee,re,le=this.rd.v;if(le!==0){var ve,ye;for(L=0;L<j;L+=1){if(ve=this.shapes[L],ye=ve.localShapeCollection,!(!ve.shape._mdf&&!this._mdf&&!$))for(ye.releaseShapes(),ve.shape._mdf=!0,m=ve.shape.paths.shapes,re=ve.shape.paths._length,ee=0;ee<re;ee+=1)ye.addShape(this.processPath(m[ee],le));ve.shape.paths=ve.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function floatEqual($,m){return Math.abs($-m)*1e5<=Math.min(Math.abs($),Math.abs(m))}function floatZero($){return Math.abs($)<=1e-5}function lerp($,m,L){return $*(1-L)+m*L}function lerpPoint($,m,L){return[lerp($[0],m[0],L),lerp($[1],m[1],L)]}function quadRoots($,m,L){if($===0)return[];var j=m*m-4*$*L;if(j<0)return[];var ee=-m/(2*$);if(j===0)return[ee];var re=Math.sqrt(j)/(2*$);return[ee-re,ee+re]}function polynomialCoefficients($,m,L,j){return[-$+3*m-3*L+j,3*$-6*m+3*L,-3*$+3*m,$]}function singlePoint($){return new PolynomialBezier($,$,$,$,!1)}function PolynomialBezier($,m,L,j,ee){ee&&pointEqual($,m)&&(m=lerpPoint($,j,1/3)),ee&&pointEqual(L,j)&&(L=lerpPoint($,j,2/3));var re=polynomialCoefficients($[0],m[0],L[0],j[0]),le=polynomialCoefficients($[1],m[1],L[1],j[1]);this.a=[re[0],le[0]],this.b=[re[1],le[1]],this.c=[re[2],le[2]],this.d=[re[3],le[3]],this.points=[$,m,L,j]}PolynomialBezier.prototype.point=function($){return[((this.a[0]*$+this.b[0])*$+this.c[0])*$+this.d[0],((this.a[1]*$+this.b[1])*$+this.c[1])*$+this.d[1]]},PolynomialBezier.prototype.derivative=function($){return[(3*$*this.a[0]+2*this.b[0])*$+this.c[0],(3*$*this.a[1]+2*this.b[1])*$+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function($){var m=this.derivative($);return Math.atan2(m[1],m[0])},PolynomialBezier.prototype.normalAngle=function($){var m=this.derivative($);return Math.atan2(m[0],m[1])},PolynomialBezier.prototype.inflectionPoints=function(){var $=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero($))return[];var m=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/$,L=m*m-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/$;if(L<0)return[];var j=Math.sqrt(L);return floatZero(j)?j>0&&j<1?[m]:[]:[m-j,m+j].filter(function(ee){return ee>0&&ee<1})},PolynomialBezier.prototype.split=function($){if($<=0)return[singlePoint(this.points[0]),this];if($>=1)return[this,singlePoint(this.points[this.points.length-1])];var m=lerpPoint(this.points[0],this.points[1],$),L=lerpPoint(this.points[1],this.points[2],$),j=lerpPoint(this.points[2],this.points[3],$),ee=lerpPoint(m,L,$),re=lerpPoint(L,j,$),le=lerpPoint(ee,re,$);return[new PolynomialBezier(this.points[0],m,ee,le,!0),new PolynomialBezier(le,re,j,this.points[3],!0)]};function extrema($,m){var L=$.points[0][m],j=$.points[$.points.length-1][m];if(L>j){var ee=j;j=L,L=ee}for(var re=quadRoots(3*$.a[m],2*$.b[m],$.c[m]),le=0;le<re.length;le+=1)if(re[le]>0&&re[le]<1){var ve=$.point(re[le])[m];ve<L?L=ve:ve>j&&(j=ve)}return{min:L,max:j}}PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var $=this.bounds();return{left:$.x.min,right:$.x.max,top:$.y.min,bottom:$.y.max,width:$.x.max-$.x.min,height:$.y.max-$.y.min,cx:($.x.max+$.x.min)/2,cy:($.y.max+$.y.min)/2}};function intersectData($,m,L){var j=$.boundingBox();return{cx:j.cx,cy:j.cy,width:j.width,height:j.height,bez:$,t:(m+L)/2,t1:m,t2:L}}function splitData($){var m=$.bez.split(.5);return[intersectData(m[0],$.t1,$.t),intersectData(m[1],$.t,$.t2)]}function boxIntersect($,m){return Math.abs($.cx-m.cx)*2<$.width+m.width&&Math.abs($.cy-m.cy)*2<$.height+m.height}function intersectsImpl($,m,L,j,ee,re){if(boxIntersect($,m)){if(L>=re||$.width<=j&&$.height<=j&&m.width<=j&&m.height<=j){ee.push([$.t,m.t]);return}var le=splitData($),ve=splitData(m);intersectsImpl(le[0],ve[0],L+1,j,ee,re),intersectsImpl(le[0],ve[1],L+1,j,ee,re),intersectsImpl(le[1],ve[0],L+1,j,ee,re),intersectsImpl(le[1],ve[1],L+1,j,ee,re)}}PolynomialBezier.prototype.intersections=function($,m,L){m===void 0&&(m=2),L===void 0&&(L=7);var j=[];return intersectsImpl(intersectData(this,0,1),intersectData($,0,1),0,m,j,L),j},PolynomialBezier.shapeSegment=function($,m){var L=(m+1)%$.length();return new PolynomialBezier($.v[m],$.o[m],$.i[L],$.v[L],!0)},PolynomialBezier.shapeSegmentInverted=function($,m){var L=(m+1)%$.length();return new PolynomialBezier($.v[L],$.i[L],$.o[m],$.v[m],!0)};function crossProduct($,m){return[$[1]*m[2]-$[2]*m[1],$[2]*m[0]-$[0]*m[2],$[0]*m[1]-$[1]*m[0]]}function lineIntersection($,m,L,j){var ee=[$[0],$[1],1],re=[m[0],m[1],1],le=[L[0],L[1],1],ve=[j[0],j[1],1],ye=crossProduct(crossProduct(ee,re),crossProduct(le,ve));return floatZero(ye[2])?null:[ye[0]/ye[2],ye[1]/ye[2]]}function polarOffset($,m,L){return[$[0]+Math.cos(m)*L,$[1]-Math.sin(m)*L]}function pointDistance($,m){return Math.hypot($[0]-m[0],$[1]-m[1])}function pointEqual($,m){return floatEqual($[0],m[0])&&floatEqual($[1],m[1])}function ZigZagModifier(){}extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function($,m){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp($,m.s,0,null,this),this.frequency=PropertyFactory.getProp($,m.r,0,null,this),this.pointsType=PropertyFactory.getProp($,m.pt,0,null,this),this._isAnimated=this.amplitude.effectsSequence.length!==0||this.frequency.effectsSequence.length!==0||this.pointsType.effectsSequence.length!==0};function setPoint($,m,L,j,ee,re,le){var ve=L-Math.PI/2,ye=L+Math.PI/2,Ee=m[0]+Math.cos(L)*j*ee,Me=m[1]-Math.sin(L)*j*ee;$.setTripleAt(Ee,Me,Ee+Math.cos(ve)*re,Me-Math.sin(ve)*re,Ee+Math.cos(ye)*le,Me-Math.sin(ye)*le,$.length())}function getPerpendicularVector($,m){var L=[m[0]-$[0],m[1]-$[1]],j=-Math.PI*.5,ee=[Math.cos(j)*L[0]-Math.sin(j)*L[1],Math.sin(j)*L[0]+Math.cos(j)*L[1]];return ee}function getProjectingAngle($,m){var L=m===0?$.length()-1:m-1,j=(m+1)%$.length(),ee=$.v[L],re=$.v[j],le=getPerpendicularVector(ee,re);return Math.atan2(0,1)-Math.atan2(le[1],le[0])}function zigZagCorner($,m,L,j,ee,re,le){var ve=getProjectingAngle(m,L),ye=m.v[L%m._length],Ee=m.v[L===0?m._length-1:L-1],Me=m.v[(L+1)%m._length],Ce=re===2?Math.sqrt(Math.pow(ye[0]-Ee[0],2)+Math.pow(ye[1]-Ee[1],2)):0,De=re===2?Math.sqrt(Math.pow(ye[0]-Me[0],2)+Math.pow(ye[1]-Me[1],2)):0;setPoint($,m.v[L%m._length],ve,le,j,De/((ee+1)*2),Ce/((ee+1)*2))}function zigZagSegment($,m,L,j,ee,re){for(var le=0;le<j;le+=1){var ve=(le+1)/(j+1),ye=ee===2?Math.sqrt(Math.pow(m.points[3][0]-m.points[0][0],2)+Math.pow(m.points[3][1]-m.points[0][1],2)):0,Ee=m.normalAngle(ve),Me=m.point(ve);setPoint($,Me,Ee,re,L,ye/((j+1)*2),ye/((j+1)*2)),re=-re}return re}ZigZagModifier.prototype.processPath=function($,m,L,j){var ee=$._length,re=shapePool.newElement();if(re.c=$.c,$.c||(ee-=1),ee===0)return re;var le=-1,ve=PolynomialBezier.shapeSegment($,0);zigZagCorner(re,$,0,m,L,j,le);for(var ye=0;ye<ee;ye+=1)le=zigZagSegment(re,ve,m,L,j,-le),ye===ee-1&&!$.c?ve=null:ve=PolynomialBezier.shapeSegment($,(ye+1)%ee),zigZagCorner(re,$,ye+1,m,L,j,le);return re},ZigZagModifier.prototype.processShapes=function($){var m,L,j=this.shapes.length,ee,re,le=this.amplitude.v,ve=Math.max(0,Math.round(this.frequency.v)),ye=this.pointsType.v;if(le!==0){var Ee,Me;for(L=0;L<j;L+=1){if(Ee=this.shapes[L],Me=Ee.localShapeCollection,!(!Ee.shape._mdf&&!this._mdf&&!$))for(Me.releaseShapes(),Ee.shape._mdf=!0,m=Ee.shape.paths.shapes,re=Ee.shape.paths._length,ee=0;ee<re;ee+=1)Me.addShape(this.processPath(m[ee],le,ve,ye));Ee.shape.paths=Ee.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function linearOffset($,m,L){var j=Math.atan2(m[0]-$[0],m[1]-$[1]);return[polarOffset($,j,L),polarOffset(m,j,L)]}function offsetSegment($,m){var L,j,ee,re,le,ve,ye;ye=linearOffset($.points[0],$.points[1],m),L=ye[0],j=ye[1],ye=linearOffset($.points[1],$.points[2],m),ee=ye[0],re=ye[1],ye=linearOffset($.points[2],$.points[3],m),le=ye[0],ve=ye[1];var Ee=lineIntersection(L,j,ee,re);Ee===null&&(Ee=j);var Me=lineIntersection(le,ve,ee,re);return Me===null&&(Me=le),new PolynomialBezier(L,Ee,Me,ve)}function joinLines($,m,L,j,ee){var re=m.points[3],le=L.points[0];if(j===3||pointEqual(re,le))return re;if(j===2){var ve=-m.tangentAngle(1),ye=-L.tangentAngle(0)+Math.PI,Ee=lineIntersection(re,polarOffset(re,ve+Math.PI/2,100),le,polarOffset(le,ve+Math.PI/2,100)),Me=Ee?pointDistance(Ee,re):pointDistance(re,le)/2,Ce=polarOffset(re,ve,2*Me*roundCorner);return $.setXYAt(Ce[0],Ce[1],"o",$.length()-1),Ce=polarOffset(le,ye,2*Me*roundCorner),$.setTripleAt(le[0],le[1],le[0],le[1],Ce[0],Ce[1],$.length()),le}var De=pointEqual(re,m.points[2])?m.points[0]:m.points[2],Be=pointEqual(le,L.points[1])?L.points[3]:L.points[1],ke=lineIntersection(De,re,le,Be);return ke&&pointDistance(ke,re)<ee?($.setTripleAt(ke[0],ke[1],ke[0],ke[1],ke[0],ke[1],$.length()),ke):re}function getIntersection($,m){var L=$.intersections(m);return L.length&&floatEqual(L[0][0],1)&&L.shift(),L.length?L[0]:null}function pruneSegmentIntersection($,m){var L=$.slice(),j=m.slice(),ee=getIntersection($[$.length-1],m[0]);return ee&&(L[$.length-1]=$[$.length-1].split(ee[0])[0],j[0]=m[0].split(ee[1])[1]),$.length>1&&m.length>1&&(ee=getIntersection($[0],m[m.length-1]),ee)?[[$[0].split(ee[0])[0]],[m[m.length-1].split(ee[1])[1]]]:[L,j]}function pruneIntersections($){for(var m,L=1;L<$.length;L+=1)m=pruneSegmentIntersection($[L-1],$[L]),$[L-1]=m[0],$[L]=m[1];return $.length>1&&(m=pruneSegmentIntersection($[$.length-1],$[0]),$[$.length-1]=m[0],$[0]=m[1]),$}function offsetSegmentSplit($,m){var L=$.inflectionPoints(),j,ee,re,le;if(L.length===0)return[offsetSegment($,m)];if(L.length===1||floatEqual(L[1],1))return re=$.split(L[0]),j=re[0],ee=re[1],[offsetSegment(j,m),offsetSegment(ee,m)];re=$.split(L[0]),j=re[0];var ve=(L[1]-L[0])/(1-L[0]);return re=re[1].split(ve),le=re[0],ee=re[1],[offsetSegment(j,m),offsetSegment(le,m),offsetSegment(ee,m)]}function OffsetPathModifier(){}extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function($,m){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp($,m.a,0,null,this),this.miterLimit=PropertyFactory.getProp($,m.ml,0,null,this),this.lineJoin=m.lj,this._isAnimated=this.amount.effectsSequence.length!==0},OffsetPathModifier.prototype.processPath=function($,m,L,j){var ee=shapePool.newElement();ee.c=$.c;var re=$.length();$.c||(re-=1);var le,ve,ye,Ee=[];for(le=0;le<re;le+=1)ye=PolynomialBezier.shapeSegment($,le),Ee.push(offsetSegmentSplit(ye,m));if(!$.c)for(le=re-1;le>=0;le-=1)ye=PolynomialBezier.shapeSegmentInverted($,le),Ee.push(offsetSegmentSplit(ye,m));Ee=pruneIntersections(Ee);var Me=null,Ce=null;for(le=0;le<Ee.length;le+=1){var De=Ee[le];for(Ce&&(Me=joinLines(ee,Ce,De[0],L,j)),Ce=De[De.length-1],ve=0;ve<De.length;ve+=1)ye=De[ve],Me&&pointEqual(ye.points[0],Me)?ee.setXYAt(ye.points[1][0],ye.points[1][1],"o",ee.length()-1):ee.setTripleAt(ye.points[0][0],ye.points[0][1],ye.points[1][0],ye.points[1][1],ye.points[0][0],ye.points[0][1],ee.length()),ee.setTripleAt(ye.points[3][0],ye.points[3][1],ye.points[3][0],ye.points[3][1],ye.points[2][0],ye.points[2][1],ee.length()),Me=ye.points[3]}return Ee.length&&joinLines(ee,Ce,Ee[0][0],L,j),ee},OffsetPathModifier.prototype.processShapes=function($){var m,L,j=this.shapes.length,ee,re,le=this.amount.v,ve=this.miterLimit.v,ye=this.lineJoin;if(le!==0){var Ee,Me;for(L=0;L<j;L+=1){if(Ee=this.shapes[L],Me=Ee.localShapeCollection,!(!Ee.shape._mdf&&!this._mdf&&!$))for(Me.releaseShapes(),Ee.shape._mdf=!0,m=Ee.shape.paths.shapes,re=Ee.shape.paths._length,ee=0;ee<re;ee+=1)Me.addShape(this.processPath(m[ee],le,ye,ve));Ee.shape.paths=Ee.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function getFontProperties($){for(var m=$.fStyle?$.fStyle.split(" "):[],L="normal",j="normal",ee=m.length,re,le=0;le<ee;le+=1)switch(re=m[le].toLowerCase(),re){case"italic":j="italic";break;case"bold":L="700";break;case"black":L="900";break;case"medium":L="500";break;case"regular":case"normal":L="400";break;case"light":case"thin":L="200";break}return{style:j,weight:$.fWeight||L}}var FontManager=function(){var $=5e3,m={w:0,size:0,shapes:[],data:{shapes:[]}},L=[];L=L.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var j=127988,ee=917631,re=917601,le=917626,ve=65039,ye=8205,Ee=127462,Me=127487,Ce=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"];function De(st){var at=st.split(","),Xe,ht=at.length,Bt=[];for(Xe=0;Xe<ht;Xe+=1)at[Xe]!=="sans-serif"&&at[Xe]!=="monospace"&&Bt.push(at[Xe]);return Bt.join(",")}function Be(st,at){var Xe=createTag("span");Xe.setAttribute("aria-hidden",!0),Xe.style.fontFamily=at;var ht=createTag("span");ht.innerText="giItT1WQy@!-/#",Xe.style.position="absolute",Xe.style.left="-10000px",Xe.style.top="-10000px",Xe.style.fontSize="300px",Xe.style.fontVariant="normal",Xe.style.fontStyle="normal",Xe.style.fontWeight="normal",Xe.style.letterSpacing="0",Xe.appendChild(ht),document.body.appendChild(Xe);var Bt=ht.offsetWidth;return ht.style.fontFamily=De(st)+", "+at,{node:ht,w:Bt,parent:Xe}}function ke(){var st,at=this.fonts.length,Xe,ht,Bt=at;for(st=0;st<at;st+=1)this.fonts[st].loaded?Bt-=1:this.fonts[st].fOrigin==="n"||this.fonts[st].origin===0?this.fonts[st].loaded=!0:(Xe=this.fonts[st].monoCase.node,ht=this.fonts[st].monoCase.w,Xe.offsetWidth!==ht?(Bt-=1,this.fonts[st].loaded=!0):(Xe=this.fonts[st].sansCase.node,ht=this.fonts[st].sansCase.w,Xe.offsetWidth!==ht&&(Bt-=1,this.fonts[st].loaded=!0)),this.fonts[st].loaded&&(this.fonts[st].sansCase.parent.parentNode.removeChild(this.fonts[st].sansCase.parent),this.fonts[st].monoCase.parent.parentNode.removeChild(this.fonts[st].monoCase.parent)));Bt!==0&&Date.now()-this.initTime<$?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)}function Fe(st,at){var Xe=document.body&&at?"svg":"canvas",ht,Bt=getFontProperties(st);if(Xe==="svg"){var Dt=createNS("text");Dt.style.fontSize="100px",Dt.setAttribute("font-family",st.fFamily),Dt.setAttribute("font-style",Bt.style),Dt.setAttribute("font-weight",Bt.weight),Dt.textContent="1",st.fClass?(Dt.style.fontFamily="inherit",Dt.setAttribute("class",st.fClass)):Dt.style.fontFamily=st.fFamily,at.appendChild(Dt),ht=Dt}else{var Jt=new OffscreenCanvas(500,500).getContext("2d");Jt.font=Bt.style+" "+Bt.weight+" 100px "+st.fFamily,ht=Jt}function tn(zt){return Xe==="svg"?(ht.textContent=zt,ht.getComputedTextLength()):ht.measureText(zt).width}return{measureText:tn}}function Oe(st,at){if(!st){this.isLoaded=!0;return}if(this.chars){this.isLoaded=!0,this.fonts=st.list;return}if(!document.body){this.isLoaded=!0,st.list.forEach(function(qt){qt.helper=Fe(qt),qt.cache={}}),this.fonts=st.list;return}var Xe=st.list,ht,Bt=Xe.length,Dt=Bt;for(ht=0;ht<Bt;ht+=1){var Jt=!0,tn,zt;if(Xe[ht].loaded=!1,Xe[ht].monoCase=Be(Xe[ht].fFamily,"monospace"),Xe[ht].sansCase=Be(Xe[ht].fFamily,"sans-serif"),!Xe[ht].fPath)Xe[ht].loaded=!0,Dt-=1;else if(Xe[ht].fOrigin==="p"||Xe[ht].origin===3){if(tn=document.querySelectorAll('style[f-forigin="p"][f-family="'+Xe[ht].fFamily+'"], style[f-origin="3"][f-family="'+Xe[ht].fFamily+'"]'),tn.length>0&&(Jt=!1),Jt){var Vt=createTag("style");Vt.setAttribute("f-forigin",Xe[ht].fOrigin),Vt.setAttribute("f-origin",Xe[ht].origin),Vt.setAttribute("f-family",Xe[ht].fFamily),Vt.type="text/css",Vt.innerText="@font-face {font-family: "+Xe[ht].fFamily+"; font-style: normal; src: url('"+Xe[ht].fPath+"');}",at.appendChild(Vt)}}else if(Xe[ht].fOrigin==="g"||Xe[ht].origin===1){for(tn=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),zt=0;zt<tn.length;zt+=1)tn[zt].href.indexOf(Xe[ht].fPath)!==-1&&(Jt=!1);if(Jt){var Mt=createTag("link");Mt.setAttribute("f-forigin",Xe[ht].fOrigin),Mt.setAttribute("f-origin",Xe[ht].origin),Mt.type="text/css",Mt.rel="stylesheet",Mt.href=Xe[ht].fPath,document.body.appendChild(Mt)}}else if(Xe[ht].fOrigin==="t"||Xe[ht].origin===2){for(tn=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),zt=0;zt<tn.length;zt+=1)Xe[ht].fPath===tn[zt].src&&(Jt=!1);if(Jt){var Tt=createTag("link");Tt.setAttribute("f-forigin",Xe[ht].fOrigin),Tt.setAttribute("f-origin",Xe[ht].origin),Tt.setAttribute("rel","stylesheet"),Tt.setAttribute("href",Xe[ht].fPath),at.appendChild(Tt)}}Xe[ht].helper=Fe(Xe[ht],at),Xe[ht].cache={},this.fonts.push(Xe[ht])}Dt===0?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}function Ne(st){if(st){this.chars||(this.chars=[]);var at,Xe=st.length,ht,Bt=this.chars.length,Dt;for(at=0;at<Xe;at+=1){for(ht=0,Dt=!1;ht<Bt;)this.chars[ht].style===st[at].style&&this.chars[ht].fFamily===st[at].fFamily&&this.chars[ht].ch===st[at].ch&&(Dt=!0),ht+=1;Dt||(this.chars.push(st[at]),Bt+=1)}}}function ze(st,at,Xe){for(var ht=0,Bt=this.chars.length;ht<Bt;){if(this.chars[ht].ch===st&&this.chars[ht].style===at&&this.chars[ht].fFamily===Xe)return this.chars[ht];ht+=1}return(typeof st=="string"&&st.charCodeAt(0)!==13||!st)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",st,at,Xe)),m}function $e(st,at,Xe){var ht=this.getFontByName(at),Bt=st;if(!ht.cache[Bt]){var Dt=ht.helper;if(st===" "){var Jt=Dt.measureText("|"+st+"|"),tn=Dt.measureText("||");ht.cache[Bt]=(Jt-tn)/100}else ht.cache[Bt]=Dt.measureText(st)/100}return ht.cache[Bt]*Xe}function He(st){for(var at=0,Xe=this.fonts.length;at<Xe;){if(this.fonts[at].fName===st)return this.fonts[at];at+=1}return this.fonts[0]}function We(st){var at=0,Xe=st.charCodeAt(0);if(Xe>=55296&&Xe<=56319){var ht=st.charCodeAt(1);ht>=56320&&ht<=57343&&(at=(Xe-55296)*1024+ht-56320+65536)}return at}function qe(st,at){var Xe=st.toString(16)+at.toString(16);return Ce.indexOf(Xe)!==-1}function Ye(st){return st===ye}function Ze(st){return st===ve}function Ke(st){var at=We(st);return at>=Ee&&at<=Me}function rt(st){return Ke(st.substr(0,2))&&Ke(st.substr(2,2))}function ft(st){return L.indexOf(st)!==-1}function mt(st,at){var Xe=We(st.substr(at,2));if(Xe!==j)return!1;var ht=0;for(at+=2;ht<5;){if(Xe=We(st.substr(at,2)),Xe<re||Xe>le)return!1;ht+=1,at+=2}return We(st.substr(at,2))===ee}function Et(){this.isLoaded=!0}var bt=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};bt.isModifier=qe,bt.isZeroWidthJoiner=Ye,bt.isFlagEmoji=rt,bt.isRegionalCode=Ke,bt.isCombinedCharacter=ft,bt.isRegionalFlag=mt,bt.isVariationSelector=Ze,bt.BLACK_FLAG_CODE_POINT=j;var Ct={addChars:Ne,addFonts:Oe,getCharData:ze,getFontByName:He,measureText:$e,checkLoadedFonts:ke,setIsLoaded:Et};return bt.prototype=Ct,bt}();function SlotManager($){this.animationData=$}SlotManager.prototype.getProp=function($){return this.animationData.slots&&this.animationData.slots[$.sid]?Object.assign($,this.animationData.slots[$.sid].p):$};function slotFactory($){return new SlotManager($)}function RenderableElement(){}RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(m){this.renderableComponents.indexOf(m)===-1&&this.renderableComponents.push(m)},removeRenderableComponent:function(m){this.renderableComponents.indexOf(m)!==-1&&this.renderableComponents.splice(this.renderableComponents.indexOf(m),1)},prepareRenderableFrame:function(m){this.checkLayerLimits(m)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(m){this.data.ip-this.data.st<=m&&this.data.op-this.data.st>m?this.isInRange!==!0&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):this.isInRange!==!1&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var m,L=this.renderableComponents.length;for(m=0;m<L;m+=1)this.renderableComponents[m].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return this.data.ty===5?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=function(){var $={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"};return function(m){return $[m]||""}}();function SliderEffect($,m,L){this.p=PropertyFactory.getProp(m,$.v,0,0,L)}function AngleEffect($,m,L){this.p=PropertyFactory.getProp(m,$.v,0,0,L)}function ColorEffect($,m,L){this.p=PropertyFactory.getProp(m,$.v,1,0,L)}function PointEffect($,m,L){this.p=PropertyFactory.getProp(m,$.v,1,0,L)}function LayerIndexEffect($,m,L){this.p=PropertyFactory.getProp(m,$.v,0,0,L)}function MaskIndexEffect($,m,L){this.p=PropertyFactory.getProp(m,$.v,0,0,L)}function CheckboxEffect($,m,L){this.p=PropertyFactory.getProp(m,$.v,0,0,L)}function NoValueEffect(){this.p={}}function EffectsManager($,m){var L=$.ef||[];this.effectElements=[];var j,ee=L.length,re;for(j=0;j<ee;j+=1)re=new GroupEffect(L[j],m),this.effectElements.push(re)}function GroupEffect($,m){this.init($,m)}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function($,m){this.data=$,this.effectElements=[],this.initDynamicPropertyContainer(m);var L,j=this.data.ef.length,ee,re=this.data.ef;for(L=0;L<j;L+=1){switch(ee=null,re[L].ty){case 0:ee=new SliderEffect(re[L],m,this);break;case 1:ee=new AngleEffect(re[L],m,this);break;case 2:ee=new ColorEffect(re[L],m,this);break;case 3:ee=new PointEffect(re[L],m,this);break;case 4:case 7:ee=new CheckboxEffect(re[L],m,this);break;case 10:ee=new LayerIndexEffect(re[L],m,this);break;case 11:ee=new MaskIndexEffect(re[L],m,this);break;case 5:ee=new EffectsManager(re[L],m);break;default:ee=new NoValueEffect(re[L]);break}ee&&this.effectElements.push(ee)}};function BaseElement(){}BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var m=0,L=this.data.masksProperties.length;m<L;){if(this.data.masksProperties[m].mode!=="n"&&this.data.masksProperties[m].cl!==!1)return!0;m+=1}return!1},initExpressions:function(){var m=getExpressionInterfaces();if(m){var L=m("layer"),j=m("effects"),ee=m("shape"),re=m("text"),le=m("comp");this.layerInterface=L(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var ve=j.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(ve),this.data.ty===0||this.data.xt?this.compInterface=le(this):this.data.ty===4?(this.layerInterface.shapeInterface=ee(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):this.data.ty===5&&(this.layerInterface.textInterface=re(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var m=getBlendMode(this.data.bm),L=this.baseElement||this.layerElement;L.style["mix-blend-mode"]=m},initBaseData:function(m,L,j){this.globalData=L,this.comp=j,this.data=m,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}};function FrameElement(){}FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(m,L){var j,ee=this.dynamicProperties.length;for(j=0;j<ee;j+=1)(L||this._isParent&&this.dynamicProperties[j].propType==="transform")&&(this.dynamicProperties[j].getValue(),this.dynamicProperties[j]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(m){this.dynamicProperties.indexOf(m)===-1&&this.dynamicProperties.push(m)}};function FootageElement($,m,L){this.initFrame(),this.initRenderable(),this.assetData=m.getAssetData($.refId),this.footageData=m.imageLoader.getAsset(this.assetData),this.initBaseData($,m,L)}FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var $=getExpressionInterfaces();if($){var m=$("footage");this.layerInterface=m(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData};function AudioElement($,m,L){this.initFrame(),this.initRenderable(),this.assetData=m.getAssetData($.refId),this.initBaseData($,m,L),this._isPlaying=!1,this._canPlay=!1;var j=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(j),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=$.tm?PropertyFactory.getProp(this,$.tm,0,m.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,$.au&&$.au.lv?$.au.lv:{k:[100]},1,.01,this)}AudioElement.prototype.prepareFrame=function($){if(this.prepareRenderableFrame($,!0),this.prepareProperties($,!0),this.tm._placeholder)this._currentTime=$/this.data.sr;else{var m=this.tm.v;this._currentTime=m}this._volume=this.lv.v[0];var L=this._volume*this._volumeMultiplier;this._previousVolume!==L&&(this._previousVolume=L,this.audio.volume(L))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function($){this.audio.rate($)},AudioElement.prototype.volume=function($){this._volumeMultiplier=$,this._previousVolume=$*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){};function BaseRenderer(){}BaseRenderer.prototype.checkLayers=function($){var m,L=this.layers.length,j;for(this.completeLayers=!0,m=L-1;m>=0;m-=1)this.elements[m]||(j=this.layers[m],j.ip-j.st<=$-this.layers[m].st&&j.op-j.st>$-this.layers[m].st&&this.buildItem(m)),this.completeLayers=this.elements[m]?this.completeLayers:!1;this.checkPendingElements()},BaseRenderer.prototype.createItem=function($){switch($.ty){case 2:return this.createImage($);case 0:return this.createComp($);case 1:return this.createSolid($);case 3:return this.createNull($);case 4:return this.createShape($);case 5:return this.createText($);case 6:return this.createAudio($);case 13:return this.createCamera($);case 15:return this.createFootage($);default:return this.createNull($)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function($){return new AudioElement($,this.globalData,this)},BaseRenderer.prototype.createFootage=function($){return new FootageElement($,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var $,m=this.layers.length;for($=0;$<m;$+=1)this.buildItem($);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function($){this.completeLayers=!1;var m,L=$.length,j,ee=this.layers.length;for(m=0;m<L;m+=1)for(j=0;j<ee;){if(this.layers[j].id===$[m].id){this.layers[j]=$[m];break}j+=1}},BaseRenderer.prototype.setProjectInterface=function($){this.globalData.projectInterface=$},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function($,m,L){for(var j=this.elements,ee=this.layers,re=0,le=ee.length;re<le;)ee[re].ind==m&&(!j[re]||j[re]===!0?(this.buildItem(re),this.addPendingElement($)):(L.push(j[re]),j[re].setAsParent(),ee[re].parent!==void 0?this.buildElementParenting($,ee[re].parent,L):$.setHierarchy(L))),re+=1},BaseRenderer.prototype.addPendingElement=function($){this.pendingElements.push($)},BaseRenderer.prototype.searchExtraCompositions=function($){var m,L=$.length;for(m=0;m<L;m+=1)if($[m].xt){var j=this.createComp($[m]);j.initExpressions(),this.globalData.projectInterface.registerComposition(j)}},BaseRenderer.prototype.getElementById=function($){var m,L=this.elements.length;for(m=0;m<L;m+=1)if(this.elements[m].data.ind===$)return this.elements[m];return null},BaseRenderer.prototype.getElementByPath=function($){var m=$.shift(),L;if(typeof m=="number")L=this.elements[m];else{var j,ee=this.elements.length;for(j=0;j<ee;j+=1)if(this.elements[j].data.nm===m){L=this.elements[j];break}}return $.length===0?L:L.getElementByPath($)},BaseRenderer.prototype.setupGlobalData=function($,m){this.globalData.fontManager=new FontManager,this.globalData.slotManager=slotFactory($),this.globalData.fontManager.addChars($.chars),this.globalData.fontManager.addFonts($.fonts,m),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=$.fr,this.globalData.nm=$.nm,this.globalData.compSize={w:$.w,h:$.h}};var effectTypes={TRANSFORM_EFFECT:"transformEFfect"};function TransformElement(){}TransformElement.prototype={initTransform:function(){var m=new Matrix;this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_localMatMdf:!1,_opMdf:!1,mat:m,localMat:m,localOpacity:1},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var m,L=this.finalTransform.mat,j=0,ee=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;j<ee;){if(this.hierarchy[j].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}j+=1}if(this.finalTransform._matMdf)for(m=this.finalTransform.mProp.v.props,L.cloneFromProps(m),j=0;j<ee;j+=1)L.multiply(this.hierarchy[j].finalTransform.mProp.v)}this.finalTransform._matMdf&&(this.finalTransform._localMatMdf=this.finalTransform._matMdf),this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v)},renderLocalTransform:function(){if(this.localTransforms){var m=0,L=this.localTransforms.length;if(this.finalTransform._localMatMdf=this.finalTransform._matMdf,!this.finalTransform._localMatMdf||!this.finalTransform._opMdf)for(;m<L;)this.localTransforms[m]._mdf&&(this.finalTransform._localMatMdf=!0),this.localTransforms[m]._opMdf&&!this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v,this.finalTransform._opMdf=!0),m+=1;if(this.finalTransform._localMatMdf){var j=this.finalTransform.localMat;for(this.localTransforms[0].matrix.clone(j),m=1;m<L;m+=1){var ee=this.localTransforms[m].matrix;j.multiply(ee)}j.multiply(this.finalTransform.mat)}if(this.finalTransform._opMdf){var re=this.finalTransform.localOpacity;for(m=0;m<L;m+=1)re*=this.localTransforms[m].opacity*.01;this.finalTransform.localOpacity=re}}},searchEffectTransforms:function(){if(this.renderableEffectsManager){var m=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT);if(m.length){this.localTransforms=[],this.finalTransform.localMat=new Matrix;var L=0,j=m.length;for(L=0;L<j;L+=1)this.localTransforms.push(m[L])}}},globalToLocal:function(m){var L=[];L.push(this.finalTransform);for(var j=!0,ee=this.comp;j;)ee.finalTransform?(ee.data.hasMask&&L.splice(0,0,ee.finalTransform),ee=ee.comp):j=!1;var re,le=L.length,ve;for(re=0;re<le;re+=1)ve=L[re].mat.applyToPointArray(0,0,0),m=[m[0]-ve[0],m[1]-ve[1],0];return m},mHelper:new Matrix};function MaskElement($,m,L){this.data=$,this.element=m,this.globalData=L,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var j=this.globalData.defs,ee,re=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(re),this.solidPath="";var le,ve=this.masksProperties,ye=0,Ee=[],Me,Ce,De=createElementID(),Be,ke,Fe,Oe,Ne="clipPath",ze="clip-path";for(ee=0;ee<re;ee+=1)if((ve[ee].mode!=="a"&&ve[ee].mode!=="n"||ve[ee].inv||ve[ee].o.k!==100||ve[ee].o.x)&&(Ne="mask",ze="mask"),(ve[ee].mode==="s"||ve[ee].mode==="i")&&ye===0?(Be=createNS("rect"),Be.setAttribute("fill","#ffffff"),Be.setAttribute("width",this.element.comp.data.w||0),Be.setAttribute("height",this.element.comp.data.h||0),Ee.push(Be)):Be=null,le=createNS("path"),ve[ee].mode==="n")this.viewData[ee]={op:PropertyFactory.getProp(this.element,ve[ee].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,ve[ee],3),elem:le,lastPath:""},j.appendChild(le);else{ye+=1,le.setAttribute("fill",ve[ee].mode==="s"?"#000000":"#ffffff"),le.setAttribute("clip-rule","nonzero");var $e;if(ve[ee].x.k!==0?(Ne="mask",ze="mask",Oe=PropertyFactory.getProp(this.element,ve[ee].x,0,null,this.element),$e=createElementID(),ke=createNS("filter"),ke.setAttribute("id",$e),Fe=createNS("feMorphology"),Fe.setAttribute("operator","erode"),Fe.setAttribute("in","SourceGraphic"),Fe.setAttribute("radius","0"),ke.appendChild(Fe),j.appendChild(ke),le.setAttribute("stroke",ve[ee].mode==="s"?"#000000":"#ffffff")):(Fe=null,Oe=null),this.storedData[ee]={elem:le,x:Oe,expan:Fe,lastPath:"",lastOperator:"",filterId:$e,lastRadius:0},ve[ee].mode==="i"){Ce=Ee.length;var He=createNS("g");for(Me=0;Me<Ce;Me+=1)He.appendChild(Ee[Me]);var We=createNS("mask");We.setAttribute("mask-type","alpha"),We.setAttribute("id",De+"_"+ye),We.appendChild(le),j.appendChild(We),He.setAttribute("mask","url("+getLocationHref()+"#"+De+"_"+ye+")"),Ee.length=0,Ee.push(He)}else Ee.push(le);ve[ee].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[ee]={elem:le,lastPath:"",op:PropertyFactory.getProp(this.element,ve[ee].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,ve[ee],3),invRect:Be},this.viewData[ee].prop.k||this.drawPath(ve[ee],this.viewData[ee].prop.v,this.viewData[ee])}for(this.maskElement=createNS(Ne),re=Ee.length,ee=0;ee<re;ee+=1)this.maskElement.appendChild(Ee[ee]);ye>0&&(this.maskElement.setAttribute("id",De),this.element.maskedElement.setAttribute(ze,"url("+getLocationHref()+"#"+De+")"),j.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}MaskElement.prototype.getMaskProperty=function($){return this.viewData[$].prop},MaskElement.prototype.renderFrame=function($){var m=this.element.finalTransform.mat,L,j=this.masksProperties.length;for(L=0;L<j;L+=1)if((this.viewData[L].prop._mdf||$)&&this.drawPath(this.masksProperties[L],this.viewData[L].prop.v,this.viewData[L]),(this.viewData[L].op._mdf||$)&&this.viewData[L].elem.setAttribute("fill-opacity",this.viewData[L].op.v),this.masksProperties[L].mode!=="n"&&(this.viewData[L].invRect&&(this.element.finalTransform.mProp._mdf||$)&&this.viewData[L].invRect.setAttribute("transform",m.getInverseMatrix().to2dCSS()),this.storedData[L].x&&(this.storedData[L].x._mdf||$))){var ee=this.storedData[L].expan;this.storedData[L].x.v<0?(this.storedData[L].lastOperator!=="erode"&&(this.storedData[L].lastOperator="erode",this.storedData[L].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[L].filterId+")")),ee.setAttribute("radius",-this.storedData[L].x.v)):(this.storedData[L].lastOperator!=="dilate"&&(this.storedData[L].lastOperator="dilate",this.storedData[L].elem.setAttribute("filter",null)),this.storedData[L].elem.setAttribute("stroke-width",this.storedData[L].x.v*2))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var $="M0,0 ";return $+=" h"+this.globalData.compSize.w,$+=" v"+this.globalData.compSize.h,$+=" h-"+this.globalData.compSize.w,$+=" v-"+this.globalData.compSize.h+" ",$},MaskElement.prototype.drawPath=function($,m,L){var j=" M"+m.v[0][0]+","+m.v[0][1],ee,re;for(re=m._length,ee=1;ee<re;ee+=1)j+=" C"+m.o[ee-1][0]+","+m.o[ee-1][1]+" "+m.i[ee][0]+","+m.i[ee][1]+" "+m.v[ee][0]+","+m.v[ee][1];if(m.c&&re>1&&(j+=" C"+m.o[ee-1][0]+","+m.o[ee-1][1]+" "+m.i[0][0]+","+m.i[0][1]+" "+m.v[0][0]+","+m.v[0][1]),L.lastPath!==j){var le="";L.elem&&(m.c&&(le=$.inv?this.solidPath+j:j),L.elem.setAttribute("d",le)),L.lastPath=j}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=function(){var $={};$.createFilter=m,$.createAlphaToLuminanceFilter=L;function m(j,ee){var re=createNS("filter");return re.setAttribute("id",j),ee!==!0&&(re.setAttribute("filterUnits","objectBoundingBox"),re.setAttribute("x","0%"),re.setAttribute("y","0%"),re.setAttribute("width","100%"),re.setAttribute("height","100%")),re}function L(){var j=createNS("feColorMatrix");return j.setAttribute("type","matrix"),j.setAttribute("color-interpolation-filters","sRGB"),j.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),j}return $}(),featureSupport=function(){var $={maskType:!0,svgLumaHidden:!0,offscreenCanvas:typeof OffscreenCanvas<"u"};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&($.maskType=!1),/firefox/i.test(navigator.userAgent)&&($.svgLumaHidden=!1),$}(),registeredEffects$1={},idPrefix="filter_result_";function SVGEffects($){var m,L="SourceGraphic",j=$.data.ef?$.data.ef.length:0,ee=createElementID(),re=filtersFactory.createFilter(ee,!0),le=0;this.filters=[];var ve;for(m=0;m<j;m+=1){ve=null;var ye=$.data.ef[m].ty;if(registeredEffects$1[ye]){var Ee=registeredEffects$1[ye].effect;ve=new Ee(re,$.effectsManager.effectElements[m],$,idPrefix+le,L),L=idPrefix+le,registeredEffects$1[ye].countsAsEffect&&(le+=1)}ve&&this.filters.push(ve)}le&&($.globalData.defs.appendChild(re),$.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+ee+")")),this.filters.length&&$.addRenderableComponent(this)}SVGEffects.prototype.renderFrame=function($){var m,L=this.filters.length;for(m=0;m<L;m+=1)this.filters[m].renderFrame($)},SVGEffects.prototype.getEffects=function($){var m,L=this.filters.length,j=[];for(m=0;m<L;m+=1)this.filters[m].type===$&&j.push(this.filters[m]);return j};function registerEffect$1($,m,L){registeredEffects$1[$]={effect:m,countsAsEffect:L}}function SVGBaseElement(){}SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var m=null;if(this.data.td){this.matteMasks={};var L=createNS("g");L.setAttribute("id",this.layerId),L.appendChild(this.layerElement),m=L,this.globalData.defs.appendChild(L)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),m=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.ty===0&&!this.data.hd){var j=createNS("clipPath"),ee=createNS("path");ee.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var re=createElementID();if(j.setAttribute("id",re),j.appendChild(ee),this.globalData.defs.appendChild(j),this.checkMasks()){var le=createNS("g");le.setAttribute("clip-path","url("+getLocationHref()+"#"+re+")"),le.appendChild(this.layerElement),this.transformedElement=le,m?m.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+re+")")}this.data.bm!==0&&this.setBlendMode()},renderElement:function(){this.finalTransform._localMatMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.localMat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.localOpacity)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this),this.searchEffectTransforms()},getMatte:function(m){if(this.matteMasks||(this.matteMasks={}),!this.matteMasks[m]){var L=this.layerId+"_"+m,j,ee,re,le;if(m===1||m===3){var ve=createNS("mask");ve.setAttribute("id",L),ve.setAttribute("mask-type",m===3?"luminance":"alpha"),re=createNS("use"),re.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),ve.appendChild(re),this.globalData.defs.appendChild(ve),!featureSupport.maskType&&m===1&&(ve.setAttribute("mask-type","luminance"),j=createElementID(),ee=filtersFactory.createFilter(j),this.globalData.defs.appendChild(ee),ee.appendChild(filtersFactory.createAlphaToLuminanceFilter()),le=createNS("g"),le.appendChild(re),ve.appendChild(le),le.setAttribute("filter","url("+getLocationHref()+"#"+j+")"))}else if(m===2){var ye=createNS("mask");ye.setAttribute("id",L),ye.setAttribute("mask-type","alpha");var Ee=createNS("g");ye.appendChild(Ee),j=createElementID(),ee=filtersFactory.createFilter(j);var Me=createNS("feComponentTransfer");Me.setAttribute("in","SourceGraphic"),ee.appendChild(Me);var Ce=createNS("feFuncA");Ce.setAttribute("type","table"),Ce.setAttribute("tableValues","1.0 0.0"),Me.appendChild(Ce),this.globalData.defs.appendChild(ee);var De=createNS("rect");De.setAttribute("width",this.comp.data.w),De.setAttribute("height",this.comp.data.h),De.setAttribute("x","0"),De.setAttribute("y","0"),De.setAttribute("fill","#ffffff"),De.setAttribute("opacity","0"),Ee.setAttribute("filter","url("+getLocationHref()+"#"+j+")"),Ee.appendChild(De),re=createNS("use"),re.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),Ee.appendChild(re),featureSupport.maskType||(ye.setAttribute("mask-type","luminance"),ee.appendChild(filtersFactory.createAlphaToLuminanceFilter()),le=createNS("g"),Ee.appendChild(De),le.appendChild(this.layerElement),Ee.appendChild(le)),this.globalData.defs.appendChild(ye)}this.matteMasks[m]=L}return this.matteMasks[m]},setMatte:function(m){this.matteElement&&this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+m+")")}};function HierarchyElement(){}HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(m){this.hierarchy=m},setAsParent:function(){this._isParent=!0},checkParenting:function(){this.data.parent!==void 0&&this.comp.buildElementParenting(this,this.data.parent,[])}};function RenderableDOMElement(){}(function(){var $={initElement:function(L,j,ee){this.initFrame(),this.initBaseData(L,j,ee),this.initTransform(L,j,ee),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){if(!this.hidden&&(!this.isInRange||this.isTransparent)){var L=this.baseElement||this.layerElement;L.style.display="none",this.hidden=!0}},show:function(){if(this.isInRange&&!this.isTransparent){if(!this.data.hd){var L=this.baseElement||this.layerElement;L.style.display="block"}this.hidden=!1,this._isFirstFrame=!0}},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(L){this._mdf=!1,this.prepareRenderableFrame(L),this.prepareProperties(L,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}};extendPrototype([RenderableElement,createProxyFunction($)],RenderableDOMElement)})();function IImageElement($,m,L){this.assetData=m.getAssetData($.refId),this.assetData&&this.assetData.sid&&(this.assetData=m.slotManager.getProp(this.assetData)),this.initElement($,m,L),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var $=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",$),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect};function ProcessedElement($,m){this.elem=$,this.pos=m}function IShapeElement(){}IShapeElement.prototype={addShapeToModifiers:function(m){var L,j=this.shapeModifiers.length;for(L=0;L<j;L+=1)this.shapeModifiers[L].addShape(m)},isShapeInAnimatedModifiers:function(m){for(var L=0,j=this.shapeModifiers.length;L<j;)if(this.shapeModifiers[L].isAnimatedWithShape(m))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var m,L=this.shapes.length;for(m=0;m<L;m+=1)this.shapes[m].sh.reset();L=this.shapeModifiers.length;var j;for(m=L-1;m>=0&&(j=this.shapeModifiers[m].processShapes(this._isFirstFrame),!j);m-=1);}},searchProcessedElement:function(m){for(var L=this.processedElements,j=0,ee=L.length;j<ee;){if(L[j].elem===m)return L[j].pos;j+=1}return 0},addProcessedElement:function(m,L){for(var j=this.processedElements,ee=j.length;ee;)if(ee-=1,j[ee].elem===m){j[ee].pos=L;return}j.push(new ProcessedElement(m,L))},prepareFrame:function(m){this.prepareRenderableFrame(m),this.prepareProperties(m,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData($,m,L){this.caches=[],this.styles=[],this.transformers=$,this.lStr="",this.sh=L,this.lvl=m,this._isAnimated=!!L.k;for(var j=0,ee=$.length;j<ee;){if($[j].mProps.dynamicProperties.length){this._isAnimated=!0;break}j+=1}}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0};function SVGStyleData($,m){this.data=$,this.type=$.ty,this.d="",this.lvl=m,this._mdf=!1,this.closed=$.hd===!0,this.pElem=createNS("path"),this.msElem=null}SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1};function DashProperty($,m,L,j){this.elem=$,this.frameId=-1,this.dataProps=createSizedArray(m.length),this.renderer=L,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",m.length?m.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(j);var ee,re=m.length||0,le;for(ee=0;ee<re;ee+=1)le=PropertyFactory.getProp($,m[ee].v,0,0,this),this.k=le.k||this.k,this.dataProps[ee]={n:m[ee].n,p:le};this.k||this.getValue(!0),this._isAnimated=this.k}DashProperty.prototype.getValue=function($){if(!(this.elem.globalData.frameId===this.frameId&&!$)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||$,this._mdf)){var m=0,L=this.dataProps.length;for(this.renderer==="svg"&&(this.dashStr=""),m=0;m<L;m+=1)this.dataProps[m].n!=="o"?this.renderer==="svg"?this.dashStr+=" "+this.dataProps[m].p.v:this.dashArray[m]=this.dataProps[m].p.v:this.dashoffset[0]=this.dataProps[m].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty);function SVGStrokeStyleData($,m,L){this.initDynamicPropertyContainer($),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp($,m.o,0,.01,this),this.w=PropertyFactory.getProp($,m.w,0,null,this),this.d=new DashProperty($,m.d||{},"svg",this),this.c=PropertyFactory.getProp($,m.c,1,255,this),this.style=L,this._isAnimated=!!this._isAnimated}extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData);function SVGFillStyleData($,m,L){this.initDynamicPropertyContainer($),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp($,m.o,0,.01,this),this.c=PropertyFactory.getProp($,m.c,1,255,this),this.style=L}extendPrototype([DynamicPropertyContainer],SVGFillStyleData);function SVGNoStyleData($,m,L){this.initDynamicPropertyContainer($),this.getValue=this.iterateDynamicProperties,this.style=L}extendPrototype([DynamicPropertyContainer],SVGNoStyleData);function GradientProperty($,m,L){this.data=m,this.c=createTypedArray("uint8c",m.p*4);var j=m.k.k[0].s?m.k.k[0].s.length-m.p*4:m.k.k.length-m.p*4;this.o=createTypedArray("float32",j),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=j,this.initDynamicPropertyContainer(L),this.prop=PropertyFactory.getProp($,m.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}GradientProperty.prototype.comparePoints=function($,m){for(var L=0,j=this.o.length/2,ee;L<j;){if(ee=Math.abs($[L*4]-$[m*4+L*2]),ee>.01)return!1;L+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!==this.c.length/4)return!1;if(this.data.k.k[0].s)for(var $=0,m=this.data.k.k.length;$<m;){if(!this.comparePoints(this.data.k.k[$].s,this.data.p))return!1;$+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function($){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||$){var m,L=this.data.p*4,j,ee;for(m=0;m<L;m+=1)j=m%4===0?100:255,ee=Math.round(this.prop.v[m]*j),this.c[m]!==ee&&(this.c[m]=ee,this._cmdf=!$);if(this.o.length)for(L=this.prop.v.length,m=this.data.p*4;m<L;m+=1)j=m%2===0?100:1,ee=m%2===0?Math.round(this.prop.v[m]*100):this.prop.v[m],this.o[m-this.data.p*4]!==ee&&(this.o[m-this.data.p*4]=ee,this._omdf=!$);this._mdf=!$}},extendPrototype([DynamicPropertyContainer],GradientProperty);function SVGGradientFillStyleData($,m,L){this.initDynamicPropertyContainer($),this.getValue=this.iterateDynamicProperties,this.initGradientData($,m,L)}SVGGradientFillStyleData.prototype.initGradientData=function($,m,L){this.o=PropertyFactory.getProp($,m.o,0,.01,this),this.s=PropertyFactory.getProp($,m.s,1,null,this),this.e=PropertyFactory.getProp($,m.e,1,null,this),this.h=PropertyFactory.getProp($,m.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp($,m.a||{k:0},0,degToRads,this),this.g=new GradientProperty($,m.g,this),this.style=L,this.stops=[],this.setGradientData(L.pElem,m),this.setGradientOpacity(m,L),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function($,m){var L=createElementID(),j=createNS(m.t===1?"linearGradient":"radialGradient");j.setAttribute("id",L),j.setAttribute("spreadMethod","pad"),j.setAttribute("gradientUnits","userSpaceOnUse");var ee=[],re,le,ve;for(ve=m.g.p*4,le=0;le<ve;le+=4)re=createNS("stop"),j.appendChild(re),ee.push(re);$.setAttribute(m.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+L+")"),this.gf=j,this.cst=ee},SVGGradientFillStyleData.prototype.setGradientOpacity=function($,m){if(this.g._hasOpacity&&!this.g._collapsable){var L,j,ee,re=createNS("mask"),le=createNS("path");re.appendChild(le);var ve=createElementID(),ye=createElementID();re.setAttribute("id",ye);var Ee=createNS($.t===1?"linearGradient":"radialGradient");Ee.setAttribute("id",ve),Ee.setAttribute("spreadMethod","pad"),Ee.setAttribute("gradientUnits","userSpaceOnUse"),ee=$.g.k.k[0].s?$.g.k.k[0].s.length:$.g.k.k.length;var Me=this.stops;for(j=$.g.p*4;j<ee;j+=2)L=createNS("stop"),L.setAttribute("stop-color","rgb(255,255,255)"),Ee.appendChild(L),Me.push(L);le.setAttribute($.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+ve+")"),$.ty==="gs"&&(le.setAttribute("stroke-linecap",lineCapEnum[$.lc||2]),le.setAttribute("stroke-linejoin",lineJoinEnum[$.lj||2]),$.lj===1&&le.setAttribute("stroke-miterlimit",$.ml)),this.of=Ee,this.ms=re,this.ost=Me,this.maskId=ye,m.msElem=le}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData);function SVGGradientStrokeStyleData($,m,L){this.initDynamicPropertyContainer($),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp($,m.w,0,null,this),this.d=new DashProperty($,m.d||{},"svg",this),this.initGradientData($,m,L),this._isAnimated=!!this._isAnimated}extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData($,m,L){this.transform={mProps:$,op:m,container:L},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}var buildShapeString=function(m,L,j,ee){if(L===0)return"";var re=m.o,le=m.i,ve=m.v,ye,Ee=" M"+ee.applyToPointStringified(ve[0][0],ve[0][1]);for(ye=1;ye<L;ye+=1)Ee+=" C"+ee.applyToPointStringified(re[ye-1][0],re[ye-1][1])+" "+ee.applyToPointStringified(le[ye][0],le[ye][1])+" "+ee.applyToPointStringified(ve[ye][0],ve[ye][1]);return j&&L&&(Ee+=" C"+ee.applyToPointStringified(re[ye-1][0],re[ye-1][1])+" "+ee.applyToPointStringified(le[0][0],le[0][1])+" "+ee.applyToPointStringified(ve[0][0],ve[0][1]),Ee+="z"),Ee},SVGElementsRenderer=function(){var $=new Matrix,m=new Matrix,L={createRenderFunction:j};function j(Ce){switch(Ce.ty){case"fl":return ve;case"gf":return Ee;case"gs":return ye;case"st":return Me;case"sh":case"el":case"rc":case"sr":return le;case"tr":return ee;case"no":return re;default:return null}}function ee(Ce,De,Be){(Be||De.transform.op._mdf)&&De.transform.container.setAttribute("opacity",De.transform.op.v),(Be||De.transform.mProps._mdf)&&De.transform.container.setAttribute("transform",De.transform.mProps.v.to2dCSS())}function re(){}function le(Ce,De,Be){var ke,Fe,Oe,Ne,ze,$e,He=De.styles.length,We=De.lvl,qe,Ye,Ze,Ke;for($e=0;$e<He;$e+=1){if(Ne=De.sh._mdf||Be,De.styles[$e].lvl<We){for(Ye=m.reset(),Ze=We-De.styles[$e].lvl,Ke=De.transformers.length-1;!Ne&&Ze>0;)Ne=De.transformers[Ke].mProps._mdf||Ne,Ze-=1,Ke-=1;if(Ne)for(Ze=We-De.styles[$e].lvl,Ke=De.transformers.length-1;Ze>0;)Ye.multiply(De.transformers[Ke].mProps.v),Ze-=1,Ke-=1}else Ye=$;if(qe=De.sh.paths,Fe=qe._length,Ne){for(Oe="",ke=0;ke<Fe;ke+=1)ze=qe.shapes[ke],ze&&ze._length&&(Oe+=buildShapeString(ze,ze._length,ze.c,Ye));De.caches[$e]=Oe}else Oe=De.caches[$e];De.styles[$e].d+=Ce.hd===!0?"":Oe,De.styles[$e]._mdf=Ne||De.styles[$e]._mdf}}function ve(Ce,De,Be){var ke=De.style;(De.c._mdf||Be)&&ke.pElem.setAttribute("fill","rgb("+bmFloor(De.c.v[0])+","+bmFloor(De.c.v[1])+","+bmFloor(De.c.v[2])+")"),(De.o._mdf||Be)&&ke.pElem.setAttribute("fill-opacity",De.o.v)}function ye(Ce,De,Be){Ee(Ce,De,Be),Me(Ce,De,Be)}function Ee(Ce,De,Be){var ke=De.gf,Fe=De.g._hasOpacity,Oe=De.s.v,Ne=De.e.v;if(De.o._mdf||Be){var ze=Ce.ty==="gf"?"fill-opacity":"stroke-opacity";De.style.pElem.setAttribute(ze,De.o.v)}if(De.s._mdf||Be){var $e=Ce.t===1?"x1":"cx",He=$e==="x1"?"y1":"cy";ke.setAttribute($e,Oe[0]),ke.setAttribute(He,Oe[1]),Fe&&!De.g._collapsable&&(De.of.setAttribute($e,Oe[0]),De.of.setAttribute(He,Oe[1]))}var We,qe,Ye,Ze;if(De.g._cmdf||Be){We=De.cst;var Ke=De.g.c;for(Ye=We.length,qe=0;qe<Ye;qe+=1)Ze=We[qe],Ze.setAttribute("offset",Ke[qe*4]+"%"),Ze.setAttribute("stop-color","rgb("+Ke[qe*4+1]+","+Ke[qe*4+2]+","+Ke[qe*4+3]+")")}if(Fe&&(De.g._omdf||Be)){var rt=De.g.o;for(De.g._collapsable?We=De.cst:We=De.ost,Ye=We.length,qe=0;qe<Ye;qe+=1)Ze=We[qe],De.g._collapsable||Ze.setAttribute("offset",rt[qe*2]+"%"),Ze.setAttribute("stop-opacity",rt[qe*2+1])}if(Ce.t===1)(De.e._mdf||Be)&&(ke.setAttribute("x2",Ne[0]),ke.setAttribute("y2",Ne[1]),Fe&&!De.g._collapsable&&(De.of.setAttribute("x2",Ne[0]),De.of.setAttribute("y2",Ne[1])));else{var ft;if((De.s._mdf||De.e._mdf||Be)&&(ft=Math.sqrt(Math.pow(Oe[0]-Ne[0],2)+Math.pow(Oe[1]-Ne[1],2)),ke.setAttribute("r",ft),Fe&&!De.g._collapsable&&De.of.setAttribute("r",ft)),De.e._mdf||De.h._mdf||De.a._mdf||Be){ft||(ft=Math.sqrt(Math.pow(Oe[0]-Ne[0],2)+Math.pow(Oe[1]-Ne[1],2)));var mt=Math.atan2(Ne[1]-Oe[1],Ne[0]-Oe[0]),Et=De.h.v;Et>=1?Et=.99:Et<=-1&&(Et=-.99);var bt=ft*Et,Ct=Math.cos(mt+De.a.v)*bt+Oe[0],st=Math.sin(mt+De.a.v)*bt+Oe[1];ke.setAttribute("fx",Ct),ke.setAttribute("fy",st),Fe&&!De.g._collapsable&&(De.of.setAttribute("fx",Ct),De.of.setAttribute("fy",st))}}}function Me(Ce,De,Be){var ke=De.style,Fe=De.d;Fe&&(Fe._mdf||Be)&&Fe.dashStr&&(ke.pElem.setAttribute("stroke-dasharray",Fe.dashStr),ke.pElem.setAttribute("stroke-dashoffset",Fe.dashoffset[0])),De.c&&(De.c._mdf||Be)&&ke.pElem.setAttribute("stroke","rgb("+bmFloor(De.c.v[0])+","+bmFloor(De.c.v[1])+","+bmFloor(De.c.v[2])+")"),(De.o._mdf||Be)&&ke.pElem.setAttribute("stroke-opacity",De.o.v),(De.w._mdf||Be)&&(ke.pElem.setAttribute("stroke-width",De.w.v),ke.msElem&&ke.msElem.setAttribute("stroke-width",De.w.v))}return L}();function SVGShapeElement($,m,L){this.shapes=[],this.shapesData=$.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement($,m,L),this.prevViewData=[]}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var $,m=this.shapes.length,L,j,ee=this.stylesList.length,re,le=[],ve=!1;for(j=0;j<ee;j+=1){for(re=this.stylesList[j],ve=!1,le.length=0,$=0;$<m;$+=1)L=this.shapes[$],L.styles.indexOf(re)!==-1&&(le.push(L),ve=L._isAnimated||ve);le.length>1&&ve&&this.setShapesAsAnimated(le)}},SVGShapeElement.prototype.setShapesAsAnimated=function($){var m,L=$.length;for(m=0;m<L;m+=1)$[m].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function($,m){var L,j=new SVGStyleData($,m),ee=j.pElem;if($.ty==="st")L=new SVGStrokeStyleData(this,$,j);else if($.ty==="fl")L=new SVGFillStyleData(this,$,j);else if($.ty==="gf"||$.ty==="gs"){var re=$.ty==="gf"?SVGGradientFillStyleData:SVGGradientStrokeStyleData;L=new re(this,$,j),this.globalData.defs.appendChild(L.gf),L.maskId&&(this.globalData.defs.appendChild(L.ms),this.globalData.defs.appendChild(L.of),ee.setAttribute("mask","url("+getLocationHref()+"#"+L.maskId+")"))}else $.ty==="no"&&(L=new SVGNoStyleData(this,$,j));return($.ty==="st"||$.ty==="gs")&&(ee.setAttribute("stroke-linecap",lineCapEnum[$.lc||2]),ee.setAttribute("stroke-linejoin",lineJoinEnum[$.lj||2]),ee.setAttribute("fill-opacity","0"),$.lj===1&&ee.setAttribute("stroke-miterlimit",$.ml)),$.r===2&&ee.setAttribute("fill-rule","evenodd"),$.ln&&ee.setAttribute("id",$.ln),$.cl&&ee.setAttribute("class",$.cl),$.bm&&(ee.style["mix-blend-mode"]=getBlendMode($.bm)),this.stylesList.push(j),this.addToAnimatedContents($,L),L},SVGShapeElement.prototype.createGroupElement=function($){var m=new ShapeGroupData;return $.ln&&m.gr.setAttribute("id",$.ln),$.cl&&m.gr.setAttribute("class",$.cl),$.bm&&(m.gr.style["mix-blend-mode"]=getBlendMode($.bm)),m},SVGShapeElement.prototype.createTransformElement=function($,m){var L=TransformPropertyFactory.getTransformProperty(this,$,this),j=new SVGTransformData(L,L.o,m);return this.addToAnimatedContents($,j),j},SVGShapeElement.prototype.createShapeElement=function($,m,L){var j=4;$.ty==="rc"?j=5:$.ty==="el"?j=6:$.ty==="sr"&&(j=7);var ee=ShapePropertyFactory.getShapeProp(this,$,j,this),re=new SVGShapeData(m,L,ee);return this.shapes.push(re),this.addShapeToModifiers(re),this.addToAnimatedContents($,re),re},SVGShapeElement.prototype.addToAnimatedContents=function($,m){for(var L=0,j=this.animatedContents.length;L<j;){if(this.animatedContents[L].element===m)return;L+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction($),element:m,data:$})},SVGShapeElement.prototype.setElementStyles=function($){var m=$.styles,L,j=this.stylesList.length;for(L=0;L<j;L+=1)this.stylesList[L].closed||m.push(this.stylesList[L])},SVGShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var $,m=this.itemsData.length;for($=0;$<m;$+=1)this.prevViewData[$]=this.itemsData[$];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),m=this.dynamicProperties.length,$=0;$<m;$+=1)this.dynamicProperties[$].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function($,m,L,j,ee,re,le){var ve=[].concat(re),ye,Ee=$.length-1,Me,Ce,De=[],Be=[],ke,Fe,Oe;for(ye=Ee;ye>=0;ye-=1){if(Oe=this.searchProcessedElement($[ye]),Oe?m[ye]=L[Oe-1]:$[ye]._render=le,$[ye].ty==="fl"||$[ye].ty==="st"||$[ye].ty==="gf"||$[ye].ty==="gs"||$[ye].ty==="no")Oe?m[ye].style.closed=!1:m[ye]=this.createStyleElement($[ye],ee),$[ye]._render&&m[ye].style.pElem.parentNode!==j&&j.appendChild(m[ye].style.pElem),De.push(m[ye].style);else if($[ye].ty==="gr"){if(!Oe)m[ye]=this.createGroupElement($[ye]);else for(Ce=m[ye].it.length,Me=0;Me<Ce;Me+=1)m[ye].prevViewData[Me]=m[ye].it[Me];this.searchShapes($[ye].it,m[ye].it,m[ye].prevViewData,m[ye].gr,ee+1,ve,le),$[ye]._render&&m[ye].gr.parentNode!==j&&j.appendChild(m[ye].gr)}else $[ye].ty==="tr"?(Oe||(m[ye]=this.createTransformElement($[ye],j)),ke=m[ye].transform,ve.push(ke)):$[ye].ty==="sh"||$[ye].ty==="rc"||$[ye].ty==="el"||$[ye].ty==="sr"?(Oe||(m[ye]=this.createShapeElement($[ye],ve,ee)),this.setElementStyles(m[ye])):$[ye].ty==="tm"||$[ye].ty==="rd"||$[ye].ty==="ms"||$[ye].ty==="pb"||$[ye].ty==="zz"||$[ye].ty==="op"?(Oe?(Fe=m[ye],Fe.closed=!1):(Fe=ShapeModifiers.getModifier($[ye].ty),Fe.init(this,$[ye]),m[ye]=Fe,this.shapeModifiers.push(Fe)),Be.push(Fe)):$[ye].ty==="rp"&&(Oe?(Fe=m[ye],Fe.closed=!0):(Fe=ShapeModifiers.getModifier($[ye].ty),m[ye]=Fe,Fe.init(this,$,ye,m),this.shapeModifiers.push(Fe),le=!1),Be.push(Fe));this.addProcessedElement($[ye],ye+1)}for(Ee=De.length,ye=0;ye<Ee;ye+=1)De[ye].closed=!0;for(Ee=Be.length,ye=0;ye<Ee;ye+=1)Be[ye].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){this.renderModifiers();var $,m=this.stylesList.length;for($=0;$<m;$+=1)this.stylesList[$].reset();for(this.renderShape(),$=0;$<m;$+=1)(this.stylesList[$]._mdf||this._isFirstFrame)&&(this.stylesList[$].msElem&&(this.stylesList[$].msElem.setAttribute("d",this.stylesList[$].d),this.stylesList[$].d="M0 0"+this.stylesList[$].d),this.stylesList[$].pElem.setAttribute("d",this.stylesList[$].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var $,m=this.animatedContents.length,L;for($=0;$<m;$+=1)L=this.animatedContents[$],(this._isFirstFrame||L.element._isAnimated)&&L.data!==!0&&L.fn(L.data,L.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null};function LetterProps($,m,L,j,ee,re){this.o=$,this.sw=m,this.sc=L,this.fc=j,this.m=ee,this.p=re,this._mdf={o:!0,sw:!!m,sc:!!L,fc:!!j,m:!0,p:!0}}LetterProps.prototype.update=function($,m,L,j,ee,re){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var le=!1;return this.o!==$&&(this.o=$,this._mdf.o=!0,le=!0),this.sw!==m&&(this.sw=m,this._mdf.sw=!0,le=!0),this.sc!==L&&(this.sc=L,this._mdf.sc=!0,le=!0),this.fc!==j&&(this.fc=j,this._mdf.fc=!0,le=!0),this.m!==ee&&(this.m=ee,this._mdf.m=!0,le=!0),re.length&&(this.p[0]!==re[0]||this.p[1]!==re[1]||this.p[4]!==re[4]||this.p[5]!==re[5]||this.p[12]!==re[12]||this.p[13]!==re[13])&&(this.p=re,this._mdf.p=!0,le=!0),le};function TextProperty($,m){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,m.d&&m.d.sid&&(m.d=$.globalData.slotManager.getProp(m.d)),this.data=m,this.elem=$,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function($,m){for(var L in m)Object.prototype.hasOwnProperty.call(m,L)&&($[L]=m[L]);return $},TextProperty.prototype.setCurrentData=function($){$.__complete||this.completeTextData($),this.currentData=$,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function($){this.effectsSequence.push($),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function($){if(!((this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)&&!$)){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var m=this.currentData,L=this.keysIndex;if(this.lock){this.setCurrentData(this.currentData);return}this.lock=!0,this._mdf=!1;var j,ee=this.effectsSequence.length,re=$||this.data.d.k[this.keysIndex].s;for(j=0;j<ee;j+=1)L!==this.keysIndex?re=this.effectsSequence[j](re,re.t):re=this.effectsSequence[j](this.currentData,re.t);m!==re&&this.setCurrentData(re),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}},TextProperty.prototype.getKeyframeValue=function(){for(var $=this.data.d.k,m=this.elem.comp.renderedFrame,L=0,j=$.length;L<=j-1&&!(L===j-1||$[L+1].t>m);)L+=1;return this.keysIndex!==L&&(this.keysIndex=L),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function($){for(var m=[],L=0,j=$.length,ee,re,le=!1,ve=!1,ye="";L<j;)le=ve,ve=!1,ee=$.charCodeAt(L),ye=$.charAt(L),FontManager.isCombinedCharacter(ee)?le=!0:ee>=55296&&ee<=56319?FontManager.isRegionalFlag($,L)?ye=$.substr(L,14):(re=$.charCodeAt(L+1),re>=56320&&re<=57343&&(FontManager.isModifier(ee,re)?(ye=$.substr(L,2),le=!0):FontManager.isFlagEmoji($.substr(L,4))?ye=$.substr(L,4):ye=$.substr(L,2))):ee>56319?(re=$.charCodeAt(L+1),FontManager.isVariationSelector(ee)&&(le=!0)):FontManager.isZeroWidthJoiner(ee)&&(le=!0,ve=!0),le?(m[m.length-1]+=ye,le=!1):m.push(ye),L+=ye.length;return m},TextProperty.prototype.completeTextData=function($){$.__complete=!0;var m=this.elem.globalData.fontManager,L=this.data,j=[],ee,re,le,ve=0,ye,Ee=L.m.g,Me=0,Ce=0,De=0,Be=[],ke=0,Fe=0,Oe,Ne,ze=m.getFontByName($.f),$e,He=0,We=getFontProperties(ze);$.fWeight=We.weight,$.fStyle=We.style,$.finalSize=$.s,$.finalText=this.buildFinalText($.t),re=$.finalText.length,$.finalLineHeight=$.lh;var qe=$.tr/1e3*$.finalSize,Ye;if($.sz)for(var Ze=!0,Ke=$.sz[0],rt=$.sz[1],ft,mt;Ze;){mt=this.buildFinalText($.t),ft=0,ke=0,re=mt.length,qe=$.tr/1e3*$.finalSize;var Et=-1;for(ee=0;ee<re;ee+=1)Ye=mt[ee].charCodeAt(0),le=!1,mt[ee]===" "?Et=ee:(Ye===13||Ye===3)&&(ke=0,le=!0,ft+=$.finalLineHeight||$.finalSize*1.2),m.chars?($e=m.getCharData(mt[ee],ze.fStyle,ze.fFamily),He=le?0:$e.w*$.finalSize/100):He=m.measureText(mt[ee],$.f,$.finalSize),ke+He>Ke&&mt[ee]!==" "?(Et===-1?re+=1:ee=Et,ft+=$.finalLineHeight||$.finalSize*1.2,mt.splice(ee,Et===ee?1:0,"\r"),Et=-1,ke=0):(ke+=He,ke+=qe);ft+=ze.ascent*$.finalSize/100,this.canResize&&$.finalSize>this.minimumFontSize&&rt<ft?($.finalSize-=1,$.finalLineHeight=$.finalSize*$.lh/$.s):($.finalText=mt,re=$.finalText.length,Ze=!1)}ke=-qe,He=0;var bt=0,Ct;for(ee=0;ee<re;ee+=1)if(le=!1,Ct=$.finalText[ee],Ye=Ct.charCodeAt(0),Ye===13||Ye===3?(bt=0,Be.push(ke),Fe=ke>Fe?ke:Fe,ke=-2*qe,ye="",le=!0,De+=1):ye=Ct,m.chars?($e=m.getCharData(Ct,ze.fStyle,m.getFontByName($.f).fFamily),He=le?0:$e.w*$.finalSize/100):He=m.measureText(ye,$.f,$.finalSize),Ct===" "?bt+=He+qe:(ke+=He+qe+bt,bt=0),j.push({l:He,an:He,add:Me,n:le,anIndexes:[],val:ye,line:De,animatorJustifyOffset:0}),Ee==2){if(Me+=He,ye===""||ye===" "||ee===re-1){for((ye===""||ye===" ")&&(Me-=He);Ce<=ee;)j[Ce].an=Me,j[Ce].ind=ve,j[Ce].extra=He,Ce+=1;ve+=1,Me=0}}else if(Ee==3){if(Me+=He,ye===""||ee===re-1){for(ye===""&&(Me-=He);Ce<=ee;)j[Ce].an=Me,j[Ce].ind=ve,j[Ce].extra=He,Ce+=1;Me=0,ve+=1}}else j[ve].ind=ve,j[ve].extra=0,ve+=1;if($.l=j,Fe=ke>Fe?ke:Fe,Be.push(ke),$.sz)$.boxWidth=$.sz[0],$.justifyOffset=0;else switch($.boxWidth=Fe,$.j){case 1:$.justifyOffset=-$.boxWidth;break;case 2:$.justifyOffset=-$.boxWidth/2;break;default:$.justifyOffset=0}$.lineWidths=Be;var st=L.a,at,Xe;Ne=st.length;var ht,Bt,Dt=[];for(Oe=0;Oe<Ne;Oe+=1){for(at=st[Oe],at.a.sc&&($.strokeColorAnim=!0),at.a.sw&&($.strokeWidthAnim=!0),(at.a.fc||at.a.fh||at.a.fs||at.a.fb)&&($.fillColorAnim=!0),Bt=0,ht=at.s.b,ee=0;ee<re;ee+=1)Xe=j[ee],Xe.anIndexes[Oe]=Bt,(ht==1&&Xe.val!==""||ht==2&&Xe.val!==""&&Xe.val!==" "||ht==3&&(Xe.n||Xe.val==" "||ee==re-1)||ht==4&&(Xe.n||ee==re-1))&&(at.s.rn===1&&Dt.push(Bt),Bt+=1);L.a[Oe].s.totalChars=Bt;var Jt=-1,tn;if(at.s.rn===1)for(ee=0;ee<re;ee+=1)Xe=j[ee],Jt!=Xe.anIndexes[Oe]&&(Jt=Xe.anIndexes[Oe],tn=Dt.splice(Math.floor(Math.random()*Dt.length),1)[0]),Xe.anIndexes[Oe]=tn}$.yOffset=$.finalLineHeight||$.finalSize*1.2,$.ls=$.ls||0,$.ascent=ze.ascent*$.finalSize/100},TextProperty.prototype.updateDocumentData=function($,m){m=m===void 0?this.keysIndex:m;var L=this.copyData({},this.data.d.k[m].s);L=this.copyData(L,$),this.data.d.k[m].s=L,this.recalculate(m),this.setCurrentData(L),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function($){var m=this.data.d.k[$].s;m.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(m)},TextProperty.prototype.canResizeFont=function($){this.canResize=$,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function($){this.minimumFontSize=Math.floor($)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var $=Math.max,m=Math.min,L=Math.floor;function j(re,le){this._currentTextLength=-1,this.k=!1,this.data=le,this.elem=re,this.comp=re.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(re),this.s=PropertyFactory.getProp(re,le.s||{k:0},0,0,this),"e"in le?this.e=PropertyFactory.getProp(re,le.e,0,0,this):this.e={v:100},this.o=PropertyFactory.getProp(re,le.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(re,le.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(re,le.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(re,le.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(re,le.a,0,.01,this),this.dynamicProperties.length||this.getValue()}j.prototype={getMult:function(le){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var ve=0,ye=0,Ee=1,Me=1;this.ne.v>0?ve=this.ne.v/100:ye=-this.ne.v/100,this.xe.v>0?Ee=1-this.xe.v/100:Me=1+this.xe.v/100;var Ce=BezierFactory.getBezierEasing(ve,ye,Ee,Me).get,De=0,Be=this.finalS,ke=this.finalE,Fe=this.data.sh;if(Fe===2)ke===Be?De=le>=ke?1:0:De=$(0,m(.5/(ke-Be)+(le-Be)/(ke-Be),1)),De=Ce(De);else if(Fe===3)ke===Be?De=le>=ke?0:1:De=1-$(0,m(.5/(ke-Be)+(le-Be)/(ke-Be),1)),De=Ce(De);else if(Fe===4)ke===Be?De=0:(De=$(0,m(.5/(ke-Be)+(le-Be)/(ke-Be),1)),De<.5?De*=2:De=1-2*(De-.5)),De=Ce(De);else if(Fe===5){if(ke===Be)De=0;else{var Oe=ke-Be;le=m($(0,le+.5-Be),ke-Be);var Ne=-Oe/2+le,ze=Oe/2;De=Math.sqrt(1-Ne*Ne/(ze*ze))}De=Ce(De)}else Fe===6?(ke===Be?De=0:(le=m($(0,le+.5-Be),ke-Be),De=(1+Math.cos(Math.PI+Math.PI*2*le/(ke-Be)))/2),De=Ce(De)):(le>=L(Be)&&(le-Be<0?De=$(0,m(m(ke,1)-(Be-le),1)):De=$(0,m(ke-le,1))),De=Ce(De));if(this.sm.v!==100){var $e=this.sm.v*.01;$e===0&&($e=1e-8);var He=.5-$e*.5;De<He?De=0:(De=(De-He)/$e,De>1&&(De=1))}return De*this.a.v},getValue:function(le){this.iterateDynamicProperties(),this._mdf=le||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,le&&this.data.r===2&&(this.e.v=this._currentTextLength);var ve=this.data.r===2?1:100/this.data.totalChars,ye=this.o.v/ve,Ee=this.s.v/ve+ye,Me=this.e.v/ve+ye;if(Ee>Me){var Ce=Ee;Ee=Me,Me=Ce}this.finalS=Ee,this.finalE=Me}},extendPrototype([DynamicPropertyContainer],j);function ee(re,le,ve){return new j(re,le)}return{getTextSelectorProp:ee}}();function TextAnimatorDataProperty($,m,L){var j={propType:!1},ee=PropertyFactory.getProp,re=m.a;this.a={r:re.r?ee($,re.r,0,degToRads,L):j,rx:re.rx?ee($,re.rx,0,degToRads,L):j,ry:re.ry?ee($,re.ry,0,degToRads,L):j,sk:re.sk?ee($,re.sk,0,degToRads,L):j,sa:re.sa?ee($,re.sa,0,degToRads,L):j,s:re.s?ee($,re.s,1,.01,L):j,a:re.a?ee($,re.a,1,0,L):j,o:re.o?ee($,re.o,0,.01,L):j,p:re.p?ee($,re.p,1,0,L):j,sw:re.sw?ee($,re.sw,0,0,L):j,sc:re.sc?ee($,re.sc,1,0,L):j,fc:re.fc?ee($,re.fc,1,0,L):j,fh:re.fh?ee($,re.fh,0,0,L):j,fs:re.fs?ee($,re.fs,0,.01,L):j,fb:re.fb?ee($,re.fb,0,.01,L):j,t:re.t?ee($,re.t,0,0,L):j},this.s=TextSelectorProp.getTextSelectorProp($,m.s,L),this.s.t=m.s.t}function TextAnimatorProperty($,m,L){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=$,this._renderType=m,this._elem=L,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(L)}TextAnimatorProperty.prototype.searchProperties=function(){var $,m=this._textData.a.length,L,j=PropertyFactory.getProp;for($=0;$<m;$+=1)L=this._textData.a[$],this._animatorsData[$]=new TextAnimatorDataProperty(this._elem,L,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:j(this._elem,this._textData.p.a,0,0,this),f:j(this._elem,this._textData.p.f,0,0,this),l:j(this._elem,this._textData.p.l,0,0,this),r:j(this._elem,this._textData.p.r,0,0,this),p:j(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=j(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function($,m){if(this.lettersChangedFlag=m,!(!this._mdf&&!this._isFirstFrame&&!m&&(!this._hasMaskedPath||!this._pathData.m._mdf))){this._isFirstFrame=!1;var L=this._moreOptions.alignment.v,j=this._animatorsData,ee=this._textData,re=this.mHelper,le=this._renderType,ve=this.renderedLetters.length,ye,Ee,Me,Ce,De=$.l,Be,ke,Fe,Oe,Ne,ze,$e,He,We,qe,Ye,Ze,Ke,rt,ft;if(this._hasMaskedPath){if(ft=this._pathData.m,!this._pathData.n||this._pathData._mdf){var mt=ft.v;this._pathData.r.v&&(mt=mt.reverse()),Be={tLength:0,segments:[]},Ce=mt._length-1;var Et;for(Ze=0,Me=0;Me<Ce;Me+=1)Et=bez.buildBezierData(mt.v[Me],mt.v[Me+1],[mt.o[Me][0]-mt.v[Me][0],mt.o[Me][1]-mt.v[Me][1]],[mt.i[Me+1][0]-mt.v[Me+1][0],mt.i[Me+1][1]-mt.v[Me+1][1]]),Be.tLength+=Et.segmentLength,Be.segments.push(Et),Ze+=Et.segmentLength;Me=Ce,ft.v.c&&(Et=bez.buildBezierData(mt.v[Me],mt.v[0],[mt.o[Me][0]-mt.v[Me][0],mt.o[Me][1]-mt.v[Me][1]],[mt.i[0][0]-mt.v[0][0],mt.i[0][1]-mt.v[0][1]]),Be.tLength+=Et.segmentLength,Be.segments.push(Et),Ze+=Et.segmentLength),this._pathData.pi=Be}if(Be=this._pathData.pi,ke=this._pathData.f.v,$e=0,ze=1,Oe=0,Ne=!0,qe=Be.segments,ke<0&&ft.v.c)for(Be.tLength<Math.abs(ke)&&(ke=-Math.abs(ke)%Be.tLength),$e=qe.length-1,We=qe[$e].points,ze=We.length-1;ke<0;)ke+=We[ze].partialLength,ze-=1,ze<0&&($e-=1,We=qe[$e].points,ze=We.length-1);We=qe[$e].points,He=We[ze-1],Fe=We[ze],Ye=Fe.partialLength}Ce=De.length,ye=0,Ee=0;var bt=$.finalSize*1.2*.714,Ct=!0,st,at,Xe,ht,Bt;ht=j.length;var Dt,Jt=-1,tn,zt,Vt,Mt=ke,Tt=$e,qt=ze,on=-1,pn,kt,Mn,wt,It,Kt,ln,nn,gn="",xn=this.defaultPropsArray,St;if($.j===2||$.j===1){var At=0,Ut=0,Zt=$.j===2?-.5:-1,cn=0,sn=!0;for(Me=0;Me<Ce;Me+=1)if(De[Me].n){for(At&&(At+=Ut);cn<Me;)De[cn].animatorJustifyOffset=At,cn+=1;At=0,sn=!0}else{for(Xe=0;Xe<ht;Xe+=1)st=j[Xe].a,st.t.propType&&(sn&&$.j===2&&(Ut+=st.t.v*Zt),at=j[Xe].s,Dt=at.getMult(De[Me].anIndexes[Xe],ee.a[Xe].s.totalChars),Dt.length?At+=st.t.v*Dt[0]*Zt:At+=st.t.v*Dt*Zt);sn=!1}for(At&&(At+=Ut);cn<Me;)De[cn].animatorJustifyOffset=At,cn+=1}for(Me=0;Me<Ce;Me+=1){if(re.reset(),pn=1,De[Me].n)ye=0,Ee+=$.yOffset,Ee+=Ct?1:0,ke=Mt,Ct=!1,this._hasMaskedPath&&($e=Tt,ze=qt,We=qe[$e].points,He=We[ze-1],Fe=We[ze],Ye=Fe.partialLength,Oe=0),gn="",nn="",Kt="",St="",xn=this.defaultPropsArray;else{if(this._hasMaskedPath){if(on!==De[Me].line){switch($.j){case 1:ke+=Ze-$.lineWidths[De[Me].line];break;case 2:ke+=(Ze-$.lineWidths[De[Me].line])/2;break}on=De[Me].line}Jt!==De[Me].ind&&(De[Jt]&&(ke+=De[Jt].extra),ke+=De[Me].an/2,Jt=De[Me].ind),ke+=L[0]*De[Me].an*.005;var bn=0;for(Xe=0;Xe<ht;Xe+=1)st=j[Xe].a,st.p.propType&&(at=j[Xe].s,Dt=at.getMult(De[Me].anIndexes[Xe],ee.a[Xe].s.totalChars),Dt.length?bn+=st.p.v[0]*Dt[0]:bn+=st.p.v[0]*Dt),st.a.propType&&(at=j[Xe].s,Dt=at.getMult(De[Me].anIndexes[Xe],ee.a[Xe].s.totalChars),Dt.length?bn+=st.a.v[0]*Dt[0]:bn+=st.a.v[0]*Dt);for(Ne=!0,this._pathData.a.v&&(ke=De[0].an*.5+(Ze-this._pathData.f.v-De[0].an*.5-De[De.length-1].an*.5)*Jt/(Ce-1),ke+=this._pathData.f.v);Ne;)Oe+Ye>=ke+bn||!We?(Ke=(ke+bn-Oe)/Fe.partialLength,zt=He.point[0]+(Fe.point[0]-He.point[0])*Ke,Vt=He.point[1]+(Fe.point[1]-He.point[1])*Ke,re.translate(-L[0]*De[Me].an*.005,-(L[1]*bt)*.01),Ne=!1):We&&(Oe+=Fe.partialLength,ze+=1,ze>=We.length&&(ze=0,$e+=1,qe[$e]?We=qe[$e].points:ft.v.c?(ze=0,$e=0,We=qe[$e].points):(Oe-=Fe.partialLength,We=null)),We&&(He=Fe,Fe=We[ze],Ye=Fe.partialLength));tn=De[Me].an/2-De[Me].add,re.translate(-tn,0,0)}else tn=De[Me].an/2-De[Me].add,re.translate(-tn,0,0),re.translate(-L[0]*De[Me].an*.005,-L[1]*bt*.01,0);for(Xe=0;Xe<ht;Xe+=1)st=j[Xe].a,st.t.propType&&(at=j[Xe].s,Dt=at.getMult(De[Me].anIndexes[Xe],ee.a[Xe].s.totalChars),(ye!==0||$.j!==0)&&(this._hasMaskedPath?Dt.length?ke+=st.t.v*Dt[0]:ke+=st.t.v*Dt:Dt.length?ye+=st.t.v*Dt[0]:ye+=st.t.v*Dt));for($.strokeWidthAnim&&(Mn=$.sw||0),$.strokeColorAnim&&($.sc?kt=[$.sc[0],$.sc[1],$.sc[2]]:kt=[0,0,0]),$.fillColorAnim&&$.fc&&(wt=[$.fc[0],$.fc[1],$.fc[2]]),Xe=0;Xe<ht;Xe+=1)st=j[Xe].a,st.a.propType&&(at=j[Xe].s,Dt=at.getMult(De[Me].anIndexes[Xe],ee.a[Xe].s.totalChars),Dt.length?re.translate(-st.a.v[0]*Dt[0],-st.a.v[1]*Dt[1],st.a.v[2]*Dt[2]):re.translate(-st.a.v[0]*Dt,-st.a.v[1]*Dt,st.a.v[2]*Dt));for(Xe=0;Xe<ht;Xe+=1)st=j[Xe].a,st.s.propType&&(at=j[Xe].s,Dt=at.getMult(De[Me].anIndexes[Xe],ee.a[Xe].s.totalChars),Dt.length?re.scale(1+(st.s.v[0]-1)*Dt[0],1+(st.s.v[1]-1)*Dt[1],1):re.scale(1+(st.s.v[0]-1)*Dt,1+(st.s.v[1]-1)*Dt,1));for(Xe=0;Xe<ht;Xe+=1){if(st=j[Xe].a,at=j[Xe].s,Dt=at.getMult(De[Me].anIndexes[Xe],ee.a[Xe].s.totalChars),st.sk.propType&&(Dt.length?re.skewFromAxis(-st.sk.v*Dt[0],st.sa.v*Dt[1]):re.skewFromAxis(-st.sk.v*Dt,st.sa.v*Dt)),st.r.propType&&(Dt.length?re.rotateZ(-st.r.v*Dt[2]):re.rotateZ(-st.r.v*Dt)),st.ry.propType&&(Dt.length?re.rotateY(st.ry.v*Dt[1]):re.rotateY(st.ry.v*Dt)),st.rx.propType&&(Dt.length?re.rotateX(st.rx.v*Dt[0]):re.rotateX(st.rx.v*Dt)),st.o.propType&&(Dt.length?pn+=(st.o.v*Dt[0]-pn)*Dt[0]:pn+=(st.o.v*Dt-pn)*Dt),$.strokeWidthAnim&&st.sw.propType&&(Dt.length?Mn+=st.sw.v*Dt[0]:Mn+=st.sw.v*Dt),$.strokeColorAnim&&st.sc.propType)for(It=0;It<3;It+=1)Dt.length?kt[It]+=(st.sc.v[It]-kt[It])*Dt[0]:kt[It]+=(st.sc.v[It]-kt[It])*Dt;if($.fillColorAnim&&$.fc){if(st.fc.propType)for(It=0;It<3;It+=1)Dt.length?wt[It]+=(st.fc.v[It]-wt[It])*Dt[0]:wt[It]+=(st.fc.v[It]-wt[It])*Dt;st.fh.propType&&(Dt.length?wt=addHueToRGB(wt,st.fh.v*Dt[0]):wt=addHueToRGB(wt,st.fh.v*Dt)),st.fs.propType&&(Dt.length?wt=addSaturationToRGB(wt,st.fs.v*Dt[0]):wt=addSaturationToRGB(wt,st.fs.v*Dt)),st.fb.propType&&(Dt.length?wt=addBrightnessToRGB(wt,st.fb.v*Dt[0]):wt=addBrightnessToRGB(wt,st.fb.v*Dt))}}for(Xe=0;Xe<ht;Xe+=1)st=j[Xe].a,st.p.propType&&(at=j[Xe].s,Dt=at.getMult(De[Me].anIndexes[Xe],ee.a[Xe].s.totalChars),this._hasMaskedPath?Dt.length?re.translate(0,st.p.v[1]*Dt[0],-st.p.v[2]*Dt[1]):re.translate(0,st.p.v[1]*Dt,-st.p.v[2]*Dt):Dt.length?re.translate(st.p.v[0]*Dt[0],st.p.v[1]*Dt[1],-st.p.v[2]*Dt[2]):re.translate(st.p.v[0]*Dt,st.p.v[1]*Dt,-st.p.v[2]*Dt));if($.strokeWidthAnim&&(Kt=Mn<0?0:Mn),$.strokeColorAnim&&(ln="rgb("+Math.round(kt[0]*255)+","+Math.round(kt[1]*255)+","+Math.round(kt[2]*255)+")"),$.fillColorAnim&&$.fc&&(nn="rgb("+Math.round(wt[0]*255)+","+Math.round(wt[1]*255)+","+Math.round(wt[2]*255)+")"),this._hasMaskedPath){if(re.translate(0,-$.ls),re.translate(0,L[1]*bt*.01+Ee,0),this._pathData.p.v){rt=(Fe.point[1]-He.point[1])/(Fe.point[0]-He.point[0]);var vn=Math.atan(rt)*180/Math.PI;Fe.point[0]<He.point[0]&&(vn+=180),re.rotate(-vn*Math.PI/180)}re.translate(zt,Vt,0),ke-=L[0]*De[Me].an*.005,De[Me+1]&&Jt!==De[Me+1].ind&&(ke+=De[Me].an/2,ke+=$.tr*.001*$.finalSize)}else{switch(re.translate(ye,Ee,0),$.ps&&re.translate($.ps[0],$.ps[1]+$.ascent,0),$.j){case 1:re.translate(De[Me].animatorJustifyOffset+$.justifyOffset+($.boxWidth-$.lineWidths[De[Me].line]),0,0);break;case 2:re.translate(De[Me].animatorJustifyOffset+$.justifyOffset+($.boxWidth-$.lineWidths[De[Me].line])/2,0,0);break}re.translate(0,-$.ls),re.translate(tn,0,0),re.translate(L[0]*De[Me].an*.005,L[1]*bt*.01,0),ye+=De[Me].l+$.tr*.001*$.finalSize}le==="html"?gn=re.toCSS():le==="svg"?gn=re.to2dCSS():xn=[re.props[0],re.props[1],re.props[2],re.props[3],re.props[4],re.props[5],re.props[6],re.props[7],re.props[8],re.props[9],re.props[10],re.props[11],re.props[12],re.props[13],re.props[14],re.props[15]],St=pn}ve<=Me?(Bt=new LetterProps(St,Kt,ln,nn,gn,xn),this.renderedLetters.push(Bt),ve+=1,this.lettersChangedFlag=!0):(Bt=this.renderedLetters[Me],this.lettersChangedFlag=Bt.update(St,Kt,ln,nn,gn,xn)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty);function ITextElement(){}ITextElement.prototype.initElement=function($,m,L){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData($,m,L),this.textProperty=new TextProperty(this,$.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty($.t,this.renderType,this),this.initTransform($,m,L),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function($){this._mdf=!1,this.prepareRenderableFrame($),this.prepareProperties($,this.isInRange)},ITextElement.prototype.createPathShape=function($,m){var L,j=m.length,ee,re="";for(L=0;L<j;L+=1)m[L].ty==="sh"&&(ee=m[L].ks.k,re+=buildShapeString(ee,ee.i.length,!0,$));return re},ITextElement.prototype.updateDocumentData=function($,m){this.textProperty.updateDocumentData($,m)},ITextElement.prototype.canResizeFont=function($){this.textProperty.canResizeFont($)},ITextElement.prototype.setMinimumFontSize=function($){this.textProperty.setMinimumFontSize($)},ITextElement.prototype.applyTextPropertiesToMatrix=function($,m,L,j,ee){switch($.ps&&m.translate($.ps[0],$.ps[1]+$.ascent,0),m.translate(0,-$.ls,0),$.j){case 1:m.translate($.justifyOffset+($.boxWidth-$.lineWidths[L]),0,0);break;case 2:m.translate($.justifyOffset+($.boxWidth-$.lineWidths[L])/2,0,0);break}m.translate(j,ee,0)},ITextElement.prototype.buildColor=function($){return"rgb("+Math.round($[0]*255)+","+Math.round($[1]*255)+","+Math.round($[2]*255)+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},ITextElement.prototype.validateText=function(){(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)};var emptyShapeData={shapes:[]};function SVGTextLottieElement($,m,L){this.textSpans=[],this.renderType="svg",this.initElement($,m,L)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function($){for(var m=0,L=$.length,j=[],ee="";m<L;)$[m]==="\r"||$[m]===""?(j.push(ee),ee=""):ee+=$[m],m+=1;return j.push(ee),j},SVGTextLottieElement.prototype.buildShapeData=function($,m){if($.shapes&&$.shapes.length){var L=$.shapes[0];if(L.it){var j=L.it[L.it.length-1];j.s&&(j.s.k[0]=m,j.s.k[1]=m)}}return $},SVGTextLottieElement.prototype.buildNewText=function(){this.addDynamicProperty(this);var $,m,L=this.textProperty.currentData;this.renderedLetters=createSizedArray(L?L.l.length:0),L.fc?this.layerElement.setAttribute("fill",this.buildColor(L.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),L.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(L.sc)),this.layerElement.setAttribute("stroke-width",L.sw)),this.layerElement.setAttribute("font-size",L.finalSize);var j=this.globalData.fontManager.getFontByName(L.f);if(j.fClass)this.layerElement.setAttribute("class",j.fClass);else{this.layerElement.setAttribute("font-family",j.fFamily);var ee=L.fWeight,re=L.fStyle;this.layerElement.setAttribute("font-style",re),this.layerElement.setAttribute("font-weight",ee)}this.layerElement.setAttribute("aria-label",L.t);var le=L.l||[],ve=!!this.globalData.fontManager.chars;m=le.length;var ye,Ee=this.mHelper,Me="",Ce=this.data.singleShape,De=0,Be=0,ke=!0,Fe=L.tr*.001*L.finalSize;if(Ce&&!ve&&!L.sz){var Oe=this.textContainer,Ne="start";switch(L.j){case 1:Ne="end";break;case 2:Ne="middle";break;default:Ne="start";break}Oe.setAttribute("text-anchor",Ne),Oe.setAttribute("letter-spacing",Fe);var ze=this.buildTextContents(L.finalText);for(m=ze.length,Be=L.ps?L.ps[1]+L.ascent:0,$=0;$<m;$+=1)ye=this.textSpans[$].span||createNS("tspan"),ye.textContent=ze[$],ye.setAttribute("x",0),ye.setAttribute("y",Be),ye.style.display="inherit",Oe.appendChild(ye),this.textSpans[$]||(this.textSpans[$]={span:null,glyph:null}),this.textSpans[$].span=ye,Be+=L.finalLineHeight;this.layerElement.appendChild(Oe)}else{var $e=this.textSpans.length,He;for($=0;$<m;$+=1){if(this.textSpans[$]||(this.textSpans[$]={span:null,childSpan:null,glyph:null}),!ve||!Ce||$===0){if(ye=$e>$?this.textSpans[$].span:createNS(ve?"g":"text"),$e<=$){if(ye.setAttribute("stroke-linecap","butt"),ye.setAttribute("stroke-linejoin","round"),ye.setAttribute("stroke-miterlimit","4"),this.textSpans[$].span=ye,ve){var We=createNS("g");ye.appendChild(We),this.textSpans[$].childSpan=We}this.textSpans[$].span=ye,this.layerElement.appendChild(ye)}ye.style.display="inherit"}if(Ee.reset(),Ce&&(le[$].n&&(De=-Fe,Be+=L.yOffset,Be+=ke?1:0,ke=!1),this.applyTextPropertiesToMatrix(L,Ee,le[$].line,De,Be),De+=le[$].l||0,De+=Fe),ve){He=this.globalData.fontManager.getCharData(L.finalText[$],j.fStyle,this.globalData.fontManager.getFontByName(L.f).fFamily);var qe;if(He.t===1)qe=new SVGCompElement(He.data,this.globalData,this);else{var Ye=emptyShapeData;He.data&&He.data.shapes&&(Ye=this.buildShapeData(He.data,L.finalSize)),qe=new SVGShapeElement(Ye,this.globalData,this)}if(this.textSpans[$].glyph){var Ze=this.textSpans[$].glyph;this.textSpans[$].childSpan.removeChild(Ze.layerElement),Ze.destroy()}this.textSpans[$].glyph=qe,qe._debug=!0,qe.prepareFrame(0),qe.renderFrame(),this.textSpans[$].childSpan.appendChild(qe.layerElement),He.t===1&&this.textSpans[$].childSpan.setAttribute("transform","scale("+L.finalSize/100+","+L.finalSize/100+")")}else Ce&&ye.setAttribute("transform","translate("+Ee.props[12]+","+Ee.props[13]+")"),ye.textContent=le[$].val,ye.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}Ce&&ye&&ye.setAttribute("d",Me)}for(;$<this.textSpans.length;)this.textSpans[$].span.style.display="none",$+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var $=this.layerElement.getBBox();this.bbox={top:$.y,left:$.x,width:$.width,height:$.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var $,m=this.textSpans.length,L;for(this.renderedFrame=this.comp.renderedFrame,$=0;$<m;$+=1)L=this.textSpans[$].glyph,L&&(L.prepareFrame(this.comp.renderedFrame-this.data.st),L._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if(this.validateText(),(!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){this._sizeChanged=!0;var $,m,L=this.textAnimator.renderedLetters,j=this.textProperty.currentData.l;m=j.length;var ee,re,le;for($=0;$<m;$+=1)j[$].n||(ee=L[$],re=this.textSpans[$].span,le=this.textSpans[$].glyph,le&&le.renderFrame(),ee._mdf.m&&re.setAttribute("transform",ee.m),ee._mdf.o&&re.setAttribute("opacity",ee.o),ee._mdf.sw&&re.setAttribute("stroke-width",ee.sw),ee._mdf.sc&&re.setAttribute("stroke",ee.sc),ee._mdf.fc&&re.setAttribute("fill",ee.fc))}};function ISolidElement($,m,L){this.initElement($,m,L)}extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var $=createNS("rect");$.setAttribute("width",this.data.sw),$.setAttribute("height",this.data.sh),$.setAttribute("fill",this.data.sc),this.layerElement.appendChild($)};function NullElement($,m,L){this.initFrame(),this.initBaseData($,m,L),this.initFrame(),this.initTransform($,m,L),this.initHierarchy()}NullElement.prototype.prepareFrame=function($){this.prepareProperties($,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement);function SVGRendererBase(){}extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function($){return new NullElement($,this.globalData,this)},SVGRendererBase.prototype.createShape=function($){return new SVGShapeElement($,this.globalData,this)},SVGRendererBase.prototype.createText=function($){return new SVGTextLottieElement($,this.globalData,this)},SVGRendererBase.prototype.createImage=function($){return new IImageElement($,this.globalData,this)},SVGRendererBase.prototype.createSolid=function($){return new ISolidElement($,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function($){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+$.w+" "+$.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",$.w),this.svgElement.setAttribute("height",$.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),this.renderConfig.focusable!==void 0&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var m=this.globalData.defs;this.setupGlobalData($,m),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=$;var L=createNS("clipPath"),j=createNS("rect");j.setAttribute("width",$.w),j.setAttribute("height",$.h),j.setAttribute("x",0),j.setAttribute("y",0);var ee=createElementID();L.setAttribute("id",ee),L.appendChild(j),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+ee+")"),m.appendChild(L),this.layers=$.layers,this.elements=createSizedArray($.layers.length)},SVGRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var $,m=this.layers?this.layers.length:0;for($=0;$<m;$+=1)this.elements[$]&&this.elements[$].destroy&&this.elements[$].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function($){var m=0,L=this.layers.length;for(m=0;m<L;m+=1)if(this.layers[m].ind===$)return m;return-1},SVGRendererBase.prototype.buildItem=function($){var m=this.elements;if(!(m[$]||this.layers[$].ty===99)){m[$]=!0;var L=this.createItem(this.layers[$]);if(m[$]=L,getExpressionsPlugin()&&(this.layers[$].ty===0&&this.globalData.projectInterface.registerComposition(L),L.initExpressions()),this.appendElementInPos(L,$),this.layers[$].tt){var j="tp"in this.layers[$]?this.findIndexByInd(this.layers[$].tp):$-1;if(j===-1)return;if(!this.elements[j]||this.elements[j]===!0)this.buildItem(j),this.addPendingElement(L);else{var ee=m[j],re=ee.getMatte(this.layers[$].tt);L.setMatte(re)}}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var $=this.pendingElements.pop();if($.checkParenting(),$.data.tt)for(var m=0,L=this.elements.length;m<L;){if(this.elements[m]===$){var j="tp"in $.data?this.findIndexByInd($.data.tp):m-1,ee=this.elements[j],re=ee.getMatte(this.layers[m].tt);$.setMatte(re);break}m+=1}}},SVGRendererBase.prototype.renderFrame=function($){if(!(this.renderedFrame===$||this.destroyed)){$===null?$=this.renderedFrame:this.renderedFrame=$,this.globalData.frameNum=$,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=$,this.globalData._mdf=!1;var m,L=this.layers.length;for(this.completeLayers||this.checkLayers($),m=L-1;m>=0;m-=1)(this.completeLayers||this.elements[m])&&this.elements[m].prepareFrame($-this.layers[m].st);if(this.globalData._mdf)for(m=0;m<L;m+=1)(this.completeLayers||this.elements[m])&&this.elements[m].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function($,m){var L=$.getBaseElement();if(L){for(var j=0,ee;j<m;)this.elements[j]&&this.elements[j]!==!0&&this.elements[j].getBaseElement()&&(ee=this.elements[j].getBaseElement()),j+=1;ee?this.layerElement.insertBefore(L,ee):this.layerElement.appendChild(L)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"};function ICompElement(){}extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function($,m,L){this.initFrame(),this.initBaseData($,m,L),this.initTransform($,m,L),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),(this.data.xt||!m.progressiveLoad)&&this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function($){if(this._mdf=!1,this.prepareRenderableFrame($),this.prepareProperties($,this.isInRange),!(!this.isInRange&&!this.data.xt)){if(this.tm._placeholder)this.renderedFrame=$/this.data.sr;else{var m=this.tm.v;m===this.data.op&&(m=this.data.op-1),this.renderedFrame=m}var L,j=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),L=j-1;L>=0;L-=1)(this.completeLayers||this.elements[L])&&(this.elements[L].prepareFrame(this.renderedFrame-this.layers[L].st),this.elements[L]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var $,m=this.layers.length;for($=0;$<m;$+=1)(this.completeLayers||this.elements[$])&&this.elements[$].renderFrame()},ICompElement.prototype.setElements=function($){this.elements=$},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var $,m=this.layers.length;for($=0;$<m;$+=1)this.elements[$]&&this.elements[$].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()};function SVGCompElement($,m,L){this.layers=$.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement($,m,L),this.tm=$.tm?PropertyFactory.getProp(this,$.tm,0,m.frameRate,this):{_placeholder:!0}}extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function($){return new SVGCompElement($,this.globalData,this)};function SVGRenderer($,m){this.animationItem=$,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var L="";if(m&&m.title){var j=createNS("title"),ee=createElementID();j.setAttribute("id",ee),j.textContent=m.title,this.svgElement.appendChild(j),L+=ee}if(m&&m.description){var re=createNS("desc"),le=createElementID();re.setAttribute("id",le),re.textContent=m.description,this.svgElement.appendChild(re),L+=" "+le}L&&this.svgElement.setAttribute("aria-labelledby",L);var ve=createNS("defs");this.svgElement.appendChild(ve);var ye=createNS("g");this.svgElement.appendChild(ye),this.layerElement=ye,this.renderConfig={preserveAspectRatio:m&&m.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:m&&m.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:m&&m.contentVisibility||"visible",progressiveLoad:m&&m.progressiveLoad||!1,hideOnTransparent:!(m&&m.hideOnTransparent===!1),viewBoxOnly:m&&m.viewBoxOnly||!1,viewBoxSize:m&&m.viewBoxSize||!1,className:m&&m.className||"",id:m&&m.id||"",focusable:m&&m.focusable,filterSize:{width:m&&m.filterSize&&m.filterSize.width||"100%",height:m&&m.filterSize&&m.filterSize.height||"100%",x:m&&m.filterSize&&m.filterSize.x||"0%",y:m&&m.filterSize&&m.filterSize.y||"0%"},width:m&&m.width,height:m&&m.height,runExpressions:!m||m.runExpressions===void 0||m.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:ve,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function($){return new SVGCompElement($,this.globalData,this)};function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}ShapeTransformManager.prototype={addTransformSequence:function(m){var L,j=m.length,ee="_";for(L=0;L<j;L+=1)ee+=m[L].transform.key+"_";var re=this.sequences[ee];return re||(re={transforms:[].concat(m),finalTransform:new Matrix,_mdf:!1},this.sequences[ee]=re,this.sequenceList.push(re)),re},processSequence:function(m,L){for(var j=0,ee=m.transforms.length,re=L;j<ee&&!L;){if(m.transforms[j].transform.mProps._mdf){re=!0;break}j+=1}if(re)for(m.finalTransform.reset(),j=ee-1;j>=0;j-=1)m.finalTransform.multiply(m.transforms[j].transform.mProps.v);m._mdf=re},processSequences:function(m){var L,j=this.sequenceList.length;for(L=0;L<j;L+=1)this.processSequence(this.sequenceList[L],m)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}};var lumaLoader=function(){var m="__lottie_element_luma_buffer",L=null,j=null,ee=null;function re(){var ye=createNS("svg"),Ee=createNS("filter"),Me=createNS("feColorMatrix");return Ee.setAttribute("id",m),Me.setAttribute("type","matrix"),Me.setAttribute("color-interpolation-filters","sRGB"),Me.setAttribute("values","0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0"),Ee.appendChild(Me),ye.appendChild(Ee),ye.setAttribute("id",m+"_svg"),featureSupport.svgLumaHidden&&(ye.style.display="none"),ye}function le(){L||(ee=re(),document.body.appendChild(ee),L=createTag("canvas"),j=L.getContext("2d"),j.filter="url(#"+m+")",j.fillStyle="rgba(0,0,0,0)",j.fillRect(0,0,1,1))}function ve(ye){return L||le(),L.width=ye.width,L.height=ye.height,j.filter="url(#"+m+")",L}return{load:le,get:ve}};function createCanvas($,m){if(featureSupport.offscreenCanvas)return new OffscreenCanvas($,m);var L=createTag("canvas");return L.width=$,L.height=m,L}var assetLoader=function(){return{loadLumaCanvas:lumaLoader.load,getLumaCanvas:lumaLoader.get,createCanvas}}(),registeredEffects={};function CVEffects($){var m,L=$.data.ef?$.data.ef.length:0;this.filters=[];var j;for(m=0;m<L;m+=1){j=null;var ee=$.data.ef[m].ty;if(registeredEffects[ee]){var re=registeredEffects[ee].effect;j=new re($.effectsManager.effectElements[m],$)}j&&this.filters.push(j)}this.filters.length&&$.addRenderableComponent(this)}CVEffects.prototype.renderFrame=function($){var m,L=this.filters.length;for(m=0;m<L;m+=1)this.filters[m].renderFrame($)},CVEffects.prototype.getEffects=function($){var m,L=this.filters.length,j=[];for(m=0;m<L;m+=1)this.filters[m].type===$&&j.push(this.filters[m]);return j};function registerEffect($,m){registeredEffects[$]={effect:m}}function CVMaskElement($,m){this.data=$,this.element=m,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var L,j=this.masksProperties.length,ee=!1;for(L=0;L<j;L+=1)this.masksProperties[L].mode!=="n"&&(ee=!0),this.viewData[L]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[L],3);this.hasMasks=ee,ee&&this.element.addRenderableComponent(this)}CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var $=this.element.finalTransform.mat,m=this.element.canvasContext,L,j=this.masksProperties.length,ee,re,le;for(m.beginPath(),L=0;L<j;L+=1)if(this.masksProperties[L].mode!=="n"){this.masksProperties[L].inv&&(m.moveTo(0,0),m.lineTo(this.element.globalData.compSize.w,0),m.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),m.lineTo(0,this.element.globalData.compSize.h),m.lineTo(0,0)),le=this.viewData[L].v,ee=$.applyToPointArray(le.v[0][0],le.v[0][1],0),m.moveTo(ee[0],ee[1]);var ve,ye=le._length;for(ve=1;ve<ye;ve+=1)re=$.applyToTriplePoints(le.o[ve-1],le.i[ve],le.v[ve]),m.bezierCurveTo(re[0],re[1],re[2],re[3],re[4],re[5]);re=$.applyToTriplePoints(le.o[ve-1],le.i[0],le.v[0]),m.bezierCurveTo(re[0],re[1],re[2],re[3],re[4],re[5])}this.element.globalData.renderer.save(!0),m.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};function CVBaseElement(){}var operationsMap={1:"source-in",2:"source-out",3:"source-in",4:"source-out"};CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){if(this.data.tt>=1){this.buffers=[];var m=this.globalData.canvasContext,L=assetLoader.createCanvas(m.canvas.width,m.canvas.height);this.buffers.push(L);var j=assetLoader.createCanvas(m.canvas.width,m.canvas.height);this.buffers.push(j),this.data.tt>=3&&!document._isProxy&&assetLoader.loadLumaCanvas()}this.canvasContext=this.globalData.canvasContext,this.transformCanvas=this.globalData.transformCanvas,this.renderableEffectsManager=new CVEffects(this),this.searchEffectTransforms()},createContent:function(){},setBlendMode:function(){var m=this.globalData;if(m.blendMode!==this.data.bm){m.blendMode=this.data.bm;var L=getBlendMode(this.data.bm);m.canvasContext.globalCompositeOperation=L}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this),this.transformEffects=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT)},hideElement:function(){!this.hidden&&(!this.isInRange||this.isTransparent)&&(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},clearCanvas:function(m){m.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)},prepareLayer:function(){if(this.data.tt>=1){var m=this.buffers[0],L=m.getContext("2d");this.clearCanvas(L),L.drawImage(this.canvasContext.canvas,0,0),this.currentTransform=this.canvasContext.getTransform(),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform)}},exitLayer:function(){if(this.data.tt>=1){var m=this.buffers[1],L=m.getContext("2d");this.clearCanvas(L),L.drawImage(this.canvasContext.canvas,0,0),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform);var j=this.comp.getElementById("tp"in this.data?this.data.tp:this.data.ind-1);if(j.renderFrame(!0),this.canvasContext.setTransform(1,0,0,1,0,0),this.data.tt>=3&&!document._isProxy){var ee=assetLoader.getLumaCanvas(this.canvasContext.canvas),re=ee.getContext("2d");re.drawImage(this.canvasContext.canvas,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.drawImage(ee,0,0)}this.canvasContext.globalCompositeOperation=operationsMap[this.data.tt],this.canvasContext.drawImage(m,0,0),this.canvasContext.globalCompositeOperation="destination-over",this.canvasContext.drawImage(this.buffers[0],0,0),this.canvasContext.setTransform(this.currentTransform),this.canvasContext.globalCompositeOperation="source-over"}},renderFrame:function(m){if(!(this.hidden||this.data.hd)&&!(this.data.td===1&&!m)){this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.setBlendMode();var L=this.data.ty===0;this.prepareLayer(),this.globalData.renderer.save(L),this.globalData.renderer.ctxTransform(this.finalTransform.localMat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.localOpacity),this.renderInnerContent(),this.globalData.renderer.restore(L),this.exitLayer(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement;function CVShapeData($,m,L,j){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var ee=4;m.ty==="rc"?ee=5:m.ty==="el"?ee=6:m.ty==="sr"&&(ee=7),this.sh=ShapePropertyFactory.getShapeProp($,m,ee,$);var re,le=L.length,ve;for(re=0;re<le;re+=1)L[re].closed||(ve={transforms:j.addTransformSequence(L[re].transforms),trNodes:[]},this.styledShapes.push(ve),L[re].elements.push(ve))}CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated;function CVShapeElement($,m,L){this.shapes=[],this.shapesData=$.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement($,m,L)}extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function($,m){var L={data:$,type:$.ty,preTransforms:this.transformsManager.addTransformSequence(m),transforms:[],elements:[],closed:$.hd===!0},j={};if($.ty==="fl"||$.ty==="st"?(j.c=PropertyFactory.getProp(this,$.c,1,255,this),j.c.k||(L.co="rgb("+bmFloor(j.c.v[0])+","+bmFloor(j.c.v[1])+","+bmFloor(j.c.v[2])+")")):($.ty==="gf"||$.ty==="gs")&&(j.s=PropertyFactory.getProp(this,$.s,1,null,this),j.e=PropertyFactory.getProp(this,$.e,1,null,this),j.h=PropertyFactory.getProp(this,$.h||{k:0},0,.01,this),j.a=PropertyFactory.getProp(this,$.a||{k:0},0,degToRads,this),j.g=new GradientProperty(this,$.g,this)),j.o=PropertyFactory.getProp(this,$.o,0,.01,this),$.ty==="st"||$.ty==="gs"){if(L.lc=lineCapEnum[$.lc||2],L.lj=lineJoinEnum[$.lj||2],$.lj==1&&(L.ml=$.ml),j.w=PropertyFactory.getProp(this,$.w,0,null,this),j.w.k||(L.wi=j.w.v),$.d){var ee=new DashProperty(this,$.d,"canvas",this);j.d=ee,j.d.k||(L.da=j.d.dashArray,L.do=j.d.dashoffset[0])}}else L.r=$.r===2?"evenodd":"nonzero";return this.stylesList.push(L),j.style=L,j},CVShapeElement.prototype.createGroupElement=function(){var $={it:[],prevViewData:[]};return $},CVShapeElement.prototype.createTransformElement=function($){var m={transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,$.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,$,this)}};return m},CVShapeElement.prototype.createShapeElement=function($){var m=new CVShapeData(this,$,this.stylesList,this.transformsManager);return this.shapes.push(m),this.addShapeToModifiers(m),m},CVShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var $,m=this.itemsData.length;for($=0;$<m;$+=1)this.prevViewData[$]=this.itemsData[$];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),m=this.dynamicProperties.length,$=0;$<m;$+=1)this.dynamicProperties[$].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function($){var m,L=this.stylesList.length;for(m=0;m<L;m+=1)this.stylesList[m].closed||this.stylesList[m].transforms.push($)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var $,m=this.stylesList.length;for($=0;$<m;$+=1)this.stylesList[$].closed||this.stylesList[$].transforms.pop()},CVShapeElement.prototype.closeStyles=function($){var m,L=$.length;for(m=0;m<L;m+=1)$[m].closed=!0},CVShapeElement.prototype.searchShapes=function($,m,L,j,ee){var re,le=$.length-1,ve,ye,Ee=[],Me=[],Ce,De,Be,ke=[].concat(ee);for(re=le;re>=0;re-=1){if(Ce=this.searchProcessedElement($[re]),Ce?m[re]=L[Ce-1]:$[re]._shouldRender=j,$[re].ty==="fl"||$[re].ty==="st"||$[re].ty==="gf"||$[re].ty==="gs")Ce?m[re].style.closed=!1:m[re]=this.createStyleElement($[re],ke),Ee.push(m[re].style);else if($[re].ty==="gr"){if(!Ce)m[re]=this.createGroupElement($[re]);else for(ye=m[re].it.length,ve=0;ve<ye;ve+=1)m[re].prevViewData[ve]=m[re].it[ve];this.searchShapes($[re].it,m[re].it,m[re].prevViewData,j,ke)}else $[re].ty==="tr"?(Ce||(Be=this.createTransformElement($[re]),m[re]=Be),ke.push(m[re]),this.addTransformToStyleList(m[re])):$[re].ty==="sh"||$[re].ty==="rc"||$[re].ty==="el"||$[re].ty==="sr"?Ce||(m[re]=this.createShapeElement($[re])):$[re].ty==="tm"||$[re].ty==="rd"||$[re].ty==="pb"||$[re].ty==="zz"||$[re].ty==="op"?(Ce?(De=m[re],De.closed=!1):(De=ShapeModifiers.getModifier($[re].ty),De.init(this,$[re]),m[re]=De,this.shapeModifiers.push(De)),Me.push(De)):$[re].ty==="rp"&&(Ce?(De=m[re],De.closed=!0):(De=ShapeModifiers.getModifier($[re].ty),m[re]=De,De.init(this,$,re,m),this.shapeModifiers.push(De),j=!1),Me.push(De));this.addProcessedElement($[re],re+1)}for(this.removeTransformFromStyleList(),this.closeStyles(Ee),le=Me.length,re=0;re<le;re+=1)Me[re].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function($,m){($._opMdf||m.op._mdf||this._isFirstFrame)&&(m.opacity=$.opacity,m.opacity*=m.op.v,m._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var $,m=this.stylesList.length,L,j,ee,re,le,ve,ye=this.globalData.renderer,Ee=this.globalData.canvasContext,Me,Ce;for($=0;$<m;$+=1)if(Ce=this.stylesList[$],Me=Ce.type,!((Me==="st"||Me==="gs")&&Ce.wi===0||!Ce.data._shouldRender||Ce.coOp===0||this.globalData.currentGlobalAlpha===0)){for(ye.save(),le=Ce.elements,Me==="st"||Me==="gs"?(ye.ctxStrokeStyle(Me==="st"?Ce.co:Ce.grd),ye.ctxLineWidth(Ce.wi),ye.ctxLineCap(Ce.lc),ye.ctxLineJoin(Ce.lj),ye.ctxMiterLimit(Ce.ml||0)):ye.ctxFillStyle(Me==="fl"?Ce.co:Ce.grd),ye.ctxOpacity(Ce.coOp),Me!=="st"&&Me!=="gs"&&Ee.beginPath(),ye.ctxTransform(Ce.preTransforms.finalTransform.props),j=le.length,L=0;L<j;L+=1){for((Me==="st"||Me==="gs")&&(Ee.beginPath(),Ce.da&&(Ee.setLineDash(Ce.da),Ee.lineDashOffset=Ce.do)),ve=le[L].trNodes,re=ve.length,ee=0;ee<re;ee+=1)ve[ee].t==="m"?Ee.moveTo(ve[ee].p[0],ve[ee].p[1]):ve[ee].t==="c"?Ee.bezierCurveTo(ve[ee].pts[0],ve[ee].pts[1],ve[ee].pts[2],ve[ee].pts[3],ve[ee].pts[4],ve[ee].pts[5]):Ee.closePath();(Me==="st"||Me==="gs")&&(ye.ctxStroke(),Ce.da&&Ee.setLineDash(this.dashResetter))}Me!=="st"&&Me!=="gs"&&this.globalData.renderer.ctxFill(Ce.r),ye.restore()}},CVShapeElement.prototype.renderShape=function($,m,L,j){var ee,re=m.length-1,le;for(le=$,ee=re;ee>=0;ee-=1)m[ee].ty==="tr"?(le=L[ee].transform,this.renderShapeTransform($,le)):m[ee].ty==="sh"||m[ee].ty==="el"||m[ee].ty==="rc"||m[ee].ty==="sr"?this.renderPath(m[ee],L[ee]):m[ee].ty==="fl"?this.renderFill(m[ee],L[ee],le):m[ee].ty==="st"?this.renderStroke(m[ee],L[ee],le):m[ee].ty==="gf"||m[ee].ty==="gs"?this.renderGradientFill(m[ee],L[ee],le):m[ee].ty==="gr"?this.renderShape(le,m[ee].it,L[ee].it):m[ee].ty;j&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function($,m){if(this._isFirstFrame||m._mdf||$.transforms._mdf){var L=$.trNodes,j=m.paths,ee,re,le,ve=j._length;L.length=0;var ye=$.transforms.finalTransform;for(le=0;le<ve;le+=1){var Ee=j.shapes[le];if(Ee&&Ee.v){for(re=Ee._length,ee=1;ee<re;ee+=1)ee===1&&L.push({t:"m",p:ye.applyToPointArray(Ee.v[0][0],Ee.v[0][1],0)}),L.push({t:"c",pts:ye.applyToTriplePoints(Ee.o[ee-1],Ee.i[ee],Ee.v[ee])});re===1&&L.push({t:"m",p:ye.applyToPointArray(Ee.v[0][0],Ee.v[0][1],0)}),Ee.c&&re&&(L.push({t:"c",pts:ye.applyToTriplePoints(Ee.o[ee-1],Ee.i[0],Ee.v[0])}),L.push({t:"z"}))}}$.trNodes=L}},CVShapeElement.prototype.renderPath=function($,m){if($.hd!==!0&&$._shouldRender){var L,j=m.styledShapes.length;for(L=0;L<j;L+=1)this.renderStyledShape(m.styledShapes[L],m.sh)}},CVShapeElement.prototype.renderFill=function($,m,L){var j=m.style;(m.c._mdf||this._isFirstFrame)&&(j.co="rgb("+bmFloor(m.c.v[0])+","+bmFloor(m.c.v[1])+","+bmFloor(m.c.v[2])+")"),(m.o._mdf||L._opMdf||this._isFirstFrame)&&(j.coOp=m.o.v*L.opacity)},CVShapeElement.prototype.renderGradientFill=function($,m,L){var j=m.style,ee;if(!j.grd||m.g._mdf||m.s._mdf||m.e._mdf||$.t!==1&&(m.h._mdf||m.a._mdf)){var re=this.globalData.canvasContext,le=m.s.v,ve=m.e.v;if($.t===1)ee=re.createLinearGradient(le[0],le[1],ve[0],ve[1]);else{var ye=Math.sqrt(Math.pow(le[0]-ve[0],2)+Math.pow(le[1]-ve[1],2)),Ee=Math.atan2(ve[1]-le[1],ve[0]-le[0]),Me=m.h.v;Me>=1?Me=.99:Me<=-1&&(Me=-.99);var Ce=ye*Me,De=Math.cos(Ee+m.a.v)*Ce+le[0],Be=Math.sin(Ee+m.a.v)*Ce+le[1];ee=re.createRadialGradient(De,Be,0,le[0],le[1],ye)}var ke,Fe=$.g.p,Oe=m.g.c,Ne=1;for(ke=0;ke<Fe;ke+=1)m.g._hasOpacity&&m.g._collapsable&&(Ne=m.g.o[ke*2+1]),ee.addColorStop(Oe[ke*4]/100,"rgba("+Oe[ke*4+1]+","+Oe[ke*4+2]+","+Oe[ke*4+3]+","+Ne+")");j.grd=ee}j.coOp=m.o.v*L.opacity},CVShapeElement.prototype.renderStroke=function($,m,L){var j=m.style,ee=m.d;ee&&(ee._mdf||this._isFirstFrame)&&(j.da=ee.dashArray,j.do=ee.dashoffset[0]),(m.c._mdf||this._isFirstFrame)&&(j.co="rgb("+bmFloor(m.c.v[0])+","+bmFloor(m.c.v[1])+","+bmFloor(m.c.v[2])+")"),(m.o._mdf||L._opMdf||this._isFirstFrame)&&(j.coOp=m.o.v*L.opacity),(m.w._mdf||this._isFirstFrame)&&(j.wi=m.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0};function CVTextElement($,m,L){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement($,m,L)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var $=this.textProperty.currentData;this.renderedLetters=createSizedArray($.l?$.l.length:0);var m=!1;$.fc?(m=!0,this.values.fill=this.buildColor($.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=m;var L=!1;$.sc&&(L=!0,this.values.stroke=this.buildColor($.sc),this.values.sWidth=$.sw);var j=this.globalData.fontManager.getFontByName($.f),ee,re,le=$.l,ve=this.mHelper;this.stroke=L,this.values.fValue=$.finalSize+"px "+this.globalData.fontManager.getFontByName($.f).fFamily,re=$.finalText.length;var ye,Ee,Me,Ce,De,Be,ke,Fe,Oe,Ne,ze=this.data.singleShape,$e=$.tr*.001*$.finalSize,He=0,We=0,qe=!0,Ye=0;for(ee=0;ee<re;ee+=1){ye=this.globalData.fontManager.getCharData($.finalText[ee],j.fStyle,this.globalData.fontManager.getFontByName($.f).fFamily),Ee=ye&&ye.data||{},ve.reset(),ze&&le[ee].n&&(He=-$e,We+=$.yOffset,We+=qe?1:0,qe=!1),De=Ee.shapes?Ee.shapes[0].it:[],ke=De.length,ve.scale($.finalSize/100,$.finalSize/100),ze&&this.applyTextPropertiesToMatrix($,ve,le[ee].line,He,We),Oe=createSizedArray(ke-1);var Ze=0;for(Be=0;Be<ke;Be+=1)if(De[Be].ty==="sh"){for(Ce=De[Be].ks.k.i.length,Fe=De[Be].ks.k,Ne=[],Me=1;Me<Ce;Me+=1)Me===1&&Ne.push(ve.applyToX(Fe.v[0][0],Fe.v[0][1],0),ve.applyToY(Fe.v[0][0],Fe.v[0][1],0)),Ne.push(ve.applyToX(Fe.o[Me-1][0],Fe.o[Me-1][1],0),ve.applyToY(Fe.o[Me-1][0],Fe.o[Me-1][1],0),ve.applyToX(Fe.i[Me][0],Fe.i[Me][1],0),ve.applyToY(Fe.i[Me][0],Fe.i[Me][1],0),ve.applyToX(Fe.v[Me][0],Fe.v[Me][1],0),ve.applyToY(Fe.v[Me][0],Fe.v[Me][1],0));Ne.push(ve.applyToX(Fe.o[Me-1][0],Fe.o[Me-1][1],0),ve.applyToY(Fe.o[Me-1][0],Fe.o[Me-1][1],0),ve.applyToX(Fe.i[0][0],Fe.i[0][1],0),ve.applyToY(Fe.i[0][0],Fe.i[0][1],0),ve.applyToX(Fe.v[0][0],Fe.v[0][1],0),ve.applyToY(Fe.v[0][0],Fe.v[0][1],0)),Oe[Ze]=Ne,Ze+=1}ze&&(He+=le[ee].l,He+=$e),this.textSpans[Ye]?this.textSpans[Ye].elem=Oe:this.textSpans[Ye]={elem:Oe},Ye+=1}},CVTextElement.prototype.renderInnerContent=function(){this.validateText();var $=this.canvasContext;$.font=this.values.fValue,this.globalData.renderer.ctxLineCap("butt"),this.globalData.renderer.ctxLineJoin("miter"),this.globalData.renderer.ctxMiterLimit(4),this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var m,L,j,ee,re,le,ve=this.textAnimator.renderedLetters,ye=this.textProperty.currentData.l;L=ye.length;var Ee,Me=null,Ce=null,De=null,Be,ke,Fe=this.globalData.renderer;for(m=0;m<L;m+=1)if(!ye[m].n){if(Ee=ve[m],Ee&&(Fe.save(),Fe.ctxTransform(Ee.p),Fe.ctxOpacity(Ee.o)),this.fill){for(Ee&&Ee.fc?Me!==Ee.fc&&(Fe.ctxFillStyle(Ee.fc),Me=Ee.fc):Me!==this.values.fill&&(Me=this.values.fill,Fe.ctxFillStyle(this.values.fill)),Be=this.textSpans[m].elem,ee=Be.length,this.globalData.canvasContext.beginPath(),j=0;j<ee;j+=1)for(ke=Be[j],le=ke.length,this.globalData.canvasContext.moveTo(ke[0],ke[1]),re=2;re<le;re+=6)this.globalData.canvasContext.bezierCurveTo(ke[re],ke[re+1],ke[re+2],ke[re+3],ke[re+4],ke[re+5]);this.globalData.canvasContext.closePath(),Fe.ctxFill()}if(this.stroke){for(Ee&&Ee.sw?De!==Ee.sw&&(De=Ee.sw,Fe.ctxLineWidth(Ee.sw)):De!==this.values.sWidth&&(De=this.values.sWidth,Fe.ctxLineWidth(this.values.sWidth)),Ee&&Ee.sc?Ce!==Ee.sc&&(Ce=Ee.sc,Fe.ctxStrokeStyle(Ee.sc)):Ce!==this.values.stroke&&(Ce=this.values.stroke,Fe.ctxStrokeStyle(this.values.stroke)),Be=this.textSpans[m].elem,ee=Be.length,this.globalData.canvasContext.beginPath(),j=0;j<ee;j+=1)for(ke=Be[j],le=ke.length,this.globalData.canvasContext.moveTo(ke[0],ke[1]),re=2;re<le;re+=6)this.globalData.canvasContext.bezierCurveTo(ke[re],ke[re+1],ke[re+2],ke[re+3],ke[re+4],ke[re+5]);this.globalData.canvasContext.closePath(),Fe.ctxStroke()}Ee&&this.globalData.renderer.restore()}};function CVImageElement($,m,L){this.assetData=m.getAssetData($.refId),this.img=m.imageLoader.getAsset(this.assetData),this.initElement($,m,L)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var $=createTag("canvas");$.width=this.assetData.w,$.height=this.assetData.h;var m=$.getContext("2d"),L=this.img.width,j=this.img.height,ee=L/j,re=this.assetData.w/this.assetData.h,le,ve,ye=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;ee>re&&ye==="xMidYMid slice"||ee<re&&ye!=="xMidYMid slice"?(ve=j,le=ve*re):(le=L,ve=le/re),m.drawImage(this.img,(L-le)/2,(j-ve)/2,le,ve,0,0,this.assetData.w,this.assetData.h),this.img=$}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null};function CVSolidElement($,m,L){this.initElement($,m,L)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){this.globalData.renderer.ctxFillStyle(this.data.sc),this.globalData.renderer.ctxFillRect(0,0,this.data.sw,this.data.sh)};function CanvasRendererBase(){}extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function($){return new CVShapeElement($,this.globalData,this)},CanvasRendererBase.prototype.createText=function($){return new CVTextElement($,this.globalData,this)},CanvasRendererBase.prototype.createImage=function($){return new CVImageElement($,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function($){return new CVSolidElement($,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function($){$[0]===1&&$[1]===0&&$[4]===0&&$[5]===1&&$[12]===0&&$[13]===0||this.canvasContext.transform($[0],$[1],$[4],$[5],$[12],$[13])},CanvasRendererBase.prototype.ctxOpacity=function($){this.canvasContext.globalAlpha*=$<0?0:$},CanvasRendererBase.prototype.ctxFillStyle=function($){this.canvasContext.fillStyle=$},CanvasRendererBase.prototype.ctxStrokeStyle=function($){this.canvasContext.strokeStyle=$},CanvasRendererBase.prototype.ctxLineWidth=function($){this.canvasContext.lineWidth=$},CanvasRendererBase.prototype.ctxLineCap=function($){this.canvasContext.lineCap=$},CanvasRendererBase.prototype.ctxLineJoin=function($){this.canvasContext.lineJoin=$},CanvasRendererBase.prototype.ctxMiterLimit=function($){this.canvasContext.miterLimit=$},CanvasRendererBase.prototype.ctxFill=function($){this.canvasContext.fill($)},CanvasRendererBase.prototype.ctxFillRect=function($,m,L,j){this.canvasContext.fillRect($,m,L,j)},CanvasRendererBase.prototype.ctxStroke=function(){this.canvasContext.stroke()},CanvasRendererBase.prototype.reset=function(){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}this.contextData.reset()},CanvasRendererBase.prototype.save=function(){this.canvasContext.save()},CanvasRendererBase.prototype.restore=function($){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}$&&(this.globalData.blendMode="source-over"),this.contextData.restore($)},CanvasRendererBase.prototype.configAnimation=function($){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var m=this.animationItem.container.style;m.width="100%",m.height="100%";var L="0px 0px 0px";m.transformOrigin=L,m.mozTransformOrigin=L,m.webkitTransformOrigin=L,m["-webkit-transform"]=L,m.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.contextData.setContext(this.canvasContext),this.data=$,this.layers=$.layers,this.transformCanvas={w:$.w,h:$.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData($,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray($.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function($,m){this.reset();var L,j;$?(L=$,j=m,this.canvasContext.canvas.width=L,this.canvasContext.canvas.height=j):(this.animationItem.wrapper&&this.animationItem.container?(L=this.animationItem.wrapper.offsetWidth,j=this.animationItem.wrapper.offsetHeight):(L=this.canvasContext.canvas.width,j=this.canvasContext.canvas.height),this.canvasContext.canvas.width=L*this.renderConfig.dpr,this.canvasContext.canvas.height=j*this.renderConfig.dpr);var ee,re;if(this.renderConfig.preserveAspectRatio.indexOf("meet")!==-1||this.renderConfig.preserveAspectRatio.indexOf("slice")!==-1){var le=this.renderConfig.preserveAspectRatio.split(" "),ve=le[1]||"meet",ye=le[0]||"xMidYMid",Ee=ye.substr(0,4),Me=ye.substr(4);ee=L/j,re=this.transformCanvas.w/this.transformCanvas.h,re>ee&&ve==="meet"||re<ee&&ve==="slice"?(this.transformCanvas.sx=L/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=L/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=j/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=j/(this.transformCanvas.h/this.renderConfig.dpr)),Ee==="xMid"&&(re<ee&&ve==="meet"||re>ee&&ve==="slice")?this.transformCanvas.tx=(L-this.transformCanvas.w*(j/this.transformCanvas.h))/2*this.renderConfig.dpr:Ee==="xMax"&&(re<ee&&ve==="meet"||re>ee&&ve==="slice")?this.transformCanvas.tx=(L-this.transformCanvas.w*(j/this.transformCanvas.h))*this.renderConfig.dpr:this.transformCanvas.tx=0,Me==="YMid"&&(re>ee&&ve==="meet"||re<ee&&ve==="slice")?this.transformCanvas.ty=(j-this.transformCanvas.h*(L/this.transformCanvas.w))/2*this.renderConfig.dpr:Me==="YMax"&&(re>ee&&ve==="meet"||re<ee&&ve==="slice")?this.transformCanvas.ty=(j-this.transformCanvas.h*(L/this.transformCanvas.w))*this.renderConfig.dpr:this.transformCanvas.ty=0}else this.renderConfig.preserveAspectRatio==="none"?(this.transformCanvas.sx=L/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=j/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText="");var $,m=this.layers?this.layers.length:0;for($=m-1;$>=0;$-=1)this.elements[$]&&this.elements[$].destroy&&this.elements[$].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function($,m){if(!(this.renderedFrame===$&&this.renderConfig.clearCanvas===!0&&!m||this.destroyed||$===-1)){this.renderedFrame=$,this.globalData.frameNum=$-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||m,this.globalData.projectInterface.currentFrame=$;var L,j=this.layers.length;for(this.completeLayers||this.checkLayers($),L=j-1;L>=0;L-=1)(this.completeLayers||this.elements[L])&&this.elements[L].prepareFrame($-this.layers[L].st);if(this.globalData._mdf){for(this.renderConfig.clearCanvas===!0?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),L=j-1;L>=0;L-=1)(this.completeLayers||this.elements[L])&&this.elements[L].renderFrame();this.renderConfig.clearCanvas!==!0&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function($){var m=this.elements;if(!(m[$]||this.layers[$].ty===99)){var L=this.createItem(this.layers[$],this,this.globalData);m[$]=L,L.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var $=this.pendingElements.pop();$.checkParenting()}},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"};function CanvasContext(){this.opacity=-1,this.transform=createTypedArray("float32",16),this.fillStyle="",this.strokeStyle="",this.lineWidth="",this.lineCap="",this.lineJoin="",this.miterLimit="",this.id=Math.random()}function CVContextData(){this.stack=[],this.cArrPos=0,this.cTr=new Matrix;var $,m=15;for($=0;$<m;$+=1){var L=new CanvasContext;this.stack[$]=L}this._length=m,this.nativeContext=null,this.transformMat=new Matrix,this.currentOpacity=1,this.currentFillStyle="",this.appliedFillStyle="",this.currentStrokeStyle="",this.appliedStrokeStyle="",this.currentLineWidth="",this.appliedLineWidth="",this.currentLineCap="",this.appliedLineCap="",this.currentLineJoin="",this.appliedLineJoin="",this.appliedMiterLimit="",this.currentMiterLimit=""}CVContextData.prototype.duplicate=function(){var $=this._length*2,m=0;for(m=this._length;m<$;m+=1)this.stack[m]=new CanvasContext;this._length=$},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.stack[this.cArrPos].opacity=1},CVContextData.prototype.restore=function($){this.cArrPos-=1;var m=this.stack[this.cArrPos],L=m.transform,j,ee=this.cTr.props;for(j=0;j<16;j+=1)ee[j]=L[j];if($){this.nativeContext.restore();var re=this.stack[this.cArrPos+1];this.appliedFillStyle=re.fillStyle,this.appliedStrokeStyle=re.strokeStyle,this.appliedLineWidth=re.lineWidth,this.appliedLineCap=re.lineCap,this.appliedLineJoin=re.lineJoin,this.appliedMiterLimit=re.miterLimit}this.nativeContext.setTransform(L[0],L[1],L[4],L[5],L[12],L[13]),($||m.opacity!==-1&&this.currentOpacity!==m.opacity)&&(this.nativeContext.globalAlpha=m.opacity,this.currentOpacity=m.opacity),this.currentFillStyle=m.fillStyle,this.currentStrokeStyle=m.strokeStyle,this.currentLineWidth=m.lineWidth,this.currentLineCap=m.lineCap,this.currentLineJoin=m.lineJoin,this.currentMiterLimit=m.miterLimit},CVContextData.prototype.save=function($){$&&this.nativeContext.save();var m=this.cTr.props;this._length<=this.cArrPos&&this.duplicate();var L=this.stack[this.cArrPos],j;for(j=0;j<16;j+=1)L.transform[j]=m[j];this.cArrPos+=1;var ee=this.stack[this.cArrPos];ee.opacity=L.opacity,ee.fillStyle=L.fillStyle,ee.strokeStyle=L.strokeStyle,ee.lineWidth=L.lineWidth,ee.lineCap=L.lineCap,ee.lineJoin=L.lineJoin,ee.miterLimit=L.miterLimit},CVContextData.prototype.setOpacity=function($){this.stack[this.cArrPos].opacity=$},CVContextData.prototype.setContext=function($){this.nativeContext=$},CVContextData.prototype.fillStyle=function($){this.stack[this.cArrPos].fillStyle!==$&&(this.currentFillStyle=$,this.stack[this.cArrPos].fillStyle=$)},CVContextData.prototype.strokeStyle=function($){this.stack[this.cArrPos].strokeStyle!==$&&(this.currentStrokeStyle=$,this.stack[this.cArrPos].strokeStyle=$)},CVContextData.prototype.lineWidth=function($){this.stack[this.cArrPos].lineWidth!==$&&(this.currentLineWidth=$,this.stack[this.cArrPos].lineWidth=$)},CVContextData.prototype.lineCap=function($){this.stack[this.cArrPos].lineCap!==$&&(this.currentLineCap=$,this.stack[this.cArrPos].lineCap=$)},CVContextData.prototype.lineJoin=function($){this.stack[this.cArrPos].lineJoin!==$&&(this.currentLineJoin=$,this.stack[this.cArrPos].lineJoin=$)},CVContextData.prototype.miterLimit=function($){this.stack[this.cArrPos].miterLimit!==$&&(this.currentMiterLimit=$,this.stack[this.cArrPos].miterLimit=$)},CVContextData.prototype.transform=function($){this.transformMat.cloneFromProps($);var m=this.cTr;this.transformMat.multiply(m),m.cloneFromProps(this.transformMat.props);var L=m.props;this.nativeContext.setTransform(L[0],L[1],L[4],L[5],L[12],L[13])},CVContextData.prototype.opacity=function($){var m=this.stack[this.cArrPos].opacity;m*=$<0?0:$,this.stack[this.cArrPos].opacity!==m&&(this.currentOpacity!==$&&(this.nativeContext.globalAlpha=$,this.currentOpacity=$),this.stack[this.cArrPos].opacity=m)},CVContextData.prototype.fill=function($){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fill($)},CVContextData.prototype.fillRect=function($,m,L,j){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fillRect($,m,L,j)},CVContextData.prototype.stroke=function(){this.appliedStrokeStyle!==this.currentStrokeStyle&&(this.appliedStrokeStyle=this.currentStrokeStyle,this.nativeContext.strokeStyle=this.appliedStrokeStyle),this.appliedLineWidth!==this.currentLineWidth&&(this.appliedLineWidth=this.currentLineWidth,this.nativeContext.lineWidth=this.appliedLineWidth),this.appliedLineCap!==this.currentLineCap&&(this.appliedLineCap=this.currentLineCap,this.nativeContext.lineCap=this.appliedLineCap),this.appliedLineJoin!==this.currentLineJoin&&(this.appliedLineJoin=this.currentLineJoin,this.nativeContext.lineJoin=this.appliedLineJoin),this.appliedMiterLimit!==this.currentMiterLimit&&(this.appliedMiterLimit=this.currentMiterLimit,this.nativeContext.miterLimit=this.appliedMiterLimit),this.nativeContext.stroke()};function CVCompElement($,m,L){this.completeLayers=!1,this.layers=$.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement($,m,L),this.tm=$.tm?PropertyFactory.getProp(this,$.tm,0,m.frameRate,this):{_placeholder:!0}}extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var $=this.canvasContext;$.beginPath(),$.moveTo(0,0),$.lineTo(this.data.w,0),$.lineTo(this.data.w,this.data.h),$.lineTo(0,this.data.h),$.lineTo(0,0),$.clip();var m,L=this.layers.length;for(m=L-1;m>=0;m-=1)(this.completeLayers||this.elements[m])&&this.elements[m].renderFrame()},CVCompElement.prototype.destroy=function(){var $,m=this.layers.length;for($=m-1;$>=0;$-=1)this.elements[$]&&this.elements[$].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function($){return new CVCompElement($,this.globalData,this)};function CanvasRenderer($,m){this.animationItem=$,this.renderConfig={clearCanvas:m&&m.clearCanvas!==void 0?m.clearCanvas:!0,context:m&&m.context||null,progressiveLoad:m&&m.progressiveLoad||!1,preserveAspectRatio:m&&m.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:m&&m.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:m&&m.contentVisibility||"visible",className:m&&m.className||"",id:m&&m.id||"",runExpressions:!m||m.runExpressions===void 0||m.runExpressions},this.renderConfig.dpr=m&&m.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=m&&m.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas",this.renderConfig.clearCanvas&&(this.ctxTransform=this.contextData.transform.bind(this.contextData),this.ctxOpacity=this.contextData.opacity.bind(this.contextData),this.ctxFillStyle=this.contextData.fillStyle.bind(this.contextData),this.ctxStrokeStyle=this.contextData.strokeStyle.bind(this.contextData),this.ctxLineWidth=this.contextData.lineWidth.bind(this.contextData),this.ctxLineCap=this.contextData.lineCap.bind(this.contextData),this.ctxLineJoin=this.contextData.lineJoin.bind(this.contextData),this.ctxMiterLimit=this.contextData.miterLimit.bind(this.contextData),this.ctxFill=this.contextData.fill.bind(this.contextData),this.ctxFillRect=this.contextData.fillRect.bind(this.contextData),this.ctxStroke=this.contextData.stroke.bind(this.contextData),this.save=this.contextData.save.bind(this.contextData))}extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function($){return new CVCompElement($,this.globalData,this)};function HBaseElement(){}HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.bm!==0&&this.setBlendMode()},renderElement:function(){var m=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var L=this.finalTransform.mat.toCSS();m.transform=L,m.webkitTransform=L}this.finalTransform._opMdf&&(m.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting;function HSolidElement($,m,L){this.initElement($,m,L)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var $;this.data.hasMask?($=createNS("rect"),$.setAttribute("width",this.data.sw),$.setAttribute("height",this.data.sh),$.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):($=createTag("div"),$.style.width=this.data.sw+"px",$.style.height=this.data.sh+"px",$.style.backgroundColor=this.data.sc),this.layerElement.appendChild($)};function HShapeElement($,m,L){this.shapes=[],this.shapesData=$.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement($,m,L),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var $;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),$=this.svgElement;else{$=createNS("svg");var m=this.comp.data?this.comp.data:this.globalData.compSize;$.setAttribute("width",m.w),$.setAttribute("height",m.h),$.appendChild(this.shapesContainer),this.layerElement.appendChild($)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=$},HShapeElement.prototype.getTransformedPoint=function($,m){var L,j=$.length;for(L=0;L<j;L+=1)m=$[L].mProps.v.applyToPointArray(m[0],m[1],0);return m},HShapeElement.prototype.calculateShapeBoundingBox=function($,m){var L=$.sh.v,j=$.transformers,ee,re=L._length,le,ve,ye,Ee;if(!(re<=1)){for(ee=0;ee<re-1;ee+=1)le=this.getTransformedPoint(j,L.v[ee]),ve=this.getTransformedPoint(j,L.o[ee]),ye=this.getTransformedPoint(j,L.i[ee+1]),Ee=this.getTransformedPoint(j,L.v[ee+1]),this.checkBounds(le,ve,ye,Ee,m);L.c&&(le=this.getTransformedPoint(j,L.v[ee]),ve=this.getTransformedPoint(j,L.o[ee]),ye=this.getTransformedPoint(j,L.i[0]),Ee=this.getTransformedPoint(j,L.v[0]),this.checkBounds(le,ve,ye,Ee,m))}},HShapeElement.prototype.checkBounds=function($,m,L,j,ee){this.getBoundsOfCurve($,m,L,j);var re=this.shapeBoundingBox;ee.x=bmMin(re.left,ee.x),ee.xMax=bmMax(re.right,ee.xMax),ee.y=bmMin(re.top,ee.y),ee.yMax=bmMax(re.bottom,ee.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function($,m,L,j){for(var ee=[[$[0],j[0]],[$[1],j[1]]],re,le,ve,ye,Ee,Me,Ce,De=0;De<2;++De)le=6*$[De]-12*m[De]+6*L[De],re=-3*$[De]+9*m[De]-9*L[De]+3*j[De],ve=3*m[De]-3*$[De],le|=0,re|=0,ve|=0,re===0&&le===0||(re===0?(ye=-ve/le,ye>0&&ye<1&&ee[De].push(this.calculateF(ye,$,m,L,j,De))):(Ee=le*le-4*ve*re,Ee>=0&&(Me=(-le+bmSqrt(Ee))/(2*re),Me>0&&Me<1&&ee[De].push(this.calculateF(Me,$,m,L,j,De)),Ce=(-le-bmSqrt(Ee))/(2*re),Ce>0&&Ce<1&&ee[De].push(this.calculateF(Ce,$,m,L,j,De)))));this.shapeBoundingBox.left=bmMin.apply(null,ee[0]),this.shapeBoundingBox.top=bmMin.apply(null,ee[1]),this.shapeBoundingBox.right=bmMax.apply(null,ee[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,ee[1])},HShapeElement.prototype.calculateF=function($,m,L,j,ee,re){return bmPow(1-$,3)*m[re]+3*bmPow(1-$,2)*$*L[re]+3*(1-$)*bmPow($,2)*j[re]+bmPow($,3)*ee[re]},HShapeElement.prototype.calculateBoundingBox=function($,m){var L,j=$.length;for(L=0;L<j;L+=1)$[L]&&$[L].sh?this.calculateShapeBoundingBox($[L],m):$[L]&&$[L].it?this.calculateBoundingBox($[L].it,m):$[L]&&$[L].style&&$[L].w&&this.expandStrokeBoundingBox($[L].w,m)},HShapeElement.prototype.expandStrokeBoundingBox=function($,m){var L=0;if($.keyframes){for(var j=0;j<$.keyframes.length;j+=1){var ee=$.keyframes[j].s;ee>L&&(L=ee)}L*=$.mult}else L=$.v*$.mult;m.x-=L,m.xMax+=L,m.y-=L,m.yMax+=L},HShapeElement.prototype.currentBoxContains=function($){return this.currentBBox.x<=$.x&&this.currentBBox.y<=$.y&&this.currentBBox.width+this.currentBBox.x>=$.x+$.width&&this.currentBBox.height+this.currentBBox.y>=$.y+$.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var $=this.tempBoundingBox,m=999999;if($.x=m,$.xMax=-m,$.y=m,$.yMax=-m,this.calculateBoundingBox(this.itemsData,$),$.width=$.xMax<$.x?0:$.xMax-$.x,$.height=$.yMax<$.y?0:$.yMax-$.y,this.currentBoxContains($))return;var L=!1;if(this.currentBBox.w!==$.width&&(this.currentBBox.w=$.width,this.shapeCont.setAttribute("width",$.width),L=!0),this.currentBBox.h!==$.height&&(this.currentBBox.h=$.height,this.shapeCont.setAttribute("height",$.height),L=!0),L||this.currentBBox.x!==$.x||this.currentBBox.y!==$.y){this.currentBBox.w=$.width,this.currentBBox.h=$.height,this.currentBBox.x=$.x,this.currentBBox.y=$.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var j=this.shapeCont.style,ee="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";j.transform=ee,j.webkitTransform=ee}}};function HTextElement($,m,L){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement($,m,L)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var $=createNS("g");this.maskedElement.appendChild($),this.innerElem=$}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var $=this.textProperty.currentData;this.renderedLetters=createSizedArray($.l?$.l.length:0);var m=this.innerElem.style,L=$.fc?this.buildColor($.fc):"rgba(0,0,0,0)";m.fill=L,m.color=L,$.sc&&(m.stroke=this.buildColor($.sc),m.strokeWidth=$.sw+"px");var j=this.globalData.fontManager.getFontByName($.f);if(!this.globalData.fontManager.chars)if(m.fontSize=$.finalSize+"px",m.lineHeight=$.finalSize+"px",j.fClass)this.innerElem.className=j.fClass;else{m.fontFamily=j.fFamily;var ee=$.fWeight,re=$.fStyle;m.fontStyle=re,m.fontWeight=ee}var le,ve,ye=$.l;ve=ye.length;var Ee,Me,Ce,De=this.mHelper,Be,ke="",Fe=0;for(le=0;le<ve;le+=1){if(this.globalData.fontManager.chars?(this.textPaths[Fe]?Ee=this.textPaths[Fe]:(Ee=createNS("path"),Ee.setAttribute("stroke-linecap",lineCapEnum[1]),Ee.setAttribute("stroke-linejoin",lineJoinEnum[2]),Ee.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[Fe]?(Me=this.textSpans[Fe],Ce=Me.children[0]):(Me=createTag("div"),Me.style.lineHeight=0,Ce=createNS("svg"),Ce.appendChild(Ee),styleDiv(Me)))):this.isMasked?Ee=this.textPaths[Fe]?this.textPaths[Fe]:createNS("text"):this.textSpans[Fe]?(Me=this.textSpans[Fe],Ee=this.textPaths[Fe]):(Me=createTag("span"),styleDiv(Me),Ee=createTag("span"),styleDiv(Ee),Me.appendChild(Ee)),this.globalData.fontManager.chars){var Oe=this.globalData.fontManager.getCharData($.finalText[le],j.fStyle,this.globalData.fontManager.getFontByName($.f).fFamily),Ne;if(Oe?Ne=Oe.data:Ne=null,De.reset(),Ne&&Ne.shapes&&Ne.shapes.length&&(Be=Ne.shapes[0].it,De.scale($.finalSize/100,$.finalSize/100),ke=this.createPathShape(De,Be),Ee.setAttribute("d",ke)),this.isMasked)this.innerElem.appendChild(Ee);else{if(this.innerElem.appendChild(Me),Ne&&Ne.shapes){document.body.appendChild(Ce);var ze=Ce.getBBox();Ce.setAttribute("width",ze.width+2),Ce.setAttribute("height",ze.height+2),Ce.setAttribute("viewBox",ze.x-1+" "+(ze.y-1)+" "+(ze.width+2)+" "+(ze.height+2));var $e=Ce.style,He="translate("+(ze.x-1)+"px,"+(ze.y-1)+"px)";$e.transform=He,$e.webkitTransform=He,ye[le].yOffset=ze.y-1}else Ce.setAttribute("width",1),Ce.setAttribute("height",1);Me.appendChild(Ce)}}else if(Ee.textContent=ye[le].val,Ee.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(Ee);else{this.innerElem.appendChild(Me);var We=Ee.style,qe="translate3d(0,"+-$.finalSize/1.2+"px,0)";We.transform=qe,We.webkitTransform=qe}this.isMasked?this.textSpans[Fe]=Ee:this.textSpans[Fe]=Me,this.textSpans[Fe].style.display="block",this.textPaths[Fe]=Ee,Fe+=1}for(;Fe<this.textSpans.length;)this.textSpans[Fe].style.display="none",Fe+=1},HTextElement.prototype.renderInnerContent=function(){this.validateText();var $;if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),$=this.svgElement.style;var m="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";$.transform=m,$.webkitTransform=m}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),!(!this.lettersChangedFlag&&!this.textAnimator.lettersChangedFlag)){var L,j,ee=0,re=this.textAnimator.renderedLetters,le=this.textProperty.currentData.l;j=le.length;var ve,ye,Ee;for(L=0;L<j;L+=1)le[L].n?ee+=1:(ye=this.textSpans[L],Ee=this.textPaths[L],ve=re[ee],ee+=1,ve._mdf.m&&(this.isMasked?ye.setAttribute("transform",ve.m):(ye.style.webkitTransform=ve.m,ye.style.transform=ve.m)),ye.style.opacity=ve.o,ve.sw&&ve._mdf.sw&&Ee.setAttribute("stroke-width",ve.sw),ve.sc&&ve._mdf.sc&&Ee.setAttribute("stroke",ve.sc),ve.fc&&ve._mdf.fc&&(Ee.setAttribute("fill",ve.fc),Ee.style.color=ve.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var Me=this.innerElem.getBBox();this.currentBBox.w!==Me.width&&(this.currentBBox.w=Me.width,this.svgElement.setAttribute("width",Me.width)),this.currentBBox.h!==Me.height&&(this.currentBBox.h=Me.height,this.svgElement.setAttribute("height",Me.height));var Ce=1;if(this.currentBBox.w!==Me.width+Ce*2||this.currentBBox.h!==Me.height+Ce*2||this.currentBBox.x!==Me.x-Ce||this.currentBBox.y!==Me.y-Ce){this.currentBBox.w=Me.width+Ce*2,this.currentBBox.h=Me.height+Ce*2,this.currentBBox.x=Me.x-Ce,this.currentBBox.y=Me.y-Ce,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),$=this.svgElement.style;var De="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";$.transform=De,$.webkitTransform=De}}}};function HCameraElement($,m,L){this.initFrame(),this.initBaseData($,m,L),this.initHierarchy();var j=PropertyFactory.getProp;if(this.pe=j(this,$.pe,0,0,this),$.ks.p.s?(this.px=j(this,$.ks.p.x,1,0,this),this.py=j(this,$.ks.p.y,1,0,this),this.pz=j(this,$.ks.p.z,1,0,this)):this.p=j(this,$.ks.p,1,0,this),$.ks.a&&(this.a=j(this,$.ks.a,1,0,this)),$.ks.or.k.length&&$.ks.or.k[0].to){var ee,re=$.ks.or.k.length;for(ee=0;ee<re;ee+=1)$.ks.or.k[ee].to=null,$.ks.or.k[ee].ti=null}this.or=j(this,$.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=j(this,$.ks.rx,0,degToRads,this),this.ry=j(this,$.ks.ry,0,degToRads,this),this.rz=j(this,$.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var $,m=this.comp.threeDElements.length,L,j,ee;for($=0;$<m;$+=1)if(L=this.comp.threeDElements[$],L.type==="3d"){j=L.perspectiveElem.style,ee=L.container.style;var re=this.pe.v+"px",le="0px 0px 0px",ve="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";j.perspective=re,j.webkitPerspective=re,ee.transformOrigin=le,ee.mozTransformOrigin=le,ee.webkitTransformOrigin=le,j.transform=ve,j.webkitTransform=ve}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var $=this._isFirstFrame,m,L;if(this.hierarchy)for(L=this.hierarchy.length,m=0;m<L;m+=1)$=this.hierarchy[m].finalTransform.mProp._mdf||$;if($||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(L=this.hierarchy.length-1,m=L;m>=0;m-=1){var j=this.hierarchy[m].finalTransform.mProp;this.mat.translate(-j.p.v[0],-j.p.v[1],j.p.v[2]),this.mat.rotateX(-j.or.v[0]).rotateY(-j.or.v[1]).rotateZ(j.or.v[2]),this.mat.rotateX(-j.rx.v).rotateY(-j.ry.v).rotateZ(j.rz.v),this.mat.scale(1/j.s.v[0],1/j.s.v[1],1/j.s.v[2]),this.mat.translate(j.a.v[0],j.a.v[1],j.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var ee;this.p?ee=[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:ee=[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var re=Math.sqrt(Math.pow(ee[0],2)+Math.pow(ee[1],2)+Math.pow(ee[2],2)),le=[ee[0]/re,ee[1]/re,ee[2]/re],ve=Math.sqrt(le[2]*le[2]+le[0]*le[0]),ye=Math.atan2(le[1],ve),Ee=Math.atan2(le[0],-le[2]);this.mat.rotateY(Ee).rotateX(-ye)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var Me=!this._prevMat.equals(this.mat);if((Me||this.pe._mdf)&&this.comp.threeDElements){L=this.comp.threeDElements.length;var Ce,De,Be;for(m=0;m<L;m+=1)if(Ce=this.comp.threeDElements[m],Ce.type==="3d"){if(Me){var ke=this.mat.toCSS();Be=Ce.container.style,Be.transform=ke,Be.webkitTransform=ke}this.pe._mdf&&(De=Ce.perspectiveElem.style,De.perspective=this.pe.v+"px",De.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function($){this.prepareProperties($,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null};function HImageElement($,m,L){this.assetData=m.getAssetData($.refId),this.initElement($,m,L)}extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var $=this.globalData.getAssetsPath(this.assetData),m=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",$),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(m),m.crossOrigin="anonymous",m.src=$,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)};function HybridRendererBase($,m){this.animationItem=$,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:m&&m.className||"",imagePreserveAspectRatio:m&&m.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(m&&m.hideOnTransparent===!1),filterSize:{width:m&&m.filterSize&&m.filterSize.width||"400%",height:m&&m.filterSize&&m.filterSize.height||"400%",x:m&&m.filterSize&&m.filterSize.x||"-100%",y:m&&m.filterSize&&m.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var $=this.pendingElements.pop();$.checkParenting()}},HybridRendererBase.prototype.appendElementInPos=function($,m){var L=$.getBaseElement();if(L){var j=this.layers[m];if(!j.ddd||!this.supports3d)if(this.threeDElements)this.addTo3dContainer(L,m);else{for(var ee=0,re,le,ve;ee<m;)this.elements[ee]&&this.elements[ee]!==!0&&this.elements[ee].getBaseElement&&(le=this.elements[ee],ve=this.layers[ee].ddd?this.getThreeDContainerByPos(ee):le.getBaseElement(),re=ve||re),ee+=1;re?(!j.ddd||!this.supports3d)&&this.layerElement.insertBefore(L,re):(!j.ddd||!this.supports3d)&&this.layerElement.appendChild(L)}else this.addTo3dContainer(L,m)}},HybridRendererBase.prototype.createShape=function($){return this.supports3d?new HShapeElement($,this.globalData,this):new SVGShapeElement($,this.globalData,this)},HybridRendererBase.prototype.createText=function($){return this.supports3d?new HTextElement($,this.globalData,this):new SVGTextLottieElement($,this.globalData,this)},HybridRendererBase.prototype.createCamera=function($){return this.camera=new HCameraElement($,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function($){return this.supports3d?new HImageElement($,this.globalData,this):new IImageElement($,this.globalData,this)},HybridRendererBase.prototype.createSolid=function($){return this.supports3d?new HSolidElement($,this.globalData,this):new ISolidElement($,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function($){for(var m=0,L=this.threeDElements.length;m<L;){if(this.threeDElements[m].startPos<=$&&this.threeDElements[m].endPos>=$)return this.threeDElements[m].perspectiveElem;m+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function($,m){var L=createTag("div"),j,ee;styleDiv(L);var re=createTag("div");if(styleDiv(re),m==="3d"){j=L.style,j.width=this.globalData.compSize.w+"px",j.height=this.globalData.compSize.h+"px";var le="50% 50%";j.webkitTransformOrigin=le,j.mozTransformOrigin=le,j.transformOrigin=le,ee=re.style;var ve="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";ee.transform=ve,ee.webkitTransform=ve}L.appendChild(re);var ye={container:re,perspectiveElem:L,startPos:$,endPos:$,type:m};return this.threeDElements.push(ye),ye},HybridRendererBase.prototype.build3dContainers=function(){var $,m=this.layers.length,L,j="";for($=0;$<m;$+=1)this.layers[$].ddd&&this.layers[$].ty!==3?(j!=="3d"&&(j="3d",L=this.createThreeDContainer($,"3d")),L.endPos=Math.max(L.endPos,$)):(j!=="2d"&&(j="2d",L=this.createThreeDContainer($,"2d")),L.endPos=Math.max(L.endPos,$));for(m=this.threeDElements.length,$=m-1;$>=0;$-=1)this.resizerElem.appendChild(this.threeDElements[$].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function($,m){for(var L=0,j=this.threeDElements.length;L<j;){if(m<=this.threeDElements[L].endPos){for(var ee=this.threeDElements[L].startPos,re;ee<m;)this.elements[ee]&&this.elements[ee].getBaseElement&&(re=this.elements[ee].getBaseElement()),ee+=1;re?this.threeDElements[L].container.insertBefore($,re):this.threeDElements[L].container.appendChild($);break}L+=1}},HybridRendererBase.prototype.configAnimation=function($){var m=createTag("div"),L=this.animationItem.wrapper,j=m.style;j.width=$.w+"px",j.height=$.h+"px",this.resizerElem=m,styleDiv(m),j.transformStyle="flat",j.mozTransformStyle="flat",j.webkitTransformStyle="flat",this.renderConfig.className&&m.setAttribute("class",this.renderConfig.className),L.appendChild(m),j.overflow="hidden";var ee=createNS("svg");ee.setAttribute("width","1"),ee.setAttribute("height","1"),styleDiv(ee),this.resizerElem.appendChild(ee);var re=createNS("defs");ee.appendChild(re),this.data=$,this.setupGlobalData($,ee),this.globalData.defs=re,this.layers=$.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var $,m=this.layers?this.layers.length:0;for($=0;$<m;$+=1)this.elements[$]&&this.elements[$].destroy&&this.elements[$].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var $=this.animationItem.wrapper.offsetWidth,m=this.animationItem.wrapper.offsetHeight,L=$/m,j=this.globalData.compSize.w/this.globalData.compSize.h,ee,re,le,ve;j>L?(ee=$/this.globalData.compSize.w,re=$/this.globalData.compSize.w,le=0,ve=(m-this.globalData.compSize.h*($/this.globalData.compSize.w))/2):(ee=m/this.globalData.compSize.h,re=m/this.globalData.compSize.h,le=($-this.globalData.compSize.w*(m/this.globalData.compSize.h))/2,ve=0);var ye=this.resizerElem.style;ye.webkitTransform="matrix3d("+ee+",0,0,0,0,"+re+",0,0,0,0,1,0,"+le+","+ve+",0,1)",ye.transform=ye.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var $=this.globalData.compSize.w,m=this.globalData.compSize.h,L,j=this.threeDElements.length;for(L=0;L<j;L+=1){var ee=this.threeDElements[L].perspectiveElem.style;ee.webkitPerspective=Math.sqrt(Math.pow($,2)+Math.pow(m,2))+"px",ee.perspective=ee.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function($){var m,L=$.length,j=createTag("div");for(m=0;m<L;m+=1)if($[m].xt){var ee=this.createComp($[m],j,this.globalData.comp,null);ee.initExpressions(),this.globalData.projectInterface.registerComposition(ee)}};function HCompElement($,m,L){this.layers=$.layers,this.supports3d=!$.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement($,m,L),this.tm=$.tm?PropertyFactory.getProp(this,$.tm,0,m.frameRate,this):{_placeholder:!0}}extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function($,m){for(var L=0,j;L<m;)this.elements[L]&&this.elements[L].getBaseElement&&(j=this.elements[L].getBaseElement()),L+=1;j?this.layerElement.insertBefore($,j):this.layerElement.appendChild($)},HCompElement.prototype.createComp=function($){return this.supports3d?new HCompElement($,this.globalData,this):new SVGCompElement($,this.globalData,this)};function HybridRenderer($,m){this.animationItem=$,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:m&&m.className||"",imagePreserveAspectRatio:m&&m.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(m&&m.hideOnTransparent===!1),filterSize:{width:m&&m.filterSize&&m.filterSize.width||"400%",height:m&&m.filterSize&&m.filterSize.height||"400%",x:m&&m.filterSize&&m.filterSize.x||"-100%",y:m&&m.filterSize&&m.filterSize.y||"-100%"},runExpressions:!m||m.runExpressions===void 0||m.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function($){return this.supports3d?new HCompElement($,this.globalData,this):new SVGCompElement($,this.globalData,this)};var CompExpressionInterface=function(){return function($){function m(L){for(var j=0,ee=$.layers.length;j<ee;){if($.layers[j].nm===L||$.layers[j].ind===L)return $.elements[j].layerInterface;j+=1}return null}return Object.defineProperty(m,"_name",{value:$.data.nm}),m.layer=m,m.pixelAspect=1,m.height=$.data.h||$.globalData.compSize.h,m.width=$.data.w||$.globalData.compSize.w,m.pixelAspect=1,m.frameDuration=1/$.globalData.frameRate,m.displayStartTime=0,m.numLayers=$.layers.length,m}}();function _typeof$2($){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$2=function(L){return typeof L}:_typeof$2=function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},_typeof$2($)}function seedRandom($,m){var L=this,j=256,ee=6,re=52,le="random",ve=m.pow(j,ee),ye=m.pow(2,re),Ee=ye*2,Me=j-1,Ce;function De($e,He,We){var qe=[];He=He===!0?{entropy:!0}:He||{};var Ye=Oe(Fe(He.entropy?[$e,ze($)]:$e===null?Ne():$e,3),qe),Ze=new Be(qe),Ke=function(){for(var ft=Ze.g(ee),mt=ve,Et=0;ft<ye;)ft=(ft+Et)*j,mt*=j,Et=Ze.g(1);for(;ft>=Ee;)ft/=2,mt/=2,Et>>>=1;return(ft+Et)/mt};return Ke.int32=function(){return Ze.g(4)|0},Ke.quick=function(){return Ze.g(4)/4294967296},Ke.double=Ke,Oe(ze(Ze.S),$),(He.pass||We||function(rt,ft,mt,Et){return Et&&(Et.S&&ke(Et,Ze),rt.state=function(){return ke(Ze,{})}),mt?(m[le]=rt,ft):rt})(Ke,Ye,"global"in He?He.global:this==m,He.state)}m["seed"+le]=De;function Be($e){var He,We=$e.length,qe=this,Ye=0,Ze=qe.i=qe.j=0,Ke=qe.S=[];for(We||($e=[We++]);Ye<j;)Ke[Ye]=Ye++;for(Ye=0;Ye<j;Ye++)Ke[Ye]=Ke[Ze=Me&Ze+$e[Ye%We]+(He=Ke[Ye])],Ke[Ze]=He;qe.g=function(rt){for(var ft,mt=0,Et=qe.i,bt=qe.j,Ct=qe.S;rt--;)ft=Ct[Et=Me&Et+1],mt=mt*j+Ct[Me&(Ct[Et]=Ct[bt=Me&bt+ft])+(Ct[bt]=ft)];return qe.i=Et,qe.j=bt,mt}}function ke($e,He){return He.i=$e.i,He.j=$e.j,He.S=$e.S.slice(),He}function Fe($e,He){var We=[],qe=_typeof$2($e),Ye;if(He&&qe=="object")for(Ye in $e)try{We.push(Fe($e[Ye],He-1))}catch{}return We.length?We:qe=="string"?$e:$e+"\0"}function Oe($e,He){for(var We=$e+"",qe,Ye=0;Ye<We.length;)He[Me&Ye]=Me&(qe^=He[Me&Ye]*19)+We.charCodeAt(Ye++);return ze(He)}function Ne(){try{var $e=new Uint8Array(j);return(L.crypto||L.msCrypto).getRandomValues($e),ze($e)}catch{var He=L.navigator,We=He&&He.plugins;return[+new Date,L,We,L.screen,ze($)]}}function ze($e){return String.fromCharCode.apply(0,$e)}Oe(m.random(),$)}function initialize$2($){seedRandom([],$)}var propTypes={SHAPE:"shape"};function _typeof$1($){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$1=function(L){return typeof L}:_typeof$1=function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},_typeof$1($)}var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null,_lottieGlobal={};initialize$2(BMMath);function resetFrame(){_lottieGlobal={}}function $bm_isInstanceOfArray($){return $.constructor===Array||$.constructor===Float32Array}function isNumerable($,m){return $==="number"||m instanceof Number||$==="boolean"||$==="string"}function $bm_neg($){var m=_typeof$1($);if(m==="number"||$ instanceof Number||m==="boolean")return-$;if($bm_isInstanceOfArray($)){var L,j=$.length,ee=[];for(L=0;L<j;L+=1)ee[L]=-$[L];return ee}return $.propType?$.v:-$}var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum($,m){var L=_typeof$1($),j=_typeof$1(m);if(isNumerable(L,$)&&isNumerable(j,m)||L==="string"||j==="string")return $+m;if($bm_isInstanceOfArray($)&&isNumerable(j,m))return $=$.slice(0),$[0]+=m,$;if(isNumerable(L,$)&&$bm_isInstanceOfArray(m))return m=m.slice(0),m[0]=$+m[0],m;if($bm_isInstanceOfArray($)&&$bm_isInstanceOfArray(m)){for(var ee=0,re=$.length,le=m.length,ve=[];ee<re||ee<le;)(typeof $[ee]=="number"||$[ee]instanceof Number)&&(typeof m[ee]=="number"||m[ee]instanceof Number)?ve[ee]=$[ee]+m[ee]:ve[ee]=m[ee]===void 0?$[ee]:$[ee]||m[ee],ee+=1;return ve}return 0}var add=sum;function sub($,m){var L=_typeof$1($),j=_typeof$1(m);if(isNumerable(L,$)&&isNumerable(j,m))return L==="string"&&($=parseInt($,10)),j==="string"&&(m=parseInt(m,10)),$-m;if($bm_isInstanceOfArray($)&&isNumerable(j,m))return $=$.slice(0),$[0]-=m,$;if(isNumerable(L,$)&&$bm_isInstanceOfArray(m))return m=m.slice(0),m[0]=$-m[0],m;if($bm_isInstanceOfArray($)&&$bm_isInstanceOfArray(m)){for(var ee=0,re=$.length,le=m.length,ve=[];ee<re||ee<le;)(typeof $[ee]=="number"||$[ee]instanceof Number)&&(typeof m[ee]=="number"||m[ee]instanceof Number)?ve[ee]=$[ee]-m[ee]:ve[ee]=m[ee]===void 0?$[ee]:$[ee]||m[ee],ee+=1;return ve}return 0}function mul($,m){var L=_typeof$1($),j=_typeof$1(m),ee;if(isNumerable(L,$)&&isNumerable(j,m))return $*m;var re,le;if($bm_isInstanceOfArray($)&&isNumerable(j,m)){for(le=$.length,ee=createTypedArray("float32",le),re=0;re<le;re+=1)ee[re]=$[re]*m;return ee}if(isNumerable(L,$)&&$bm_isInstanceOfArray(m)){for(le=m.length,ee=createTypedArray("float32",le),re=0;re<le;re+=1)ee[re]=$*m[re];return ee}return 0}function div($,m){var L=_typeof$1($),j=_typeof$1(m),ee;if(isNumerable(L,$)&&isNumerable(j,m))return $/m;var re,le;if($bm_isInstanceOfArray($)&&isNumerable(j,m)){for(le=$.length,ee=createTypedArray("float32",le),re=0;re<le;re+=1)ee[re]=$[re]/m;return ee}if(isNumerable(L,$)&&$bm_isInstanceOfArray(m)){for(le=m.length,ee=createTypedArray("float32",le),re=0;re<le;re+=1)ee[re]=$/m[re];return ee}return 0}function mod($,m){return typeof $=="string"&&($=parseInt($,10)),typeof m=="string"&&(m=parseInt(m,10)),$%m}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp($,m,L){if(m>L){var j=L;L=m,m=j}return Math.min(Math.max($,m),L)}function radiansToDegrees($){return $/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians($){return $*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length($,m){if(typeof $=="number"||$ instanceof Number)return m=m||0,Math.abs($-m);m||(m=helperLengthArray);var L,j=Math.min($.length,m.length),ee=0;for(L=0;L<j;L+=1)ee+=Math.pow(m[L]-$[L],2);return Math.sqrt(ee)}function normalize($){return div($,length($))}function rgbToHsl($){var m=$[0],L=$[1],j=$[2],ee=Math.max(m,L,j),re=Math.min(m,L,j),le,ve,ye=(ee+re)/2;if(ee===re)le=0,ve=0;else{var Ee=ee-re;switch(ve=ye>.5?Ee/(2-ee-re):Ee/(ee+re),ee){case m:le=(L-j)/Ee+(L<j?6:0);break;case L:le=(j-m)/Ee+2;break;case j:le=(m-L)/Ee+4;break}le/=6}return[le,ve,ye,$[3]]}function hue2rgb($,m,L){return L<0&&(L+=1),L>1&&(L-=1),L<1/6?$+(m-$)*6*L:L<1/2?m:L<2/3?$+(m-$)*(2/3-L)*6:$}function hslToRgb($){var m=$[0],L=$[1],j=$[2],ee,re,le;if(L===0)ee=j,le=j,re=j;else{var ve=j<.5?j*(1+L):j+L-j*L,ye=2*j-ve;ee=hue2rgb(ye,ve,m+1/3),re=hue2rgb(ye,ve,m),le=hue2rgb(ye,ve,m-1/3)}return[ee,re,le,$[3]]}function linear($,m,L,j,ee){if((j===void 0||ee===void 0)&&(j=m,ee=L,m=0,L=1),L<m){var re=L;L=m,m=re}if($<=m)return j;if($>=L)return ee;var le=L===m?0:($-m)/(L-m);if(!j.length)return j+(ee-j)*le;var ve,ye=j.length,Ee=createTypedArray("float32",ye);for(ve=0;ve<ye;ve+=1)Ee[ve]=j[ve]+(ee[ve]-j[ve])*le;return Ee}function random($,m){if(m===void 0&&($===void 0?($=0,m=1):(m=$,$=void 0)),m.length){var L,j=m.length;$||($=createTypedArray("float32",j));var ee=createTypedArray("float32",j),re=BMMath.random();for(L=0;L<j;L+=1)ee[L]=$[L]+re*(m[L]-$[L]);return ee}$===void 0&&($=0);var le=BMMath.random();return $+le*(m-$)}function createPath($,m,L,j){var ee,re=$.length,le=shapePool.newElement();le.setPathData(!!j,re);var ve=[0,0],ye,Ee;for(ee=0;ee<re;ee+=1)ye=m&&m[ee]?m[ee]:ve,Ee=L&&L[ee]?L[ee]:ve,le.setTripleAt($[ee][0],$[ee][1],Ee[0]+$[ee][0],Ee[1]+$[ee][1],ye[0]+$[ee][0],ye[1]+$[ee][1],ee,!0);return le}function initiateExpression(elem,data,property){function noOp($){return $}if(!elem.globalData.renderConfig.runExpressions)return noOp;var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=val.indexOf("random")!==-1,elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||this.data.hd!==!0,wiggle=(function $(m,L){var j,ee,re=this.pv.length?this.pv.length:1,le=createTypedArray("float32",re);m=5;var ve=Math.floor(time*m);for(j=0,ee=0;j<ve;){for(ee=0;ee<re;ee+=1)le[ee]+=-L+L*2*BMMath.random();j+=1}var ye=time*m,Ee=ye-Math.floor(ye),Me=createTypedArray("float32",re);if(re>1){for(ee=0;ee<re;ee+=1)Me[ee]=this.pv[ee]+le[ee]+(-L+L*2*BMMath.random())*Ee;return Me}return this.pv+le[0]+(-L+L*2*BMMath.random())*Ee}).bind(this);thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty));function loopInDuration($,m){return loopIn($,m,!0)}function loopOutDuration($,m){return loopOut($,m,!0)}this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);function lookAt($,m){var L=[m[0]-$[0],m[1]-$[1],m[2]-$[2]],j=Math.atan2(L[0],Math.sqrt(L[1]*L[1]+L[2]*L[2]))/degToRads,ee=-Math.atan2(L[1],L[2])/degToRads;return[ee,j,0]}function easeOut($,m,L,j,ee){return applyEase(easeOutBez,$,m,L,j,ee)}function easeIn($,m,L,j,ee){return applyEase(easeInBez,$,m,L,j,ee)}function ease($,m,L,j,ee){return applyEase(easeInOutBez,$,m,L,j,ee)}function applyEase($,m,L,j,ee,re){ee===void 0?(ee=L,re=j):m=(m-L)/(j-L),m>1?m=1:m<0&&(m=0);var le=$(m);if($bm_isInstanceOfArray(ee)){var ve,ye=ee.length,Ee=createTypedArray("float32",ye);for(ve=0;ve<ye;ve+=1)Ee[ve]=(re[ve]-ee[ve])*le+ee[ve];return Ee}return(re-ee)*le+ee}function nearestKey($){var m,L=data.k.length,j,ee;if(!data.k.length||typeof data.k[0]=="number")j=0,ee=0;else if(j=-1,$*=elem.comp.globalData.frameRate,$<data.k[0].t)j=1,ee=data.k[0].t;else{for(m=0;m<L-1;m+=1)if($===data.k[m].t){j=m+1,ee=data.k[m].t;break}else if($>data.k[m].t&&$<data.k[m+1].t){$-data.k[m].t>data.k[m+1].t-$?(j=m+2,ee=data.k[m+1].t):(j=m+1,ee=data.k[m].t);break}j===-1&&(j=m+1,ee=data.k[m].t)}var re={};return re.index=j,re.time=ee/elem.comp.globalData.frameRate,re}function key($){var m,L,j;if(!data.k.length||typeof data.k[0]=="number")throw new Error("The property has no keyframe at index "+$);$-=1,m={time:data.k[$].t/elem.comp.globalData.frameRate,value:[]};var ee=Object.prototype.hasOwnProperty.call(data.k[$],"s")?data.k[$].s:data.k[$-1].e;for(j=ee.length,L=0;L<j;L+=1)m[L]=ee[L],m.value[L]=ee[L];return m}function framesToTime($,m){return m||(m=elem.comp.globalData.frameRate),$/m}function timeToFrames($,m){return!$&&$!==0&&($=time),m||(m=elem.comp.globalData.frameRate),$*m}function seedRandom($){BMMath.seedrandom(randSeed+$)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring($,m){return typeof value=="string"?m===void 0?value.substring($):value.substring($,m):""}function substr($,m){return typeof value=="string"?m===void 0?value.substr($):value.substr($,m):""}function posterizeTime($){time=$===0?0:Math.floor(time*$)/$,value=valueAtTime(time)}var time,velocity,value,text,textIndex,textTotal,selectorValue,index=elem.data.ind,hasParent=!!(elem.hierarchy&&elem.hierarchy.length),parent,randSeed=Math.floor(Math.random()*1e6),globalData=elem.globalData;function executeExpression($){return value=$,this.frameExpressionId===elem.globalData.frameId&&this.propType!=="textSelector"?value:(this.propType==="textSelector"&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),elemType===4&&!content&&(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),hasParent=!!(elem.hierarchy&&elem.hierarchy.length),hasParent&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt,scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath,_lottieGlobal],ob.resetFrame=resetFrame,ob}(),Expressions=function(){var $={};$.initExpressions=m,$.resetFrame=ExpressionManager.resetFrame;function m(L){var j=0,ee=[];function re(){j+=1}function le(){j-=1,j===0&&ye()}function ve(Ee){ee.indexOf(Ee)===-1&&ee.push(Ee)}function ye(){var Ee,Me=ee.length;for(Ee=0;Ee<Me;Ee+=1)ee[Ee].release();ee.length=0}L.renderer.compInterface=CompExpressionInterface(L.renderer),L.renderer.globalData.projectInterface.registerComposition(L.renderer),L.renderer.globalData.pushExpression=re,L.renderer.globalData.popExpression=le,L.renderer.globalData.registerExpressionProperty=ve}return $}(),MaskManagerInterface=function(){function $(L,j){this._mask=L,this._data=j}Object.defineProperty($.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty($.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),this._mask.op.v*100}});var m=function(j){var ee=createSizedArray(j.viewData.length),re,le=j.viewData.length;for(re=0;re<le;re+=1)ee[re]=new $(j.viewData[re],j.masksProperties[re]);var ve=function(Ee){for(re=0;re<le;){if(j.masksProperties[re].nm===Ee)return ee[re];re+=1}return null};return ve};return m}(),ExpressionPropertyInterface=function(){var $={pv:0,v:0,mult:1},m={pv:[0,0,0],v:[0,0,0],mult:1};function L(le,ve,ye){Object.defineProperty(le,"velocity",{get:function(){return ve.getVelocityAtTime(ve.comp.currentFrame)}}),le.numKeys=ve.keyframes?ve.keyframes.length:0,le.key=function(Ee){if(!le.numKeys)return 0;var Me="";"s"in ve.keyframes[Ee-1]?Me=ve.keyframes[Ee-1].s:"e"in ve.keyframes[Ee-2]?Me=ve.keyframes[Ee-2].e:Me=ve.keyframes[Ee-2].s;var Ce=ye==="unidimensional"?new Number(Me):Object.assign({},Me);return Ce.time=ve.keyframes[Ee-1].t/ve.elem.comp.globalData.frameRate,Ce.value=ye==="unidimensional"?Me[0]:Me,Ce},le.valueAtTime=ve.getValueAtTime,le.speedAtTime=ve.getSpeedAtTime,le.velocityAtTime=ve.getVelocityAtTime,le.propertyGroup=ve.propertyGroup}function j(le){(!le||!("pv"in le))&&(le=$);var ve=1/le.mult,ye=le.pv*ve,Ee=new Number(ye);return Ee.value=ye,L(Ee,le,"unidimensional"),function(){return le.k&&le.getValue(),ye=le.v*ve,Ee.value!==ye&&(Ee=new Number(ye),Ee.value=ye,L(Ee,le,"unidimensional")),Ee}}function ee(le){(!le||!("pv"in le))&&(le=m);var ve=1/le.mult,ye=le.data&&le.data.l||le.pv.length,Ee=createTypedArray("float32",ye),Me=createTypedArray("float32",ye);return Ee.value=Me,L(Ee,le,"multidimensional"),function(){le.k&&le.getValue();for(var Ce=0;Ce<ye;Ce+=1)Me[Ce]=le.v[Ce]*ve,Ee[Ce]=Me[Ce];return Ee}}function re(){return $}return function(le){return le?le.propType==="unidimensional"?j(le):ee(le):re}}(),TransformExpressionInterface=function(){return function($){function m(le){switch(le){case"scale":case"Scale":case"ADBE Scale":case 6:return m.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return m.rotation;case"ADBE Rotate X":return m.xRotation;case"ADBE Rotate Y":return m.yRotation;case"position":case"Position":case"ADBE Position":case 2:return m.position;case"ADBE Position_0":return m.xPosition;case"ADBE Position_1":return m.yPosition;case"ADBE Position_2":return m.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return m.anchorPoint;case"opacity":case"Opacity":case 11:return m.opacity;default:return null}}Object.defineProperty(m,"rotation",{get:ExpressionPropertyInterface($.r||$.rz)}),Object.defineProperty(m,"zRotation",{get:ExpressionPropertyInterface($.rz||$.r)}),Object.defineProperty(m,"xRotation",{get:ExpressionPropertyInterface($.rx)}),Object.defineProperty(m,"yRotation",{get:ExpressionPropertyInterface($.ry)}),Object.defineProperty(m,"scale",{get:ExpressionPropertyInterface($.s)});var L,j,ee,re;return $.p?re=ExpressionPropertyInterface($.p):(L=ExpressionPropertyInterface($.px),j=ExpressionPropertyInterface($.py),$.pz&&(ee=ExpressionPropertyInterface($.pz))),Object.defineProperty(m,"position",{get:function(){return $.p?re():[L(),j(),ee?ee():0]}}),Object.defineProperty(m,"xPosition",{get:ExpressionPropertyInterface($.px)}),Object.defineProperty(m,"yPosition",{get:ExpressionPropertyInterface($.py)}),Object.defineProperty(m,"zPosition",{get:ExpressionPropertyInterface($.pz)}),Object.defineProperty(m,"anchorPoint",{get:ExpressionPropertyInterface($.a)}),Object.defineProperty(m,"opacity",{get:ExpressionPropertyInterface($.o)}),Object.defineProperty(m,"skew",{get:ExpressionPropertyInterface($.sk)}),Object.defineProperty(m,"skewAxis",{get:ExpressionPropertyInterface($.sa)}),Object.defineProperty(m,"orientation",{get:ExpressionPropertyInterface($.or)}),m}}(),LayerExpressionInterface=function(){function $(Ee){var Me=new Matrix;if(Ee!==void 0){var Ce=this._elem.finalTransform.mProp.getValueAtTime(Ee);Ce.clone(Me)}else{var De=this._elem.finalTransform.mProp;De.applyToMatrix(Me)}return Me}function m(Ee,Me){var Ce=this.getMatrix(Me);return Ce.props[12]=0,Ce.props[13]=0,Ce.props[14]=0,this.applyPoint(Ce,Ee)}function L(Ee,Me){var Ce=this.getMatrix(Me);return this.applyPoint(Ce,Ee)}function j(Ee,Me){var Ce=this.getMatrix(Me);return Ce.props[12]=0,Ce.props[13]=0,Ce.props[14]=0,this.invertPoint(Ce,Ee)}function ee(Ee,Me){var Ce=this.getMatrix(Me);return this.invertPoint(Ce,Ee)}function re(Ee,Me){if(this._elem.hierarchy&&this._elem.hierarchy.length){var Ce,De=this._elem.hierarchy.length;for(Ce=0;Ce<De;Ce+=1)this._elem.hierarchy[Ce].finalTransform.mProp.applyToMatrix(Ee)}return Ee.applyToPointArray(Me[0],Me[1],Me[2]||0)}function le(Ee,Me){if(this._elem.hierarchy&&this._elem.hierarchy.length){var Ce,De=this._elem.hierarchy.length;for(Ce=0;Ce<De;Ce+=1)this._elem.hierarchy[Ce].finalTransform.mProp.applyToMatrix(Ee)}return Ee.inversePoint(Me)}function ve(Ee){var Me=new Matrix;if(Me.reset(),this._elem.finalTransform.mProp.applyToMatrix(Me),this._elem.hierarchy&&this._elem.hierarchy.length){var Ce,De=this._elem.hierarchy.length;for(Ce=0;Ce<De;Ce+=1)this._elem.hierarchy[Ce].finalTransform.mProp.applyToMatrix(Me);return Me.inversePoint(Ee)}return Me.inversePoint(Ee)}function ye(){return[1,1,1,1]}return function(Ee){var Me;function Ce(Fe){Be.mask=new MaskManagerInterface(Fe,Ee)}function De(Fe){Be.effect=Fe}function Be(Fe){switch(Fe){case"ADBE Root Vectors Group":case"Contents":case 2:return Be.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return Me;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return Be.effect;case"ADBE Text Properties":return Be.textInterface;default:return null}}Be.getMatrix=$,Be.invertPoint=le,Be.applyPoint=re,Be.toWorld=L,Be.toWorldVec=m,Be.fromWorld=ee,Be.fromWorldVec=j,Be.toComp=L,Be.fromComp=ve,Be.sampleImage=ye,Be.sourceRectAtTime=Ee.sourceRectAtTime.bind(Ee),Be._elem=Ee,Me=TransformExpressionInterface(Ee.finalTransform.mProp);var ke=getDescriptor(Me,"anchorPoint");return Object.defineProperties(Be,{hasParent:{get:function(){return Ee.hierarchy.length}},parent:{get:function(){return Ee.hierarchy[0].layerInterface}},rotation:getDescriptor(Me,"rotation"),scale:getDescriptor(Me,"scale"),position:getDescriptor(Me,"position"),opacity:getDescriptor(Me,"opacity"),anchorPoint:ke,anchor_point:ke,transform:{get:function(){return Me}},active:{get:function(){return Ee.isInRange}}}),Be.startTime=Ee.data.st,Be.index=Ee.data.ind,Be.source=Ee.data.refId,Be.height=Ee.data.ty===0?Ee.data.h:100,Be.width=Ee.data.ty===0?Ee.data.w:100,Be.inPoint=Ee.data.ip/Ee.comp.globalData.frameRate,Be.outPoint=Ee.data.op/Ee.comp.globalData.frameRate,Be._name=Ee.data.nm,Be.registerMaskInterface=Ce,Be.registerEffectsInterface=De,Be}}(),propertyGroupFactory=function(){return function($,m){return function(L){return L=L===void 0?1:L,L<=0?$:m(L-1)}}}(),PropertyInterface=function(){return function($,m){var L={_name:$};function j(ee){return ee=ee===void 0?1:ee,ee<=0?L:m(ee-1)}return j}}(),EffectsExpressionInterface=function(){var $={createEffectsInterface:m};function m(ee,re){if(ee.effectsManager){var le=[],ve=ee.data.ef,ye,Ee=ee.effectsManager.effectElements.length;for(ye=0;ye<Ee;ye+=1)le.push(L(ve[ye],ee.effectsManager.effectElements[ye],re,ee));var Me=ee.data.ef||[],Ce=function(Be){for(ye=0,Ee=Me.length;ye<Ee;){if(Be===Me[ye].nm||Be===Me[ye].mn||Be===Me[ye].ix)return le[ye];ye+=1}return null};return Object.defineProperty(Ce,"numProperties",{get:function(){return Me.length}}),Ce}return null}function L(ee,re,le,ve){function ye(Be){for(var ke=ee.ef,Fe=0,Oe=ke.length;Fe<Oe;){if(Be===ke[Fe].nm||Be===ke[Fe].mn||Be===ke[Fe].ix)return ke[Fe].ty===5?Me[Fe]:Me[Fe]();Fe+=1}throw new Error}var Ee=propertyGroupFactory(ye,le),Me=[],Ce,De=ee.ef.length;for(Ce=0;Ce<De;Ce+=1)ee.ef[Ce].ty===5?Me.push(L(ee.ef[Ce],re.effectElements[Ce],re.effectElements[Ce].propertyGroup,ve)):Me.push(j(re.effectElements[Ce],ee.ef[Ce].ty,ve,Ee));return ee.mn==="ADBE Color Control"&&Object.defineProperty(ye,"color",{get:function(){return Me[0]()}}),Object.defineProperties(ye,{numProperties:{get:function(){return ee.np}},_name:{value:ee.nm},propertyGroup:{value:Ee}}),ye.enabled=ee.en!==0,ye.active=ye.enabled,ye}function j(ee,re,le,ve){var ye=ExpressionPropertyInterface(ee.p);function Ee(){return re===10?le.comp.compInterface(ee.p.v):ye()}return ee.p.setGroupProperty&&ee.p.setGroupProperty(PropertyInterface("",ve)),Ee}return $}(),ShapePathInterface=function(){return function(m,L,j){var ee=L.sh;function re(ve){return ve==="Shape"||ve==="shape"||ve==="Path"||ve==="path"||ve==="ADBE Vector Shape"||ve===2?re.path:null}var le=propertyGroupFactory(re,j);return ee.setGroupProperty(PropertyInterface("Path",le)),Object.defineProperties(re,{path:{get:function(){return ee.k&&ee.getValue(),ee}},shape:{get:function(){return ee.k&&ee.getValue(),ee}},_name:{value:m.nm},ix:{value:m.ix},propertyIndex:{value:m.ix},mn:{value:m.mn},propertyGroup:{value:j}}),re}}(),ShapeExpressionInterface=function(){function $(ke,Fe,Oe){var Ne=[],ze,$e=ke?ke.length:0;for(ze=0;ze<$e;ze+=1)ke[ze].ty==="gr"?Ne.push(L(ke[ze],Fe[ze],Oe)):ke[ze].ty==="fl"?Ne.push(j(ke[ze],Fe[ze],Oe)):ke[ze].ty==="st"?Ne.push(le(ke[ze],Fe[ze],Oe)):ke[ze].ty==="tm"?Ne.push(ve(ke[ze],Fe[ze],Oe)):ke[ze].ty==="tr"||(ke[ze].ty==="el"?Ne.push(Ee(ke[ze],Fe[ze],Oe)):ke[ze].ty==="sr"?Ne.push(Me(ke[ze],Fe[ze],Oe)):ke[ze].ty==="sh"?Ne.push(ShapePathInterface(ke[ze],Fe[ze],Oe)):ke[ze].ty==="rc"?Ne.push(Ce(ke[ze],Fe[ze],Oe)):ke[ze].ty==="rd"?Ne.push(De(ke[ze],Fe[ze],Oe)):ke[ze].ty==="rp"?Ne.push(Be(ke[ze],Fe[ze],Oe)):ke[ze].ty==="gf"?Ne.push(ee(ke[ze],Fe[ze],Oe)):Ne.push(re(ke[ze],Fe[ze])));return Ne}function m(ke,Fe,Oe){var Ne,ze=function(We){for(var qe=0,Ye=Ne.length;qe<Ye;){if(Ne[qe]._name===We||Ne[qe].mn===We||Ne[qe].propertyIndex===We||Ne[qe].ix===We||Ne[qe].ind===We)return Ne[qe];qe+=1}return typeof We=="number"?Ne[We-1]:null};ze.propertyGroup=propertyGroupFactory(ze,Oe),Ne=$(ke.it,Fe.it,ze.propertyGroup),ze.numProperties=Ne.length;var $e=ye(ke.it[ke.it.length-1],Fe.it[Fe.it.length-1],ze.propertyGroup);return ze.transform=$e,ze.propertyIndex=ke.cix,ze._name=ke.nm,ze}function L(ke,Fe,Oe){var Ne=function(We){switch(We){case"ADBE Vectors Group":case"Contents":case 2:return Ne.content;default:return Ne.transform}};Ne.propertyGroup=propertyGroupFactory(Ne,Oe);var ze=m(ke,Fe,Ne.propertyGroup),$e=ye(ke.it[ke.it.length-1],Fe.it[Fe.it.length-1],Ne.propertyGroup);return Ne.content=ze,Ne.transform=$e,Object.defineProperty(Ne,"_name",{get:function(){return ke.nm}}),Ne.numProperties=ke.np,Ne.propertyIndex=ke.ix,Ne.nm=ke.nm,Ne.mn=ke.mn,Ne}function j(ke,Fe,Oe){function Ne(ze){return ze==="Color"||ze==="color"?Ne.color:ze==="Opacity"||ze==="opacity"?Ne.opacity:null}return Object.defineProperties(Ne,{color:{get:ExpressionPropertyInterface(Fe.c)},opacity:{get:ExpressionPropertyInterface(Fe.o)},_name:{value:ke.nm},mn:{value:ke.mn}}),Fe.c.setGroupProperty(PropertyInterface("Color",Oe)),Fe.o.setGroupProperty(PropertyInterface("Opacity",Oe)),Ne}function ee(ke,Fe,Oe){function Ne(ze){return ze==="Start Point"||ze==="start point"?Ne.startPoint:ze==="End Point"||ze==="end point"?Ne.endPoint:ze==="Opacity"||ze==="opacity"?Ne.opacity:null}return Object.defineProperties(Ne,{startPoint:{get:ExpressionPropertyInterface(Fe.s)},endPoint:{get:ExpressionPropertyInterface(Fe.e)},opacity:{get:ExpressionPropertyInterface(Fe.o)},type:{get:function(){return"a"}},_name:{value:ke.nm},mn:{value:ke.mn}}),Fe.s.setGroupProperty(PropertyInterface("Start Point",Oe)),Fe.e.setGroupProperty(PropertyInterface("End Point",Oe)),Fe.o.setGroupProperty(PropertyInterface("Opacity",Oe)),Ne}function re(){function ke(){return null}return ke}function le(ke,Fe,Oe){var Ne=propertyGroupFactory(Ye,Oe),ze=propertyGroupFactory(qe,Ne);function $e(Ze){Object.defineProperty(qe,ke.d[Ze].nm,{get:ExpressionPropertyInterface(Fe.d.dataProps[Ze].p)})}var He,We=ke.d?ke.d.length:0,qe={};for(He=0;He<We;He+=1)$e(He),Fe.d.dataProps[He].p.setGroupProperty(ze);function Ye(Ze){return Ze==="Color"||Ze==="color"?Ye.color:Ze==="Opacity"||Ze==="opacity"?Ye.opacity:Ze==="Stroke Width"||Ze==="stroke width"?Ye.strokeWidth:null}return Object.defineProperties(Ye,{color:{get:ExpressionPropertyInterface(Fe.c)},opacity:{get:ExpressionPropertyInterface(Fe.o)},strokeWidth:{get:ExpressionPropertyInterface(Fe.w)},dash:{get:function(){return qe}},_name:{value:ke.nm},mn:{value:ke.mn}}),Fe.c.setGroupProperty(PropertyInterface("Color",Ne)),Fe.o.setGroupProperty(PropertyInterface("Opacity",Ne)),Fe.w.setGroupProperty(PropertyInterface("Stroke Width",Ne)),Ye}function ve(ke,Fe,Oe){function Ne($e){return $e===ke.e.ix||$e==="End"||$e==="end"?Ne.end:$e===ke.s.ix?Ne.start:$e===ke.o.ix?Ne.offset:null}var ze=propertyGroupFactory(Ne,Oe);return Ne.propertyIndex=ke.ix,Fe.s.setGroupProperty(PropertyInterface("Start",ze)),Fe.e.setGroupProperty(PropertyInterface("End",ze)),Fe.o.setGroupProperty(PropertyInterface("Offset",ze)),Ne.propertyIndex=ke.ix,Ne.propertyGroup=Oe,Object.defineProperties(Ne,{start:{get:ExpressionPropertyInterface(Fe.s)},end:{get:ExpressionPropertyInterface(Fe.e)},offset:{get:ExpressionPropertyInterface(Fe.o)},_name:{value:ke.nm}}),Ne.mn=ke.mn,Ne}function ye(ke,Fe,Oe){function Ne($e){return ke.a.ix===$e||$e==="Anchor Point"?Ne.anchorPoint:ke.o.ix===$e||$e==="Opacity"?Ne.opacity:ke.p.ix===$e||$e==="Position"?Ne.position:ke.r.ix===$e||$e==="Rotation"||$e==="ADBE Vector Rotation"?Ne.rotation:ke.s.ix===$e||$e==="Scale"?Ne.scale:ke.sk&&ke.sk.ix===$e||$e==="Skew"?Ne.skew:ke.sa&&ke.sa.ix===$e||$e==="Skew Axis"?Ne.skewAxis:null}var ze=propertyGroupFactory(Ne,Oe);return Fe.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",ze)),Fe.transform.mProps.p.setGroupProperty(PropertyInterface("Position",ze)),Fe.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",ze)),Fe.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",ze)),Fe.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",ze)),Fe.transform.mProps.sk&&(Fe.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",ze)),Fe.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",ze))),Fe.transform.op.setGroupProperty(PropertyInterface("Opacity",ze)),Object.defineProperties(Ne,{opacity:{get:ExpressionPropertyInterface(Fe.transform.mProps.o)},position:{get:ExpressionPropertyInterface(Fe.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(Fe.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(Fe.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(Fe.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(Fe.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(Fe.transform.mProps.sa)},_name:{value:ke.nm}}),Ne.ty="tr",Ne.mn=ke.mn,Ne.propertyGroup=Oe,Ne}function Ee(ke,Fe,Oe){function Ne(He){return ke.p.ix===He?Ne.position:ke.s.ix===He?Ne.size:null}var ze=propertyGroupFactory(Ne,Oe);Ne.propertyIndex=ke.ix;var $e=Fe.sh.ty==="tm"?Fe.sh.prop:Fe.sh;return $e.s.setGroupProperty(PropertyInterface("Size",ze)),$e.p.setGroupProperty(PropertyInterface("Position",ze)),Object.defineProperties(Ne,{size:{get:ExpressionPropertyInterface($e.s)},position:{get:ExpressionPropertyInterface($e.p)},_name:{value:ke.nm}}),Ne.mn=ke.mn,Ne}function Me(ke,Fe,Oe){function Ne(He){return ke.p.ix===He?Ne.position:ke.r.ix===He?Ne.rotation:ke.pt.ix===He?Ne.points:ke.or.ix===He||He==="ADBE Vector Star Outer Radius"?Ne.outerRadius:ke.os.ix===He?Ne.outerRoundness:ke.ir&&(ke.ir.ix===He||He==="ADBE Vector Star Inner Radius")?Ne.innerRadius:ke.is&&ke.is.ix===He?Ne.innerRoundness:null}var ze=propertyGroupFactory(Ne,Oe),$e=Fe.sh.ty==="tm"?Fe.sh.prop:Fe.sh;return Ne.propertyIndex=ke.ix,$e.or.setGroupProperty(PropertyInterface("Outer Radius",ze)),$e.os.setGroupProperty(PropertyInterface("Outer Roundness",ze)),$e.pt.setGroupProperty(PropertyInterface("Points",ze)),$e.p.setGroupProperty(PropertyInterface("Position",ze)),$e.r.setGroupProperty(PropertyInterface("Rotation",ze)),ke.ir&&($e.ir.setGroupProperty(PropertyInterface("Inner Radius",ze)),$e.is.setGroupProperty(PropertyInterface("Inner Roundness",ze))),Object.defineProperties(Ne,{position:{get:ExpressionPropertyInterface($e.p)},rotation:{get:ExpressionPropertyInterface($e.r)},points:{get:ExpressionPropertyInterface($e.pt)},outerRadius:{get:ExpressionPropertyInterface($e.or)},outerRoundness:{get:ExpressionPropertyInterface($e.os)},innerRadius:{get:ExpressionPropertyInterface($e.ir)},innerRoundness:{get:ExpressionPropertyInterface($e.is)},_name:{value:ke.nm}}),Ne.mn=ke.mn,Ne}function Ce(ke,Fe,Oe){function Ne(He){return ke.p.ix===He?Ne.position:ke.r.ix===He?Ne.roundness:ke.s.ix===He||He==="Size"||He==="ADBE Vector Rect Size"?Ne.size:null}var ze=propertyGroupFactory(Ne,Oe),$e=Fe.sh.ty==="tm"?Fe.sh.prop:Fe.sh;return Ne.propertyIndex=ke.ix,$e.p.setGroupProperty(PropertyInterface("Position",ze)),$e.s.setGroupProperty(PropertyInterface("Size",ze)),$e.r.setGroupProperty(PropertyInterface("Rotation",ze)),Object.defineProperties(Ne,{position:{get:ExpressionPropertyInterface($e.p)},roundness:{get:ExpressionPropertyInterface($e.r)},size:{get:ExpressionPropertyInterface($e.s)},_name:{value:ke.nm}}),Ne.mn=ke.mn,Ne}function De(ke,Fe,Oe){function Ne(He){return ke.r.ix===He||He==="Round Corners 1"?Ne.radius:null}var ze=propertyGroupFactory(Ne,Oe),$e=Fe;return Ne.propertyIndex=ke.ix,$e.rd.setGroupProperty(PropertyInterface("Radius",ze)),Object.defineProperties(Ne,{radius:{get:ExpressionPropertyInterface($e.rd)},_name:{value:ke.nm}}),Ne.mn=ke.mn,Ne}function Be(ke,Fe,Oe){function Ne(He){return ke.c.ix===He||He==="Copies"?Ne.copies:ke.o.ix===He||He==="Offset"?Ne.offset:null}var ze=propertyGroupFactory(Ne,Oe),$e=Fe;return Ne.propertyIndex=ke.ix,$e.c.setGroupProperty(PropertyInterface("Copies",ze)),$e.o.setGroupProperty(PropertyInterface("Offset",ze)),Object.defineProperties(Ne,{copies:{get:ExpressionPropertyInterface($e.c)},offset:{get:ExpressionPropertyInterface($e.o)},_name:{value:ke.nm}}),Ne.mn=ke.mn,Ne}return function(ke,Fe,Oe){var Ne;function ze(He){if(typeof He=="number")return He=He===void 0?1:He,He===0?Oe:Ne[He-1];for(var We=0,qe=Ne.length;We<qe;){if(Ne[We]._name===He)return Ne[We];We+=1}return null}function $e(){return Oe}return ze.propertyGroup=propertyGroupFactory(ze,$e),Ne=$(ke,Fe,ze.propertyGroup),ze.numProperties=Ne.length,ze._name="Contents",ze}}(),TextExpressionInterface=function(){return function($){var m;function L(j){switch(j){case"ADBE Text Document":return L.sourceText;default:return null}}return Object.defineProperty(L,"sourceText",{get:function(){$.textProperty.getValue();var ee=$.textProperty.currentData.t;return(!m||ee!==m.value)&&(m=new String(ee),m.value=ee||new String(ee),Object.defineProperty(m,"style",{get:function(){return{fillColor:$.textProperty.currentData.fc}}})),m}}),L}}();function _typeof($){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(L){return typeof L}:_typeof=function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},_typeof($)}var FootageInterface=function(){var $=function(j){var ee="",re=j.getFootageData();function le(){return ee="",re=j.getFootageData(),ve}function ve(ye){if(re[ye])return ee=ye,re=re[ye],_typeof(re)==="object"?ve:re;var Ee=ye.indexOf(ee);if(Ee!==-1){var Me=parseInt(ye.substr(Ee+ee.length),10);return re=re[Me],_typeof(re)==="object"?ve:re}return""}return le},m=function(j){function ee(re){return re==="Outline"?ee.outlineInterface():null}return ee._name="Outline",ee.outlineInterface=$(j),ee};return function(L){function j(ee){return ee==="Data"?j.dataInterface:null}return j._name="Data",j.dataInterface=m(L),j}}(),interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};function getInterface($){return interfaces[$]||null}var expressionHelpers=function(){function $(le,ve,ye){ve.x&&(ye.k=!0,ye.x=!0,ye.initiateExpression=ExpressionManager.initiateExpression,ye.effectsSequence.push(ye.initiateExpression(le,ve,ye).bind(ye)))}function m(le){return le*=this.elem.globalData.frameRate,le-=this.offsetTime,le!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<le?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(le,this._cachingAtTime),this._cachingAtTime.lastFrame=le),this._cachingAtTime.value}function L(le){var ve=-.01,ye=this.getValueAtTime(le),Ee=this.getValueAtTime(le+ve),Me=0;if(ye.length){var Ce;for(Ce=0;Ce<ye.length;Ce+=1)Me+=Math.pow(Ee[Ce]-ye[Ce],2);Me=Math.sqrt(Me)*100}else Me=0;return Me}function j(le){if(this.vel!==void 0)return this.vel;var ve=-.001,ye=this.getValueAtTime(le),Ee=this.getValueAtTime(le+ve),Me;if(ye.length){Me=createTypedArray("float32",ye.length);var Ce;for(Ce=0;Ce<ye.length;Ce+=1)Me[Ce]=(Ee[Ce]-ye[Ce])/ve}else Me=(Ee-ye)/ve;return Me}function ee(){return this.pv}function re(le){this.propertyGroup=le}return{searchExpressions:$,getSpeedAtTime:L,getVelocityAtTime:j,getValueAtTime:m,getStaticValueAtTime:ee,setGroupProperty:re}}();function addPropertyDecorator(){function $(De,Be,ke){if(!this.k||!this.keyframes)return this.pv;De=De?De.toLowerCase():"";var Fe=this.comp.renderedFrame,Oe=this.keyframes,Ne=Oe[Oe.length-1].t;if(Fe<=Ne)return this.pv;var ze,$e;ke?(Be?ze=Math.abs(Ne-this.elem.comp.globalData.frameRate*Be):ze=Math.max(0,Ne-this.elem.data.ip),$e=Ne-ze):((!Be||Be>Oe.length-1)&&(Be=Oe.length-1),$e=Oe[Oe.length-1-Be].t,ze=Ne-$e);var He,We,qe;if(De==="pingpong"){var Ye=Math.floor((Fe-$e)/ze);if(Ye%2!==0)return this.getValueAtTime((ze-(Fe-$e)%ze+$e)/this.comp.globalData.frameRate,0)}else if(De==="offset"){var Ze=this.getValueAtTime($e/this.comp.globalData.frameRate,0),Ke=this.getValueAtTime(Ne/this.comp.globalData.frameRate,0),rt=this.getValueAtTime(((Fe-$e)%ze+$e)/this.comp.globalData.frameRate,0),ft=Math.floor((Fe-$e)/ze);if(this.pv.length){for(qe=new Array(Ze.length),We=qe.length,He=0;He<We;He+=1)qe[He]=(Ke[He]-Ze[He])*ft+rt[He];return qe}return(Ke-Ze)*ft+rt}else if(De==="continue"){var mt=this.getValueAtTime(Ne/this.comp.globalData.frameRate,0),Et=this.getValueAtTime((Ne-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(qe=new Array(mt.length),We=qe.length,He=0;He<We;He+=1)qe[He]=mt[He]+(mt[He]-Et[He])*((Fe-Ne)/this.comp.globalData.frameRate)/5e-4;return qe}return mt+(mt-Et)*((Fe-Ne)/.001)}return this.getValueAtTime(((Fe-$e)%ze+$e)/this.comp.globalData.frameRate,0)}function m(De,Be,ke){if(!this.k)return this.pv;De=De?De.toLowerCase():"";var Fe=this.comp.renderedFrame,Oe=this.keyframes,Ne=Oe[0].t;if(Fe>=Ne)return this.pv;var ze,$e;ke?(Be?ze=Math.abs(this.elem.comp.globalData.frameRate*Be):ze=Math.max(0,this.elem.data.op-Ne),$e=Ne+ze):((!Be||Be>Oe.length-1)&&(Be=Oe.length-1),$e=Oe[Be].t,ze=$e-Ne);var He,We,qe;if(De==="pingpong"){var Ye=Math.floor((Ne-Fe)/ze);if(Ye%2===0)return this.getValueAtTime(((Ne-Fe)%ze+Ne)/this.comp.globalData.frameRate,0)}else if(De==="offset"){var Ze=this.getValueAtTime(Ne/this.comp.globalData.frameRate,0),Ke=this.getValueAtTime($e/this.comp.globalData.frameRate,0),rt=this.getValueAtTime((ze-(Ne-Fe)%ze+Ne)/this.comp.globalData.frameRate,0),ft=Math.floor((Ne-Fe)/ze)+1;if(this.pv.length){for(qe=new Array(Ze.length),We=qe.length,He=0;He<We;He+=1)qe[He]=rt[He]-(Ke[He]-Ze[He])*ft;return qe}return rt-(Ke-Ze)*ft}else if(De==="continue"){var mt=this.getValueAtTime(Ne/this.comp.globalData.frameRate,0),Et=this.getValueAtTime((Ne+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(qe=new Array(mt.length),We=qe.length,He=0;He<We;He+=1)qe[He]=mt[He]+(mt[He]-Et[He])*(Ne-Fe)/.001;return qe}return mt+(mt-Et)*(Ne-Fe)/.001}return this.getValueAtTime((ze-((Ne-Fe)%ze+Ne))/this.comp.globalData.frameRate,0)}function L(De,Be){if(!this.k)return this.pv;if(De=(De||.4)*.5,Be=Math.floor(Be||5),Be<=1)return this.pv;var ke=this.comp.renderedFrame/this.comp.globalData.frameRate,Fe=ke-De,Oe=ke+De,Ne=Be>1?(Oe-Fe)/(Be-1):1,ze=0,$e=0,He;this.pv.length?He=createTypedArray("float32",this.pv.length):He=0;for(var We;ze<Be;){if(We=this.getValueAtTime(Fe+ze*Ne),this.pv.length)for($e=0;$e<this.pv.length;$e+=1)He[$e]+=We[$e];else He+=We;ze+=1}if(this.pv.length)for($e=0;$e<this.pv.length;$e+=1)He[$e]/=Be;else He/=Be;return He}function j(De){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var Be=this._transformCachingAtTime.v;if(Be.cloneFromProps(this.pre.props),this.appliedTransformations<1){var ke=this.a.getValueAtTime(De);Be.translate(-ke[0]*this.a.mult,-ke[1]*this.a.mult,ke[2]*this.a.mult)}if(this.appliedTransformations<2){var Fe=this.s.getValueAtTime(De);Be.scale(Fe[0]*this.s.mult,Fe[1]*this.s.mult,Fe[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var Oe=this.sk.getValueAtTime(De),Ne=this.sa.getValueAtTime(De);Be.skewFromAxis(-Oe*this.sk.mult,Ne*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var ze=this.r.getValueAtTime(De);Be.rotate(-ze*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var $e=this.rz.getValueAtTime(De),He=this.ry.getValueAtTime(De),We=this.rx.getValueAtTime(De),qe=this.or.getValueAtTime(De);Be.rotateZ(-$e*this.rz.mult).rotateY(He*this.ry.mult).rotateX(We*this.rx.mult).rotateZ(-qe[2]*this.or.mult).rotateY(qe[1]*this.or.mult).rotateX(qe[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var Ye=this.px.getValueAtTime(De),Ze=this.py.getValueAtTime(De);if(this.data.p.z){var Ke=this.pz.getValueAtTime(De);Be.translate(Ye*this.px.mult,Ze*this.py.mult,-Ke*this.pz.mult)}else Be.translate(Ye*this.px.mult,Ze*this.py.mult,0)}else{var rt=this.p.getValueAtTime(De);Be.translate(rt[0]*this.p.mult,rt[1]*this.p.mult,-rt[2]*this.p.mult)}return Be}function ee(){return this.v.clone(new Matrix)}var re=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(De,Be,ke){var Fe=re(De,Be,ke);return Fe.dynamicProperties.length?Fe.getValueAtTime=j.bind(Fe):Fe.getValueAtTime=ee.bind(Fe),Fe.setGroupProperty=expressionHelpers.setGroupProperty,Fe};var le=PropertyFactory.getProp;PropertyFactory.getProp=function(De,Be,ke,Fe,Oe){var Ne=le(De,Be,ke,Fe,Oe);Ne.kf?Ne.getValueAtTime=expressionHelpers.getValueAtTime.bind(Ne):Ne.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(Ne),Ne.setGroupProperty=expressionHelpers.setGroupProperty,Ne.loopOut=$,Ne.loopIn=m,Ne.smooth=L,Ne.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(Ne),Ne.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(Ne),Ne.numKeys=Be.a===1?Be.k.length:0,Ne.propertyIndex=Be.ix;var ze=0;return ke!==0&&(ze=createTypedArray("float32",Be.a===1?Be.k[0].s.length:Be.k.length)),Ne._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:ze},expressionHelpers.searchExpressions(De,Be,Ne),Ne.k&&Oe.addDynamicProperty(Ne),Ne};function ve(De){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),De*=this.elem.globalData.frameRate,De-=this.offsetTime,De!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<De?this._caching.lastIndex:0,this._cachingAtTime.lastTime=De,this.interpolateShape(De,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue}var ye=ShapePropertyFactory.getConstructorFunction(),Ee=ShapePropertyFactory.getKeyframedConstructorFunction();function Me(){}Me.prototype={vertices:function(Be,ke){this.k&&this.getValue();var Fe=this.v;ke!==void 0&&(Fe=this.getValueAtTime(ke,0));var Oe,Ne=Fe._length,ze=Fe[Be],$e=Fe.v,He=createSizedArray(Ne);for(Oe=0;Oe<Ne;Oe+=1)Be==="i"||Be==="o"?He[Oe]=[ze[Oe][0]-$e[Oe][0],ze[Oe][1]-$e[Oe][1]]:He[Oe]=[ze[Oe][0],ze[Oe][1]];return He},points:function(Be){return this.vertices("v",Be)},inTangents:function(Be){return this.vertices("i",Be)},outTangents:function(Be){return this.vertices("o",Be)},isClosed:function(){return this.v.c},pointOnPath:function(Be,ke){var Fe=this.v;ke!==void 0&&(Fe=this.getValueAtTime(ke,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(Fe));for(var Oe=this._segmentsLength,Ne=Oe.lengths,ze=Oe.totalLength*Be,$e=0,He=Ne.length,We=0,qe;$e<He;){if(We+Ne[$e].addedLength>ze){var Ye=$e,Ze=Fe.c&&$e===He-1?0:$e+1,Ke=(ze-We)/Ne[$e].addedLength;qe=bez.getPointInSegment(Fe.v[Ye],Fe.v[Ze],Fe.o[Ye],Fe.i[Ze],Ke,Ne[$e]);break}else We+=Ne[$e].addedLength;$e+=1}return qe||(qe=Fe.c?[Fe.v[0][0],Fe.v[0][1]]:[Fe.v[Fe._length-1][0],Fe.v[Fe._length-1][1]]),qe},vectorOnPath:function(Be,ke,Fe){Be==1?Be=this.v.c:Be==0&&(Be=.999);var Oe=this.pointOnPath(Be,ke),Ne=this.pointOnPath(Be+.001,ke),ze=Ne[0]-Oe[0],$e=Ne[1]-Oe[1],He=Math.sqrt(Math.pow(ze,2)+Math.pow($e,2));if(He===0)return[0,0];var We=Fe==="tangent"?[ze/He,$e/He]:[-$e/He,ze/He];return We},tangentOnPath:function(Be,ke){return this.vectorOnPath(Be,ke,"tangent")},normalOnPath:function(Be,ke){return this.vectorOnPath(Be,ke,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([Me],ye),extendPrototype([Me],Ee),Ee.prototype.getValueAtTime=ve,Ee.prototype.initiateExpression=ExpressionManager.initiateExpression;var Ce=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(De,Be,ke,Fe,Oe){var Ne=Ce(De,Be,ke,Fe,Oe);return Ne.propertyIndex=Be.ix,Ne.lock=!1,ke===3?expressionHelpers.searchExpressions(De,Be.pt,Ne):ke===4&&expressionHelpers.searchExpressions(De,Be.ks,Ne),Ne.k&&De.addDynamicProperty(Ne),Ne}}function initialize$1(){addPropertyDecorator()}function addDecorator(){function $(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}TextProperty.prototype.getExpressionValue=function(m,L){var j=this.calculateExpression(L);if(m.t!==j){var ee={};return this.copyData(ee,m),ee.t=j.toString(),ee.__complete=!1,ee}return m},TextProperty.prototype.searchProperty=function(){var m=this.searchKeyframes(),L=this.searchExpressions();return this.kf=m||L,this.kf},TextProperty.prototype.searchExpressions=$}function initialize(){addDecorator()}function SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:function $(m,L){var j=createNS("feMerge");j.setAttribute("result",m);var ee,re;for(re=0;re<L.length;re+=1)ee=createNS("feMergeNode"),ee.setAttribute("in",L[re]),j.appendChild(ee),j.appendChild(ee);return j}};var linearFilterValue="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0";function SVGTintFilter($,m,L,j,ee){this.filterManager=m;var re=createNS("feColorMatrix");re.setAttribute("type","matrix"),re.setAttribute("color-interpolation-filters","linearRGB"),re.setAttribute("values",linearFilterValue+" 1 0"),this.linearFilter=re,re.setAttribute("result",j+"_tint_1"),$.appendChild(re),re=createNS("feColorMatrix"),re.setAttribute("type","matrix"),re.setAttribute("color-interpolation-filters","sRGB"),re.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),re.setAttribute("result",j+"_tint_2"),$.appendChild(re),this.matrixFilter=re;var le=this.createMergeNode(j,[ee,j+"_tint_1",j+"_tint_2"]);$.appendChild(le)}extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function($){if($||this.filterManager._mdf){var m=this.filterManager.effectElements[0].p.v,L=this.filterManager.effectElements[1].p.v,j=this.filterManager.effectElements[2].p.v/100;this.linearFilter.setAttribute("values",linearFilterValue+" "+j+" 0"),this.matrixFilter.setAttribute("values",L[0]-m[0]+" 0 0 0 "+m[0]+" "+(L[1]-m[1])+" 0 0 0 "+m[1]+" "+(L[2]-m[2])+" 0 0 0 "+m[2]+" 0 0 0 1 0")}};function SVGFillFilter($,m,L,j){this.filterManager=m;var ee=createNS("feColorMatrix");ee.setAttribute("type","matrix"),ee.setAttribute("color-interpolation-filters","sRGB"),ee.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),ee.setAttribute("result",j),$.appendChild(ee),this.matrixFilter=ee}SVGFillFilter.prototype.renderFrame=function($){if($||this.filterManager._mdf){var m=this.filterManager.effectElements[2].p.v,L=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+m[0]+" 0 0 0 0 "+m[1]+" 0 0 0 0 "+m[2]+" 0 0 0 "+L+" 0")}};function SVGStrokeEffect($,m,L){this.initialized=!1,this.filterManager=m,this.elem=L,this.paths=[]}SVGStrokeEffect.prototype.initialize=function(){var $=this.elem.layerElement.children||this.elem.layerElement.childNodes,m,L,j,ee;for(this.filterManager.effectElements[1].p.v===1?(ee=this.elem.maskManager.masksProperties.length,j=0):(j=this.filterManager.effectElements[0].p.v-1,ee=j+1),L=createNS("g"),L.setAttribute("fill","none"),L.setAttribute("stroke-linecap","round"),L.setAttribute("stroke-dashoffset",1),j;j<ee;j+=1)m=createNS("path"),L.appendChild(m),this.paths.push({p:m,m:j});if(this.filterManager.effectElements[10].p.v===3){var re=createNS("mask"),le=createElementID();re.setAttribute("id",le),re.setAttribute("mask-type","alpha"),re.appendChild(L),this.elem.globalData.defs.appendChild(re);var ve=createNS("g");for(ve.setAttribute("mask","url("+getLocationHref()+"#"+le+")");$[0];)ve.appendChild($[0]);this.elem.layerElement.appendChild(ve),this.masker=re,L.setAttribute("stroke","#fff")}else if(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2){if(this.filterManager.effectElements[10].p.v===2)for($=this.elem.layerElement.children||this.elem.layerElement.childNodes;$.length;)this.elem.layerElement.removeChild($[0]);this.elem.layerElement.appendChild(L),this.elem.layerElement.removeAttribute("mask"),L.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=L},SVGStrokeEffect.prototype.renderFrame=function($){this.initialized||this.initialize();var m,L=this.paths.length,j,ee;for(m=0;m<L;m+=1)if(this.paths[m].m!==-1&&(j=this.elem.maskManager.viewData[this.paths[m].m],ee=this.paths[m].p,($||this.filterManager._mdf||j.prop._mdf)&&ee.setAttribute("d",j.lastPath),$||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||j.prop._mdf)){var re;if(this.filterManager.effectElements[7].p.v!==0||this.filterManager.effectElements[8].p.v!==100){var le=Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,ve=Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,ye=ee.getTotalLength();re="0 0 0 "+ye*le+" ";var Ee=ye*(ve-le),Me=1+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01,Ce=Math.floor(Ee/Me),De;for(De=0;De<Ce;De+=1)re+="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01+" ";re+="0 "+ye*10+" 0 0"}else re="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01;ee.setAttribute("stroke-dasharray",re)}if(($||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",this.filterManager.effectElements[4].p.v*2),($||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2)&&($||this.filterManager.effectElements[3].p._mdf)){var Be=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(Be[0]*255)+","+bmFloor(Be[1]*255)+","+bmFloor(Be[2]*255)+")")}};function SVGTritoneFilter($,m,L,j){this.filterManager=m;var ee=createNS("feColorMatrix");ee.setAttribute("type","matrix"),ee.setAttribute("color-interpolation-filters","linearRGB"),ee.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),$.appendChild(ee);var re=createNS("feComponentTransfer");re.setAttribute("color-interpolation-filters","sRGB"),re.setAttribute("result",j),this.matrixFilter=re;var le=createNS("feFuncR");le.setAttribute("type","table"),re.appendChild(le),this.feFuncR=le;var ve=createNS("feFuncG");ve.setAttribute("type","table"),re.appendChild(ve),this.feFuncG=ve;var ye=createNS("feFuncB");ye.setAttribute("type","table"),re.appendChild(ye),this.feFuncB=ye,$.appendChild(re)}SVGTritoneFilter.prototype.renderFrame=function($){if($||this.filterManager._mdf){var m=this.filterManager.effectElements[0].p.v,L=this.filterManager.effectElements[1].p.v,j=this.filterManager.effectElements[2].p.v,ee=j[0]+" "+L[0]+" "+m[0],re=j[1]+" "+L[1]+" "+m[1],le=j[2]+" "+L[2]+" "+m[2];this.feFuncR.setAttribute("tableValues",ee),this.feFuncG.setAttribute("tableValues",re),this.feFuncB.setAttribute("tableValues",le)}};function SVGProLevelsFilter($,m,L,j){this.filterManager=m;var ee=this.filterManager.effectElements,re=createNS("feComponentTransfer");(ee[10].p.k||ee[10].p.v!==0||ee[11].p.k||ee[11].p.v!==1||ee[12].p.k||ee[12].p.v!==1||ee[13].p.k||ee[13].p.v!==0||ee[14].p.k||ee[14].p.v!==1)&&(this.feFuncR=this.createFeFunc("feFuncR",re)),(ee[17].p.k||ee[17].p.v!==0||ee[18].p.k||ee[18].p.v!==1||ee[19].p.k||ee[19].p.v!==1||ee[20].p.k||ee[20].p.v!==0||ee[21].p.k||ee[21].p.v!==1)&&(this.feFuncG=this.createFeFunc("feFuncG",re)),(ee[24].p.k||ee[24].p.v!==0||ee[25].p.k||ee[25].p.v!==1||ee[26].p.k||ee[26].p.v!==1||ee[27].p.k||ee[27].p.v!==0||ee[28].p.k||ee[28].p.v!==1)&&(this.feFuncB=this.createFeFunc("feFuncB",re)),(ee[31].p.k||ee[31].p.v!==0||ee[32].p.k||ee[32].p.v!==1||ee[33].p.k||ee[33].p.v!==1||ee[34].p.k||ee[34].p.v!==0||ee[35].p.k||ee[35].p.v!==1)&&(this.feFuncA=this.createFeFunc("feFuncA",re)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(re.setAttribute("color-interpolation-filters","sRGB"),$.appendChild(re)),(ee[3].p.k||ee[3].p.v!==0||ee[4].p.k||ee[4].p.v!==1||ee[5].p.k||ee[5].p.v!==1||ee[6].p.k||ee[6].p.v!==0||ee[7].p.k||ee[7].p.v!==1)&&(re=createNS("feComponentTransfer"),re.setAttribute("color-interpolation-filters","sRGB"),re.setAttribute("result",j),$.appendChild(re),this.feFuncRComposed=this.createFeFunc("feFuncR",re),this.feFuncGComposed=this.createFeFunc("feFuncG",re),this.feFuncBComposed=this.createFeFunc("feFuncB",re))}SVGProLevelsFilter.prototype.createFeFunc=function($,m){var L=createNS($);return L.setAttribute("type","table"),m.appendChild(L),L},SVGProLevelsFilter.prototype.getTableValue=function($,m,L,j,ee){for(var re=0,le=256,ve,ye=Math.min($,m),Ee=Math.max($,m),Me=Array.call(null,{length:le}),Ce,De=0,Be=ee-j,ke=m-$;re<=256;)ve=re/256,ve<=ye?Ce=ke<0?ee:j:ve>=Ee?Ce=ke<0?j:ee:Ce=j+Be*Math.pow((ve-$)/ke,1/L),Me[De]=Ce,De+=1,re+=256/(le-1);return Me.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function($){if($||this.filterManager._mdf){var m,L=this.filterManager.effectElements;this.feFuncRComposed&&($||L[3].p._mdf||L[4].p._mdf||L[5].p._mdf||L[6].p._mdf||L[7].p._mdf)&&(m=this.getTableValue(L[3].p.v,L[4].p.v,L[5].p.v,L[6].p.v,L[7].p.v),this.feFuncRComposed.setAttribute("tableValues",m),this.feFuncGComposed.setAttribute("tableValues",m),this.feFuncBComposed.setAttribute("tableValues",m)),this.feFuncR&&($||L[10].p._mdf||L[11].p._mdf||L[12].p._mdf||L[13].p._mdf||L[14].p._mdf)&&(m=this.getTableValue(L[10].p.v,L[11].p.v,L[12].p.v,L[13].p.v,L[14].p.v),this.feFuncR.setAttribute("tableValues",m)),this.feFuncG&&($||L[17].p._mdf||L[18].p._mdf||L[19].p._mdf||L[20].p._mdf||L[21].p._mdf)&&(m=this.getTableValue(L[17].p.v,L[18].p.v,L[19].p.v,L[20].p.v,L[21].p.v),this.feFuncG.setAttribute("tableValues",m)),this.feFuncB&&($||L[24].p._mdf||L[25].p._mdf||L[26].p._mdf||L[27].p._mdf||L[28].p._mdf)&&(m=this.getTableValue(L[24].p.v,L[25].p.v,L[26].p.v,L[27].p.v,L[28].p.v),this.feFuncB.setAttribute("tableValues",m)),this.feFuncA&&($||L[31].p._mdf||L[32].p._mdf||L[33].p._mdf||L[34].p._mdf||L[35].p._mdf)&&(m=this.getTableValue(L[31].p.v,L[32].p.v,L[33].p.v,L[34].p.v,L[35].p.v),this.feFuncA.setAttribute("tableValues",m))}};function SVGDropShadowEffect($,m,L,j,ee){var re=m.container.globalData.renderConfig.filterSize,le=m.data.fs||re;$.setAttribute("x",le.x||re.x),$.setAttribute("y",le.y||re.y),$.setAttribute("width",le.width||re.width),$.setAttribute("height",le.height||re.height),this.filterManager=m;var ve=createNS("feGaussianBlur");ve.setAttribute("in","SourceAlpha"),ve.setAttribute("result",j+"_drop_shadow_1"),ve.setAttribute("stdDeviation","0"),this.feGaussianBlur=ve,$.appendChild(ve);var ye=createNS("feOffset");ye.setAttribute("dx","25"),ye.setAttribute("dy","0"),ye.setAttribute("in",j+"_drop_shadow_1"),ye.setAttribute("result",j+"_drop_shadow_2"),this.feOffset=ye,$.appendChild(ye);var Ee=createNS("feFlood");Ee.setAttribute("flood-color","#00ff00"),Ee.setAttribute("flood-opacity","1"),Ee.setAttribute("result",j+"_drop_shadow_3"),this.feFlood=Ee,$.appendChild(Ee);var Me=createNS("feComposite");Me.setAttribute("in",j+"_drop_shadow_3"),Me.setAttribute("in2",j+"_drop_shadow_2"),Me.setAttribute("operator","in"),Me.setAttribute("result",j+"_drop_shadow_4"),$.appendChild(Me);var Ce=this.createMergeNode(j,[j+"_drop_shadow_4",ee]);$.appendChild(Ce)}extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function($){if($||this.filterManager._mdf){if(($||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),$||this.filterManager.effectElements[0].p._mdf){var m=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(m[0]*255),Math.round(m[1]*255),Math.round(m[2]*255)))}if(($||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),$||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var L=this.filterManager.effectElements[3].p.v,j=(this.filterManager.effectElements[2].p.v-90)*degToRads,ee=L*Math.cos(j),re=L*Math.sin(j);this.feOffset.setAttribute("dx",ee),this.feOffset.setAttribute("dy",re)}}};var _svgMatteSymbols=[];function SVGMatte3Effect($,m,L){this.initialized=!1,this.filterManager=m,this.filterElem=$,this.elem=L,L.matteElement=createNS("g"),L.matteElement.appendChild(L.layerElement),L.matteElement.appendChild(L.transformedElement),L.baseElement=L.matteElement}SVGMatte3Effect.prototype.findSymbol=function($){for(var m=0,L=_svgMatteSymbols.length;m<L;){if(_svgMatteSymbols[m]===$)return _svgMatteSymbols[m];m+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function($,m){var L=$.layerElement.parentNode;if(L){for(var j=L.children,ee=0,re=j.length;ee<re&&j[ee]!==$.layerElement;)ee+=1;var le;ee<=re-2&&(le=j[ee+1]);var ve=createNS("use");ve.setAttribute("href","#"+m),le?L.insertBefore(ve,le):L.appendChild(ve)}},SVGMatte3Effect.prototype.setElementAsMask=function($,m){if(!this.findSymbol(m)){var L=createElementID(),j=createNS("mask");j.setAttribute("id",m.layerId),j.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(m);var ee=$.globalData.defs;ee.appendChild(j);var re=createNS("symbol");re.setAttribute("id",L),this.replaceInParent(m,L),re.appendChild(m.layerElement),ee.appendChild(re);var le=createNS("use");le.setAttribute("href","#"+L),j.appendChild(le),m.data.hd=!1,m.show()}$.setMatte(m.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var $=this.filterManager.effectElements[0].p.v,m=this.elem.comp.elements,L=0,j=m.length;L<j;)m[L]&&m[L].data.ind===$&&this.setElementAsMask(this.elem,m[L]),L+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()};function SVGGaussianBlurEffect($,m,L,j){$.setAttribute("x","-100%"),$.setAttribute("y","-100%"),$.setAttribute("width","300%"),$.setAttribute("height","300%"),this.filterManager=m;var ee=createNS("feGaussianBlur");ee.setAttribute("result",j),$.appendChild(ee),this.feGaussianBlur=ee}SVGGaussianBlurEffect.prototype.renderFrame=function($){if($||this.filterManager._mdf){var m=.3,L=this.filterManager.effectElements[0].p.v*m,j=this.filterManager.effectElements[1].p.v,ee=j==3?0:L,re=j==2?0:L;this.feGaussianBlur.setAttribute("stdDeviation",ee+" "+re);var le=this.filterManager.effectElements[2].p.v==1?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",le)}};function TransformEffect(){}TransformEffect.prototype.init=function($){this.effectsManager=$,this.type=effectTypes.TRANSFORM_EFFECT,this.matrix=new Matrix,this.opacity=-1,this._mdf=!1,this._opMdf=!1},TransformEffect.prototype.renderFrame=function($){if(this._opMdf=!1,this._mdf=!1,$||this.effectsManager._mdf){var m=this.effectsManager.effectElements,L=m[0].p.v,j=m[1].p.v,ee=m[2].p.v===1,re=m[3].p.v,le=ee?re:m[4].p.v,ve=m[5].p.v,ye=m[6].p.v,Ee=m[7].p.v;this.matrix.reset(),this.matrix.translate(-L[0],-L[1],L[2]),this.matrix.scale(le*.01,re*.01,1),this.matrix.rotate(-Ee*degToRads),this.matrix.skewFromAxis(-ve*degToRads,(ye+90)*degToRads),this.matrix.translate(j[0],j[1],0),this._mdf=!0,this.opacity!==m[8].p.v&&(this.opacity=m[8].p.v,this._opMdf=!0)}};function SVGTransformEffect($,m){this.init(m)}extendPrototype([TransformEffect],SVGTransformEffect);function CVTransformEffect($){this.init($)}return extendPrototype([TransformEffect],CVTransformEffect),registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect$1(20,SVGTintFilter,!0),registerEffect$1(21,SVGFillFilter,!0),registerEffect$1(22,SVGStrokeEffect,!1),registerEffect$1(23,SVGTritoneFilter,!0),registerEffect$1(24,SVGProLevelsFilter,!0),registerEffect$1(25,SVGDropShadowEffect,!0),registerEffect$1(28,SVGMatte3Effect,!1),registerEffect$1(29,SVGGaussianBlurEffect,!0),registerEffect$1(35,SVGTransformEffect,!1),registerEffect(35,CVTransformEffect),lottie})})(lottie,lottie.exports);var lottieExports=lottie.exports;const Lottie=getDefaultExportFromCjs(lottieExports);(function(){try{if(typeof document<"u"){var $=document.createElement("style");$.appendChild(document.createTextNode(".lottie-animation-container{width:var(--lottie-animation-container-width);height:var(--lottie-animation-container-height);background-color:var(--lottie-animation-container-background-color);overflow:hidden;margin:var(--lottie-animation-margin)}.lottie-animation-container svg{transform:scale(var(--lottie-animation-scale))}")),document.head.appendChild($)}}catch(m){console.error("vite-plugin-css-injected-by-js",m)}})();var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=($,m,L)=>m in $?__defProp($,m,{enumerable:!0,configurable:!0,writable:!0,value:L}):$[m]=L,__spreadValues=($,m)=>{for(var L in m||(m={}))__hasOwnProp.call(m,L)&&__defNormalProp($,L,m[L]);if(__getOwnPropSymbols)for(var L of __getOwnPropSymbols(m))__propIsEnum.call(m,L)&&__defNormalProp($,L,m[L]);return $},__spreadProps=($,m)=>__defProps($,__getOwnPropDescs(m)),es6=function $(m,L){if(m===L)return!0;if(m&&L&&typeof m=="object"&&typeof L=="object"){if(m.constructor!==L.constructor)return!1;var j,ee,re;if(Array.isArray(m)){if(j=m.length,j!=L.length)return!1;for(ee=j;ee--!==0;)if(!$(m[ee],L[ee]))return!1;return!0}if(m instanceof Map&&L instanceof Map){if(m.size!==L.size)return!1;for(ee of m.entries())if(!L.has(ee[0]))return!1;for(ee of m.entries())if(!$(ee[1],L.get(ee[0])))return!1;return!0}if(m instanceof Set&&L instanceof Set){if(m.size!==L.size)return!1;for(ee of m.entries())if(!L.has(ee[0]))return!1;return!0}if(ArrayBuffer.isView(m)&&ArrayBuffer.isView(L)){if(j=m.length,j!=L.length)return!1;for(ee=j;ee--!==0;)if(m[ee]!==L[ee])return!1;return!0}if(m.constructor===RegExp)return m.source===L.source&&m.flags===L.flags;if(m.valueOf!==Object.prototype.valueOf)return m.valueOf()===L.valueOf();if(m.toString!==Object.prototype.toString)return m.toString()===L.toString();if(re=Object.keys(m),j=re.length,j!==Object.keys(L).length)return!1;for(ee=j;ee--!==0;)if(!Object.prototype.hasOwnProperty.call(L,re[ee]))return!1;for(ee=j;ee--!==0;){var le=re[ee];if(!$(m[le],L[le]))return!1}return!0}return m!==m&&L!==L};function klona($){var m,L,j;if(Array.isArray($)){for(L=Array(m=$.length);m--;)L[m]=(j=$[m])&&typeof j=="object"?klona(j):j;return L}if(Object.prototype.toString.call($)==="[object Object]"){L={};for(m in $)m==="__proto__"?Object.defineProperty(L,m,{value:klona($[m]),configurable:!0,enumerable:!0,writable:!0}):L[m]=(j=$[m])&&typeof j=="object"?klona(j):j;return L}return $}var _export_sfc=($,m)=>{const L=$.__vccOpts||$;for(const[j,ee]of m)L[j]=ee;return L};const _sfc_main$c=defineComponent({props:{animationData:{type:Object,default:()=>({})},animationLink:{type:String,default:""},loop:{type:[Boolean,Number],default:!0},autoPlay:{type:Boolean,default:!0},width:{type:[Number,String],default:"100%"},height:{type:[Number,String],default:"100%"},speed:{type:Number,default:1},delay:{type:Number,default:0},direction:{type:String,default:"forward"},pauseOnHover:{type:Boolean,default:!1},playOnHover:{type:Boolean,default:!1},backgroundColor:{type:String,default:"transparent"},pauseAnimation:{type:Boolean,default:!1},noMargin:{type:Boolean,default:!1},scale:{type:Number,default:1},renderer:{type:String,default:"svg"},rendererSettings:{type:Object,default:()=>({})},assetsPath:{type:String,default:""}},emits:{onComplete:null,onLoopComplete:null,onEnterFrame:null,onSegmentStart:null,onAnimationLoaded:null},setup($,{emit:m}){const L=ref();let j,ee=null,re=1;watchEffect(async()=>{if(L.value){if($.animationLink!="")try{j=await(await fetch($.animationLink)).json()}catch(qe){console.error(qe);return}else if(es6($.animationData,{})===!1)j=klona($.animationData);else throw new Error("You must provide either animationLink or animationData");le()}});const le=()=>{if(!L.value||!j)return;ee==null||ee.destroy(),ee=null;let qe=$.autoPlay,Ye=$.loop;$.playOnHover&&(qe=!1),typeof Ye=="number"&&Ye>0&&(Ye=Ye-1),$.delay>0&&(qe=!1);const Ze={container:L.value,renderer:$.renderer,loop:Ye,autoplay:qe,animationData:j,assetsPath:$.assetsPath};es6($.rendererSettings,{})===!1&&(Ze.rendererSettings=$.rendererSettings),$.scale!==1&&(Ze.rendererSettings=__spreadProps(__spreadValues({},Ze.rendererSettings),{viewBoxOnly:!0})),ee=Lottie.loadAnimation(Ze),setTimeout(()=>{qe=$.autoPlay,$.playOnHover?ee==null||ee.pause():qe?ee==null||ee.play():ee==null||ee.pause(),m("onAnimationLoaded")},$.delay),ee.setSpeed($.speed),$.direction==="reverse"&&ee.setDirection(-1),$.direction==="normal"&&ee.setDirection(1),($.pauseAnimation||$.playOnHover)&&ee.pause(),ee.addEventListener("loopComplete",()=>{$.direction==="alternate"&&(ee==null||ee.stop(),re=re===-1?1:-1,ee==null||ee.setDirection(re),ee==null||ee.play()),m("onLoopComplete")}),ee.addEventListener("complete",()=>{m("onComplete")}),ee.addEventListener("enterFrame",()=>{m("onEnterFrame")}),ee.addEventListener("segmentStart",()=>{m("onSegmentStart")})},ve=computed(()=>{let qe=$.width,Ye=$.height;return typeof $.width=="number"&&(qe=`${$.width}px`),typeof $.height=="number"&&(Ye=`${$.height}px`),{"--lottie-animation-container-width":qe,"--lottie-animation-container-height":Ye,"--lottie-animation-container-background-color":$.backgroundColor,"--lottie-animation-margin":$.noMargin?"0":"0 auto","--lottie-animation-scale":$.scale!=1?$.scale:""}}),ye=()=>{ee&&$.pauseOnHover&&ee.pause(),ee&&$.playOnHover&&ee.play()},Ee=()=>{ee&&$.pauseOnHover&&ee.play(),ee&&$.playOnHover&&ee.pause()};return watch(()=>$.pauseAnimation,()=>{if(($.pauseOnHover||$.playOnHover)&&$.pauseAnimation){console.error("If you are using pauseAnimation prop for Vue3-Lottie, please remove the props pauseOnHover and playOnHover");return}ee&&($.pauseAnimation?ee.pause():ee.play())}),{lottieAnimationContainer:L,hoverEnded:Ee,hoverStarted:ye,getCurrentStyle:ve,play:()=>{ee&&ee.play()},pause:()=>{ee&&ee.pause()},stop:()=>{ee&&ee.stop()},destroy:()=>{ee&&ee.destroy()},setSpeed:(qe=1)=>{if(qe<=0)throw new Error("Speed must be greater than 0");ee&&ee.setSpeed(qe)},setDirection:qe=>{ee&&(qe==="forward"?ee.setDirection(1):qe==="reverse"&&ee.setDirection(-1))},goToAndStop:(qe,Ye=!0)=>{ee&&ee.goToAndStop(qe,Ye)},goToAndPlay:(qe,Ye=!0)=>{ee&&ee.goToAndPlay(qe,Ye)},playSegments:(qe,Ye=!1)=>{ee&&ee.playSegments(qe,Ye)},setSubFrame:(qe=!0)=>{ee&&ee.setSubframe(qe)},getDuration:(qe=!0)=>{if(ee)return ee.getDuration(qe)},updateDocumentData:(qe,Ye=0)=>{ee&&ee.renderer.elements[Ye].updateDocumentData(qe)}}}});function _sfc_render($,m,L,j,ee,re){return openBlock(),createElementBlock("div",{ref:"lottieAnimationContainer",class:"lottie-animation-container",style:normalizeStyle($.getCurrentStyle),onMouseenter:m[0]||(m[0]=(...le)=>$.hoverStarted&&$.hoverStarted(...le)),onMouseleave:m[1]||(m[1]=(...le)=>$.hoverEnded&&$.hoverEnded(...le))},null,36)}var Vue3Lottie=_export_sfc(_sfc_main$c,[["render",_sfc_render]]);const _hoisted_1$8={class:"wrapper"},defaultDuration$2=.35,_sfc_main$b={__name:"TextQuantityBtn",props:{number:{type:String,default:null},text:{type:String,default:null},isWhite:{type:Boolean,default:!1}},setup($){const m=ref(),L=ref(),j=ref(),ee=$,re=()=>{DeviceHelper.isTouch||AudioPlayer.play("HoverUI_In"),m.value.setSpeed(1),m.value.playSegments([0,31],!0);const ve=gsapWithCSS.timeline();ve.to(L.value,{color:"#C1FF12",duration:0},0),ve.to(j.value,{opacity:.3,color:"#C1FF12",duration:0},0),ee.isWhite===!0?(ve.to(L.value,{color:"#ffffff",duration:defaultDuration$2,ease:"power1.inOut"},0),ve.to(j.value,{opacity:.3,color:"#ffffff",duration:defaultDuration$2,ease:"power1.inOut"},.1)):(ve.to(L.value,{color:"#000000",duration:defaultDuration$2,ease:"power1.inOut"},0),ve.to(j.value,{opacity:.3,color:"#000000",duration:defaultDuration$2,ease:"power1.inOut"},.1)),ve.restart()},le=()=>{DeviceHelper.isTouch||AudioPlayer.play("HoverUI_Out"),m.value.setSpeed(1),m.value.playSegments([16,0],!0)};return(ve,ye)=>(openBlock(),createElementBlock("button",{class:normalizeClass(["TextQuantity",{isWhite:$.isWhite}]),onMouseenter:re,onMouseleave:le},[createVNode(unref(Vue3Lottie),{ref_key:"lottieRef",ref:m,class:"TextQuantity--circle","animation-link":$.isWhite?"/lottie/popupCta.json":"/lottie/popupCtaBlack.json","auto-play":!1,loop:!1,width:"100%",height:"100%"},null,8,["animation-link"]),createBaseVNode("div",_hoisted_1$8,[createBaseVNode("div",{ref_key:"text1Ref",ref:L,class:"TextQuantity--number"},toDisplayString($.number),513),createBaseVNode("div",{ref_key:"text2Ref",ref:j,class:"TextQuantity--text"},toDisplayString($.text),513)])],34))}},TextQuantityBtn=_export_sfc$1(_sfc_main$b,[["__scopeId","data-v-e51b2673"]]);/*!
 * strings: 3.2.4
 * https://greensock.com
 *
 * Copyright 2008-2020, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var emojiExp=/([\uD800-\uDBFF][\uDC00-\uDFFF](?:[\u200D\uFE0F][\uD800-\uDBFF][\uDC00-\uDFFF]){2,}|\uD83D\uDC69(?:\u200D(?:(?:\uD83D\uDC69\u200D)?\uD83D\uDC67|(?:\uD83D\uDC69\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]\uFE0F|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC6F\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3C-\uDD3E\uDDD6-\uDDDF])\u200D[\u2640\u2642]\uFE0F|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F\u200D[\u2640\u2642]|(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642])\uFE0F|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\uD83D\uDC69\u200D[\u2695\u2696\u2708]|\uD83D\uDC68(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708]))\uFE0F|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83D\uDC69\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|\uD83D\uDC68(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]))|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDD1-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\u200D(?:(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC69\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDDD1-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])?|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDEEB\uDEEC\uDEF4-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267B\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])\uFE0F)/;function getText($){var m=$.nodeType,L="";if(m===1||m===9||m===11){if(typeof $.textContent=="string")return $.textContent;for($=$.firstChild;$;$=$.nextSibling)L+=getText($)}else if(m===3||m===4)return $.nodeValue;return L}/* !
 * SplitText: 3.2.4
 * https://greensock.com
 *
 * @license Copyright 2008-2020, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var _doc,_win,_coreInitted,_stripExp=/(?:\r|\n|\t\t)/g,_multipleSpacesExp=/(?:\s\s+)/g,_initCore=function $(){_doc=document,_win=window,_coreInitted=1},_getComputedStyle=function $(m){return _win.getComputedStyle(m)},_isArray=Array.isArray,_slice=[].slice,_toArray=function $(m,L){var j;return _isArray(m)?m:(j=typeof m)=="string"&&!L&&m?_slice.call(_doc.querySelectorAll(m),0):m&&j==="object"&&"length"in m?_slice.call(m,0):m?[m]:[]},_isAbsolute=function $(m){return m.position==="absolute"||m.absolute===!0},_findSpecialChars=function $(m,L){for(var j=L.length,ee;--j>-1;)if(ee=L[j],m.substr(0,ee.length)===ee)return ee.length},_divStart=" style='position:relative;display:inline-block;'",_cssClassFunc=function $(m,L){m===void 0&&(m="");var j=~m.indexOf("++"),ee=1;return j&&(m=m.split("++").join("")),function(){return"<"+L+_divStart+(m?" class='"+m+(j?ee++:"")+"'>":">")}},_swapText=function $(m,L,j){var ee=m.nodeType;if(ee===1||ee===9||ee===11)for(m=m.firstChild;m;m=m.nextSibling)$(m,L,j);else(ee===3||ee===4)&&(m.nodeValue=m.nodeValue.split(L).join(j))},_pushReversed=function $(m,L){for(var j=L.length;--j>-1;)m.push(L[j])},_isBeforeWordDelimiter=function $(m,L,j){for(var ee;m&&m!==L;){if(ee=m._next||m.nextSibling,ee)return ee.textContent.charAt(0)===j;m=m.parentNode||m._parent}},_deWordify=function $(m){var L=_toArray(m.childNodes),j=L.length,ee,re;for(ee=0;ee<j;ee++)re=L[ee],re._isSplit?$(re):(ee&&re.previousSibling.nodeType===3?re.previousSibling.nodeValue+=re.nodeType===3?re.nodeValue:re.firstChild.nodeValue:re.nodeType!==3&&m.insertBefore(re.firstChild,re),m.removeChild(re))},_getStyleAsNumber=function $(m,L){return parseFloat(L[m])||0},_setPositionsAfterSplit=function $(m,L,j,ee,re,le,ve){var ye=_getComputedStyle(m),Ee=_getStyleAsNumber("paddingLeft",ye),Me=-999,Ce=_getStyleAsNumber("borderBottomWidth",ye)+_getStyleAsNumber("borderTopWidth",ye),De=_getStyleAsNumber("borderLeftWidth",ye)+_getStyleAsNumber("borderRightWidth",ye),Be=_getStyleAsNumber("paddingTop",ye)+_getStyleAsNumber("paddingBottom",ye),ke=_getStyleAsNumber("paddingLeft",ye)+_getStyleAsNumber("paddingRight",ye),Fe=_getStyleAsNumber("fontSize",ye)*.2,Oe=ye.textAlign,Ne=[],ze=[],$e=[],He=L.wordDelimiter||" ",We=L.tag?L.tag:L.span?"span":"div",qe=L.type||L.split||"chars,words,lines",Ye=re&&~qe.indexOf("lines")?[]:null,Ze=~qe.indexOf("words"),Ke=~qe.indexOf("chars"),rt=_isAbsolute(L),ft=L.linesClass,mt=~(ft||"").indexOf("++"),Et=[],bt,Ct,st,at,Xe,ht,Bt,Dt,Jt,tn,zt,Vt;for(mt&&(ft=ft.split("++").join("")),Ct=m.getElementsByTagName("*"),st=Ct.length,Xe=[],bt=0;bt<st;bt++)Xe[bt]=Ct[bt];if(Ye||rt)for(bt=0;bt<st;bt++)at=Xe[bt],ht=at.parentNode===m,(ht||rt||Ke&&!Ze)&&(Vt=at.offsetTop,Ye&&ht&&Math.abs(Vt-Me)>Fe&&(at.nodeName!=="BR"||bt===0)&&(Bt=[],Ye.push(Bt),Me=Vt),rt&&(at._x=at.offsetLeft,at._y=Vt,at._w=at.offsetWidth,at._h=at.offsetHeight),Ye&&((at._isSplit&&ht||!Ke&&ht||Ze&&ht||!Ze&&at.parentNode.parentNode===m&&!at.parentNode._isSplit)&&(Bt.push(at),at._x-=Ee,_isBeforeWordDelimiter(at,m,He)&&(at._wordEnd=!0)),at.nodeName==="BR"&&(at.nextSibling&&at.nextSibling.nodeName==="BR"||bt===0)&&Ye.push([])));for(bt=0;bt<st;bt++){if(at=Xe[bt],ht=at.parentNode===m,at.nodeName==="BR"){Ye||rt?(at.parentNode&&at.parentNode.removeChild(at),Xe.splice(bt--,1),st--):Ze||m.appendChild(at);continue}rt&&(Jt=at.style,!Ze&&!ht&&(at._x+=at.parentNode._x,at._y+=at.parentNode._y),Jt.left=at._x+"px",Jt.top=at._y+"px",Jt.position="absolute",Jt.display="block",Jt.width=at._w+1+"px",Jt.height=at._h+"px"),!Ze&&Ke?at._isSplit?(at._next=at.nextSibling,at.parentNode.appendChild(at)):at.parentNode._isSplit?(at._parent=at.parentNode,!at.previousSibling&&at.firstChild&&(at.firstChild._isFirst=!0),at.nextSibling&&at.nextSibling.textContent===" "&&!at.nextSibling.nextSibling&&Et.push(at.nextSibling),at._next=at.nextSibling&&at.nextSibling._isFirst?null:at.nextSibling,at.parentNode.removeChild(at),Xe.splice(bt--,1),st--):ht||(Vt=!at.nextSibling&&_isBeforeWordDelimiter(at.parentNode,m,He),at.parentNode._parent&&at.parentNode._parent.appendChild(at),Vt&&at.parentNode.appendChild(_doc.createTextNode(" ")),We==="span"&&(at.style.display="inline"),Ne.push(at)):at.parentNode._isSplit&&!at._isSplit&&at.innerHTML!==""?ze.push(at):Ke&&!at._isSplit&&(We==="span"&&(at.style.display="inline"),Ne.push(at))}for(bt=Et.length;--bt>-1;)Et[bt].parentNode.removeChild(Et[bt]);if(Ye){for(rt&&(tn=_doc.createElement(We),m.appendChild(tn),zt=tn.offsetWidth+"px",Vt=tn.offsetParent===m?0:m.offsetLeft,m.removeChild(tn)),Jt=m.style.cssText,m.style.cssText="display:none;";m.firstChild;)m.removeChild(m.firstChild);for(Dt=He===" "&&(!rt||!Ze&&!Ke),bt=0;bt<Ye.length;bt++){for(Bt=Ye[bt],tn=_doc.createElement(We),tn.style.cssText="display:block;text-align:"+Oe+";position:"+(rt?"absolute;":"relative;"),ft&&(tn.className=ft+(mt?bt+1:"")),$e.push(tn),st=Bt.length,Ct=0;Ct<st;Ct++)Bt[Ct].nodeName!=="BR"&&(at=Bt[Ct],tn.appendChild(at),Dt&&at._wordEnd&&tn.appendChild(_doc.createTextNode(" ")),rt&&(Ct===0&&(tn.style.top=at._y+"px",tn.style.left=Ee+Vt+"px"),at.style.top="0px",Vt&&(at.style.left=at._x-Vt+"px")));st===0?tn.innerHTML="&nbsp;":!Ze&&!Ke&&(_deWordify(tn),_swapText(tn," "," ")),rt&&(tn.style.width=zt,tn.style.height=at._h+"px"),m.appendChild(tn)}m.style.cssText=Jt}rt&&(ve>m.clientHeight&&(m.style.height=ve-Be+"px",m.clientHeight<ve&&(m.style.height=ve+Ce+"px")),le>m.clientWidth&&(m.style.width=le-ke+"px",m.clientWidth<le&&(m.style.width=le+De+"px"))),_pushReversed(j,Ne),Ze&&_pushReversed(ee,ze),_pushReversed(re,$e)},_splitRawText=function $(m,L,j,ee){var re=L.tag?L.tag:L.span?"span":"div",le=L.type||L.split||"chars,words,lines",ve=~le.indexOf("chars"),ye=_isAbsolute(L),Ee=L.wordDelimiter||" ",Me=Ee!==" "?"":ye?"&#173; ":" ",Ce="</"+re+">",De=1,Be=L.specialChars?typeof L.specialChars=="function"?L.specialChars:_findSpecialChars:null,ke,Fe,Oe,Ne,ze,$e,He,We,qe=_doc.createElement("div"),Ye=m.parentNode;for(Ye.insertBefore(qe,m),qe.textContent=m.nodeValue,Ye.removeChild(m),m=qe,ke=getText(m),He=ke.indexOf("<")!==-1,L.reduceWhiteSpace!==!1&&(ke=ke.replace(_multipleSpacesExp," ").replace(_stripExp,"")),He&&(ke=ke.split("<").join("{{LT}}")),ze=ke.length,Fe=(ke.charAt(0)===" "?Me:"")+j(),Oe=0;Oe<ze;Oe++)if($e=ke.charAt(Oe),Be&&(We=Be(ke.substr(Oe),L.specialChars)))$e=ke.substr(Oe,We||1),Fe+=ve&&$e!==" "?ee()+$e+"</"+re+">":$e,Oe+=We-1;else if($e===Ee&&ke.charAt(Oe-1)!==Ee&&Oe){for(Fe+=De?Ce:"",De=0;ke.charAt(Oe+1)===Ee;)Fe+=Me,Oe++;Oe===ze-1?Fe+=Me:ke.charAt(Oe+1)!==")"&&(Fe+=Me+j(),De=1)}else $e==="{"&&ke.substr(Oe,6)==="{{LT}}"?(Fe+=ve?ee()+"{{LT}}</"+re+">":"{{LT}}",Oe+=5):$e.charCodeAt(0)>=55296&&$e.charCodeAt(0)<=56319||ke.charCodeAt(Oe+1)>=65024&&ke.charCodeAt(Oe+1)<=65039?(Ne=((ke.substr(Oe,12).split(emojiExp)||[])[1]||"").length||2,Fe+=ve&&$e!==" "?ee()+ke.substr(Oe,Ne)+"</"+re+">":ke.substr(Oe,Ne),Oe+=Ne-1):Fe+=ve&&$e!==" "?ee()+$e+"</"+re+">":$e;m.outerHTML=Fe+(De?Ce:""),He&&_swapText(Ye,"{{LT}}","<")},_split=function $(m,L,j,ee){var re=_toArray(m.childNodes),le=re.length,ve=_isAbsolute(L),ye,Ee;if(m.nodeType!==3||le>1){for(L.absolute=!1,ye=0;ye<le;ye++)Ee=re[ye],(Ee.nodeType!==3||/\S+/.test(Ee.nodeValue))&&(ve&&Ee.nodeType!==3&&_getComputedStyle(Ee).display==="inline"&&(Ee.style.display="inline-block",Ee.style.position="relative"),Ee._isSplit=!0,$(Ee,L,j,ee));L.absolute=ve,m._isSplit=!0;return}_splitRawText(m,L,j,ee)},SplitText=function(){function $(L,j){_coreInitted||_initCore(),this.elements=_toArray(L),this.chars=[],this.words=[],this.lines=[],this._originals=[],this.vars=j||{},this.split(j)}var m=$.prototype;return m.split=function(j){this.isSplit&&this.revert(),this.vars=j=j||this.vars,this._originals.length=this.chars.length=this.words.length=this.lines.length=0;for(var ee=this.elements.length,re=j.tag?j.tag:j.span?"span":"div",le=_cssClassFunc(j.wordsClass,re),ve=_cssClassFunc(j.charsClass,re),ye,Ee,Me;--ee>-1;)Me=this.elements[ee],this._originals[ee]=Me.innerHTML,ye=Me.clientHeight,Ee=Me.clientWidth,_split(Me,j,le,ve),_setPositionsAfterSplit(Me,j,this.chars,this.words,this.lines,Ee,ye);return this.chars.reverse(),this.words.reverse(),this.lines.reverse(),this.isSplit=!0,this},m.revert=function(){var j=this._originals;if(!j)throw"revert() call wasn't scoped properly.";return this.elements.forEach(function(ee,re){return ee.innerHTML=j[re]}),this.chars=[],this.words=[],this.lines=[],this.isSplit=!1,this},$.create=function(j,ee){return new $(j,ee)},$}();SplitText.version="3.2.4";const _sfc_main$a={__name:"ColorFadeTextElt",props:{tag:{type:String,default:"div"},text:{type:String,required:!0},show:{type:Boolean,default:!0},params:{type:Object,default:()=>({})}},setup($){const m=$,L=useDatasStore(),j=computed(()=>({stagger:.025,delay:.1,...m.params})),ee={zh:{split:"chars",stagger:.2},default:{split:"words",stagger:1}},re=L.lang in ee?ee[L.lang]:ee.default,le=ref();let ve,ye;const Ee=()=>{gsapWithCSS.set(ve[re.split],{color:"",opacity:""})},Me=()=>{const De=gsapWithCSS.timeline();return De.to(ve[re.split],{opacity:0,duration:.2,stagger:.02*re.stagger,ease:"power1.out"},0),De};onMounted(()=>{ve=new SplitText(le.value,{type:re.split}),watch(()=>m.show,De=>{ye==null||ye.kill(),De?(Ee(),ye=Ce()):ye=Me()},{immediate:!0})});const Ce=()=>{const De=gsapWithCSS.timeline();return De.from(ve[re.split],{opacity:0,duration:.1,stagger:j.value.stagger*re.stagger,ease:"power1.out"},0+j.value.delay),De.from(ve[re.split],{color:"#C1FF12",duration:.1,stagger:j.value.stagger*re.stagger,ease:"power1.out"},.085+j.value.delay),De.restart(),De};return onUnmounted(()=>{ve.revert()}),(De,Be)=>(openBlock(),createBlock(resolveDynamicComponent(m.tag),{ref_key:"container",ref:le},{default:withCtx(()=>[createTextVNode(toDisplayString(m.text),1)]),_:1},512))}},ColorFadeTextElt=_sfc_main$a;function remap($,[m,L],[j,ee]){return j+(ee-j)*(($-m)/(L-m))}const _sfc_main$9={__name:"LineSlideTextElt",props:{tag:{type:String,default:"div"},text:{type:String,required:!0},show:{type:Boolean,default:!0},params:{type:Object,default:()=>({})}},setup($){const m=$,L=computed(()=>({stagger:.03,delay:.5,...m.params})),j=ref();let ee,re;const le=()=>{for(const Ee of ee.lines)Ee.style.transform="",Ee.style.opacity=""},ve=()=>{const Ee=gsapWithCSS.timeline();return Ee.call(()=>{for(const Me of ee.lines)Me.style.willChange="transform"}),Ee.from(ee.lines,{y:Me=>remap(Me/ee.lines.length,[0,1],[20,50]),ease:"power3.out",duration:1.4,stagger:L.value.stagger},0+L.value.delay),Ee.from(ee.lines,{opacity:0,ease:"power2.out",duration:2,stagger:L.value.stagger},.4+L.value.delay),Ee.call(()=>{for(const Me of ee.lines)Me.style.willChange=""}),Ee},ye=()=>{const Ee=gsapWithCSS.timeline();return Ee.to(ee.lines,{y:20,duration:1,stagger:.05,ease:"power3.out"},0),Ee.to(ee.lines,{opacity:0,duration:1,stagger:.05},0),Ee};return onMounted(()=>{ee=new SplitText(j.value,{type:"lines"}),watch(()=>m.show,Ee=>{re==null||re.kill(),Ee?(le(),re=ve()):re=ye()},{immediate:!0})}),onUnmounted(()=>{ee.revert()}),(Ee,Me)=>(openBlock(),createBlock(resolveDynamicComponent(m.tag),{ref_key:"container",ref:j},{default:withCtx(()=>[createTextVNode(toDisplayString(m.text),1)]),_:1},512))}},LineSlideTextElt=_sfc_main$9,_withScopeId$1=$=>(pushScopeId("data-v-f6718bd5"),$=$(),popScopeId(),$),_hoisted_1$7=_withScopeId$1(()=>createBaseVNode("path",{d:"M4.83039 1.00043L8.99988 5.16992L4.83039 9.33941","stroke-width":"0.7"},null,-1)),_hoisted_2$4=_withScopeId$1(()=>createBaseVNode("path",{d:"M7.17565 6.99407L5.3515 5.16992L7.17565 3.34577","stroke-width":"0.7"},null,-1)),_hoisted_3$2=[_hoisted_1$7,_hoisted_2$4],tag="p",_sfc_main$8={__name:"TextIndicationElt",props:{show:{type:Boolean,default:!0},text:{type:String,default:null},isTitle:{type:Boolean,default:!1},isFixed:{type:Boolean,default:!1},isLarge:{type:Boolean,default:!1},isMedium:{type:Boolean,default:!1},hasArrow:{type:Boolean,default:!0},isWhite:{type:Boolean,default:!1},anim:{type:Object,default:()=>({type:"none"})}},setup($){const m=$,L=ref(),j=computed(()=>{const{type:ee="none",...re}=m.anim,le={tag,props:{}};return ee==="none"?(Object.assign(le.props,{innerHTML:m.text}),m.show||(le.props.style="display: none;")):(ee==="slide"&&(le.tag=LineSlideTextElt),ee==="color"&&(le.tag=ColorFadeTextElt),Object.assign(le.props,{params:re,text:m.text,show:m.show})),le});return onMounted(()=>{watch(()=>m.show,()=>{if(!L.value)return;const ee=gsapWithCSS.timeline(),re=.3;ee.fromTo(L.value,{opacity:0},{opacity:1,duration:.1,ease:"power1.out"},0+re),ee.fromTo(L.value,{stroke:"#C1FF12"},{stroke:m.isWhite?"#ffffff":"#000000",duration:.1,ease:"power1.out"},.085+re)},{immediate:!0})}),(ee,re)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["textIndication",{isWhite:$.isWhite,isFixed:$.isFixed}])},[$.hasArrow?(openBlock(),createElementBlock("svg",{key:0,ref_key:"arrow",ref:L,class:"textIndication--arrow",viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_3$2,512)):createCommentVNode("",!0),$.isTitle?(openBlock(),createBlock(resolveDynamicComponent(unref(j).tag),mergeProps({key:2},unref(j).props,{class:"textIndication--title"}),null,16)):(openBlock(),createBlock(resolveDynamicComponent(unref(j).tag),mergeProps({key:1},unref(j).props,{class:["textIndication--text",{isLarge:$.isLarge,isMedium:$.isMedium,isFixed:$.isFixed}]}),null,16,["class"]))],2))}},TextIndicationElt=_export_sfc$1(_sfc_main$8,[["__scopeId","data-v-f6718bd5"]]),_withScopeId=$=>(pushScopeId("data-v-ddc31e1c"),$=$(),popScopeId(),$),_hoisted_1$6=["value"],_hoisted_2$3={key:0,class:"wrapper wrapper_bottom"},_hoisted_3$1=_withScopeId(()=>createBaseVNode("path",{d:"M8.07503 4.75993L4.20508 8.62988L0.335129 4.75993","stroke-width":"0.931607"},null,-1)),_hoisted_4$1=_withScopeId(()=>createBaseVNode("path",{d:"M2.51198 6.93627L4.20508 5.24316L5.89818 6.93627","stroke-width":"0.931607"},null,-1)),_hoisted_5$1=_withScopeId(()=>createBaseVNode("rect",{width:"0.931607",height:"4.7302",transform:"matrix(1 0 0 -1 3.86133 5.56982)"},null,-1)),_hoisted_6$1=[_hoisted_3$1,_hoisted_4$1,_hoisted_5$1],_hoisted_7$1=_withScopeId(()=>createBaseVNode("path",{d:"M8.07503 4.75993L4.20508 8.62988L0.335129 4.75993","stroke-width":"0.931607"},null,-1)),_hoisted_8$1=_withScopeId(()=>createBaseVNode("path",{d:"M2.51198 6.93627L4.20508 5.24316L5.89818 6.93627","stroke-width":"0.931607"},null,-1)),_hoisted_9=_withScopeId(()=>createBaseVNode("rect",{width:"0.931607",height:"4.7302",transform:"matrix(1 0 0 -1 3.86133 5.56982)"},null,-1)),_hoisted_10=[_hoisted_7$1,_hoisted_8$1,_hoisted_9],_hoisted_11={key:1,class:"wrapper wrapper_default"},_hoisted_12=_withScopeId(()=>createBaseVNode("path",{d:"M5.34158 2.61572L9.96967 2.61572V7.2438","stroke-width":"0.787795"},null,-1)),_hoisted_13=_withScopeId(()=>createBaseVNode("path",{d:"M9.97039 4.64136L7.9456 4.64136L7.9456 2.61657","stroke-width":"0.787795"},null,-1)),_hoisted_14=_withScopeId(()=>createBaseVNode("rect",{width:"0.787795",height:"7.06391",transform:"matrix(-0.707107 -0.707107 -0.707107 0.707107 8.34563 4.65137)",fill:"black"},null,-1)),_hoisted_15=[_hoisted_12,_hoisted_13,_hoisted_14],_hoisted_16=_withScopeId(()=>createBaseVNode("path",{d:"M5.34158 2.61572L9.96967 2.61572V7.2438","stroke-width":"0.787795"},null,-1)),_hoisted_17=_withScopeId(()=>createBaseVNode("path",{d:"M9.97039 4.64136L7.9456 4.64136L7.9456 2.61657","stroke-width":"0.787795"},null,-1)),_hoisted_18=_withScopeId(()=>createBaseVNode("rect",{width:"0.787795",height:"7.06391",transform:"matrix(-0.707107 -0.707107 -0.707107 0.707107 8.34563 4.65137)",fill:"black"},null,-1)),_hoisted_19=[_hoisted_16,_hoisted_17,_hoisted_18],defaultDuration$1=.35,_sfc_main$7={__name:"CtaBtn",props:{text:{type:String,default:null},url:{type:String,default:null},hasBottomArrow:{type:Boolean,default:!1},isWhite:{type:Boolean,default:!1},show:{type:Boolean,default:!0},isInput:{type:Boolean,default:!1}},setup($){const m=useUiStore(),L=$,j=ref(),ee=ref(),re=ref(),le=ref(),ve=ref(),ye=ref(),Ee=ref(),Me=ref(),Ce=ref(),De=ref(),Be=ref(),ke=ref(),Fe=ref();let Oe,Ne;const ze=()=>{const We=gsapWithCSS.timeline({paused:!0});We.timeScale(1.5),We.to(j.value,{transform:"scaleX(0)",duration:defaultDuration$1,ease:"power2.inOut"},0),We.to(ee.value,{transform:"scaleX(0)",duration:defaultDuration$1,ease:"power2.inOut"},0),We.to(re.value,{transform:"scaleX(0)",duration:defaultDuration$1,ease:"power2.inOut"},0),We.to(le.value,{transform:"scaleX(0)",duration:defaultDuration$1,ease:"power2.inOut"},0),We.to(ve.value,{transform:"scaleY(0)",duration:defaultDuration$1,ease:"power2.inOut"},defaultDuration$1*.5),We.to(ye.value,{transform:"scaleY(0)",duration:defaultDuration$1,ease:"power2.inOut"},defaultDuration$1*.5),We.to(Ee.value,{transform:"scaleY(1)",duration:defaultDuration$1,ease:"power2.out"},defaultDuration$1*.5),We.to(Me.value,{transform:"scaleY(1)",duration:defaultDuration$1,ease:"power2.out"},defaultDuration$1*.5),Ne=new SplitText(Ce.value,{type:"words"});const qe=gsapWithCSS.timeline({paused:!0});return qe.timeScale(1.5),qe.to(Ne.words,{color:"#C1FF12",duration:0},0),L.isWhite===!0?qe.to(Ne.words,{color:"#ffffff",stagger:"0.04",duration:.4,ease:"power2.in"}):qe.to(Ne.words,{color:"#000000",stagger:"0.04",duration:.4,ease:"power2.in"}),L.hasBottomArrow===!0?qe.to(Ne.words,{x:0,y:-6,duration:0},0):qe.to(Ne.words,{x:-5,y:5,duration:0},0),qe.to(Ne.words,{x:0,y:0,stagger:"0.04",duration:.2,ease:"power2.out"},0),L.hasBottomArrow===!0?qe.to(Ne.elements,{x:0,y:-7,duration:0},0):qe.to(Ne.elements,{x:-6,y:6,duration:0},0),qe.to(Ne.elements,{x:0,y:0,duration:1,ease:"power2.out"},0),ke.value&&(qe.to(ke.value,{clipPath:"inset(0% 0% 0% 100%)",transform:"translate(8px, -8px) scale(4)",duration:.2,ease:"sine.in"},0),qe.to(Fe.value,{clipPath:"inset(0% 0% 0% 0%)",transform:"translate(0px, 0px) scale(1)",duration:.2,ease:"power2.out"},.35),qe.call(()=>{var Ye;(Ye=ke.value)==null||Ye.classList.add("isYellow")},null,0),qe.call(()=>{var Ye,Ze;(Ye=Fe.value)==null||Ye.classList.remove("isYellow"),L.isWhite===!0&&((Ze=Fe.value)==null||Ze.classList.add("isWhite"))},null,.4)),De.value&&(qe.to(De.value,{clipPath:"inset(0% 0% 0% 100%)",transform:"translate(0px, 8px) scale(4)",duration:.2,ease:"sine.in"},0),qe.to(Be.value,{clipPath:"inset(0% 0% 0% 0%)",transform:"translate(0px, 0px) scale(1)",duration:.2,ease:"power2.out"},.35),qe.call(()=>{var Ye;(Ye=De.value)==null||Ye.classList.add("isYellow")},null,0),qe.call(()=>{var Ye,Ze;(Ye=Be.value)==null||Ye.classList.remove("isYellow"),L.isWhite===!0&&((Ze=Be.value)==null||Ze.classList.add("isWhite"))},null,.4)),{lines:We,text:qe}};onMounted(()=>{Oe=ze()});const $e=()=>{m.setIsHover(!0),DeviceHelper.isTouch||(AudioPlayer.play("HoverUI_In"),Oe.lines.play(),Oe.text.restart())},He=()=>{m.setIsHover(!1),DeviceHelper.isTouch||(AudioPlayer.play("HoverUI_Out"),Oe.lines.reverse())};return onUnmounted(()=>{var We,qe;Ne==null||Ne.revert(),(We=Oe==null?void 0:Oe.lines)==null||We.kill(),(qe=Oe==null?void 0:Oe.text)==null||qe.kill()}),(We,qe)=>(openBlock(),createBlock(LinkBtn,{class:normalizeClass(["ctaButton",{isWhite:$.isWhite,hide:!L.show}]),url:$.url,onMouseenter:$e,onMouseleave:He,onClick:qe[0]||(qe[0]=()=>unref(AudioPlayer).play("ClickUI"))},{default:withCtx(()=>[createBaseVNode("div",{ref_key:"lineDefaultTop",ref:j,class:"line_default line_default-top"},null,512),createBaseVNode("div",{ref_key:"lineDefaultTop2",ref:ee,class:"line_default line_default-top2"},null,512),createBaseVNode("div",{ref_key:"lineDefaultBottom",ref:re,class:"line_default line_default-bottom"},null,512),createBaseVNode("div",{ref_key:"lineDefaultBottom2",ref:le,class:"line_default line_default-bottom2"},null,512),createBaseVNode("div",{ref_key:"lineDefaultLeft",ref:ve,class:"line_default line_default-left"},null,512),createBaseVNode("div",{ref_key:"lineDefaultRight",ref:ye,class:"line_default line_default-right"},null,512),createBaseVNode("div",{ref_key:"lineHoverLeft",ref:Ee,class:"line_hover line_hover-left"},null,512),createBaseVNode("div",{ref_key:"lineHoverRight",ref:Me,class:"line_hover line_hover-right"},null,512),createBaseVNode("p",{ref_key:"glitchText",ref:Ce,class:"ctaButton_text"},toDisplayString($.text),513),$.isInput?(openBlock(),createElementBlock("input",{key:0,class:"ctaButton_text ctaButton_text-input",type:"submit",value:$.text},null,8,_hoisted_1$6)):createCommentVNode("",!0),$.isInput?createCommentVNode("",!0):(openBlock(),createElementBlock(Fragment,{key:1},[$.hasBottomArrow?(openBlock(),createElementBlock("div",_hoisted_2$3,[(openBlock(),createElementBlock("svg",{ref_key:"arrowBottomCta",ref:De,class:normalizeClass(["ctaButton_arrow bottom",{isWhite:$.isWhite}]),width:"9",height:"10",viewBox:"0 0 9 10",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_6$1,2)),(openBlock(),createElementBlock("svg",{ref_key:"arrowBottomCtaHover",ref:Be,class:"ctaButton_arrow ctaButton_arrow-hover bottom isYellow",width:"9",height:"10",viewBox:"0 0 9 10",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_10,512))])):(openBlock(),createElementBlock("div",_hoisted_11,[(openBlock(),createElementBlock("svg",{ref_key:"arrowCta",ref:ke,class:normalizeClass(["ctaButton_arrow default",{isWhite:$.isWhite}]),width:"13",height:"12",viewBox:"0 0 13 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_15,2)),(openBlock(),createElementBlock("svg",{ref_key:"arrowCtaHover",ref:Fe,class:"ctaButton_arrow ctaButton_arrow-hover default isYellow",width:"13",height:"12",viewBox:"0 0 13 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_19,512))]))],64))]),_:1},8,["class","url"]))}},CtaBtn=_export_sfc$1(_sfc_main$7,[["__scopeId","data-v-ddc31e1c"]]),_hoisted_1$5={class:"text"},defaultDuration=.5,_sfc_main$6={__name:"ColorBlinkElt",props:{text:{type:String,default:null}},setup($){const m=ref();let L=null;const j=le=>{if(DeviceHelper.isTouch)return;L&&L.kill();const ve=gsapWithCSS.timeline();le?(ve.to(m.value,{color:"#C1FF12",duration:defaultDuration},0),ve.fromTo(m.value,{opacity:0,x:-20},{opacity:1,x:0,duration:.8,ease:"power2.out"},0)):ve.to(m.value,{color:null,opacity:1,x:0,duration:.8,ease:"power2.inOut"},0),L=ve},ee=()=>j(!0),re=()=>j(!1);return onUnmounted(()=>{L&&L.kill()}),(le,ve)=>(openBlock(),createElementBlock("p",{ref_key:"textWrapperRef",ref:m,class:"textWrapper",onMouseenter:ee,onMouseleave:re},[createBaseVNode("span",_hoisted_1$5,toDisplayString($.text),1)],544))}},ColorBlinkElt=_export_sfc$1(_sfc_main$6,[["__scopeId","data-v-2e1d507f"]]),_hoisted_1$4={key:0,class:"popup-window"},_hoisted_2$2={class:"popup-scroll"},_hoisted_3={class:"popup-title"},_hoisted_4={class:"popup-infos"},_hoisted_5={class:"popup-items"},_hoisted_6={class:"item-name"},_hoisted_7={class:"item-number"},_hoisted_8={class:"wrapper"},_sfc_main$5={__name:"ValuePopupElt",props:{isWhite:{type:Boolean,default:!1},isAbout:{type:Boolean,default:!1}},setup($){const{event:m}=useGtag(),L=ref(),[j,ee]=useDisposableRef(),[re,le]=useDisposableRef(),[ve,ye]=useDisposableRef(),[Ee,Me]=useDisposableRef(),[Ce,De]=useDisposableRef(),Be=$,ke=useUiStore(),Fe=useDatasStore();watch(()=>ke.valuePopup.isOpen,st=>{m("tvl",{type:st?"open":"close"})});const Oe=computed(()=>!ke.home.isZoom&&ke.mainLoader.hidding&&!ke.mainLoader.visible&&!Be.isAbout),Ne=computed(()=>DeviceHelper.device.desktop&&(!ke.isWhitePage||ke.menu.isOpen)),ze=computed(()=>!DeviceHelper.device.desktop&&ke.menu.isOpen),$e=computed(()=>DeviceHelper.os.ios),He=computed(()=>Fe.valuePopup),We=computed(()=>Fe.tvl.total),qe=computed(()=>Fe.tvl.items);function Ye(st){return st=parseInt(st||0),"$"+st.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}function Ze(){ke.valuePopup.isOpen=!0,AudioPlayer.play("DecodingUI")}function Ke(){ke.valuePopup.isOpen=!1,AudioPlayer.play("Close_Window")}const rt=()=>{ke.setIsHover(!0)},ft=()=>{ke.setIsHover(!1)},mt=()=>{var st,at;(st=L.value)==null||st.setSpeed(1),(at=L.value)==null||at.playSegments([0,31],!0)},Et=()=>{var st,at;(st=L.value)==null||st.setSpeed(1),(at=L.value)==null||at.playSegments([16,0],!0)};function bt(st,at){const Xe=gsapWithCSS.timeline();Xe.fromTo(Ce.value,{opacity:0},{opacity:1,duration:1,ease:"power2.out"},0),Xe.fromTo(re.value,{transform:"scale(0.8)"},{transform:"scale(1)",duration:1.5,ease:"expo.out"},0),Xe.fromTo(j.value,{transform:"translateY(calc(100% + 10px))"},{transform:"translateY(0%)",duration:1.35,ease:"expo.out"},0),Xe.fromTo(ve.value,{transform:"translateY(0%)"},{transform:"translateY(-100%)",duration:1,ease:"expo.out"},0),Xe.fromTo(Ee.value,{transform:"translateY(0%)"},{transform:"translateY(-100%)",duration:1,ease:"expo.out"},.05),Xe.call(()=>{Ce.value.style="",j.value.style="",re.value.style="",ve.value.style="",Ee.value.style="",at()},null),Xe.timeScale(2)}function Ct(st,at){const Xe=gsapWithCSS.timeline();Xe.to(Ce.value,{opacity:0,duration:.75,ease:"power3.inOut"},0),Xe.to(j.value,{transform:"translateY(calc(100% + 10px))",duration:.75,ease:"power3.inOut"},0),Xe.fromTo(ve.value,{transform:"translateY(-100%)"},{transform:"translateY(0%)",duration:.75,ease:"power3.inOut"},0),Xe.fromTo(Ee.value,{transform:"translateY(-100%)"},{transform:"translateY(0%)",duration:.75,ease:"power3.inOut"},0),Xe.call(()=>{ee(),le(),ye(),Me(),De(),at()},null),Xe.timeScale(2)}return(st,at)=>(openBlock(),createElementBlock(Fragment,null,[createVNode(Transition,{name:"global"},{default:withCtx(()=>[Oe.value&&(Ne.value||ze.value||$e.value)&&We.value!=0?(openBlock(),createBlock(TextQuantityBtn,{key:0,number:Ye(We.value),text:He.value.totalValueLegend,"is-white":$.isWhite,class:"popup-prompt isFixed",onClick:Ze,onMouseenter:rt,onMouseleave:ft},null,8,["number","text","is-white"])):createCommentVNode("",!0)]),_:1}),createVNode(Transition,null,{default:withCtx(()=>[$.isAbout&&!unref(ke).mainLoader.visible&&We.value!=0?(openBlock(),createBlock(TextQuantityBtn,{key:0,number:Ye(We.value),text:He.value.totalValueLegend,"is-white":$.isWhite,class:"popup-prompt",onClick:Ze,onMouseenter:rt,onMouseleave:ft},null,8,["number","text","is-white"])):createCommentVNode("",!0)]),_:1}),createVNode(Transition,{css:!1,onEnter:bt,onLeave:Ct},{default:withCtx(()=>{var Xe,ht;return[unref(ke).valuePopup.isOpen?(openBlock(),createElementBlock("div",_hoisted_1$4,[createBaseVNode("div",{ref_key:"popupClickCatcherRef",ref:Ce,class:"popup-window_click-catcher",onClick:Ke},null,512),createBaseVNode("div",{ref_key:"popupWrapperRef",ref:re,class:"popup-window_wrapper"},[createBaseVNode("div",{ref_key:"popupContentRef",ref:j,class:"popup-window_content"},[createBaseVNode("div",{ref_key:"popupMaskRef",ref:ve,class:"popup-mask"},null,512),createBaseVNode("div",{ref_key:"popupMask2Ref",ref:Ee,class:"popup-mask2"},null,512),createBaseVNode("div",_hoisted_2$2,[createBaseVNode("button",{class:"popup-close",onClick:Ke,onMouseenter:mt,onMouseleave:Et},[createVNode(unref(Vue3Lottie),{ref_key:"lottieRef",ref:L,"animation-link":"/lottie/popupClose.json","auto-play":!1,loop:!1,width:"100%",height:"100%"},null,512)],32),createBaseVNode("h3",_hoisted_3,toDisplayString(He.value.title),1),createBaseVNode("p",_hoisted_4,toDisplayString(He.value.subtitle),1),createBaseVNode("ul",_hoisted_5,[(openBlock(!0),createElementBlock(Fragment,null,renderList(qe.value,(Bt,Dt)=>(openBlock(),createElementBlock("li",{key:Dt,class:"item"},[createBaseVNode("div",_hoisted_6,toDisplayString(Bt.text),1),createBaseVNode("div",_hoisted_7,toDisplayString(Ye(Bt.value)),1)]))),128))]),createVNode(TextIndicationElt,{"is-fixed":!0,class:"popup-text",text:He.value.linkText},null,8,["text"]),(Xe=He.value.linkCta)!=null&&Xe.url?(openBlock(),createBlock(CtaBtn,{key:0,class:"popup-cta",text:He.value.linkCta.label,url:He.value.linkCta.url},null,8,["text","url"])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_8,[(ht=He.value.footerCta)!=null&&ht.url?(openBlock(),createBlock(LinkBtn,{key:0,class:"popup-telegramCta",url:He.value.footerCta.url,onClick:at[0]||(at[0]=()=>unref(AudioPlayer).play("ClickUI")),onMouseenter:at[1]||(at[1]=()=>unref(DeviceHelper).isTouch?null:unref(AudioPlayer).play("HoverUI_In"))},{default:withCtx(()=>[createVNode(ColorBlinkElt,{class:"popup-telegramCta-text",text:He.value.footerCta.label},null,8,["text"])]),_:1},8,["url"])):createCommentVNode("",!0)])])],512)],512)])):createCommentVNode("",!0)]}),_:1})],64))}},ValuePopupElt=_export_sfc$1(_sfc_main$5,[["__scopeId","data-v-9c19d21e"]]),_hoisted_1$3={class:"headerBlock__wrapper"},_hoisted_2$1={class:"navbar"},_sfc_main$4={__name:"HeaderBlock",setup($){const m=useUiStore(),L=useDatasStore(),j=ref(),ee=computed(()=>m.currentRouteType==="home"&&DEFAULT_LANG===L.lang?"/":"/"+L.lang+"/"),re=()=>{m.menu.isOpen=!m.menu.isOpen},le=()=>{DeviceHelper.isTouch||j.value.handleMouseEnter()},ve=()=>{DeviceHelper.isTouch||j.value.handleMouseLeave()};return(ye,Ee)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("header",{class:normalizeClass(["headerBlock",{hidden:!unref(m).mainLoader.hidding}])},[createBaseVNode("div",_hoisted_1$3,[createVNode(Transition,{name:"global"},{default:withCtx(()=>[!unref(m).mainLoader.visible&&!unref(m).home.isZoom?(openBlock(),createBlock(LogoElt,{key:0,class:"button",url:unref(ee),"is-white":unref(m).isUiBgDark},null,8,["url","is-white"])):createCommentVNode("",!0)]),_:1}),createBaseVNode("div",_hoisted_2$1,[createVNode(Transition,{name:"global"},{default:withCtx(()=>[unref(m).menu.isOpen&&!unref(m).mainLoader.visible&&!unref(m).home.isZoom?(openBlock(),createBlock(LanguageElt,{key:0,class:"button","is-white":!0})):createCommentVNode("",!0)]),_:1}),createVNode(Transition,{name:"global"},{default:withCtx(()=>[!unref(m).mainLoader.visible&&!unref(m).home.isZoom?(openBlock(),createBlock(SoundBtn,{key:0,class:"button","is-white":unref(m).isUiBgDark},null,8,["is-white"])):createCommentVNode("",!0)]),_:1}),createVNode(Transition,{name:"global"},{default:withCtx(()=>[!unref(m).mainLoader.visible&&!unref(m).home.isZoom?(openBlock(),createBlock(MenuBtn,{key:0,ref_key:"menuButtonRef",ref:j,class:"button","is-white":unref(m).isUiBgDark,onClick:re,onMouseenter:le,onMouseleave:ve},null,8,["is-white"])):createCommentVNode("",!0)]),_:1})])])],2),createVNode(ValuePopupElt,{"is-white":!0})],64))}},HeaderBlock=_export_sfc$1(_sfc_main$4,[["__scopeId","data-v-57eb43b4"]]);function useSaveTransition({enter:$,leave:m,type:L="page",mode:j="out-in",name:ee=null}){var Me;const re=useTransitionStore(),le=useRoute$1(),ve=((Me=le.meta)==null?void 0:Me.layout)||"default",ye=ee||(le==null?void 0:le.path)||"/",Ee=L==="layout"?ve:ye;re.setTransitions(Ee,{enter:$,leave:m,mode:j},L)}const removeTags=$=>$.replace(/<[^>]+\/?>/g,""),getHead=($,m,L)=>{var ke,Fe;if(!$)return{};let j,ee,re,le,ve;const{metas:ye,image:Ee,shortDesc:Me}=$,Ce=$.title||"",De=Me||"",Be=Ee&&Ee.length>0&&Ee[0];return j||(j=(ye==null?void 0:ye.title)||Ce||""),L!=null&&L.title&&(j+=(j!==""?" - ":"")+(L==null?void 0:L.title)),ee||(ee=(ye==null?void 0:ye.desc)||De||(L==null?void 0:L.desc)||""),re||(re=(ye==null?void 0:ye.title)||j),le||(le=(ye==null?void 0:ye.desc)||ee),ve||(ve=((ke=ye==null?void 0:ye.image)==null?void 0:ke.url)||(Be==null?void 0:Be.url)||((Fe=L==null?void 0:L.image)==null?void 0:Fe.url)),j=removeTags(j),ee=removeTags(ee),re=removeTags(re),le=removeTags(le),{title:j,meta:[{hid:"description",name:"description",content:ee},{hid:"og:title",property:"og:title",content:re},{hid:"og:description",property:"og:description",content:le},ve?{hid:"og:image",property:"og:image",content:ve}:{},{hid:"og:url",property:"og:url",content:m},{hid:"twitter:title",name:"twitter:title",content:re},{hid:"twitter:description",name:"twitter:description",content:le},ve?{hid:"twitter:image",name:"twitter:image",content:ve}:{}],link:[{rel:"canonical",href:m}]}},_hoisted_1$2={class:normalizeClass({page:!0})},_hoisted_2={class:"page__wrapper"},_sfc_main$3={__name:"Page",props:{page:{type:Object,default:null}},setup($){const m=$,L=useRoute$1(),j=useDatasStore(),ee=computed(()=>m.page?getHead(m.page,j.baseUrl+L.path,j.metas):{});return useHead(ee),onBeforeMount(()=>{const{pageview:re}=useGtag();re({page_path:L.path,page_title:ee.value.title})}),(re,le)=>(openBlock(),createElementBlock("div",_hoisted_1$2,[createBaseVNode("div",_hoisted_2,[renderSlot(re.$slots,"default",{},void 0,!0)])]))}},Page=_export_sfc$1(_sfc_main$3,[["__scopeId","data-v-734a9c56"]]),_hoisted_1$1=["innerHTML"],_sfc_main$2={__name:"NotFoundPage",props:{page:{type:Object,default:null},webglView:{type:String,default:"empty"},title:{type:String,default:"Page not found"}},setup($){const m=$,L=useDatasStore(),j=useRoute$1();useUiStore();const[ee,re]=useDisposableRef(),le=ref(!1),ve=computed(()=>m.page),ye=computed(()=>getHead(ve.value,L.baseUrl+j.path,L.metas));useHead(ye),onMounted(()=>{le.value&&Ee()});function Ee(){if(!ee.value){le.value=!0;return}ScrollManager$1.setDomTarget(ee.value.$el,j.path);const Me=gsapWithCSS.timeline();return Me.fromTo(ee.value.$el,{autoAlpha:0},{autoAlpha:1,duration:.5,ease:"sine.inOut"},0),Me}return useSaveTransition({enter:function(){return Ee()},leave:function(){var Ce;const Me=gsapWithCSS.timeline({onComplete:()=>re()});return(Ce=ee.value)!=null&&Ce.$el&&Me.to(ee.value.$el,{autoAlpha:0,duration:1,ease:"sine.inOut"},0),Me},mode:"out-in",name:j==null?void 0:j.path,type:"page"}),(Me,Ce)=>(openBlock(),createBlock(Page,{ref_key:"pageElt",ref:ee,class:normalizeClass({notFound:!0})},{default:withCtx(()=>[createBaseVNode("p",{innerHTML:$.title},null,8,_hoisted_1$1)]),_:1},512))}},NotFoundPage=_export_sfc$1(_sfc_main$2,[["__scopeId","data-v-39c530b5"]]),_hoisted_1={ref:"el",class:normalizeClass({app:!0})},_sfc_main$1={__name:"error",props:{error:{type:Object,default:null}},async setup($){let m,L;const j=$,ee=computed(()=>{var le;return!j.error||j.error.statusCode===404?"Page <b>404</b>":(le=j.error)==null?void 0:le.message});useUiStore();const re=useDatasStore();return re.parseRoute(),[m,L]=withAsyncContext(()=>re.getBase()),await m,L(),(le,ve)=>(openBlock(),createElementBlock("div",_hoisted_1,[createVNode(HeaderBlock),createVNode(NotFoundPage,{title:ee.value},null,8,["title"])],512))}},ErrorComponent=_export_sfc$1(_sfc_main$1,[["__scopeId","data-v-a3a0b740"]]),_sfc_main={__name:"nuxt-root",setup($){const m=()=>null,L=useNuxtApp(),j=L.deferHydration();if(L.isHydrating){const ve=L.hooks.hookOnce("app:error",j);useRouter().beforeEach(ve)}const ee=!1;provide(PageRouteSymbol,useRoute$1()),L.hooks.callHookWith(ve=>ve.map(ye=>ye()),"vue:setup");const re=useError();onErrorCaptured((ve,ye,Ee)=>{if(L.hooks.callHook("vue:error",ve,ye,Ee).catch(Me=>console.error("[nuxt] Error in `vue:error` hook",Me)),isNuxtError(ve)&&(ve.fatal||ve.unhandled))return L.runWithContext(()=>showError(ve)),!1});const le=!1;return(ve,ye)=>(openBlock(),createBlock(Suspense,{onResolve:unref(j)},{default:withCtx(()=>[unref(re)?(openBlock(),createBlock(unref(ErrorComponent),{key:0,error:unref(re)},null,8,["error"])):unref(le)?(openBlock(),createBlock(unref(m),{key:1,context:unref(le)},null,8,["context"])):unref(ee)?(openBlock(),createBlock(resolveDynamicComponent(unref(ee)),{key:2})):(openBlock(),createBlock(unref(AppComponent),{key:3}))]),_:1},8,["onResolve"]))}},RootComponent=_sfc_main;let entry;{let $;entry=async function(){var le,ve;if($)return $;const j=!!((le=window.__NUXT__)!=null&&le.serverRendered||((ve=document.getElementById("__NUXT_DATA__"))==null?void 0:ve.dataset.ssr)==="true")?createSSRApp(RootComponent):createApp(RootComponent),ee=createNuxtApp({vueApp:j});async function re(ye){await ee.callHook("app:error",ye),ee.payload.error=ee.payload.error||createError(ye)}j.config.errorHandler=re;try{await applyPlugins(ee,plugins)}catch(ye){re(ye)}try{await ee.hooks.callHook("app:created",j),await ee.hooks.callHook("app:beforeMount",j),j.mount(vueAppRootContainer),await ee.hooks.callHook("app:mounted",j),await nextTick()}catch(ye){re(ye)}return j.config.errorHandler===re&&(j.config.errorHandler=void 0),j},$=entry().catch(m=>{throw console.error("Error while mounting app:",m),m})}export{useSaveTransition as $,pushScopeId as A,popScopeId as B,ColorFadeTextElt as C,DeviceHelper as D,AudioPlayer as E,Fragment as F,withCtx as G,TransitionGroup as H,createStaticVNode as I,CtaBtn as J,ValuePopupElt as K,LineSlideTextElt as L,ColorBlinkElt as M,NotFoundPage as N,LinkBtn as O,LanguageElt as P,createTextVNode as Q,useWebglStore as R,SplitText as S,TextIndicationElt as T,useDisposableRef as U,Vue3Lottie as V,onBeforeMount as W,Preloader$1 as X,ScrollManager$1 as Y,WindowResizeObserver$1 as Z,_export_sfc$1 as _,useRoute$1 as a,Quaternion as a$,Page as a0,GLOBAL as a1,useNuxtApp as a2,mergeModels as a3,useModel as a4,withDirectives as a5,vModelSelect as a6,vModelDynamic as a7,vModelText as a8,Transition as a9,Sprite as aA,Debugger$1 as aB,DebuggerUtils as aC,Vector3 as aD,TorusGeometry as aE,ShaderMaterial as aF,Color as aG,Mesh as aH,WebGLRenderer as aI,Scene as aJ,OrthographicCamera as aK,lerp as aL,remap as aM,_resourcesFileSize as aN,EventDispatcher$1 as aO,Euler as aP,PerspectiveCamera as aQ,WebglApp$1 as aR,WebGLRenderTarget as aS,ConfigVersioning as aT,EffectScope as aU,howler as aV,Ray as aW,Plane as aX,EventDispatcher$2 as aY,MOUSE as aZ,TOUCH as a_,defineStore as aa,axios$1 as ab,useRuntimeConfig as ac,reactive as ad,useGtag as ae,markRaw as af,Parser as ag,asyncDataDefaults as ah,shallowRef as ai,toRef as aj,onScopeDispose as ak,createError as al,getCurrentInstance as am,getCurrentScope as an,defineComponent as ao,provide as ap,EventDispatcher as aq,ResourceLoader as ar,bindAll$1 as as,RafHelper$1 as at,Clock as au,getDefaultExportFromCjs as av,autoBind as aw,Vector2 as ax,Object3D as ay,SpriteMaterial as az,unref as b,Spherical as b0,MathUtils as b1,Vector4 as b2,Matrix4 as b3,mergeDeep as b4,InstancedBufferGeometry as b5,PlaneGeometry as b6,InstancedBufferAttribute as b7,RepeatWrapping as b8,InstancedMesh as b9,Camera as bA,NearestFilter as bB,Triangle as bC,RedFormat as bD,RGFormat as bE,DebugTexturesComponent as bF,config as bG,BufferAttribute as bH,GLSL3 as bI,BoxGeometry as bJ,ShaderLib as bK,LinearMipmapLinearFilter as bL,ClampToEdgeWrapping as bM,Points as bN,Sphere as bO,Box3 as bP,MirroredRepeatWrapping as bQ,useTransitionStore as bR,PMREMGenerator as bS,AnimationMixer as bT,_globalRessources as bU,DEFAULT_LANG as bV,storeToRefs as bW,renderSlot as bX,HeaderBlock as bY,LogoSvg as bZ,Lenis as b_,Matrix3 as ba,Texture as bb,LinearFilter as bc,TextureLoader as bd,BackSide as be,Raycaster as bf,RawShaderMaterial as bg,DoubleSide as bh,AdditiveBlending as bi,LinearSRGBColorSpace as bj,NoBlending as bk,NormalBlending as bl,SubtractiveBlending as bm,MultiplyBlending as bn,CylinderGeometry as bo,FrontSide as bp,IcosahedronGeometry as bq,BufferGeometry as br,Float32BufferAttribute as bs,UniformsUtils as bt,HalfFloatType as bu,globalConfig as bv,RGBAFormat as bw,SRGBColorSpace as bx,DepthTexture as by,MeshBasicMaterial as bz,createBlock as c,createElementBlock as d,useUiStore as e,onMounted as f,onBeforeUnmount as g,computed as h,resolveDynamicComponent as i,watch as j,onUnmounted as k,gsapWithCSS as l,mergeProps as m,nextTick as n,openBlock as o,publicAssetsURL as p,createBaseVNode as q,ref as r,normalizeStyle as s,toDisplayString as t,useDatasStore as u,createVNode as v,withAsyncContext as w,renderList as x,normalizeClass as y,createCommentVNode as z};
