import{b_ as T,E as C}from"./BwWP8iEj.js";class q{constructor({autoplay:i=!0}={}){this.queue=[],this.last=performance.now(),this.autoplay=i,this.frame=this.frame.bind(this),typeof window<"u"&&requestAnimationFrame(this.frame)}frame(i){this.autoplay&&this.update(i),requestAnimationFrame(this.frame)}step(i){this.update(this.last+i)}update(i){let s=i-this.last;this.autoplay&&(s=Math.min(150,s)),this.last=i;for(let o=this.queue.length-1;o>=0;o--){const e=this.queue[o];if(e.fps){let r=i-e.last;if(this.autoplay&&(r=Math.min(e.delta*5,r)),r<e.delta)continue;e(r===1/0?e.delta:r,i,++e.frame),e.last=i;continue}e(s,i)}}add(i,s){s&&(i.fps=s,i.last=-1/0,i.frame=-1,i.delta=1e3/s),this.queue.includes(i)||this.queue.unshift(i)}remove(i){this.queue.includes(i)&&this.queue.splice(this.queue.indexOf(i),1)}}const _=new q,u={linear:function(t){return t},inQuad:function(t){return t*t},outQuad:function(t){return t*(2-t)},inOutQuad:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},inCubic:function(t){return t*t*t},outCubic:function(t){return--t*t*t+1},inOutCubic:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},inQuart:function(t){return t*t*t*t},outQuart:function(t){return 1- --t*t*t*t},inOutQuart:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},inQuint:function(t){return t*t*t*t*t},outQuint:function(t){return--t*t*t*t*t+1},inOutQuint:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},inSine:function(t){return 1-Math.cos(t*Math.PI/2)},outSine:function(t){return Math.sin(t*Math.PI/2)},inOutSine:function(t){return .5*(1-Math.cos(Math.PI*t))},inExpo:function(t){return t===0?0:Math.pow(1024,t-1)},outExpo:function(t){return t===1?1:1-Math.pow(2,-10*t)},inOutExpo:function(t){return t===0?0:t===1?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)},inCirc:function(t){return 1-Math.sqrt(1-t*t)},outCirc:function(t){return Math.sqrt(1- --t*t)},inOutCirc:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},inElastic:function(t,i=1,s=.4){let o;return t===0?0:t===1?1:(!i||i<1?(i=1,o=s/4):o=s*Math.asin(1/i)/(2*Math.PI),-(i*Math.pow(2,10*(t-=1))*Math.sin((t-o)*(2*Math.PI)/s)))},outElastic:function(t,i=1,s=.4){let o;return t===0?0:t===1?1:(!i||i<1?(i=1,o=s/4):o=s*Math.asin(1/i)/(2*Math.PI),i*Math.pow(2,-10*t)*Math.sin((t-o)*(2*Math.PI)/s)+1)},inOutElastic:function(t,i=1,s=.4){let o;return t===0?0:t===1?1:(!i||i<1?(i=1,o=s/4):o=s*Math.asin(1/i)/(2*Math.PI),(t*=2)<1?-.5*(i*Math.pow(2,10*(t-=1))*Math.sin((t-o)*(2*Math.PI)/s)):i*Math.pow(2,-10*(t-=1))*Math.sin((t-o)*(2*Math.PI)/s)*.5+1)},inBack:function(t){return t*t*((1.70158+1)*t-1.70158)},outBack:function(t){return--t*t*((1.70158+1)*t+1.70158)+1},inOutBack:function(t){const i=2.5949095;return(t*=2)<1?.5*(t*t*((i+1)*t-i)):.5*((t-=2)*t*((i+1)*t+i)+2)},inBounce:function(t){return 1-u.outBounce(1-t)},outBounce:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},inOutBounce:function(t){return t<.5?u.inBounce(t*2)*.5:u.outBounce(t*2-1)*.5+.5}};class O{constructor(i=_){const s=this.queue=[];let o=this.defaultEase="outCubic";this.render=this.render.bind(this),i.add(this.render),this.Animate=class{constructor(e,r,h){if(e&&e.forEach&&typeof e[0]=="object")return this.stagger(e,r,h);this.elapsed=0,this.object=e,this.duration=r,this.delay=0,this.suffix={},this.from={},this.to=Object.assign({},h),["ease","delay","spring","damping","repeat","repeatDelay","yoyo","yoyoEase"].forEach(n=>{this.to[n]!==void 0&&(this[n]=this.to[n],delete this.to[n])}),u[this.ease]||(this.ease=o),this.yoyo&&(this.yoyoEase=u[this.yoyoEase]||(this.ease.includes("inOut")||this.ease==="linear"?u[this.ease]:this.ease.includes("out")?u[this.ease.replace("out","in")]:u[this.ease.replace("in","out")])),this.ease=u[this.ease],["update","complete"].forEach(n=>{this.to[n]!==void 0&&(this[n+"Callbacks"]||(this[n+"Callbacks"]=[]),this[n+"Callbacks"].push(this.to[n]),delete this.to[n])}),e&&!e._anims&&(Object.defineProperty(e,"_anims",{enumerable:!1,writable:!0}),e._anims={});for(const n in this.to)if(e._anims[n]&&e._anims[n].override(n),this.from[n]=e[n],e._anims[n]=this,typeof this.from[n]=="string"){const a=this.from[n].split(/([^\d-.]+)/);this.from[n]=Number.parseFloat(this.from[n]),typeof this.to[n]=="string"&&(this.to[n]=Number.parseFloat(this.to[n])),a.length>2&&(this.suffix[n]=a[a.length-2])}return s.push(this),this}update(e){this.elapsed+=e;const r=Math.max(0,Math.min(1,(this.elapsed-this.delay)/this.duration)),h=this.ease(r,this.spring,this.damping);for(const n in this.to)this.object[n]=this.from[n]+(this.to[n]-this.from[n])*h,this.suffix[n]&&(this.object[n]+=this.suffix[n]);this.updateCallbacks&&this.updateCallbacks.forEach(n=>n&&n(r)),r===1&&this.complete()}complete(){if(this.repeat){this.repeat>0&&this.repeat--,this.elapsed=0,this.delay=this.repeatDelay||0,this.yoyo&&this.reverse();return}for(const e in this.to)delete this.object._anims[e];this.stop(),this.completeCallbacks&&this.completeCallbacks.forEach(e=>e&&e()),this._promise&&this._promise.resolve()}stop(){s.includes(this)&&s.splice(s.indexOf(this),1)}stagger(e,r,h){const n=h.stagger||0,a=typeof h.stagger=="function"?h.stagger:(f,p)=>n<0?-n*(p-1)+n*f:n*f,l=h.staggerComplete;h.stagger&&delete h.stagger,h.staggerComplete&&delete h.staggerComplete;const M=h.delay||0;let c;const g=e.map((f,p)=>{h.delay=M+a(p,e.length);const E=new m(f,r,h);return(!c||h.delay>c.delay)&&(c=E),E});return l&&c.onComplete(l),g}reverse(){for(const r in this.to){const h=this.to[r];this.to[r]=this.from[r],this.from[r]=h}const e=this.ease;this.ease=this.yoyoEase,this.yoyoEase=e}override(e){delete this.from[e],delete this.to[e],Object.keys(this.to).length||this.stop()}onUpdate(e){return this.updateCallbacks||(this.updateCallbacks=[]),this.updateCallbacks.push(e),this}onComplete(e){return this.completeCallbacks||(this.completeCallbacks=[]),this.completeCallbacks.push(e),this}promise(){return this._promise?this._promise:this._promise=P()}static clear(e){if(!(!e||!e._anims))for(const r in e._anims)e._anims[r].stop(),delete e._anims[r]}static setDefaultEase(e){o=e}},this.Timeout=(e,r,h)=>{const n={};r&&(n.complete=r),h&&(n.update=h);const a=new this.Animate(null,e,n),l=a.promise();return l.clear=a.stop.bind(a),l}}render(i,s){for(let o=this.queue.length-1;o>=0;o--){const e=this.queue[o];e.update&&e.update(i,s)}}}function P(){let t;const i=new Promise(s=>t=s);return i.resolve=t,i}const{Animate:m,Timeout:y}=new O;class Z{constructor(){this.events=[]}on(i,s){this.events.push({name:i,callback:s})}off(i,s){for(let o=this.events.length-1;o>=0;o--)this.events[o].name===i&&this.events[o].callback===s&&this.events.splice(o,1)}emit(i,s={}){this.events.forEach(o=>{o.name===i&&o.callback(s)})}}const b=200,w=100,H=2e3,I=10,d={START_HOLD:"start_hold",CANCEL_HOLD:"cancel_hold",ENTER_ZOOM:"enter_zoom",EXIT_ZOOM:"exit_zoom"};class L{constructor(i,s,o){if(!i||!s)throw new Error("InteractionController: Missing scroll container or content");this._isInitialized=!1,this.lenis=null,this.quickZoom=!1,this._isPaused=!1,this.isPreventHold=!1,this._delayTimer=null,this._holdTimer=null,this._downX=0,this._downY=0,this.emitter=new Z,this.elemWrapper=i,this.elemContent=s,this.interactionElement=o||window,this.holdProgress=0,this._onKeyDown=this._onKeyDown.bind(this),this._onDown=this._onDown.bind(this),this._onMove=this._onMove.bind(this),this._onUp=this._onUp.bind(this),this._onWheel=this._onWheel.bind(this),this._tick=this._tick.bind(this),this._startHold=this._startHold.bind(this),this.enterZoom=this.enterZoom.bind(this),this.exitZoom=this.exitZoom.bind(this),this._init()}_init(){this._isInitialized||(this._isInitialized=!0,this._addScrollHandler(),this._addHoldHandler(),_.add(this._tick,70))}_addScrollHandler(){this.lenis=new T({wrapper:this.elemWrapper,content:this.elemContent,syncTouch:!0,gestureOrientation:"both",lerp:.04,syncTouchLerp:.075,syncTouchInertiaLerp:.075}),window.addEventListener("keydown",this._onKeyDown)}_addHoldHandler(){this.interactionElement.addEventListener("mousedown",this._onDown),this.interactionElement.addEventListener("wheel",this._onWheel)}_tick(i,s){this.lenis.raf(s)}_onKeyDown(i){this._isPaused&&i.key===" "&&i.preventDefault()}_onDown(i){if(this.quickZoom||i.button===2||this._isPaused||this.isPreventHold)return;const{clientX:s,clientY:o}=i.targetTouches?i.targetTouches[0]:i;this._downX=s,this._downY=o,this._delayTimer=y(b,this._startHold),this.interactionElement.addEventListener("mousemove",this._onMove),this.interactionElement.addEventListener("mouseup",this._onUp)}_onMove(i){if(this.quickZoom)return;const{clientX:s,clientY:o}=i.targetTouches?i.targetTouches[0]:i;Math.max(Math.abs(s-this._downX),Math.abs(o-this._downY))>I&&this._onUp()}_onUp(){this.quickZoom||(this._delayTimer&&this._delayTimer.clear(),this._holdTimer&&this.cancelHold(),this.interactionElement.removeEventListener("mousemove",this._onMove),this.interactionElement.removeEventListener("mouseup",this._onUp))}_onWheel(){this.quickZoom||this._onUp()}_startHold(i=H){new m(this,0,{holdProgress:this.holdProgress}),this._holdTimer=y(i,this.enterZoom,s=>{this.holdProgress=s}),this.emitter.emit(d.START_HOLD,{quickZoom:this.quickZoom})}_clearTimers(){this._delayTimer&&this._delayTimer.clear(),this._holdTimer&&this._holdTimer.clear(),this._delayTimer=null,this._holdTimer=null}cancelHold(){this._clearTimers(),this._onUp(),this.emitter.emit(d.CANCEL_HOLD,{quickZoom:this.quickZoom}),new m(this,700,{holdProgress:0})}enterZoom(){C.play("Release"),this.pause(),this.emitter.emit(d.ENTER_ZOOM,{quickZoom:this.quickZoom}),new m(this,0,{holdProgress:0})}exitZoom(){this.resume(),this.emitter.emit(d.EXIT_ZOOM,{quickZoom:this.quickZoom})}pause(){this._clearTimers(),this._onUp(),this.lenis.isLocked=!0,this._isPaused=!0}resume(){this.lenis.isLocked=!1,this._isPaused=!1}clickZoom(){this.quickZoom||(this.quickZoom=!0,this._startHold(w),setTimeout(()=>{this.quickZoom=!1},w+1))}setIsPreventHold(i){this.isPreventHold=i,this.isPreventHold&&this._onUp()}on(i,s){this.emitter.on(i,s)}off(i,s){this.emitter.off(i,s)}destroy(){_.remove(this._tick),this.interactionElement.removeEventListener("mousedown",this._onDown),this.interactionElement.removeEventListener("wheel",this._onWheel),window.removeEventListener("keydown",this._onKeyDown),this._clearTimers(),this._onUp(),this.emitter.events=[],this.lenis.destroy()}}export{m as A,d as E,H,L as I,w as Q,_ as T,u as a};
