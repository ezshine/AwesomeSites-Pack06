"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[735],{6408:function(e,t,r){r.d(t,{Z:function(){return u}});var n,l,a=r(4090),i=r(2020);let s=null!=(n=window.document)&&n.createElement||(null==(l=window.navigator)?void 0:l.product)==="ReactNative"?a.useLayoutEffect:a.useEffect;function u(){let e=(0,i.Ue)(e=>({current:[],version:0,set:e}));return{In:t=>{let{children:r}=t,n=e(e=>e.set),l=e(e=>e.version);return s(()=>{n(e=>({version:e.version+1}))},[]),s(()=>(n(e=>{let{current:t}=e;return{current:[...t,r]}}),()=>n(e=>{let{current:t}=e;return{current:t.filter(e=>e!==r)}})),[r,l]),null},Out:()=>{let t=e(e=>e.current);return a.createElement(a.Fragment,null,t)}}}},7735:function(e,t,r){r.r(t),r.d(t,{default:function(){return b}});var n=r(3827),l=r(9631),a=r(4090),i=r(2647);let s=(0,a.createContext)(null);function u(e){let{iterations:t=10,ms:r=250,threshold:n=.75,step:l=.1,factor:u=.5,flipflops:c=1/0,bounds:f=e=>e>100?[60,100]:[40,60],onIncline:o,onDecline:p,onChange:h,onFallback:d,children:b}=e,[v,m]=(0,a.useState)(()=>({fps:0,index:0,factor:u,flipped:0,refreshrate:0,fallback:!1,frames:[],averages:[],subscriptions:new Map,subscribe:e=>{let t=Symbol();return v.subscriptions.set(t,e.current),()=>void v.subscriptions.delete(t)}})),g=0;return(0,i.C)(()=>{let{frames:e,averages:a}=v;if(!v.fallback&&a.length<t){e.push(performance.now());let i=e[e.length-1]-e[0];if(i>=r){if(v.fps=Math.round(e.length/i*1e3)/1,v.refreshrate=Math.max(v.refreshrate,v.fps),a[v.index++%t]=v.fps,a.length===t){let[e,r]=f(v.refreshrate),i=a.filter(e=>e>=r),s=a.filter(t=>t<e);i.length>t*n&&(v.factor=Math.min(1,v.factor+l),v.flipped++,o&&o(v),v.subscriptions.forEach(e=>e.onIncline&&e.onIncline(v))),s.length>t*n&&(v.factor=Math.max(0,v.factor-l),v.flipped++,p&&p(v),v.subscriptions.forEach(e=>e.onDecline&&e.onDecline(v))),g!==v.factor&&(g=v.factor,h&&h(v),v.subscriptions.forEach(e=>e.onChange&&e.onChange(v))),v.flipped>c&&!v.fallback&&(v.fallback=!0,d&&d(v),v.subscriptions.forEach(e=>e.onFallback&&e.onFallback(v))),v.averages=[]}v.frames=[]}}}),a.createElement(s.Provider,{value:v},b)}var c=r(6376);function f(e){let{all:t,scene:r,camera:n}=e,l=(0,i.A)(e=>{let{gl:t}=e;return t}),s=(0,i.A)(e=>{let{camera:t}=e;return t}),u=(0,i.A)(e=>{let{scene:t}=e;return t});return a.useLayoutEffect(()=>{let e=[];t&&(r||u).traverse(t=>{!1===t.visible&&(e.push(t),t.visible=!0)}),l.compile(r||u,n||s);let a=new c.WebGLCubeRenderTarget(128);new c.CubeCamera(.01,1e5,a).update(l,r||u),a.dispose(),e.forEach(e=>e.visible=!1)},[]),null}var o=r(6194),p=r(7467),h=r(6554),d=r.n(h),b=e=>{let{...t}=e,r=(0,p.Z)(e=>e.dpr),i=(0,p.Z)(e=>e.perf),s=(0,p.Z)(e=>e.antialias),c=(0,p.Z)(e=>e.setQualityStatus),h=(0,p.Z)(e=>e.isClear),b=(0,p.Z)(e=>e.setDecline);(0,a.useEffect)(()=>{let e=new(d())().getResult();("mobile"===e.device.type||"tablet"===e.device.type)&&c("low")},[]);let v=e=>{b(e.fps,e.refreshrate)};return(0,n.jsxs)(l.Xz,{...t,dpr:r,performance:{min:i,current:i,max:i},gl:{antialias:s},children:[h&&(0,n.jsx)(u,{onDecline:e=>v(e)}),(0,n.jsx)(o.v.Out,{}),(0,n.jsx)(f,{all:!0})]})}},6194:function(e,t,r){r.d(t,{v:function(){return n}});let n=(0,r(6408).Z)()}}]);