"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[794],{6408:function(e,t,r){r.d(t,{Z:function(){return o}});var n,l,u=r(4090),a=r(2020);let c=null!=(n=window.document)&&n.createElement||(null==(l=window.navigator)?void 0:l.product)==="ReactNative"?u.useLayoutEffect:u.useEffect;function o(){let e=(0,a.Ue)(e=>({current:[],version:0,set:e}));return{In:t=>{let{children:r}=t,n=e(e=>e.set),l=e(e=>e.version);return c(()=>{n(e=>({version:e.version+1}))},[]),c(()=>(n(e=>{let{current:t}=e;return{current:[...t,r]}}),()=>n(e=>{let{current:t}=e;return{current:t.filter(e=>e!==r)}})),[r,l]),null},Out:()=>{let t=e(e=>e.current);return u.createElement(u.Fragment,null,t)}}}},5794:function(e,t,r){r.r(t),r.d(t,{default:function(){return Z}});var n=r(3827),l=r(4090),u=r(2110),a=r(6376),c=r(2647),o=r(6408);let i=e=>e&&e.isOrthographicCamera,s=new a.Color,f=(0,o.Z)();function d(e,t){let{right:r,top:n,left:l,bottom:u,width:a,height:c}=t,o=t.bottom<0||n>e.height||r<0||t.left>e.width;if("top"in e){let t=e.top+e.height;return{position:{width:a,height:c,left:l-e.left,top:n,bottom:t-u,right:r},isOffscreen:o}}return{position:{width:a,height:c,top:n,left:l,bottom:e.height-u,right:r},isOffscreen:o}}function g(e,t){let r,{left:n,bottom:l,width:u,height:a}=t,c=u/a;return i(e.camera)?(e.camera.left!==-(u/2)||e.camera.right!==u/2||e.camera.top!==a/2||e.camera.bottom!==-(a/2))&&(Object.assign(e.camera,{left:-(u/2),right:u/2,top:a/2,bottom:-(a/2)}),e.camera.updateProjectionMatrix()):e.camera.aspect!==c&&(e.camera.aspect=c,e.camera.updateProjectionMatrix()),r=e.gl.autoClear,e.gl.autoClear=!1,e.gl.setViewport(n,l,u,a),e.gl.setScissor(n,l,u,a),e.gl.setScissorTest(!0),r}function m(e,t){e.gl.setScissorTest(!1),e.gl.autoClear=t}function v(e){e.gl.getClearColor(s),e.gl.setClearColor(s,e.gl.getClearAlpha()),e.gl.clear(!0,!0)}function p(e){let{visible:t=!0,canvasSize:r,scene:n,index:u,children:a,frames:o,rect:i,track:s}=e,f=(0,c.A)(),[p,h]=l.useState(!1),E=0;return(0,c.C)(e=>{if(o===1/0||E<=o){var l;s&&(i.current=null==(l=s.current)?void 0:l.getBoundingClientRect()),E++}if(i.current){let{position:l,isOffscreen:u}=d(r,i.current);if(p!==u&&h(u),t&&!p&&i.current){let t=g(e,l);e.gl.render(a?e.scene:n,e.camera),m(e,t)}}},u),l.useLayoutEffect(()=>{let e=i.current;if(e&&(!t||!p)){let{position:t}=d(r,e),n=g(f,t);v(f),m(f,n)}},[t,p]),l.useEffect(()=>{if(!s)return;let e=i.current,t=f.get().events.connected;return f.setEvents({connected:s.current}),()=>{if(e){let{position:t}=d(r,e),n=g(f,t);v(f),m(f,n)}f.setEvents({connected:t})}},[s]),l.useEffect(()=>{"top"in r||console.warn("Detected @react-three/fiber canvas size does not include position information. <View /> may not work as expected. Upgrade to @react-three/fiber ^8.1.0 for support.\n See https://github.com/pmndrs/drei/issues/944")},[]),l.createElement(l.Fragment,null,a,l.createElement("group",{onPointerOver:()=>null}))}let h=l.forwardRef((e,t)=>{var r,n,o,i;let{track:s,visible:f=!0,index:d=1,id:g,style:m,className:v,frames:h=1/0,children:E,...w}=e,b=l.useRef(null),{size:R,scene:S}=(0,c.A)(),[y]=l.useState(()=>new a.Scene),[C,j]=l.useReducer(()=>!0,!1),x=l.useCallback((e,t)=>{if(b.current&&s&&s.current&&e.target===s.current){let{width:r,height:n,left:l,top:u}=b.current,a=e.clientX-l,c=e.clientY-u;t.pointer.set(a/r*2-1,-(c/n*2)+1),t.raycaster.setFromCamera(t.pointer,t.camera)}},[b,s]);return l.useEffect(()=>{var e;s&&(b.current=null==(e=s.current)?void 0:e.getBoundingClientRect()),j()},[s]),l.createElement("group",(0,u.Z)({ref:t},w),C&&(0,c.g)(l.createElement(p,{visible:f,canvasSize:R,frames:h,scene:S,track:s,rect:b,index:d},E),y,{events:{compute:x,priority:d},size:{width:null==(r=b.current)?void 0:r.width,height:null==(n=b.current)?void 0:n.height,top:null==(o=b.current)?void 0:o.top,left:null==(i=b.current)?void 0:i.left}}))}),E=l.forwardRef((e,t)=>{let{as:r="div",id:n,visible:a,className:c,style:o,index:i=1,track:s,frames:d=1/0,children:g,...m}=e,v=l.useId(),p=l.useRef(null);return l.useImperativeHandle(t,()=>p.current),l.createElement(l.Fragment,null,l.createElement(r,(0,u.Z)({ref:p,id:n,className:c,style:o},m)),l.createElement(f.In,null,l.createElement(h,{visible:a,key:v,track:p,frames:d,index:i},g)))}),w=l.forwardRef((e,t)=>l.useContext(c.f)?l.createElement(h,(0,u.Z)({ref:t},e)):l.createElement(E,(0,u.Z)({ref:t},e)));w.Port=()=>l.createElement(f.Out,null);var b=r(3618),R=r(6194);let S=e=>{let{children:t}=e;return(0,n.jsx)(R.v.In,{children:t})};var y=r(7467);let C=!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?l.useEffect:l.useLayoutEffect,j=0,x=function(e){let t="function"==typeof e?function(e){let t;let r=new Set,n=(e,n)=>{let l="function"==typeof e?e(t):e;if(l!==t){let e=t;t=n?l:Object.assign({},t,l),r.forEach(r=>r(t,e))}},l=()=>t,u=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.is;console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let a=n(t);function c(){let r=n(t);if(!u(a,r)){let t=a;e(a=r,t)}}return r.add(c),()=>r.delete(c)},a={setState:n,getState:l,subscribe:(e,t,n)=>t||n?u(e,t,n):(r.add(e),()=>r.delete(e)),destroy:()=>r.clear()};return t=e(n,l,a),a}(e):e,r=function(){let e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.getState,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.is,[,u]=(0,l.useReducer)(e=>e+1,0),a=t.getState(),c=(0,l.useRef)(a),o=(0,l.useRef)(r),i=(0,l.useRef)(n),s=(0,l.useRef)(!1),f=(0,l.useRef)();void 0===f.current&&(f.current=r(a));let d=!1;(c.current!==a||o.current!==r||i.current!==n||s.current)&&(e=r(a),d=!n(f.current,e)),C(()=>{d&&(f.current=e),c.current=a,o.current=r,i.current=n,s.current=!1});let g=(0,l.useRef)(a);C(()=>{let e=()=>{try{let e=t.getState(),r=o.current(e);i.current(f.current,r)||(c.current=e,f.current=r,u())}catch(e){s.current=!0,u()}},r=t.subscribe(e);return t.getState()!==g.current&&e(),r},[]);let m=d?e:f.current;return(0,l.useDebugValue)(m),m};return Object.assign(r,t),r[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");let e=[r,t];return{next(){let t=e.length<=0;return{value:e.shift(),done:t}}}},r}(e=>(a.DefaultLoadingManager.onStart=(t,r,n)=>{e({active:!0,item:t,loaded:r,total:n,progress:(r-j)/(n-j)*100})},a.DefaultLoadingManager.onLoad=()=>{e({active:!1})},a.DefaultLoadingManager.onError=t=>e(e=>({errors:[...e.errors,t]})),a.DefaultLoadingManager.onProgress=(t,r,n)=>{r===n&&(j=n),e({active:!0,item:t,loaded:r,total:n,progress:(r-j)/(n-j)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0}));var k=()=>{let e=(0,y.Z)(e=>e.setLoadingInfo),[t,r]=(0,l.useState)(!1),{active:u,progress:a,loaded:c,total:o}=x();return u?e({active:u,progress:a,loaded:c,total:o}):t||(e({active:u,progress:a,loaded:c,total:o}),r(!0)),(0,n.jsx)("group",{})},L=r(8878);let P=l.forwardRef((e,t)=>{let{url:r,distance:n=1,loop:o=!0,autoplay:i,...s}=e,f=l.useRef(null);l.useImperativeHandle(t,()=>f.current,[]);let d=(0,c.A)(e=>{let{camera:t}=e;return t}),[g]=l.useState(()=>new a.AudioListener),m=(0,c.F)(a.AudioLoader,r);return l.useEffect(()=>{let e=f.current;e&&(e.setBuffer(m),e.setRefDistance(n),e.setLoop(o),i&&!e.isPlaying&&e.play())},[m,d,n,o]),l.useEffect(()=>{let e=f.current;return d.add(g),()=>{d.remove(g),e&&(e.isPlaying&&e.stop(),e.source&&e.source._connected&&e.disconnect())}},[]),l.createElement("positionalAudio",(0,u.Z)({ref:f,args:[g]},s))});var D=()=>{let e=(0,y.Z)(e=>e.loadingInfo),[t,r]=(0,l.useState)(!0);return(0,l.useEffect)(()=>{e.active||(r(!1),(async()=>{try{await Promise.all(L.X.filter(e=>e.skipPreload).map(e=>fetch(e.url,{method:"GET"})))}catch(e){console.error("Error preloading audio files:",e)}})())},[e.active]),(0,n.jsx)("group",{children:t&&L.X.filter(e=>!e.skipPreload).map((e,t)=>(0,n.jsx)(P,{url:e.url},t))})};let O=(0,l.forwardRef)((e,t)=>{let{id:r,children:u,orbit:a,className:c,...o}=e,i=(0,l.useRef)(null);(0,l.useImperativeHandle)(t,()=>i.current);let s=(0,l.useRef)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{ref:s,id:r,className:c,...o}),(0,n.jsx)(S,{children:(0,n.jsxs)(w,{track:s,children:[u,a&&(0,n.jsx)(b.z,{target:[0,2,7]}),(0,n.jsx)(D,{}),(0,n.jsx)(k,{})]})})]})});O.displayName="View";var Z=O},6194:function(e,t,r){r.d(t,{v:function(){return n}});let n=(0,r(6408).Z)()}}]);