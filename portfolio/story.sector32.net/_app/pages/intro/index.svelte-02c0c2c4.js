import{S as re,i as ae,s as le,k as q,e as f,j as $,L as oe,d as r,n as L,c as g,a as p,m as G,b as d,X as te,f as P,I as o,o as J,x as K,u as Q,v as Z,H as ee,A as he,N as de,O as M,P as W}from"../../chunks/vendor-e41d84ae.js";import{m as ce,a as ue,g as me}from"../../chunks/main.store-b2f445ba.js";import se from"./SvgBg.svelte-b8e426d5.js";import{S as fe}from"../../chunks/showHideFlash-079e5ce5.js";import{A as ge}from"../../chunks/airstripLights-436a2309.js";import{E as pe}from"../../chunks/Extra-c69edcfb.js";import"../../chunks/gridBlinker-76c2d313.js";import"../../chunks/RandomText-f5deae35.js";class ie{constructor(h,s=!1,i=NaN,c=NaN){this.element=h,this.scaleUp=s,this.width=i||this.element.offsetWidth,this.height=c||this.element.offsetHeight,this.ratio=this.width/this.height,window.addEventListener("resize",this.resizeHandler.bind(this)),this.resizeHandler()}blockHorizontalSizing(){this._blockHorizontalSizing=!0}blockVerticalSizing(){this._blockVerticalSizing=!0}resizeHandler(){let h=this.element.parentElement,s=h.offsetWidth,i=h.offsetHeight;s/i>this.ratio?!this._blockHorizontalSizing&&(i<=this.height||this.scaleUp)?this.setElement(i*this.ratio,i):this.setElement(this.width,this.height):!this._blockVerticalSizing&&(s<=this.width||this.scaleUp)?this.setElement(s,s/this.ratio):this.setElement(this.width,this.height)}setElement(h,s){this.element.style.width=h+"px",this.element.style.height=s+"px"}}const{document:ne}=de;function be(l){let h,s,i,c,y,D,b,v,C,u,a,S,V,j,T,A,X,E,Y,H,k,B,x,_,R;y=new se({}),v=new se({});let O={section:"intro",label:"intro"};return _=new pe({props:O}),l[10](_),{c(){h=q(),s=f("div"),i=f("div"),c=f("div"),$(y.$$.fragment),D=q(),b=f("div"),$(v.$$.fragment),C=q(),u=f("div"),a=f("div"),S=f("div"),V=q(),j=f("div"),T=q(),A=f("div"),X=q(),E=f("iframe"),Y=q(),H=f("div"),k=f("div"),B=f("div"),x=q(),$(_.$$.fragment),this.h()},l(e){oe('[data-svelte="svelte-1aon5on"]',ne.head).forEach(r),h=L(e),s=g(e,"DIV",{class:!0});var N=p(s);i=g(N,"DIV",{class:!0});var I=p(i);c=g(I,"DIV",{class:!0});var t=p(c);G(y.$$.fragment,t),t.forEach(r),D=L(I),b=g(I,"DIV",{class:!0});var n=p(b);G(v.$$.fragment,n),n.forEach(r),C=L(I),u=g(I,"DIV",{class:!0});var z=p(u);a=g(z,"DIV",{class:!0});var m=p(a);S=g(m,"DIV",{class:!0}),p(S).forEach(r),V=L(m),j=g(m,"DIV",{class:!0}),p(j).forEach(r),T=L(m),A=g(m,"DIV",{class:!0}),p(A).forEach(r),m.forEach(r),X=L(z),E=g(z,"IFRAME",{title:!0,class:!0}),p(E).forEach(r),z.forEach(r),I.forEach(r),N.forEach(r),Y=L(e),H=g(e,"DIV",{class:!0});var F=p(H);k=g(F,"DIV",{class:!0});var U=p(k);B=g(U,"DIV",{class:!0}),p(B).forEach(r),U.forEach(r),F.forEach(r),x=L(e),G(_.$$.fragment,e),this.h()},h(){ne.title="Intro",d(c,"class","bg bg-1 svelte-1c20jjn"),d(b,"class","bg bg-2 svelte-1c20jjn"),d(S,"class","anim_edge anim_edge-1 svelte-1c20jjn"),d(j,"class","anim_edge anim_edge-2 svelte-1c20jjn"),d(A,"class","anim_edge anim_edge-3 svelte-1c20jjn"),d(a,"class","anim_edges svelte-1c20jjn"),te(a,"visible",l[5]),d(E,"title",""),d(E,"class","iframe svelte-1c20jjn"),d(u,"class","anim svelte-1c20jjn"),d(i,"class","bg_wrapper svelte-1c20jjn"),d(s,"class","body svelte-1c20jjn"),d(B,"class","button svelte-1c20jjn"),d(k,"class","button_container svelte-1c20jjn"),d(H,"class","button_wrapper svelte-1c20jjn")},m(e,w){P(e,h,w),P(e,s,w),o(s,i),o(i,c),J(y,c,null),l[6](c),o(i,D),o(i,b),J(v,b,null),l[7](b),o(i,C),o(i,u),o(u,a),o(a,S),o(a,V),o(a,j),o(a,T),o(a,A),l[8](a),o(u,X),o(u,E),l[9](E),P(e,Y,w),P(e,H,w),o(H,k),o(k,B),P(e,x,w),J(_,e,w),R=!0},p(e,[w]){w&32&&te(a,"visible",e[5]);const N={};_.$set(N)},i(e){R||(K(y.$$.fragment,e),K(v.$$.fragment,e),K(_.$$.fragment,e),R=!0)},o(e){Q(y.$$.fragment,e),Q(v.$$.fragment,e),Q(_.$$.fragment,e),R=!1},d(e){e&&r(h),e&&r(s),Z(y),l[6](null),Z(v),l[7](null),l[8](null),l[9](null),e&&r(Y),e&&r(H),e&&r(x),l[10](null),Z(_,e)}}}function ve(l,h,s){let i,c,y;ee(l,ce,t=>s(17,i=t)),ee(l,ue,t=>s(18,c=t)),ee(l,me,t=>s(19,y=t));let D,b,v,C,u,a,S,V,j,T=!1,A=!1,X=!1;he(()=>{E(),u.show(),setTimeout(Y,2500)});function E(){window.onmessage=B,v=document.querySelector(".iframe"),v.src="/intro/intro.html",b=new _,C=new ie(document.querySelector(".anim_edges"),!1,900,450)}function Y(){A=!0,k()}function H(){X=!0,k()}function k(){A&&X&&(x("showIntro"),D=new R,D.show(),C.resizeHandler())}function B(t){t.data=="introStart"?H():t.data=="showButton"?b.btn.style.display="block":t.data=="animEnd"&&y("home")}function x(t){v.contentWindow.postMessage(t,"*")}class _{constructor(){this.btn=document.querySelector(".button"),this.btn.addEventListener("click",()=>{this.clickHandler(this)}),this.btn.addEventListener("mouseover",()=>{this.overHandler(this)}),this.btn.addEventListener("mouseout",()=>{this.outHandler(this)}),new ie(document.querySelector(".button_container"),!1,900,450).blockHorizontalSizing()}clickHandler(n){D.stop(),b.btn.style.display="none",x("click")}overHandler(n){x("over")}outHandler(n){x("out")}}class R{constructor(){this.isActive=!0,this.parent=document.querySelector(".body"),this.wrapper=document.querySelector(".bg_wrapper"),this.bg1=document.querySelector(".bg-1"),this.bg2=document.querySelector(".bg-2"),this.animate=document.querySelector(".iframe"),this.maxTiltH=4,this.maxTiltV=2,this.extraX=60,this.extraY=-40,window.addEventListener("resize",this.resizeHandler.bind(this)),this.resizeHandler(),this.loop(),c.register(this.loop.bind(this))}show(){let n=Array.from(this.bg1.querySelectorAll("#squares, #extra_2"));n=n.concat(Array.from(this.bg1.querySelectorAll("#lines-v > line, #lines-h > line"))),n=n.concat(Array.from(this.bg2.querySelectorAll("#lines-v > line, #lines-h > line"))),M.from(j,{duration:2,z:-40,ease:"power4.out"}),M.from(S,{duration:2,z:-200,ease:"power4.out"}),M.from(V,{duration:2,z:-600,ease:"power4.out"}),this.flash=new fe(n,70,20,this.continueShow1.bind(this),null,!1),this.flash.show(),s(5,T=!0),M.from(a.children,{delay:.6,duration:.5,opacity:1,scale:.3,z:1e3,stagger:.14,ease:"power4.out"})}continueShow1(){M.to(this,{duration:1.5,delay:.2,extraX:-3,extraY:1,ease:"power4.in",onComplete:this.continueShow2.bind(this)})}continueShow2(){x("start"),M.from(this,{duration:.6,extraX:10,extraY:-10,ease:"elastic.out",onComplete:this.startBgAnim.bind(this)}),this.stepper=null,this.flash=null;let n=Array.from(document.querySelectorAll(".anim_edge"));this.airstripLights=new ge(n,2,5,200)}startBgAnim(){M.to(this,{duration:6,extraX:3,extraY:-1,ease:"back.inOut",repeat:-1,yoyo:!0})}stop(){this.isActive=!1,this.endCounter=-20,this.endViews=[this.bg2,this.bg1],this.endViews=this.endViews.concat(Array.from(document.querySelectorAll(".anim_edge")))}loop(){let n=-this.maxTiltH+i.slowPctX*this.maxTiltH*2,z=-this.maxTiltV+i.slowPctY*this.maxTiltV*2,m=-this.extraX-n,F=-this.extraY+z;if(this.wrapper.style.transform=`rotateY(${m}deg) rotateX(${F}deg)`,this.isActive)this.stepper&&this.stepper.render(),this.flash&&this.flash.render(),this.gridBlinker&&this.gridBlinker.render(),this.airstripLights&&this.airstripLights.render(),this.airstripLights2&&this.airstripLights2.render(),this.airstripLights3&&this.airstripLights3.render();else if(this.endCounter++,this.endCounter%12==0&&this.endViews.length>0){let U=this.endViews.pop();U.style.display="none"}}resizeHandler(){let n=this.parent.offsetWidth,z=this.parent.offsetHeight,m=Math.max(n,z);m=m*2,this.wrapper.style.top=z*.5+"px",this.wrapper.style.left=n*.5+"px",this.bg1.style.width=this.bg2.style.width=m+"px",this.bg1.style.height=this.bg2.style.height=m+"px",this.animate.style.width=n+"px",this.animate.style.height=n+"px"}}function O(t){W[t?"unshift":"push"](()=>{S=t,s(2,S)})}function e(t){W[t?"unshift":"push"](()=>{V=t,s(3,V)})}function w(t){W[t?"unshift":"push"](()=>{a=t,s(1,a)})}function N(t){W[t?"unshift":"push"](()=>{j=t,s(4,j)})}function I(t){W[t?"unshift":"push"](()=>{u=t,s(0,u)})}return[u,a,S,V,j,T,O,e,w,N,I]}class ke extends re{constructor(h){super();ae(this,h,ve,be,le,{})}}export{ke as default};
