import{O as u,S as Z,i as H,s as O,e as v,c as g,a as w,d as y,b as _,f as T,I as q,J as S,H as A,A as B}from"../../../chunks/vendor-e41d84ae.js";import{a as E}from"../../../chunks/main.store-b2f445ba.js";var z,l,r,n=300,P=100,x=[],c,m,s,f,i;class R{constructor(){this.endSpeed=-.01,this.speed=0,this.speedIsZero=!0,this.setSpeed(-10,3)}setSpeed(e,a=1){this.speedIsZero=!1,this.endSpeed=-50*e,u.killTweensOf(this),u.to(this,{duration:a,endSpeed:-1,ease:"power4.inOut",onComplete:this.setSpeedHandler.bind(this)})}setSpeedHandler(){this.speedIsZero=!0}hide(){this.speedIsZero=!1,u.killTweensOf(this),u.to(this,{duration:1,endSpeed:0,ease:"sine.out"})}update(){this.speed+=(this.endSpeed-this.speed)*.1,this.speedIsZero&&this.endSpeed>-5&&this.endSpeed<=0&&(this.endSpeed*=1.1,this.endSpeed=Math.max(this.endSpeed,-5))}}function W(t){return f=new R,z=document.querySelector(".starfieldContainer"),l=document.querySelector(".starfield"),r=l.getContext("2d"),window.addEventListener("resize",b),b(),t.register(D),f}function d(t,e){return Math.random()*(e-t)+t}function $(t,e=!0){return e?(t.z=s.z.max,t.x=d(s.x.min,s.x.max)/(n/(n+t.z)),t.y=d(s.y.min,s.y.max)/(n/(n+t.z))):(t.z=s.z.min,t.x=d(s.x.min,s.x.max)/(n/(n-t.z)),t.y=d(s.y.min,s.y.max)/(n/(n-t.z))),t.x=d(s.x.min,s.x.max)/(n/(n+Math.abs(t.z))),t.y=d(s.y.min,s.y.max)/(n/(n+Math.abs(t.z))),t.vz=d(.5,1),t.s=0,t.sx=0,t.sy=0,t.os=t.s,t.osx=t.sx,t.osy=t.sy,t.hue=d(120,200),t.lightness=d(70,100),t.alpha=0,t.render=!1,t}function j(){f.update(),s={x:{min:-i.x,max:c-i.x},y:{min:-i.y,max:m-i.y},z:{min:-n,max:1e3}},x.length<P&&x.push($({}));for(var t=x.length;t--;){var e=x[t];e.z+=f.speed*e.vz,(e.sx-e.sr>s.x.max||e.sy-e.sr>s.y.max||e.z>s.z.max||e.sx+e.sr<s.x.min||e.sy+e.sr<s.y.min||e.z<s.z.min)&&$(e,e.z<=s.z.min),e.os=e.s,e.osx=e.sx,e.osy=e.sy}}function V(){r.save(),r.translate(i.x,i.y),r.clearRect(-i.x,-i.y,c,m);for(var t=x.length;t--;){var e=x[t];e.s=n/(n+e.z),e.sx=e.x*e.s,e.sy=e.y*e.s,e.alpha=(s.z.max-e.z)/(s.z.max/2),e.render&&(r.beginPath(),r.moveTo(e.sx,e.sy),r.lineTo(e.osx,e.osy),r.lineWidth=5,r.strokeStyle="hsla("+e.hue+", 100%, "+e.lightness+"%, "+e.alpha+")",r.stroke()),e.render=!0}r.restore()}function b(){const t=window.devicePixelRatio,e=z.offsetWidth,a=z.offsetHeight;c=l.width=e*t,m=l.height=a*t,l.style.width=e+"px",l.style.height=a+"px",i={x:c/2,y:m/2},s={x:{min:-i.x,max:c-i.x},y:{min:-i.y,max:m-i.y},z:{min:-n,max:1e3}}}function D(){j(),V()}function J(t){let e,a;return{c(){e=v("div"),a=v("canvas"),this.h()},l(h){e=g(h,"DIV",{class:!0});var o=w(e);a=g(o,"CANVAS",{class:!0}),w(a).forEach(y),o.forEach(y),this.h()},h(){_(a,"class","starfield svelte-1e36o0i"),_(e,"class","starfieldContainer svelte-1e36o0i")},m(h,o){T(h,e,o),q(e,a)},p:S,i:S,o:S,d(h){h&&y(e)}}}function L(t,e,a){let h;A(t,E,M=>a(5,h=M)),B(()=>{});let o;function C(){o=W(h)}function k(){o&&o.hide()}function I(){o.setSpeed(-3)}function F(){o.setSpeed(3)}return[C,k,I,F]}class K extends Z{constructor(e){super();H(this,e,L,J,O,{show:0,hide:1,goForward:2,goBack:3})}get show(){return this.$$.ctx[0]}get hide(){return this.$$.ctx[1]}get goForward(){return this.$$.ctx[2]}get goBack(){return this.$$.ctx[3]}}export{K as default};
