import{d as l,r as _,a4 as p,I as f,o as m,E as h,c as s,e as o,i as v,w as y,G as d,ai as g}from"./BNj6qnUa.js";import{u as x}from"./5RneVIuN.js";const b=["innerHTML"],C={key:1},H=l({__name:"Tweet",props:{url:{type:String,required:!0}},async setup(c){let t,a;const i=c,e=_(null),{data:n,refresh:k}=([t,a]=p(()=>x(()=>$fetch("/api/tweet-embed",{params:{url:i.url}}),{watch:[()=>i.url]},"$oKxfcexKYQ")),t=await t,a(),t);f({script:[{src:"https://platform.twitter.com/widgets.js",async:!0,defer:!0}]});const w=()=>{if(n.value&&e.value)if(window.twttr&&window.twttr.widgets)window.twttr.widgets.load(e.value);else{const r=new MutationObserver(()=>{window.twttr&&window.twttr.widgets&&(window.twttr.widgets.load(e.value),r.disconnect())});r.observe(document.head,{childList:!0,subtree:!0})}};return m(w),h(n,w),(r,L)=>{const u=g;return s(),o("div",{ref_key:"tweetContainer",ref:e},[v(u,null,{default:y(()=>[d(n)?(s(),o("div",{key:0,innerHTML:d(n).html},null,8,b)):(s(),o("div",C,"Loading tweet..."))]),_:1})],512)}}});export{H as default};
